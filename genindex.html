<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0f2262dc8cbc7463b98bc6ac56d0e1f727964eb279ef490e4236e396cd83cd444022b6b8b29f760662511be25f8145101b9ac6273a20bc55910b0ff68afd1b74ea30ba9c36511957bb1b37ececac4346102b330572f4cc9853b2f3c7bb614e9d2e0fa5d601d66f48e9bbeab530de793ae65e0372ac4a57780f459542c2e29025ec70042917880aaa9ffcad2852471dd0b6dc7aa112a099af465c0aa0d4048970bdddac39e65a545191cea7681eda64aacbf56c0f80d505b7d5449338652fedee658847b44e6ffb752a0eee8c3b6b3c1dcf527c9d80bc1e2157931e4a40882ed6fdb1c7be265dc5f4c80b0ec07cb5d0508be31bd00a8044f7c7d76b026219cbe8f6713e986970e17811aebb754a87080b67f1656cd543089fc71723d9cb95f7c4571954fc676af60b146053d816fb249243ed192daa36af9f4ed926847f57f35c86998ff23f2b5f1fafbab5000f62a2a7afa670fc4f6ad1a65435901346be94b0c3c82dc3cafa5d380671f8f876926c5b079d1b96aad410b75b6662250b45628fe59a07392b243b616e28e88cd28ee3f3232ce009b56f3fe58bc42c3e62d3387f5f049d391e898aa79644ecc45eaf63f1fec16ec4fbf755b96e28fe3e073d30c1427bd992e488b2cd976b9443024aeb288ac0fd007deaec931252cbfd0e739abb5300d0572f3881fd9c537f02f83f615d3d33d71af670478422ae30a18b2e01170700464e936988ac938e599466d054aa29ef94c2f02fd077fa66224f380d05bf622f31d973c2015245184da25097fa41297fa8f807515b134a6a500cc8227aead1c79f5dfdde9c191ae095544181f8eb03ec003be90e946567875373d0eabde5f3fe40e318573aaeca2087a1581c30d7b0cd8672a90317129eb376a9cd42df23c9fa590cc34cd5321834fb1932c8afbc7a4eb037ddac2e1f91de678b91c1410baba41db2a3b3cebf13f27060822734f280ac9e7aab455c67f93ca5d96057ee4a606243b545e3efc2e5ee0596c342a427f83365051b1c7b068c3fb338d2a7f9a71a82d0f276bf8418356de3f69fdf2313f974f35cc8598b7cf0363d6ff2079d1c762c66375237f61641701b56cc89ea726aecf0816e101ce4d346a2f1eb5039c1471ca6f0fd46a17eb8436e6a34df27ad28656d2968cea3c081ff946343f23e8eac15615d1f7fd0bb808e15f4f315ddf47fe332661efefa684884e753034935310a4165ff7b2ba4900d74f419f9325c2654f42d705a0e093a2eeb90df361d384ddb0a2177c9ef062a197618dfb0c4e587cf5ad388053c2584df7bb7baa12be35aaae365a8a5382d8b3cf2af0efa5c304774ab2f6f6592667b66ae6ab50a2a50c43056a80e6e1571c46ab8bfe328cf3832f8432d2d1f589b75d701f41f31db9536e646cf8c083a023940ec162f007b59cec38ad22f14ab45bfebda4beddc4d5136a3c4d11d7953f24b8d5d0162c8718e140cc4b6f0ce2dafbd001dbb14773bbd7d922b40e8df6ab17d122e67a406008232baa1eab6763e258715bafffb9670c75e989f3b45ea010724d486937f2403b7ee2f7644cefed31c9d8ae759003a6e00bfc36e1810ec388877e0b8063e059a9801f15e248f3a7138035977a21cedcb8e231d37d84b18e70b85d4e68a6a9469ae2ea0b0a0acb3ae5819e837c8369de2ebdbb3cd8d330c0a9c413f11625092e8bda74fb1ae48154e3fd699764abc6848807fd483f4082cf228be5a2d5dd3a436d5dd70db750b186caea8f91993f543930302685b618ce8cdc3b979909198a939446c940b3cba8d4467c904d357271d189e98b732cad7258cd5da0c59cb33188dafc43a5ccbbaea6f1c9ffc81d80351253c080b7a82873ef9bc8a245af5b8b91c9724dba9b9da39a35b2913a76013ceac418d03352e61a3cb07816bebbb822c129a02bb2fa148063369b9d45412a3dcefc6141042a8b03fe1337c9dd2b4c3736f08e0ea966e2796148381b05c76f2b3d039854a5a259e33504569a46edfd0680e4eeaef51b363265279ae93ca85263a7f45a46044a1e2e7c8dc9b59b27fddc18b442d5ad6d060ea101cf2273f76e01dfed2cff00ec443fdea3a9ea7a3bc5b070bba4311158ad38714804f2e8047117a216b997a6cfdc5f7e9350a77bf8b837c16a589967470695102942e5c1dd8e214ac4c7a805fceea679d5d902e06d7485d3937db7502dc6d87eb71dab5cce7b483aebb7e6d322503bebe47a4672eb89b62fb67bd5801b5d967914ad1c7bb989249141fb1b0ebd7423ac35e57af06a8b42e5b58b6b4982227db05ae5316b8f444d96305674f65a17d951c0dc4444517d5ff954903a9d8f34a0812f0a448d76baf92f6a1158cb69bbc1e73a879c7d42b29feb2980df2deaa4d0214433bfca32ea91abbd4838669d638120afcba52eaeeaf5feac7866cf14765de62bcd7f3223fca076ed306ffb4413eeaf8f88b74bd58a0dd53bb2c20069e519d5679cb1921ef824b99651de695339fdd59c944e2546e13824ea130c9055c796ec4c7a80825abcfeef5b30b3eaf2fe379e99184b5561b3556f190fac4a0f45cd3fa7d986bdb6a95e32c06545a7440b091b1f3de8265ad83683bb6d2c0c32474c4022b827763388331e35df917dc5c290c5aba885ad90c02b7febd223f8d56234986d6867e054f1ededfeb77a36c6c7b53ebdaba9a1e657dcd18e9c1f1c79b5ab2fff8aedd3efe91973971b039b720c0e006e722958b37940a97cc31b035fee1e20b30361051331b04ce3cbf95dd45c0669f902c8eafd42dea29c3cc9f591d67839a38704e561745c0c290685aec2ac4a01e29a6a32d177ae7e1f8f70bc6484c1d3de3ec91daea52c4d6c3002174179a1bf0ce301aa40b4724d58330c1e9c3b7b69b6119066b6b4262aa45a9d751512062209329785a8d4c045e2101986144be30c018f96255d013e8debefccf08d1a8dedba839373cbf9a07bf46b7d670c7dac9a26e30246bd15633970d832f31894403ebe7a01cf2f975c345eaa717c0d62d846d9c18465270d0ab90a457dc8b8fe0ccc685f8a5a9644784f95ce4b8ee52cf51f5fd38d7f13d281bafe6ae3e3dd4bb1cda7a31581fed1a7d411f784e22fdb3af28079e2ae506e07506f8bb1b9ae3071798c01e36c216759d296cceee047ab00cc117785fb64875ce1f9a6e17bbc4748529450a045cfee3d4a99dea8a21d9d873184d680289b08a015fa117fd8fdfcc351233a7993616f318058b03c77706e6a93e9b5f6ce3b4019ae98066325843fbb905e7c78c5ba2cc5fbfdf94a96a521230ec1c7d81337d206113bb1ca8d58b98e8541d63271d597c55ab2e1d44b7b383f815e88b4b4ef73c882c0bbf25d1713188b04680a7d0e6bcc50819696b3e8622367560fd140a2ca8bf08066deec1349d00fbdb1458b05931fd12c413a35269618e14a5a08318bbdeb659ae1abcb346d986dc65bb020f0ea5dd8715de30bd84d4924d587043b9da679365f6d7d1de8790ac4300814dab06ff004b66c8f4fa181f07abc2ec9f12956a8f9d74b9465bc0a49e47a26e24d26fce38fddf52acc733f60d4989284af2a9450f1dfe58efe1bdeb803b5fac65f2533d292fe8e84750820dfd5891ebbaab3d95f266161d4155b1f81ce52009512bc2998e91df0b3079a63fe7ea90390edb55269e90f7fe3b6b7fe6d643b6522bba6670f8903ad8ea36b74dd6a77d773a01dd530cf63b91567baec31448258dff1ea71a6922e43360503c828ac4c424e3dcedb9891afa9e9e69793d95735216ac7365d2f1c088ef643fc50db8bfabddd3bae409fe7b1c470e680c1afe1ec3db31bfe2d2d4fb150e805b630d0436adb1192a64aeaaf92d66b8ffe5292bd9337b2de2687d22228e7d2ebce17386656b60ff47793dd0bbdaea1ae7e0833665c8ea64a529c3c80d42e9f8103ca7f9a3ee75e5e0b33e350356ff9ad5cd168e5f09a87128ce06235cd6f45a25c90fcb1ca54eb6a0f0bd9c9fdf017ab90a3e3b21bf56e0bf01322ad3fa8295246cd9039ef27f7afea0079089ca64de6f94f6c37b86844eebf1f04e8e10ffdd021a3e9e59563794a32b3cb4a01360111485cc9d2a2da221d30295ea0da561b370153e8ce67ff0e896104dd4204cb27892951352cc869ef1889819e96efc23a8aaab02fee91b4798829483dd807fa0c18fa8eb3bf5c44457fe4b313c3fe0bf0bbd3baab8d45d4a28e41e04d2b39618a9a942a7396749f420b0d071f724cf54bf0c4b907194dd683a944aeea593e8026e714cafa3992c6b4c0c5efb7ebefa8ad2d03ac4d095263f2b9b66a24c73739fc0750da838eb605c5c56815fa7c1874aa0e3f51ce3dbd83f0d1f1b95685f22a450620c5ae037417e967720c8891f03e45ea66a3b4414a121fcf77d2893bd62c638074c13a1df24f0698c8f068f1ef60ee100c53e591d3de1692843165b9246ca3b85b05e5b63b4afcf3b562064d82049a15bb30f7fa0d1dc99baeb2492525bc90f2845bbd3b92d81d030adb6da7304ed7dcef426fc3230bdd2d27425fc7e5a5c6cf8eca7c098cfbb2d3236e38c9dd6ae6cbcc3e6314536beffcf8a191e5d5b8c1782fe5fe7f170d55bb3ae1fe1da31e63cfc47ded89f8f720ab5d46aa9897930bc179e64cf8e5909894443cfa44c23f448f648f9b110c8e675fa9e0f7f77aef7920ca14bc059a442a3752ffbb3b47282c6a1268ed9e3cb195b9c950ea3aff8c6549bc60c7ddf659a706de7bcde9b068255e6b4072053abaa2708e0cc84bc080463790088f0c342056607cd5479bcb369a3bf41d789f1c991a199707e3cab97244cb0c35992cd6b3d321eac99cdf0c4ba1c41daf4ec71ddaa3980b294b74c83daa5a02640cd994652a97c621a6ea578173d884a3a0c3ec6d27b2baa6e887493d83c6a24a89cd4d934b7042f65963ec2766386866948ee811b2981bb4bf40931c1d55f5a9fe437c49129e392c9db21c0d1934356521a0731980f8602fd238e1c891e0f44999eb0b9e8ef39ad07e3a1310fcd1d9ee7ec7ef0abc184222b5277645ecbc28ff346e700742ec980c346cdbc0334158f0144134938a97a92a86a2284e5414a3c25e7977bb67f9e60bc6f5203c7ab41e9fb97d82f2f13b9f5e5bf32f832a9e8a4a56f1f5fc080b000166f67b34d321914b0848f4e6efcabedc85dd765960c855643ffef3e2bd2a2f9d4787aeafa916e54be1be0ebe8df78c831ecfd8fa934168b9f651b1fb9f097a75eab218626b4b2543b2973ccc6aedede1e501a2e7faeab946df6a76f7a5845abba813938a39c5a703fed74ab5b17cda7c948a6b76ac4473052aedad3a2d0abd01cb533ab93f4ffd20aca0975df131c5cfc01db7a071f1bd9cf42ce96f4a417200fa885f0b22fd79d91de48a4a3fceab0ba27d9454ba4ba8c80843d70baeba1078925280d86b1a98e6c0dad3d2e1ab6a9367716bc38ac9e1d84894ac270aab381e19f28a89261cf157b4ccb7594d9805bdd4c4ed18f7947069339f039857b534039c443709e95b9d66d17fc3d431074f2f556ef6d83797dc8c2c61928b487b227d40a500e01e587ac82ce573b5636d9a58c59034b301a69c1efa2487c6babd481e9b73cd3241d0cc126de753d7978175389915681c3211c28341bceea4984de0750ac32998c57e475770d34bebe1627893c0b0ea4e28868f34ed130c996cc48e61e8759abd6272471cfd77a98d9c6c493351a9e3121e0017bd938cc606cbe35505172b6ef50ef47b3000c593f058f8a420acdd3edfdc93759c7d3b86289a8cc8555b87868a5ada5580a475f431063acd3b947df09cf9009f29a3a011350e662ef7d2720fa5f9101c9168bb1bd4a384dee0fe5c6ce5c3ea46dfa7b6c21080ac7ba876d442e84596132b58185695ced0129a85729ffc33e6301414683e971948cbc2f70c2ed11686b67fc6890832c609a747ac51c7ddeefd9f44239b26eae2b2110f8cb25684d4d263124b4358a26e4edfb14448ba3f38f79ad6ef35c442a16d5c4bbf61c3f7e74a93600dfb82708e9b8e2b2ce1490fbb5b7951e484547cd3f993eed9e9de7b853896715bf2c8242798589de8532c59a275d06c35a8b66c3a630d1b288759f3e35081aa601585400cceba33fefab04b2aaf2714644720910ba8430859118069356baac8c15dbc612efdd38948957915e7baf67f9b8459d06d8b01157f24229c3bf422db573ec27e242faa4883f4305c68ac7c0c794c428088eb6d41a76d1d22c29a7e9d121ab9a1b9259f01249448dd8a90d33bd29660f88a2f6da23f641ad44afba6b1004454bcabf7aa5081de051d9e28bbfebca62400ea383d78f327e7bc6e69dfe4f6d751b5054018f45dd6d24f2789feb9bb9ab5456453d6256b6586374f6496fb7e334cff7ae7c50a250d317e3d8fa7fead71e80ca613c498571b32b82cf6c4c99bde84e621a35c5f462a27c6492fe528ad674239dd1ab394e1991fb164b49edbd1f272fb5c83b821fac33c0350487fc570d81b7663fee415f649c07d4295afd8abb402a6f6ddfe000b7012ec066237e109fc10539d6e4188b24f92573ad78ce3e8ff42a5fb364b4ec517470eae896e80d094c8e518845d25ee03f6756ac2a979ff72966abc4692d44f23a52e2cdbe6bb39e13fcf7b131aa2daf4d72c432432ee763a7cbd9a63da03c04e458a6e1098dcb12d20dad471e5ed1fbb1cfa2d0717df8fadcca2c1695f4f3bbd1a5bc2592774f3267e1b34b034e32fa2e81629f99a4bd18337ddc9416e008f3d6e0e08edfcb55b4c44eb73160475b5f9f20f6c39e4db21c696752a88ea53106ece63dca9a37924b388574680c951a35a92d093f9ba6e8aa5f11de3f486c03778539da67f593152dfd8707c67b9f5138791b32501987765b6834bf59836479feb9c17a824f8d2628799b02740ae28818fed69851896286569a269a7e3796871e5308a3b12b7d2c3fe3ca34a6559cbe19b2579e83aad745f0e46bceeabab2fcc41283a938e5cae5c9fc7e315ded8cc5614cff8c9f89fd290fc227fcec1c281366a0ead6f6d73e874c0b360776038df82b7b668f80ab83cc712ddb811911ec183b8ecd0ac525eb511584756265d63ea591ebe7b43f3ba5f23f1fdda06486c8a823f63bfd4e3312a6c6a6ad75d1599b38214cdb160549ec966e2bb2394d5756512e30ca9e927012ae935d531bf3983f41b493c74156c4e06fe65bc2b2f3b1a124ce666568e0662c87fa34fa391fa386307ae66ef33235f68e6a3d5d3c25823c1e00360e8657725e684a3a547e944a1756354d5f0ebfaae02c0f231c4ca33b6753778127471161fa710a3c6917d2a6c8cb6be529388ce435fee2e18771a9871b02fd7ea314b9e121ec13f28fe1533740893b94c95bbbd082b4936b220f447e34abe4ea5237f613088198a651830e852154cea9e8e3d33cd1143bbf92a3e1ab3cb13cb2881a5d36793bae4b6f9241e621b9d51be913c8c5b261893edbc90d024268fb338481ef755d3bb9607ac86906789e69ce757f60c7305cf895cb1568a32cc493e12d4234276aea54f48d58d7d1e619e6d686c660f48dce3ff71650945cbdf8eb64d8aff92ffe6093a506b72f83e0d92a07a215a631cd6775f91751fe613be14c11b713a286147b54d70a2fbc6c806320e25115d7490f06e224ee361d866927faa174c258a9b5e09432fcd55fb5ca3cf3aff3043d5e042a6e297d9e2e69a15570262ae2055f876b633403c6b9522a43ebf15da6ed05a02417583a28b840b8c758b0ab54e084328ed7eff01e54193c74d545f850ffaec246b71727f367be27b83be816ed3731804658656b8a301789611b873dcae422dffcf194188bc7b86886da46e496bdbafbb7e2b8492c8515b9c888170720ea6b073753d4489f5574a1f833b4f82d972b73ee05303846ba092c2b4c7c2f75a4080e0c23b242b32a2271b4576ed2083ad7f7c2d9d387d3c3e7db0bab124a6a753634a4e94102e0ea845d09639a77f06f4ff76aeb06555a1a093d151ccf310698c2f56ad31ec55fcf0cc0e80b9f84e1d0c655743b89c64f8749853b79e80be5c475c7da95dcbfa72fab18c2b57a24df2465f3ff4ab7fa9705319658f81311a24eb63806538c601aad500e4d0869c2b38f92a13808e8ca568e2a8d20d533a621699b540e7e489f5e60637440d9d7e1b9f94595ef0ca5e69e74e55727fc9090a6c2169b57cabfde32263a50710ec919c127ee4109b2ee4257f1777d1d7af37fa283f7aed2fef4d5b19291b76a4694b8c7f5b44f0be09646eb2831b7229b23b4356929c49849e460de057e502fb10be7de2f7eb5657f3b1749040a9c383ec4c9429b7d29a0b554f5fe29f81c72f65b36a9042d334a3d4d8662b437e9f28e137c720a37049689071338017b422484beeb59c3cb23fefb411ba07471773241844b6ee60bde2f41a2f37d71a901ac54b6387e540182923bf9bfba34b406d73582a425fe920c2961b33c92305f2fb4b2017a8d05a887eb46149302feffbede42c91306c239320b13c5d84ba78734abdecaaa8d45bfb7414626b0b13b65ea6e13f9a6c1fa659ef53075c13ee276e18df78b8ecce8b46ab5fdff47d83577865d4f97e9e0553c70878b076065a120d1aea4c331e650f7b3d1afd84e885be48fd448f741de9770e81b27faf1f681a7b7b7cd5fbba0259debc829b13332bd39d840cbd6f44c5da6d650a7268543dc08c297bab94ae164b4617fc5ac11df88a2cfb70b9a4dc0509819b1a6e4424e0e00cac5f1ca9f19f0eaf922789f4c2b0b4ede50fcc080009f720d7fe8fd7a5df9babc993f6903b6d04f961ec44817b9e0584242975bb3486683dd2d3aeb0b2140afc7914fc7e653c3cf53044d597f5d9e5e9bfa23546fb6c23cc309a955aa1805726eec133807e9a1deb184ff2edac7a3e6528d601caf8c184f7567c8166f80de7ae34d13e38b4fc81d090ae18aa22fe9e2faf164b52b07a8c3e160c7ea3449396920d2186b9e0688fb25080a4063b73f2e0a8460c89f0dd9c182fdfd0ef59c7ada32279ce9318128a76be0fc62990061dde72734f7f4a765b9efec5886215f505d7d740d3efb15309dc99da7f58403e0b46186f887ab94f73aa6cbef278de2d299713b4f0feb39c20e0466f8b7c65ee7678494adab6459b60e2f50ededc6e35ace97a9a58f8bc94fd93376957c8773fb91ef140f1bcb35ad2c8e12c10182adc2d020f3a33f5507fd9bb804cbc23e3876893021ad263290b945df0a7ff6df98ceb448564f3371f2615e6509169f90909db1b90eae8009039f76b9c6b02ef3cbadfda9fbb9c8b99632695181d18f5f9339a80afaa5be5ecc3c2442ab9a7a80f42465983b33dcec915a6c69c1a664afc5c5279865cf20dfddfc7c0fb46d341b23fdcb113b1e01ed191705efb4d726150dc1ca2df2c227e09165fdc3856851e0a7b1b30945fb49b3fde57b473c31d67cf6a62aad7f4e2b2faef92d0e30618167df1c7812003d94ad50a05964c286bd5d1d02e9a630b6c206c404ad589dddaeb333446125cf0833018798f78b8aee87cb7424d4e605b0bd4ef05224186d4080b55e0cac89b2121fb78c9f0a01b0cdadd3c22060471f4eb1b7155d90ef65837345e11e2b9b647e81a77e1fce8888f83bdf036e916567f38c20097d80ee12e1152b686272bf8acc44b779db99ea5687bb084cd2747d572c6a729678a88995415532d18f80796e3214ca2019b5ae5721121212140efe7bc41a59d4eabc78eafa50d4348523ef153821c13762453744a86424b4aed0887d27ef872d5dbf216bc27bc3785f6913e9f7935e3865cfc25a8d6a8be98a4c74a1ff847f94f2115d65d7fa02b0b2278201a9a1730116071bdf1cc4d2fd51f0090a9748f5e56687c4a3a05f2766aea662fd6ca31b02f0dc7a047000c1d3d24b8ab8054958406f9d031f9328b9b1b2419268c5616a8ac2bc6639d7defc5aa16e13db6f19f7b9b9672ae8e065f7573ef6bf5983d6609a71231e5eafe28c23d050b159848903d9752d8777c1f8b25c0eaece2933064a3a002d7671f7dc8869d20d7c7574c8edf3badcd81a86a34e8ef6a26ce7a42144f24e18e3fbd6d7f7296f9440f826cf1d9ceea5346c7716cf163d41821b44f964163fea625d103e35df1752c7560b0dc001b996cb71b5bbf601aa4b2c36e9a31ae7beef648b82e733fed05b4500f34785936a314a31439fb3ddaf9092bea75d0885c69e56db124eef046deec95d93d50d797d0100559df3cd191cf70bc42e580839761c31632f472765c798defdfffc23c02c46df6e65e52d67a58fc0c0fede3581fab4cbfaf88956168cab99e4a06613278f11eb73d00067f4b1f17d2d18ab2a31e530a82e87712e65f820394ce1157763b1cd287e041003c9fdc3d6ec0422990be983cb1d4f7496953ff3139c0aed07402c6706ac0549a8a6296d94a11efd30b5a3f983653c25a49dd9f115822870818df61ce05a680d3f7fd19fc7b9735ba33ab5b03a8c0eccbf82b5e51423e50f9e3613bc914eafc789b2a2fde6bf6d65aad971d743fc5a3453949c55d1212fdc3a49882c0ce4295e615b651ee71e45805f563437e111e825151b1b8ed9dd44dfde37a1b84cd84bac52c5aea596b8e4a16fa77383ccb5a37de79949a10d9077552f193dae5339593e38fd48fc3f7beb7773b9229635bb6e7cbe2919a24e67f68756b1d8e8164ae9f655301ebc25da9f36097a17638b509836d230fd0af95437a0ddf2a1099e6fe5a6f66bdcee8baf26ac33fad665384fe45947e166ba014dc3fb055464c62bc37aeb3197e7ffcef8f5cbd7b81ab36af2fef3d13653c474d4d22c47391c41b6074c859a09b1b1974bc70c9f0b54375305ad3d8712404c2857dc1c246397b545f6f34ee3e96acd220f16af865330da0fcd0070ea93b6aeaf20740fa0ac58beba021affcad14819753cded37100e11574e991cfa0d89fde26e65e3fdda1664d7f5711c1db844ebde91ee4160e65c37e51d771e4180dac83516d9df15b7a19fb6ba505e71ab5a210a79ccac937bb25181b79c0b8bf8522d9f358fe28c6922bce52d4fc685310a3c7217d73339ab52449bccc245a718a435355c891570337d0abff697a10f3bc04f61b1015d83d7f840e413b9f78e53cc0572f81de02104fe684607109dbd80323627c1dc69ad697b5ac3a888e52fc51610d572cec3d57ba36f45b0006b4e9c55b0d2e214459ad2902e1c9c3a533500a744afcc2c9c2acf773e750dfb303e652706d1f10e935bfb114329ea81cb40f6ef137f5219afa8f2834f8985ed42701c5be362862da4759f9d1dbc892a03dcce693568c027b3705924e876466ec532dff4560c6d3dcaf345427c5d4aceffcaf26d740acf14e15c746c9d9b10ecbab970817727c4aed01e92989038737165356835ad801c5c479385c9f6135f762c5c2393dc5cb90fa44e55898d07384ee0b0ceadc677fe1efeedca70d3208df6843999ca4795f2831c74e00a6df91463a65c99963867638711bda52a647653be7311a2a3a6826cc4023738027f02990516ec66a34897c03bc4c9219fa2e6e0f3b40b92c0b7e865b4003341a6076705042214f2a73bc5cd2e17a4f0f1a77adf8067d4e542d6f39b00e0c10e2da4b74a7b6ba48c523f9dd7e8b097329688b4f1ced74b6bdbe87aafa2fe396bdd0de23c2ba8bc2693f0ff499c995f0f5de9c06155894a722098eed499a207cea626e4dcae9296d66c3e06115ad6fe4c79edc4eec6a0a9dd263f59409110382895f011c96dbd85c364a4398e6cff6e67fce9d53700e4612c7aa52ba7dbfb725d2074bcfe1b55c33809f48afdb41091dcf4110de704785eae7ab99f7f4a97eafa3f67b505bd641844a87562a6029bab773ede7475e3e5bc88a49867c1e0b25da1deed84f69eed42c9ae250f31da00167d3fcff7f77ee10a7b3f6829f503a5f8e5dc913f7ac722846fb39689fcdd99e6e6d633c13fe30e161ed4a5e3e7d019b2cc2ffff6d7d1fca420e7944415b45f9f20f38a8c1b600b4b002e251310e02ab41b48f47a404284cc74a58d96ef643705688d681a74bcef06615e9ebafa4e55d1bd749fbbddbc363c735ca43962078b0f850d09a8d7bda534788cdaae9fd6a74fedd19de9c3db549231b7b69bb7b5a799675aacce3e6c4dbc8c742690ecfac795f8d43e44f98b7fa58536d0610a1087ecb87b4dd104dbb218c55bab6c955dfb0cc06a2b8ac784f1856fcf9141e911e5c34dfcad2fe371ac823b7685e90a1afc5a0330274504d4e85a9a96f3b5c23df62c6805aab24e80f8c48803d1f3bcd6dae81514f20c5d5221e33a2406f1cff690deac9ae1c7651733ee4a7430b3aa45c27c9475b1051d1d073f5d7ac7341eaa89920b8e5799a9e5f41195e22e2bd0878362293102bdd5f6ba54fdc6746c974393ae433d6b0d26c5c9223153e0579e167e8fce7b66b1593d5d9865e0122fdb23c605991a20ada85207a50105db056c460094432f3c583e9086e504d195404198af71647b5937e184b952d0e66cc61d2aa51dc07c64d9757c8074df12dfeb6f6a1887e52cefaa0a0505071993265e481415f10222c5ac5a1312e6174fa70dbdffc100c85a0fac26a6d2b1253d0a7e082dcb528bbc1b9d478d7668cc89ed97c485aba8fa79e8db4c0b673178419c6a928239f7fd143f3226abb1ab0f1c27e64d5688d0642f04e45d7dee6ac573c5c4446833dedc9383e13cb85e1266aac624e14781d18afefaec3cd835a388381403e6e536b91a7e480ef4ae6f11e9196d2f06283e8d58caeb49e5cf25667b732938eee4ff7498fc30bebee3d76b3a2c5c33f19709d307c237bd53ebcc65825bee45b07bdd37a5c6cefb457adf8f3de81e20b5d383f04135b05488507ea5492f88c045ff5b44bd46431d4a0e57da92acb2d4017b2e2f58da303676e1c019b92b8864bc4a71b99f5e636e3bfdbb682e095bc11e42eebab3cc1b40c481bca9ac2eae09ba687bbbc88aa1099721f973042fe32df076e699ea65b3309cea2b0bb786674df22972e63a1a626bdbbe323a95e763fde3928aecda38fab35ef137964b21e6d7ea56833bf70e88102a9cfcb503630cb9f3a868ca064f0ac24abed1a9f986caa94d6cf7fdbbb6cca9fd85a17b548d8b5e0b6aba904e47d48b638b5421dc2c931211cdaf518a3beb67454713ca221a9f51ecb1a059b1c3043367b22b3549859976a792335c90aabb40785c039cc265da3ed3dbaf75a6f641dd3ed3cc2500932ebb3bfcdb16b398dd23a244a11f94423352d8f4b720368c90320383f41b22375eafcba0d177e7f26f8f4cab7619d83f2d4fa2a23b956207b3375c898301c8d05ea07af4b855d9e22df51f062140273ba48b9c500cb21eb6c672ef793fe4430baa91b9188b374415125a096c75d4a3a494821c7a8778997a3062cb0be1099d49f64a6a8d2e17d675140311bcd869a3c73ee99750a4193b09f815c20f69f2940af8caf532a4be58841a362b7478eded09fae25665d46cbd757a38578c33d318643e358c97ad2f19ec74636b99aaeaa4dac5fba4c9328cf4e5172a191b7856113701532ccc9a532eacca0e816c3b99e68738e28e6810c69d988edc8c2c01041ada4f26c07dc7a740c5c6fcafdfa1071c9f5046c1aadb00dea24f3adb0f62d79e528d83406484f3b66ce2b15daa5762c282816c29e1328911c0c8cbea5ca5bf3c4b1795c180877269a1ff426816dee901bc709854c919042e3907a3bd71286f920c8f63218291436400dd6a2597235c622ec7c458ec4362b276f99ad0b2140fea74d6c4d1e9cea9aa78120d227e397c54646d2cdc29219ddcb11965d509e0a6776cc07001614bd792a96e9572f3353a01f942eaf2ac9ccbcdfaead5889ac30b12d0a54218b7fd60cb98019897bd0f030a91acab136bbaa3cbd0c15b73f1baa9447786d336bb0756d7bc25b07286792b3d94697675afee699099ccf2329578fe6e017f2a017597112c9eb2a75d2b89cc93670f96153ed8b072c44cb999bd98ffcb9480f02d1bc48596643399f4bf76d83609bbdfd6a0e839913f4be719de0b823e7c9b686c3834a76f2788de4c1ee9be51a995df9da6ef6427e93e55184d4fbd087ce2fddd1f5adb7897d0a7b7bc654ebbbf1956b9da59aca12a8014da4f4ad157c0bd423c3535903d62978a49758b75e715b37c2ed5ae2fb51fb73efcc9f927ce9a615fe0ae2df04385f956cd45ae146999de488b6eade369b4ae5e2e08f5901b630c4c19381ce71911d563b992ac6e1fcfc7e8253cf05766e2eede386d6f4b514f53aafd572de15ce357d7c3d4dae2175cbe5ed179c5bf17e426bf18f94c82bffaaf53c316a92af4f1b794149c9757d9c1e2c028a5e4b494721779058d0a71eb0fd9e9f4ca19b34f9c79d24aff8869c5ac138f68e7c0b0549a141e64ec39fafd6b95d61d49133c1ec2c6b233b70078bd39be43dd29c2b78952401df848a6dd9ba71ce302afa2b34b2f6a24871ff55345fbc30b81e9d99228fdb02f1e9ba567752761888893aa8f2350f329aac07d528dfde710338251fe299b45b2a01596f08a398c8e1585d7b10204cd5a866cba04f6b26806f0dbf236abf320859b1aa18fea1119fcbb60c1b571bd310f7a0cb9b0e877e333fb0c6144d06e7d944cb3e6c7b32d841bf3dddd0b92fa242d476807db6c1aba320e26d473a6fab95a0efa0a5e4d616e202507ac42f9aefe2a3f4c6fe6dda0fbca01da65298de4d0b26857eabc99ba7fa55b172c60f16e53089a2262348da2cecf7e73d2d2390f789f8fc80cda55f04ec8fad82f35c3fc4813dad80e0ab0d70751442c2825c84bcbf7f5c2d7b26c4ec566a73e1870fb1f8aacfd6087fbd6d033950cf2d61ea41c08b315e3e58f5eaa4268b96e20eebafa6c6e142d4ec525a824055df38647f927f5c30fc250fae400cd792ce4bcd958bbaa7555f0a1dac6b5dc77df21c833d9521688a8198407f2c3797f10beb81a2060b2e89ae1956fbb2f94b340a52e9991d1df9057447cb3aaccf17ff6fde8621bdf58b352240c223b83a6cf0773b3e0550f0c31175766e08b74d8bb7f6e8b3f0a0c562086226549d9137e88aef6dce53ab277bd23d82e467f9448ef032f2c6ff46c57d103843a739bb147e14e6013f42d4eb32e0f88d26830df485e5d3634342e45c15c22b1fc772d118240c0abfaec9c082340d7cb120f95a178ab740c6903bdd172d2e19e8cd38a791bfa5edda1415d13ffe3f96a2cf3582f4dddf6a4ac0c5afc06c34c959efccd68c579ed4e0d40daf5757f8cc496329f59eb998751c4ea1a8c59ab703c18f048ce9b9a476d0b3f49b5cc71bf910ad6aadaf3d2d56c42e2bf87e95c8649f3536e135cadddb1d1b0ef9e90791f6d030635a24eb14d36f390b28153eff8c733e5cce7957b3017bca72715d1e4ba9d58c994a2381fa7a53212513dc545c1664c69c7feff64a3705fee618332d07e605fcfe44bd09e6131abca0afe498dfda74e6bb999f5f94b8599681d23ccd83a19c0f3da53427d791550c5fd5b96c8c31fcd3464941c3047df35edf84f9bba6c740fda9947b5792347ccc5e9613bec6d8fa23043fc7e93cf725ac2f5a6fe95b8620cfffc445e1dfe2e283dcfc183097b490299861d59ef11b85f91059eadc0c502d2177677aab7660338a9e3fbdf9cfcd6f5f5628295e2bf4ceae82bcc98b875fb8974e18dd995a1056d062c7bcd128c04334d0641453fcfdc58ae684bdd10d691b47d107292b36665e06702a9155037d1fcffc66f3c92a2e92e681c892633c2f10c48e3d76093b4c17570ef3f2cc42638b67fade958511cb0c94b6d12eddbd095377a3cd6766ddd3c7a00fa0f54e5213b481341d846725bdf55c6c7012c0d35d3268bcf7edb8b031b9331ad4b7debc033ff0c4acd4d0e937bf3a4be63026fedc39d3605e90040425ff55e4b155db2c899c1c59949cac8bb6a029541a8f5d2646f5da92e292d4e103d18ae0584ac29d5b95ac79321b5f87bc2cb1573a3242cb5da5a1ea274b404f2a75758842847bd5b2ffdeaba8b45b48c10c5fe38d4e602aec4db19b257d9310b8f072471738baca84416e090eac23f37a4f31f02ce5abfb30b46c9830d15e3a7a2a16baa1c7ad84707c64a7fe766044dc6be46681e1b69d81eacc1c7ce9c5a68f442c99a977c6cd45e86d0c1265ba6bf28a0dd2f16364ec9e2f86f9642792035e37e4f20a8bd538bb10388ca6edd12b1136c1e18ff666b0c4263f3c37ca61f2032fced5a8833f72ecef727f87bfc5c392b7b7a5945d3c1dee2b6464d658f8d200467faf7b0b3fad2eebbb076ecf3eef6ac77e1c0b7372d5aa6de75f78f590626dfef3a7100361778d6570a773d0f00f490326cbbb64bfe9f8d77508d93e01b36782a585e1bc28347a2a5da4e66171621e9ea51c8289a56b3d52a4bdd50667c285932e2460664f6c6cfeeb74fd727bed6cc9e29cbdb690cef0062855ca777529062ad7038b2a1392e1f5de82d68531ff3e195c372a9adaafab0341738fd8756b5d72c5580f7d482b4a0cacfe461c29be78fd761ea2f80e289e285b65aba964f2f1e682f4df23b9525558fd4ba1e10e102d8e8e40551738929a4308fa9029ca78234677f2e0ba4d50e93b2f5786cd15bebc486b28357fb8ef1d0a04755e07bc48d28d0455406afa5d106243b2d15bc193a0f7fbff18ab3327904cd0683f6f660249d2e7335830dff698a2bd94c6e3e5cc7ecb6a615679d2e4cf2668b610a95ffd6341e090444d67e6c082dfb54ef7d5bbc3961a869308d3f0a4320ae3879d191d4905cdbab77857dae756c9525bd2dbc04edcdd3356389afc1e8ae8c20ef59b9966fef015b0a625d19ef564d369b69e4e2e030aa65d1bcfc858c6c406eb7bfec83cf2ff235faf46b7edd824543025ec32c9ed055c5a99f1ce2ff5561fd7c815411b4dc05eb8baa8a1d605a1d4e4a56f52e84411bc576deaca6e8c6e9ba53f68105511d3fa750f9d2e0f093a58859164072cbc6b955ffca77142a5393866889c169f5f6c1509e33d89b86fdb4b20fe65366c4ff6bdec9737b50b7e10996c8e7a3523712fa8215936a508874e01a6d79856585383f39c11a92565589ca4ce5358438b2720be02c218608f523ab26a295bf52beee2a8b0d831877d29f9e797dd7dc9b66866b9f4b327bf74bb9250199197d76f16c8436e8ff63c12d9bed6cc55a95a35e257d02461be9d2fd2e51aa0b7fb1b60d623be3c452d558cd795f2eb098102bb6d1993cfe3f7a60c282a6f4b2fae3143d4ce17d1aa4d36b58c78e638b0f8b5e9e764ba2d19e176c112697dbb5b351d9c9c9cf303ee92c6a53399b42c72676838c8bda29cc3eed6ebebe93c50091b36cd47165a260c89f52febdcca73e9bd22ff5701e2311c17a807bdc00f10e798615372b77a7199ed6194fd306d086872f8ad26d2368ed36b251ce90ebfb1c15cb0afc09be3055721f77c434b4f0f7cb938290827239236d40bd1c5141f10fb32a19e4ee7e5b9a5940523987a4635d6e4f0c923bfdd4e92d7f319f19a14b82e006ac38db3f0fde2e6160f49a5ae3944df3a43d78cb0f273fd40a3a45be687bbccd37f9fa64598291d3b0b345f69babc13d92cd20c7e536e1c88266bae058216a139152dd2655f82ff2788935cf967ea36c70043feba68e3a25395b530d002c1c016f51c891bdc930296473294ec1745bd0ea5d01549b0629b6c113302235588726547f83017042d9921b667eb1d8f0846ce1b076f57cc5c1b6908d7d9e2643e23f1d3e4e3f95076da0de0e6b31a72fc181fa11ec0f2b2d2fb82d3154c06b31f8af8a00f066d2443ea2bcb1eb36118c175c8e2eabfcd8bd4ff5e9cbf667de26f5d0bfb3fafabb5fc55df14540ea8df594d0525795217659922ced566592a66660a86252956db8c8954391c8e27b9d3c710123e7fe40600cfe19f986f5e30bfeb2d1a08a41ce3785f2f6d0f46599a7b09695a49bc52c8ca17fd4b269e5e8b455bca8fd84b1d9dc24b32017e220f994b7344105ad781be5772d77707123a7e1be442573f89967f6aeadae4fb2427ef8036c1a01f95f8d4895f1bcd0c4e28516b0d1c3d3e70b6a231b9aa7729159dcf440d18a6093df62e71c45056c9a038045a252a3639b2276e1450f86efcb79b297d4d4ba1db417ea64a9e97102c34b45004b1c5207195d985b10f561bc4907b6ab30a032e436de36a4b5b67fa6807a04dd91f360e45277ead071533fced81d6f16dcb3ee7071b52ed9f34f9423610e7cf23c10fae6e463b95ab89ba4ffbc0f444c4d534dff6e65348416db379b90958ee2afcef674fb152a64258ea0a16b690d3aaa27d3ca60c2721e147d244e22d7457b27e6420cbaa3e6b5214235aaaa65aa203dbd6afba9910f8cb33d6eb0141f2a539b30c3e3e499329a68e48d575f2a96694cfebcc867838e4bc99f7f0b9395e0898658591b90c2535fdb04c4590139297224a0af4992f6b52e4313a8dfe7848c05cef3de0893be23c04fcc2beea6f8aa059f91c00f496cdd23d64712d9bd7ab0c569eee0968db2d9ea26c98aa891dc0f7e07b1a0a4e18b7cf750342a2cbfcc02ef3c3d13a844f17cad638a12a10ae0ff0a3a8d23c7086a0dfe381f134dbeb6edef77691e64ee9f5ff45766ec513fca2553c1cdbc385c0456cc73f22235debf7fe1014e9a78e2fc718921547693afed12f47d3a1ae697ca182f456a76a270110f36f11b86f852e2d9005e67884efcfb2b6641c8965ef9158e8038135b1c4b479cc887f76891a76a8ab931ebe6710c1e952eca7674f19728e176d9b27b7a88e514835153d2ecc6110fea6abf5d73df3c5a288dec51784bfb5c27a284d047d7732d6aceaa9defed0819b21591c6947362e97eb33307d453b890913a033e1482b53db1780a2b8bff4fd29def0ac9a9e2188cf55ab6b8893de95215d094e99d58898d99a879af16d7ee864b9d35a3c9ae3169544389e42330a21f16f7b8111c98d4a26b37c51510e54ad8409f86137e07ff0b88d04902105944f4cd173f825f40e5430c5f4dc6f48752e10ebadcbeeb7440d4e6f3a3093dd1e0ebb65fc9c7866ab1f3bf675d4bc6d32482b57f4cf9a60f1e8a3c4756835095e300fe2a0245926cc994a7bdb9f7df0876f0f5ccde721d7beb2a74c712f704a38eba96d27005e384c701d181021ef65e9fd4943c5c193aa0d0bc041d14109e19fd08b7aace7a5fc5250d59471b1cd2e1d6bb68c65e5b24f6219e3b4aaa572616900f1c3da7563e5d39034bb9b9b0598a0c55f4d797f4c412479f552ba09f514b1f69bef5adfc39bdd8b4a75ab041c713c6c6f387822a9e6f178124422b1736d953c191547d4d8d579fe48395e8ce6ee6a919ca87dcb079faf3431e5194560979c95675c630413394002862b0218d0d16e66f640ba8c1214be643427a8aade5fb370f368b73979babd84731b73d3460984e9f23e5f86e0a9dd9b482ede027e66b2fc4a0189ccaa47a3a5c982c513e78bb53b05074fcec65121b499a2d747f61e45ceef4afb36bf33965170dd7f3b2dd61f0f76110b396e08dd0c2b8a1e92875582343b3b99c04be3462cda930a31b32857d98a36","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
