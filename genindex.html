<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"aafa313a829dc92741ea659f7598afb3ff7a55c13a317f0338c643917924949a5fa6cf0f30d12df2c4e4256b7caf2a021dea12fb8fbabfb3c1bda15a93ce6c7206cd63a5886f10f00c10d71e63f0597a9f77fa7b95bbf6ed7b6e64784361d49ec0d2149dbd572d8e00fcf3f749da0e90add600348549390469dad8b80a0625199e11b27cc74e43f905d2231a7d951b236369962b37244ecdd40478a82890d58c72d5dcdd719b6da4146389214616a872de7423fe91ea094991e1cb50c4a0b6cb7cc78c28b0c1e179640430204340425e833a72523331ff256a03b003f8b09bec0db3ca66365ef4c1bd6e3a6b4702736a64ea91a8c1176aab94f4a1769f5052443d00795a4e363a942200c0ade854f25fbe5626222b7b310ba6c20717714c08b4859a79bb80ae47fd62e036003c502ac9db5a8031e3e31b192fe0fbd33e16db7f70dd412f54b78e71f8e88c1a5df5c77947c3be0fb5fdd5533cb08ea5e53b1906555355b7404d6ecfd5151a04d49e333f9255469b1adc11ed804870c428624bc13c69f85d0e84d6227a563057d7d499ae163053cc8eee82c7c1b4e1f8e9b75983d5c2569876423fed347d554c54858e263b7d752d96af60227030aade245f12bb02a750ec81c22b44085dfd308f95bce5fc35ee02cb9351b8b25cbef9abb7d4c6b9cf968f4bebb3931d503230fb6a7841875076ebe21c739c3a53620ce8312c07736c1282fb242b043a2d427a296d46d80f387b71d3241b7d29c8e9ce08a3ab419886e56fd02166523fb23da4f0076decc9e6afe0b405ab076a2c3ed2999fefed6c0607ffaf84daa4bc3dfaadff13ecd37cd24ff95d747723c8745414438532de854088151513d0e5705fec941148736ce23890040fb899c73285f7aef77508aca3b4501f713c8de6f8892939ece9bff976d5bd42978dca2dd84d6bae117f4924387b9bfc8f72994e4303d522101f2dbe3bdb5b101afbaeb4bdf9b94ef05205fb924f99c086d77c32b1c4e4a44cd95178f68195a86f7221a50a4737d4e376ee9791871dd37964f5a07f59ed9e8480716581d061aa436246e4c7e333c5af2bef055afcd0e1c69e4d33735eaed3229a334782310e88b345f53b93c3e98b8858a7f760bb128cae8206413eef8399cc7b54becf227e7582ec3dac4d190b6a10c29de9509998d735a7e04cd7e1e96f5bb017ab3a1286fe2c8d535b8f0e76e6d58a9890c4c0103024ee16258e1b04b802365555ae23d9ba22479724ac5d4eb292a740642df210d39d3fefad6a6a5e69bc15a9c24608acb6066ddc03425140c542ae2dc69e817af07524ad667b8ec3efc03fd3509997fa3877dfcbebb3c12537fd20a066a1edd424227eec6b9e81e2235ea4b255821ab22fc9d8fba4268567032c252f58aef4eeb051891cbfbc7f70ac938953c7f06a4a8529f816da3dfee2e66c3583fb3d4f4e512e94d4c5b9e90a7ecc5e261626e3b82d3028368ac34fcbfc0a8ff3de18e2386b3fbb9c84ef623c9503b6014c00de3cd1b83704ae87b66165a62adefddb97833db8b728970e8d149fb030b7f5431b6f24862eeccf49bf74943109aba8a333ae82238f3e6adb1bb1eb8dc2ee583c6024f38011c9f7528125b71fdc040fe2d3681578daceb991e327a7878c5d4fb03e9708a24c15ba5ca3f88d28c356bf4ea884628bf2dbb4221ee33b2d96204209c3408f7676a3bd7b580d9cb84c21d77da6e6f2c62b7d39fb71b0bc3db64d7c2a880d77b60a0bd93496ba69b464cabd1572dfe8ae3c97353dd6ba5962897fea7ffb6aec675a49515090ce4a6951ef29ec7556805324c74c47a97cb30667204dc509a5c2f13e73fac1262db31a93f30c6a1fa955963ec41b7128a9239918005755ad916428dbcf459611468801e62928ee936a28b6a447853fefac1f91a3318e647b3f273db5c25f519a3fc376574b775693df243f9b9429a3b8b16e9ea729a49178efd0d241ad04404d1407f5914c55176e9507cdc3b6e365c61a9e8cfa0f55bfd420162885bc3e2aabef385cc8302a429d32a620df5e0a92072cfec2f346d35a250d3fe6b44dda5aaf2fe2756d243334b22f526eb67960056118c7d9a574ea740d00fd459cd2a27d3269ec113259ac597e526a0738f53b1d6010c721f4cbbd87386ce866d537731d80244d83b2f9d67fa98981a05be4794cbda99c2f38a7522730357e2f97aab49fc1e73845bfc5013b99d782b48958128b26de4963157b1b50074b483b7e5a25ee90a6a6ea4551d8002a084c2bde04fb56c42aae78ac6f44190602fd4c8d189af51c7f9237577a860d19df16a55f50a88a4bf3251ea4383d1024728d414af86da4b5d748eff338b7204b63ed8370cf787ca1985064f8dc271af62006334b7ac245387ac4d5c09a30e62c6e84f3375c8d4ef8f7bcb031a226d0c8820e1fec97ede3a340af826d7032483230638717084c50dd8054cefb2eb06ace1d87d9fb51ee29f7ae5bd3221aaeff1fabd10db60efa6faafbc25c72f1b38767332acc81b2a101c58c54b8c9262808d91faeed38b79a2069fe60d6624bffd2d0c529f6b8ce7b01efde8eb06b8fefedc4e81475b8b3fd60237818ef0a0fcbcc0edd68308cc44a322e4b70c1ea7ab102b58612e41c8dbc968a398457f11f8f79e70ef12f39df415a0e5deb339e6f4b7c8b6b6d26dffd9bce4233e7297e431f9fc57591ad9f14cad027d176b2fcc6a0f2ffef0d59b39dee0da5a72dc23884deca8f421c813cd2b31531c99e06d2214a8e7faa9eecda59fd694f3eb87263305c3c2116b0b6f4e8bfe359af1799e9815d23c4fd57d443eec7d9a534125706788051bed983c2d5f2aeed914cccf7fc87a93d35f4e7129ec9e9001ade4a37f4694b05483ea9c976e4aaa577d668b22fed99f1c85316e7228c06d1123737d802620d501dbe021915708ab5a59215dbe19c96ba6fc4fd51e27d02f1ff1f05b59c7e018ac2456ea9499fb447dd22dbc32bd62f24522018317f669a211fdc68e3fe9174021ed1eaa76f50efd9c8269c43726e42d5f542d61790be8895c1246c183235f52e078701260689af9057f73b3c5dc2df62b1afe226713d9bb8b4901aed92f1b56872bb883f5ef60eb2fc3c06c4d79dc8f452247026d3872e8da946e9051e5b0d41f7c14d3c4e649114d07a492bfde1bae079c30e24d1014e82283e19f7467045126442d81bd9a4db0a8be2fe6036f8090cdfa4c61fc9d80d64cb402cd157b71f0d5619981cc1b8d7fb1b0a42fb693f3ced65cf2671cabe634c3c8cfdd8cfcb974e6ed1d6476a5f35d32f891bfb3607006b5621d7bf075b87c8c0da75e1ce21f392e935c10c37f4ab829c96a1b2f493d1ba035bcbc5d1a2162967a18d95fdf1c3110bce2e87b976b75d8ed820f114e459fe63ca82f730f4538f613f99b4300d3378f3150c81a1f265aa0edd7cc9ad3d972fa620bb4362870aafacff846f1dd737af96dd999ed2a03e571e3e4429ac8531dde05468bd8823b39a90a2b6b2db87010ee7fa5231b1142acecc8aadb350eacfe90b2fc6166e4f992eb0a97b0eae2ef866cb95bf1bcc8b651130d03c155c9f1780784162f75e1f740fdf69f8d9455519eedc9e375da73b5b703f3d6e001b1d042ea3cb0037a3e697231aaf4b0a9e17b6ebec903a7aa197757e73a84d4e4d940d8076877fdf1eb70cc9d83df101318f6d21021b5d14f37245ac0dbc7145de433085627dc8f2d0ccadfa11b2aeac1112a3bfffb35ec1f6b2b9a6418e3ef9ddf0b85b07a5d126d922e7251739be1b54d36a7838e47f5310c783705804e40a994027aaee5278ca6817bbdb4d01142973fc9bad89bbefe4e6ced4a5f1e199703cff88f12643c0581bd8c18ba6aa85810398ca376450cdf285a1228c36b9cefc424c5422b0f564648e8cae5b576b5f6d251584f8115aa326b0d179d8b38d7fa3daa68f0d06e0dec4f912132c099cac38437f1279cb89b595332153747f0710e437d70b731e68a36b3bdadc18a01c777425a6e57c493618cca4804d37417ffa37bc4b19fdf494305d6c3ddcb8eb8b61f6d0ee4f816832e70b5204b4edb9f3f6d983189b0e6070b701e3c044a3f68b79179105f431ffa0fb2d14583cf8ebf3dc05166141b7e6b43da6ee024d9afce7920d9b8913a67494921569eda69039968d311785174fa865b9126e69f5c4bfb500490ca5687e34f09e536f19c60c91f67ba60c00e6604ed79a6edf1727e83cdd146eb18b02bf747ac131ea48f5d8865a129c83b7b377c9e1a3ac245fb5b0882d529f5b204ea503b86ba226364e83ec4c773262b76200b262d37eedf080ebfea3d545039b8136d591569255714bf2adcb68986bd30222b00e110cdd630f7e8cd41913aecf59343b3b659767b8dbde32500cdcc226e2e0f3ad7aeec308d345853dbf7c849ac4a17b3b30284e494b2c3a9a184a447b0b7b05aa5b2efb8fde93a96fae312b0542b706a2b23c5d0b3b6fc1aa9417033c0a1ad18e14004ea028f998a3a95c2ca8e33dca32e96fd216be5f3396388d92370d5d4accf947e8bb2aa642372f0f07d704772c6c0038b8481c5d20b3ac22b89e340fca3213d29cb12c3a896aab13c33b8d7736c5d84d1df5109198a81befa04b192404a6c3f55aca9eea14d6314a364eb8a6c9c786d3ec0cbd24aed1a089a4fd3f264131151eb6ea82296ffa90616d7b698ed23ea835b10215e8706d593d92aa80f7903bdb26833eb2d06bffec71cccee395a9db3a2bda263218bc40ac609d4b3e965aa5f3e02ef89e54885c0f30e4559545b5db7619a41b4546a5da103593a72f8fafcc17fff0ed17d31754bd5b8bebb229cfa14332e50ac38dfcb5530d4087278e65658e73a24bc0c0fc4914a7a17ede05c0e6fe5682dcf9a7636f669c3e23ca057828089d833b78c7e2396f0f3971a699a84343bc55a0a3019fc0072368a50ef226a01007f4104d9b394e6e2e188e7dc344e2105a93aab80e8edf33bfc7b88526e3d10f16061109356cc8925f7c26f5d8ff54b6d097f3d3c8662bdb1a6adac18f65485a709f1ef47da645e8b90280624c22d4a3d9a45e3e2700285c0b453ba1d86b718845f51dd01030fa8bf706e65615f53c7d65df6c498c2b70076b3eeffba8dc338ad5a9e9cc28bc0b021604c09e4514879fe4b1145be6b148eb64806832faa084aa87b0908e18e0a5f5c38ca29cf2e4c457a0698d71a2ac5a5206bec45414b488e975f2b775a9be66b06f2d72327d7b1d81b57a68c7e25ad4fc6faaff4627ee8d2eaec0cf19895d1e4243accb792144e376d5111c3c7dec30384adf11363291b7fd15c7c4520346553f834851b4d4c7e132d8dbc173c6a427b5aa3420044e5014814a99baacf70e9bd01bcadd609573b0a1d7ad49d321255a5ed4135474ca43fc2ea9f9c48c22f68b8c4c16045b36952eb04ebaad19e6a5e98fcdd24806720021117e1b0611eae41ceb0bea60b2674eb9dcad08030fc8d84fe0724afeac6623f73ec4a1e86ef6519beb506ed45d0f68762dbdc7d3101deb04b39a82eeda340775aedad646067fafe62e4fc5dcf9963b452970e45ad162229a03a1df99b74528688f59c1356eb046f0bf010abda2318b634429f7e1b44e66c31e84357290f1a67bb57abc07ed6c2ace08b6db00931eae29f9041e456d02881aecec76390f6b3aa2c85d7e774f2afe30a56b63906a1d036cf7b2e68590010a8c1ffcf199962ce39d7ae726fcdb7ae249cec6e2a1e22206344169d80934070f9d3849bdf19015042b1bd1792a2ac912bc1e07aaae49c6e588e7a848a5f60b3896f26d15b7806c3614a4e81a21569fa465c49aa053b8ec7406fb95fefa4ddd66844c77fb18c6c178701a9f1694ae54f0c14d5a9d29c896128266fb768a79a9e3ad1750c414b5869ecedefd4a21ed07c91251ed1d14b8eee99c9e36721b89dfd1bcd93531bcf62bdb0916eed35b6170c95e7f8355cd25e8752d75d914898f130b7ce6a889facc76432e6abca37d915db4388c6b9911f063ad695985225d166882a4e97e3bbc3623d40fb6d2c994309e8736bfe2fb9dd48fb0a9ff047ad50da02246747a06dba340a9e719d34231e126c158969472d1ed4ed1a25a7a816febde1e268ec333207913cfc119757bc4cc45c9d0d63a6b526acdd46d9c170aa505e79030f9af6260db685f6d572cbd46f6407f3a50e84b0ff4338d1e4f18c210f45835074da38daa41844a5c5c0e9c9e3e4ac6a1d6a69d13c2262c00f7bb65546f7d16fc7dd69eae1bc0f247918d2b6ed322fe2bf5e67d0d7951e853d63563db071a5b31eb712d32ed8ec4223c2a0838593988039610f4393f6fb8856df89aff9d0c0fa20ea0818acbc19e520af28bda8a89f28a5d28d08e9c652dbb34660e0e06b0783f693d3ca48cb9ea47344abc847ba18fb09f95f87db2f2ab67da506c3590eb40a40aa7d4bd0b103baccb2eb7e199d73b8a68ef9d7eaddba867eb7504cf9d49476bf8ae304796bcabb30b76be42cbe016679dae6b5713cb8e1e6b8502a53ef350810d59ebbecc44ef8f49935b0b410ca814074744e253523cadbfda854d6823180b4e960e2a02e9d41db7a6812bcd92e7f61bc694c24e747abcfe708ed0f5e879f030354b5837f1993ba9294ce6b5554fef18fad5cb7d630e1bf1d1ca081ae774057bcc35e0481d64bde55c28f6cf485cab574ccc9d2b310737ef3a7a7aa316d29e885bc8093e28dd137d06d81380579590e8aef60c634bbe746b35015fda9423bdffc090af154ecff079aa542ae961b91c1774c844199724a9c52f517bc7da4a63961ad0b1c3e8be12072695b1506a67b26beb69c6134e3c0b36721e8024ca6267899d5d5d70763f915f0781f40e6d315fac300b82f6723a5c1dfaf48ba0f0b67a2654a0f91a4212b6efc36ff049a13a03c9b33c7f8ba38a4a672d9a57dc7403f1c8d1b9ef0b67c2181f79670ceaeba7c525424a7943dc854ad6be6d195b9d3d684c2b83f5ba19769427e9ee05783916a93b36e260538cea06d7e3c8f1763242b189056924dd73d82bb953202c09d328d7c86bdc7d42a9c6b1d01e68b79c39d99d33eaa9a4a63e714fbb1f13ce860059da56e11f325f9347aff7d5889f92143f6a016092bf55b694261688024aad750b15bb5b69d77b13dfac7ab6143a7efb941ddc8cfd966482068df9c19e2a250bcabdcdeaf9a89f9a537e4a19bffb1f521c70e261c1ba2080801163d63b2dd7fb55f9b71239da49f1ab3f97a844a65dd63ee4369362edbc3ac76ea68c6db015d95ab59c409f87856ebcb77290274f03bda763f4080ee6cc474cf190ea8e446f7beb9fc551028154eac5c0cd7e3a0e021a354cc3fca70dca11f0c006ba2f206465ce1698a81b44b2d01b2dc2f4c9ffa4d825ff63fc694d2f5c71f7b64f3c3a0bc3047bc6f5fa9746d3f0d99ab3211e670433b8464a598443afd757c5fcccaeea824923743a43a7363b73dff71a4db66ad168137cb446a5435652271753b8703c832ad247903148d3e9cc55533c54dcd1cb08df020294c2b998220a74facac9017ce58330053209aabf27345b66319cccc768e20d55dbcbdf317e5ac4bcb8a3e6fdc4e252a62cf45de93953b7afe5fc3338b793dc1541433e4c7ba92e21308eaa7aa93e4215bb9cdc2d41e7b6f59a92e91084a67bb50abc43489e3250e65e85453fd7a361f88bb52a0508e44e6071994f38fcd55278b7e56eba2843d8e7fdf2774f2388a58cacfe0f9447b7cc51c250229f0865b0e446a61c7e56297d09a3af45eb412921399f083f44e40f13765e60ec22202f7c67a8cbe2823f65756ed0a215849be2ccf1910c5b9e23194b9db9677457eb53e634e3fa8d619c00694c113d041349db6c0c49fc319ef75d694daec4dd4ddcd7a21a1ee721741b4f98a10807d65015df579c3eda45cc7cce1c25473d953a4e8ba8c2ae9dbe8f8984f508c49497b6e456583ab6ca463096d48046492f535f0d2bcd4543c039042686d5eea468c30318abbc3716b82ea5a30dc1ecca7373abe3d0099ebea235a7dd4f66d2eba0960dc745f1970dc1558430b2c55698a27f8bfe57be949754f2b585dc9665dbedd1ffbe4a238d367f883259da4ad31a4f21ecba24c57f04614ae99d15d8983937c8ff7782a6ed6b8a17102fcccd70eefaf6b1ec6879b5a814db566454af051cef075c5e1dc923bbfc03a4201dc00f05b2a2eba5c1a07f2763b605808bf129d6197ab2525485259857e4b85f33e1fd4c02ce03249b37697b8012988a8b112c1f05d09eb1e393aa524424885249e93a363de2dfa946f168ad643ae7027c632aa9439831fd38279b39c1902652d2f9df76eaf6603aa68bb79e9ba7c507640360c8588be85af85f007820e6e6dc973f3b3e38192e980ed591b2dfdf6b39928c71a5e573fe12663d8e534b26ca145a50a36b8a98481d84006a6979eb8d00b5d408bf29095307edc8ee51ddce722ac83e9c89ac54d54ffed71e709d8a18f8e8c4bb0783fd2d9945eb8278a0dcb35816474bec73c826a8ce4a76cb416af47f349097be6d2eb7a2fd8b318217f7ca33a5717e36cd49e1b2fc068c251db685810a94855d4f0d4a4406a65cb9d3033a26f6b7d8c11a020d36c32b7c57efa3e7cf0f9dca9c4333303a886c7f115eb4bf7c6d207594690eeefc247f249ced8f0201860e2fda59dd22b3cc59d3bb2c1a1bff8a5bd7f6f5607558ac89e1ec5e02b61d6e6ce93cf2654d2285e957472ff15a5072f3af5955ebe8320bfe6e095847b982b37f1a4e5479325a164e81ac7a12136f2fe372d20d103dcfa5b0766eca571d1a73287101c082cea39388ce0994fad98369e160deb5a99371063dbb5336bd83e55843a7eb915848cfe1b633982954046fd33fb511888fdc56b651a695bd58ded92800759ce56cf5127a3560e7238fdd90fb5a460365f6b33a8af37e5a066017830ab4eb4f2856d19f15fa32608f29be5e9dc4941bf257e7e856d2ec2d2e59ab5e8994b7fb95709da0646e9480f26eb9f871b42ce3d63d4fff1f892c77e3db9fb17dc8899b1537956c0aec2b876da62c85ad721834c4f6c403d61dd85afb6329b663ce450c63efd507660d31289f0498e772aa4eb5b6a38b5a72602a91bcde8e4d91412ccad24f74457ca7dd834eafa4dad8c1638a298b0bd21f00d6ba9846fcc974a089faf76c107be1e7ff5674d25ec727a8a3d5e169ecb91196a0d5720087ef20944b88294fd490a5501102d3a4e8a7a1f59d84eba0f4136ad70c66b22fe8b505153012c96e946ab5102da7256f746806b9b5d186a4e74d7bc16b15c18283ca380f0d5e2075407103564cfc5f8e352c2ae9db2eb608478f67ffcb2c3b5d15097c22ec2900cfa2a3d5ea31e37935e267e09b3078f038d34130ef16866a6a58121f24b225333fd1e842c1cf4e63c2827c7cab94633f671d90f85a16adf87fb5e84f403da638aabec1a16a4b9201e81f4da041063865434cc42af698143c97ba0551889950709c29610e33a1e10ca8ea35fdc87635e7a2a07d49ac81fa07327cf81de7c25e1500da0bc6436c3b5a3437aa6b198a2308b0299656cdc93f3f2d8ad82a878c52d1a649bd6ee388e27519794236e968044e5749233adeffd7b0ef48431ebeaf15f4305fe99ec9b8489f088d5beba407126d4527276dbf0672ac18cce6de2e55f09e5e56f44a2057ae8414b6834b418186cabe54c66e5f5572883f25075cdb0684d89ca59d17eb7ef16d72c87b89eab1fe6f6b4089d17f936f013cb593e365a44e35ac4bd900d4704c033c0e9d8ea8a0e6cb1cb0248720ebcd089f3f5bee9360badbaed73c0d78914415aa141dedf3a92749e66cb5b3a61c8f7f883b5bd9329c97493eaeb70c40ad86528fb57f3ac0f678c453af9d67c2f069f808aab7a458a13817836d597684a51f9866520feb3baf7fc3bffbdd23eff96b7f104d7ef0351f196ef292f3b12b4d0e4b3881aa93dc55b655b4e2fd5cae0f56394075ce99350657d183a4600156a23fec33faf08a669cfe4c2cf371402fba8a1929ae66b0572935edc72483834c6bb109bc2c9f05d4931bb5b810f7fc1df8558ea79f06165678efcb9a6ad7c6c50ff7f449b692d1502390d6335d9195d0fd24167f6e768a578170f6cb26e871b436942120f5b0dff07d6871d9a392d9536f8021f68579fad2e918ee5abd5438642d8a10ad229e6137da19c8450e0926f4552150015796f8d87e333fc54c9fa1d477cd1bb611d2da301fc74852c00c9e7bfdb8e48ff405843872abe486bdd9b6d77eb4895641cfc753cf95740196ac20c8efb76501cc78b72c259933b118c025d8eb87cae978d601c32b8c60a3d0dab9f0103f575d4dfd128998791a4733fa8a4082bf233fa16b72d6570d1f284e187816a13cea8606dc9050fed583468b99198d2d44685858d7ead2ccfd3fbc28e3cbb945b24f3f3fdb5969477ed41c4fcf7137d23530c40563489c1d9c19d4038f9f51d33a58b4e7ef2a3494de67c2fadf527d4a51746b1856f63bf824887f87740d65940d96e6d492b5825faa61fe08d881056cabb3e7d056a7b3a00b0639fda5de939080ac8291257b54b4455f77cbfcfe9036d55e0528d51387ca7842727b8eaa7c7f7be0728512eab26711e747e06df180030599f617722c06c9f67f7de8933cb15193a643a8c72dfea06d126c5db6ff02c80fcb68447bc453fbf3baaf2eb8145e6edfc346f72646401e00b2679c12e5e9561274f3a884f9a9aa0d010db8638b65f4f0c8445aba6b57e32f6eb36710be36508f8528eb68fa96dc1abe430e830504dc2e994de63fb6b826e96f89ee0447c2bec3063848d9a1e27716a61b6d71fff5c0061aa1736118abf02155ad2d5d402677e6ff5803430c158523e551c67e9656ade3dc4be22adcebcf51b0c9c70b063af2af0778421c87c8d32f1ec600eb2513c2299f364e3c93aeaff2b2e4d0a93b45023ebcca1c65488ddf32c6444af130c3d7ee3e2c129ce59ed8f0e502c6050f528dcf4b8743d19d7182f7c0f3cd50724cd239a41f3439fdd446b9921794065600c305124e69084d804a7c5a64fbcc42fd09b0a62ad2f4cc1967ced6da6c36129c5abea7e052003b96782838baf0da49ca7635e0c04ebef048bbcb215d82ab604ed55321badd773cdd9a1dc3705fbe3a5fe5fc598a7208061237e47e635348d82f134946ee64995b06a80ab25c2a2fb3883d9f7b7575a6d5a5f5c9966e57eb27b594b278b0d2bcaffdd04085c35050196ac54f1f9484e0366be4db05504fdb26ade34588b775a456f6b25235c654143616d5fbd6af58bc946ef08ca31ebd57577aed60410f2538f8906b96c04b659c4edf46849b37f38bd63d0a89e68572cfe629ad87acabfe923062dc96891a4998ee0bf0dff5570983e11c978943ed1a90fbea8cfeb5242fdc2324b761155c41f6250158ea24ee7ee7d726cd3ea53297b2a3d87fd67aa01c03cb150468e1098056a07b1f548bb63c95abc380f6da1221e05046d93671e5e5c5d8d821c73eee90ce68747a404dc597447b424f1f87adee10b9fadc8d921c229805f665194c3aeb7f0b468f4c4c04a3367ed84576aa3eddab2423aadca14b87d90a9e897cab92c6bf176c25241a51a3af3fdd5f71061da3aaba400820cfb6e55212b71ef91d0083301dace366bb7fc81ac85f35d9908c31ed370cb395c234e50d86d6e12fa7d3951c1a7ae71542a5fa7cd229212487ad48f4d0c036c1051013f15cc07dd1f502380f097c81e4971ef96fbe0fe89a0ead219b931b0860fff72309ac86d0d5a7aab8db46c11093f53c84f501a4334c9aa6f1d9370316ef54f0376eedfcc62e155d0bb5929c82e442102ee679efccb63b1483a7004329a9bf326571808757161d01512f35fc8d149c21def3f52a5a2f8a7c4e2f0687ddd7347a6bc5d9c891f7921b3abaa57c208cdb84a193808a309c759c90b98921ac18861ba87916fae753f816dcd25775ebf922dde84e12611fabf0a360e1f0ef7d662194c3d6d8000094dfbf9e29a9d66c44261eca802d579630192796d339324d443203dc1bbf596969ed95ce75af44994c129d2b176a7fa2f69cdcc0da36c6222a7aa63701fc7e5e3fdc2b1471add2a6d948b1443a6cb19eb7a9e9fb09707972f0786acbdd417e1d5b7914a90e5e8c267df2d00b8393e3e943be23d53bbfd0b3506f568ca5c0970e6f2f552a592b9ca7ff5cc11f88de46df5a20b2ebf339e7dc127e5f2b12f8783f3fbc028dc77fffbbb4d9979a7eb825c6b5ea67b572c3a81d0a011de6533a5e05547d7816a5696a01221336aa9948f86b43028f56e6c4b03122fe97980eee111c55a28d3d61120d35a8c32aa3bde6db115b438c14c5f390af7e6cf29d0e17a54860d0163af40c512074395513d33f9ab13fe50df043930adb0c0676a61069eefe9c1b8ac221b8593cff3f039fa986850c846b361f980dc996fea293fa6625444a6729fcba48338356ea26723de6d665212f0d7c7fd8e34c9872310c63cb3163e6b5730689def6e2da5b06116c21cbdeb1f36843a7f2131389d685d83d79ed4b382d2620a9dfa258ef0426eefa8193540d8e7e96766ea8f0f8ac23c239075c9dfed0488eb52d78c8dcfacf31b4ecc25ac4ca98e6f12ec4681e20200ab985089ec357bb205cefabf7f23ec83407b6af53eb228fd570b6adade36d20b2fa08acdd555296149c72c39321e4be1c0e1cf11ca87b2e9034152b423e0c9de36f4c5afba2f7cc3ad4f58f0cad7edb499894fc103942e5e98ae90eb497ddb00654c5ef72930ce42afe3a219689f85db7834be3214ea4ef5c1425b954dfc95d81f781d5a70652eb52953936e9a12de230d17e38a2d1b7e8d006cb1c7421b9bae0e157ab440bc44d4d463c69559675c20e956f020d0e9cfabab4e3721f8ef3b22ec7757774f926caa569ebdb94d49109954f897466485a92bcb02051876a4724645181f9e4444bfd6133947e4fe13b5a83e496f8e428e49d2c6cff0882772e6f00bc5840bedce02140b31457cdc16b27a4c6dc257d2131b9d0d92d77c7ab267f4a9fe19eb924814bc9333af225f13e9d53fcd13d9dbc8d27d064dccbb843e598c35f81c717f72ee1532fe36339d2c1df0eee4a30d47a1a894d903130ace242509ede6ae12ffd26f64b9eb21adb89f8120921b453aa06bcf8ea9e9a2865c413c19700e3ddcd03e101762ed350af8b862122bc203a129b15cd105f18c398eeed0bb4569611b5b6e4fb59861fb74ba2993631aa8d8b0897adb26b8d008ff26d0fad8ff713edeeac58731119930afc81b353bbdd034f565e23e799c5876ad11e1623748d4e00d5a9b50f10af842164a910f89b232070400b2bee601c9bb9201c036ae3fc9bc1a6f2ed0f8c60798a5c1657feac5c23b8b6da64f53edf67958c7cd0a9e71d266b074cd3176806d360bf10db82ca4aca787db3f3fe6d4d4de1e7d161368cf6712f862a6d6afe4f28d3c01256d5829b6e659fd42e8d413a684b502af1641237afda0aae47446d395286be12d2476c866d407b3d5be03c9922a332c3415fde2eb690ddc833b597908a1f67b3b9a64a14fe6f6a6906eeb5bddc65c3284ff55f0559b6cc77a93a49ed4f96a103f09814763fea8c2d3f10a920a5591a9968877b7d4e77f35e30435327ab06ab54589c7dcf53942ee570f193076b8d073a5259aab2330965ca9aab80222083794571bf85a32ee88de16b47881fe18960236318ce7e6243d53037f2840b51896c3b6f2e010a3507d5bdc2440a7d339c4eac0b4aae90d93c564188b65f38e54998531d2b7245c876e8ecc8927688dc5ce00db958964564df03cefefa0c1a2383af22a47d9161cd0e8d373c7cfc3a27ab70d3746f26cd42e6fe873304654e520de7dfb2c9c53c5874efd811364aa6c14b90cdbe264b899911479cb2524a74346d11d325a3359b60ff493f029cd719a91a2efadac22705de739a416b8deacbef272277b58554e03dc9896fc344840cfcd2cb01937a02527819ab2ebf31631ee55cebbdcb22211696cbfde72c99cc8e83c8b8d135f43887cc0f6cc27b15fac9b2a3422a0e65e1dac182f1f989e9729173ff54de873af32a8653bd42df8ee844859b7f34e03d5feaa941a5124e94e6f112eeef5485abe8d2038d1fda4ce4b1a748d4d783db078d7599ab75865e41b4b8dfc8be2eaccde36817aaf61e38a16585f24f1a96b39dfe60605056dfc178c05fae5740542a5e5721a8e813413dd301750184e8486d0409fdcd79f010d1b0b1bc2064f6364156902caab2d7f90704527409f33b56a549ba08e9dd7826c2962992f0ed2a546f5f66e4f3aea7373f8afca9aa69be7382744d5efb68331be5d060d7f803a8b8869d0a9448c1df9ce430d970be8fd4827b8fe88825470229fdd7efd9cd9219001c667272ac8daf3477a44e516d690ecc2ae1052889e01de4c97175ba5480fbb0f43ebb75a4f9bd0852926d1c24bb89cfc83d95af85fee9ea26d77cd5f9d6a00c805307b303bfddcfc96f8e70f3c152450d30ac89e7d7149b190bb2e8d3224cfc1c8e6f2a75bf1d02e42f618fcd3f8b98eb996ffffa3d3c9056ff8007be8ef621910c9a3bcd1774db57e4ed138b4cd205e94f0bd1841e8f0bbb433b04dcba0d39ab76c88d0a5490ecc126d3fea7a3e92b2a811819461a9c92857d915f61cfb5c845c4eb75bdcbca4deb6a9066273e3530086d71ac4e1ce812cb39df7c4bea4ee456140b9a318fbf1d930fe52ce7f95ed42e6764f57d14bd8a1a421f2283a0cebd5d30fe006f08dabde2c0de27f097c9052e8d0df18b480d65cc0445b89ac6ab9bc348880afc860c81070c20c225be643ea56a8bcdb212497e5810027f2d06ceff738b74777ec3832879a9827a94d9f1fcfa7011fcd47a116acbbc7b65d75742641aac34ed72dda7dcd31f1cb7b7f1ee28fd7d9e52b8bc079f3de09b2584750c498e41ea6dd5ebd6a9d0e8146f93024a2f41c3e4f634cd82b7aacbf7f1566c8f505c998a372dd8af01314fe58e6e9e7501f069fbacfc367f2b3879e660157978716a5c8004d17e2a347e1ffc6fcf8e6bef47b8d0471faaab79e6de0484282ccc1991ae6ef241bbf6189ca93aefc78954ec477dfd2f362b7a74b2aa5425d20ffabd964499a7da120a944a109ef4f0324ac06d5bb397039fc5a0580bbd1b768fa08b5c27a2d5c686d197c9235c537b8ab4cbd801933a42811223a1fa1c80f1b28640501bf7f120e18c84452862fe5d66300c597dc8056887bd1001be0d85bde104a776c53c81f56eb140fa5923a4ab0d73ed75ff1a65cca6c0c7ce11f138f4f4e7cdb8540ca084c81f5995dd9173022b9cc4209a743f4c23c22b80d77d3abadedfef4a8d71ef47d8fbfb4329bf7b0bf59010d714b9260c3a8d6b4c20e1933af63e1b4d3f63f2aed8d721354cabe6d9487dac399c83d2048666a1864d2b3ac30abf423cf73195abb76e14ec4f5d47d2690f91781d19e63caa00213e03b22e9535049aed0cb27c2092e60a112ede3692d82396f6d37452a403021e93671a85d2ceaa8a7212ce56e44175223fdd040d89c0d34d47e7f7e0b8f56c0a8b11d1aa6adb5daab2131fe050cf13c23786bad67dba680783adb69e5ce132ae4ca9725bd92d4eaab676f1f917d738a21f1192e4967b98b7a2a9dd02d6083c6c314f2c74709642b5da70e6edc3f42a12656cb74f9c2da094eaa11991351bd1fc884ef42d66b27d0839e371ff60268837e13ea78fb75051bef1d27ece7f84f677f0ab655b45a23a613fc7bf9645ff3477b21466a21f0541f1c4f5b18d7f17898fb0559f66d6ceb392c82d70fa36ed0d77f59fadc1a83bb0f2d66b23b1bfac38f95497461b4dccb33c840cf9c85e7fde318f5557a6b79997afb0bef468591f776cf3716e97845bc6ca23c6e334690e39988b4a5e10583abf2fd7fd89f3a1e39eb17508acc53fda6432d507cbeb7960d087fd7b96e2ed3d79d5982eb7f38e1198f68f670361c71e6ac6240ace800ac1e61340522fecd135ec2fe21760e5cd097d0700c41d8e3859b58445573df8317e6f0f38b5a026f49ded69a86a96394f85d2f3bb5c0b432ff547759a18a127e8c19ae7a89979e304e859a182f249c74d8121641e0ae7607ff23ad92193fcdc7c40b1e61d7a0856b116ae24607be2cc3c86102fbcbeeeb925b488b53eac332a478633367afd2bf0085ad1754701c177a1bcddeed15d0899e2b1a1c4e472af9ca876ee98adf31d31c1fe4dadfd149d734c795df5f2e7652424b9036dbadc53acf04d5ceb9d0566435aa1dfa58304079267d9c8cc72e4715f489cd08c3faa5c11f0ddc73f8b273116fb44a79e69e25eb15f72b652d410696495cfbeaec4ca3e6ce8168f1faa3183ad2a9ffcf0801bbe711dbe07c0ff4d3681405fdecdb21ad396bde5aeb5285478aa54549991eccce49e1f37726fa3ec96653d2cd357710558713bae6951035f0ab4777c28cedeae8d36f0d1fa3428fa152c992968e8248a222ce3ecf71c6006576ce1211c4136fa286e5cb2d55a44ff8a6c1a37f95e7c0a777b597871fbf65c4ca1a618f8eaeb9dd6ba2f1e9d16c0343ef757044d50962512c6eb202760e605e3a753eec935137c77ee58fe986339772f129567276df0e187d6c82b174ab35621f67c0ee90337d979a7e9c20aa4443ce29ee815be5423e9f207b3ef19f156df759e1577061d0f221d93b98cb5a8ad45e612f1902b38bac5e4b6b2a58d7dec03ade4d17a23d7ac35483582e2624c997ff7fc3d003447f5752ea8858e361812bea579a5f717751ac387802d1fb49b2a168d78669546ce8c705bd91ef3460f694e39c51c8c227d5978cb4212826715243c943598f5809864e539a62923ff92282b66fdf9ff35be3d1e3fc450fc9766b1a8bcb293530ca1fd66e8a14fd50938d4ed4a4feb069ec9fb2add0e14ca00e922499b925a6ea20d635a422d2420be5a9209186999ef1dada1274b46b03487e38918382f40d8baa89c7b90436de3b5f812b5984ea8060e811755d36182eea2ac9bb79826379bafc30404371cc684825e263306e52d886358c84b729c396bb36e01cf3304833745cbc8c4c7d58af0daf4af43397a6ba9a1a4d11b416756065d2955c5ef018e1948d21d7ddcb4a3c82721e3d61c483eeaeb50d10674b6d8a193f0695fe96948f75f54fdf83322c586e08bb6cf0e503f30814678c4c75b5e25974360ca53b3d1974883df2d571d980fc2d494638de2bdbbcaa3e144d47205a93660780436d9b71e6f1c93741ab1fca5f5e821cc6dbff5d37fa890a042a59248b0b3ecb2927042e0e2fae37df33d68a75ab8c3fdebc165a5a9fdf6b54d9a56f6827e1465b2b04835ad6fa7313df45f75191631e0a59b6b0ef9232f69f07a721a9c5a5b6b9303788383951737cad11a902d7703f0057df7183df967dd790a31c77b6ef64696684a06df2cc2e273ddba729cdb0dbe24dae2d930a34c7175066a46f51bd091581b20090b52110c7d404a9a1753c9bbf7129a74305b54385eedc907552e3704f83900a3f9ab964d3f64942b1a59fef9628e1fc98128364aff7d2a1a325bb8bc55a46984572182a306a6f375f3304bd5ae68e4e9c32bb3af96b281263df0cfeb86f0fcfbf4394833657790bdae8a9c3b296ef6bc4a7c560e2e5864728a86c7095726e22229e77b8b933d1b45e595e9045c9bc17f5c4b443a437e890d61065647d24546d76d4f5646d12027407bd08b29e6925b7fe538babb154c4004435a1e326872a7876c7b2428a132a52e25a408169b1ef4403a53279d59baa3b1c3edbb664ebbbb797f989d52d6a48d95af29d414627d4560a57a717f689d1a86a9957b8ccfabfbc53aef628b1fb2160510ff8d4310cc907b2112ae50211f4b38374e259375b0b105a1a86dd02c0b4f419c5c97afb90e237e107291a2e2ab9eec1a1e237e40c7060260db5a3ca1979e0afe512fa4dfe935a2689356567abe88e701b8e3f76ed58dad297e7e8f9f682a3b55ca70953eca6150fe178742c4b0cc09d8ed1eb607162b223c82d062185c326cdeff782e107596b1ecbab541a43d060203836838560549635ef143be6f53124efa000a763dc9b4cfbda103501f1e182fa3d0f1e8f2c56b583de3a42c3bd079b89b5f4221a3bd4248b816262de4560ba75afe3690eb02a25a09290bc7011d8c9a81e2b1057ef4a04fce88a31dd4b4768aa05f2f0612953a2b2641be7d6e3224d645237d963b8294b3710199b18b10c6aeed53d48b0419faa35c06db69a3c906ef1f0bea92e23217d21b6e4bea3b16bf9cc12cbfe858f40f18a4ad0e37bfa44eed5350ecb09be81ccb981e49a2f36d7a7911e330004d582d9362337de2960dae5ecd931a3600275356ca71fd3233197d3e5b10435a49151fe0a7c84a8c133c1d3ab60f5ef8997da35335a8689b249ae9bf76b132fca1b73dde14fd82ae590074ca2504ce91c1b439cf424a06b908658daff97a13edf89d1960abe49cc6dac39c2808ea10942207ce20f4d207d3db32c972a8bee46ffc7cb1e9a0fa8d1764bb402e6a1a688900590bee3c199b3a5615a9556a5677bed36bf29c382b421682a541aca424238a6fb83b2598756900452b7362d35f87b7bace1eb1ce0cfe29d4f9178d3ea1a610a8265dba8c8cc098e962ff48c5143eb1233d019fe16e5cdd99f6bf3279a1d157ed1d5bb94a75b4e971229ca57c9fabc7cb5386ae52c329490c0cfa8d3c05cb33cdc32123c0087135e3c207b04be3f3dbdd995bbdafe03c5e0610de376e0f22f6ba4859cd1e72c68f32afe50ef4aedc33de33d09c050f9491dbf8aa1211d6364b26e3bce445c5eb2415d3f1aef8b45e83aed036ecd2520472c3688101369bef32d1ef752f1bc9db9063e6784e2268a108ec07449e59bbbb7948c2a6b181ac73e6a584796a49d35632dba1541e8c4802c5f8d54c9893e7f775f7ba8e8aefe6958aeec39178999cebab4b44c1fe81bc8efcda5ef39a20985c6e86b6f812f80fdb926a706ff6d8dc00d636cf79f47cfa738972c6c5c10cf8d7ff4d33a955d5e31c1f3ae5e9dd1002e30b20b59ffb89d427b9e88f3c16ff22e073d1a18603baa13deef7a2db3406604bcae99110dfa57e2cdca33a9bb7414def0455d89ebb6a253c37121d9c824a7166215fd8384b4d94edc250f1bab5ca3489d5045ef13cc9856bdc3afefdfdd9a17eab4970021ce9b92f57b0ddf769352c90a0b436c9d74e48b3fd0b31347accc01befab8fb44a7c3fdaac67b47bd7befa1589727a3bdce7e352b559c3237d231f17f1a381fe2105067f79c3b9d914694815699d0df6a217ef9f09da31028c9fa1b94479f190db339348c7401a3f4828514342608aff76ec4351352cc7d2d57b68494dc7abc02b1edff8bd51fbb4f30c599c2ff72bb1a47f66b6d960e45a98224c9122a8b7b775f574b72084fd98330a9565c7d0a6e27fa4611e178ffca520dd66cbdea49fd617993c68734f66eb858e0f5a758fed8afad1ada5ff8d0a0641a490dc86bef05cf173636ea04705094477d0c0fd08628d7343d722b83eaa737db0582ee644defcb5bf7fad6e2e73c54b6ee220c58e","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
