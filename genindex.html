<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5e77bf6c0ba68af914b3c5cc8ab5bca65632e5838dc92d465dfa4e2ca9164285f861d2dc6691046ec2adf4a05fb8e21a1035a67d10ac0e04123465be3875e38958a6f847b38d616d9ee690a13f08dc819a3b0cc124fb4c9975b4aee0c504af939d2b571b663547cd5c648a61959ff58b1c4bf7916af0f76a4b5632c97197119f5e47df8227b09c2fdd8fdd34abc677251c2555f9935c81de9bc871ff8cdfbe10de32f14612993ebf920842d4b5b30b45691685462e75e0c5e03114f0c0d8c3ec4246de912b59ea520c8305cd9857702946ba804a9acb9ddb06b7d7d7ed0b3838da3ac55a82142af67d9b0459d1cd3ead6b0e9cbdd18e8683e5a8aaa85c7599c890d12eea655d948bd4480f9942268197372850355b7bb96b66bc9cd0e205045db8b4c683a6f6dcec52fd7d5b0702c496e5c400b929962adbc184f921064d261c0382d53ca935a58180f5d6228d82273f4ff05f25f36bd11c835b437829e4943672d3747e50d579d12a61d1b457dee634f8546cae41e052a1cc9c000046f8bb700f82f5d47a12e67738ab636aa9e5e9a5ae31cb4569378186b553fa1de56c58edce3d87b517e4a926f67a881fd3a4a37ba7165b54499a0abfdf1546a8afbb2d83c0a955b2aee8774e89ff184ac36172664b68e34cebde4335a6de561f2cdcbb6354d71d4d6de25e3f266da5e4dab4ad55212a2dc3a979ff82ea4c96cbbe5e29628628b1d68f6b35f0ef687c2048c6305981b12dfa3961df0f16ee6342e7cb30759eeec7afa9aab0cce8f41b3bfabadbc3183fd3f728a9e76645cbd03d6721210be9ab172201f207edd8b335be805011fbd28c95d44fa16a5624debb1c0ae12146f7215236df4b3775f138a9964f2b336801db0fca9a53df14b13775f278e5a6014bed04ff29a4889f893b319634203ae7833400561f99893365d4290198e559eafe333332cad6fe0e32d9581cb1a637df40fa718426f489b5049e92e43e10abe9ce14b298fc8e966447afb0e9d3ebcc037e7d43f99abcef45e1ce962799e3d25f2f8da64ff7f4ec1622d9564e2546d2d33ffa794fb82ecc5641f94adb01e86609e6268699e7e7fcbc51b81b7d26cdde924d0500dcd13ee062206bc2fbefe2a468ab30bb0ac674df5135663d1db268066c8a71d505105a225f54812e7fcf3427ce6c644a25b5d68a98bf4faa2e386005013616d472271b7893e6dbb70cf653ea29dc934186de733ec212d95ef0f7f504f1caa1bb037e00f18152b3d42171089cc9ba6e19b30cdc25391a4d57a1090a33cb175bd0e138102cacb599146b4d739b206707e2915e62db3dba066ba06d151538e64fbd1992dea7c14bc25c19023d256d606fce311b0d68373ea276b15306e3b23f8d289c401d1eec4a73d6986232be2575ce911d6e0e137087f7429161e8baf62cd9f2fbafa86b810d7f6a5bb3008446a9354c8db9d7f57acfae8cba5437478637be4970bc5c26e2a01d95cca951e845eb9be6cac27dc2d26f6c72c7bf5145b56480b140692d2b04cf7303c646c01e02f0c335fb8a3698da8f30ed6efff0b240adfe2def2b92d5330a168b84ce4d4bd29cba0df28401f3b45aee37e5589005b3f71a42a24341c904141d2eb7f33a95ca9422a6d4562924e3951a0d7a5144f4488db7005066fd4b51bf3056b18b5248fb9aa7b762dc35317d2860feb7771b16f60238421935e958614f7784eb5847ae1fb5bd248488389c9855158b40d2ab49114de8cdca9f3a9de366db425bc96fbaa8afc6fb65e8739d710212acf8f84c006a5a311c4e653638b219cb75f4ed408ac10c5f087a132416ec43f0adb9d591e3399dc6bb11cbba98a96b7024296c9551b26914f3bd5bd3e556b08c492247d9076cef1d3e74c52757dcf582d4eff8ffd97394c3e841aeb0f8103e95f213a11c3abbdb768d5cd044b881d8b5aad280f06512f0778603f9cd0761646b23b701cbac5ab2a6f840b12c4b8f99d15cd945d6a0cfbaaddbb8be59c83a47ae291e5bc5a5a14119016a4952bf424ee4d1288bf51efe07a978b0e87e7fddfb65af745a83ea5e3f228212c24d958131e14550e58870f2d8966651c7024aa84ac858555a2b3be6126cbac3f5ad0342d851540699a13cdcf6598f77de7de7097be8e68c9def76a6c9d27692dbeb73c8ea2e6e50a47886a3d4c8016e851a0416dd3c31871ec2694e2eeff373b9124fb8a27c7da7d9ff0bff6aa74f53a3d7dcbf4d74fefdf11b38fd418a9a0365f072eefb0c913731f1a62775ceed9d9f2423c2f79f3ad8f920b671e6cc04f7de558e9c77203a67b3a8f315743d89d0f870967c9cc6145fa069e5b1f2fc1345c7e447457ddf322fdb52e450111fbb0171407cda2ee9c2382e902e9ea29a16226d3a3c434c64393787adce507c09cbd86da98f31f682acd533eb8678a3d301dfc0f7c719982f0beca0e2dcda9b616c651f333f5979f6f271fc95a3c7e349fad9c25619b97d058c478f0c6128010248608a8c93750543e58d9350ee492e0934f3cae7477a7e5a6e5700a1a452b8fd41bd275cf1e11d642e32c90d7de5b62a7345f667ccf200b16880b6c0d0418357aa9eb00386a4fd7d799080f20e44e63e999f320801ba8388e322c3c335981277bb455f753b634028db6bc74d55135d56b564ffd6edc62733c26d595c82c01ac568636714363c854d7fde6467341bb3f337fb34584ee8481099d2fde62fe31de10ebd1d0148165afc02c082ac6edbbe805efde258aae3fb8ba9705bd59143817a09cadfe91aacfa712dcef5dd5044fc342cbbee806aa14f107bc79587380e8cd5ba5af90d02f9338fcf2d718d240d3c46133ff434e37edd0a81f21b61a4d2fbeefbd3ace73574c1d4c0d60cc3c7a75021a0108f55a0fc8f07b21ed72604c254766860cabccf5f03cfa5917a632b7c415a20719fcd032e979f5ff6ba41517edbdf3931c2d9944a7d11e1824563b5dc3e20151ef4c34c07c177bcb97dd4acba96c06f84a443cabebe4691603596a6345b76f10b2022f6f7fed341d3888e8df094916ded0d5c53ac54053edc1d6eaee76e3c454feed32f7dda1d913b28eff9b1fc64a00195361a1a774e819baa5721e0fe4c564f713dcb3899a5f67373bba89e4344678458ecb962e01bebf4a25c3b3aeab5f0152d3b958774c595734db513a3969bf565b3dcfdc75821fa4f0f8e775358ed06c8feb3d449e521e0841652906ffbf15580fd0d665c14fcaee34645eea79492383652f65d485250dc8820bd5d6af430301c5c7bcda44e4f89d26deafe2c5dbe833b29903feee5d8f78eda750397f78f77e427b173672d42a39c4eb3f4a2d09cefe3ed7c78c9df075764641c127a6d47b5f833056fa01fbcc14937951edebcda4e09ebf3573dc23923be6921abb93cd70670a49e451f3555bd27e8a205bb896d3051e69436838736554a377d1c81214a30c3902963c55d1c51dcbc4e8d76d950515f278960c08d8f61521def433bd1e56d72e9b7c9a1f65d97c90335c599d2ab0e76a30903f1b27e25db01623b00cd4d328b482ea6cff42355bfc17a8f0b0660e349b94af200561234d3101baa99f9d5728980948b3bba7b2fc1b021790ea586ea476a2e71a5cccbe72f0f02f7d7328190adf8a29adac16e4821f79feab6a833168440235ffeadd88ff30b26e0d6a01e4ac8a1c1cfc7bc44309f47408fb90b9eb2530c5f5edd55d0e3b000101cc560e4d4077d3c76fd752bb9337bc8bd41d211884fb9496230555e76f102601d20c38e837fa6661da87e424bb3878d6814527542eecce336e8583c32d5ad5b82ef701d2cb867c2eb3c488aafd59c140e4eea73c33e567951fae7e79a11777d9098053b6a02ef2f2505d25ec8b857e2e12ac6ddd5120d512c792b16cfb3ce8669595a098ea9e43ab746c5826d301e225ca695af3eb379c624eba6d6173726b7d30b5a59420dea3edd88a94ac97113af465cd055d3b1bc742061073bcaeb7f9df6e83e4897152e1141bc1536f9c2c4c4d96d301f13462875255fd4c47a176728571ecc004bb4f61f9d3ebe1f46f52b2d778a5de274c817edc89edf25ba04f629098a44ac0a76787e3bd700ef709315d257ac59ab41d29903796fd31ed45c926fa3cdb34116a2b0740042e672b6d2152f057ede9dd0edf5b72fa0c6c198c3e19e0222e2049b53a1db83066c93c1db6acf99ffb480a5c85c80ea87f12f95e3e2059e0a732846efd0b73bbffbc59d3b59e66defef1e4e9e08b7f19d362a69ab1f28173ce1dc25cb89e79f1f47a77bcb6fa9caa2e20a1e5faabb331854093567da9b915e1a8c1a94eefd304843ec38dc412396a26e2e39f3ee45f665fb5d1483b738e84101c353572cb474eefba63149deab766ea3f34104e88746cf03ba5d4909a3375d74fe7db2145b7592d59fcfbf59c632a4f600d8212957a33e65b49c5fbbf6daa617b2821bf78d6fab649e9099a83d0ebe621313a15f81b66daa0543d5ff1e1b7b5d4f29c4daa30adce5439ac4d07ea622eb54259baec5993158766f314c4b720a1c0f2526b51197463c6466856ede63281d766823fea0d40efd050d68d65dfcc9eef1f2e4d41810d8e433e3c17618ffdf3be670922957c6c8eaae54eb880efc7d8077569cc7d55c0dd3e1694dd61737aac10e812212e8c4b403e65e54b68267660d9b4579ce54a2b42130cea9df9647746793816f9a419b90591d736c3de44243c2bd440f4f6a808f54d1a04003acb52cca77c030c591fbc315346fd0184a82c05535ecd1f21e4187d6f2802468dab14208a87fb4b23d131064566b5550c7185cd5ae29cbf380a4254466a751e845fddf6ee48b7d0375ffb58e9a7de5e5b9434c41c317f88a980d3cc92dd7d6d8bd8ce91846ed54f539ae26a4a68e41f13d19ec031f9ebf9f5b0b26f65473a003e4c7d0312e1a46b2111dfa58055225f86a7c9d77860adfdb500c34a8ea68ea4b71b70bcff99e72bb1fc5107011419d3639b775be1dfe01dc12e81ae143357ba27c74c0c5ebbe132d5a89ce406aafd304eb32d8f4a956dfa37c0ccfdce9b558054bca326e64e4995c8ca1286310a7fb0ec15e9d958f2976b914781ed239cfdd4c0807b43c9798cbe0cf276eb15e17d7b3884659de9a61711aff546999610c622641ed1e7a854d9a529c8f1b93ff08a7dc4b4505b2a351abb28fc57f05e8294be79a22cd33311ebdf3b7b5c51555d43465efb8f3f4c7b5221c21ffb5e301603bf00b0c661d38ddd3b52fe6e057069510f4ed35ea47f577e699a978820b23619ef353b4ac0b2f4427cdb5ba4c4db82de564df4109c9bdeb78549aad3469aa27666ee0119dd25aee8974a2cf0c664ac0dfb14706f8f521f401e07b74d37fda3b136cbaac08c9f8cf37453ef94136613988bdfad0f3a1edb3cdbcc992b3b1c5ebaf180481524a5324cfb654eeefa941dc91ba5efe4c9eb9c0ed48f466960143812ca4d3949513b86d96d1c644a14a6ab549d2704feda9878ce5f60589e597c604ad19d8ca98017a57da7c4472dcd1871d9755724d616a8563250ed7a2ad2cfcec3e247f905ae5914c8aa24a9220e29d108aacfa7189183cf1c32889a3da75106c4614ed38e9846514061d01e7c54dd5934119a9d7940b19f9c0b128747a32a6ab82b84c4ea7a5e765932f20a04bea5a1bbbfcfd7a68bc44a820d7c14ce90bcf714b9bd7e4e31f42d25296b01910da11cb8584843f901d6c353c6079673f8e771fe0c1f8a85728b401556d1a0e5faa174bd224dac85993f00bb0bef5e1ec57ea2b93164c68708fa9c2c3b81e38802855eb55c471d5ec142caed77977ab02927596bb26a674793ab9cef04e461f1d426f0595df103969c58d2afb6cb4e328251b26f883ab45d2cfe8b8e4efc9079170e22dbd091a63c79c607ed04de47d3ba0790d24dda519fe9d9f633856bac34343f4eb9bbf8b9dfc82f04e8d2dfa7f208cf5ffac03c98b20c52860b2065a6b3be187d096725afe60d862c32d3e6c1e1f61c0dd7ea64555bce2fa7b96908cd5a40e40afa64f9aba4fd080061ae68c26186590cdfcf29cd170615bb9ab2ddfde547235f672b668960e358098a10303d60704438eef8ea150e06df3208d3e12bb0e6b792dd8aeee68249b31a24c17a2bcba249f1a31a11823934dda83db8767ffd5a41a7173bd0289a27f46a04f8c81102102ca5aea82dade8d3b41bbfc5509c00b0b22aaff5af0590c2a06c67238f1efcdcf7be539ab1036c87fac2a9aea9c73faf4d66458602edffe183b86d7b991237738716aaa322b4063de1fc04312af57868d420572df5c14b76315e4fd6bf22be7c94776eea2393c69c2bdacaa0ad26df180aba2c8904638ddc8d4a80580db79993f4861e1bb638183faf506cd33edfd700f340f5a54ef259dfe60f45591aa78464fae65925708eac39bb46f328124fb922fcc45b5b57eb62ad0404634106900aaeba42a4570c5802335280050b21fc29ee631d621d16235d9683cfe1d6ef846e116646b903350fe962c469ce9e8f2f52be9947b9af72de0640824d75b9d27ecc608e7050b364585c61276dc7c95a716910cd30fb1c6771cdb1d86b0773d46106518eb7daf49f57bdec891e5b6d1fa54e4198dcb8031646d177deabf3333649f81e15d7eea0f7af216283bf3d536c5d16ce491869ec8571bf6a35df84135f7aca74330985e920f372c42e021b3537b28d955ece60e961710b4b3ae0bc623680571f437fe647eb9b7f4f96097fbf5b4cff36f1866647d16b65d30766113bd377379f64e821a93b9592801170e573df4c020981ee7db2f3989ef2cf10806c3fcb88fba49e578d2bf07c8713a3e3574b70f5b84a699c128f6d073e4788525b955af52c53e16eecb8e28eb9858c0bfb8f81cca307086e4de79f39b0ebd65475da5553582fd11c2d85332877e0a4905e3c1d4d48a28af0e776de6029c934112fbd22005ddaf16e60e0e8dfa992f3e18a8b556b0574874f9d5e0338b4424eff5cde4a2e00cc8383cd41e5b8e6b4649882239c29dfe01db749c07808d69efce1b7605f3fca39d37d2bf060e6f667f7be1f95239454718fc56138d26fad4e6fc93f9bf744839982be7b7afa5b4d0d9ded4d840f578313ebad2473cad75708a26418ca3f9e386ca86e2f0f08ae20724da6360415cda8a9d108d62d91f55a0b5c75419b5537efbac12f295abb42740ec70cdf7ca79bfcc5dcf2446d5e5e6d670e61ad1e9d8b054a942171391ff6cac32cb49961bddd61b7df20bd3238dc016982f0e95f802a2cb22e734f0e9e2a4ab911e64a7e4526c5b395c2306f6ba817b297a554a69bc1600fa8f79bf52b9422577cc5be1fbfce72975b64f79e4725516becd1191f3012fddfa5aa24f03f7f3c23ffe75eb911659920a1240095a4ad248eef90ce762d2bf1d75aa2767ba717ee6b6959925e5238891c3b31c0c68ae2861bbeb68a181fe8e3d59fd08206062fe56257d8afd7bc7a8c6512200a9d704cd2f2156b89a746d69cee7eb47350820f8c289b2f8d2f4a0510744d5969fdb8081db21c00153bee566752b0a9204f658d298fa0f57920bbc17a2e2b71f23e03cd43c6ee86a9814f89164b2079abe071934977549dabe95244e6b71a86d3686933a19ee6bcc3da6d482975e19db75bc4bafc522d6a701a8b540b6d9a4d73c7ab184130e5520322a14fbbb951c2c3cc67762c2611210b12fb17bca727fe524ede2422042085538868272c8a6bc8c773499bb30f38ec919f5bd7d8736acda2c280b1b401df57821421b0a7699124b836e203f5f500512646781505500a34fd751f547c3cdd138019e22a918920cb28deced5c4daa05c28ff12e1d4944586fd93629b8bc0d2e05dcd51ea0fee62c13bed7a5160c52c18c27b28e6531f6941bcd414f59bf618566d4c48eb9e6a18317a2979a55e9776e96c42bd0f1865a70248ace1cd3abaec06598622c60aba648f9e05ec74f14e1497772fb3585bb1b50cbf63a58a8e522cbcc3dfc4b7741e67f3dfa6ae6eeeed6d66a4a3692dafc602875bd8771143784feb4d929288c02760ee39547f02ca98e63538d447a59189fb324948a5833c3acd841a9f01fa0428d7e8280970e21a3085f1ab760f60929504a527bef66163f43242d637ca9e5bbb61f95e442b2d8ca590a86ea91d7c571170305115feac92f745bc9765945566c88b850bdd3d00e68ba1089600f3161fc2df82ee07231c5f5b63ba1b23c5128de50451bab355a96226476fcdc403e73ef556131287caa324a8ed0057e8223a31ccbce6607fb77e6b6913408b65d415cfbd90eb83b4d45dfeb9e912253e54ae231d5dd2e963c51bd53126496bed50c47261220b32623c7c78106a7d51fcd57c2ebacb98e5b2c39016bf216d6255072b757e7b613c1ae4eefcd4c305ee2e7d29af9b47e049291de0f7e77cf8b819a9c567da88d62dd596458b82ffea43d1f54769dcf7b55ac3c00c59d16c8604bee3eab103a03e7b7081038c9ce35b5ac43639f17b29fb76168b7388aa15fa2f3a26b483f2c3d5f7a57a1fa6da04b78af87f54bc96e2baba2cf4e0dce09a592e401427a7204b73f7fc4ae488b4a091f32d1932d11cb569eb0f4bd48b16678395dde8c0734c1330a96502fcdc89b36e5cceb6cf9c8551a065b717afe793f0d2a6c05dea44c9461996b60ec6234c6e5829fc01295e50a035ddc06c6503e45c8640a8ea54ce9a2b873f7e1783d9f8a94e5286282aa0f0da8880f243a45df2e963f4e8d4849d77f60dd90d22e220e5cef3f14b3d2af432267177f427a9514a69d79434897ec74608427c862ec12b0c5e8e40f07a1478048d5d65bf351e5ff94c0937c2d3c9cb42101f0f555b370ac6d82f6a9c1a71dae419772c2e6307ee45dc216728f25c9a13708de41adc62cbc69109d4884dd28b4d05c351d20addc9703f266ec00900e512f7d3ab874847286c700a5bc13dcdb4f07609d7e2f525a55536a887b6da205d280f0d194411ddead8e6cae13fe2693c60b21f65d58fb79dafba27843017f6c42c4bf104c172475d1596ba99c33422ba4f317942a8784a4b66be4440d6ae5e17c313088b5d40afd560a737c35e17dc82f818b10a2dcc3c9975cd3a0d238923ab19e4fcb0c4b12cfafa3d3680d1a24f593b82bb8a8ea87f098155628e2a96b31c025a7936ec85d63f3bd0ac539b39a0583583c893185bd4dc3180de6c8d2161c85a7797108c017e791418f8ea6097a06258bc4d11dbafae62d402a68bedff434bb04665c419490cb73ab6168f45823a6f5aa1bbb0d9d0f98a157f2ff3531cf0928f5d664a788fd492e66bb1373d91bd2fa234cc041926db92c10e924b138eb58edca3a94e044e2c6c14f37693e0e557514e6701cf11078b0f7c9f248513d5f0d52f9862a60e5b38b76ed6623ccbcdf86539299c1c52e6182789ac55ed27e73e953a1192e1372024a05875821cc2924cb68a13477fbc24dcbbdbf187045e4eef5c7748efb0f9b513f175d1c11772d8e7a35bac987248507c549d619b252e21b9b14d35c727d8f7aef0834f11d1ca455963898fc158c441812da1ffc7606acee452855887a424aa0866520df528dae4f78629a43238964981e0494bb30b5d79a802d0bfb2dd3bc84add33c0567c4086957c7d5a6ab08f659300dffb49291c0e5663995c5bf967ebe9e1499b7020841dcf329ff37cb039b9d54200a2f1ed7af23ce53e4560e0888818e23e699296a3efcc55b31023ac80807017744fac1570b65258b855452748fb100d1c28b132ff5dbc0dd38d8d3cb75d7e66a9657e83dd7308ea13f6a32bc6bd16112fd30ddfd2c48d9dc88c5f622ff1dcf870a0c593a28de43c25e2335b226dab8f917e320abb182f7d3f7af7dad9d7688f17630f976093e05e7db3d53310a8151e764f7ae3167aededa573df617804f713828840f2a7bcc86ef18f7f51ca879c124248a5bff1bacda32b4b74682c0b78aa5554aacdc4974900c7b93860e8d8a47c9f4f9c33e9e4a5cf94a07c4f4fd11fa9b2e82f0e4ea9c41748bf2a8c0739d230dc0d1d80b9dd5405e51ee4487c48a1bdf12088b8a1940fa063194041b59e1bacd531c5266e9c1954db3d98a247f4dd91a7d46bfc680b50fbcba036b554f8cd90a486846d31ce28350544ae607787184656cf41274790b9526163379b8bf9b9063fc8f436895167319969cf56430c8ba1f6614e4c591854afb27b5acf6ffce218d0bbc20325e595fb487e37c6cc9ff5ba51c7321b8fc02bdf5bf9309a3abb40995f0d4e63938d0de7cd2f8be3b4864d76c02a618ba4597c307ddcc783a0c1ce775c62934ca6f528bd4f42791225f4a9caea5440e313a29482f9ce0186f31ab8105de424d62398e82fdb84b88817c7b2ddc9ba19d355f0ceae5a29d82efdb79d6c9e783031c46a1df1bebb173198730e402120cd1cf422d90476f3fcfd5d49d8f9ad05427e28b1dd646e64999442a5a5a90f60dbe9966d7f59d7962e6a96d17150b777b8474ca731f15b2d6625eaea124f5bf80ca929aa39e17dd306b4c544781b68de6ed42f9b7da480c808ff94151e0e3bb73bbff33021748f1ee6000ace97e874ea06eb93c8545e4a57fa389d4e557073fd8206dc11d49c853ecb13200a1066f1030b4eaa4c7fb36f947c1300124bd53b3fa42a5b517b332ea3aee2db455117fe9e0544d39d8cc08e6a95f1e1ee93da4b6b051fa331cc58e355c7450ede4b7b8a9641b42d605cb9844f6b968ac8663e95d4ff1e1ef2d5a9e89085f98fd0d7483eb6502411f04bb482907180807c90de2879245bf4f118304bdc077630ace7d28f9e08514caa9b918827e88dbed80b5a92e5b0814d8c487cceee4ebdafa76903e003495ad93ffb814a86d75dd278f9f7f9f34fb79aedfcdc0b190c2c114e172cc931f50bdda13e747323db500f813f6271c805452f8fc7042e62dfec68a5a82681a8e6cc57bd10c825d0921a84d02f1aedcec6163a231f7b417e84bde87c8dadc4578748449138c788410ee1db96ee39c2a0269c29266a0a729a9277ddf3540b940bc02f74993449c75b671035d10d95b8cc10ac272920e2acf455c4bfda5dfd72faec1556da95682d074d6d7f15a60a14451030102042af53942a3a1a445149cd0f8534d51cefb701b0f241a1c4606ae4a78f7c4536e1f6f69a625b9853518c2a4a9c8a502171c7bd7d860e27773bc124e4b09c54cbde858c8ef8ca9fb8e65ff5d9440633cf8877abd6454aee25a7db020371dec3bae02bc2a80d8c0c1b3705880000bd3e5f6e4f76bc9c1bce42f9aa665dbfc7964f4999b3673938f857011d22d060cf743ae270d1b95df5b17b5aaf78adc5c97e950711bd73756c14ed90cf8f90c962072a316ccfd40cedb7061c5dd453b37b8516a10d9bed3b3a0bda9856fbfcdf6107d97c4bd8cca01538417b9b4e827ee0a4cf619412a9825b442179b4bec11ec4fd2785fadc8b59fe47b025e48f466132806daf315fec4f7f5fffcd9ec4e80fb1f64153d5d2c38b3dba93ef568e41f2a5531df33aae59a971828df6c4f14312660619b43f57ff2d2462a458ce093b44a0aa24d2e42e3fe7d6b5e38443fe86c3b895741ce36cd20d8d8242aa716ed4bae5b8f92a50ba78b4df03377d315d3706330d47685632d2c5d1faf204d7bcd6b521d9e567f0711e2b271c247474665ce15ecccad5f70e2d6229a0f65424fe31cf3e4daa794afd25480db1b1b47b92be4bea2cf73df8d4a7753c0e8dbe2efe6a09be2b9a5be131221d5eb54f211bd1ad2bd59cfa3094ded290871e89ea4a9e3d43235b23f6ecbef60853778a7292b1a4d698808d6e8bb586b4225d0d41ef250ebbe42861f2154545fb7969a98509b243bf2f0cae6dfe0b252335c9ab07da5cde486cc2e38d24176f47185f8a9c183db1ae4cc62aa15767f56583a76f3bf445caf4039429b19852e0827011b049d2464a50e49e30bf720b64b81111a0208357fd92052d90747e23c88850275aaee79fdaec36ab2e4ad343b10c21fd38bd33aedeb32e1b26d84be72ff4ac4f07c370d05ef1a6783ab9edc48a37d97632bee6590e8f643315a45d531183ec74628e813ea8713092af092b2463d9abfda44ce2ac1ef83f168386ecac3b5f5ac079a1242feaef77265332de877600b97213b9287190a2902828a11ab2d30abdb4a162321dd24e1dd90838c7d494c6142d30f877139be2577bc6c1bb24e1ebd242eea3ee7302a74f9abf007e186876a886ea0f6e3b4d7d9d8920683dc69c671694efb1cf4d4b4f04a3dac8639a0b114d26528308c1f1d939025f23df8d5979793f04d9bfc0c89e5412bd14c7479e8c966219c4b1891d529cff36e3fb2d5950f50de73b0624b8893371cd2ac8a58903f245a03eb85a780ad74d78830305a93641d42c30a2ce6b27b9dd9003f96f1999d260b2f7fa153e5fc41f16711ae2953067684eeaebe571b5e3b205110dc1bb645f8d6953e490c8a1506785349d0896273fc873f729cf519bda2e2ca40c3c965a5c8c4926396b839a7f89b59e92f56a6301df5b88abf930334693076151366ee8f2f930335ee35181f0a0392ce46276ee4f95bd6867f2bf16cf46d3884d18249f6dd78817fe6dd22a28f284e8176a89434658d175636fddf15b35f9b201b0545e5d02eea88d09cb28d6324415a70445d705aacf42cf72a16b49ccacf5ea8c16af16aaf64f9c56246feba85d12f2b4c83d98949c9cb83f2ba8a6652e24ce54629e8c32bc39a79a5098049c2670d60787c6b476151f483fc2a0492e95065a816e9433b4c5bccb54466c684c85a10fa1171ba6172a3a0734d44b235f545bf5fd3fbc522b3355bca52792965d1ff2bc22dc8cc668c913a43fa623b48449d1d6874640fdd589f623bc49429c67b2125a70f563c048ee42a1dc8e0aae32c7b860215f88ae7d1108a20af694b82e338a040b7774d96a8ab594a427a4ff666d114afcd6258356deab43466e73b43069df55b16faa5290e93f2cf04fb2c5c8ca19e6b6ba79a11506b307d3be916ef2cf53d48f0eaa4d6c7e9b55fc6a804b4982c07d9cd611c5652e672815bcf30bdb7948821db52132eaaee0e4ece538a947d343581b7a7ff7cb045606d4b53eefde691e6a70976cf52af40848e9125b97b6e38d564de92060f5aec7e6882d4221be5e7370dc98a1e1a1aa563876c4eecc682be1f5577629449ea4d4ec9be5f9bae53ae07597e1447fa012a98ccaf95fba7a04919afaab0a24045493209ce42e125492208e91f4e46b2b54c2daa1347194295e225f52f0bedb3fa3c4fad5184e94a09bfc61fe9c2502017a34472d7ae9dd5e4f47b7a61436c58c2951f14f1e5cca0b518bd3ad2005d8cb94e6612a236a873c1f4ae02730423014b8678e929ba5951fdc8f71930b56800c5a4e8864db1e1e49b377cac0332424cf0b9e982f3753db149cf30fbe2fde2d3edcb122e25bb8f33c6f48f10645bc8d1963a4e9e22839ae6bb7122155bee0c305bbe77a262a3963c1d7a1d23958c4c0d900f79cd460dacc7d4b86aaa6f972d86add3aae91a2fe647c501cf84539cc5f1dc410ac87da5e07f159976ba16162dcbe941db7c0958a0b975ca7730466d96e3230e03f91fdae7bc4aa3a44128727dda01643f4a593428880851065671d37cad65404cfef760b734bd4bf67031d2e43fff376c5ba53b1d2248dd20de7835a03c1fd9f37043cdbec9fe069a949c4cc61cf57815e8b0d5128977debae53c9de1953a6eb12c35cbcf95774ad2412c895de98574fe8845162e2ad7353d00ee26f9e37ce7866de8a77e2e72066eb5edb296c271913f5435e9227b5d735e7b639020124b17b5382ebb999ae8231d9e38c473afd36247e825ab4727a3eb15381fbaa1b4be2eab05c58adc1076af6e8020fb9c8d4b08ceffb9027a00063620ea8a228194a9eba2c3df5cd75b94b0c9dfda8c1759e7982b4e9e91a86640baafea5d625aed2d5b095834c9b4b31baa10f59a52210e4b283be0a8ae6aa24fbfda8dffb61f0ca5fa7911b073a2fe142e732f91f7b13124dde04f195753abc04ba72e02b4aa9d05b64bfa2c033033f66ac8a35f10d166d6bcef596ff4d9e734cbc843aa6d3b56e60e8e716b6f2091cbf8862c7bd7d386f63216b4db0055f8beb5008c0ff0934778ce4ee0a798ebd92f47e48e416c577ed6f0b0253feab910f4df0453a7dc79b4322e43a10984e185e8d798703e46f39c50624983fbeb21d4fa327401f682fbe631e361625cbc39567149f6a2c21783de105244e8169e4bf51ddfa2be3d427886f7745160dd3c65f73dab3c2ef623d090511fd4e57483d4d0d57c561bbddd302db71e1926dbc803ff97a3bd45bf0f50da36be7b8be85fd934142afe610c12f2d4859c02a2298b4fcec13091dce324df2dbb54681cc4767237c3a6f749777af8db6409dbb8ca355f7787e34af0f754c137ff68e9196160631f344e0225f20fdee0d281b490b250e767b099b728c2456af286bbb9839940b4e32bbc833e20dad811654e24fd48816171d6b4a0162a23e2fbad2bc1c03669743e3c5a786c9bc1183c223657f9f19263d5d5a844be71dab15df5a1f1af0cadc0a11c15d28804e1efc8c49560ac8c344074c4b3285744f5c39ac0e8efc21367d3b52bbd2109aafbda91d711209e38071faef34f712bd6836d6c0fc2f112cafdcbdd645c5c3b40abc378d9509dc4ac985fdd60f357b1081f67ea5800106bb9bf0cf673b28f64af83d7aa7e8127740167cab643430a4b3bf18a895a2c7709b78e528b91f3565abf419e24d7620ec4c96a3d033590020f7e8dea41289f5a4ab0f79c993dd04264e12b9355256707b47d11a0a99301156f587d1cc58d909fec2392cc318ba62aab6ee6f486bb20befa611b8d52f808e2a8f2c8810f5e70d1413d901b2922be16a88c4486f2f3a00ae57f10e1a3cf873050fe31ad994ff25f14218dc54e1e9ea0877ef239d9372f2aeb85a50188289917a7004511e86f1ae471231f8eff0697304b9c6e7e5d3eaf5f941a1608de13a6519a6b87e0115d06aed286d62d358d90e1b077b15875fa15a67c185640f3b6c5bed6958709d165762bdc80261a5798dc2016992a9ad7c1252064cc7e246986308f4f5f314b43906f01a981889b0fcc730ef4a2081e638ce0720b379ff243b2c5be0dece89eb93a3cd95e76f39caaee945d063ff4c5345fb0e51406bae25697115e44e0de58a25e6b960523212bd4bee501dd894c2936bb3b1c1a7118ac7bf8ced4e11612cb9a89216cc189d413f85a4a9ac200ee338b01121015536b0263413feea63c5b16088f98012d8f06a5c2502ad251f2461b199332c7b95594449f821c16dc2871a19b0d0594759c00ecd52cb3f752da17a58efd5d934c72d1f74c5339743d7b1f759bb715d5709f3ee3a4945d478bb2228b0be9ff2423961447db086c69bd75902006d0d167a4051226da96468e5781da11654df9d4c77c82cce383091a36ba7901e7a3d193acb3854020613d2123c44c836dea28b7babfeb1959c27116717f9dc79abfdc7f9399f96f945a12dc676694a8ad0eaac9eb40d58f67b1ee205954e1856ce0053d362d2197654b1fad144de8d3fa52e994b72278a7bd7ac1c65d5c084301efeacb7dc802c58046b0b3210ab7228ab1a14bdc73a15bc83e8c173b19594d4b37ca7f202e43ae4125b7547039e5695ccca3366aafc62c855cb4de539639c9e8f70a006727c2acd1bd372042147689f8ff16c5b0c1efbbeb448ce837708bc2398fea74c26ab9ae90ceb6dc4d6b9d8c30800357f49d4d74eb6f7f4d661dcd325b919366893162ffadf8a17694c712e5c3f913f1bada0a5fd46aa07645e9a52cd66ce7552682769f4f029334fe2823d161097cbf94985a67fd880ee4fd53c2fe82fdb776d901ec4060e9ab873f750e55728f6cf831eba44cf423d45dc78e6820c7d6198f64e42af98de1a6b7d7a67348886e1d0cd44b89fe084aba9a602bd1539efcfcf88fc85513378fcd2c4b57439a794ce5a33f239acef3c0550de99eae75102d37b9521f31277b019dec0ee894cc271e5621291d212353da6c362b3b5dfbc975dbb131c7fa7d635501edc8f38e82bc1342183983cb7567e81ade9ce353f9715de4b72835d2ca62ec46c4526ae31c722a5328d739371b1ea0370a60b2066a953f94e8325af22fdfe8a93937a1765d3de2cd4989172d051aad53c514387ed44ceb6121e70dec86bd1088f118fc475d47df06efad5d160888a6d1bdc6e957993fab29f0343f4e4d81a2d0bd27a49f48c6e8673d953fd8cdcc655965f4a1f492f9e06aacc1b488f763ee4be52243da2d4935c92651b0506d7539c5d0e291cbb1b4479d48a5c342ae8a90918423482f1a9278b877f618c51b68b0b4b1b474c2116c0a98eb9c996623b2078c5e56886a8b252040090bed08122392a07bf1b7631bba641e9013d1d02403c702adb3741e08187df9dd5bf12d85139e0be5261a1690b0a43a99ed184acf4df704f69b88aff1b75308e73031e0e62723ac498b0dc4772fc1f9596982ca485d03cf12910688983b81bd296781dc5108ec4571a81bbb02da65cc9acae72f2eafa67757b5afbe78fa09a00aa2eb926a57250e8953873a28a440109fafa7f0961b8dd986e93412fc8a099771004afab08423611dc08907a89f0b567b7492e0a52c6ed5352ff50c931f19c028c8a5f552ee0f956902be92549155a090fe34a6ef91909318e3819504661bb10836be92953b7335b8e66b288f7714dedea78797b31ff450047023a528dbfc369ec0aa6883024ca2080b8dce435121b08ed9467d3fc999c4f250097c2470a1fa1edd12b82cbc2427261d5a906d1d244e9239b41a96f97e777a49cf5759cc312c632329a04425b644027cc072eac65a0d64d2b0e48b67e61e3b4790983634065081f29a8026da41d60e87ee720e19c0c01141636664b3c8f3b2c9e230695452d6c8bea8a840b38f594ce655c931a215fae617275ec818c4efb8ddc663672a9b5309f7baf79dd913bc965b9843d64cc7c0d786a231949ed7d05a29260a2dd91ef887dcc455f33f641efc297acdad10ba8836f3d04556b649cee258d329a3cd837272c69f94dd94869751c200e10e66dc1e1f590928f0d3b22b518c695573c3de2888646c33cdb4d738d2827cb7a686e6380a2244a6ae02491f1ade29fa77b293db60db2863f6d260d2573a7031d496f9c8f29ae14b696be50047b0ccc0a17868d71e6c5e474288c5f9b68eb518c4909d75df614b342074c8de2d3711923b639219005b2c861ad7358e9d9d7b0cd8cba723794d620b9fec3a355bbff690c0093ca51d0485c5769c1dec3e84eb2b7aed4187e78bfb6a1a775869f4410f5e0573135733099117d368e197bfdfc44aa96178d505b9bf60e4e304eccffc64d5ea144fada30b85d6d0e9bf0815da5d136497aa18fee1eee294fe742aa941f415f313b76674e8d51dbbe1e00a0e35f8f5bbd7a61d642efbe7b833186178c77f9e2a5eb181952fa163773222850c166bbe427af3696415b5f78d8006981df9758183612700a09f5ed6666e5e08a663a9cb3da63679f334600178100ab88e6e0c112fe6fc604bd8f25d00a29e8fc9364521b22fb2a87779784163299869b02297f3120f464126ca04e1d3cda04892e319f65be3f9241e312547c694a9c5a8a4af80e7b2824bdc31d32ba992e1b944c2a41c6740dafd11912a5071e45cb36c6aa7156d610dfcffa71176b5e733ca5ca0fd1aba685c1fa7378ceebc3bc1d258fcd791ad0867997da930f916a76d1991856285adcab7a918d8cfaa7d7c7400e45a64708cb4251defeb8a76594ae80c22a1b10914e74329eb0040b0223246298afb8117cfe53f706d9893350322dfbc69f796a10cad900f8a6d7042b074159c3565e8407c05790198eb700d7d372d865a89999c8172c7be27bdccad152373e1b90b487191e508c2a1d5dcf97f84cc9b9027a8c36384d077e133d3298cf6ae9eb876fbbb577e83f0bb0555b3f0b16ba6892fa9aebf944495143601b8d9b044698903f39368c443f3bd9d89cc3cc8e900bba0b65396cc935c0bd33feaf03a855e3cb74bad371332492974deb4084457c6c3ae6d888533de16d6c371ca56beb1f96e737a46dc2c319d20b1d4f27a466d2273c483900493c9eea30d32b51e677655d4af59db68a351afe992184556d00324e62a56a954fefbffac3bd012bcf78def0f50c821f43e0e13eca8f1b1de83d5a9a92a6c31535cc9d06cf827044959f80faf6030d6e0a6284545a2122f2a1e61df6b37145d904b32db4bd8c8cb4256345f8d06e54c1160c27b9b80191affe1719595c3be79544c4b0237af1266936a01176e13ad0327ea1f1965694b125372d8ee20dd6047dc2da85d1d586f71d42d782caf65138494ab20cadaa4b786b3e6c79116dc113fc3c4e24062f8723aa6f73464392a1aa3d41873d360bddb43f9af8cc2def3bef27904be9747e0a08ab19411456bbada04cd79acd0d40440b45842f5a05a591d1bb90bc5e848359215528fb32b9f64a40dc2705ce31a5840791e6e3654c35e0c58e0a76b3261175d6042eb6dea992fadc52387f9d532a862bbe10597a16b888977f71417c5735c8f9eec456b5881ba8e71838d5008dfda38ebbed3c3569964ee59f9a1bce706d4876ca68814a2017b7086bcabeceff9777c5f10710c54b99c4074f4a1ef39e67b2166f33e351676301b082a59d1e0a8ac745f2ae4b3e55d70f3a526bc8d76ca4197f088f81842bbd8f056dec815c214c7bcf96ca821cc9de4060e7bd04fe616a7aa4a3ea4ca18d66d23b3fa095feae4a1556d574079396e06d9e06f1866b90763aa9f192ee3f0e6008cc4abcf356a654a12e427810e18989a231307c3021f167c92d7b26715a076b47232e50b316d7815edd22a54b23425e2b3330336836798a4c7d5f145a09c54e186ff740c10068a4a804dcf19cdf31acaa2eaf1c921f505f83c338322c321c194e8dd229da5dd65dd82eba013fa149ef75197884d493a902f74d4d80238a6540d2f4a4291a70d21cdcafdd256fae3c374dac7b677ad52c41a000f4e8c9cf453c867cb7e5dc9aadb9908b737c007480e8238ed5ba606671335c4509ef15b91fc419f77dc70289cc06bbc17c190e3683593e0be89b52232122c7c20060a5db3af2f62f40f9e3384e7c6c34693a2c7efcd118a67f10c6fb5a8ced82be1ef4f2eefb3e5f18bd690d3db932faf44f87bf242388a2499926354a4db1d387510a1febf1a8556a8e864109d3153a31978273fc4a4ca8649008ded2a0089ef0c4a5374199aef1ea86820e7f9b961a721106a26c78eb0e1c3c27767f86e957a0a97c08d768d96800fa6135721c9b30fd61f5c04c9e9b7b4c13a3efb73139dd20ddebacdcea3ef968c6fd4f444b8f7984f8f39d338b9004aa21d67a6cec14400650179e6de0a27173b4458a29d002b6d290d1f22ac074093d53a49893ad7a11cb8006a0f92ab3225b3b83341eb10e4dcd31e3c052e68e32cefad443ae78728e19cdb43db9c575aca166740c0983707081aac4b1bf4aa70f21b4a50611a8a5cf890fd549881c29b44df65f5f2488e21f942782654dc549259ded2e0705db85ed4fc9ff55d4646fa15122c081fd65920ee04938e15d3e613ad3ba4443b6bda8bfff45980cdeb89472b6e28f2c74c6b5144bcef1794e4502b0f7f2ec55a5cc5378b0aee2a345db448396430fb0e96938481be0cfbc1c443a17c6abc46818af3cf899edb7946af35fd578474e799dd","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
