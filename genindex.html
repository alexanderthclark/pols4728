<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"773ffa8d3fd5161047cc6d333c2d168803d98ed983eaa5757ffd3dd3ff52318a900d99f279e8db93ce9ea9256571df81d3c7e93ea189565e475e47044bafc03bb854b7287b2120064c7c50cca16471216a917e8ff1e6f19eb7f955b00ce2260be929a5d0f4692da2d87b33813172c465b39c7363a4096eadefaf25dc1fd2c2cb943c0366f86db6a051822f4fed4fe62dc5c9ce8320c485f9eedb204097ac877e293811b167444c21221d9ee1f1f943e0696dc426eaa8df4ab9137d8e24373b3da759ca9c8bf9951c0f636fa0912256d1258affec65fc9a47f434a5774de699c79a5308a5a196e702cf69f562d9c251e1b8083c3594c09a1f7b462c81b6831a2e3f6023bbff553fe61bc1ed368f63f74be628fb76debe7887017392e2627ca0186f36f4da61dbd9fecf6ce33b67381ac50b546aaeb1d4547b5fb230824305d17f26e9ec2be4eee8d41c5a372ce1fc6f695cc76dd147b1a23ba1ec558a98a9fc72f857d9b9f1c5af2f65cb1d818dd3de5748ede749047d34995b9741a0832a085cbabd714aa2f0eef6564fb413f0e771cd2414c6f33cc4c8762c4b4c4f3ba148a753cf0d0d6bb56fb22b8890b0bc97e00077d05a06c9e32213a396da8e07c64744c207f26798e8da3003aabfb9299dc7c73913d6119e614764cc45ee1edeae54a745dc877ad4cb15702dc91d752369b40c1a9728042db4f5cc801c984c8e180c9120b4abdc8b5025c1f0ad4464069ccb7366b6ec98f1e3e747a66dccb5f91467322fe71399c47d6e29ae4ff6586d7c7c714b8ca524bbb16d88abfdcd9081e970e70ff9dc7befa03851d13ea5c98dfaf8a4a67bda40107bd813af762040dde619656a73056e3ddc87ed48b428f5ff4f82ead4843fc30b2d6d2a5745f35f8222f8c267baa3f931442ec6f6934e372a0584da0d6eacb526a36cb5c7ac751f0be370820c5eb5dc0c27588cbe50423287dffff9ce0f4d1fec237ef2a5c891b049e8017c372492c37c99bbf7c0b9b784cb8c88db0c86d63b5faa763c8a5240d2003362ee5af853c9ccdc679702ba3ec1f7d3009a498a940b1ef3fbf2884a26dc2a42299d22ee05aca35d358a9e1bb0ecf516b8749abced9f16d1e5f0ad4eef87f0d7218f0b408f659e4ace45ce45cb43953e6072bed50c1e13e0df69e7c847903f4d681ab3081c40a61168db2cf5334731cc2bb789a650c77284fd03b015faeb59f25559e1506797eb574f52c216e2e6f51eb94f99a21a7b4275b96619c2f1d7dc0480e17c72e25b442768b192391db2d8413ed44bf427a9d32c50299fb765d597018eb7667bf60f309e66bc26a9c1d143173cd0953a2cad17dd724de03713e0a3594371febe23c197472dc87039c7feb9848b9a0cf9fc37192380a6cfaa0f8416ebf894f48e18091db2f054afd24c6a94d910eb3fbef0ce08e228653c29ffc6a11bc981df12e65cf01d31a45ff25588a1d5f1fe88aad726f2604d8dd6c3eec4324225a3d456e9820e949b0f3b33b1921fcf6991d84d7f428b844118625ce4de8a0b5e99890000729cbaef6448c4241779088f6cd774879fc06f3579cacf46ee60b2e5856661f2ed34e7656e2e1aa039c932539974ab30f15c3680e54efe5670b51e17b0725fd484328b41172b355e99dea640feb63c7490c6804386d7df1ff517d05be0290c0e0578c42045af103872048b6134ad044c789a73a8158c704b4bb09d4a41a3ddaeb3454857e0dca09ae597209f007059342e333d61a987b606b99ea7c273795788a5047e437ea7619125bd8dafbf32cfd63d1eb2b06fee9daaf829f96b67b15d42ea03778688503f2447bcaeae189bcc52879c57c777e6a4101881b421343c766091067a9c39331148328dc6eb81d38cd743ce18478f26df74bf88fc2223682a557fb0528dbd924c1260ea49b8caa16885c9f78ad49bac03fe4c4c8edae71e1b6a56bd82f6d3ceeb56b7f8a8c026617c1ca8b0daa39c4fa4f08d46767400b4279340ff21bf08b7367f7953a039947e1ec1eeecc2471476ac07406692cf5ef67979fcabf2e0e1aada77d86b5769963c3a17bb477443c3262a6386be1fe4caa388c4be5d54ae80634425be692b1e40d8f3c365ab11473427bd491029970a00db2f0c72e7777af018c208c4afe8b263976e3091e253d95fec4db4c8bfa6df7d11417803a88478b88fff052d5cda0bad827e8b0dba9ebb1038f29026d9444a070cdf9bf60cb58010cea4531ef3e04eb5217e902279e228389198b6096ea70a3b6f716ab51a0c15801f36e032c2f06a3d32a709d00605e0d59b9cfd02fd08292b72163ec42355452a55ecd715657d15fd29fc4c8a3c18c3f5d5f1683fcc40a9cb7312491f8237a00fa9b93f0a7bb67250d13df73f9dc45d0fb490198d48ca052229d0c64cb00df1410fdd8b155986787051b5e8aa48eae17383f79c31275e7c7963e698ce4879be23a9eb82285aeafc3c9acff4e8cf1d9b90f0dd153b6a9228942b73fdabb559b44c3f3b9e8c104e71d192ae172604f8fe00ab91160aba20b7f0bab3fb8167d0d2863ad97b0afd8f9b95455751285b056b316c78028b59ce130c72f5c287dc0ee03d4ecfc4bb438556d8a1cf6c9801df6b4d9bff9ad9b128af5f667f95f53b1965cc137a841e3e1fabd8f12420ceeba6a82772b75a5a76d196a47fafcd883cc8c80bc0232b3324101071931beff930861a9f4d07fc1231cdcd11d74ee80ae178fd9781d89410faf96d5cfee2d553d6f5cc54e37efd63260bb473770f905408577f3572cee29dfedf2768a24c2fb65ad9990543e4c45644dca95ba692df241bba56437241485ae36c70aad41680523f45639c2ab220e0ec09cce969fb680f22a62f71346699094a57999a44992632d54b07cf9d31f9b377637ffac1a3715a09795fd197654a1214910e566c14113d294db0189e38738d923b8b657ac607f9f42f010433df6bb3af41fa72ca91c590331e2ac3af1661611cbcd63571044668390fe1e4a68a55833fac20beadcd280d927dfb9de817f608a12927c94f3ce6294f45740852404ebaa65465a8d7c6edf1e83c133e7352a45aa76d6ebdf7e64078fe82f7876b0390886ccc57c598408fb4c66c6a0642ce6a1c76da5a5f0f3e3a8be558eee0e55ab1049e60ea509e82873c082a916d491b32db95eabfd9cca02dce5249175a97bc136e09f6952cc7707aede005988282113f61d484fb7b38e67f2180220154856e7a85c1da573b62ec3d69118cf817cf0c8e7d758b4ec889035e5ed77021a6e7193763de65fd2cf4f72f1437b38fa8ec8b60e44558825048a6d62a86e640bbba4c0f7916d6e28d8f23934f602e206961aa829d477a6e65335d05dcc62b18305f51327bfba0d1306d16033f37c47fefbb86eaa032e72b22414730360d3ea2abdcd4578760035d9a146db51fb56f824bec86f54cc20689ed50eca1d3ab263fa1c23b395dce3339ee503f9f2f8ec3df6a33d221be9d538f8ea251a3ea6f90b569eb700f50fa70f18ca5fc505249509f8665e235239c1358ed13ff643820a71765779a270ea3e4bf98a53c3bdc3df4a66b1289c330dbd83fc79e8916a55cbb85b43e6ab3780911a8f50275a3377d0b8f1d6b91f9664834621200824c00f6783db114a1d5328f3df7173ce6c8785046324401bc232dad705bb7ae75ad0462042070ccb672e1083a44f1fedabe278123ad4d1de89a29c443c6ba06fd5b4b54dcd9c8f131a5a81891bfbc467adafb0cbb29e2a87f085e2e9565503992706f6be4458b41f9892de4b89d62db84769bd7f0461f5ce8eb9fcf5b8ab7cc0765b4d2f9e9fa0f78b449320af8a5db1e95f281cb66ae39a61371d4315b77670b2048a62e32e6fe7d799c62b584cd2b41e41cff7be1416957f6538f2540c72e33b5b49085723e1cafd1b312c9db44135d6bf38d3bff310d39260dc5d47ac79cc476752ce3bfc23454141ae4017b9a6dbefcb95536d1471dcb90188b626dca9c81ceb0f685f094019126c4df49ba10a50d0bcd0f89a48ff7b50a004b5d9b61251de2e63a6040effa3fbb88f0c1573cbe683b93747ba77a76067046cf734995e15624098eee8e41b6e9db1b1555f9a8279b498aad95dce1c5156acf039f2de3a1a579689a3c552425a70427fcfb1b036465c6acd6683b9c3f8cf90fb6c2cc893c7a4f0c44899a9dfcc37c3dc6b8e0783e0faa0b4a1df0fbd114ad2c2e02ac2d872500db7f0ad14d24f1a7baa1cdb18e9b680f77aa50be6c212d37bcdfc6883f51d251ab1fb5305262267d5fd4e04be4ba25d6b3e6068a7583594940356451472972ec9063fa6948fbdfe84e060de5872b83e5a3104978d08641e6c54cc3f26e9797c8101b59c5594ddc15f51b7b4394239a247ad137c04caf46bcfa35c556a13c74af56a7a0f8f0d0f6c0828c0ca8783947a234fd62638a2e023fda2c7de318694d47a20dc0ced6437f085bec4d354d617be48f8c389823f07dd6a9db74008c6e28f8fc76ffe9675872bd13b1a40e1ed51d8b3eeaac1b35d47677e2709b3b06ad5e9661eeb667fbc91b49312f9052eed8933a96aa221ab73a0f2064f12a52f62654331ee0d97786b5a1c85b5b8fa3e1aa16322cd4469a67ed445887cf64a69d6febf997dba8c43d5143941b474634298fce3ef9b16396e4af9e1ebdd2a5c89a1494c713e3784bb8095b5e346871909a20034aab20a24d7bc6139f44bae46042923d4e001751bff0518744088aaca6c4d772ed5e165ba16abf38c3db85b83fd72b8f71241debcb408de82132b9fdce3324e7eb498e49426e817629beae1dba4f9ef58a79e1c112d3e8d8e0d989bc9a279244fd231aae7404214729b04bae1b4151323966cdff0a2ee5253553b00e14acd0500545a65bd372e8016a504ceee220a8c8921647041ffc739ff51a4d785bcd372156ffb0c20b44e2a85f949948c8b02d188e3c007c9b6886876ed0d698c0e1cc17b51b8a654485ea748f588f4d6e5fe8992db8989708eb1eee84a6d13f2631292e38378991f9cadadf6ac94fc270a8c1c9c6843c7e726d5da1cb2a1436fe8a7ae7d38fd06f896f58eaa7037983a51cff7b881264b951d3ee0fe9c3399fcf6c753efbedf6b247131b6e66cac74165d8994025d7f6ce088493b249f7af24d70a82ac25c0bcad08acbfe503cdd0d370eaf55bec7159e1a2755ad02e777a007886272a5abc4855d8678688d132cdd94823747a2d75b447455b49f1e81f8d996866ab4c9ed7c3dcc8b3b9bc09e3474df91cf7a1fcfdba08cc4cd7fbb850983400db943573b7cabe710cafd915a6adc425d8cd92c79bc4cef8decafa360bb9060b73bd3f98b5a6e894ed7aa12b8298275cf34427ad56cdd7e7767219c4137e6223d175d5ec77c8081e1785204d433a2fedcebc068b510b3acd64d757dad8df5bcb3ec5d47af6161f72d7c056d437bd21c7087c02be5152881c977494ddd2c21af81594faf848cc8e3690a412e1261fae61430e1e20630a9c0dbe2ffdb4be5f5b979bee13d01f49976060a70754bbb205676a40f1278486b1d725d5ff34dc2bd34a41bde6f4ba2a2592f9208b8245e8ea2734932c6adc6d83082823ed19f350fd6e79dcdc2149fdfa66f10674c9cf9e30fa6bd00fc5a3f1be401a7595ef49b5507f8a7e4737ccdb3b6b747ab6599aa31af72415e245ea943794ac7cc98263e347713ca95bae3cde63c8bb9ac2dbd8a570b31c8d318fd86e0f5306c9ed3e03d2127f5a80f9166755c3a36a8999b5703b16ba254e3b58e9ba4486ed40c96911613c59f17caa1863bc68af7b2e3fea80a84828026721299707550f3e650b02fc94a586b6333bfca5d50c46349d34cab98cfdb744c50feec8dd868a560d52a51bc91a98534a0f8070f77e5c0a71ddea28aca2191a896568da1c56ce4b2ff07b9ed18c4e794415ff4e3ecf41ab69524d7413bcfc6317d357c83ee5e81d94a7de9888c365a6aad3b723d04269b2d26ce5f6d84df30a82c04b748ce7dd11d0a2e651174778d8876856962c594d2c7a1cf5246ef778b575c4e1a27738d0224ee08a6e7fbeaa485b38fe919bf7ab97eb7f410f1f630ed5a705ff36a1650ddd5e8d9f787956bcd03338b33bd5476aa8ae45b7d84fd9fee50fdb57b9422d7515e15de8eb29a836f12d7372bcacba871d6c504bbc7978cea5e15a65e257239629f8db64ffa60867c21e08ea67bf1015626aa61311381517c89fa1d77784a04d239f8ef14dfdfd620d74f165b626a42856cfd4b036f42741136578d907c1e5864fb1f29a882a163099b40277ac47703c483db896202619c17c04b3e8d0b0f19aeb6e06d4ab258ff9796d8705715a87a4d35e449b0df3a5ed76eb081fc184c9fbd133b9c9dd98668441efdd0219ae7aa6ebe26ff0272b8c4cdbe4d05c51e81bc3d759379d57e00e0f85a748c52de2849fdd698786004df7109cbdb8c11fa6c35114943e836606224bc53cb2e3c1e7275169954fe04803e80dbd8735a9d86b7baedadceddc60e7ed6447328663c992fde89b9884d1ac9cdb380b3496c016fa1c653f3cb42738f865775bc86950bb86b61ede5b866b2fbe779f04d66741dae328553633d92864fcf780328c33532abd7fa61e4c9d94b8e33527202cebcd1b18f2796568a45e4f86a9f6c775ec692bd803883fb2998d1da79dabcb3886a23aa8f2a12d60f344fbe8952fb27bc32dbf6b77ce0602c79c66e21a99b9281f08fce6f93b4d653bc898f93142f91770e4b51c3e1bb8c6a0f2492472d5ad227d392327b5896807f062661aa38453d500c04fdac3139e1d4665088f3dbe977a9bb892860cd0769b2ef9c0b1fdc24ead2328cfa5bc424b45b969b1871044c5f6e17ff6235ccf9666a61173de63c918d039481cd8db1bc1ce19458dd7f47db2283e270bbd85700b09dea38ad37edefd1bd401537afa33b83e165d7d46cb6d08b91ad21f96813a25a6b9f7b8ff71daf028fc02986ba44a5dd305906f82dac5ae33c38c836b0e72554813516bfc617e80eb6f053ca258b9b874c8d9867905608155cdcbe742ca6770adc5332875325173fba2c5ce54edbaf6f1c5417a2caa8784924b6506f1f3dacb4b1728eeb42aaac05811145810b166300c6a6cf81a0c6ce1bfca9971c3185113c65d2ae714115466ea8bd1ed45c60ad3f603ff527d96f5a74dbc0571e0d9dbbfe06e76e3630c00d96242843df4e7f37e3fdf7edb52227396cb744ac97c2a5126331365da6d1f9c15a3583b5c9de71e591be4c50961c7062c803081fe7db60d8ebbd0dd97416784b377b88101b02a19fe27e52a406f0ca33edccc912affbea99334bf96152f3d01a9da6a57f73e43e1e68209749963ddffa84b41d8d056b4af3aeb436bc79f7a73a88120fa4de5d9301eded495e4047b731719ab60b9a72cebe3619647853bdb3f7d4c65d15de6d4bb201a2f439ed098f31d90fda7c24ef943cc62d05e8d9997e272315b382f075582c18092f9d11b500d4e7e54f8b61951d7fcbc83412cdf0ccff7eb29edb0c12b1a7115ec3ba7757ae4fb4f771e62d037279b4997d0a778db6b11a43f4513293dc198030f4d9e2904fdee1c3ba3d8066d2ff02b2d0ed99ccee5e760e13f46f13e633530c2c0b5ed615ad555462235562d5878b3db1e5f3971f04fb192ab59d9e2b7ccfa908f4c57f8bc020ad14a00d890be79ddcbe5da4740d8a70a6967090c507a893f8ee67efaa519c662f267f0dcbed768f801f74d57a54529fd5f0b5ac10cecf542816412645ac84950ff5724fc94eb61beb5f6fd871a61da926bc9a8e068057633363e3be3492142e8d369c4469e9c24f1a66d1ead688eafe2d5587ad2c0d6490e8b1f17b49d4bbf6f06588c3ff47a5f9d5fc47de0185ab86bac3da65855e88c52021855fd541e91070c16c540ac94d6c5c40bcb4c4787ea4a2c692e2b95743d4acf941fd1e70b1a3ccfd1f5ffcc5a901ddfe1e15bf4c05522620d33d6d82f44bf315ab800648a17278726aee14ceb88479ac2ac8b82c2cf41a5739c4975a5302971f2bc731e76aa1c4422d79dc7905f320fbd11acfaf0489eff6d9b9649326ede86d57b488bedc6831d2c10730ef5815eb33d06ded8527060913a3b44baa807b9d6132240251b6c145b1f2097dd9751d8c17eace33602a2a4b18d2fac2286e8af5b1a4e732f8cefd70224841eb127cd4230e74c9cce53b59ccd1c2c170aafa6368e46d6a0e88c2ac0f3320cc58b0a64357813b654de2f43442915624bcd78629b8889c2d4f3352e6cb2b39d8fa770592a22d90bc2d5f969a973c65b3ea04351a43a4e0eed281ed7b88fce1f3eb3e5111fc5222bb1db6b739eb5897e0522f6fb07fe2552529648f806feef187f5b3e9b122d42ba22bd324eb986e8ad4b02b9ad371eb87c8da6acabdba3d78b079af5c846430b144d42af421ddd56cf3427497e1c8aca62294e66c0d30b7a3c541025395fbf5468ebcf8fcfcc85876b8c2c17470427644f3a50ed7f58ac8a335ff6b65e915f881a26a1ac81641e12ccabd5c2fe049ee3f7966a0f39319606206f912980077f9ef625d8c6e8e1b5b0b5526a881956abafb07f848246f73cff91b10038e63a152c12506d54311e413b7774645f4f7884868df2a6615901109100b744d9d1881f37f492040c997758ae21e63bea86054334e4cee8ac763903c7e44324ddec72f2e7a008ece56cff86351ce157407e402879c676c5a70f211bafbcdc2bf0b33d3996e19d54f53cf014a0792f39f922a86b26a6caee5f9d8ebd9185e1878de0c8df89266553880932fba181b91aafc0ba7d7ab35e1f0c16ce8fa045a31699fa0c46a7eff102b56b776c774c3dec40aad30aa50fa0824478d3c980f553f0425ba670cafdd51cfb55409aff2d069753ce81c68ebdd0003e423a9a9fee23f349324a313ff50cf8c071f52f711ad88b55cc200dda5cbbcc38b6178c2c8d0f2e0de19c6a6f90e0bc4d83192be13d699177ebada9f0cf3246ca5733c4e244a9880ab05e03207d9bff721e589b44e6de2c53cad4ce3e3bf05eb120c9100ed46d7736704777f6f3a7e0383ef4dcd9f15450cf23fe1dec8840b13af0d0014628dfe9e198816d85871ea7c51261a964d2a08a55cee74334a3f46116e54c399631c3c17dfd67d4e7c1be41f23838c32a63bc34ddc3f72b8383ed6b2a9bf648b278742654d4c62dec7e08b51e0a7af4f937c729f4834a01a9a2a61cf9ba528d69b3798436439c395ca9b12fb72fd163d3306ae7d916a87afa7f6a37f31c5126c67627594149dbcfa36392db992afd5d5f6efe4874e4569ed8be7ba52961ac5c8316b4a49b82653fd4db08e1606f0f8c0b3712b83ed0a1df4fd240c477ba517ed0ba3f7207a9ac29d6aa00d57ceaa823ba91c80579b36fce0349dd77323e2b7f7ae6f82d61ac60a994715a07a105d016448536d99e22af55f1edb818db012fb0870f255550b42e623156e9d2cb97b5d62acb4d9467f4a8691a99e0edc7c5c157854f0609e1d45c991a73470591ce0ed49411a6c9579c1dd6f876fa78f9ed693c9b48217e420859fcbe57fdafdfb29af92f9873ba392637bbfb7b2236b7fbff8852db64e40d170202d48fb24553c2cb44c2c7fb306692c03bc221b49fd2463438af2cbe614c0b400eae0486e90ca968912498712daeac4517acde397d11db2e0e37174544a5455a62b73eb5873743449a9e2152e5a8911474b72e60d3d31c937d7c984fb1725d4c9645fda2f9c59c9841f29f462713537d5106ce311e77d86b3a7ad67d3bd8dc436bc89ae2cc54951039e9284b76f79d5da71b5b1be39ecbc01abbe6a2a456e00b900b081d68f6d059e47430143144a4bf0f948209b50bb46be8904bcc11003aa9fb2a89b8fe11d7a5e94b4897e58de07404564b6dedc05e8ff40278acdb6256191909344428d0ac845800ed92be458e0abf7c2b24199b6fecb49b3f83d8e2015c1eb6a88c299df02c0bd9446d7add4aefac720d98763f578564d0c6ec0b1cb6a7b8bd39cababdd049dd4d03ba6942cbe1c2e46e3e6d4ee2bd3a0347aafcc81a2e422571631c817d7cd1e99d3b737379698fb7362a83c3600869bbb1626eb39988501a836df37a5c1fa55d29b41e284b3143676fe278f91ebee3054dac51892837c53d16f40ebbfa6ce8fca544127ac8f47c18ce6c977dd62305829ec71afdf87218061270e7a9fe3faccd0d795859660499d5b8a30116c00a08a1f5ca0989844d32a86fc5dbf94f15dc42ab3b9e161f8e0b79fb49efb483bf1038da8a34eee352ac28be07cf0425366880d6df637dc4cd3c304605dc545b43559e518255cb82d3ddcd9549f9220bc076544eda6d7325358752551d0120f2d7cefc13dd5e150884c5f79075f84fd8f5044412826c11bbcca0cbad6a1a9977c71c44537785aa7996b518aa80548ffa6aa8c229e94051d034954d57c6c84e1907ac125daf27aedb3ff1f350fc6000ce29be75a60707d4eaa0806a044dffe9315da5bc683dae420b11b14de64d9672a92e505145ed5ed1111228aa72ace5dbf233e1335215e62a54356bb5b8c1e59a14d1cb0e53cd16db7d7617fa68552330a7bac9b961ee62094d9c1aba61580470a8e0d1f609c2c790ab75ea174b57e2c452b39013f2e5f011e9bacb7bb5def6450ba1136b141086f5ca6b0363f237a704473b0cd777fb9775931f86f39ff5a3e5eb81d1a00e67436731ba0f7cfa4edd3c037b7ee7edabf06076fbcd7f366b39e0c76ec022a64801f210311c138c4fe3d8664c5c0bee8e97f80853450383ab68690055fc8dac1af96ab185f9a712e963aab8d71c04d06fad4f612b3f7edf79afc8c8ac32a7d19ae1c5fdae2f53cd37bac7429a9f78be76769bb8f30fb4b24b1c2a182238f0f1fae6cd2d13b729f232fec0f57d65c244fd18fe2acab614f8d72cc436d0e31645a67a8304c0bcb128a80a867005c1cb2e3c948155f1ccef486802caf7d51ab1c09a40aa7c06e83ca201ddc7553bc84f0b222bcb7a8ae7b5a86317392e3e50c5e42f18cde810cfedeca4d37c4ba0c98b7b680ec8b782c6b9ab5c14b6e2a6b08e9dc79f497f4fb19b5fe9d9fbd3f2fe500f6e98507ebc1528d4c7986d1da69da179d78655fc2c35cfc5fd165ae5e517ab970841c69c888522ddc610cdec99a2cd5776278f09d1d12e1001333e509adafd2222623d2ae0afe24473c2207684005ec0914dd64bc12cf65d3cd5c73b53e6ebc05b53943390ea9238ff550be4bddad699cfb26699abd48d6af8c009814472a070a2c4a61cbd4d912b54d8aea9704e2eab583f3c00093ab4e22d49bac9332068c7750e4156d0c1135646886d06edd4428f7c8f24145258df92a7a19a2803c8d33bc3f186c2464e58d273d6e6523a9e5daf06bcbd2b0496325163b1e9f3258135e9f6f5c9eb447caed68d7b8ca7b3fcd10de35d1e402376a690d3e37b46c4290e5f22580ac797d6358e3bed7cdce43579432c7e62281c4d247d6d8363dad09e5e020c4527cb96e8e1c37698e73ab6abdfacb6621921ffbe7d420a92fe5ba69d2da7ab07fd64403e4f4f9062c3dca10165cff2d08a7b5875b69aeef37e7a0e86c1199f02a235b2d4686ea68d68a1a11f98ad36982b291aca54520d61a722c615fe9b121b2e2f31ef81d4aee8a0f294d20e4151009ee659dba7bfef86d735482f89e2d38107924d3c4d716467614eef6d13bad17a88704342095238ce88a0c8ac745167c7401ef4fd1255d2d328d7207b842f594d6661d65e0a57c64794ccb550336b0e016fe70ad02ee1cd22bfce971441359fd3b107fafc6074ab2c54c84414f35b0ca5bc92e26a07f0f41046f8c28592abdaecd453d39397baa83acb569b584d51dc98ee28f12b9fec98ca0ecdedce8cdd10456fdbbc35364b3b2a102ebd458d594e1f751d0c186d075c49c5b19a55468c98c149dc735fee5085baee6c6a23ecf654800b613a6444ee673fbb77eeb95e944ca7d2e64553823ddc71de8fd30d4457bd0c9beda0971647ebd276fcd19c42f6340bfc2c4c324e2b88bdb97c2bf4aff15309f470184919992a5905a584bc9a27e3beba5144a5ba6132fc6b7d7ff92aacac884e1fdc42cf4a78301c290a78a4f57f8399b1930d80ec6e3b03732a38b1cbfce7a1e82fb4efa4fceddf9c15947bfa688be4c47bed3e19bfab0d554b832b533d8c1d02e954357d521a3a59631cc7038226f90fc575ebd5a43ad66bee30510deb776dad08e047c652a3807fc9a56c0d841c62999a0b15ac61356d9be98c228d5f32bef643eeb0772ff944056e998cdf731928a84792002c3050257cc757ada523147426e745bc5740e555eed258e28c10ffb31423285de7fa40e12d2bb7d0f557dad296c7cc8c9e4cd0ebe95a9da9de59998dcbc08071749ca7115542ee6954180c959a0ffa73f226d23f2605fe6d38c1ac7cddfb9cd522392ff05f25a638d9098aeb21e4a5fb4cf8591aee365237d53832212fd437439137a9f79707242bd810444891a37635ff67bffa532cbf58d6e7d7d36146f3e1aa07163a9945396ffca50ba4d43e096ed857cd6fd21149093458130c5f3f0f82c2a5bb1e19ce9bea345787197d4e453bf6c6bf1f0535c0944ca3078cda523084fed9359dfe985140a2e82a16d0816fc8fe486885b37f81de9641727a3ac45b33e5ef607634f8527ea580ae640105fbfcef46b78075d5a331c98a5c23462414e0d94204fdcb571156811120e94418a57b3684f6ebd185008e976fae377bf04c92bf277eab6e9100695e481cb6cb34ba79b1e02eeb31ef1cb4076c438fe5b71cbf32c41a0d89b9d9bae437c073df2b768408ac4e2e576fc7c1ebb7bbc99ff0c2925eacd2d7e1ed966802aea72ad9da57b51ce621531fbbb080bca835d48f258b757d31235be9c5b565403306ab1aaa876af2edb89fe22af4ff3c4ae93b2226a5ecb7c3774470d9bc5415210c0f5105c1f83e889a4d5a475569dc41a0b38064892e9a3e44154fa9671b6b40084028f1249ca8240e59c38e1e184576d25f6c7716e819da90067f3a3b84dd330a598183c7e176c5929f2846796b8a2a6a633a525ffb6c1a6a1a49ce056faa4d1257f03991eaffe855f28dc5622d86fd9df1a413d99b9a02fd170a9e77be0e6abced8e3ea68b455d3ed7dab71906eb7ba29ce2e9151ce2251bb63685c658c995a2379a8e51f890a65f0fb0068942a38e851436919c103f2a827f7ccce879d8e26c528cde10087bc507d82ac16cbb770269d1a060b4f35d2390fa4a24f1ebc8186eca9459515757eac26cb0f4532c0e919fa6a3248548116aed4c06cafa4281581b2c26574791422116f97263d8d718acb70dfd171486d6123531015d98abfe4769d2ce54351dd141f13d9c0c424e6d27927542a90b7c297ed2e9c61d1354e51b7d50053350646a8117b842a006532b26c15e3bd9c4ca909d04f82698d85265335fcddcb7ad0a9e8cfb8fa6af7c0127e1fb3d10bd63d4840d84b55a379666a55d69570fa85fb64c325729efe479d2687563854256c62480f81410452e788aee61f45e1b28e3691511b2ac7a88ac99a0352270a19f5f931d9772a13a0772ef0a04da63fa2a08d3052b78200bbd44ad9cf980645ff8867596963aac62c5356862332861c393c2149cfb0c403cdc41c321d0439e17f935f7c6169a05101f3f25dd6602464ea3e06c30e8cea44136c5882405b4404e413f18881a87874986e50e738547bf07186540ba99adfc5a3d584b76d8c67b31dee91c3ce2d26992a72cfd6da145f758e077a5f71e8db3bdcefdb5289360103f4ac7666fdd1d49fd8c24fc59637da2fd4d105689e7ae98dc2c0cb62594d83514f129f5a1cb61bd77e290d27d70ef1b76c35587a5a256a4642989100b512dcc8a5168439d66a3b6014ac6325c3131fcd0fae6e63740f8fc3f41e533b3db57672f34054ee3b24a316aaa252d840d730e61bae3c941288bc2bbe944cc9decd11c485a9b06b7cf671b44190a32338d3f0e249effccb9aca800cb3cfef3c2d2feebd0bcff5f714e92d9dffa1286033c79f0cde5605c71c0a59a23d4d676093d8854a9021e30c5c23ad8cafbb32ffa05f19f5e066c62c453503982a1940c70dc62971c397cdb98000b508508d31aaa28392ef09a5f600bddb9ad785d3b1fe30898cc3fb24bccc828a6bfc4e1a48e39f6b3df3044a0b92a71f8bfadbe8a3cad1c93b23dabb114dab8b8ee02ecc104f0ec843419cb60ddcc58c5dc7865fba3ac4ff2db7d9f82a31b8d5a146aba6ffb3caf713ebbda41cacfdf4639dc597761b3de5b6c4aac8169fe0ef2887a2ef03669fa516027fd888619168b6f4b9f2ff20293e2d1811da6e32b65521da747a40a50297b933499143debeb022aa1ac077cf3ecca9e7b82c527728da25636129b5ed9fb04b4157a87054adadfafd792f8a60955d028f233209491f978f317bf5554273ca69f5841d459036e9495d903a8948cd7901973594bd8a49103f2377304d280f43e7e08fc71d356084c33811ba86d3a150d9929fa5115e29b55d8e1fbd9892359c6230b662a742db4cc5c6515a6411138afc658a332ea1dc43eff8705460d50a8410bc8bb0a77d0c51ea0c0a583ae4ba2f3cc0078ccb88c3fbfe9ec2a511600e869734a9859021ee966f785b5fdbb80c283b9d91342ff83abdad6686d72cd35d1e80567a738b2c62890dda916d16412cffcfbd674d9e13c0261c8fd603b1f695bb63af5e8289f9e413b5a6df2b03e28b85e39a6a1e422c44d3dd42fc8148719e5eb50dc5dca187b34492b0e17a5c7f14e272f932d3f96bbf46a07c2feb11416e985bf0ec94c5659056223f7640ff9a9ca34ee5c137ad80fa6b1ea19f1025425c158132f4a45d4fe232ebf748db1364a5deee4c8d06ef5da4b0c16f46c52365f3928f0fe4ce7c5802041175bdf39bb83f0bcc6e030a8e5bec384724acbf96f317215f806620aed66211f2dc2637e711d189af61a13636b857d2631556d6770ce93e8b04bdbed01bed38d1f6d99358f105c3e1fa2a7f07d11179694df9a6b5e66ba75ce1a6121ed69bee6799dc07d06f58422422eb4ba4325455c50aed21fd98cf589687d9e1df253ae9dccbfb6672891aaa45d3275f5cadc6fea66588ce8b053a7a94034d274921a5ab1b8529fabb93dc6737ca77c69e840cebaddf9ac9a676765d178e053b5dffde2d15e4ba48d45b5ec5ca4be432adbaaafbbcc9f6915f05a460dc00a9fc42623fe6dc504a0174e8635bc2d3074a6fadcd82e5a436c41c4218c00046df57288587b1d79e9c6d682affa38617a917215257bc07bea32677255bc9d7a9f9c69e480eb3e1052ea348617635fbdafddc229aaed8007882f699fcc30beb48a73f33507092f689a9489cd7fef3079014a82aa8b07a551d8c63603dac27d6f09fb671c9b41d91f966747754b42c051ba6510293188f330c71d9461aa96517447338a455d585826cf17cd8930ed0d3ef8b6832be1a19ef4b8ca5c03373dba0b222b3bac4540414d9adfaaabc1a264751af19b47b0854de1d3adb6b9cc598a41e98ca7b0198c0c3cfe98d48525dfcdd388a2585b6d823a0750bed21bb49ec9545600371f65a69a6eb19982291796422468427b46d04cd9f0cf4f66ec5a02847c9f797d9dd66048fd01ca9db2b40c32cc4adae87532273ef8f8dfcd6d399c46e5a9c7f36f19fa1fd4fa0e3e85293905b1d17b1abb20695ce41dcf060b6872030a4c2660ef091813591e2cbbc2f946b49f7c088dcf1f4df3f186af17ba3eeb5cf0b300ea988a8109fd3ae1ac17fc79ec67729299e9dcf490948ad87deb88c862a56343c6df393842b00ece6447a9f0838da4541080a7c61cb464210b18a95e13388cf5edd69044519381354bce39452c4f42081d14e65395637a44f8aba85b40b68f8c9b2ebf49cf02625d0a73e78b2af3661be0897db4b07972a19fe8706aa06f20a397229b8ce5cc358b8d0aef12a8380ff8b303fa609c774eb52712a960b091c2af8738d713ed5779d5ddf2f42b558d88002dbfc0a46e6be68bce4cc04a756927794252fc6a90c158fec76ced0cd839683ceb0b46801ffa913eec0854352497039b0d6c5a9e42af21a69083ab5ca378e2fceaf884e5d85008a4d6ee0ef21fbf942e66dd2d9c58624b2cb45ab8b8b999651cb53834f0533d7c0df07de879b1f292b3f9411d04baf331c5d04b9662adbe7367949558e47ec7b8e860c22801a2e8ac35a91ce25f5fa7ed05eaef350223bb73e826f40a52b1b3ec045d80d0f6750589d656e8de9e0f09e07cc58b378def6bae6c9785766484743bb0c096ff73657bbb893afde0d38e3877fe2b305dc7bc0c495e20c8b345b4da210b8681daf081897dae25972806c58dac1132dbe0403516f3c9b2264e7574abdd88f8b6c6d56d7cee0607b3b853730e41fa8b7c32ef9a377e15d93049ba369a6d4d69751e289c8f73ab25b7d4a614c5fa75fb83dc4701100cb628fdc8b79e8c9b878a0fc3eb225fa864c51e9c407e29695b27344464c0304bf5161c2987d3e55c0b0ee85a936ea248dc58c0d5a6e50d13c6f3eb4cdb912914959e951e59d6e15acbaeeccddb3a4d4a05df9ffb638b58baf4959988de4305d2df58bb3001dde8bf9969a521fb64f0be96e9783a724e4ee4ca8528ad7a4d7f3c74d409baaf9375381990419466597e2a71526490626c596fcc0264d26e6d5ee8a7968163abb29c274688d2c6cbd5e04dac95c67d095a1441030732ee77c893a2757d22aaa6fcc2db030c57faed4faafbe569bb79b0636545e129af9317c476b805efb8f5778f2d6f748e4e7725b381505888acbc2a03c4c23b8d4abdc533c733cb83f33c93b23bc29aa5683a515cbf2bd03bb277ad370fab5f4a87af8590bb633c86a079700fb3ad197b877e51ace604cd19aa40d831c7d398a5e295e4e689163def2d5bffe5d9ca3c07e63669423e446d3b866292d6c9c3826412df81fe7e3791e1c22ca7eb0aae7414b201f78eec001bd90ed2a42edb99c1e051c711263470ad2d89ca7cfd7d3ce4f260026414f1efe15368766a4f8a24ea691703f6d48ced6abcf5f3077d0d48aabe911d6f4e9d2d1a9d496a06ae2b1d2e8e74f188d758c84665ee3aaa4d430061c32e1e123093ebd75a30b33b7b40551251727eb98f94d5f23402b2c967c932c03d86653a39076cc18bc69a7da0e61818293226dab338e05c24da983bf36491f0fe768a2b9410229c4117e02da00538f916a7d52f60337f04cc16a3d505396e8131bc308d36ad64b60381677b0df7e91feaee0956328d58cbcd2d19e1927df38939a08947d4949eaf1730bd110545707f7bfc4ac3d52cc83170a78f96b010861790c88933b44b91d38606b2d81ac57331f7f146e791756d3afa9e7bcd7f2cebd2256c90c8c3ad35ef6eefb4150feb1aa00c5f503387725d730d577d17bf363063e544ab048b4712703dadd87d8e12f296da2c7118835dd077ab63d2aa58dc0d2dfea00e7dd74158c8be02a9e6c29c3ff766b07005d550c2a8687a45052d7e66fd50811e02911d129d19925e76401bb3e72f5abd8a62be61461f2d8c4f390abf6a9ed6a0fca3d906f5e54ee65a1485904f38eb665d31eb8ad548830e2e5321458097918691a1e4d9f331ba421e2356f89550fad760e1885c6f84113239268d328921b85719dfdbaf907609cae436589b1a0246ee799a346e27d4d380377526772c6451090f7807f3feaed2410fcd7741728f063be1f307305cdfebf14a69b070b7e24670d7160f52ae74880f29bd3eaa9438778031d3c9ca3d8359f0b276494ed10bbd1b30c951f6683febf3e16e0697bf49296d738e6df3fe1e131b6665c2bafbce675fc40351e46e14982b68b933da9eab5d26316be720f2392433d2ed08c19ca3d88130a6dc61f92b4fd89eece278f3cfc19f0c7b117c2ed99b850b33285401a9a6bb6640b81c4ee737d2536d226c93043c9323cdeabb63ce73966dc44addaf35c6ad4c7f74da4c03f9d649bd7679253af336c1c46c2381987704aaf1d88a3cb7ff89fc9b716199c0ec1edb6891277972b89f3a45be2e86f3debaa47b1a4aeb2d993500e1765dd6b1e99a8423a0de3d9dc77debbe1dcc895261aed7666d6406847ba2636bc9d7e7c961aaa2af0963be885bb6d52d7bc48067191789dabbcf038c211fbe3a2c0d9da6596c81217c54d8247652f04ed009d462b3d91695a1c21819445aa072f125ef25730ce36d21e5d6773eaaa61454c3b3f3d404855a905a710ab2c6954c4a791b2d15e0b82e8f22f0be7b5e383624a00b4a237e644e49aca7df9dddc1bcfb71af6277ee822cbac293f762de9a02c12355a0d1f749cfb94419b75b5dd6a5dfb0d10ca16ecec8b7feef89285bbd406a5a5d493f2d11de0aa4b325717d1d3a4915e5eb9172ce7dfadb07fe70a7093cb373ebcaa1b0188fd3cfeb4fb82ab7387afcb0c45b558570c4722b8c6531a9b2fbc64ac81ff5bd6626e2490932d3b60664f86e4535c7250e05d110e8afa638e6e709056406bdc5345f0e516381b61e3609700ab30d706861cc0cfeb358fc39440021d801770ab914998b079ca1c8422a08ef4fc1adfabc6bfaa9f9e16be6853188eeb1ff1cf0f96fb633d123cabcddcad3416ccfb9ebf1a6859d000e938ad0ee1dc12bfd924692b0bc484b83d1392a6b20d31e2ba094a49e4753c429eef25cbef6d0ed11afe2b43ef9208e35f7b505f35695e20b11918fc4f59d379bbbf54247d83ba84105b400337da2f1a6fad27d5c630532f708a00706e6429977d82e0949205340db0c8ed36ec9f112a6bbc5b6f2d11fca9abeb0d4d166755727a5c3230b70cc698598340ff35c80766cd213eb9eb4de8d7599a375471fdcc7356e1d99da4ee526b88904f8756444f643dabdae46747d6c5f40941a10e893c95340c7adbf515b33c71b3ba0e89d967dd677cb86a578057fa95953cb431e13dec557dcba75d403a6c6647b3bc69e0849bfd4df9cbe6f1bc99d8a0bb8ae41c20a900c4c8daa9b98e60dcb61ef267ebc3d477358e5cd0f8d8b2d772c71fb286697de3e06bbddf3605cc19ee77bd6d15e5301c8629dfbedb68ac135048052d5827d10cdf5dba5434bc50b4d8ffb5da79453c25c86ef9723d8803230bbdec98feb48ecac5161987282bf7caee55a975c77ed54be951767d523938faae86812ee436e428ef7593229b4a015a3fa6db98c49cf3f3dc00c97965461a83fe6ac59e27d1d070c37346058fdcc94e14f755a0683609266d4462e8494a33603704bd0932b43617a6bb78bfc83bd198b08e9f9b6b8f053daf58751258314f05ec466221c93a5aad678b77b4d158230f80e1ec73cc1efaadd71549a2fad769b8f35c3ebaf030147e0839e257a2f32a372e104871681aafe773e45f5c09ef367fac86ed4b336703a26cfa7b690c2d191677ba876dc0d7f1e60bfa3bee387e105083ee38f9a8ba46e34d05787f915382432596395eda110f8258d3abf85aa47380f047a96e038027771bbc483b73ced93f48250383ed8f972a4b0b7e8654182a1745f0ac86800dbfcfbbf4c6e3997f69a9cfc73022eaf462d2b961cd0ca92ab0821a75146f611","isRememberEnabled":true,"rememberDurationInDays":7,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
