<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"702dae68466ad2bd977439dc524c9e93a030a6e9099f0dcbed7c6c84e7da6fb8e9f6416705d4d993dd1808565d5d7536c3b6e2338a315b8a0613761ebe69837117173ffcac35de9dbd0120383a4015a3ff06eb1dac0f205a9895da0290872ebe64c1fa7d9e941579a4a6ea1f52374ee85aec5d73514a37c10a001b7fd0ba2ed50e0d96540d56c67faf8bcc2b8b07169d62ee57197f34ce65904f3762de2a8893d9567898c7af30c60cc82b147910effe764a47c1e030963886c77a80fc346cfb8f5d62fc3d584f403add2b56572134cc434da9a20642366edc503f6a346708dcbd8bf875154644e568e522e640ce8e9d540e5fe343afab5f86267427c2fd959a21a088c8f38c64a18cd1b72e67595866768c6f2f97d140f7937664e34e9a2691eceae29c15c397ae02aefc1e22df6629575785ea1600acce9d42c2d59bdc94fc68a8eb8e337588985664dee8b3bc4a5cc1c1478c8d79f968c8ce67be87d8a970015f97925672d3ae25a9f94ca59d20bbf6e7a59a3ad60272fdc36f82ba74f9358c2dae3b25c421a420672aea4fb311f2b6515ba58ff5ad8378ed238fe6117dbf48617ab13d44625ffffe19f4a1003126dbf5689f07ebeeda82957eb80d120e3ae12a9140f16610fa551e3c5255b216c73e1770b6ac2721844481dc9e091b8c501b0d92e7f3cf23cbc3824fa4941e449aae45d303799af219f8d8d8e138a912c0e839431ecafc93298d72eb1246bdc85c5cab65d170ae49e4422c5ba07f26c4b67ad1a4b06cda94565eb785b9dde9a3ee01b4054060a22d4279b3b02078a2e71f5b3c7458a539fece5883bfdf8a8695c8eed0170e1126321e0d25c4f6b7e4835d2e833440b0acd20d102c5735095a4f664d93ffe092bdd119e7d04c38addf1ab49fa6fd06380f9cc4fdb51834d44faffbf8775291bd3cc38b9e8208465b09980d8a440b5f42c6e3bf83a28a7a001892aee1c104e16ab0c3b8a896f79ce48444c6dafa9b952fa4e5b9c3edd1ea96b5c8baa7e153def3732a38603a1da4eb21a506822398df0d8d779bdfe6f95ccd17331f3d96b3913efbdc3fa400d3d07fc43ebe6a46782dc24cc342fe0fa761f9b7238b0e0d9b6e738eb755b84608f5e1c0c70edfad04e6167e0c6ec25997e337bf1f247a72d1129fa2e35694694da84bff65c959ec875722d1ab8268a618ce109d2b75b21f9a1998ff961c7ed63b91e3e66618b85f90a307f12bd44eed83c13f4151e6b301f0ecb33cb08373f3755bd72b15cb2b6be16d82795895a32c8b7cef4223d4fddcf23a610a9c2021ad091ebdc682deab87e03a08679afe5d2cb87685c180dcd6da175b14deeff92432d1f6b321e03de395e75fd2de6a33106669282f0cb50460da1177ecde6a567c454bd1a447308574fa562b3f4c8c36853693198ee4fa8cc368b5aeb10716dc6dda313c35371832312f4ba4d4af2bd1eb5025b981472cd2f69079ae8d782931d1d236fea2e8f5740dccc6cfd266b381e9f42f0de1d8a74f4ae44b95195952fb764b82a35c9e5fd6c86180bf31baeab3e11e0e9f5c125677dd23abea067030c3ae902f0857869111c61e472f650610d73e1364b1f824066ad304f49ac74f0643196a1eb5fa233722b0bde5aa712473482a435c83437764fd19fdc926f25eb97c8bb8e3ebc6bc58015f91d64be20b323bb7ce3d52108067c3f34008ca0d55005ca11fbe1dd46763a90954188ebc20b59c25ab5b607cc0bfce435bd7ed1ab0843e053bb1877b7946366784fdc789dde35e14becdf5de0e16a4914067038ea931a84ea3743be7821c69f11ea72af9ea5a095f8383c7ebb98a33dd2affbab40d26e059ae498795f7372c2b00ed9dd6b4913b5090d715c606738e66b5d728f43411d6188ea04a287d24c49cc9135e7865bc576713de4a62f3292d504d5ac3bbcfa5ddf6a782eb4b1cb6222bc34c5e19625f9fe396eede113a336e098001cc96a4488f999202d1dd8add0be9f7321e1332fefc050cdf4dba806ff4f3dbbf861e796e8cfa032e7c22c664260f1fb162dcfaac9a2f371d31e1efdf1e9462c1a508f4f8047d4b48b3b66b7f004f8999aa5c54bc02f3a86cb31d4aecec071ef5740b89491fa14050c2ff467ec2beb736c51ad08f8e686340cfdcbe6b6a7ee9793290ee0f43bb019f05124ee604cbb71cbc703011789fba55403455db9dfc89a0d00d1e8027aeea7bd423a34939d684976724f9b6324cd77fab7997e65712ae9ae05bff5d8fde44b155395ec03de490dac3724c804e90a9f43ec4b37d729a6f010c4631feb29d2e14bdebd0f81b54026fb91b615f2f66628f48490c0d282efa5d4aa15ca83cb0918b05e2b146ea92a56ea57cb29a05bd4167d08bdfbe2602b66a21d6423a8407ad5d8af2db79e9532db76a4b89f4fa83aa7ebc445c54c7960a55add05dd3ee39a94d373af76a95fbfda4acc1591a353caacf97a3d72a91caf59b10121d98c6e3087ca6e2c71169eca9569c505df563fe1788e2ac47eb83518d1f03d7d9fa531bc047077e938dc8eb048d616edcb1840bce7d918ed023d39f16cbf050f3ac1a774a9f4a59d566883f748c7ab4d6a339bebe1f656c152f7323e54f6b3bfdc6827044e14b925eb3c9a88c6f19f1a220ad8151d7278e4aa02a4134dd841df47dd95a2d6e4b2756c0c59ecb0d0d1b0453f5bde95446d0deefb788baab285c5d8b75ade3b29fe7d54402e10ad8f45922060e5e528d6e6a0250be9afc75bd6a74959c59303a452954e943b1d8eb020387d84c2edef12e3210e51afaec66a73a6641359cf3012f1c4bf5a616ad827943b1fbbd183929b4295216b9865ec797c87494d2b24c32c5bed320015b88d4e3fd2dc0efc9926f4c751652bb887b4999ba416205f2ad30d1bc23b393e18ae5a966d270cc76798b824f1e9f2eb01503e00743646efa9d9257ac216c932a4c720572316bf4cdb509a781126dc92ffb915bb5c7f1dc8ce6f89280460987cf8b3ae9c9fd3f1f229a60cefc439ffb110c1f75b2eaa61d3cbbf88390e05417482c8a3991427c76a26c69ee1f5d3a3ab885e283efb88b60f438250e94efd576f6eb21717ab1df24e48aa002a959a93d9b4da28e880e4552868b3327c52bbc11aebc4d86ddb44bc629e7f5ae0f7629a570246358feb7284659730f7b23e2b4b4dce8f1beabc92572e8cc16fa41490d34c0345fba5291613157a274f8162a35018db2ea51023485e6c59733cfe10d40230a157b7fda0c1a6619fe771677b8d4381cebfcf47b8ea1be2206571c33cddd82dac2e92873ec5276c843afe0f4dfb44eb74b4454f447341b519763dac47b1e5371c722d3ad555bfde0a8d2037bd4c1882dce2ab5f13bc0d0ef3f570cf37f29c8ffebec115b92120bf9dcf41617f0d3d9685072d7736b1f41f70ccffcec765cbe8250532356518b938daeef29bf1756ed86bf961d1bec30b5103e87802eea5e84725dc8e07df808e54116ca36a83d4dbbe0bf7c0a226bc68c4554f45ca09e3e3db8270fd89bbe3d4040e84215e7f1cf2901ba068258a514cb29481ab9fe171f27330fcc5d78b7c8a3c3cd3bdf2df9b8825d3feaf8d90089a0019fa8b19b9b0d4fd0b2a1f91eba0011b5af859761a3f626cf63dd86cf1eafdc99b677b7e64ff1173f44f65df89a8e0b3229315bd46e8a5b998d3958c4a1251e34c540ff516f57af4a1967d2f4f4d33f215359e046ac32fbd256037f6c06dbc67cdba7e4534d0771112c22ea8ae2aeb4421f14591c21f4d057cba6269ddc75c410a8bc7c732aa4453618af3efc044b3f8fdbcb109247a63af8a7ef30ac28b52c8cb619385f20ab12fb1ba4f342372776d820d030f97a6b7c316201a72f5af40c18786fcc9905637367626d6df210b9918d8672ad9d530267fa2077e47e2c7a7d4e77734ac4b2290701599097c099bd460d3972993b605c3104852e9fd2dd1e2726e6ce339211a618cc2ec56abc8f4ea225af43d6f19c4410523a5c6632ce58d26b2fd454892c1f4b171583778e92af1f0a82d95bc873857ca10cd88344be85140d827ffb719ab4e0eb97468642d3da5137393c65e47341af7bd9683d13221b1589b20bbf8075a795c69340de89d960380f061be7f9c78bf589b1aae0e3d71803d33c32ce10752cbc2e16fdfeb9964f54c298c07389fe6dc37d7c6484464b6c2dcb44bd2280958f6afc3b2ed1ea147bbf125f0f49cfb738be4652a5cbe992c7fea39d9bc275e54d6eafa0ca3bf7e4d26a0d6005c18d32535ee10db2ef1d649672dae249daba33428b0f0a09c80f79fe01f34ec3f59a08c97d96064b7a75e09d95bb3dc4b1125735d012f5c3fbf9f04b41271a671058dd9f6c7c412e9040c757805eba0eb5e9401e08f724f647ea7985de21604f81e41c368b693b8f0c6f614218fd4640e8599722857c21a4f9968a1a5b75b27c6797cd9e40ec64992ef2a59c5d561c46368c9c8b9a90ded0e5a9196cc793202821cd8299efda827a2da0d47680de4d4a70a500c9c6632f11262cbee2c3e97c959899b63ba043f2b34ca03f6d4efb9222ee5e2ffccf0b39bd907b3bb17b93f1db7942e5ed0acbbf903b44f7099e5d7d3b932d8dcc456537a3b87b89481d5e4d6a77aa77c3cc17f0001296b2bfe74424bb0d9d2c22134e2920435519c01205e4a984d771e418c9828234cc76335ca97a8ab5798dd8e875d35698350eb3830949945815100011607cda5749856a28fcbfaaeeb4b24afac67c5bfac523e3403fd100d8d419f266c38b5b389b8f70aca14d0f6611205d2c1de495a12becdb3e191d4cea049741177d4ecb739f1262faeca5fbd3d7d986c71dafab32ab1995ff23034f72f32e25da82279738cc498dfe1f2e33d3fe9607268a437882dab7b61827f8f45509442197756b5ef6053f8d633f2430ad92a31986a8c6ed7aa37042561ea4a8456081cb18d72c09616c7207c57c20bb9dcebcec8542fc849d9400f9b666d87969e2c1406a456229058157c8b6336801518c6e6f7422a1896c361967f39d727f05b1544ea9acac6ef3d43088fb5dc46edac6c06e19ca5ef493a81a959aa964d0bcb89a7f65115db7ae8d84656a6e3b21d1a3ef3bd9b57a6759972eaa8496b436df80e98cba4eabc80f8de7ef18a39e3df69e7717f4e9e3dbfbbbb7e408c9ca46dfbe8722d5b2c5aeba6e2d36554dafe4eb15beee52064f8f01f054878493efa2841cb3efb9258dd889de7b90c3e01de172d47da3064d77746153ecba0cec98bb4ffb8b5e05bda8d3602796762c60f6fbce09d58ff3ef6e07f00decd2cf7dc0cd6b75b279769c1e155c6bc8351c747b57813aa0614526b4b93f04c590ea4d2a787e3e60257eb4041d48d9fca244be0096fffe773cfe8eb2b5ff9bcebe1a9c0b397c8001c139f23a20934dd17141c2c4d60be20f59f06086da8dd6a018a890ea1f38bf8bc86a7e6c34472f89d27e8a6298f16e2ba12f7637eaad96c127586d89697795022a082e8dbe246927ec8e0fc1d336f7cb4c1cebe7ec6d6ad2ae6ec0eb2190976249fe6939e1edd42ea69aa4a1e32f40852b3d275f5626449e6cb52fad211931b2573349af37dd0e8e28732c105023f736b088a2d12765b9ebcab80d187fe2fab76d687af9f00c6ecd2af5a0440c3383954dcc006bcbb979783d11369766cf568c417aa11f5b6346749c80009d5923fa927edaaa93f2f215c3d636cdb48ca097bef108fe4f829f60e40648ed892925752231e1114558e882a2a9cc99dd8751ec1167b482e25e4e0a5525dcc67791e5b6f9327edb3ac48f2752627b4f74b753f0839d27becf987aa76bee84d8feb3a70bfa8ef6bb213ef241a3f3aee9d233a6d16e54886ee6bfe272f53969f06bf8727ceec8c8d7e5425888d10e3ccbc6c5b990934c682eb78c3bd8c6e8f61fe07035f2028843eb7d9ba87b30391d5242fb6324560d7e278645a191675e85a252b60b3819710a052aec80520604ba31ddd2c9a583155e9c7965809e9897e8841c7251147d12f78ca4d2064b250a913794794740228a788636ef32fdb4ba45e7be550691f952a56900278f01dc08f40fd392a508463ee1ac6f20371dbc3edbbbe1c7170e64f19125986af46c4d346206849bb05056f263483d0375abee702a863fca371db02891aea587cdaa4276319c046c37de8191f52dea8e8c463caad306d66abeab218f45c8d978994936afee79fd69e378f91ee1bae77169bc5e6528eced0d189149bcec73de53590719692dff3505cf1f8ae682814169a1804bad738afe3c346d82b3cb0644dbbdf264d9f9168e9fa12e6e2efea67a4c3a12613496c3b35e7788411fbe8a811d7b4dc5a2a98b9759faf6cbd29119f477a276c594b166993dba607b0171adea1d6366821578051478a9fc38d1cdfdbd472f7da78c2afc4b13f81917521d0419d0893792d79127ee7dc0f1a4a8cef5853f623b7ace4007b63ee112be56d403dc6932e04d7547922eff7e1639d2edcdff8a2897e7dbad849b310a192808d7076424dec39ece7ff24e9d924352af72eb96847e4dea364bb6df19cf9ce0c3b42ddd857942657c2ce87f98260e039cd053915e82453e998a217f866e9620491bf89af8681743c00b01a183608057699173060091d4821b00c75983fbf929e40c2e7df3b2a87301c78c2b13b6c25816d20d93fad90315db883a0bf5b4268f6da037fd9444774d592a106e90ce2a272e2fd313d1e1dc8f630d8a6fd52dfde77b783929fe980f142df4846916d6edb92ada8a2ff029de73c420d5898d6cb9a41d95f65dd51bc61e3e570551f4e508278352562ce49e86477d013dd07237609574f711c6af643ba7c2c7c96b02f29accee9220900c1cca8b3c9cf621e9fdc2f32d87377884687af26d2218a2167cceea78e5085a8442f3ff4ff2f2ec8489d06153fd5f499c2650050a23f74fa5104585d0ac4ce5f200f874c65a74d4f01d36848b4edd77714a0b89164dafd017b6b91dd509c3a6ed54c6dca12db862a55491f6b98f2d21b4070b40d1fdef2d08ac46b5da8ae4723adc7c79920f0f4d0e151bb75948241d4c302ad615476886188e3cdb6e8b83d33e93628a0fb1d555edb895fd4fd5352a011c7d17edcfef008108e9c023293754fe7e0464bafa728bdc0a081a2e79862fcb1348271e4cc23cd3a911a56dedbf572310cb592ed81be3d77147c15f35a4a62ac64a006aa912bcd7cff36f236ff0781902418d21ab47bc75850474903d4d3a70b445d8afc41df20ecd6712ba67c4853223dd6468fc857dae179b44e6bb699aaf3247ff7257bdec8dc6c6dd4ae31d89212522630a77bca4ff054cc18d30a584d9efe6cc415a575bee0227f8bbadf92875d3ea55b815b17814df1ae53a45f16848ba18712aa042b781b06e3e521e9eaac36785ed39c9c2222f212452b7dd293c9a405647736615facc3bc26c33aa99366fd17cb9f2adbc5327af8470940fb22252c6aa3b68a7c0d09b8a574b3dba7fc19d0881ba5ecb128b7fe8788dbf8bdf74b44c4fc0fa959306db4996338cbed047a53ccdf200e89862111582b1acba5c6ad6ebad57c32204045ed33c095ae7cd64b946a443480c6d3f90573247687370b88bf07bd8d256afe86b873e84768b603b4c25880202902a9598f680a7b045e55f438f3e95e3cee667b379c8fb14cfabc12771d463028f07c0bea15dcf64af078f475d632304ab5a35d58f12e4036d0cec11663ae2c83e02d89a11558aa71b47f809098924af64bbd4f80e650393c6b8a39d184c9bde70985c761868ae2771c6303b6991fa222009d0d5ed82fd00da4cc051de2262f7a4b62679052004e0c644525d4c1132d400b4dcbbe2d24675f8ae54c4012f782dbd94298c484926f1ab74cf9068cf371780316ae8e9c8b52366916141048811053acddfaab2bc8694ae6be04af18aa3d4a44aae1980e5207d1d8d8624afc6f1cbb58401ad30c55b82d753962a3a9b15ed20890ac7141c349ecab582e87e3ae1582a6b765e6e31a330209bb477d33ecf58f51bd147735e317e5f844b945097ae05f071b4660316194351ecbe05ff4e0585da56086b7b06af804e1e2a9b9991dbbbbd60baec94ed73ccf0f8b15615f8b7be736c7a7caa31a330f34f58f8f3a325010dad8c3958030a5b19184f929672842cd8d6c2bc04892f80f94d40a3b05ae0c76c9cfb5596232835ab10da171344af7d74d509d725dd26232debe63723bfdb8861cd6971a03399940a9b0ef2ce57252202f0c5655309acdf3ca38dd8e64c7345ee6801937f01a16245c93a0217f82e901c9f07a3da79e02ee3be9338c503674f8a64ea49c34bf225a56444fa6f0a393c8e30eb56d13cd44f95190834d5497bbc0eadcf95d492e3ae1101d2952d122fdccd9508fa45798ed44404b128a3b1f489672d771a45ff55ceb5c617ea7b11b76b6e4527b63dc5d9ad35206a77d39be035778bdf7ffa791193590bfd3320a09cad87a776f9e95fcc6c9943018a9d3656b7d4fb03a0e964f857f1b07fca7e873d20394e36e75e0af67d3590bfaf17ad9d2ac4608d5498df07dbb6836f861fa902ed9eee43d4401a23e158e6a79a67fd723e4b50d56dd6258f0626755afd137e85e267bbb6377e9a1a58d3e6223ff4cc0d37ba6c5398e1dbd0076e3ee674ea676ac8d17360eb61ef620314401d89488ed1b15bece73eff2352c7dd505431afea51c44449d226a39ca66f138aa87076d561e024a7f8841c0f6d883f3c3725fa16aa24c56abe8421190f9a9309d44d165cb28ddd22a51da87599b67ed77671aca8fdeae3d2d7f589a204a7d5f14f2b413cca4b4ab522107bfa7639037d50c85b2a6f83243729afabdf1f2c7bf5da2f753d509f613f98f0f5c1d4838ab697db63298f437b304fbf88bf387249095d46192d0cb9592816b28d70de06f530c89b977162f4d6f3cbeb2db12af0eefbde0e3cc24f69ff2cef26093f1eabfff9eada96f071071ff61c0a7c98692700cde61c711b2d24ad8399a6b565e5c6598009c9fd10a09dd01112b64dca7ffd39964c9409b69d2e56374b4b53adc8187d18a60f1a11427b05eb808298b57fa87ebb9b4aa90640aa6f6376b347f0d76012428c706ece49824a844db3e90231d10e6f5a73d02e9ff06b7fbaee96c6113e84ce98f33512fa0942113a0cb7ad2fde3146dd5cba672e14596971b0bbccfc686864859779157ee326e9335615e9c7bcee3f1654878df3e49bb539c9e6e8f20c07d34858ec796827ea684a0e94d2eda6550701b7820021f3da33a593a4f5ce1b96d0ff0b23c632ce67b0a575a26030bb48b64fcbc2dde78090d1248440ec281b09f43faab6b029b1ca9630d8b620c88ae578a4fb639c30c4cb852f3aaaffe86523a86d5622a61652d483095c4f69e4198da5445c7b5d64333842ebece7590f8e2ea700081be424bc84a504cd96662df5bdd320cadf44e4c14054a98de7506bacfdb408543fdc2a13f2301cecba082a08d5948ebff6db69ae98d15de44ad423fc21f054470cf7d0f112730a842089d9b49b12d5af44c7ef8461add7b172e31946b443e8a444a9465f901a396e057101cd9fca2cee079e87cb553376a45ff0ecd048de3a886cc7247703cb3aff061dc4e9b0399bda7b574d27cff4c2a11bce1103bd9ed7b87b666b51f4a1674d8bef20c0225ae54444d307a18c37501f5cbac30a88ec871240bfb8c7df644a4fb708862e0652408d7bba2d770f2030511dbcf9dddca3c5f8d90ba65fff3eb64da6b95b66f4fa427ebb2038749a72e55f98974b75123037f1c25bedf346fb98d97b11ebfdbdeda589988cad4f2da09a8c9702fba18340fded25e2ecdeddb5ae0e0cc598d99e3326ec33fc971b6dcef59d5e39263414008553e4c9bbbbde7065455a162a7fa7b0c8bfe5588bd1bdfbe28052dbd6257282211e91db194005d13f16bc1236a6f4bb0cd249b095bc07230082e50cc5702794a727c2b1f78a999955cd8fa3918260876bf7b2cf3ff9108fd0416ff12232f530c09919b59feaac98a87b1186edd9184ce049713164eb25154d9ee56a8ce184af5143e08a6660d08435bfdc669c9e82d8a640781fa766df63fe53e7748270b06785b4a03913282a07592e3feba5c97fc7d57a7753545db1abd58d1ec7c6c45929ca323b93c693ff1f2b75e11be73598afe4053a871241541ba0ff13c13460e049f42081f33f0240157a58efc78533cf26760ff53cd03f976ba422fc23906f69fa89ca0c00696a1337f42ae703076b0901699e8f83f2cb211c0ce90205ae50fdebd4a9c4843626229ab2f552a5aa25ed3c19980ba0e45cdba8ce5bb125bfec973f5071e8f342af36b4f4efe2cb578d54a8f45f10fa92fec9f23df017797ea67bd326f923ebfcf2e57db177cd6f6aa9a2cf78404a346dc5ba818a0437bbfd8093e43952d59223c2f79750e39ef2e013eb5d2bdbc34bacbfb030368507b1f3ed74f7858a168027647dcbecf4dc73c23f9b7942bc39d1e66c1a58880bb7e534c3c75a7ebe443b87225cbe18b95e9f46aeb89f975d39144bc931967c64aa400c577e20a1c6e86e67b8101f0992b54fab7e8383fdb1215517641b8892ecc60a03f07204cd8307140d9ef71da7f26185f5a6f45a1cbe36d883d947f95e3010aa7dbcedc3036ffcbb1959cf76082a4418f054e354e4dafa9882717b8d618be036dde296f92b84514d479ad30d6ac591c4d94d8ff07dc2fcca2feb9fcefbfb10512a8ed141ac442a43bd5c1a468707c1b9695fa298a2ace0a17acf919afeb59c1693fcaf95f218b2079244e05b29dc7bb73cbf54be3735b543eba67d07b21739492ebd368e516fa61097fce3b53e40ed1b260722080ec54fc736e3978bdd1dca40f0b91deab510aff7ede1ef889674a9b51120d4bf2c010a6fe093d23aa0fe89aa34ee94c80a6ce7933f77a52d9cd5fabd962d17b5c3821e0593a261cf410f62576017e4688e4f7db4e157f148ed3e344c4e513caf63bbfff497315fab30b706cd1c2aa779a7896d9e4d9d712e569ef988614bfadfbc8355808dfa2b0dc1b1db0a6898ba403a190804a74dff5e88678377203bef5713f5c0d17fc13ef9b322255e475504832b78cc254116c201dc5a7bc2f8779480f635830c360bed59bd9402c4b3f112bf8893e0ccecb4baaf0bd1650b3e075950e924fc5339a1cc41e521b754d3d4e1a2bc21835b0dbc14f998398abc4bb63d152bd199710c7bf65567505f81059f1110d9122f6dea65f67fc5180ac3a2a1ca94947b101ba95842092b6f6e7b35307f84e024d9883e52d2a5898d77b1c41fd9bcb40991d8b0df653c35a6d807c3f7d1904387ffd13428424d0cc9e1fe80ac7b5698fcda603d3da4b7fd1f53e4dab1d44c4bfe98d8729c9d402db1f50a87f4fa18306f1388ccec12a431b63437cf997ab2a1874f9a8aa0e1bbc547f99235451c6007e205f38fa826c1a85db36b18885200adae2f5111c4d594a03ed5c08d7638526ce1fc4708538b30a799afc0f7276c7868681d2b8bfe9c2173441ea997f481050551f3ad0018dff295a3acf0b2715d23331f7c272bd154c76728263ef233080bd0063931d21a3eba8b856c2a0e9f1bcf68a92fd7f72cfc4c473d11847196b3809b2e6e729152b5a3731256a838f369417eff5870159f3237ba2b6b3aa660936e84c4e1b5411613db49c660fb33435313bffc140b58d2f6f63e392872b8705e74a00e7ee8e7f78f019f7a7e455768fba6bc485d09ec9dae7779076a786788b05dedae93cae85ad22adf78327a914d5d0416e81499e96ec89bbee4fd9d7d124e37fb45db30aa32755f5b28758ec441f233afa537ae53738b0940f41f06ea0add6248a92adca72becfa0bad9dd048c50ecedab04cc5c44502a28887a74523ad680ad0850aa7ebed5af14f9eaa4d5cb982c51d82d382337534dbd9238bc8c40587ab1ce04620b3b0d28b25f5cb6eb5d87e87a726fdc1dd94bcad52995951fbd8601718984eec394933a5a79ac52bcc97548bd80d2a812c9c6b14a4ec90572842619389813a593c4ad7e26369d22b050bb24d2b5b6dcc1c697f1b6df7b73bd6f2d567304ff5541bdaba5eadf1f42dd2527ef45b4f24158f0a8daa5aa2e9632fe40c519f335800dea14be6bfa3201abd5c24f7e09b8072e2a3a6472d8ccaff9a72bcf9cfcf2c06642265153acc4949c7f7dd8af6ed5b098d8d252bbceb3f733512da3bd201bd57fa19aa127ce056f4fbb76153b090c2ec28e67a03d764212ff25d76eaf66faf4625338f07ea82f2eb8f27248b38e68412530a674056d58019c184dc906fe5b430272d8651b867bdace42a6ce10a05f487d49fbac92e891a237ea34571ab22953b81ec2815fbd9511e7a8a638bd5a5f0d7e790aa0b0bfd558d83b41ed05f9e0191d01207ca758dfa474c527f97090b1dea2ee8ceedf53911c033f4acfb96f4e8042f4c2d949c27343136cc86a981bd0c1a7c3d8949ea9258c984f221a4835bea7528071cf041601ec66c3ecb2304ba721a4f182bde38a75924577ee0fe8d4dcee9ca0f287663eb35b339e2695258c33ac7bb0a5f83b5823d7e90fefbc22c549d2fdc239ade2005b481ec19aa658a9f7bd9c6b13365f0349f0ec6a50c70caaddeee9111f8771049e9377ad58b49f1a60b643c4ccd252b1d21421721f2312d5e910cfdde05f8ceb39fa02dbf633cae2d343fdb0ab2619c601c2f83244dbbec840452f4a47326689cf95c55b7f14501220fda7d633d286132bc74c50f736ead409f03614814f254a70a8d00a66a15c9900b96a7f0162a6784bead347234998da4cfe909f97299b1099406e7d2e25735410bae08e16aef8c4d34d8619f14fd1eca838210664ac5f7d18bbaf45f3667ade157fac28cb22d4061214c45f8b3f8635847ca5776903cf2c06af6de815bcfed175a0bd32b4eab5d11f184ec340844ff198d6793d71c97250a253412de9a3d0589690a90eaca06bc72b06c08002a7443ed5384f1f4935569cea5ebb1bb88b2da8e21bcb45bc713a2ccf81f0cc5904721b6315df958baaf3d8845ff8a1656d109eaf7d86c0ec52b9fe714679411903de743697394779a44b10156af8e0bf290c3f52e72d29447fae5d26e8f9bd1da98631e840834e320d79dc8e1fe1112c14a7b653799759a242a3d4b3b9f34e5824ba1ca1cd06d5cacaf0f86f24822e2f1f4d31bbecb932ec4ffa76b4bf475724e8439ddc03f10924dd37ff991bdd9a6c91ba6413503471ddbb1671ca5617bc8239f259f1daae805bf9c15f07ce4ee038617fd3f332b023eb8d820452bdb08b78bbeea8e8ced64263a0fd1631c75883e45524998c495f5cff7a19a89a4c4a62f92b00bccf9d784d55778bb0544cededbbf1cede9a58380e0cfd50355a94d3a66f87c53063df46389d07d49eb0c0ec1829ddfe633c001bc0fcf3e59e03e451f12ea30df8d74877754b9772afeec619844b8cabf5ca24acf2bb71aed5e62e5ed2664d7ff55269082abc8399354aa8b5567ec4cda3cdc29f933edc9b399107ef04d1fe8c6fc76270724a9850ca6c8d4574888df0da23787e2798129aa333f0ee2778187896ee062183fbe93abf8f36ab4433f7773953abc9ed2f7da5e33c778574043b0e216a22cd85a271219b670a74259d59af4636b38cf9dd1a3c92f927f13390a1399ab6880f2af0b366902ad456e2de02255ecffd2bdece2892e2dfe6dc28fb64fe1a2831f102d7620a5be15a062b4a56106e5144b1cb1fea23e92a852fa682c29d986cc94827200eec68baff21376fe1b42f86c8fa5e21971bfff1e6d5516b2f147b02a739c81094b544a15f2086a3672d1eabb2388fe33d5fc0c2c6c1bdb6a2928738e569d9aa422d8af2ab621abc1bb137539fbe3537449d5a30d9e1e1e299f1a9d0c0dd49024d186c5831d8e17a96cc6ee00804e98c4a0871c8244ff69995b7104ea3852b4824d09e324f9671d255eba653aea109575051d135b86424129e42b41d05ddb6eed0fec963c69df3ead2ae44072414bc00ff9812a73615dbfa4945b396d7f78c72580488a4e4b5ebe9eec598106973f382a99860fd4d05167e0da0a9a6a2891c92ff2db98d5349d07705e03a272b64d5b291baed6ccaeb36e1c21f8110ce06b78558820b3de00f9577fbd2f6aea391237f57251d91b8ea35145c0d0ca8b456b3367f108078a9d34b027718c32d19ff69631e0cf7e6da4536f77fa0482b855c65053f75eb94a57ab124766b1643ac4608a0fe8ec9d88ae28df68ae4c6005200a2f22dbf3f43bce5fcef6e8d55aac13f88a4f40577be6841deba4aa2ae62a87a0048147ef7d60673198b85142bed621ebb529c9021a283dfb0c63e353185d959411165dde6f27a1aca20c916f7bbb38df581700cc81d2ed28aeb0308a532940f65d3eaa36d2deb0f67ae1a477eba2d8b5384d299d2dd9d44cfd538c6a7fdf3a28a5994346e42c12d414e1561411d182e23a554d5e5e0a5bdd2d8633343712b51e2c929fa1b3a293904f2e2cddc2c557c9e03d67a891f7205d9a7336d38e469828090078cf49eaa691747877f69ae3d21823a7cf2b244e14702581a3c6fd90cf6cd23f133e1cd9058e3fea5edc3871660cc8caa5a1962e6f0711e52cc23ca6a3ababe10deff9c23091bbe79cf030ae48b5713bdf08bc7996a84d58e968072e4b0ab034a31c15ec01f5454feb36dcb992ecdaa61e8ce55f32800c520d8a9a535c217c16b5c81b83a9e539fde7392734ec4e4032cb34740771363d6fb5eb94f45de02f52f3bb532c6e1b78a7856b46f4a4b9213ba56043723ad1ad2590ba525fdb8741dbd3c007214e7f70b310432ce5c4656ac126ed6f894147d7bc93b269db6ec5c2be0b4d8967b5f82c7e629719bf7166226fb87418ff458817fa252516b15f03c2f750f90ae52bfdb02ff3ac4b946db4605409b00fb2e660a5c5e7d8cbdd62eee1930ff2d34ed30c287384a0cce0c33d4f9f572817e4ba59c8cc58d1f3da2c704ce29332d337b6bad950a736f0cd526dc1e85cb0cfced37c2c6aa4cf8131f23354a4813287216b8e332d73d9001369b1ba643cbddddb3d2b28bd4f74908e8ea6e296d23ec396a97967a7a0bbfce70e7f669f85fc73ffc9dcb3a99206854646f8917bf3f5ee769e643266ae9367bf17423a8737b46fcfdc1addd5c6003509b0f63b2da74a6f8b52c28d6a88601ac2e82794ca15b7c541e2d43b17d994cf25cf2767a32f862e72f852d98c1a5ae750c2eea8c40bef66de6a184148be2b8710f6324a86fb3c556a5b6313d63eb7f85e4b200a958c28ca624b17cc41a6b01bf56ecf92d8b857efaeb23713ec595882bb598dce747f04df3c0985e91cc280e408655bb0b62e878640cbcc4ffa1954fa3625a18dd9681167ca22184a6e6c98d7654d73460e2dc012477781e7a1aea3eb40286c30105d781e08c630ad8acf14fc25c9ad50e85c9eada8545960346365aea33a23c3d9fd064eb16fe27ccccd4f9917b625a57ee8ad5505a70456c5808ffbae1b111a8574276a4aa14bd3515f0fb3d1d443133b7c86ee48bc916caaa3019d96677e0583607c789cf04d0830dc47bc98cf2488ee4eae0e89f408d428023ede2f38075cd480d2cb243eaba86bdaf85315b9799ba4d60e533002fa18e1e6beedd0fba871b617ed5e773c4206aaf3cec7b863e0318faf0dc20cb2fb597775bb4afce55c9fa561196ba8f2fccc85f1076189ad1cf56962e631fdd1b8604d52232b4b35c6befb11a0dea9b851b19dae7a53d04d74be6251743721007efbde695b5b599659927e8367ea9357edb05dd76d0232f901b7976bb1b470fb6240079880085a2c533b4bded6ad552332824a318d225fe5c047deef24d0d81a7b6b1fd58748636fde09979ba8fe5b9742b6f03f40ea4a390e150be5f0463f28190119c07a2a2811d2e3ac3982261ee891cd9611abab5e239fdc003d2b3b9d4a0608eca35526de292e5c2cb5872c349969f267437f7ded9c19f1f159844a0e257a20a8b7f5d5d2cb9ba5eb7386ddd4c5470cd3c3a0f79dcc2d68314983ed83b3ba23bade9e9ed6e33bd807c2aadc08b6417c7d9122ef72e4919146351bc1c8c0d5f301432bb93e9d76a4e11ddddebe6f9093575f51173fd9e2f58f7e4d31a600dcb28cdee2ae5ec26106686cf6e9258c5477050fa4829266eb94116023ff47537f7fb20465ff608bfd9c45d8edc494d6067c61192864f87a0a063daa94e9afdd6fae74b1aa8acec6207910a8d1ae546ea5082434490324c910f97d00d85cd7630786fb391a7ad61e959d9a90120fed46d953060884a3095aad21d35f05bdea16bee3bc4b6e479dfa51f91ab7c41ac470f08e277d4667b19e524355ec63383d7d4dc7a45cf75d8dc74ec5e3c312d71161dbc6a9dae99c53fee845a91e8df1c3aa396f24863c56fa685079ee0fdf996d080922396ed8a8f03dd4995c6b50e3c280635fc29e2ed674c5b6117df28f03fea737e9306c3ab189f324a8a3fc6e4dd522007356785fceb3d56fa50eac31180d915375a097f6b5bd2b32baeb638acfd9499c09154280d6a17f86d813b4878bcadfdb7426d781608d4353be5838fc2d37eb6fc0a4ba935b32e7cf763a8beb464cea299828a6948d1fd8f87698e8d0dbd754658b5ae349a0da3cf2d3fbd4339e8f401ffc0d4f202f3b8b0d0b912c9b89b0663e3e093c177e46a7095ea4732f20129847746f28ccef5e83ecbfd30af4b3c7e367449c496b6246092fd665f9724d98f02b0a99f10407bbb654ae759450f32a6d0491d5e9d49363d95431612cd1e9a27ca69c4916d81d6ab5c18fcc79b7320faf523748383c538cf2aca4e81b688502b1068d31add444712e706d6df4a78d5cff798401dfe13030b1686177306f33135867ee7d124fa20b6b9027bc3d9a888a0cbade322fdd02f6a24e04567703328ac1c93f6697d60ee93fd02a582397e75a0c7def03e80853056a4ad1c79bcb4d950d254ca72aeec42c70d52e57a3b5e4df741c9d07ee5bb80ddf295498b0fd72d5f7164030bbf64c60ba48074070d3da15378b9631898929b7b52dd0dac86760ca5271ae59e15f79c381e87d6911314f2345f782cc197196c1fcc6d79496c5835d5320671cd47a5b5e877e112f13d82d4a4d4673db92e0fccc4e34eac44ab52c8693f9c22bee132ff2a3d36f9081141c2c079090670d93a126d4913674ad5133c9433c9ab076fb061e73ee27e0c804c6b16ff7b1a01e65aa3e34b0c3cc187e70f37226598f7bd75f952035e00ce5ae689f251fa65148313068f69bf3e5bba15237bd4ffb1a1b7188659c94ec10ca901c7a1e03eec6cdb22362ecf2efb7a9d7726e719b505b4a1dd7d6e03e0a14af8e756870e0ccd85eb0c84e953a5399e31c60c50cd87c21df69a60967b0443eb3a5db123bfb42be130c0c09cd206f79f33229687f67574d7d53f7734d6e6a19edd3869766d4ddd5639d3e70c5b48c876a987cd84a4ae07187d626f8b56ff121380c66873b7252538464daa7c9df308097a2bf344c1b27bf744049b1db760d5879d03b831d03b9e266b2b358a7978668fb736e0f4a5ad6affe672dd9e429db06642e876a3375a224e29b81b3ce7edd1d0c2bdd073febec6198f34c1013eb575425a20e31b6b3f90c057998d21c6daeec1f79c89207bffee86e90a761d8d11655f820e81caca3525f0fc9f04a80dbc8b4dba1e684e1a177864b8a05878ef6851250321a72ef33633d29730bdb72940fbd14ce1865bd256c6645712c454220d9445af633dceebd8ae3d2b155bf4c84558850850b429a505071f728d6dec08d0269c8a2da9a3cf3254415f85c0014a5d20f4ae9001e0e748dc61924797f6946033f375c3d0758d60248c5c3d218bf8e63f90e9501a4bcf5d53f7c069115d051ca2cfeb581475b9d2f6c1bea8a22c792592a3f4bb2b9faa1a8500c0b22a6d5174a2efd26c59f8ac42b0503f95501e41fb3309690f130259dd51da6e86cef3504703e4708591aa41cec0a5d8563393a6a360ba34c67f48a36e93d2504bd137a53674436aaf525e068caaa5a0910561918f77e89076bf72e15905330daea52ffbd5b74d8d6e58a0ced5a2a4bb6fb985811031b69d012de135cae92ffc53685b53b5f988507aa97bcba2390750f7a706533a8960f0c38b50d24ad9a998c26959faee0b6609747fed5b3acf2d3a53a75652a9eb00ad8616e6905e8e5c7ad3aec5cc994910110ad04858a02eb0e41e900bf0a2fd3b81dc5334b90702c8bff6edf0ee5a350391fd90094c7d5a15ac987f6d8ee3a6f4f0b64dca5624061813cd06377a9408e52906419c8b2178ced8cc39fd1ead0f21901dfdf34bfca72355582f9aa2d12f81fd2f369ce9f52f25715f5371c2e8c5354e50e67732ed9687ee5f0068911947130733eb4e3fb735ac000f2697193eef055adb50d60b14160951b89fd2f00b6f36843377127d3e3785f97d8c23833da7801ba4856a9a4dbaa9e200deaf4adac4fa734673a7d4183cae913b9eab35fa4d725dbc770fdcbe2b3c0222711360d7ac3458515dfb7f22baf802ab09426739d6fb736651913f7b01017eeefd7f0e24d574c453246507cb414a9fa35c8fe0949401ce850bd4217db7554c77c63b6e117db021fff566f9ee4adb890a5357e3a84e21f36f2cbc5e92efeec375548772db0a703a39de41e04a17c261675c8950292a66f30c9f630123c7b171111cd7555c5c15eda99dd9ac368ee42547fcaf51051b7ee24a077c6d36cc58813dcb7bc69b40de33d68f0310e80a6a4c7a52520de0ca22f7a4b3f170ae27dceaf2dbe6078c3e1108997e0a2f5348f3adcf3190fe1e321013df08e0ac5080f13ab9c3d3830dab79963c5da71286d92d5e20568e1c81215441d8aafabf71c5bba33e3192af5e0bb88e4b9101dc79d692e74fcbbc4ef4285bb489a4811e45f871adbd1157140cfae7ee23694ef72188785c5a4eb512c937c349979201675100482f6ab88077ca319593057a88c63e7cb5fc7adf6b98dec36d0731694f7a41835127dadf7eb145580163e4e1e7fa90622f80cd752fdee320bf9c7778e5075acbc84fa5e0469561949d2bf3ea37faa78e72d33fd9f8b5af37d71f3deba2072f780e8c4b0ed0701da85b7238c730501698bb805b90fb187a98bdaa3491c4477ed2d3d2425a90e845dd22bfa68d4efd41d8888f5eb34d51d029e7173b26f710d4f4e7f3609422ebdd4a23226b44e1667def847b0bcdafabc0e8ddb240def48e05a7dad231d89f6954ee48d2d741416998ca538dcef4b9b6e5bbb3c1f615c9386b2c6781274e686130648312a0e29c454cd91a61784229bdb48235c0441d59aa2bdcacd3b4e3fa7a1f742405ee29a1cabeeb148fc2da081a5b99fb9914d39d126ccd7cb2c58045e07fcef5adc9a0d49f89ec58ac447228475701de55eced02ab48afa3313fa59cd14ad4afd54351d132dd06e5e60e5004437d97cc799fadb166092b9105c2efeba242c581ea9659228b1c67fc68509707eaf880c6925edeebe5609e0445547b7bcda84c782af34c945e4e3b5301ad8d0f9daed28f5bacbac3cdebbba7bfdd8d8d308885f6b49f897f7fa9424","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
