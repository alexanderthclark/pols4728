<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c3330652f79b7c4d04a18e2a6b03c3b10dc8a0b98376ae8850a1f9086673db5a1b31980a7716476649adf775d76a6277e87f5db83d6c252a4a24443cbbe6b90b53dc63498fa4d78bd812b0f873d480f7a6c14ca57716a0e17e9367fa8271f8379589e071e4b487da145d95b91da603858ec8ce0896d43309e29fa3a24732b10a62d3f662a0d0fb60b0c13d7060da93dba265b8904cbbea4a406b14457b01e83c7db79dcd4a1e5193dfe48465fdfedfd6f92a818e678ca9ee61ededdf3f2a8a3ca9f263f6223a7a75248372cadc90370faa0ad9386830f66cfc062378eef453a4af289b9d30232674d421a3d587d27124420a3a9b9a43578d866f0a96f23eff9c86a2215e03cfe9d868226bd805ca6875be84b47ca697dddcaca9fd200790d26188ec0c18fe8b8035ef4a4d2e9dccff7f7d58ae932924c1231d7663a98d4de73b0c3157d7a12493a6e96bdea0d51930ae328e0336512a32148127771c9789733fb4b109d16586b78a07c19349db84f18769bcef5556f437e2f7510a859d97805dae8f0ad55ab515ccff7a598fb0b25e1f56a8adc945c2aa1d0b9574446729844627302f9972c00c1da1de5f567ae98a907a87c1a68d8c85e2639cba098aa7a369d2a15474aeaf4f63009147258cb8b7c9338e0859dd65eff62b247da2298bc73ab819736b550bd03f79622fd72530e7ef5d3ec1acafc1068e3db468f074fc8b8863cab160113d59ac6f52c721e51369fdb93fcbf376311991cce064b8e73ca411cb8167d4cb0fc583787bd0d4020df552dc86856fc092927fbcf620add86dd071b5cc54508e17f5b8af7e405047d14d486e0e3f474ffac2433a02372af47994ef6fee1518b1c8b719250bf1955e05b6a3410b80774b245db9111b332888955f7edec103bede537ac401f659f40c4ce53b418c75b5a1ae116e5e84a2d83a92e0fdf7765bf6f16575d0910f2b3dd4347905510c17ee8d3b57ecf0f4a42a95ecab5ded8543b36306c796f62182df5650147043efd874689d2870d1e3b5975f347de55dbebffbfc71a693dd173727790f409b329066860a54c94660e86ebd503c8bc0bbdb4d2f6d74b6a04832491118609bba7d8c92ba763c2d068fb92c42f26f72aae28492ee7da6fed16511a3d6d5d4f222c9b78830f30f4cd3835f0058adbdb098cd5940c60f6b9015630111758639d7d0f1adeb4e9d15fc00635b64998593b45b298e1b21fe45b44668680b8ea0aab7e808531da145c357d6ec4e043572a601acce117087853193f93b578e99c959095ab796cc29cd319e9d77dc96dfd274733e4bf2f39b5c954226e568bebc06a853d888c680043e4776889810285216f40e83cdc585e2d5b57f5eefe86e78029bf684acd4e8ba700e8a972fa871b89fe682abacad3c0336abb49a1e8b2dcb91f59bb295caea71406f44d95e856a52d1af5594b84c97b73e364945fcae917b8fe7e1732aa5809c0958c6a0c50b4a39019407f6281f60a8f0f52363ce95d5b42a240c772ce9d077f3c225d1f6ea423a4b286317342cbc75831f7f1598abe3986e4b7ba7b29d29cd68f29269b12efe9e77b31d7a8cd16f06191ecadabe7829c369fefebd253c7ddf3a5997f9f7e9afae06b3560696ffa67b85dc91f933f98f8bd007becd6385d44c3e77c8687004bfeac4bf0a75288b372271e0372b04c246b35d69f529db02a66ce12f21b54277998c86a21a423086f3424ff29a24c3587c25d134e55938016b1d57eef44426da36a49a0c0242cd45c9be16fa542934d66a149b4cf65a6238cc44ea602df1de9be8dc83edccff053209bec99700efd1663bc365f5c05fa200931badb3b75a6c4aaf77c76e71d4c216758cca5441c784f6ec93dba7947bc0f2176723a22f181c03b2a2770ed3b8d6748c67bf5ea66fe2072674b5d22e9df38055f53db1adba5d035d94fc6976d87a3fdc92f524461301eba09e17827687a629b3f40a62a7cfe793691e1203c4cc2a9f04140b1a46d1419fefae3bac84535a0903e255e68482a89bf64c203562b3e0f3458aa326127d5fd5d8952e9e0ba0c4953552aee1364a036fe7d77926450aebb5dcd1aac602c7d28cba8c0e2cdecdae21a4109d4176345e873a86c7d2ce331477dd20535cac5380dfb571a0242fd02e841b32ea89cfcc462501fa62e413c70de96d4a64927f10003d59151e62686768aacb6fb4763139c070209ee2c27da9ce9062e9936f7396f199da071c487484b256ee7002b4e1aad9fb9fb66ed9a255df2bc7bcf51b500ed9adda3b0cee70a520e9662d0df2cff3b23c384cd87e194c4c638d0484ceb49a94a514725f262da5d7bcb1f87877f07850d5ce8e1039245630b8f254b454bfa042f6ecb7d398cdea5c40efa13418094bb0e8dc0198e24d04169e9c1ac24466a86c9fbc3445bd8ba79660bb18e29f8e0e5cce8cd770afcc6b0e79e8bd27da4dd8b0ec7bb4d0a08dd231ee24874bcb9c45e0893594fc9a323323e3329d187d7f77c715acf5fc3323e9abc818c9214868e87530334c1ac9b984f8b9c1cafc787883b1dfc5986a7aedca2da918729ef195c3762cd0f4a77431c8a0584f105383f5ff7d6063a1d73e059617ba711a8af08a02f066e576bc81fb4880ce3721619c797af51c7d16ec6a5f96a4e97c49264629becf85a5b1f2662cb0852c52d6ef4f264393c0f3b1c75e9ad571b666807d40a01151ac6f550d88adfc04d620c6bbf08c6499446c3620ca8032b5019357a53e9b828b3c5ca9a4a75393367aa8537d55b76688fc540c72566c70a56d058305a88c86d4f498b89045b5bf10e1a155d310009948ec8ef2a1b0412d34dde2963c7e6870c97dad732a9468cb589107d3603a439c97f807fefa0e988d31e95007eacaf1a7e0c00d33ceb6632d211cf8c19937a3413a6a480e24dbd188efb2ff99dc87fffba44100a8e926dbb59c96926315e26b86b49c0fe34ea66961b084f8fd14543166ef638ea0c902dc75b005928bb52ac185b44a609c9983750f847631b5c8fff0404419e1a87253b67c3088806907f1314487efdbbb4cb28cfa764f62c47a97f5abbcea69ab3719ea350ff62d9d0b21e58e16f941b4cd5396a5749fa067b7b0e4c4990c40a075c4a5db68b4f833f6f584c8ddddb2f9c88e44314dcd0d834d7b3118a630cb01e6143bff07dae57125c8b9a51cd6bc42fe1afa9d9180153dbd39bf17312e2a4ed3afefc6f51a72508572913c00c201da114ec00486457a6e84bf462b51ba198229231acc7bafc06ec25455a471ef9721a422344ad1a5b209838188bcbb3dbc03a5037be97ee9460cfc58165c3c0afa97f855dabcbbbd0eab4123e8a0e6c880c87a45793ac03f2180a026689269ac3bfa649ad5c492678a5fa2389b9d376fc11274a0ebd106d4b3cbc679f32baebdae3f699ab84d81d13f4bc520c39b012021d96ad7557803e17f4715540ac1921746ab38089050dd51200f09df213fbbf8f6636d6932ffbfdd576ce7b9410dc06faf8dd5d16b751b9801eaa520081ec629d6710dbfa3385a665a73b95931c7b254eaafd412f8a7e1f5e14e02957612d2863054663628dc6d6f00a1f6ee19aeaf0b2c901b29a9a28a5764d7c915c1fcf9c626520c0e0277b991cc611e0c9504ebec157b26b4a4fa90ce671b599cbce8e907f0ff36e7e387c186e478758ffbb2c60b7b6c66af1f83d512efa94f6bed5f8eb3ebc6712aa32b83f9e0de5ea9add786d936f8c5861cb918892a1c4b1c3a0af7c930aa316d6131b6bca38b572aedff0640a30e1a738741623018a60873d24fe6230a4bef40c6a6f38d5ae2d7d15f015c594bb644fb1a06b7f9667f516f03a9adade16c47833f53b02121fba75142a668133e56208f6dba1977973c39e8ea76a6e5e197c9addb5feec21257de7ec48718f077ca0bceab51554b11be2558f0e6d8951de506e4e12c53672bf54878a0a75914be6eea4dec79081d2629e1bb574c709a3d059b9a1bb58a6a3b1ca7054366577bccb68fe0e9ccf37c6859aa4d3bfb23e49c1a3669d3339311654c133a9fbb012eeedef8de654a48070c6d90df352eb92b67a11fbeecb9fc29c6430f228fa5fb12ff2f9aa63b33eb4034443a7c76ee8035370f3f35b71207305f770cdae1e129dcedf40dd8c6a047d3e95f35c5bfcb60c10df2da2d30b38363ac67748ed7724619a12e44c7c84775c557e135e94e39f1e87d221647300e141be4b79a3ee53c2ee8a35de837fb24c8eecbaf0e1bce22036d22eee52a98924b8607a67ccb695868609f6053593d7ff4610170b6df4f69b312cc96284dcf423cf6d4008d5f4af3c5758c9411c41c8e65c212173900a839cc5cd3e27b4e75339c78d29815d0d5bf779c14a9f30557ddb9e7ce7a4e43ecc8ae74f409e969b601ba13e5c102d5bbe6c0c2c2fe09d3fde649d558f5d89ba0de9254ae806e8decf30bd9f032e5038033fd555fedff06701c1d179229acc746cfe6909d92ae70389e891121205e564e81775986aac9defe8efaac53ecfb3f31f0195ba247019554724f172fb563911222fe5bd420d1311438d2249e0265a8782eb3307cf52ea32780ae4d3021a739668b3a3234fd49f2ac138d4de249c2aed5343978ebe8337b6f8c8d7f7f6a86102a933ca2a01bf20005fb43a2042eb6afa3f9d3469fe35ad197415371f7eb28a0b67d417e7710d2f53c88c2834b6a5449a65565cefe6051c1311784dc3595ca88bd7f50db3ecffcda037310c705c083977014876faabce4b2c021c5e81bf81c6270b0f9afc8c022a12626e84c06fa5fafa9c90d9f3e045da379a1dabc417fa4c80d01fd2a1ee907e1d532f303223b89b3154a1f065317651faa15f4348100effaf1cab867ecbccb499e57ad472a0a973f40157640b8590019f15596be5afa3ba5c2a8e100fe5978766167e3bf5fab302fbbd607fc90f394789e5677142e974b3bc692808dd36b543496aefda958d65e6781dcec57e433ecb40f7c36fcadd025783d8ca086fd815e89a86bf276566189bf0dba5dee79898bfa929462af8e9659e2235177894a9364238a8d503918c404605b45d568b5a9adaf78530f9ea2c0c7f75bf705a7ffc00b467fa080c7d5a2b31ecff79ee8c9f2b0beb0120627fb55f4d65ee5db885b0d1156fbfa04e39da995a52263f5979d7b76b845204866ce352e7f3c1c3b790bbd686da61740839f65c8000259e925199ba8e0b9c27704b65705aa9ce3e3697ba5e35a86e435cf6fafd656b5e9a8374b6991c2b3ca95ed0bd2d220a74b43e3fb729339b8c5d6450779ba13f957beb65dd4406ab71004506db3d528054ee3d3f72674c46ef489ebae7d1b4ce9c5208ae019626910d5e20555032bff36b5ef76a8341b345e7fa905d6d9234c4e52e5c9b3dbe4629f9feb885c6095554bcac3b9a4b12b4457215feca5d24c65f3fa657113fd440f0c40326691e17ac2dffd0b216c03ac57af79774d722568816ffaeba23aae1fb65abd6fdea3038be8e46e16f49c2a9919dc8378e1e68375cbc552bae7d7c3d6715e73f184fb9dfdce3b9b486564aebcfb9b93b6837403563c337d99b1adc141a35f959b91ce014429de6b17137b48eebc890e1d79cd708db3d26c1d581c21aca38de212a4841200d51a26a47c208a93d6ee17a4d5818bd1abc8cce5a5d7799ef9e6ef6c9454e8856a7d922c82e735b1d185f67cafd2e6992a7c3725fa32a1a6cae13435cbcf871a879d28657b116c86e7e1188661182e12f1f721cd075965ee28a81d89c44e2f6ece4613bb24128c2c77fa0b27a9d1f8b48ce547b8d990bf2ffe1fd3e4f5171749a4fd4bad3bc9eac0ddb105e40b42ea97a7927fb3ccfba32d211c1f8c9c90e27bef9b886ea141c359024dcf0c0bbe30143f1c98fc559ad89cced24d2f09a3df630ee5501d12779b4716b26f5fc496d5fe51482fab9aed11e1ffab33d965b47ff552ea9ba448e3d461f0c45f04a8e0110923d033cdecc2047ef31f005aab51f236de05b9710b1be5977c52354c5e946cc5826ce2f9e0a01ae42f55a9aec32efb4462da495bc347a39bab4a0c01dcc118799bdf4b3ac09a73c555d539086b2161a757049eaa507281fda09cd486f0290a38416efe4d98ea952d42de7d03474ba31fb8eeee7db343f7d313f49ec5a4d6170512b8f47b25a301589ff56c26a50192e910a856450edce174ef918ca08f601b6cd81478a01c35f13aa7328412e1dc89fe53df4f35fff921527025d7b7aea4a13a1c284ba0ca56db3d4161e1bed6ee8dd309c6f5580fac2f9f4992f1a2bd33e1ec0a72fec7a3d2be2088671e112817cb038702cdc900445d3d16a7854eae26d2ef85f28d4d389ca742904337ace60207e4fcbb0ca1c05ba6243c544da11609ec112be56fa8c098243c185fb39ea499df569f91dbff78e2c0b59979d06cd860f4364b3a59c8c58509515b2759e892eaeb627dfe89f7e726b79b3c587ab86f9436dd7d3b228e0e6cf18e4f7badb385ac3ca3139ea5081ea3a8ecb99bdee2647e6f0b1ca3004ba04be32e35b187d3cfaa13a8d160542343a11ca3dc8187d04e8be5d48bcb8691c25dc708072b313155841e23cf3f778c5ab1e2a8a55003a902737bcbd0215160af4083b71ca2ca92d3f23c7161a26fd608bd2946cb4c3d33a637ecce883104107234d0e2721a58d547ded0bff62dd888d6b79f40966e0a23c6cbcef3ed1d4a9088548fa0c5a603fd77ce788f53896ef72088fc1f97e17702c584933dc4abd3e8df943bdf8fcd950919b5db33611059e13e99731c1aa4735d895d4e6fcbb43f84ece092c8f7ac97ea089154b4a9650d4d36201431e21e3a53dbb69b66f2d6444fdb8e2e1dfa990aace6200773e5c2a8b7595c2b849ca236ae2a86f5433fac5dd0b73f77f134d468bddd3fe59b29196a27969478a43717573724436bfb5acdef61a878026628f973a0538d5c4f4ac0192d4f0f9ca9117785810b842d6adb9ac75461bd8997962a60463165e4468f7149645e8a7418e4641352db62b78a08d7bac30f2848a84e6a879b630335bf9bd0f45ef5665db5af0f58d745a56b99803f5103c1b9c8d15396899975ebd581bb0cb9bdced71d4722065ffa10bf2fe9c6fc5e77e54bd7c3239d060d74ec078c3258e1f96af52ca7290a77298c54078b320b0c601c65289cb683d24ebf0d544072b9013709b8aa3f613de8834a2d74cd5b52c0610e723319a7d60fbbcd1cafd20c605f86cf2710bd6cb37ced5fb47696dabdf5c632fbf3d908be3e8ed262cb48d63a639884e276e5b51916257e9a33ce244869e551146f99f746e404e83f6adbc4aa46c022fdbd3de5ec86653b388dd78cf5dfb0bfc6698a31afe29650b8529c3bb03a2cf1b8cabb304cb8551f2438adbcd672f658f30bed3c64e2179acb782aad815fb18d1c469614fe016a4d52ce59cd8f0275fd007e7b080d9a51dcecc0d7a1e3688762c1a9a00caca09fbd5818e6300e285d4d434402470fc9c87615bbe1655cd9a83c00bd5cee430e481439f3478a4a965e9674f47603abaab13bf679a303a789d8a001ec851eb54b87ea83e5e931a846cfa4a84e53e3f70f2ec0dcd0d826befdc4b3b885dbe2e5f0646a86df4a0936a468ce0d2386f9ece270ec1de3036e3ff80fe58f6ef6c8474e3bc82a9e4125693ce2a72525479799a6fcc7439c9f4681a1a0423011f1b87cbe0ab798e3fc21e7f86c1abeaa271f349f9443e4bf55911377f307e64d609baaf9a88acfe40f1ad7752ecde550b97f955f7e49384d4f18b6a072cac3447e23bf1cddfb286ff855da2f7266462cb9dd4dc055b2827da27dde94c53b0239495faad9138e253c8d8e783b98568e73268e22ef16f9dbc0bd982a590d2f375b20f901f5b3f2358d1b5f3e7277c2e1e623b8351532926169a1af73360b2a633845caf8d4ccc148422b2c5b469278b81da13d4d522c048ad38f47ed1524cd5425c25c1c6768ac906da9f2cae07b7fe08c1f2acc1b4f44b9c4470a57a1a121b6ffd40d409e75cc9c63b65e4a046f7f60c62e971843beb159dde6117773fe30244619e931efff3ec442bca08b1f19f1d7f3a35d70624bff61e44afba2d2919060f06590c2d61fb9957d4b0f8ec446705db56a05f0417ed01319c94427b87cb33359e30d230d692a1c90387743e659a1cd561583186dca260c4843f450848394545763fb27ad6ac22f833a96e23f08a8c9115f333c4e217b5455b2e05461b6c3e52bb920878e7806679306761a80882f01c8876f5125ec7192243d931ccf817410052ecc862719efb907335abe399b43b3f261cb64101fde0cf2726df23f15fad71a297008450dcde1d4d267da95bc3db09097ed8a95ef97fbbc78ba99129e988ec20f21abfadaea111d50421b028e8a3583c27981c3f2755d824d42a5e798b4b5dafeaad28f5c0250ce4dd1d573f158f37b8c0da219922e29bb2d4a18d6e65a3c1318813b885683dcca751c27d6c74393ef8accd9d6a513bb72df0b850a6484f4d2a8659539f5ec36c39b1b05da63a071b43ec53e5854a5d0e4bce560c693c734cfbc953f2bea0dfce68485dbf19fe46bf3b239ef2c59291b72c59eb3f1e7fc93badf9a41b8dc9d0c032e5e36b0ca7d7a8657b10eb9c486b8eb9061f5071c911f62a4705415bf26a4e0dc6b99e3461e37bb9e9d429022f141ac30caf4d1c33cfe5cb33f839cadebf683bf99c5db926638a65093e92b33f838bc7b90ac870bee177f1edd730bde0385e8033d83aa36ce80377362895feec79b3660d51788df3ca7d26b8f9ae802bbe5c4f4aa1f9859bf1e43271f9db97b18c252c957378c5e873958fbfcd23064fdf83d165209219906c510bfc11a4c784ee5f8567e9de0dabdcc4d375d865848dcfe2e01c0ee96735c7d62723892767b99d63e725115be974921be0c420bb651b70492ce028f283dc6626fc7803173165e4bc1eb5d945d7769cee18cffab8f824e84fc9b300685bea1c813d1d3f26281896f3f254e47567b54057181936d7b40157ec6f20b5711edda4651900d67dc21bee3b314a2a757546e9eb05ccd47b60b57f433f3f40be9c359852ab2bbc4f49a107258eb1aa573db74742e8ab6cde2f2bc61ac1b305832fdf00ecf460a4867dd3dca87df221406fa179840639db555187c8f4dd8caeefa71c17843d2ad425976905f8afc94e3e825e31e67ec79c48c3e181bc89852a8cefe6fa35fcf56bd76b60a72f883cf5dc843cc8516d84fcfe6475fa9391ee9fe79d5f8c1ebdc4504ca08df70c0720cfed62048538f6b0fe4bcaf94b0f64543378fb3f25ba18c5ba60c2f58e61e86433aa17d4e4a7c1b8da0cad413a6e81843a36747329185d0f9079d6b61c5355763d212e32c01f7bd71055d84fe9dc0e205dda39c7eb9723152aa548fbd5b0705f4c5df80dc9f3bed73460f13adec2cac26aee4b4fdfafaa352234c65d3b8b9805d91ee7b87b8d8677a940bd09222a6913a8a34046514d5493b5b52030d547d4ec0ced0c2c9976f595e6614949e40bcffaac18018cf1a94b1a3873adadc8d12368bf2385c4caa59cb1673071c793e3c0c92e5f2dfa19dc1eb0ea396236af4836b267a691b2ae4536872b3b5cd92fc4046ea6e6464e9e176b05caa84c0f2f52da65e8ea39114cbf55a738a885c97d15e39d9dacd8a2473c261235581fbdba51a3409167061a2054b21029cb957a35e9ea20eda2fc3e4d4c7fb533aaff183af593b685a6d2e9865949d99a4d0c4b2ce2ae274b6ea1cd6baa21383e6fa238b09701c175323014461c35545a91930df80e63aa44bb58ad6cc1d3aa9c6945dba4ee93a8893bac56db5a0b8529f004060e178c5670b42926bb7e7fd7ec278da89f3e10c721f9de88beebca7d248bb0983dedaf5ebca5c71db260ccfd5913bc5bf5b8ec6ddecd3626e1fc8f2f60e1c991e4bc608f4b0b3970d93b027cb41e8bb80c26c0618af1f2f93cec759cbd8c5a8edfe13a5e4460b95ad44fa3e2c5f2c13f7b0660e90818488ec75b172333d74653ba945966d95b3331978260fcfb582de0e3a0caf4dbce54988f0941ce98f560762eed316d852af933ff4fcac5e51c8e20311b603df8a4caabcabde0fe73520c4677b393b3fb4c0f8f91f248c98ce97806f307819f70faf4b703613bf4afbcffa7fc63232a205064afb6ecf068a7e2679606c88dd7f8b9e58711be43f82bff4b0e33107fdc5034374be22d66718cfda7de7abc21d97fa8682eea2afec2b24f8794b0c144f0e6ce1fb90f6678351cf62e607d796d41849a2687e2fa261f878e142409e79af21e38f9e3013e10e872cc7a25d3867d60a5a629ec3bb7d9ecdf88f29249013f2948e5f7dbbc75e83b0acba168c0bb2bfb3bcb2992f6f324abba13ba988e3c82423fae749b232f5d7a907c84d2d0182359ee164bb2f09bf362f25c89310f82b551c6d41dd26d9fd9c6ad84f282047c8076ebe8024c003150ad1e50de9b9012884600eb10991d1b92db4ce47fd1ba86db86185a44044bfb5857edbfad5059ae6f92e7ac1d689bdab3e5433ae997ae1ead52b77613f7b5e167e86ff8a4cbd44c8ced81af014cfc43f1e73a349264ddf32f8b6faf5d0f202462dadb3c7cb605b7aa1b7927815de4011a4cbb45258c7587ac4bd63f6e6ffaeed26ea953a077991414a0956e5f04326ede3e3fc241e4c1bbb98f2fbf97484860c009a31bbb4483fc408e776d8615959ab45af28e3ad14fbcc59608d109c07407a5cc67a329e3bc8f2d74f45c657bbec16b07bedce0a19e895705a5e764f3db1850f57e6ef43915b8f58f29c81b0e90908e2764c6219379649f4383b1f8d36db952a1f966590275cc983f07965f9d8b3b0bb707b3816b4e89de7097d920f36c5f277379c8b67aeba1bc7af9f46876a8a6de9fc4d93994e52fe0032cdb4450b69112a7bd513d80d8657c18b66fe6e8c8eb994c5ce7a223bdba6e4ffaabc4056520962c936454eca19e64e315da24396c058de1edae1433d39c11aa763ed8c1c221dad5d9d32e74989b1c72a5a65d946504926f57ab5c177a1ffe5b0357ba4e5ae6c388cf37f345ef2d55a7f042289f72e355c9525811be681dad05328570a93d96668faeb5919d67bd4889275281912dcc5b5a7020ff4834cc6cbcc2fb381bdd83c4a866db57135aadc6cf60478a817a0a86359c0f2cb4f5d9ae15ca0530b794f537934fd705b8f1f2ddde3eb6bc176e5602afb10d351e4af63b1c00ef7d8e92d27fb1711cb30b7da235405c8168f1b0fa83022e2ebd62d811fe11f13da6f339bf5cd7177b1c046314b9e28afec67d2c96757fa1cb072065a97d442638b3000190727edf3fd14922b3c62fde6aa068d7c0bbde00cb8213bf5a57709bfc1b8238c32bd903f8e517262616d2a8e7a651458e2a9dfa3ab45928beff3f420dd077ae7a7d9504f4b42ef10261914027d6e03048e7b610102f7f595f01b08980e96ae7594a42ef58a7afbc2adfdb779cf5ca18e4d403e46711db1e3739401d1d3e638a8cf233e679581207c2ac09e118b0f76009ab3cd3e7038dfe44725ad2e901f497f80f08a8c944972eeb8b6149cf988b12c7bd99f465ea4d28d71392400344a323e4cf1be26cf26b6bcc6ffa3d2fd9252a831edf4dfb14bb9bd0726a7deda59e9106648214fd5c73c0444882e30748f9528244e5fbc0e83bb7d2c67c53613a8fcf31ab1f0e3478395004b40a533180723a28cded2c9ad904a352d05725f3b730531435a2208c73dfd1edf81ebd14dd20a14814831facb837d25e2e2ecfdbc5369aef4cd1ef2bb633c4163eead12d02f1a7b2c23d97cc18e7f3791d6c74eae310ea5e317afdc627903054230d9bbf8fdf3e939a46b8e726992eb1791d64b32e79cae527a28266ef2a5bc48a5969ec5e8ec53083459feef71e189fac49cc5c51153c09d463babaf61efc4c733666183f0fdab660c4de39c918f6cc4ab448376f165d14fe01e7160f0df5106659a834ac29c75826fbb19ac3f602c8f018dea5bb6a798f77b4b5f1711e93809d628a26d9cfff892c934f2909ca011e1cd2782d1320917ef98eab1f2312919c51b1fec78e3017b1432fc96c8c597485d7af13da13b8b8987e9d32464ab95e755df818798568d920df19c33bfe95b9e709d1e799570ec8bd868135d83a3096c238bcbfcbb6080faeb8c80134e6cc8e4c088d1e1078b9efd4492ff226856e2188cb78b46b57c303bffbed9ddbe0f32a2b31104a1736c3fdd0b1084b42d1ec7286eac15b03959068a70b5ef26194bad455ff8aabd67a85d4cb2dcdc720ab70e3a87a6068dc18b0aea44a0997c9b2131f7e8231f4438f43e967cf72fb93301393656160eb9fea982770ec1eded20a42cd49e663abc79329d06468630a9415915963bbbe428227edf55d0dd4676a4229dab2093fea6e39e5b573f18171b2c978d4e505730b23359482050a2816dfe58c477d7dbb6c45b3149c7eef08e90b0464eab5d9ee5ee7374f16f67478859aab512006639061a8d279793cb83587f334fb4c9d5a42a53f841f70446ab2473551be1ea7622d6478d2cf176e022be2e4450f8098aeac595f2e1b21719bfc92468750275f46eca5bfeb5e41b55131a4b591bc3d46978591c152ba0396f2d06cd3e4023107d62e7935567e3021eb9ca91e23b27e56e7b03a845d9d5bf82a206cbee72ee448ca082093d97df7a76f771d32fc9414a7b314e78237e39f0e1b74b127a78833bdfb40a806098db489b34126744ed539ef4e69b77ff79fbafbac1207ebff18fd13a885b882939643812576be6672f80d341c26d7e9162f54ab6c9ba7596699779eb9a5e2ce72c72df83b277b67b2d54f506323c578f48a52cf419f381df30343679ff390425954f4fff105ee3b4f35b013c403a6033650b5dd61b66a79f3f49138ce1660542c83c47467c14ff28f351e983d8add2d52f6d8b19290bb55d7025f1b6de506d13bac2d94acffe1d7c3c496685903c854163a8400636e78ff059ef46076b2ac66495bb476ef683d2acf48ea047b956ee82b09dea7af5233ed0c0ab11a7dd5da577921d7febcb61a5667179822c8d662e2acbe48fe57628621dd3b3956c7ec30a6ef0cd5b716a2bb0c4772c013ec16dbe0fd25a1bc56bd56c37853a770e25cf046b29e36b248d58869e8c95390c568fdd4e06085c83fabfb69f4ddc2cde138e88747bdebe355bb2a42af9efc896bbbea11705fb66782873ec113325117cd159caadd0524382e578a44734bc0fe55045c8e02a047b6a15d7148718a5433ffa354034b8a4e5fdfa5b460996d7df69b36dfbe36993c60059e1db70d208e9d7ac457a8b4ed430e953dcb76e6d8ab6d8fbb93accfb9a4c6170f667ef10399751420037e40c2319c9450ec6859147ec8f97f746c56436d5d7823cbf36ba871eba3d5a237d476afabc15eb8473264c6502ddf0af03df0a9b2f3265747bcccdbdf58f8dabcb9248a9cb7d902c6dbb39c44aba53f941588f4bb422d2c3b21aac6ab2575e6c10e0fb8b5d45407615c6ac06588595ccb5562030cbdaa0e5c7c3be6c145558243392d92df60796a7c81d1e974d50a3338af9aa904ef72247fc268c79fd53a41bf8dda35369e7933afa18b1bec45b1d0d061ce7205f4cde37f804536b7fe1e00ce333d240b96917192fd7f019619596af2feac3700722aa94499da50a0b58cb12fa305e26c8f3dd9b3b88882126e5348ec6ccb7f0a5e1bf4067048ab9c72013a3cf71f45988856381b3f598bce874223f2dd27d6ea04c0719c9305989999ba2208b7769e99fc7ecec376556ad2a744da7c83bd471e9eb073a639d87a8c106cd379bf9dfb202d5702843b4cdcc9eaa1e972f67c76241e2689d3d127b71037a0ff255d89c08671e6525cf584ff3f47b045346009c6bbf52d242623843c9ec6cefa1c3771b2d282f34f630e88b0f6ab33198b2f7fb9f257f1f7338635e07c2e09b30f9b36aa51193629cb2254bc66a3ad69eb900ddfc2927e171a1e45597f3f2fca2e40de21516e51772d2580e92e819c78b25bb77f85e04309588c2e0a472d5680d5dd246f2957f8cfd94dd334e31a897241e22fcd9d135d09e46aa925f2d4a4b56b0cd938c3be6858ba7154108be8b4b63ab777716c93f818a830bd3cab904ab87203741a6bb8bd1f78690bd2dccebf5c46c9042ea7f6b46e1709409b144aea74725fbbd2925f02b22eeb809c5b0ad975bbccf38b2566d77fb46ca37a4bb47ceb1b0d6fe575b31c3385e41a406ed2a0aad9ecf457a4217c3de2ec02879cd1b8920d9682be7afdf5a5d063f077141a48eec78aac9ec5382489913ec166e750cabcf4ce03711a3031fe288645013f5373a3cb76e16f2c9d6615622872100811014613b3331abfc05a9538cc6292351a9701f76711a73b7de0700cf5599c4d6d5ffa92a0fa97da6cb8b4b47d90e99ce5e5bc22a30d4315439f24f4ecbdb0e788aee1b51a11d188734d51912b6366e255d678274fab9a1398749f94ae396958fcc97d3b812141db04e0b019b1066ee5b1e5550d9a327ebaac6d448c0aa75a687c962a6adfe2efba40d47fd9ecb832430700d5a75d0e04e864d130cf2c9bca2f390640c4c04095cd5d984a7ceb3ed82bc955e9571da253cc1af75f5a2e7eac2de2b31aa9054270e1f4e9c46e9a281e9feee594f56cf60521236f031f197ef01d513e66ce1a63a13a06fc72c05c787800e99e30ed28c6cbacb741f71f47c1b0702d93f4693d00466f0d29657f46e220ddf7611815d7de79ad823dbd468eb4d3cd47cac9b6b16b5ae3c2a52a617d45f61edf6b1a42ef78acc140d8870fcb348869d678b7c3144eeae25ecf6247802c719fe785fb325e4e6306025b6b22a02fd9fb22bd802c6d570327e2e1188751795d51d01d045ec64618c351ed8cb420e851383b3d0d8b8747f8ca65fda2b7ad936782796bd983519662577ec5bef1ddfe90fbecebd52cbde7b6cb6709ec17c39a54d643111ba16241b63552755d8e7bfca18d1ed807fd81e075dcb6a20928533d3c295609177a08e9dd43fe5d5ac09abb7a9fcbd119148d8b6e54f70e0efb3f1885dd98609fe2386b806494aa8951f45ab93f6482bc8aff6e38aaa360e79e7c1d7b64b44af1500bb1700b048141883e079c8ccd417e61c3d4ff163fee831cabca5007a6477cc8f27a4377fcd6f3d6c4c858c0fcae370128051c9af2e3b9199f0f2d32356b8995fa8604997ce2cb3e9ca3c4f75274f55c6c1a3f2c90da8845a03a8bb9daf41a984ace1510d2ec0fd1bde19faab96d5060417cd4476cc0f20649a18a43d964d352abc1e81d5d2851dbd2ba811ff87cc9c9b784516716da61b80964aacc5e9b4fabc52e7719b3348eef9bbb6a9e8b7f6cf70996dec8b1a5683155415cd55124c39ca116cd774e54301123fa737d07d93747e2ba6cb571cf9259890cb5accf8c94a2a318d416ab03dd2ea3f431e688fb102dc38e21c470ba44b118899d7f6ada7732086f75d409b1f74a5e590b990b5affc6abbb50e95fbb7fad836e81f2ee0d7a9bc9d98d29c13f1f987742def04f82691ef78083be50d24b7e5406839d1102e936381d2fe802de43168a6414ef0b6c7fd3a348a5249e4241fefed92aecaa9593ff6c26c73cd81981aba9947ad44d7e467c7e46bb62b67eb8cc6d67e92c8da4bf766a102df6cd928942dd6b66a959a3c9922a325eec4173e35ae586eb67ec47ad40da762a6539f0ced5781278601ae0b752012ad008d8cd40bd8985a32beaa9febaf0aeeb0e67db58549f91be40ff52fc4dc263afe0681cb80b08a18f191af9bdd457df3de7caeaa2a5f8d8fd5c52a0220f24ffc78139cdf66f5301372ff488cb05864ab8111c07ebcdc25d43ff928d557ae9e88033520e26d9ed42238a53bc259428577c2bd18f8d3da02d7b8fa3fe9fff8fdefead7db618520840c86e740e06fad73fe17a429ac44c6e31ee47a24281fc8275036778f9d878361d87460e6919bc4b6889b4958bd106dba556b84f9c77bac0a474301faac3698c6df30555eb6d043015b06a707ebe05bdc7e119123be12e2307abde1c9dc846623815f052b9b16f883437bc86d74b4bcf458599df733ec990b915e9c34b7f72cfd8d0e00f20affe1c57d61865bcb819016111e40b039f14154724def879fb5f02c75d371f45884ca739b090962683f153d0c72dc20e282549c435913792d1655972d754d7d82bb268dc6952274728f81e6e92a60bfa8af62e1292ebf93f46e3488e0c3845eb0b81a69fcf2204abeeaca36a392323e9468490a2bc45d56d8b90157ec576fb2867f4a09df122128db7fa5f689fddea2bde17dcb9b8e5acf807e585038b28059dba74c69839dec172f5a3024493e1e3ae6d3def0b80413f53f8a0af037a395e3d88bff93f2b48452ddd5539ecdb1fe77045dc67a7dd3c729ef3ac300b6a8700e82e87675e4e8613274ec4ce8127ae9e25613fec4d309eda305a9381b521856f218e270dcd285c5a6bb9c997cba30e7e0fe1ff046436a47f817d0f4d0c2e762039c269dbe5c75c3dea70e8d5186d1f8eb2413ad4a8436513eb7507db12dc605421cee031722c243c4b6221d44cf9c3f7b1be3bdd21e1648cccd90f7d3a4d6d495227f854771ce5e24727577e081a98a816ebbdd7ea14efc04ad8fd5d151c4423a305428448d12e4ad9a2d5dc01ac2aeb80d9df21bb674790b448f85f1de8d2759e5b5680aa7e835c435e45af63bc5e2811b0023621710b292e6a329bcefd525595fd8464b95cdca60c7bde111de302ed9feff2c631b899d780fc4f61e31b0242f90d8bcdb95652ef033fb7e31952feefdcc4db38c5e5a371e2a1f89f8c20934df0b9540afde6f1733f2a37e80c15735ec9942dbe3474b315879ceb6226bc659a01e78fae99b97b03a10892e966d6f75d858709926149b3b3673630c0ef19889abb95e42f65f43fcc30a6abaf889bbf397a9a4394b2c8940b399877f1e3b01821157227e18d15997fc4bedf4478209eb585b665ed4ce8dcd9b7581c171afa7eaa38aa78671d233bfac59471261364131866fc189bb0199e408cb4624f53efde7276a68bc2ec6d594f21d29cc64eade4d6b0600118911319a25c45ff1725499500280d0bb01847b9348f474d885c61a2c3aa5737174fe62db841ca840df4cddaa50f49651cd352ceee03d63fec62aa238526ac19442507045f77cf603e03fb7fb2a860fe627b8185d651db11073a394271fdcf16a883ec5c1c2be80d4b33a4c0dee4c2c093f0c5da8cd4bd61ec71418c2ff7e99103f0424089d7875d99b84ebc721b6701545931a5cc4f97cc986e85d4afad8face3f0e89304759097bb609fbf408894e530a9abab7967f42094bc95dfb3bdeb80de40c8ccc53e9ecace6851512cdd16808702fe1ca04539ecc30399bfa9a2a46d9af262f1d8ac2cd2b6e6260aeed5d55f12528325fcf0765b3e6deb6c798c1ed5782ead85620a1533d0ecd188f3d7cfe259cdd3be0fc226fedee20e8a858b7d74294938bb3f42abeb9466194f59960f36ff2ba05a1a2f94e144df48cd469becc00565eed0272080ebf8f9817a0d09a0aed4490f57e7d4c75b86e21619c4cf95568af1722771a5f7cd2b85353183b9bd830076f061041b721f86d3af304c821460c2dfb544a8e0dbb22c12c5f51e4882a2668262e4fd58b04f841b1f810341c5749384fbaca4a9799d25c338b3cf194e22f0f24eb35f123fc8e4239690ffd6283e43c89013df96752507d09d4d5fd64a9bc8b1aa971305ff5c42461f8a9aa3d1b15ad7d8a273cba139a3c161e603ec2f9fa9a76958b68ef12f9afbc0cb37cc163f4c74ac09247199655ea3442195e982cb54ec1d6af8b2746f5e4004e76a1cf975c78e192e0d41351d678d9067a9114264b459a0bfb1b306967f3117f56143951f27a83ef8d243e118d02e55a28b2b994e59d9ac60832df3c82a8f675d81f2b6572846f1c3d898daadec4375a9367b4835ae7e07d16734ff2695f550957e97a496f189be5901b1dd17f67ede6a886457fa23500562ee2706ad5fb2849a237fb634ef77bae669c4b36f5fc11b53e0e60d302966637c746abcdd8457a189e7987692c3e6f5d86d82a66a5f1ab12b4a6917594955486d7af687281ccfdf488cd7c9b53dfcf0f6d28f4c62ad27b7b1534d54bc5767725fd2a1cf1b03a1e9a8fff8dd05798d54e7a5c5c43dc1b513d8e51a61d8b2c3cef6ea3bce19a1fc4704acaae12481d4c99a38e5877da8f6337c07b7b7b3586c5469e2111cec0993f93264df8f8e560fb8467088fe5e6facce1a8665eea18dd63d99a5391c55da3eab66daafd97bb132aff06f16829cf7ea2a94ea5b041be08ed007b6dd05660db19312e59516937dd74138db5726adb20fb391622859f338b98bee82596c57e1c64711db18e23695bbc9f66cdd32453e158ffe2551457452933d3fb7c5dea87ce2b9ac82238909b61c509ec87c433d2d18d68ca72ae485357b81419284b5f1309729d5a4c2a45a9a50c860fbe33a7b2ae1046721a5c5dc9017a3aa44a794022a8f1efbc52027b8fdee28548188a1a3b8a3f986b5b3e72a55d77b015b70b238a32775e1a323dfb6cd06cd251b96be0cb72458de1264eeea11297bdea4e456f0eed3f576bcbf333a82386741185aa4a238bc3fc13dd0764bba01a45d0fa8fb8e3125cdfc8d5d8ae970ed1b79e89915b9c287346d7b75ee9f0ff1706aedc58fc39324964b84e2d7d0b45fea99d3ba81b5d5312e2c6deb2a615b6ca8c7b5698184499525ae1f4f5a020b0dda4377270b837a6246a0e821c6637b4727e15745e1a62c8f04f9a4371381f9fef2e44ba9870c8189f667c34a89caddcd8ac692bee1954d2dbb585bb48162aa1245a64e291a55e7a2e0d79e3006d26375a4f9ccbf778abc6f1a4a6360043eee29bd4d56e0ee5f058e6e83b1ad6513b9e065f4ab0bd0319735598b0c923259c3addeaeb4d98574889abeb98ae3bbc0a956f49ef142f326c72732dfd012b4fd13c837dd056fd14224412c866a2d84e42b086f5b6e0070180bdc8d491d697bbc4e582a0f3e6a674b8518a2a8dbbec592c9137bfa846c7228f8cc8b0ec3bb3a0c1dbb309fa49edcd7ea8a94cfaaa752117ecaa8106c56c7397d5a8b0033b1d5829d323e17d9485635920608b6e7cc296e3d51b4d7e1e7204936022d6774404e98d90edf9f9c05cc4f176ca0d54c6a72ac9b464497d5a7d1c1f4ec05e2d0a76047f35816d4d4a19a5a048073849d1e82cf5d764976478c5132c544bb0ce91a5bd95020f62c74436f8498d98566aa7f9c8413682bab30b463ce6a3633cf7770141e4a0ec00c20d611bac70dbd1ccd456f37b9933eaea809a08f7cc4cd57ded26902a52756e67a72b121b36a52e2b955922661d63fdefa94bb6ac904351fdaaddbca7ade0d27b8ff57246766a07853f10bf240f1d743d19b25b483d7e8b6559baf33f46fc634f9b5e285eaf9e37c035e2fb4243dd09d642e206f1161224e2eaf5c1d9e3e878dc682310b218c2adb17f34114e97e74119d65318f65cb559819a09d6a902ec20a556c14ea7473d65045d747dc9279fb0c5036f68f0b6eea21ffb4dff557c185d5311f9fe96","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
