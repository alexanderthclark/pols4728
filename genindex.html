<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3ff3e10610620f285370f5732e5e75e5ce004b53332431690ac17e6753df901147c62e4a817bd35ace4ab3fe5fc844c0ed3fbd201411ab6be47ae0b2e63a458219555cf389fd1f278f83032d020777eea17f2dbc14f2a85d08c4938728ffa930ee5344a4862a303a107700ac90d44af62fd609385d98375e24b22c282792fec2bc8acb109bb2b3ef9a73e02cd6b186d80bef0597d9f5275ba5e48f2cc10740ae9eb7c279495c4f82b9dce73f86989f45cdf5aa3878c67af85458edcd0c6a0ba1c536fb3a7eee3f93a8a81128c7d7ba00ccb9b0a8155a6bfda788cb5cc9e6cb854f2aab7e75c0bcd5ef953d9392b350521681fb44cca3db3afa070c1fa67376d78008ebdac9f18e5587f7803e285aa38ddc1b9dda80062188b196427bc79c8a000a9703e971589e7489d6c74e20d584a19a546fe386148129ed1c4463e03365b3536e78f5ce037c8167e063e303250cefcb9a33d554a4c272317d619d1573b5eba54ae863d29c78d627577dc0b6474cd55999bb30d242db84add1b4a6b3b2424a1560530bfca6201ccb9954427de06b60505a496e0ff7f977c5470e259160e532aee391319e2b377e22ec28ea2e4f7a19c11c2d7cff1ba3fa48f9995113f9a045e74df35e600e5bfa2dcb2d24d8b36e7821dbcc0c6d3f4ee258c1150c5c3995bdaa96b95583f4f7f6ea0281e06287af39514fa75b981d6a3cc2e4c16d88ef5856b28f1c3148a715403484e0299354c685c0279f1aff55b9012113d8569d4c719d525c04ed8d4f7189a16ed8e91584f0ce6bfed911a1a615acebdb02c6d12d5ef946268f0974f6a72aab4db98023bebf3c5c0f239a3cf8d288c150fbe716efc9b7192003ba0335fa6eff321ab1fc362034746f3538b343ee0dbf31bc37ae7a88537e2fc3b4cc3c5299bc60f4fde6f2d882e4d8c0214d0938350627604e4c483618c280e712365dd74cc4474aba5482cc7a4bd7c1a5a3a2c7bf68a9a8747e4d1e9245e57d8d00d5fccc49348b4492407c40be0057cd704d2de0c1e53ba6198a786cd121a2d94eaba6473a0bfca422ddf5ccfbf046524663c24df0d2f26138c83a4bd90d6e14c81193f435c6d14ccac35088c87be0c5d89f88a27bb48009efb5541edd5c743da0fb7c32c04d4b312ee1760bfae3358fabaa0f224ef4ad7f887d0a87f9b10028d9481099bdf299d51aa7b8e696f5bafdfb983ebaaf8a1a63721ceb6b633d058c1de57519c4b04bf92aa9b5bef14836fac596f7ec45d5b94c8afa588fcfbb4413bc705483735472aebcad8cd3c8484ab515de5043d3e3f2e1df8be0850c234f003afcb9fb2cfbea52a137f1ac6a4c71108b2e8b9a124562de123c98f075a9acdbaf94616636de5bf5b20a0bc5ff08e46879404e98f0215d095c70f444f33675098760ceb3f364b191e7890ee9af57b32c3bec6c5a4ad092c4d71f8b5c109c2f2e26ca9a65a7cfa9908a89f4659644212bacbea1b3d53a73ba489d69329177b5ff16b9e28835a06f6a31c15b543a4238e9e40d67b9851dc186d944fe7457e05882ed7cca37b9f0aa0e46b3b32c8f951a632e0ae1faf20eaafb21679ea82ddd2a94c04e64b184cbd38528e71fa6e519677f0f7600b1ac2ca851df80d6dad02df6c71026bd5078c332f0ed6df2e51dcfd98550b667d7626355acd1fb386d2720ed7ac88ba9670a251a9ad3f247be581600a4c5fef3dafbc71b1f172e4606207c9205cd472d98ccf5aaac968e23e77b4f579974f3e2e77044207ac30a9415bfeff3e5f33d8e0568b303fce9741f023b82fbf834489a3c4c7ba3c0422ce6b7bea6d387eb3d32c8be235e297f11b3fe92b8d7b28c8aa3a7508f965342751096b6eedac5a223b189ad76ca1aa5c5d049cc9c2c3543bf85d007665ffadfd1e92ea51dc8a8aa6b9d5bd09f33a6e0f424df1759fc2235741ac16f44eae4e5051a3175b63d53ba7624c8e33d34c4e29f65ebc835c32ec936c8590e1946fc3db5609c4d5180b5eae7ca0e921c1206bed1eb7cf64fcf5c98b391a32c877f1b0567ddfec33fdd54f2513ab804a5410f155bc8d3ff8185c697399eb96bf59abcb5e9dacf48b5458a828ecf0baeaa711e0389991c7defdcb0d16acf53fd8d4890bdbaee29d99ae071b70bb7d8297cccf9dd5c3ea3e5636424a85d06db33ea7137600e9fa2e78630e1f8ece2790eab9779e89c4b2e818660a23ec2643d6f320dd214ea163da411ba6991d11f99537b432335f0dbc7145176399cd50725376d972c2894ef1bf8fdaf37e05a88d5c099003b184498c417fd44f0158218c1030094e84a628a8979593bc31a0ccd90b22dc9b344548861fced072344f98163b5f41c871e57ea4e2ae9d6ddb2eda832867905c0e687d2a0c49292709b12ce66547a853dd6325bf887fca1df60ded34c66f0e43ca214a1490251df65e64e1971d715ee45bacd0995124869ceb2e806e2decc1b63af70c3065c5b97afef5e5ec8a88c9101d47e57488f883e5350b51f119436ad70db85615fcaa33368b4edb105865807dbd176ccc5a619c162bd13c8994a60e25e856e3a0c97469f28cc85a051a6be45d75e86c75662b1ca829f2a7acacdd7698fdb5a676ef6102f03174af95c87182d619aefe362a6e5a7fdfcf38526625e60c58ed17dd3d31e2fc2c952a26588963c2f34b4fee3d1ae27252ec38cd8127933e5cec8aaa02f79193285ce287bee4bd6c03059dcc8304a5ac16f93981ce4985e10e595e783b6f94f2d5ac8825e202b07ab7c117093abb50d9179b8499173eae299e6b41cb5da3bcb52f88c5dc8a64dff4e61493d6d606430b601eff3e416494137324d61d50f6977e8f4d72e0fe908b11d76d53d1c09387d58dd711961df2175ba3b564507b8b65edd932ed864ea8cdfd1a117e2eb4fc4c54cad422ad6463aeca093145ba3d1fedba6003c3ce0cad59269efe680b2224a46fe837a8b1222e930c712e6f186d46f4c9ebce714e5526004161fe59650ada258be4beb3a4f4189c03e5d4a2f890006ecfd44af772a9539bef107550f651fd4d7eb106bf7ecaf4432119c2d628b74f40aef3f8e74e758a729cf99354cca8082ab571ecf864134a41d361192d9cf1f4d64ecbab69b7a882a219ebecbe0240af7a7b7e32eaa46ba6f771d2aa64fbf1a31ee38612365c7e78436ec6f4c10c50d6bb156eecf2cbeb7bae6e4c094f28f35b926eeaa41c5073e6df77488798d104c1f5dfbec9615c19e72e36e568be71971c4bd4d8c0ec5a71e6446393a7c03b181b11664daedee35bcb82c0df2f3ad2b317088a7d25ff18785d4d5583223f4d9ad1f33cab1388ef59719013ae2860086546e698d4fbf4fdb8935674ffae852ff398b49639db381870d7527ca25ac67c17acac70a7a53a0e34250e9d888d58c5693b7fbe193685a9cf50f4dfa0572993fa5f535adcc70508976cf8f27b90682f8c80058d39937d21fcb26679be10e2bc9debbe4c2d5b9e531c8c4cf23fcb5b09d98a96fb75e907eb132a8f371059a6cb82174b33ecfc1392121714b2a72e45fd092eaa92cd79ab89224f590c73464b4d9d75d4969c74d584b894e2e4e371aa89e372d9162a961ed3d9f4b8592871da82f941b4fe1bba7ae9602edd00520196e54f2f98ae86837a90377e304c094d7acd60e5a7bb7968956d8535a84be46d90c63b3eaa5aca847b86d7ba5fb268eddb2e85a3cfc7dec29532edeab8e0c4af4a25de0097c95e1ea67c2eb1f9acbc196daca1f7eda349bc73dd74c078ea9d7ce60ba49f152d93cc6f34a6bdfc542bd23d6f019ae95882e094ecdf51c3a93175f93333becc7c4f1639d9d2fdcbf78ed1749bd4bfae3133f4571a93022d397c1674ca2486d28847ca18e5bbccdee4392b673aef2a31ceec54dfed3441c93bb1b2fa04077492e413ef5678bad1dac8f5da3e120a08c1eb7772c68bc9a1be1405e4519a3e19a6b4a3a0512da2b90f86c64b5d58d9b25145689fd63fd0c2adc6d1befb729dcbc9c0e0fd62c221987a26228a93ff9e760bf79dac43aecc2491d0fed5354c662de26d773c5b6961bc16283be14ad0528c8452c6ece5be0d75ecae13450c99012414620e7956d55dc51db0f77b54a5cbd876d50716235924046b87798d91e974deb601d343a20cb7636f2f6e2b917a059a9b9daa0749e8ed2351fa473d2d1f1237ed220d778ce75fc4b8210968128779a1563bcfc4fc675566cebfe07a1f47071c6a11683e37e53809136d180a5bb63266b851093d92ee53682ecf1f6cd1ee8b413e0a0535edbef072a435f9ce07f5c2bf03c5a521d87995d95f5575b0f8df6ca1a846710bfef78aba9f511cd472b87013184659582cec283d29126171ec46a3a160c81b2ce28ae1802d863a7fc877e83ef562615185ae9cce6ef61cfd6c79c6e06fa12035da346b1b2c92d8f93b43b393d1face5f06c3e95731fe2e46096400330c42f2d3c4bc8cd07c14d4d7db954451650a1bb62acb0122f121448ed601f9d0a85f62b56de98ffbc9232ffbcc2649591aee19e582adefded4cd47e6b226bef3a64018f6c35899af3600912611547531dab69b51519131e5b35028ae6167f0a9f1c8e2e4b21a5844d381dc49e7a57b456806ef7eefc73aca16f8c78054a0aaf8da47bce7c01bc4c253bad874774a9a7518d1005c4a4f9e6ba01029c0245f9d5584fc15570bc16ad88da80b76372859c090f05ff356d960468af295146d32ea3db60e02dcaf4378a41e98e87ac9d4b6aa15f3c0c4bf56a16dad2d635a3aa219358f9b9b96bcf80ed8d790ddc1fa1b32fb119474bb8f1dab048c74a29328375a20862724f6ddba37c12450e24d2c4569d8e6246da2f74682f02fa316eb13c78fe7c8d50aa37b75e05654083a59d9dc539226cbc1b777228cc1b80ae259d379c365bacfcb30eda7ab9edcfb0417f0deb47d99b6e107cc301ceafff2eefd98fe0317e2ecce6e9f221cde34c974fe689ae69b09575d2111bd14e0e97e0df31189dd3c41ada9c37a934ef178c96b677a5c4effdd2b4c22e9e7623b441860d21bea2423ca93247e4e539d28f975e95292d561ad41b9633b79c7c1d5c91d5ff7c804bb6f441c52b2a8c4da0272f89aad14eb4fa3084ae22cb43b9dd584c9b73e4418334b1ad6c20ed33718995e3899f4d829f0607aa3ece855156cb40bddb5f9918ab1fdaf243dc9a16b27594592baca02b751a412113dec7ff73aa4a1292748a1a9998ab70fe95c2ff8dee09483c7466c8e13e16214523595a0060201650ec22223b30222e49f62a2dac3c14a0d8b9ad5093dfb63573df8cf642a4ecadcf297b3ade865b5798442673966b786c3b455af6552d7c605319353f1eab9c1bc8f0fc87270776873194cfcdc04d8597b496605d2517640695115a5742239bd8178939bee44729e06388252458d94cfba657b6a1dff4e82e8b8a455ae3ce3ecc8ac9f8699ca159ae9b2626ac828a3756cb41e582cf1789f5cdb0ef9b5efbe55fccb31e75bc8c752105e40d0e67070c60f89f5b70741d0e0157c05eda2b8003d1b3fee4639b4cc9547c8b1c6f15610bf930992693d229441b8e09fff9e3e6ed905c8767c56620cb460094c1dc44f1514743fde58bf31378f78435a1e1b9595551d5a97fdb5f5520caf0e85301fd82ca7cecf9ba9a9bca34b380e155cc0a4389d73796cb86cb3de0f230d4f59b5478acb2a4b1845495f5acd80ebb03ed34ade286611dd9a1611d12c8ffa55485af8412b87e95f05fdd6eb337dc39618e0a7dccea3fea7e1fe606ec826fc31f9e247ef6910fc3c330368bb4f65daffd2efd098fd32d160c38c95238efd45307e8a6847e6cbd173697b8fd6f026a5f46cd70e2bd62fd31e8ef0ff49a84a754be0a18d883c9dfe06ca131c3c43660f311352c5db66c14443842d30eecec9e88f14d90669a2125b04a3105687a1202cd60b746527392575f207d371914e9eec888b3aab4a3ce9b56b9ea47a149393b98492376ae5dc2d7abb99cf1454902a4594d9a88be81675953d97ff9d2456252b2692fc85de8f850c64c424b2fd08367afe4c9a7202592329aad0abb44d7cb8695cb2e7e75564497562b6d25a183e2c8332d93fa101dd41537fee74ac5765b2136a62e1cc3b8d1db817917558d57b5ebfed2734147252e739e1c0c1dfff0492288951d70d861ec0dcf7aa6f4b6b78e887dcb2e4dc1f242a23da8d532ea6a08a6b0fef80a3eacec0798dd90260dbdaf7dd48dd2020bc69a635248955658ae6952bea5a434e09f1646fdc4fa0c942e9d2045da957231166ad4f80cf30111003e2b15146678704e01bed999109720c27400e5308394770a4d418bbf47fc76a14266f9903f14fffddcdbe84515c3b78222f617e908149f05d23626f3f23969a75bf812e8e1e46b749a9a7ab5dfaf9259eba0cd3dcd62499b5bbd03ccfd76c4d0d5565517cc4db3eaefac97f68e127987e2237e3004c77f9440f077dfad35917af3550dac513431c3b44110b2ce07bb25c1c6193167ac8ccd9547221e5eae3e2cf229cae7754f96104d87c12bc18a142bb8961315474a5e8a249d48ad0e64eef12d02746f5a057ec8f303f8c5c1d73082659e560d2007a27ed139668f27b943d0138406a7bff07a1c6bdbff1f25ff9ca417ebf2f908130dbca8a086e8252411a45d0782eda8c0fa1ee224706327bb10f02419eb1ef62e0cf844f2ca3a0b9caf3b71af2d8d97ccdcb99dcbb6f6c9196285dc4236c5660517de8863f26e7dae5c9ab17728eae169834e35c896f7d4954b478c72afaa924d92b189d664e8ed460e3c168159f49ab6fe1c062ee4d182feadb295c218fcdde799826341f7bf903bd3d885e12d5e4b03453d6fa61565fec3b616dcb6455e0aeb4a27299c82fbbc55ece23b6e9801e344796f5795cc16a70ff7e5c9c3d103fe07189372a52c1e61526dde4423d4fab4609fcb439c0d9530384dd7b66891beacf1ca1b801d76be981adf65bd7e83e3e66bde8ab59d5462ce7e00e0d3a5fe7d79428dd10b13699c0fb0f0f0901220f5bc32bc847724f45528d606b7f33a441b1b4cacc55fcc45316de752de6d2c0a87592f76ef7fb066a7c3f9c5b6c09532f72010bc09a5001d878ae033651b40d0355430291dd9a606a634d8c5edb84307b939cc632fdc10a925213da8898a57b26d8a6cb3559375f101055a340385b883338ce576bc2138ecb97a3d9fa27f48ef8f9ccba328fe0fb09aeb9b7dac1b937a3aa3265445590d29f2a905338741a2c1332776fba07f99bc55d28f98ba847e448dcc9769a1405abc7f2d53d2d342862bf492ab0a68506cfaa43cee48fdd48ad17e70958d6fa0d9a6a634571a467282dac889ee741af1d4ae31ad4a67871eebdbbf2c6cc252460466076cdbb17a9c2793972bd7cec9faa10e3f66aeef026ee62231c2d0e47a71c06d9d848e8babf7a75f67adeb1db85fb2d840af9964d12e2842af7256cfcc0122f7986cae1b02ebbbb4ccf470fa366e38563fd43ef6ccb5117c55763edf2a21629a81e9b25190423c97d8972eee1c4fc57543c2db9210e06863b895fb4c1c3c2f9d35a59617ae9f8a4d1cc37abcfd455328949744500fc018cbdc820911720445f417293ec34d9490092ff4e5c3df5102d58efb84f0ef95b958bd359fa58981c5092011e3cb046be9c1cfc572bfee65f5b5152a1dbc62300f9cf6cf17514e4fe170224784c90930209926fe65c77bb29861b0aaa5c7037d4c7ef64c3c8ed8dcdc7139acf44a86c9f1f550af2f555d9089e200b69fad7c6eb73cb7dade9d67ea3a10a8f0d60269c4d3faa5992fc85dd154d72dfb3942c508b3af3c3a9aa0878d488d31905d4aa269cd677ffd770fcb07e4d22e8cf79ce9391187ae66c98c53ae0896e101223786670d514e3f0f84564d0f0979cce185fe2571309077e81bd0e30cbeda38c6568e7c1b90dea4cc4bd77ee6cb58e6c03d793b9db13ad468b02fb5229d8853657fa24720f0e6c78c41041a51ab883df0a6c9ce3b2bb670b5649b1a797daf7677265df7204bcf8ba8b0408e70ca909a76f5b1c97243d44566008aea10669b140e0b4e79f7ad8cbd3512fe09624a19852db2097e8c858ecebbd3cc6df3429be6af506d53bf9cd42dbcf10df0fef5ce40302e174a1270ac5eefa5805512d7d0bb4a9f002c70e0570568a1e00c9d65da76c48a52ff48113e74e8c00b9d76b476469be84aee4b91c5a955f9a23deb6fc5925089839439589bff59fb4cfedf118f9ff7841589fe2afaa47196c6ac741d4876e9d21d146dac6e9f1835f3e4c86b53f181e81e358ddad32a2556fdd2c2d7ce5a7a3dc225ce7fedde77b5c6526352d39dbb6623f1ddfd8efef13c877f664b47e61126e2f5368c7eb6916ffaf5e567423f40fcf613ea72ddca5757b9e35607881f5ece136372628cd3d17207058f37d8c739dd4c69c0562f5bc9e1302de9c26b24ecd5b68132d0b3e5c6486de7130936a60f527e78d98d5bdd0fd05cf89c322ba22ab2f2b64d482ec08a22f4fe761c890c8b3f8965c5e71b7995a6d993930a2466b21cce81de8dfaadb4ef445240ab657c921355b85cde96208e3213678c6a8001bcab8158b228c69721d241f3267ff8f893c551433f043c5746c7c1397bf80792fe20d5786b93a6e6cb85da74b198196b87cb8855566096adfb790fc4f4d5b7fee061454aaad37328ae87412542379ead6f257a0fe659b114b06f041e5a9699ab407dbf16505b2e90efc3424ab70861b7f7e620b80333ce260fbd43e47d905fc70d33d2ac9716f0ea4284d1cce2659b0428b858273f99f153c635b8c30f105f6d00b527d964df68a4ba6b70888b84cf468732bebecb7c11183adacb4313fecb226fab2aa9461227345d3cb377f9a36963688ac1bd9da7c09f33596a6a2b5dbe4ffbf7f24b423bd21f3c1bb0743914ff271127ffe76a23964f2e8ef844919c052b799502dc1b411305ccae3394c092a85ab19f7624b72370de04714d80276f1e8fb60bde981228807d47a3f9eef5a54b71edbbd5bf8091cefd9b6e19433298c9ccd199a6187a595ee7715132c604397950ba5c6c0a1288b0378a5a9e6475923aec6798df492270fe6fd1a28936d639dbc3a5461cb3356250464b9ba096d02ba7139a39bddc2a6bdc9e4db183a11ff4e1c118b6f816cff94c77f9958571b065ecbefcc96859c4421fe99de80bc7dbc1e77eec4fedafdca4f00b8d92310b95dc7f93068c6f533bf97c0340982fddd61ea3b239bb1658aba1436b3005a4b5789154d1206a5195b2ea9370d97c9a20435458c0acc9f8ec19411267d28f7af071a3e710ed92272d4627c582426a2044b0eedd90b619f970a17627358312e0ebaed22360ec31578c2d946718b28d1754508f7bf6172fd43f75ddc8f4a92951d9eb05097b0be30f7786abf0c21c26f7717162790e4aa75743de104d378cc6d1203bd8d26f21d4788a2387acaba237ea188e9adc5f2b0ce1d358526fac8f7bce9f706bae9a8feab2754d44daae08568c6420ea758028721020841cf0efb2c0ee624a7e58d9e7e5f9561cc6a4149496b059045cff31d85a455ddfd240dfa39905d086f3bac7679cf3e9cc781f684d588ea3aa6ae5f29709a60155a17d007a2d5c815fb8b05ed3b3aabb48bbc33d07d93f6489aedc27e4f78f23c522f389e27b190e79f56f32ee229c8ba00aac4a3d16b9cff9260e780823e61127397a69b90ec7f926fdc509b1de8d2fad959b23f6ef91e0b23f625aca47505687d158b1f82eaba7902ef82fff204cf99c211876c78bdd45e1d81bb15d798c704521ce2b3a9045ff1450b6ced0d1eef01b88a2ed30c080c3f8eb0c5697bd531f47cd5861c7865988d08cbd00b71e39d311c3786d3be5b4d7fc402cb9ac5b4716360ecd5a91b3c2e417015826a98348b45afc215fdcaf7ead94ee05ee778408d5997f919c0428d05331fadabed31bb9fff6a97e21265893fb089871ef06a29b13d4a6a5b557b62490b42067c3b95edcfa0a92525f1f67c4f820b3ef8f652f05452898a3046f90d18e308d15d98ace80c23bf3d555aabd86c5e6c9af9523cfd6a4b3a9b8051ffaec14a6eaf592bb48e86245191824db9f85d79bef3675d28a9060c667472b27c8bf4126607ef5ffbf5d4a0ef90d38a5360fac9d7821db1de345a2a9af3166ec4036f4b9bae549ba3ec7c1d1d68c37dea4d23c4337365078280616c1650b60b9269a8696666d4e65ebb1b69fbd72d27708d09d5d7bb249831b9600a42853e127f91f06c671e9175d4363c47cd3bf535249513bb4d514ae09f16320738eb8c03203cc2dafa0355f4908868d931a4fa09af503494c224bd9c9c8501328c15ad88ae7a5378c2b74acf939f32d9c08f15cee0cba7f2ceab6b9296ec7cd00bd808d642d72f94e6be26282fc1b95647a737c2415643e6a616181e5c264d6b26833acca07ee9d5462ac6d519f7652a78853f0a86b70f32465713c866bcc439b7a29a80b1d048a56d15a7433c8151f9465ce00143fa2f73be42c5fb0bbcab5b1847958bc4f3292f7160f38f3c7f7b886f79f280f11cbe0d8259f147355b490c0bd079f68d23867dea0045975772abbd97603f7ca6ac4259e5cdbfa11cd7fb815a0fe1f7f5156b353a5d5c51101c756b4556a3ee3dd181b7fed7dccbf7eca10ba550a5f3bdc2341f784d69cf4e6633bd6a02ee95460ed587f4d5f204c0c331d61f61e78a11d417ab960de60cbc7ca8395087579d0c3792536673a293814dc37ba067b0e9cc99237370e3e50774102a5278645c351784c37bad56c63c40df9d37b448db2256abb53a212bdf04ab3dd0cee2fab1242bc0665b467c32b8573abfec1d4f4fb1e6a34ce0ba811459d8f2ee155e5b5fc96be8dcbcc2842d4506eb22102d7352f62b4cb3f683b7f6f64f5d43818450ff35c48dcc33a82cfe2fc9cf710383662fc184bb97d3fbfb1d15766b71d7c602458ed756eae149c58f3ce415555c5cde351bb937af80cfea8580b45deacec8d4def986a43df32739e8471eb181c1db984c0bde1339ec9bfbd5a043b60bcbed80308203a668071f5da02ce16c309f476da762f18b58804aadd3e4f4629f87daeffaabee17012d8d36ba6d4eab42204196a8c732a001d24e74c4dbf73bdf2aedcd56f96a72a44c05542acadbed86d5a2c01f30b0592183104210e684245e4007a868402418a334d502713cd3deb12d9f2763d946f000cfe34fb9fd66fe60b9cf2f04b79713b40f9db83839b9f02fedbc05ae351ae4921de08ba3d1c61764e99cd9b2e9f073569910fca54b332e55cfb92f87cb0dbe3a909b3d67058118e3112cd6f4a6676086247e7a83893a853728437b2ad4f8b62193410d73c9570c795c6b6a78e5d8a2b557b4481f72619006b89bf99844f9c4e2e645e3266c43b0cec7fcab174b17c29c2b7f8fde66efb8e53b067301274ad1b29a1fe9be53e26364a15d0e2b633014511951fa13afbe0e3b3642bf098873bb98819ef2210ca625dc4ec8b58ae7736380070beb8b7db683cea1428b11c87630ad487dce817c3392defa183753a0e43394055392feacd270165338507cd8360a0781e37ff8f2ed807990a5ed391bb3b9d7c74547aee71d60c94c7e02de747927769d02db459e88172f7602b5f43e6e4c07501897cf020c270801c0ee00288eee2d952caadcfef9971373d968e1e90c9c2fba90e1b0ae480a50811df7d97f1518040a830d0d43d7276256510f10c5406c8f71e99638d54b987f277f0fe7f16999cc0cc955c55edce9dcaba04a668919f1f8cea3ac4b0541fb3730140c40ae0fcf775f858c454253c38451bfc8e806b531e63f0462d8886a453bd4753a679ffbb59efb76f42418b1824d711cf4b498895da9af212d04291c40cf6aa270a4f6293d9e8f54b27a28d7e7ae40528d39a98784ca3d58dd22311fde9dc4fc2dce0574599e754a3d27dbb539dbadce0e98b48a08e0fe6adbd9524fffdd05d02999db8b2689f4df5696734c66e9247cfe97063036dd3f68d3505d18427995f5004d15a0d6505eb10ce6af5499e8d36070f74ccb9afee0095556222ce1c896dcef785726d06fb62873fe73d2c84d58b1b470ab92d2eeaae03ef4bd4fdc2ec80ac2018ab39b74889312713e5fbb900aec138365f15fd10555059fefcef88f1be22210db0a9aa336d0105725d358f9c94a1761abd751bbbb6254a9851bcd7463739ba00615989015ca3b861fecce77e489a5b791d2e0ca79303b1435c6307e544d3f2929ca50542846addd4bdf889b6901f305879fc4445c8cd020f19f06623fba301e9b63e8c9970041ab1976bbd6c1383c32a8ac58249a8a5dccdab5f9b3074ffe3381b6c05324dd7e3a9953f37c39418bf6633016a62dba65b8e2de0658aab83d75a4f0ccc09bf0fc79bd6f61003cec6ebbc6f181b45f21079eb77d214fa543bfe55b26a65c681a781ece317d09998c4175925cd73955291740946e7d0dce5460143c98c8bd4973d2d202700f5b6ba703847e02a636d978cfd32f999e3de833dfcea85cceba3b195cd8356076e2f11984d97797746c091530ba64b1be128fd520d8ca65e37b1e5a125757e4b9e0d410043e96c5573e89baf30e6390ab127c6a9658feb3d51ee60fc75f78abd5b6a7ddab0c31b0e8405407f5542212fd31c490744fe801c86dd360f504160398410f79dddfd28e270f8fa76ef1a68df7a25e81aa36e05c366efe98f01db83a86cb5a453e73667d2f5a524ad24475387bbf7fe6f8b09a540b23010b93e1ffc0adab26e8fe04b2c02ebed2139d8779d7790a95c66f8ac1afd158c9b964649a037c1dbd9b38105f4ecc58a098f1cf2d28b47487a7b2ba2622f01328138f5da31297286babe7967de4aa14ada2182c5b769c4cf7ef022868b9e771fb8bed583c7ab4beaaf8e187de8f0cc27edab7f8d8500caacb07863d3877a25116642e0973c23a94163e57f7050cdc36f676cd5d923aeea0bcba34347cdc6c9e56a2b9daae71bbb6c5474b9c409b55f2b5e484fbe34a2d3cd03916a2d8bc160174d2b3eac91fba1e39f021149688ab9e0cc2086e68faffbd594f3dc858a3cccee2aa5c458209412f16a07170c909c5e795f14e7c47385f653944503e3124a99cf04ac73ff70728c430c1305ac998b2802ad031e0bea1e8ff69dcc87b9512b234d1c36b4fc71979ace7cc30bdf09e0972b6111f6e349714744798c56be8db17a07b8ee03b68064036ed55f062b61fcf640e3335b4b370bfac45319d175e4a7759f2866b70df677eea096cb7d3fe225e675940b3ea25fe37cb619bc4be5d13235912702798f7c3cdc62b0e2623ea68017e6f1c4c2643c7680ebf89eb768a26ec48893f398ddafdec0bbb10c587d15a31ec07e8594cdab720d389c1ab9c1c1f93a3940ddfcc0520cac39499a2e639aba8aef86b76580b69956251cd94d3f44d5377f43cd55027932b4f0f6aeb97f05101a9fd58fa09978c8d4445f4668968a4a2e5cbd664b2498bb0d1e7bf9d9248447f69bf1f606c20f9c2b1f6b064ff9767334b445f6b8d0fc6aca45624905dbb15c35c992ba52ea72f21e53ec3deb6d8b061e7b42215330324372e2cb71a8b0c0757d1650ca4530be1aac514ec41dd78469db78a1a35b066a17b8723bc0a22e7340f1d557974121e5fa1eff3a4c609ca5d83464978dd7ade3f165e75080aecd962906feecbe70d36a8dd5bb9fc7b82f370dba2b7014c8c849b762a8bb9aea4849c2b9be6e7b39e0fbe748032a1a56911134d840d3c1ebcff0b47ac1ac331f987be6fea9c16d0c77ff36130f390748fe6455f4f31290a45736e7d2c553ad63adc01a82b28ef928768132e1fb3b3798743b9b05fb9a4e697c2741b38fc3ab08eba383fd9728bd2e2e018322784af76ca676307d867a246368248dbeee54e7637eab88529451692a48379894c2b6c4fc6a0492ebd985224888a751453bf902cf340239771a00011c60c819dd4dac6b33c3141e9593c5e05d457a0531ca2ffa6dd3ec7aab78ba507ab28a73f6c59d63cf717c81a89367b4bf221e0b8ec221bf0af0c7d98e4276841a3473a57f1ffa8cd9953c303aa6c63651dbc8dcb840280556d5de4ce31ecba43fcb17a507ca40f0d0028199858808c5abcc1408c447855869c67e1f0c2c15fef1c98cd6d576e7e8270779f9a2151abc435b11f2b79d2abe4a5f0a45ac82f3f59fb88944efcf0fe1cef5f1debdf73d19facd39ca2fdc28f1e18fe121060a91d8f045328b93bce508bc516651e0f11ca03f6c0461ac47f92a7b4f2fcd027f513ef9d60943a8d0412bf77060cb72383b2425632d6ac400bae9309466f293c091686fa284548f2187d2dbbe924777eb6403c0a765c637c34a953a0bf5affc9d6400f1411b12fd584e369c2917f59e2d5f2afdd25a791acd60f629be8f1587e09ffcc0cbcdb93163eec0dae580d5a77813565ca49911558c35d329ebc23e3f605546eaa2a0f308deb4bc568513ba7fe7142a0c6dea1fc7acb1dfdee6fe1ce63bd3a6da2d97789d39f051dacadfb4377b692b7657e50a5e07cb72fad4dda3b9e9fd67e77889b8f5f8369b8d7cd085beffcf125091662b49d59ee298ed5b8dd4a28d5745fe25a26ac6de0aff9e830ac3ecfbe6c073da498939c586746c6af4569ef2ea2bccc7661018c9eae6e9ed5b858ce587799f2ead5d8da120d90a5b115efbf1d2ef66e3273f0d1a1efdb6916e75ca009d969c03f18c4e34df57e2d8a082cd4c94be7ffa0dbef7db49b256995afe75dddd1143230cdce5e443c53c508eedc197e9fbcf5cdda2d81e04ba14fe7365af5a2463b07aaa9f1eaf7a02fe0f78db35a59570af40e0ba10cead7c013aa828e5dfe95ec88ea7840359607cc773f5ae4b12646db94a8c887b1be2254c8a92aee4606dd9d1d83660aeae1d1dec99e87c3621ca5cd7351f5e1904cd931390922fee7aa9534805c5f63211df8b933840222909aa05be6e2240f144d5226f1069af4d352b5806cba6c9bd5001b05788ba2df1ec0bbdb26c53063908c33133563543b819abf16e72cbbaba259a3d6dceeee51c62793d58e0a5a01d796828089e8e88d12ec30d12841478f9293b8bec86f54e0b2d393e2a97da0fc3a825a37e6cfb2a1631d8fd16fa314176e8d0f6a3a8803c17b81ca87960794b62d6b7ba03e91d91cf1a80d881f8547a3e7ac09e8eab78f325e277319eeb5bda2f239b821638051b9cd249eda3d2af470398eff6c2574e18c1a93736b2ef3d7e728d047b667d6b47928b5e9126192be869c7d4df6be3d05377a6bb63e884f886831756b291c5aa50ca2b9dc209a86f909bdb61238ef01ce7e62d9039e143e98cbec1060d8fee498781781a951b5ea119f29cf8ffb0a66891e6b1a404207b2c98dedb4fcd685b3d459e2360c25c1a94929aad06e6fb10dbfe7f5e32c8e32c1bfcf81d22aabc4420a3fc816ee5a931675ef39f0fd81c910956d2a649b789e8594331251b6643847037131fa0e81306c7d5236389ef0b0c4f92a3ed5206260ffa5643536bb5cc5f7717e9a163d8cb8292a346fcbd3f208ef74200aad6bcb1cd552459de6c1267f066ac1428a67e21d323b58e3609247387b41e6df6142cb9f0092f925b14715052dabe9555cc42530304ee9463fdedd645350271af13817d1617f63e726b0900de03803bd150f1818892d7c5ba73b74e0cd99d15da06256a4813f449735f62c930ff0bd8a806fe3cfcdaf502a88460b3f61fce77ff1bb290220a773851950fc78280a766c1d14ca2a2bc8db95958e053a6ab217da0c986edb731618e037600a78604d5f81b5ee9d0fd6358f6a01ffe77fe90100907f261c4dfa79922624f9e6ac78cbf82df766786340060e179541f9047d7b35541945e39df6f84c2573a4f3169a0c264074bc51c09e8075c3fa58e365f5829bfca0c3d4778fa694b8753c6012e1fb8b07338648c784530fb26ae32836c847e2d9fb2cfd304ad63beabdca8a9072eb1af883487dd3ca16e6d62906b9b223545799bbefe1eb0b8e0a47a4d23f917b83a1fa7df168696c97d4542040c87c2667fb510e51da316f652194416d3fb7e4c02b291e9161e7c9409f4efb0435221dd3df136ba7e3f7c0fecedd33f6f62f7547a7295034a9fbd60647908079a415a2632a8fa9b95e000044d01f0b7e093bd88549feb60a4728880b2c9b0891b706302320bc9a1ba7420d0412da446fc968b8bd0706e1d084b3b8df25ba1e92400c4db9fad55d19d64620adff473ced0f53d1a42d5b28da0d26093ad286b5c15a235c70923b07feb0b73eae6b75ae0c22d11a360aca573c59d793e01d5c974ee105c81a0419f3945b05d278550cef9cb27503be681adfb04b909e6f7c24a4a5810bd87f38c2e88793c79ec11d6923f9f1792588315cd6d55afd423964272b700e3bc2e294215e39aae98fea2ebdc675378201111a28b8c90c4e745f1bdcdea52367efa5b805183707b6281908edefdb3188b3cc7dc56b8c18e04aef342bc741798f38a599dbe9ed0785e6b206162fbc55cec15a1034b6129dccef1eee6111e1dce675e14200033725365c3aed3096f7732335d22e44431446d217d59ca9297abb63d65b5ddd2f10f74cfc590f5aa4d4dcb252e051c8084557856e4ebc798db8b297c06f0d8b1dbe77f5f273a7e12db40747ef0411ab9ba798fa70d861d3dd6543e552fc96fd7e6d8ee0db3e1277a43c2aa054fd8ab06ec4a8777aa6886385fd9c5f727745bcfe389870ce6a4dae02145ba71249dfd36a9dfb893bb274dfcabac7611fa58b1725f4ee26b46108deafa9d4e2dd32b52e1c4c92b267bb6ab4c684b7da315b7034b685bb1fb92e9bd5c6fb2d8b20a0ada357d2475ace3b29c99e4942ca0dec866c5e89eb6c7809a557f07cbbfb21bac8ffb9fa78d99e1fd3a2aa0416e6000c70d9b99e93f8f0fb8ed985a68577dd988dc88d1d9304b71b2c2a1e60476a04e6b2b66fd7039cf3109ffcac50de51d4a0b4a9b6a6f01e7db54c8c845bd0cab398470c0f6fad28f4b7923368194b409d23b6d1fe7552e65729c1b12000c37eab6afdcd7eac14cd34561e85c4471fb5ac2c9fa1d73b39d66c079a2bb054082fd5e1cbda720f34ad2fc8b7067d6cb9646c3567e1ea9e2a40b7cdfe670efe3a8e7cb737e21975665cae1ddc633db02c38bf6e8ace933519ed364b249ae1b4e729769e1acb17439749d8e478c34c200bef4e88773d6bab5b2f27fb0b30a05f431856a1df730ac97708420cab016cd79ac22c29a0ed3c9eac73641ad5bf60a260d969fcabae0949b2d0672c6da08e12e27dae2243e4312e0a6d8765f6ba2ec350784dbcf3a11d04072693e4398582b289103978e72963ee3c33cde1b6414b669662d3efcc0326ee4abd08f32ffa834029249466f4174ac094867ebae1ce6d3401f955244b9ae42bd2beadc312447066cb58513910cf1bae09f8e8a434bb0f4a9cebed231d6cded3cdf93ad7b57c619d8c5016e99575933dc70daf9781ec4c5959844eef00e6250913929875a0bfce4fd41a5ccab537e1532077558e4ee332f04a423667b7cfc54e7b875f0bb015f9a7f4b21d1c67f074d7af6d5252efe1d5f01c3ad68f8c727dc50666d03eb4e58fe4701c636ad52916985c542274aee8da3c0278412afb5a7c9e187ab3b247b4c2bedc9c9927a933162efbc550a6c92ed23d6842eb2df46e4d975f2584526383658459819ec082360ebd1b2032bf6a520d1c0f6d4313ca680e16d17f4ce9fa71090ff9eca25435f0aa6b92ecda48e3464106645df4dac010c50ca1c45f9bc31dc6f1b78cbe5bfb6582e18bf864402735fa5b4502e626aea779e289cdb91d8ecfc96dfc5be53e4f0ce64c36d8971594df2eb66858298b963f0d1c3b298d33144d83f1d3616ff524339057fbc805eb560c89afd7bb21c52d3f6feb54e8eeda958460ef9a5aa6a78a02fd852a24475fef3d317e633d3ff61436316cb20083ba592b5bc7d10ec15694a5d35516f0c9198c8a5e8055c3e3e1bcfcdcc4d728df6b0444a2f58472995465e9acb88edc4f571d03ae4652295d79737623135f8c7c02c3768a60ae979cc39a4d8ba12010bec191a0baf713c7d7f8626cd2e1fda26c3d29863d7c90936fa34b1dcca14161e1bafceb13f96d4773a987a92b27f21a29523931a30a10b59b003f336040648a71a98aff1d7033ff7ec1671635c35e20ac32d469338443bb9cf6756f00de984604913b92797af57ba4f7e3401e4d4e1550fa380962c7f21cfd8799b47c762d7a1feaa648addf9d213219ea2ad32d9e1e5819c99308746a5b2521b622117f71d6b60d73ce0e1238001e111579f0192f44da141995cede0b9881f667ae8105fbbcfd89140cdc156023259a9253101d8b3cd91cc9f2a5fffa3894a078545a42dde78ae9dc10a822633002ef6396d15eebad087f08b24e8d4c3ffca6782d682229cd8bf36be6e6689fd8ee2fc359f7374ce2b5b5018bc3f32c20f94a3a5f8612bf54e1c0912bdde6dc3b650cf12b8af7518340c92993746aa2f2d06666b2e8e73dcf5398f0e0aa4523b79ab5e6bfe5ec7ef052f361b24199e90b1ccfaf0e259c6a4ac3a2f7b86e4020508cf50702c73f19fdc015cc1a8c99f9eb935544fd395c0b6c59bb7d5685bcdd26950a58b97d3b93755690e23fb122054a0a6a347c90a0a503b58f2a35a9ee408cb048e6075c34a80b8bf101ac3009790467278b9e2e158b9fb86fe7940dea2ff922c45a1bae1b9d83da8bc34fb86f9c1935a9a90642db71e5d418065f3bcee931e1c44a8be9b9fadaf6003db1c3f5f16eb3c241cb1b1872a81a5ccdfa46e504b8dd661e914e56e24a59e1bd05e89ae8dd05b99d653a396ee53ecf33dc1c7589828ddf62cd9c1269e2a847ede7dbfbe303786ada3b2783162e1b587539c2010f87f0d6cfa4fca94ed2f8c26a144619d8d69a69a622012339c114a089e686d14ceae3fcba6fd41f56ef91bb429c9865da4f23e129657d602474a1351771b5224268370cd9f8685b5a2672eaa7e7c8d23ee92789e2a306d37dfc550a2ef30fb3dcebf2d9afcebd9327c00962c9664608640ad781e3c96a54d209460c3fe0d7e4517bcccee3472d469b22a7ceff1afdb456dfa7e003c4d24ced68f9c06bad4efa3f206b07c9fac6d46c4cd075cb27cb24265003e41a4a81ad701a2a674ae8ec011aced5075020fb1589ff2384217b73c47b144964ed3960e06315f89fd3a1756a49821241a8cede37b39c43ad11e89c9878cb3e133de84f1b810db2f2f808285183a5a42267f2e898cc81f468570c9d085bd2f93b7fb355069e0294cb412e54960f8557adf5cc20cf8b2deb656dae743997f1a4c328511d980f33d13405506bae355fb26b83f5a6bee63fc34d1da27b04231cfa930ea1706d4b60ceba8155767293da0f770edaf29169183a8b5cb9c2b888b681dadbcda42d31e147951ecb26e1e090ee7e0c5b9a30668bb4cb8543e5a6b3ab463d10eeebe682b78c53b1833cb699a145816ba2082583a3d918838576b22ddd4bcfe282966bfda0d106a031ea6290bce0cf07f50133875954f8f625cb6c8ea8d53f71d6c5574208b5a2d265e86042217fb722d9e662b4e02","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
