<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"ca1ff111b869307c2c3985d60ef9c3786e658adda49169313ede3c6195f59fb7ec2d9a0cb3ee439d740f745e7f21d8bcaf0db518f1ef7b8647f8a0b51e50d8b1b9dafcf3d94b028b78c1d87cea0775cfed4cd663c4e9fdb250634a76c0b5ddcc4ce5a71eeb3a3313d6fa7d44ca1c1f4c788dfa726b30e80d3b9a83890d2b11212398fe0097f3c18c70b207cb9833eb64eaec0769f0fedeff5232d7da3f2daca855ad89c89ae48e9a466d5afa4c6d110a6d8f3ab2946eab1047f28910e6765a902e8dc01998ede62e31c6668874cdd9f631fb713c74d17691ec3e1aafb6bea63c78684854958efd25df3984031d20719741126fa105fd09de62f90f82a9f68c4ec0f1c54cfee643ae0405c3a8800d7a957664cad3eb477e8f683d631afcd68748d8fe7ae040b083a0cabca501f08aeeb904bd7e438de9b9e3385b34095ff4ba43422dd15cbd8828610b5c31988636c1b99118738eb69ca2b2fba65b0d1137ee4860ce2313983dcf3859f2311e094e36dc565fb2c128a84dfa7030f7ebe09c99102c98edc1bb8a467a16d6c9f9d1313c2f61fd88eb6f0e702de72db5e96045bf19ccd299321bed06ab18116d8df18f5d59f30371583645ca75777a66ea9c65ef39d4c757df8e7e6f52551985fa9d1792bc415cec3f583899f54ec5bda32364ac21aae9c48e7068b211a5e71df69b161722113651f9341c35c52238c493a09726897a984ada265f5395058a49ee687a9c23f308e9ab8a64ed87c7461675fcb482021df8b184906c6b2f0f3e36a5e10e054633996eaae1adb4d7033008c73c077a07452a8e958fbd94f94323620ff78efa2b67cba79f7daf041b7c865c263ee59b54d3c022d424c7d961ba19dab61e44ea73dc857ae42b10fb704bd1bbadd7acabafe9b9cc507255e55d1bb7f41d197ecab4d5d44621e2e3ba21031fb1b99dcb984a084a8e2ca4c87f1b7948469d98000661b4411a9efedc241ea71c4983db07901ed1e493b1c55f9a4ecd8ac3fd903ab75a3671a2e3f6c48c5ca610d50f0716088f908232020d0c2d41a478b71f216d64127a8f80627a431e1cc99fab2ccc2cfe78fc9c52dc012b4b51348634b079c487bfbd30dd9cf7ed16cc306b30526c5b67cb4df8e86a4b5ba784c2b9a1db6f3fa17a44aeb25950e724463a1591b8cd2bc47cf2a129d59e199bed8d9e46f40dec993c350f7ed1ec5b7efb11fc258090adf21aa9c1b58b29422bdbb19565f1a62bb10f5b326a07b3bd0e84a8f48fe1a1f3912ba3dc015726648d4e4b8c3d15c0fb0dbf0b63d53937f3dfcc95ac53c6e71554b125654e06e76890a4aafa3d5d8399746079639cf205689ae91f9043ecc9a805a684c119869d2bc9316f0d41bb8bb8e40616b00a0e8d372390aa72c530f6639313d6b1f1d9a6d0521f6b6c5002f6c417c1aefa30d2d57372522bdd195a7296600ac26fa2e1357ffbd15bfdd8d63ed11773a9de0b577d6aefdbb43cc4b986870aee2a6df019cc1f1a7fef9cdcff487c8d154f8e547e37e5896cdc0ec20cbbf5be37ea1f99127ee44acf45a5fb540d914fef3b52c785518da558e3d508293fbbade92dff73a55d88b2b2b1e24663ed6a7e2633e54704f293a5f29c2e66674d6dfd14b2a1fc8f2bca449f43bc0774a3026a4b8e900aef9a4cc3dcc9e049916b7495086bf77c1f02ffbf9a767c9319743a70c7f3652d11a66badec6ce86f33bc1cb89469d8c74e668ce54d970f6008c20673e81d965c927e35370ed2a88808d35beef6d338655447e9cdd535fab08930fa17057cb7eafca5f3d525d0f05a121545a419ed4a61d8b433e00413183711bca3602a32cf073c85435dc3cbe871feac805e68676f8334bba70a9c5de9c3aa72019082f021b39e90451e7132ef07ef3d2217815482cf1190a413f8b14fd9d2782313b5a0960dddc5835052a7511607d5314be434a5fc5b0eb649cc7407a126644539a2247d144245026c5d9078c1f5b7ffd9163c912da78b2a56a8ca627f89c0aab08a361af2956a0242cb2bf37a31846ca0ff02661b99d6f09b6545d48f309e623ac939123e5fb45f7dd3f949e5b020a51ad491668fb22c46911969f5458930ea1641747925f7229baf3c890156789e9a9db647215aebfabb789e27868e30444a2e76dfd6dec130b27e606567d468b0cce70561285dc98f598298a95e5cbc22b49b96790040b46d2c29b22395b596a66d1c0d781e86c9fb755b1712d57ee117b830126bbbd7e48288aad09e899a06d7e5c55d791825276f6217e0b111eb2a8762c00e8b461aef62c91323bc1d56c32b89e2ef6a088f87855073a2daeebad58c9220751bee11969c8b6ef1878388aab7e31cd212cbf409da5707d4be4f012316d7736e3351bc724af336467034adb954dc72620436d804a28eb485b257f9d040de13b13bbfb0b9fb9060b432f83fd45deb46d1a2a35af387c83b7c5152bff2da94ea5cb13749c9abd8e013821f252873b5891a11c3d31435ec5729ed78656a6f0257c5238d9946659c08ea5cf2f053a9745cba09db26942fc8952d23af24233fde3c73303c6c41fe4919f9fdfd8d417573da20271fcf4af388ac610e42bf92d175be31904265de87292bb00b77d8534efdba65f6df23712e87bdb312d65ba43bcba298e1f177533d570e2bf70ec223d4a957498e4de2fdb633a384d86f1e4eedb24cd75fc5449ad16c0974a359afcfc27a70e1342c38fc17b03178e1dca2254d988883cea08cdf45b453bf330e3c9dfd3b243ad3dbb4fbe8794ed60c9b03fe14a5b9749327d8cb53076aad8cca9081c71eb4ffd0cd4f2706033ed9eb693fbf7186dc6159de17e1c816ab81aa602e1085d2d86dc13fab47916ce7e5e5be7f42dabd57e6e130f9817d15beb1f1c5fed79317b3e22c43f5e9d096f9d98c4182fe2945651591be23b4f57f169a374d9f922c6648cdccda0c9e5fddc095af6f335997e0d2aa8b19052a7d65fc11be4145aa378f874ea7a04c6b5cece1f0d752f107d0a9e252c6bb8cc31c5e828cc9bf68aa5ce5163def78bbf5228663473e4d4bb31f83ffdc64419fb137d87d92d707f062ee32a3490bb7bb981be348e7682b9eb737dabff77c59f445a4a75d85ddc841e4dd2b4ace54b5b9574541442309305e607b75f3e742476b549294abd75e290aac20bd329e7ab8082adef17048e3bbc8a7e182e059edb0217aea77272115d150e5db0b126e7d8de0f65d9e775e98b0262d197b292352f77c8cfa9e2b2f822c20b0413bc3b867f0ff55758b1740a9f9d863d7a4c4f8a050979c054c3814b9f2bacc84d0ddf81044d632cf70e3bd4a79f467348b290c9170540ba3abf54e5a54c8419319b6482f84981efcb3cdf25edba5e6455b92a674c8c7b39a137caaa84df95cb6571b280367fd436c6e60d849c6cb2ffbda2654a2710faa0db689c814b2eef36b607605a2b8c05889896b11055ada4bddda41d9bd473dd55207a751faa401d7c2cb23ab106baffe6db2d0974e48bf57cfbe9c9eebb71359b52f94cff419e366e078b687683fe0fcd68d9fd99985c6caed44d2c2d8abe7c58a6624e49af700e9395e8f8f9eff217cef5cfe27b404c748c9ffcc2960cb6e049c0bf877bab59e2646df7da1b68a242baf32a22a3e226e20bb6f3ef5b9f8f992a848322b44bfb3bf2238b26d3d4a5982315720485db5590556b4f9a03ae5b33f0494cba39b1a0fdecdc9afef823a5cce416fe47ecc1e79e608fe57e86f9fb11977d8e4da46621add15fb2b35ecdf7ed8e5bb9963b8b238761a7d8045bc18a524eeba6cbd2a1ade191b907f7aedf97300416fa0d9aafc7147e258fb3c28dabc391f4f5c954e0ee7f009d3b314633ad729f220046715042941e81c57198bf1868ea61b271fa0a9fcd6585c26aa7a83a2abd6a26000e9f0167efc7f6b47c0aaf457cba7c8efc99bd5b3b7bf71bec58426c7aa3cf5e4e381a4b66a80e8d68dc98040752bd08c3becb0d533a5a1878450d2d028b02b644da86fd9f3b7a90b455b12be2a94cdc304b2785c5a3b52be5b0664117e7ef8b0aad78485e55e21c069f4a8d2a842700be160e7c152caf5c1bab9462164581e90135fdd1c8c3570e26a2570a18df8cb8fa389908e594c34c8516097b5e036997426f49bea93d1b5a2a34c78701968492a3c8cbebe60725d62b57be525d4ad0f3191d028617d89f38af49813aff4b938536fd5e971ea1183da1253db26d7215aa23621289ef230c7abf25bac380f29a7c1d4a39d756e6b26d034b45dc4642a70de92747a8deeab1c2ad5997fd4f7881f5478f1a5fb5b58d3428a6be641a1062bea8a18f3c7494065799f25c16fd5db9ec567b2067bab005e24843d3f2b7df9ee451284cebc2244a5ba6155b35902be6dd156a3a8ac4797cec3b9ed8f6c868e93df0a9e14518db678d84054778897ef3f66da0ed60f9890dbb6857c005b599ce0064bee65a357570d650c3f534a3f6b94037ef81f19923f9460b4cf1edcc6256b9329984bfd5eaaa7d30e3fb31e58d5c7ed7144dbcebe066a54707793145656afeccdbec7537475c96482dbe510f2fd432e4a119209f4c4f6fe7f2195e83e43f7e0756dfaf80338edaa4ff6078a59c351f7d97dd6665d2552049da63e84e753142816ca0f93d99a3c5c4204cab82d70f7e4fbfa613e7263412ad95b26dbc96360ff88867abd6d6d655a6a142dc62d1efeaba6482d0d3236946b24916bef83653b99cf40e070ea574da1e2bf709465c970e2123d6463c9f47a5edb13ef66f819dcf437c9b50ba3cae737bb759fb62fd96a169cf5ac0870b659052def7bea9b1556de7f62a083d9c302ee8580a42ce170d46920cebaf4d13b251a32763e8e0c8ebf868f15bb46488e22ad89b86ec984a4e70f3f4a2e5fce86fcfe240bcf9737f3e5ac7afe9f80a49704bcbf9d2e6594d9ced5874e655d811889756362703fba9a19a4a9a654b39cbf0ada1ccd7ef73339c61fbb0bafccf6392bd69908413955a18c03c092a7e09392d064250369cc685dc92e9ef44be181b7c61d2e6946623b683aff248478185fdd3e937c15b5c30650555139bb511aaedfc461640dff54546c8a0d784361a86117ead579e5d1becfc75599fffae4778c2a99a9c985f8d7c2f881ba3fba997e7df2d36ae306a80be5b32ca26870c3f7f376958907e7e07da320df06caf866fe5c742400f9910af89187987eee244862ecbf2630a65c163dd105cd5ddd0367ca838f579beb0d4f2509a4f9f7dd0b9ebee19757c21251c69bfba94aef9bbb112b14fb5c8b3420f85d55e388be68a1324549d7347d86b8691a0864e60f4844fb1f6b7731819020e85964a5b08b35d661002d28b1742cb486feba1f279e5d51cbc9921ff3139f64968c7504adc6406cfe6c32b5534f3a9562668ec63b62ca5e80cbb6e5533706bfa9a3c98e82f74359d080512f828b643f569d482497cbe5987a847cc29475290e4bd2bf11b44ac27bd23cba35532431c2ede41738dea7f03ee7dae1cf3ff468f069d9abffddc9fd228dac02a33a441276ffefa0aad2403f3c1d54cb4c287115f6fa3ec99ee638b0e9e8de265a2e16e389f44c65c48f88bdc992290b698930c29f860c67aeb08b036eb2eae55435d768e5cc3378a74c14a24567a35b0b624e12f5eeace0ac47dd9e61c6437bd54869b0453e6c52f6055a6c41799fc7b0666376066603a6f1281162f7756e376c6b221122489a6df7e311f43a53407f9565775e638b4de7976cbb8158c25ae950a217f88e90c23220aceaa38cb54af0cb8f11eff785e31f64991e2d59ea2dca2700a6693b1224c32875f2dc56ab4630189e514086ab9826d9afd13942a27942f5f2870f6d3328d5f4b2cdd7f4b30218cc2d4d50c9980782b18117f4fcf99ad9f11a473f5cb68d3e11edce117afe5f11940b7054c6e560585b4bd69ae6336f30e07c1a67a781bdf9a978aeef142248b7d5199944581fcc29699c128be0eb0843affd7ba88d4a9fe84c90f56798e64358b6f7c066c0807ab9170247fe51033f7a3c0030fa63f05f25e15fd56f158689281451573a87735828e8440a85ed73dbae7a57cbc085a80fbbeb22f4544ececd04053e5e98b9ab184df3af0a2bbfafb7f91dd82fab39e132fe6aa4064a910cbe364efe3c7b4e0300702083f893564882470e54b12eb32a128a934ba724b814d37b701ca63b052a5fde3d4a567dd1eba1c716ef1ef386a9d8ef3467f355aa6ebf21e1f69d8f331681e05e71482c23a74c0cadfc7c49e21d625d4360b35421a6b7234e7dcafba5ecb2301c8b04b8c91be217231180b0b9c14415a86236ad25d6a5792bb00f3fba7c6532aa92c7ef2ab11c9a749e6ea379e2ab7f2489109c162decd11779692d79a8e58681012df19d97ceb92ceb4480247b0a43d35b909814061d34f34e124fc6f02054e6c75820a7e9d127fc8f3b16ca7b71b0d246f7f46154a5c59b86c6a776c795f4d3cf4044cf0571e257a7ee298907d0e629f681f73ceedaf2ae6c3da6675c26673897d3f1d2c36d3d33a20a0fd1458aa4778b41bae95842b4352e5ea14513299ec82f4279d10998dce133cf8125b9a882828179a7f887d7eaf7dd0c88c448c363747334cce6db4230d2443f2121e580b1b896fe6f90b5213990b2902cdc75356e0a22884c096007f49bd19e230e568f7faa428e6c9dfd28ce8783e78c5582223c3e84d88984204befe15dd98268f44261500a0c221ca0d3216f93dd3a6b642b9312a87d67a39e09b3ac5c6f727aa59f7c59a7fab496c393e6386f26186a6d341e96cff453558138d537e27a9fbf70e99d69001fafb29b777a154048d196ebf6266db76162b6744edf81849a3e3d684b7398f2bea26741d74fd0dc76fcdf769f7a16106c16d20acf5c009798149cb5d7c5443106841676f077ae7706cfe59a0d813d9dacf7bda318245dfb68e7aca7497a0b965dad6decffb9b5f09de8ff3b4f655cd7336848e0c47acc78710ebf889965ea5ad9731eae7243874ab053292a901c6f8f92269b3fbfbb90c6bfcdcbeab6a7841c67a99b3cf367b1bacd9c23cbdd4d6d196c1e3f2da8512fddac649c65d37959e2ca9a9eff1af86886a7b4b8234745350bd4cf07cb05187acd1beb5132092156f9611cb3f860e32a44a7636bc902d9fcc8d3b6105a8799fb7c1f7a545c7d9d2de945cb9501c34d8feb25291c1f8e9ebd118b82c776c6cc194ff947fbde082d0cb77bd823837f041e1b91cecb0d49af95d380e64bed25e16ae21fb4fba64f25c53fd52e0c132a3b15bafc535eb446cd20eb935f22d328fe43396cb70f1caa587c5e7c743cc15807259c17c5ed737bf390913ca907946e1b4ffa8842579f55797f98dbe0bbe9c156e77c2365679a42c90fd905968a73f6922a12509b514acd9afb310e2e62d4bedfece3b39f344bce057139eb2055dbabfaacf15f942f2fcbc9a24a3c4ec58c6c30bfe494a8e8d45bc1eea9d7d527a2e7d0ff89873c5ae0680ecb8da26710ef7e808ddf4e27cdc7fb6fe336d93ccd0c0e20fb6e3f43e4c7945f5aa69a13a1a3573bc9f237ffcc864e49a6c6ebe7c8cb72bef4a3f8cb6af261420b6702567f1d2221005ab57494b66d059b36543770bc29d211a9b334bfd3f181149380ca609d6be5c0ab3a271bef12d8e6225ad27f64e8021c9c72f7cfe34f950b9217706bd1d7393caf6c37d070872089bb59ccfc475faece3f7e224f3ccb79756dbe03fb9828f80b80739594175f3ce5259aab2a7c65b1725e6309e5ca078d7231fc4d504175ff249fd55fa3530869c82322d9fb59dbdf303e7df46d9949ce9eed463345d86e003992e8c4cee97ba90104c7a5bb0b4a05a1ee493fafd4726897df3344c0814a9dd077edd4d6468b9d4a2fdd306ba42674f5780343058eee8f1e944eb3879debc14c742d3fc7ae8e1584d22221cb4808de0e829e90c4c4a4ab9f8dd1ac21bbc4631f606af7a35699d9f35668d1c1b20956c8f44f4b93b828b5bbc76bfa2c632df6a9aea83c0b86f4e790b52a21deb6d62d9eb3c30e828117f4637777eca51e49e6c01581d9ab6782f3803e183453eec513b82143cc7a095391946acc0b42224fd65b30d5c7488fc44bf2c9cf3094102fb0bd489bb3358cdb3ee95d1d9d4d0aa2ce427efc8c943ce6c4afd996c7b4ff01280b9a68aa1c2be7afdcc3d2c6d525e6c0cde357d224c31031b2b8f2b8a1895433d433c9d757d253b4f876da57075c7e422e9e717bb103b8b7ee5a559ac32bf2c64736dae89ca50a41d92718780cbfee96e8d7f03f31a95b2ad8940fa9fbd622ee47b9869435199e4598f1dee0cf33ebf2dea1ddb4f5e8cff068136cba87102d9dbee2389374cae91045026f888f222a312697589ad3833c231c6e4e4058235aa5b9e80e358cb4df362f2c1f0b6ce0e4ca16eab3ae8ead49c65ab37ed9467d4fbfb9f3239ab2663112b86db6068b1e29c9e0cd9f635ce0556ddd55ac924bee103bdfb743efaeb74acedc31cce3dfcbd6d26865c973e9ff350354fc6182f079fa66837799a504587823bd1770551063d6cf4fd1082469c0437c3a961bbbb05f6cdf072e8ae8c193b7184f68bb2784383f716256e42b4a82ac69908e240f5e8e3c9fdcd93026f2b0f2f79741ab85b77eac9a1c84d4b1b036ec9c9bdecd2c5f3ff01d9a868aee11ba591d336ce2330c83eea96f7c630e5512c9b68cbcfe696d04527858e084c4ef16a2f62503b3e73859a74a46ff9bdb30247ec87af5f94252d925df7faaa2497d644cf710cec63f14fd063384ea1eb6abf1d663e202aabb49341afdde70b71f633183218103213bc36e8c52d17b253f61c283cdf1306cf2b305f46702069133a50737500c21cc3579966196eee273e102b2672c49daee9b779db07c103fe99eac86702c763fd8319163f18b52acac550959166010253f1af81741a5bf10c57dcdeb6f647482806cc92ea10c4af0e3afccea470322021369dcdf31206935ee5460fad4297472a92b0843219fe8bb30a32ac101aacf0eda921eb827e7aff65a3757171eb0f53f6c78c7c89152079bab4ad9174185119ee01d5629262ba50e3a3772d97c3f273c5bf28c150622daad67747890ed606971df086c344e581f0ec22e7d3c83661581034776a54dfe36dae30a01ee3707dcdce238b7169ac2f78740872615f1e72254fc31b9ba34912e49b610a5e57b8f17dfd10b0d7b0b36d77b230d0a9eb2653c95d63e20ad069ac3ac35bc0bc0bdb9307b9f775a7058cb436a8818282665bbee351ddab2143eade1f9c00f6139416269fc73f33871a143cd43a6d49f63c66600feeb1b6129c085c292b4729e594cfb349c59b918c4120889d1c5882d2de49efe0413bd6fc7be7d439b98012cfabc49eb777cf162866b54158488877084effa365bb4df11f741b2a1d3b4aa33536395782648e60e54f1d7ee7a14574e5e18c81a4c321daa324f10471d946a82b480b0e558923bbd1f371281c4017dd0ffd246e23a8d1771ba3fed1f10f6d7f9064f7b5317cb7c664c3683ea5e667ac7d0b3132c2988f5c93447b6a7e3d0c839a45f3588ef8387e439679eb5a86acb7cd396f06fba66bc200c9f50977b2681237806c2158164f794b2bab3a4714dad48c0d17aa3896f379f795a647e91c859a7134a6c17f3735c3580b31fb61cbdfb0702384b67d49828c74b698e29310518562d9d36d577c4cacff63c79ad7af96f9ca4a1016481cc438a176a9b65a75a627875352fcde75220520a9b7af7947f67a05f2a3782c25e9dd3ab5ac12ac3d4a8c8dd6b50e4188ece3a232b7d8beb19b18e8df1efd2b5447d698c27452b6a19de119b43c7a91a59d6e000ce53356aaac6586ee55f62c2e871cce791b6783ec8e02c3ae1ad7ad6aae0a1e9dda0707ecb5e6a2b21cf1b99b7291e53875e0e2ece29073a580c02fff7431348badbfdb2715737b3b8d2ae3cfc7d3ae4b11c15593b22342383661639d1f3e06d06705794720cbb6b4979e600700167c9f21fb5947fff8ace23e292f18f477bab1f5757a58c106fd2a1268c256e802254769560dd79325f8c12cb63de73ede6e72f969be055992ddbd732bc3f3b0ccbd671df324509a2dcd47a4660e2f8d7f6ae8d06de6779bbfb4c2e53c3584c31154d3b27f0dfb367b13e6772f2c9ba68d512c6549fa3f17288f14148c9c9b92fd932444533b5e2b0678f378b5009a4f7fcb35316273a5668c47b498ddfd1678cb1204cde0f70bb50915ce109edf4849a1cc4cebf651b311df3305d067a08cb6d2dded8d601a707e33120f3c42da1b6dddca511d539adc4bf6e7f4b546d935b39152053caf00a299cd55819633d4f33033b402281f9791ac4ac0a1feb1123cf2cbfea7dfacf9adb8b3de85e8e083a702236bdc178ceb734be456c2c0e85f07373d1ce34a372387b91a476464e183807e755ad4a562215f1c8cee9a6c93e0126a9170f885f0e3775adfe1863b11858c85a79830f82e139867526d708634ae462b5e123ffb7d3321a6a569d3deef9e4f27a3e942b9be5065703e0a5807f778cff0eaaa32f0452215d079e5b6749d3b57c084046e54228f685109556c5b173e646836e70efbb2008101b11052eefc8211aa925e39a719858f2b695408ef7ac3929c59b91d0e52f965ad4026b10b869d73ddcdc978aaf8b33d5403e5a5f3a94b3c194071e8cb20727922701b53a9141f2bfa13f79bb820f04de33b651f6a16456da6f0ea017705c38960e58a86f82f659482f1d2cd41c4da2d7602523297baf06ec0783f56c0ad91c01993f9a023dfc7a5c3b1ff8a7a0c969f2bf785e03029b1264aaf71e6f383b1d16cb68bd639ce69c7b01b97a1ec337efbaf06979e1018cd631a4c6909cd82444cf1c6e828c3fc71d8df03a9a49db8a7d5b322518e0553576d5b4c2704975abacd321b385cd05069735303cef66d51b7ff41d666ef3d8f0b4de746eda464a2e74c53e6fd65bdd0519e284c91fa2a8f2c1c446911da488f9e110e536e06e1032f8dfa7fb9a7c874755e2069808357f24e43f8d297f7104ee74fcc90d64ca96fad34cd456a8e43b5d9beaf432671cdbd753f5203bdbbb1992b7f2293c484565395707efa664a2e00902bc227676de6d70875eb025f59ce4f9019a7bb23e2d59dcaef09ae0dd3be9d2edd3932e0a573d5a97f2707121c8fdd2a1bdb6d6523af3cd8f076da1fa717ac06ca61f8bed9353991bd1d827864e4fcdbc871f467235e194cc4aaa76be71c9d4830da51a5a68eab38a1b14ed995971c38af3b79b5edd267d79e23015153408aa2bab712e7b281466ed67efd3654a18dd4e1259921a0b049ddcb1ab3d1dcb07a64ec37c0a02e473758bb17b200bd50fcc1e47fb066a47d4a44a9db599ae630f6787fabd4682260ad4a7c77f73078c7390a0f0fb100bb1928bcb040c25874944fa99951150f3eac8be3cf8ed930fa7019d9f87559dea6bbbf267f3921028452b4d8591a316c89eb1aba5128e564319b66d840b94c316fec767eaf86fe667ad318a496d3c3a39e3fd222a2ff9fa3a55cc818b13f1140cdd93191fad2e8a476402fb87482d5f06019824a0a43195cc9a0afe5babbe50a0d4c9c766616ad1d3f72784bf1ceb9840fbdbbd8b8a40f5c62833ce0f95757b81f2344003a61a4f4ba4ff60afdd3ee07ad718b28394c11f1f74d28c1def82a358bc8a96867c068435e6b4e049b8f358ce3a35176a809632504817eec5180932128894dc0ed483aaa8b888ae643457bd684ec178798b8636d35bf0a6d30fd3d777d5218879d9c8fde75aad234bffdce2c4ab4525936f19f48863ef2fd9609066a902c512bad60a31e572948163d9bed0e12df8ddd0073b6ac3608109f31215a23285ae5b3d1bb4f9e120a1cde64ccf1845752163ec8f375b24da3996268ee4425150ad932454a091f0b9eb66db559406d6cbcbf36af5d3d1660ac4c11b09cd0a673af2fcfed015482ef415f0fd12ea1ba95d19a90c730ca67c0c7031bf0ef037887f61c4965c2597e92c19a6a2cfd1600f43be30f929e723b6568ee0aed3722c857ec2371bdf019ecb27965fb489c6c4a833447491afe227a9a7258ee36219f2e6ac5f01c997ab20126d07c6d3f441604e5ac950643496d92208a0c3670780caec3c906832e39ce6ac478eaf1c9887f3bc4a72c91b3592e9848d8aa33355f79f7cf6adeeb97ef18ead7c4061b7ec3077351aae39a08a04aa9d761ef7f82a9e4c593f5b32a63b734c33e8bf6f4000e6d1184b5dcee16311bbf5031bc8e1bc65bb33e3cdd814a6763b15fdd4c5b4d0f116dd01c986d3d8298040cb5fd2e43695c168cfc4da9b3067a62a1d1906bd81a31806f35219408d70d4180878e963a7087ea6bf1bf0d076eb8e2f891bffef7274fbc401d85828f636ff7634a9c25b5fe28a22ca5ac90522a1f7cec168abae6b61f35cb18ae719568df156a43f3abf6722154474af885b0fd2252ce45e9f200c0435409e158a0e5a86c414f1ceeaeb923842e206aa48fe33627c13a69cbabaf050d1d62aa34fb58d32f1aaef6b5b46682369d10ecb3d924cb1f3cbc4969edd65b93344030ee01162c16127fad1874d1d1634bb610ea653f34d91e21176fb8893e295f5def6c28b8479b604e31f1a7105f91530aae587b8e48edb8aa4e40331aaee27ba8021f67b508783245671d85ed8a7c8ea545fe48e4f225261861e36573d174f5f255a214cb4906da3ee6a6d32c70bb519a812fb5974d8294d4721c5088fc3e8472472aa58e761fc6bb573a2ad5e50d61bea00865f1b10f0a8d7c6acd62864b8823eaf99ef2735ced2a1ff8543b032d8aa36b2ac7eb26e6bbc85e89d0633cb5742e48c0c03a545728066cf377c586ae4d5be26cb11e4ccc128e07a38c0849f3077a28e72975aada1904657400a59f5673cf8c4f86a3c920b2891759beb0eefa5c47fc7ee5f7edb668e7903d81de40c3b0265cef246b7d5e8154ae348680eeaf1929d8df4cc913a35c0a8f3083cf2c843955a9b670022086f6f37b17957774b7ea8f0514fafe1d95b871b162362e9b0cfac938ba52ea97a90bb1a83f077d31e7c3b74b931662cd07bf297edb18d88dea7308a0fb6123dff2143b42d7259c82e1895380a45e6c5e17051a998dfc84b32300743cd8222823c68ba958b4d9659ab33fd43cb74cc0df1a78daf91fd8b2547fa5a6cd6bb85be2af1207082f77507f3a85c5ae140fe4317f6dba45f5af8c517b9f234f87c5431b3ab31a3348d9e8e1baa8c0afa68c250ee6c5e737f05c81947d277ad670971334f37f998696fdaf3c92acc1972b38eb27b96c88348f8d86412906b57e1ab8b26767722c6f0f8b7003180ae667b510323d80de4b9e4a9bdd0f14736be50240b0aaef2e7492212fb01f353aaf47a8552c467e42b49e018925c3e0864d4520a848713f723fcc83be75fd46c27b9f5a2f255328a66e6b9f8d17d0f55d0cea8d8fb132bb35684778aa2f46f34ec09fe415d12ddfa8349e09769fe9dadf9bf58bdc874a5520dc2dd1b083135024b7541233a00e719a75588a3fc28baa04e972ad720bac0be93d15d8691fa7ff2b4bd4bad51dc2b9ed67b5014ec0e47622e4b052f81f4b1f3bec0eeb46b41ae6e4e4d634de494bafc270cca2db3e64e7d3042e79f9e54dc1f64941f0a855b7fc076a0a5a46ecbde515403fc3bf126c6e2ed2b1172a330d05b6c65d6ef91c91a6c4c3ff934e267ba8ab53c44c4e48e140dcb835355273010e3956e75477c1972f19834eff0d4f787b0aa294f2702697ab5348a98fa62d7973d4f05fa1eb14095c84af5bcfc9241b9c1f536db9a551172fb30175ab84c49c0a72731478430ac2175fb83789b08c48ba65895014737b188dbbcbda6eeb7be83df3b7c7a11a228bc0368a1df1d00ffc507580634b2818215f3f9e9e955c811b190f15cfaf6eb97bd06f97b291793c89c98b158abc4c43fd6f1ea4b3a50c91d52c4b1cd8b88f0291e473f5426158e8b2def938cdd104a7c852eb5e8c382543b7701871aee27f709ed9229b262554990fa6d1323f10a8e10eb74946752d9a57aeb8a853f7a3328fb0eb69deb38225fe3469eb9c1c6ad85262856c4ce8f7689948756b9329de6d4c2a2d782dacd08d9639d3af0300c77ba0aaf82e0a0cd488a06b73e86eeca72b425513e3c9617eef411c18b1a46fd67f87124b37ffe552329248e46b814e3b05fb4fe05801d6bdec883134baf21fbd2757a7e822d970082e3cbd1738df7e535c7231b93dd7c986294453ac48dfa2823cd1962bf6cb5b05f30f3050dd6beebfa157d49da3d227fc5bc57a50361e821df93f7dd7a9c88013cc725e86c19cc38447249e702b7b087243fd68d399f8043442c889a1d9877018086acbdf8fd25b11bebab771b670a96cfefefc13bf568f82940149fd8185aff4bd989481ca6e6ed27b2bd7152cc73f9fa539d640223f8b5ae9826c587d2f8109b93894c9a34c4b8e44731d13223ff58a493e644d56dc2cf86256c69ebf8644f58b8c8d83c5b0e0fed7e0ee29324e25bb7094b1af9dbe1a9e45633c99c88bb32422e2793effdfda468e526d05ebbeca5fc4a1d503d75978c63e3db73a46105fe86d74c72447ec2c8178e05dd5a7b6ee017653375300ab0c9aef6a94f99dea8709c46ef760b91c2899f1bea8bb9f31061c0f1c7997968cbaf3e9a0faad7cd31468f7d9a3dc25e7c604cc2b10413363db6d5f113a183307163f8a832d99431f9d4b662f7466ede6c0ef6c6c83d85220fd89a880943ffe777af6dad7ac1020db61d09eac06090fa3a63a2502656b7464eea6f0553f698b3cc3794614006f97d270b1a531a890ce7a688d3c3321b6f0f8fbc27bab7f0f9eafcc25b47080ef9aa535f61363121f66bdd2178c9158e49f1c935eea32bb4d6dcfcde87b31fee026597dc3d9dd44bfde82ff33659504fa68536f51a56a547f2e5ab3a2597b9e45a9fdd98fc97f0f5a7a19d26a710499678ca6a3a894596c89ada138fd82c1d043fd27e2184e087a8c7124fde6e99349919bb780e8995b2a2d2059219ce3693f40cdc67ac94699b7a3ebb4e3231f319ac399e84fda13db9e548d52b28695965942c17d7a360ede8b10253e931789816cba9f62239e79adfb43fbb48db56cdcb5e760488245bc8ef12cbd8c7b874265d422e043338017d6e12d2a6f339c418d79b08c398d30ed0a7073e6ef57de5dfb5ee52dd404f521c589c768aa3afc02f3e867056773a98ca688874b93400b97a8d060f8402a6c94c419806e949d33e1d1abc8355fe7294750cf579d5631b3e61428b2f7a26d9e2ee80738683e38fab7c491d7b25fb2930b78c06cd9706e790615415af70f91d8c408b8490ededb2a8c9124ae70c74a6432f4c1e1e75f2e67b7c4ea97f841ed28d54cc84b3609bf001eb47efe37e9808dce45824a6ff2f636af50451b9f815a53c0e21304a94770e123818ae228bc098f55076bf26d9970dc08b8747eb998210dcfa09aeb78b91af1553990cb0e4ad76f7bf0c6a0f5b9aaff4ce10bdc0298f38806ed312d2ac7ccdd28a185a1dd83b087da20a49102c680b443722961250840cdb1a89d181df037438f9897beba4220fe93420ec4c189a2a9867742771d69106d98a787c9573c72274b7c5e27bf36dad92a17fcad8df1c23f9ca5b04b013e1ce3710bb129d7c69661f8e1a8c01786a5f7f10816a86d00df8b2de63b1663ffb1ca3559d493d1b5c123350831a83ad8839d2fa13fb7730058e304773917231f8a629ba667cfc0f8414d477893aaaabf1939154de285925e9451f3f0aabe9f55ea9a8c9daa7cda9501f047012c7b10bfa6430fd1629957f56c201cb5732564c40daea3077335a42c2b44ae35a92091c2a82d988145211637d4f6723996e25b5639e11ad0ecbc113e735c7ae011193c0f63cfdccad1171141d4881d0a441f994861948091f90b0b55272bcb05ba8ab0bbc595e59f60039d9bb69969097f5d6b89c96a6ec8a44c16776c6b9db47065c29fd31f05cd86955d1063a697f4ec3316a6c3a46bae8d07fae6d253f370cc58f1ee7e6f96be9032d50d2ea0746c2cfbd87ca88078754f33502e3ccc6e1339f676784b06a1ac15ac912a989eb0f230b440b04dd454b209282c4e250f6e831cfe96ca8f274dbacdd986e725ef2109be43ee16b0165dae8ee7287e965be5ab81623c7f9780f02bcad857e459ca2efaeaeca3d3b99abf5fe71c1847f69e99515c605c4920ba764c2ac07964cc4a4f4239cf9656284e06eac8f77e47a719e6dc5cd53144c13bd098684108cd7cd7add1c48eac3b8d53041580ce15cb11e97c614daddb5962fc1a97b871c887f6d5928978508d7f825aa4a3e999a4c5d356f3b524adafddfaa696d2e508bc2fd99b53d4bcee2974606b5112989536587855e82057d1eedc072084b47e0ec7ea6bf900b5cb1a2d151607a0c3e074dd0d7cac58b4155afb5b6d11f7ec232df19b93ae0fc618523069fa88ad0a87046928d47664454a0112ca8a4256febd73a30f9458c3044ab9673d56afe1c38b479722d17f4bd11da15f3f37adb467c52e65e9b4992485ac425cc8740e63b84792262b20901989738a2917a978e8d4cdc39ebde07b672cfbb65cd1ecee1cc8ef40b0eeb3dbc37fbf9bf487b3537d85472c2084b15f6103e0310fc15f106e7b68fea7172a196fa0faf0f437de7e91d02091180e6c921ee0152fe8cdb43c402f28dd264d8515f17587326b3cc0921f54129498f08b0ab48f90c27a8ffb15bc6308f91c4571ec998d8864ca18259e86966a50683528c74653eecfdf4910bce9b2bb535ea47fc88212eac47086c9264ed6b399393ce1397a29720fe5cca397ed3439d2e065d3f4187799d03da642d23aa0770ac01346f0b48c3801b5be7dd6ceb7770e0b640f6cb9be72084b72fb3bb32318988013323dad7da49c7b2d763c7d25286b39692dc4b38225d86fd9778488f55da80f2a4ef1d381bac91022187c2a1002ee4b5cf033726c6898b7eca7a72c50b52cf08d4e5c2a5a266fbfaaa51222172c3363b46d030421f31de65ae62ac1999c656bb27e750291535894a342ca12cfa539d54340b84cfd1fa809dd759d6fc41a49ba1d147b4aaceff23fc0cc6aaa8c26ad8a65987590df9b661fbb48d987cda98d3cdc476f3ae3ae98dafd7d1aad3cc87082ec591e0fbe871225d3585414ec2b037087e87907815432d70b186da6c295e73648d734e87744f6fa49762838dab2bd520dbc95d930493f5160f119fcb1e3c547e618a3ec39116e462c807d6e3efe24ffccb5f3b88891e1c80c231448ae7631793f7782df5c5b965a2913ac86bdb005bfbce051115c3fdd26cf3b4e558c207fd1adde26844f3559c61c9023959a33c5a1ba1193f3080d049acb2236a6f52bcfab2149a17dc24d9aaa800e567d27eb6d85dfd14d2b391fcdd0de787be6cfb2be588525ff6dafe6f40bece65e29ad1cdc322d8621a86dc4d7e1e3d927467e01fb3b44ba8ad35755f5644e1689cbce6427ba2165de673e5a5d47537478e9b403de721ce1900d517b5bf043ef346b5b7f04387e2e34ff9f594f29fd3740fdca20349006f043aed99ca8fb3822d7485e5ab77e98cf3bbce75ba8e900ffb96a7a83a8f155748308454ba0d1e85edc5f36aedce1a3bebd3ca4bd9f007e051911773c1048f7af21b3ce82672f91edd53e47e1c6f6096530d50e7a81625d2bd3da01ca71b1ed2af65a1616a3573cdd0dd7fa7c912b4ec4c33674bc43b24652bd34fa92ff150821a8ae6f6bb9567681c8908e2e972720769fe20cefcfa36122824f9d807e5965f21fab026e6e79511cd3b80be5437e0a9b4b2728c96b0c2dd3e62184b00392c61842b1f77b4641e7f041351b777c1286100e56e98a2fce056b09d4b4b1160a4bf7a28c5d14e12f507939186ac52d7c55996b3b1c82c3203ae995b778355c4dc0daf65392335c6011ab2564cb0d4bf05eb8f8e666fda18b1e1db672ad356df4b767bf3244b43d85883ace025dc6859faf36a10a09c9409f45da70e5c6a52d3575ae7b29880f4ec078fee43927a83232154efedf4282ff70c2c151e442bc54dee58b2e7ccb5b441431bea7a6609f51a59bdd9993e1768e63c512ea67eb498fffeded567661e759ddce0820d2d5e6eb6dcd461c6e0e362dc8b1d4a4a041e27e6a2e9be60546280af30211376f4983fd1c42843291741c1ce7d8e107014c4faee4905f35574d82d2db00c00feb1b65b77d1c719b64ba2eb5ea6834e00224beca0ed5b3f77f07978cb4aa62642306eeb7533bbb837ac63a02ada991d48f39835f8aef70f874841864dfb475b23629827f14f1bef31577979d35538ed7869222ba0aed7dd14f4d33b8667dac42f44f922dc60ccb9845027a4d8ea308faab8251c7f1fa1f245b31fc1996f5b236781741aa139baaa7f4ef53d62a22c723ea0212e93241b3a3051654b5434b8ec8fe707cb509cfeed1ac606ec59127e6af220de3d2bf92acbc9b63481bd27fd52e51b4e134e60aeedb757165f5853d7a66c3cbe85505ee411fdb952896f3750ce3b402256ab5e06ed91d29caef32f442affb31af18be973d2ff9a1cff3d493696d3ff7c7ea7f1350148b7d3c0832d8d950f189609a5b6ea513935926c19a8d647a8af2ea7932cffa47aa870242134186fb929af54bf53be83ac5c404915c5c6d4f47a5c66dbde1c0b9a6900b632fe93103f46c2d0d63ae574d26b43b7b9e62b36e235c740065b66e376cfb0706ef8d80537468a82f8a23cf519138561ecf7fce1ced901f508518d7421dd4ca21d5842b90c7461ff933edd8a38d8d173324315cbc9c08a36e9242f79cf93de26f6bbc70653240750526f2257db4efbc37dd07792971656366d7d14adc088a782b9675c10b4b63ae1ca5c65cf2e322deb83a3f012d36551583333fb4bfc1906a62d81b04ff656d362da4837246fe2b2aef5016eb30d3268e6942d9b592a5e79cf836f43aacb6ac1a0fafb5d6fa34449e0572f3010d00e395a88a6ac647c3fcea2e2cf12e34e6eca409f53afe0ceaf121f1848665df14e204244d9e20e3e8941ccee51e70f3e24e93ec7309c01c6a97530866089a9c27e637c2a89abb05f315980578dea7300d4ff326c59387a872d0b4a3d56609681c83e67483d676f16cb724f1f73689b97b8a815b41ad77240476ce0c6d215d50544f4241eacd0c8af6d444e56c6a1ac26f081c1293c62a99781a0f2a87043f34bf6af140395d97122c029e711057e966d73e45f4699c169fff6f6a9f0315b0ffb6d15092b5331c97bf44fa160139ac4be1a087bc007d9c7c6b35d25facba5a553dc43243b915c890a666386d7b7b0e160076dc9862c9baebd1b07bb374f9d739b2ff24162475a7545eb97e66dce5286a4f553a3ac762af86b5ade9d5ab795b080cd4ecc96f0addb08c3b49b8fa91b6230ee8bdca428126f954a55c0372264bad2ffa04e12b738d387da245ed9dca41353d9deeb75ddc891dc540d127923186ea3c1049c2b555dba387f8c2422c8b1dda9ac7e0424fcee88b7494c72b64e3fdb1e5964f7c70edd5bfe4f82e410548cd092b55afb8523c441cf7a7f101f613095cd929e8c0ce7ecde3ee83639145b12810c971411b277ae9f0c02925536585bf037f801898c85b3bddb2fafbbff625ddb87ea7a2f3438d80c2e655d1bafcf73233f06820d0e43ae576db1714d1481423fb0902bf356d4a6a68f710dca0bfe487413b8dd75a49b70dcff2d6c8a0698f2959f517739c31ea84a58acc79103af0637c38129","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
