<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"24484de530dd9e1cfe4ba65ddf3498555c386520a56a7a94c8a14fc89fcd2805dd96430e64cf374f92e2896eb265a811ce53722c7c15d9fada4d88501e1d8800b5520608370efce6301cccfcb0426b386cc885dc285c605aa8f2a1c57a6542b266bd307cc0ca68d081587ab69e47df2685f1df98eff5dda5f9ab00d75518ac084eb8342d07dfcadf36e8d7df2e660adb9998a936d2fd1cdb498b853c957a4817fe9ad9214b98c54202a1d976a25319b29431deeb6670c3a389227571da7a14912031870b4eaa369b218680c26d11dad9cf26da2becfcb3479b98e72ae7cee959b1f82b39bf7d89e26fcdc3d46ba26361dc66c196380b92ad94adb9aaf351852ed1cf54efc0cb93c06b4e55f9612f81eb8c5239537c0443c8760a787986710e7590f20d587de328b57f7e6cc2b4628a06dd4652f385816664d2d839b26d4d7d321433c7e97c072a0d3ef5f0438ce11ae4341326d38c4f7040c7f698ffd016e774034a70f546a231c4434fd31c41ee2cb14714cd30a83b54f7905cdeb5ffc2917f0e8571c0b4957e4e7f9ead7867dc13171ef79208ec0e8741cc9d01a41f8d46ae78ea217f1d871e45d3e5c5b507932750a09979e5db3a1af47e056156512c3b3fed4684a25d82e3837407a42dd808ac458c73f9f315f148149d3c9e96085ff4e97d18ca1994991574bf033e630f641d21b3e24bb1bdc23f78eaf5462201b9420febc6ab6be386ff394178dcb934d43bae8db8130d327c7145d9d9b2e86ec3e93b76d919e98602c2ba9c7c3f9f658110b0065635fc04a3cff88b50b6b26300a0699d205061e1aea5a0aaf8103c8a89365e91a2cf9b052b92e85754bb6538499be584432f52f9db1412b6bd414ecb7536689b806c8f48f63c63fc90f6473eb4f8073e37e87b26533de5f1dcf20daf835799b41f02d4c881c2a7a91064e0f48f99c20a1642120b7642413c15ab93e73fe44c89cd95457444141dfefe242fcfbc9fbea8862d23760ba0ce9be471b25a9e805b2b1192622f9a198bd25bd4958072c2e529cab42b26cb3ac0f61015bdb073dbf9a5ae3183931c9928cd95ae598bfd7e966ce3be4cb1a26e54ec1022983b1b5c1cc430a77b04445421121628c8410d45b875ac4b7358f6d46db714301e85a08fd2ffca6f0912b3647813f3e682f63c80c031c194d7478c74de7ad7a47c9f4b27e3d2c756e5bd05b241f7b529cc899b997844acf1244d573f46eef9e7654654ed4d1779e165adcc3a095ce59be6e2aa4c16fe8cddbb66be061b7aad6cbe902a08d456a557e7a12838b720fcdbe68b4311612a38292d71cd03985626d37474ff8af638202098da58230368146fbd411fc21c21d03376e3b59e2821d84aa7560733a0614a485a8c1d1ba54db899bce46d25e45c2cc6643dbd3c392fe67b25d3dcc8120824e4818fce52259a100e3818e7d3cabe9974377a81927085add59ab89d7e07f1c111142d24452c6629e4968715d1cf75f585e05817e993a98a6e8cbf8fe35733a6717d8a11b0a7ab4ecce716eb58194c0d55d6ed161ca89b0b54eb429cf6e676d033d15f1d0fde01f60c351c9efdd403e35bc18a4f1a399128d3d6e0a2bf92d28f082aa6b08254f76f49d385298ed8fe58b611ca664fe4c687fe37d7959579fe3a9ab762d6c3912933db034c0be4593e3ab50c7a5d1842e796c98f71fa265ea5833d810763f529447d0be91360b9dd8263f09843d6e716368f827b8158a6fff805366c31b0c184bb86f78c8d07d137e9ac3776274dd6565964cc69fd758b5e32b7c89abbb93e83f5c93994faca0129ac93035e1626848719bb355af18b4908c220b14e565a2b70e07d28ccbcf7475a97971e3782f33768a37c90faa6e1101bab2217d2ef4ea15c5ee4059d02b4c008af6e6d8d853d305803dca5353586716ff1c65d0a54f51b6087a478ca4799f2a6a7eabca834d2230f1273dd405d848c1dfa20abc1eb7dd99802606a5a806cd2122fa078b111e8101742e6867f2cdb35a59b79a4990752632b8e9b866e5e8405a57156bcf686613d7b1631d5656195d0bc216ea60937286a0458ca30637fea03f9e42bca0ed1c1107c70075c2095c46034cd49583090b1c7afb9a742baea9695034a5daa0267bc08983184fe89780687a3a383eec9de2939e595d60a1ae4b773056fe5442fa71767056c2771aaa4033268b72ecfc50e3315007533cc0d305ee86d4051f1379ff3fad84841a2091e98f49e05dd9b34315d76ec56abc95b61f1529ac59eb362707afb764d59794dfb6885ebe0d97a00faeeb2a8590f84bab3436a233c0873cdc31a2b5946624e49794ddfa0e6f3f3a900d464ad31310a7d900d7119df01f760a91b971667e64229db3887cb579fd16202ef99555f4bf74e2aba34af9695e0edb4aa661dcceaeb36a7ac358480d334ec2ed3c536ec80a0618a402d7499a8f3a38dc985b96bac3ffe65bf822c872edd96e8a5c965ec65dc050ee5f5e7ad726cfb08e7ce9ba2ea06a4fea432cf1c928a446437eaa58a6eddfb290f2c16a7964106ec7ca03056899bb2e79909c414fbb441b8d651add30e38885915d4721084c65433fa8e369a72db8dccb2e0c6d320dcc3d481e65cfcc855dbbb621c68c5415d6fe96dc3e5f167e41d11513f7ccb89ddd7c77774d3c4f90278fa2244a547a759968049bdf0774a984faa49e6ee1e329912372ebf5c439e8c2444b4f5327529ce74c33d354b13ba191c8fbf188ba2be38e611c11ceb28a3bb449f7673ed9a833c7e39b83d0a4739165a1fd9eab1d6f97bad10dd262eb390de432010e0409fc509074154fdb8daa047c176ab66387f0fb6ed03f9d55010f55dc581b8c9a279d75b89c1b5f03ba88d99c7fca833027362418fc3874296d87b2ea8864d9ee8c48368ce5372b9050d5c95bf75f2d5ba2a203f0e97d635ef26c20542bac1d5fdd74ea3cda2b1c85a6611c00cd4f0c3b83248d0fa8a62db7d79df42c89f5c411ea7471995f59ff9a056ead3759959917e21d80b99b886ebb880c1d8dd4d278abc93d48a001d857a0ba278594a8c9682a99e0025f27b6883de58c0fe51af2157046f957f99fccf0485ba70b465a5ef1cf263a3bbb5aabaad2517643993c34709eada29fca1c7f52c14e9e1d49995d5d0014102fde5640804dabc50b0fcabb7af3a96e189e97f09eb774069f15e3ec0fbb8c13450e0a7c45d167c4e57f7ec37b68009fd1b9e3038aa973a606b907429a3baa2567fa63b540f2e9a2e562d3deed2bb60956d98240c8d0f806fd14fb4a71bb2f2c505b396d0e05e859628e79f7e38031f0bf900093e4425a83578056df9587184f9bf7df026c32596829d8db982dbd76eaf9b6f3e74dad269ed46435fe5087010e896c14717958a002ec903a28fc22db0ab398b9fff12dbcca637154859551b01bb0f515b15bddc051ff11299f8794009e7917eafa092c6cb0f15a7d34ebb30cfe8993b526b8465f18f3bd0e0ea69c817d484aee3e075cd5bcaea086835e31b47a7ef84b9c9831781a894f2b412ae8e6a689a00acbf8e9693568df31e2100ebb56b51c52589f7ba3d30db5394080e2fbd4a25986ca05e5b29a0dce5e1634ffda7d83a95b47166f15fd5173ac151a3496801c6980059674b7aee0ec8d15e3d9ccae2784d432a07092b82513848babeb62b35d74ad1fe0b9845da1522c086455d55491bd7cd74f674537ac5dab46f892aac620b51e71a085af49fd2ade9b3c97aed15c78abbaa177c9d13b33dd379cc72e6f9ae7599bec9a8cafadd484194b0080badb405e555ea5fc942e95d4d648cdbdd14bd4b630ddd33c9c10e7af89ae7ca994531561cf9760292162e4aaa5e57bb08ccee1e40955f9b780ef818d921b15ec938e6ed5e4cf36e7184c4cf3218264cb077c87e6d0cca51d12832c3a67d506ff6eab0cafa62a1496924b7191fa91207a51d7a00547c1033f20c13d87d966193514f37f424aadf74e93130c1a572d959b8206dc92a16898b1247263555438e536f8dac04e4214d08eff40d5066f616d73f248f2bce5710de86427a74c7d51ae0aa75c0e4f3b4a721221987164e52835e551838386cd7c19615a31d89ef93b3313913613e43b74014568e322a1eda467eea43e94aeb4a965d50668f5df5e8eed9d15e527d2ee1b550b5b65866cb5a32348233a52a484a950c323f22840a72535b54091314362ae04569c68799bf33a90c9eba91b02817866eed32879dcb8bbbc107915a7d7e4373e96a72ccba7279b7b59336b386e5ec3a19413cb2a7dab9adb1369907c1385e7ff3afd90120b333a7b72721f9d7b87fb3669da48ff7f9b1456a132033f76251b918adc62b582311286db5fb25cba15f0cfb8fa2191085d26bd4a07caeafb27713926ead6cbb29eaf716c61a433e7cdb5f3729d3afd7fa6fef0ffd6a30d7e6829657a129ebc7fa499e1c2350be870a78649654644a22fafbf9b6a97d623f5f1e41ab3ef1953988770346b5d71a147a18c50765345ffb164cde90b38761ec8a3ddc155eef99d3b2ce2263c402345fe32b436838ea7c478994010c045eae09a53e8572ae98544c6929c0aecf68b4a66cea053c5db686fe59018eaf787e859ce0c17b26c3f385a9b86985aa80e052a18b5b8534f89b3ce7bebe448259002a0a48fea8c744c642bc018af3f6fec23ffb0a8451046ae05fa47d7a538d8af220accef6759296b048d62cfc53013622025ad421c1a888f1ca60ff85476771adb755cc83dc54071e4be5759b45cb88d7abef8d27ed679c0dd789407585ff0380be30902e6a9368171df9b8b92e592bf95dcd9b085e8eeae70d45ce6df8e19f48cae12115c1fa3532b695e1eaff74f53fe1217c070abbd697f2e0290efddf698c5dd612d3cc20bd58d4d3ad03eb63f93f300cb4081305cb05b54eb809bf52fd749afa9ff8245247a4b90d4c6a239c432be31bc2fca14de59877fc973d1b613a750d10baafcb94ae92029eef5d22f9e0e501a0a1149fb73480f4bf2a9a07777f041d48df2c5f3788e650800e365c47db8d3342bfd787bd44dcdc441298ce154fa373d463fd1cc2ef4c354504a2a1caae6252ca2df2881e314a8727b6d597f3ec7d263e548b2af19a508fee138aecbb341bb68f01ef0d3e724ba405ce3218fdff69fb5cd6289c0c73f6dedc9fcb45ebdc56ba60ebd0e9642702228cf9aa8d59c03c0821d43c009ba18bf5b09da4eff24cc0b761923bd20a93be71a89e7d7f908f74496606f35b3fe5d4e87a2dbac449483ab5c19c02734e4ff702adb9d6546a44eacfc2bed5f037166a8ddf7523b89e61493024bacc2f80cdb2bc8775a986a7848ce123c006ba3fd688be2882630cc4fb635a5f74d78f3e5ddafb647961db478b1076eab965552f55bfd4721e6810455bdaa1da6cb492bcdce9bf59f803af0cdbb63bfd7f32a18c52f8e9da4b2fe9203360df8db296039b4c22929bc4c198dd83a6bd51922dc61660e84ad1c5ea13539b2d066f9ea38c491fdd15bbbf0ab1b75842bc8d1f3fd4b9b38c898787b08d1ee492c536793988d89a9fdd332cf4b4693c89d9ad480c5f29606ffd22e9efd08d1b4e4d9b52844bcac772182e312524fd958b1a3377d681b3bdbc01c4c9026ade104dcc2145b38102e767143bfdb8fda83d39fe85830006b84ce71dbb16c0994a405eafbbc4c9f9c642e397928470b000d57de57da18447f9436d2cfd15999f464d04681cbb871d5a0c5e6c1efa9a59c0ce037e35273676f613b631400de7f2ccd8cee83efa9889932fbd1e0e94ad7e62a3e1c7316ace2ea1ca60c2ebfcbfbfdb04a6e400873f40373b985695ff5478f8cd5721351197bd4c698353f9c63d000df86e4fdfc97f8c96b1c8906b72aeecee8dbe2eacab2104905398796ff6330cb439063ce181bd304dc49c89dfbd4a74b101c3d64560c2a6afec0ed5aca3b4826f5fa5c46a074f8056bf3cb14f215e7940bd8d65385ac9083893972e85382c4b17d01dd0c4ac88369e13c138fd5ad110874c311876ab9d21db89cfa82e09334b1a26f2f66b6c3f0a5e1bbf784561cb2b4536b86ec58054626ae4f264bd91714a1068ecc5dc8adaae1f2b839efef3c09b8a0dfef54ce4ca7aad1597b2e0e385fa8bad7307cffb39589a92e218b901712c864447ea36d2eac16ce6aab37c5ac43caf93285ab620d010508af96d791fa435890a5afebfcc0c972b48320568a802004723b943f7051d186e161048dc14fbb310c91759b4419159270c062cabbeba561c555c817524fa0a57cf616898e2f477dfc1317ec9e225d8e3b3bfa0d20bb9425bec45fc35f867de607062dde5693eeba4d0f57470c6488bb476609d7ec2588e57292333b29c06b069a0724ba8741a40fc3f228a54ef9dde2b7994060158e8a8976b8250de884b6fc359995b3e7a07c3a07254ff13c84c763acdbbf2128cfebd58e53304f2f5fed4ff359dbc3a491562a9d5f74ee7e918aa61b4c777c9f4950dc566465a70f4d264f9e26fa02b8d0ddd3e1bebdeb4c45835cacf427c55ec8a998a583606224b65b6751cab7164bc6682e13ff0398d72e8b9740b048f774d24cc31c65a0c563ff73c98c551e064a46f96769a8b975a1b17cd04f273476955be5785fddd184d74bd08ec00e826324377be3099ff1b15a2f2abeac19233e466cea279eebfeff1622e0c0b62c325fb4f33fef775855b1da6c5b28fc6e07a8c1696216ab0609888fdba8dc8604b41afaf5c9518d6591b84a72ceedd4d2f9a20a6311778cc99162904a3f3f7f2edc66c20e7bbb0e050c096a33e65e51fb6b08ce06942a14fc55adbbf8b06cfe0c0bdbb4ab444ea76e8f2508c7ef0f293daf896d881b536f27ecb99626dbe98d1d46ed250274526709e25f5d426ffd37a4f56b3801453b9d52b1c59f94e729fb25b92ba9e276d739587797e82e51620a25b919aa7897ab19f2dd222d17e28785754f25835b982fd6191aaac3667727790e5e222093e34ee3c3341b7d7a912ba354a51ec059bf713d7a98594fcacb150231473701e1aaf4563f92a1746a07ef45860b0c35375ee51574161b81ee155fe8d53bfa640bf4a8641fd3d6760685d473dc85e4108399e2337e49f5c2d258566b4cdef697e4447337afcf6c53d4d998e5af19dfbdc17594f889f55a461a320a6a90a157b76996b8e354948901ff57980b63400cc3f2a95b41e01ab4640e772f1af3264ae6cc765c22128a814dbaf00c9a336d40d0310e0647e01dfad9c96068621110e640646edcfd9e3a8106a28c92fca9646824f96ab8ea4d3b37a6868b9c4949fdc3c6cfc36979f2d193dfa4560889862ad2529ca9b07eb7f7873b37b0878ce896ec9956c79938dc88688f2a2248ed781c7dbe79b61e520b04b38d24e4f8f222cae2641bb47ad80f68ee569f320554bafb3604d98d373256a42d8e9e4b79176fc788176431a612e0e5a97fc123916a75a2f6b40685ecc8e6149fe5c58df1242f98651f07a19cbf8d762a829a6def50d49eea265b839924b874275d58c8d0ef6c98ede3c9a7ca7d6c5f8377b38ce40cf9de34f786f1cd4071deb5ec34d67479ae656f1c9465543cd727cf8296d756f1e9b842acf72287f29cfca32817286deb690596187fe534062b5cdf8aa9f4a0c624c343f8928182d830b337c886162785868105d54d059adc55a0c8ccca7a3308e32cb7160f5e0562a82fa3e5dc358a98041f3c72c00e5c961e7c6cda176466a2557770b7a27d3b7cc94390f7a922eef5370dac2bb79b59dc1a41d0d85e0e5b77719b4b7bcc9916c06a3048ef73807c0aba87c52be0b893c9af06e6c84cf0ecfc3c5ef03ecf078b972d54dd7a438c58e1c2262fb82a902973c80c419c2e8ba29de30bc538e0f7644d09769a548f7125ec3ccd7ea9ae3319cfbc86abfedb74e1305ecf6432e9b2e8d76544ab3149f651283cfb34d517205f7fe502c6aaeb2a69e6a003ada51cf2be6bb5040b3d91eb79fe9cc2219889fbb301c3ca26bcda9ea2889436a740dc3fc586c3bbab02e8d437a64c267cd29120d2deb7bcb076b09586f0555857c15b11b22042a9eb22d279a10028d23301498733fad6e36544198e6136f4cdfee807ae029b5cab22cc2ee9437d3f130c1850d6e588700fa53c5249a7a6f1f792c7248b6c017a3fc1d404055e69a2def44845157bb20f550c31a3bb0060baf8204e8fa03be5e94f29364aff18261126b582742986255f79ab855a2bb4632e19daecf72032cebbfd8bb5c5c7aa28578cbd43891e3e5f627cef432c2100c0b4f7e9aeac35554359f8204526a4b2feb4fd08c2d2360080c6eaa14037113fc17a34d3b25087a1069e59022efb19086497ecaff41cb3b82243e5000fbf8e5b79328050027e914bc5e80fe49da4e1aae3fd13926a46e6e0742b192782a30b4fe23720efb76ed7583d83052b5b6cac8e941b238848ea20bab2b43cb54be145f545ec6075e6ec7dc6a74fce59b7a70d6779f053e0dea9f64130dae2582b175b9b16d0e33559d9c8f90df1434107191e7b2958d137604428d053f843a82774e5b2fe45bfb4ae286e5cfc322b2b245006a4129ba4930ddb6dd1522f34d43552fae2c5e868f11124ae8c3f510adba9fa387f07fd53c58fd424238ff188f60184430260e800e94a0090a48c04161d01c1ed26a793d507c96c6a736e9769fef226eb381fcb797176484cdfb5f3d1b1fac5e315b6822f0551ad9b3e8e8fb3c6648de837646df229d50876f4d9a5149ed5c4e5e9bf8b3cc789dc99fda881721c783aa295e66828333e1384cdad355d6f5fabfbb5a5c8a2f2b6afe22248321d63b97082c9d82ead9cd4724030a1903ae51da4a4352871880817377c7ee00e3e2767eef6f068ca08487ad214c447d2c7f82589dcc4ce4878e76512ed21ec278d389c6caf6076f3f72a8643a194703c1c874cf0ec607141b8c814c446132a9ba8d504059e69cf48cff11b42e1644665667a3927a5fca7657bc41931daa1882a9551b3bc8febf0648ffcefdaf2ba76c8fdbb4cecbbf5cbed01e5959538687820c5b15c1491a81824db8d527a18281943777d5738f4d80787abea17d78f5fbcd9408132c81f65e2e72f7f13e438d010de1ec16145d09e89096692e4499be7a6fb073d50d59b73e321925b78e26478e81a070c8ffb39b3db9ddb0649bee2356cd2a729eec29c647cbc4b4bcec25ca54cfb7fa9ba0ae84653bd7c5cdeb2b62b7a1fa65211bbc7c9fea0335f3a4c6c8e7e92e54b4b655d502c6892fc1778f6ba2a99ea7b5a0696f03d2cadd43164711a4ce80012dc9265dc93f494012a640ace41e07da266d4765e100ba163e50a6bc2db58deb5f33e0f389e2afbbcac4f02c4c2479a83957905ac2d58f561d20fae3c620edda8076fb0fb111441097c44b5d95f7c4a7cef07d378b0bf1ab2390f56f3468466b956839ab3b6c2fc8e445304c988d6fba75d39aa6838e928fedd822f6061580a11d71c4e241be2e9fb217f5a459a0cda06511dbaf6313d3d4f1398f78fe52e9259f0d8fa046f6ab8b6472811ef459894c8b90ff2c8188e98cebdcc46bfdb8c352eb29f094a52e94059738f771607c90b6f78c2f2b10adfc73bf0b87d2f05fa2b6e0b59aa84f7d7e59fe32a60e0deabd96dfc6ec5aae4e9ac4ea369416f2306c2c471e346e56b495c4ff7243649bcf52677a87a092c634974aa9f4206a85496fe5ddb15d6243e004a3b001722afc7624d56cf6a3298d3b87f635eb30c2f88d71da5cdee185ec688e3efc2a83b2b6b2aa72b3bcf3d1d2607b3be448e07ba9a44f0cb270ea58d446e02a9eeb8fe9051cf6ad2e964b7f961c969b8983344b5cd8c7fb63de2bf5874f919db8ab4aa70d88957edb3f24120e2cd5c7b1714590fb76cc58f8f742f52b44b715d5c8e21b0a7ee69e0964d673a2c2ba2030b9577f76d937847643122b68dfa4b01376a3b8683290cace06d494c29f4cf8fc0e5468d5541d11a3ede70b0d0a5313ffacb94ead5484cf55945b0a8f43b2ed0c3fca6387eabdaa95ade9881132e0cd3325d00af0ccd5b1e557c7ea56345dfdaa0630866cf133701a9deda5eb56e5afcdfed6ba2f6320e4a9b4ead9641f5f2b805827f8deef5e07a1c10a4db50806ff8d4bb8e14ae9b52ba1c199f892c4efe2d13d8c4544bc17923e5938025155b46ee4384fff9d8dc4a7420b37c496033cc3daa9768a6328f411de071e93e8f8545cab43ca0cea1ad8da70bf7e4d5715d8599c8676bd45bb227e6070a22849cbea7f7371452ab786860f79fb4d86acb526b5a68967b38254af39557c176d5cfef5d1e00394ed0aac2adddde8131ff91ab42540223de39d740c950fbce727f281a49d6392b514c1ad9f02d341c42fd91101eadadd8b4042a7353895baf18e955de2197f4db5c949d6fa0f5ae0e5cdeb839bdaa718a2c8dc61174178b9a0825fce8a68deb6dca328c4a8ae5706a4e68547f6a7b32e31aa7da11be2213d8cd7d2523e74ac581c18da92c0fb98a08875fbb945f066176b1be91ac0bcd69b55f28cb28c97fed12df0a596327804936b832a459354fe8dd3f1072a4c488d7b8fa212b3943bd76bbcc3179450fed2f46e17fa1600b291ee3de320fda4b75f2026d7ea386b67763879e9bc2a803c5dbb79ede407a695e640a2fe10b59ba95b08981aba26d119f8d4d9534b690b0022a34b06ef2fb84c84e74da761f2feb068efd2a88e8aa888b5de49b0200f20acfeea7230f8b45e81e051ef3d1041fca568930492963ea01bb2ff2c5860869250253e8a31548c53d28e2daad8c730772b3a5eb2e44c13d4aa18721698bb44827dce3aea52b62f5534db5e40422218c365993d2bf764607a2355d5db2e91f95fbe2deb1aec9f5b91251e7d327248919ece6dff476aa41f2649f3522962399bf2e60594c330631532e9aefa43290d059f59699c115957648742052cb145965e722c889b64be802ee0d4e5f1d0e809fc217716da562396cee2b3c405eb58a7f921deac9bcf49e2c5ae3229feaeda495d1d72e004ced2f63ab6ffec09d2c8c0a5f6a2c58479b93dd7346d4ba232a0f00cd136d0b610dca5404335a4a332daa8aeceddf9ed6dc305d8baac1e1921092eb264a7aa0f3a5beb764603a784b9251f9f18874065577a19570d455c0198d0dc6f5caed12afc4f135d24df77b96c85827006f4b88915d1be0db553e13258e91d9c6cc5cf509e91c9346c98c0436e4f397bfdc700dd978dc5279f3a05816b9de30fa18ca5b93a8c128b654e75563d60f944f5324b0c0504daaaeb9eff37a9a7f3baebee92e01891651cb893001c5fdebd36b14484d4292f657e972203bd6f19409facbbd70bd18364f089bd127708abe8540a2c871e125b4fa506533eff69b9d679ac4097820ce7f396ec9f7ee9b434b82ca53da1fe85a6349af6ec7e03333c155ee3d1c4c0185c493f29faa81f5173c0cf55d0f4434a2163483438a43dc56a56600137825ca102325d494437db73635c4efdcb4402889ddb3d154d3fe21ea4dddd476dcf9066ab2a586b98edafa054441dec2d1ff5af162c06ca93ec124ef6b5d5ce7a212de63d94b91a3a6e00fa2257b62e55d69cee03b3da9feb21fe3c6f34459fef1cd0fb383b56523a5b92a22129604fc868243b448d459369b168b75d5398c7a024fc8a26ae60c77c642b76019b2556141c9687c73b690b3bce4268b1579a627c3b47b74019c366a698ff4d98014659fe6e9813220d534403d5d5a7b0347ba081c4fd52bf8a3c13c8d2c96f113c1b0e4dcd945d0f25ad1cc2fbb2019103321d6e3aec7aac7e825ff8c2a1843c233946b619cdbb7a4e15e23035a7f63553d6fcaf3fc53e2e39ec701ab64df7931ac8d3be5d52bd87221dc38dadc8b53de40a6c3ec3a703addf1c004265bdf544c12d9863f35a7749b907e2d83cdf1226fe90397a34c163eaad20626a852d90ade197c57225b9ac9ff61e4efd7220062cb33abbc2a56422cb5c9a5e27542184de8fa06f87fe31795275a92e11f9545ccbac6b53eb9b8a0e643d9298ce65750fd8fdb2eb5ba0c9cb70d4d6f58da4db1b0d3f559586aed1d499f0755ffafdc7e2d55fd0e8617b7e9c914e8d3a932ea8b5d8665fdb1ba4da61c09f9131b456da8e17574f7578672a3f0464ddde6a6860f9ee9d5c026a324877a16aaf71208bf05742ea3ea0dc6f343cf34d7ed0e5607557565c8d59315bde9a9c2ff3207ddbb6088a32dbb35809b84ebf1df22daac2181fbb21316362e0f2277f32c6ada9444391fe681372a99b57d112076cbbaf7d6aabd3791c6edfb3f89508894870becd5f0acf170162ee8eded1d997a3580a9ee9de82dbee2843796ea903352f8de4ce4a6fce4d4d962bffa6605ae17b4940d791ae5990d38df679f5e5e60afef92fca07007b58139038e1758d1c96fedf49509fcfb187963129b0b0c0b0b8119cf4120bd4069595158fe3f9b944b9025bc560b8482a9a12695ba17c0e49528a0145af55be9f4119bb14bd615e64529de11ae0cd3f99491145a2c72206b9f75e7c3f95c3beeb2d13dc8a15a3bd682dc98ed7b7933030f00267f34e863c5a601530951b88f8422a5121117bdbd4f2f62052cab539415065247644c87087d2110aa3833b35967f27849a5e7bd9628989303ac811c836d476349d02447219fd2c997dfb8a6f2af248281636c6a25a449b4bcf00c97bec13dee3b2101d38c913af0e7ff6145d7eb2b1930eb107a28c72b71e87f24fc26dbafce9139ead2ec263c0d0605be04bfdb249e496b072719d40e3836fb61573d6bab32d708bcc1729c2d4db05f58ca2da510ac6a5e57479dcd84a52cfa04b474676d8140713e4324befa0e81afc0206c5e0387fbe67c695a68cf9e755aba09f04895200b3044961445ba2d84f3e0c0059105ac44d9627ac72cb0d0b9969f6f06453e86637210d3d686f9e224beacd42c689aaadbe1dff9143c45a123dc0e36588eb53161b589c764a10d98db0be89c5897e7d97013d53de3308b0ddab6559dec3646c0f44e0be450a619e25ef600511ee0e35c11f13faa0438ab234c9b368579ff8ddc82f629dccd9da0dee512ebb92b420ebdf32258a24c0febc623ec8e11b7f6921e35d3d694bec98238d3ff8904f2ed0b571331aa1d3b91aedf58008b5d38bead53ba9ed9cedbb8adc8277fcd402e50c801a313fceb1c7285842c0d21d93cdd92556f9b3e7836fd8fdc53179c5562275bfc9f39f09deaf9942f37d8e75f59caf089bcde46696bb83b1e890fc27e9aa64e5e8b062f1d7982e64de030d800c1d1519729384c94492f38f4de25213898186116b1007a50e0803501d24fc083616894dbb89ac620217194463baecde306e0f954e6076b01eda394d2663736b6286d633545320d09860c26c5d62117331c8d8f119d3dd2f23599cede75896b2e5e9e192ff2043363de655c3265b467bea65004109e0255ff69bbdbc855482a7814bf455da8f1b1429224898c1a798aa198d9829b17dea168439c76d32ace3132eaac219883bed09c8fdd5393de116de9f106b72dd623e7c9413c5900dbaf4cd53734aa9229f0ffcbb208d274bce21029f3baf1d02d9e5da92601e3c5a48ceb8b040c4514fdb51f3325694065b67822f4d736f22cd76ddcbc00f2356717601e1975157bf2554b1d78f7dd5681316a30cef1ca1fa019a4e989695577d58c3423f38cd10e72211bc33399324fc016b5a47044864c5c3419a014b8846fb0d7c87c6ab72d753d260fa55af90566bc7996d4843e74e39709f3a9cb0e8d396f1990895f1053f2345fe902b7c1cf2ebd73a4309a10f6cc4b1152d167f2e3f48a652ed42aca014b5e4a426a6e85906d002fd1fa05ba26d9d893866679382d4cca1aea30fb458b193d7bd82c9213e7434d50259c4f636ab5dd523688572fab94fbb0e332b24b6118b345b50cc1d9fccc0213429e604c42fa3f560256dafeb5b01be7109cf2f2efa53555a2310cc9c386854ba9b09aab7fd1d7513013127dd58647756374347ddad98d8f13e46cffb60c587ba7c175fd98141107232b24f8601700326bafdfa859182e391255163ba0be9e8fd0282ca79bc7010521577fed6fafcd75fe282978b209894ec35ae2ac30c56a2b2977a896fe4ffa937702022890f98d90ea81f6b55651a3a42f6c4a2ed52a712fde94d3adaaf8402bbf75f0592a420eea74f5bd251a9012765db1738055db3132f222d3b304b67dd5214aad61b069d9e38dfe6c3c0006e92332f2313509fea0469346ae2cb2f05dd83ffb17e0b880d7dad10cfdbd563d197092647dad46a347fa0b075fbe57eff58a3cd8fd597ea53fd5d4d8ab94e4f36759f8365e36731d8e8d7dc0e545cef22730216bc6265511ada4399fe72232ca2847b40a0961ff6154c2a6d956acd756eb52e6506c38ceeb41eb87798825b6d2597c9a27590fb27f2c901b3aced3b0dc7ed2ad84023f6827a093deb9e96b967d2fcfd835e3809932656c0d4086037a80245ba8f132cc2861284da20f2858dbc9acb22c7e3b9e6a1d471aee6179c2c1d3de829a921721caf53439e45fbdf995bc0c8248058a6b1f59c31ceaca0cd93bd5d755524629554940d11f4b4b4ac834274b7a46d0b39b23ee2936fc793df993f17903b8713ffe6d489c63c25b7930308a0026ddb95fc00300ae679b9fe320dc7fa494832759bad6aac659fcc1207e4702c1001f8428e7ef994a948fb963dff8cc3fe27c44198f67b028b91842fd3bdfbe370e04c9c324eec677ea48f53fa3d8d37b2ffc9da5041dcf7a5b735fce75b69dde6d45eb70e8657ddec9512f67a7b73992351ef855291b6f30335cd3ab2e85f4bc4974066a744193628bf59b19f0ccf12b0fe2c1c3910c5778ed17abfefccc7f94fd470757f859d2946ca519405057564f62121a17ea77547a5ec67cc14c872580155c163ad965b5d7741939c310f7c5e22718cd7e2d8c335dc0285704ffb29a274fe5197213771c99f4b30c83d8a56f2dc95bcba754df104d82d900c83a0d625e2040611b2c348f43ca1214f6e9eea1867d2272998b858919be460ccb6a430767f3eb04816bf14274e33fe217240a239be2f375659945b2f64027acb438c7e6bba0958cf69688c6779e68b48acf677bd8fa52e40cace6cb2716e2e096c64fb2fba19a4dbbedd0c1b2bb3209416618b7a073c5a10e625d8c9fc91e723328f5c6d622b1f943ad5008d56f50588e6f29d878f1e9667dff51b6444f791a6ac4e49a2ced552ed4d40f0713287f36c1e4e2f7bb0b4080025f876bb09d0b52aba2af1b438bd7145d0c3088c8d1a03f5821e272f300ceb27186f9d3210940f1fbedcf90d3683a4ed41325b28ae270eb511a91d47d571416ae69b69c6615ccf5c192a1e21e0c1f6efa8d898bcf7f24e12e7a5aedbef338dcc26da2b7b44d7602ad41e550eaeac902ce53456eb655ee8c484371639a40d15a322bd8eab9ae5d02251d5d8c0f41d268bdc20530627ac9d6a7eb3caf3908841d551661a4f1655aaf2785dbbfc7f5e8cac449d12138c9bc7d87b5bbb6d72604814edd190a3cdba203506b0f74e9ddd9d4ba9d22bc67f986cd0132242f331f75de880ba184f39a1f91fc6ca5c792ff1b87bfc8053451d086e13040d13ec3ac7bf0d187ed6f3b2bfe590395b73797ba0827d1e2329b1e09e1385a534e18e91802d7deac03d7e0f1bb6b67b035aef5fa9376a6035bd320d16b10ff84557a1abcc91126dc2bbde94bd599b3f4aa482dc57e9fe2380b96cd9fecaaa7e0c177d18211984636c197c5b86f0667c4ac8411672e9764cbb16dc2538224bd834a58035df559143ba33bb37b3a3a887edbb3fb3f53001fe7b31504bc37a8192005778c9050ca146aaf57982abbc076bf35b64488cf205f7d229ea174b02188b067ba076e96a53e8fa6f94f1cacf691e79ee1c257ecb9637d1422c176473df9e2164ae17e66978709cdccca601904563ff78a9ca130df361099e4197a8061585e50bb4c2e6f6cf7baec97cb3430ee51bab9cb35a5931b01da9e54cba4ba483fc74ade49947b6255e9402164974e37aa98cbd505e8d2f3910f891da959e14904329a70b81f89fa0fffbe6b40e5555cc13ad1df5d5b64cf5f5c09d947b6bda5cb3ff77ac37d64c5ff4cb593297827bca1a737d4982d956c824bd193671f9f70489697ae008072d414a5dbeaa0576edec8be9c8b837b826d93d5c294cbcefbda05474390e385881260dd6e08d513d20166caf06655b52cd212867948badca7df3518236166ddb15ebb56d947925f80472f7ad1379fb622965e8e3c7a08d091530dd247e2504ff90b8b95f408d723d629db2bf9cbb329885b77c064a9e14296a3583d6948300443263b527710ae018cc28b39f002dc5d738f7194e69505d6c07fdc2e4eb0ad42b51aa0f380fb007b708c0955fc9910f6033e54beb9b6bba2d2728408014fdd397fd124b700697ea9f380abc6a24f170075895a9772a647fc81d1bdc0ee197b8df3179c38333fa1298e585ffc6b13174a6f4861adc29d75666ecdd4a432f7dc0c31cc7a4204512d582039fadd7b0ae5af009565ce337fe6d1f79ac89ff2a674d27c77d2eb0667229747a4c772e492f55b284e4b29feecfbe63b69f6047b15e013fb5722580b590c3a796e1c60833cc9926dc605319c68e4252a5b497e0a63469875ae6635df92fa3d4b7325a210f4505734001e519e839d2c3989dbd8965cb3885b3f67560e7a52768273366f7fb696af5a4dc1760666daacd6e7634650870ff935bf59e0662a2c3231159a5a777e5560a11cef0a4fe7dc8a05897b50ebee4a74d0c7fab1f509e7010fafa69fe053e00ff2a14cecc578f7f6aa7a1a7c2f1b29698512698f2574437c263f771d8d5cd024d3ea4939eebadd4b00118a6e13ab4e0af2f95c5c7f2fbfcfa0347031409ec42c514c8c76d4bc0f3e373f25793380d860fd0d6d552bb41efa8c9bb0f36966256ef32e5a1ea893fc4d4290fa24d1dd9d1c403d4668a67c906b4c25636ab243e5987d47bb0309de114f6266b7a8a0eb4dd48a3e64e8542f1d523cad3ce7386b8d8d473a178c067f427b95babd0112e7c12b0365c0d436abcaf8fa8d9e03e6b8e5ea8a73b45cce2b0ffa5715a81c7cef5277e11bb832882918dae54a0a5bfbd2a42b4044c48af1277ea4b2907e6d3d9081f55abb03a031ca5926ed7c0c12c4a4c80356f5b7fdd1c62d8c18ab895be79704d656e9c76473b1c444a0aec819604b9dad700621ad13a5276edf57aeff4f90bd62bcda2dd2b4f761a92aad1d9819772903785a607511d9598468a86d061cf58959a85e83d0cd4c2e438a72855dba8a9f5378f700da0df91e0320091ad7b361a710274d7161a16bec661e78c372d0002ab222b2e2367d7a976dc592fa5b8380f8a638de69d03f87b25f3c32d90dfcc26084c052c7b3dc78f9608dc5e6bc024b55cfcfd99352ddd1ee954f71733e8d8800e344ae8d4a47d2efc5a3b97ba0683217f84cfadd45ac98de2987daccaa4bb61c9d9f1a99d65b62b0d2bf5a0e867bc4a208dea0e46c5defb09ecc502ec5e327c5b8337cfa0a449c3e88f0e61ba7ab05084ef37aa40127cea4d739c4884915c6a1687c14989a60f5557977fca491b7358bc0a695397b227fef608b54133b0c31e86bd490a2087e47c2a4782390dc125653465422fda3c57160f6fafb9ad66d6e129adf4c7ec55b1aebf7a0525d2c8e7ac5824d8dc795a41436a9e0f8be7af9c07eaf1ce8359fb78b9296f7fb4ebf460f57291c8e0d0a8a93c2616c14bc0fa35a5859e46f898ae3f05aa39196e415d27f7f8e10c9e57963b009c02dc8bb3c0ba33d93be241aedc2a8c4cdf1868f3eb2fe6c5d7de9b00ab287a818fe99cd93a4b1cecefe65f0a0bab71d67018b8048b223d9feac65d31ca0c434cd3d7bd83104a510084327b6cc47b4089c20b71255121b1abb9b5b97fbf3f254cabeec919ad45ffe337670ee000a13c292042a288d178733762edcab92bb16844249aa688fba26d2cb6839fd041d89ec78b076b09b993d8a4bc75e6c57fd2d8d484f005b7de913364190379d2ce8ea18e6efd788118d3c0e62cfe8c80a7c0215c7345f1ab374945b3e9512bc0b069089d801f92433a9889c7c796b70b43c6daa8edfdc8e0dda1edccde90af467d70efcf4311fd89086b46ede1adba663e6c01b45b012d978e7b58951410864e2dcaa2cb6995cfb9baed83aa829b753e3b80c12b9d27143fe6402c490704392bdb1bb5844a45b9af3518b7fd48f7be4c66bee17c1197ba04df75055168685a6ba8c1bafab25a54b7f089f9e8de1d2f899257764da165f8acf67f72d283e7b04d2a811f3b4ed496d42a2182d3de5cca21fc7551fcc39f1ce88ffa3609440ae540eeb90e1d3a4f68bf097c3dd99c47241cfa8b5ce9186d99c935925ae411340bed2000f1099a85a6a52ca820794b772d2ca29548d36bb286222e501fe4663bd8e128b84b1da35dbdd34dab4bbfadcffb3006513df3bfe9633dfaa6c921d3911310a8f6c27aea6076a8541282af041ce783a26fe82f435eee08f6334673a4b8115647970a940d1bba8eab4ed15ad989266a8fb36c96918012ea30c29c6b3a5dd9f514ac13cdb7501c4303a978b1a9f8c24007b66fde1bbba29e7c88d7ac407d737d954a336d5ab5597e7c241b915665c245fdce850a7b443537ea8c22cb077480943f84a51dbf5821b54be480f84a3b14bf32ab048ae583cdc5cc1b7ab01cc77895879a8c43408882826ba933fa40f438d5403e5d08bcffc8667c472288c98665c33d79146072e60ec4400aee34181106f12b52572b387df175e74f1240577bd337fae86565c45c86228dc00c95f18af7e9f5a87a68fec5e02ef5df06f5886d3035d437517905137e6ff9ea9c52850fc1bb2f50e848a11c4ba4d1b9cdd08a7ead69b8f4f47768db2802ebd66db748c7326942adda4eafa5deb2cbc03a41cd802600ce555fdd97bbb8b133af8b2c02ade2640bb39757243845f95f43a141e787338962d7acb628f9fdd6dc8c9c9447ed489f1003cc55099691828b063c4af403ee2492a02eb7fb9c5e55f529a658fbf0eece03dc59034086c90b94dbdea05ea805abee5d91575beb7d8739aa251ddd992879a7004ace4b77681a91c00b0d8af45205e0da259ac3d6e4fff25f775cb954cda92e1513bf0f1125c866120b3c61b82bbebd2a37e8ff1ca8514c7508246a6f172a7d5d8addda85bd4b0cb272019c75e2b1ffc613917c627816edeea35e00b73f13edc1fde5998f33d014ba9f3433609af353402a8f09df53f5c27f31ed84fd551f24907b67277550fdb22411a34b37453e7ca0837da542c5b9a583dede9b6be82ca3dadd656bac6cc1f6977547d7b4bee0066d65bc3b9d8154a0cafaac881cc8ff4807fcc474ff66620eb3c1ff4885c76895c0ae82a81a6aced5dc3d136d1ee05405d33cd210cf7e454399b524abad35743b2273ce077c1b4ab8972144c5ee64766314a6257566e5b5e524d03dcb43714b77019fe467380f96a8e237ef91db9f8d39bb9fe0d3ffaf311bd32049b19599134ca70679d960457a8b9a87ba5fd1125620ffbe1a42da4a2962adcf","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
