<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"718bc61c3e48c9f6440d4b8bfbbaef2de9d1241f229ad64ce724eae0d263d16bbb7e14a4484260aab99e208968ab51e849c6b6e87282dd6d34963ee8642bd6d9f97b17489e5ea248d79a6c3bcef05a246246d5ca9e35e13b9d39024075c9bdc394275b411bffb050174dad01ea022993c8852a8c42ecb445e30b03f8e9075cddce21370916602b95aa87e80097061a61cc263f147a07d534f59938067421ed19435b4bf5346cef9a5b7f0e2128f1d0bffa202dd535cbb30b849002f45de136472c17178cdeef583a97add93bd1feee0246ba8b4cd41102962541772444167360e828268c31362a1d674f25923ca9b17ceb3d68c4cfba523d7f7a618767750a7d31497fde6b4f69901953bf9b90c54a70e3b1ec0324bba22fc6f174abf636d474d06230b15e1e1ce47769a37f4a7eac87974c244a3076e2fc7b8a7e48881c2644fbef5b3fe23b0fdfccb8434c5e640980922b872dacb50add86ed52a78738f30be3a98ddeaba226d8ebfd704e88dd2bf820a5b3ca20aad710854c0218b69d5e030e24d68cb1431935b27b7554285dec9cdf09958d9670543ba8952a93af196792b9e72a714e95cb986f935e4cb8325089c34788d7c21393aab34de4cb11efe21609cd6bf8076ececf01e18786392a531dfa50e2a9dbff41c88a85c9f11109eee30d95e6f37d2654cd73b43625b0be1a2a146d7b0d74eecb9b9569d982ca73feb7a63d9ca4a4870370d2f10721091370c1d74f56b6010173be4d01a673018339ffb40d3bc5632228549f436c4301264b77bd7a7997d144630fdc374642576530f1a695abf3df0b3ac5ff082d14ff0f16d4c75f161ad7144b60738a144f30649fb91066864b98b4e93b792989e2931574c976b31d2feb364b901722d95b8f8e59b97a63f4aeb30a9dd5dabd10de9092c4e5107afa1cd7a2353313dfe2abb71d88ab2b22496105c0f30b5e82e8378cc16d37ac4b010345b75da98c38c35c42e264eeed31347eb4b5c291afee5e5636ed0618d2ff5db3578610414cfcfd68ba5da26350cb94c758e01f211b612c4c8a70378ee04663b20790cc9288f0b83a82ccd61de3a6199b435de40e8a975c167f34a21df6239372230d223f62dd00813eb56d4bca46d6839c5ca69896cfcd7a4012a3c1e71b38398b572392e75db940e506ade0e453da333ab098b595bf82e6dd20baf52f3b31ab6772d6d8bfc499d177caa125b06a025c63d11d627a5ffe3e50067989966beaeb886b35c39db2ab41382537a51beb9a81940e3d859a15f6fa4ccd7b2da347168f1934b7bd4f56f0605acf022211b1d0c754c340d91cc6f00e52fd2c097f04370cf3f7eec7e05cc3aa384989564b966f3599be955b0a0b500d8708eff6df869329ab629ee0ddfc5bda705928d80ba584cf5f407631a30c8fd75a7f47bddbeb0b3df3168ee4ef6d0e02f19b72e37acaa57219e09f3d7e406d4325b7133cd92471917d5273278a4addcf0c00918278d109194c86ff78c28445a0b7cd71386b7020646cec9a39700e585aabcf09e184a4c05f792fc4d667a9f9ad06cd1dba4886a9f5d4c5ef8ba2c04b669b891e8abe5c7320df99ba57b71a22aa7d0195206e8c32beabf2dde155bda7985dd0818163a7c7ca4339e3ae6a8080fbb7c0bb9602d4a2a4d0899fea1685e5355d4cbf01af273c3c05ccd5e0df065abe0537dded8278157456da28e1eb6103e83573633ca750fd8b5c8990bb170ebdf3c1bddf0033ce445fe6e726f6ac1a0811a005e394f271f131a1e0595abebc809125133b5ef920400be2146d0504dec5b6c8a1fccd74e55fe9d003915174c453d86df293af31ba6e88ca3f2577e282bc8a3dcded2cd4c2b0a309042c08ef4a5001c3f18b478863dadea4e56ad23cd9bf25beef700d044d54e2ce171e8a022085f17ef03bbcd9e7b632d2ff078f4086ce2b1ae3e180cdd2f80f31009d1d1a1764a6a418ca2459be1120f9a947d1478169d305b2ed972ed9e041bdc38f2340022a920cd7b52d59deba059acf640fade02be822cff51c719e947035e34396175defea270e4a74121a7953621e36e983831bec04b1fbae177be40caae12ba9ca862c0ccec0cddf4202629c6902482fcb011c8c992881b6bc44389379b3dfd5224ab31844cd58a1274e2384297194aa76e4fbd6c73c50e1310920065d59c1214ad1a414d76347dc4c06ad7168a92bd7bd17bb296b46d5725a1afed47885af9ec0b2bd2332d44a9952b3e0a7fca846f9b5d9b09a225af1165d656a3d50fad737f01f0e06325263eb4ca5ef883f44563fe67218ef74acbe10cd42216552473fe668a31e5687222da7f7e6c378c57400047afa25f2c7abff3489c20ee8d1636185c92dfd51e2c642a87c6d7e128ac8c4a02a1968a2db8fe9c96a5177f742478b2deeb7be3a2887c609e1e276d8bab7f58955e2d11e165e8d4614853eb157803e432fb52c1a0bec93f2a8d63442684b38bf3a810b646a855e3c04dde691010c638be04a74e88d6a4566e85f6ec10f94858aa15030ad020778b32ad1464e80bcc1658853a27741966f54a620095c7144ba076bdbf420d8c50c9ce39f9aba01f968e36845170407fdfb89e5c40d153b2ae46d9d6c2b2f2fd5f51ae46497fa42045fd684d08178e392387110e5ae698b0b707a1143f41bfbd208d9a787e94523db5c0400c42914b753e42144e93cc6ae2e6fab6ef9ab2f5fe26464294221eb654ec762803166ee83cc0520e982c1a064359ba73ae1fda4444bb42f36bedf31781c4f522ae632ae7b64a13944a91a5b08edaf9483812e868b6a102acad86291b924b01429b1f748f2ca2ba355c56c6db43aabaf40d99aef3509de1625081a860a342feb591b66d2ca3c80dce925effb647ae6f9c0c28dc4193d2c822940824d9e198f94c0a085dd4fc3e307df56e4ffcaca1b129d88b0c3435fcfc7dd75075d1477a2670c7cf1c98d972e5a152a8792076fd9c3711a59738672d6bc070aaab57f23bf728456d50e23d44d4d18b7f053474f6e4d9a0a4b6789e6ec2f0f7d904830f9102d5acc7c9d3c5fbd277266584d45959eb177ca9b5473649e99eb3b99fbff3c7d35c1d6b308ce1e0766cf8b79647fb38c0f6f89214b25335d162edf976be6927f98645c311c87ee7c7f53853cf1c8ca152be65cec2dd43b47e50a0e3f9a843015c8c81fbc94753e304fdcdeab7a027c22c9baf3425bd34bfc4de2a88edd2ce583d9fecb93b284e5d0ac7f65313e3e96113b9e81a290f80e6f6c04f0735fa42c2840813746159a3780eb5a8b9d9cfe246018d8d4ca0bfc6e2507d80265d457fa18c5ecb4aabb556fbc6f0dffdb0a7e67cf1b35b2cc87200eb3737afc31b12d712a8231ce53d0748f231fc7ca2180a10f94f2e8d7df4aefe5c8344633c5d45a7d07034194290792abc2e1325611007356e461132b7c7d99fbba9640cbf02606aaa4af2434f15e952826c82c3bd510c063e3fcaceaa659c90494b071248173d0bae13548383835e1cc1628886a768bdf92dacd26032d74006d15fe2672b356aa3adafa5c2d8980898cbe4e979d456833a8820725eb5767640578492c9a433dcc7d5d1b877cb23fd695e994d90d00196c309b5e577bd5cfdec274a4b091f54b89ecee2b8216ba4fe2530f74ca81579e6e82dbe83eaf55875fb088888daf11f14159b86de65557aed9db128c37602281f8a40df64ea0d1aca5b4620ef65f59bf74c191d8f4324296f3152fa0a1f2822b0716df5412b237074d94c54707476aa7f1b49fb31094b564d35bda49f1c544578872d771c7fed8a9a4b9205ace80c3581140be094e37eba8ca8861cd0d8a354b7c9ada3b96840cf39ba16e400ec06305931c6f25c4ef0904f73a4b0e33a4046cbbceedca7a3dcc9eb4b43899f56a838b516345af4d8faba03f178b2c08302e49c1882a2aa26429492269525da4e13bba63cdf18c3ca96679ebb6ca294d15b86565db7504509c7eae1ad41d67fd002b1a0ba4e77a4ee21c1e8326122e724093ea0ca46a158f900ec6564c7b347340d730b5dc48af8238863e6599801fafcc9a71010b8e93af75e0ff72412f5b316af24d6e39f2a0665e3a7a14950544094fa105961c8845622f086168c408d0c4697b1ab84cbd8db3493408951f34bd6b5829bc1e55963f6a7f3a1019db92fae2d00ae94db6f353625de98520dba15e4bdceb4f88fbda9a46d06b2c6b7e497e8ac99fb164e1a528129788f7cf90a89eb7a726222066e5ce1fd5f2a5ddbbc8cf912c3423c5ced802f09358f265f358a304feeb63f9c535e57bca400bbbdf8616cbe7838b20a3c1878f0ef59b9cfcff431ee229d5cad91eab4e4c445199e115a85d10db2102a7f6a1ab74164d7acd5c4718709dbc0b47fa026f1bb4e65523a78759e4a59f58c47f37553f344a3aff985ab9fe1e4e6e7c732b072bdeecf0b02f932a09c8b2b3a318e595af21d6c94528eef3ca93fd0411e3ec5afca679196be8330517863fd2366733180e4a9a99bece90f01d24f87c020a258ba16b47a8b9632316a996d164a115b611a7ba542ec1cbb2c5909b4bd5bd836a2a9603c3e204b9979b71525d7db52e8b2ee47484ba4efb7c09a9b5d8e78f17021800bbd6c21414ec544609f4514beb50dc6f14ebc431a8c5e2cd97ead4d94fbbff8f9a8d7e0d995eea724d47f8dc091b86cc92864f69fbed1b9f52dbdefcbaa8cece4c9682681d701eba148f9e808e869c89ca57b21eeffebfdcedba4f19760940f9e163334674b41a74a3b58ee15e3616506466eb0fcfc313f48ee819955e07ece62981bcfa29907e9d39553e1c10ab75d597cfafe1db12875fb0d5c538030cce953e298c9d7d5b9fc41f0f296bdef3774a4c5816773ac58c385faebe475e513ccf3a3be86e1e725ba3d2e60b10c47c4957103a4b97f37f8bb540d3f46d489707362a66d88034f28ba93532fbd29224d029d3b7fc9c35c23355022d952c31867458f7e7a42d0f1a8dcf0c02d488e56fe2e861f7147c13341d8499df9d9624ef2b76ccb837ab03f6f51d4f713f964af9dd4b52369e36696680ed817a4e15f6519aec4171814cc3e93a303a8dc0a4aed6fd0ea10632cd5898a41afcda2183e55d52d5a4025dc4147bdafaeb47fd4643899409be57ecd5cb71fecd48bffbb5c61d0e35d72b87912e5954073998c5febc5bf118ca8cedc5a56aa683a6e96a61aa6fb4eb153b668c99ab980dd093be15def60623d6c46f3dd74096dd30a674fd59e37b2f7ee6e9613355e816d917c6eb6d8b6a7a8a5b4fca2d9089eb87f4860f7a945c332f6c6a43471dc0bde48759838e4d139d9cf2e39ca714812555de0414ffd8dd4d620c92ca75ec3a6ab82bd4869c3e19d6bfb521310ef71fed33f4ebc15d57e7fd991d3926c1a8ace13340b5056264559c5ec462c134678dc791cd6753e49397442c3011f5cb82b1148dc11a63ed94983c4e6677226df2886964fc419ffea85b62ea35ff8c66810c3574a0e2a81caf4456035acb2027db485aaaa14a961381cb2990557b759f56942fa518def288b5111e86870e4d5e5508ed5bdfa51d909bd798938110914dafba157a7a235f1ca637b00b6c03e257acbad31caf25defaf5be05d536bf7e5134b105fe0bb81423fdb29452e596810bd32b4ade71e5d827860098ef7d06431bc6c19c70da7bff23eb00f8f3c60aa044bb21d7416705c33c6ec29e31c477171516dde41989b50efa600ef4e149f9110df9f89ad9620f0a2b0f0766adf107564fd2c268fd913bb8983f3d366325ba9fbfe46ba809e2b4e1e39dd8a699c1077bf56d158802360ce93020925410f6b734e67db004e02e9f61f9a209d67c1d33cd31a646196bf79621b92e46ae39462edebf533900b5edd8d24b9f9e7b08f3e67bd4f849a3b9af53429bb91c175ebff4bbb193d541d6af5a293e533c439d93993da002145b52eeed6b12a3ceeea3a20f9c29b40131647309636d5846664a674025af08f4ac27f3b18c7c740792dedbdbbdd2c9548e3bcfa040dbc6da6d50bdaa36945e9129596f9cea74c79f3cc128c7a0bf8de3d3234365e77e0ad78867d1ae39f08d7ebe1ac69542852390debfb66592bbdd70f0bc345583ab1ce280ff47f092407838c564287de195d3d52eda22e04e55d439a19814bcf754b44b2b260f293954049bf394fa251822b32d567c1b1d3cb5917163a7f2f80c153491289bca1d73b572cb41fd496cdbebb591edd028249382ab16475092cd67048f068f263e54c203a446c924bb951f70270005c36d431bcd948d0f5eea622105f85f8e8302af0020f8041ea575b988bc1aee70320929ed5850533690e1c2c7ec2a1e675413345e5672fa12722b4b8e55fdec427abea9cf5691a26e6688f7032772dd38a1200f8910634fb4f674af0ead288b605b4f931b814c4b8086e83a0218629e7aa476898f3ea5e152d576a5c9c0ff0721805609b77d65c13abb19c85693f38f24d71be56515117a834394ae1fa602a22b45ff1245568e47b5ec33c448986c571f92fbe76222d497304bd87d32c38055303a27edc8c3f8c6f64a12acebe9d56fc74f68ead51aa83650f53eb403c0499f19ca21262b5a56bcf757bba4a2913f180151d3c844863454b14c6b09787a3c3e7de110028ad4a0cbc40273b5b22352054da43736f5f1077bf670c0afa0bedb15849fd6619ed5257609ab62bf63182ffcb1483de52156ece4df7ad61fbe5430f63e182fcdd711b116485425b48fe70c020e59952d77a5b60882026a5a7450b33eaad853fb19e20ab64af1ed5dcc831fe27061eec7550b07a9740ff6a51ef7ec041dd029df90ffb67fc964876458a556a45371401d300d3ec860cdec270477a1fabb184ab22305504b2617bd6658d9644579a495f336fdd375407c479770fa001d78247292d3946b8f67fcdcfad0ec00f4062129a79118476de851c9883deca0ae5757d5615e8db62d32958fad6ca2ca216c1835adfadc9586671112a105b64d14c54eef598f1f4bc11baadd5bbf9397b965791b0ba2f54c0775080b7cb70eec54c28f1e48b441e7f44e5301cb04f1fc1e999fa3e5788e32b308340e12083c34ddddb1445900b57167390321693a33328492c39370cd3d3689ac18dde8b2cbd135ada413fb89f4bb0915b78e153918a98afc9e37e7c75c3247fc2a01b59611774165225f0359899093e6684113f872a4aa4ffea8b1aca75b9b9c552ffd04f638495998eba488f576302dfc1a6619f6fc012f2e251bec6a77a4dd0ccd8fda82e5a806494c974547dff85bc7733a62de84296dc692f587add8c5ce0a898437be67386e95b374614623d70f3de5d0d326c3db895fc20729f0ed113d049a2a49d147a9b4f3a30b795bd3ff2846ad3a1f877b455962988cc4d2a0ed27a6f818eebdb32ed6c6c9763c4cd14e73072ebc16c94c6d2450429a7d441816c63e526f459327c6160932a4c3173898391de37f935178921582b045fff2765312e8851fab366296e7fea07163e5a9dce06348f064e17829f102e4bfad2e6a447e0c509b30320c56314b36883f66c8b3e0b6d825f359fe033832111135388699cc2f2967534eddc7003f613e7a35fdfb5feda8e8d43f3cb6d7ac7a8e526351528e42d4a26f3c70cdc16268a893f5c22b59a49e29e6391d4ccf3406511eb94d77ea42ced5a351dc3afc68927160f298eefaaf6a40430f42c662aaaa1d5fb3046ff3bf44e556820247ba8593bf62b0fcd06b7f24257cff9b1d396b4827d7756a76e5c33029ebf40b9d61554905ab98130f80d8d95e45af351c476862c37a61a7bcbb3f5f1a87ce8970eb1ed2797e31929a97da04cd59ce0e7232adba68f72be0fca33857219685c1394cc66c4d338d24f5137e83ca4049947d77a421469a73fbc8a22465dca44132a34a91498144311cd61c71fa777ddbe7353d06d13de15d481076267e85cfd7b62e18732238fa037a6870d3c2c0e299f5eb3f8546eb8a91605d01225262ac44f23047a76cebaa53412a8c7afd5a21c3b14315ebec0ece73dc36a817b68c45f10a856f8eee23968275f33fcda6477a8c381843e97b0e2d4db3fe733ce06c08976f0d31f66152fd15aebf13125e45fe641537a4f7a33ee7f6b291a10313e3954af9ee0f5398410b4e2089d695528eeb5d5343856afb4080a62e38a33d39d4592aeafdf608c248affad52e2b48a1ce0e8c7adc3458afc271fd28c285d61e40a0ffd12a478528085541d43ca1b7fdff5e41fdf8885ec924518ac9b5bd46397157f319820f13b3c9222da6179ec2361f982f6c4622361951ecc9ec43ab5987641182519e30cd8f3fdf292b1f65f1c087646f577a7eb7495a5f73db60977d752e2eca3865f57d418a3a159b79214ec1aa0aecd9d5e11f552d033dc6db19904ab630491f76cb3d1315f2d9cf1c30749829bb4a0fc787cc5692f363b13785b539da923821c2b0400e11ee80ab2da7d9f69cda8a24389fc6f8f598233da4623c2771013f6d933b8e503115409a2545ea12250421c6ccdd6e717804f9127863d6cbfe5829c3dd10392442cdcad733f367a5355186bcb846fd21eb8e5229e91192af19b29d412ef2e475826befa492a1394a572ec3cce2c93460cd78f66e1517441df6428ba56ad6ea7907d742754c863374b0bd80e950b4146b4eca508f3dbdb5a0f16369d1bf48f95a45b6542d4c68623c69b441a6b5451ff31a90c3c302a644d0af6d262100fbe938d8d1274b360aa2c5dd6661fa47f04e0175f5dc37681074c0568ebea2a18c4ac1f7e906e1db843c512c36895184358ee84dfa0829e82f17963b56e95a0c611f60faac92a420839a47d51f7aa596c52c8f25e6395cc2013caf138cae5121757e83892924a4b29468e16e4335f7239576e173ab4db3a3b835acc187e1dc3b90a00eadba31b9d8d868b7da329181fe5b8f9957786672f9f6cea439ae930a096b3d91234741018eb21fdaabb5e8a7ba32fcfd8fad16934fcb47d618292ae8c82792f3247d71216b6eb585053856c7c3b621a5c55eec0920231db302466b36dc0a9f6a9e5ca70475ab8fa98aa4782e20354e4e71c908fd6d8a471e9b2aceba29c3b38f45724ce2f95c5fcefcfbdefaed213f69f5adbf7e97dd214761a1106b36c95525808010c7bdc16da8feaea879fbd778ad605b02245c918ec654e57d4d9e93d97edc591dd10b8625d4bbfd3895863524bb2cc35aa0e4dbe15d58cf38603d79569cb7cbeb17162c6cd0541845698bfaebdd9c6321f4027638feba9f5d0c1bdf3ca56841ca4097f49edf6000f0edb48ec17c50a6224c1257370b685aed14e4793dc7980e77e93398049c6ad7f6e2e27fbc7846dd6b1e19778d25f3291b902b94bea3a7517b6fe1a1851c161199b6dbb4c489fac0cda7c7195949280f3afe7f160959629319066b7774334e5119e630be28bc7ec0cdc3ae0c9c14202d13bb6ca5cbc1826524a0854da546eb83a61247548840388a22a7d1d48c44e68ca6365c667772d88165650b780ec2a13fd7f8f17a8e18824b8bfcf20e63fc6778872d17d746d3028967bbc95e783faf7a5765ca46b6e48c6d28d2b9c923540ccc9a8d82b719ec04fed146445f5115472626c0dc9b8a2d3e672e6a6944b5c26563be5d1b0abf061b61c5c3520b361039bc4a33e0a641a12cb04b6a808db0dfcddb7477391ffb9ecdcb3d99c45701ff431377666fcb7000991b12a97a103490d0bf0ade685898f487c1228a7df1e301d21fa34c8043773f7e37dd8fb3e3a451a4ea9e12a28e33cc88fde688fe8a00c0e5bf3de3e779f66d03d5ef5aa403998ad8266221274b606fad5402fcd7efaf83b284ecc3250a92f9c6259c246fa463061b45a80e11e9f7193617e23563490d0d95a7d72c312a2510df3ce60a73e74b79cf8eed3cefaaedd77151aeb91e55467e2486915b3ba69700397677c147a9d91e27b5c830f4ef403b08a8ef1df88db58bfd606f3735a49f4877e1aed3a50a87694cdad105765ce5408528fdd9e3bbda2977fbf565c4fd83523c4cbe3e9795f55656233e8c9e849c329fca179f4ba0ed05e1fd8ddebae6c266a6e063545bea7ebfb0d2df3a14d67e560090e85c2368d91010cc7f1bc904f4129d09669d994d02b78173dfdb121f12e44c30fdef6fe624a0093056f0969e5d7c27c06a64e415fa76143320313020afcb9ffcf980c0a45d47ada66313a7684147010a3812668b0dd6c92eb301869305ed117cfb6d0003c1d57a1cac7f66c300d7874e7d2233fa23735e35bc76070fd201bcc3a544a3a44d048c595a358644c6acf8119be1de0a81f4ef02fa1121ffad9d2d62ed11429edb9bf5d9fefc33c664b4443215bc7d41a266402bca31944e3af0daa189b657fcf08e608f07c3884b6a2f26f907967a21fdd2964f80c629933d894e8d0ae9b3efaa853a8f55e82d63f4b40a2b1b88d31031387fae8c93ddd8822f5b4e21572deb1c2c71f9618bceb8832ecde5ae126c8a92a1a6d04ec61a4cc50d7de6555a77ab9ab48cba99af95ec4c71ef6c75e2cd3b9bebd9882e2f9bcc74e71406312156ffcff740cb200468e76673f1597bfd860a5cc054c3a6d39f757282607ab7ac911117ebb782b40a463ebbe6e495ff11c4ddb8272bbb1215d090728e3d006d064923e793b6273cbb62dfb01d1d56d53159973f9ab8278672f947885d3c0b53e25d2cb8bfd1413446a983c2eee4b43a11cf6e27ec2d05c3a4eead54db493891197dffeb1b02152155b20928e7cf863aa45c532bc06164798b84661ed4d743c4898682edad30a866529381eb7d9b1b57088534bb30e03385029e7bb4f36889d4d5d6cc53a2dc26d58c176fc4d980c478b5ca14dbb6af209c90466a2f7e2227af2f487a963a6fbbe15c452d930b257fcfb66d9c9dbea3aa660f3364380240da9591d273483777537a761ac764b6346fa5eac562321cade48215629ed0d8b8414962ec54178cfcf514de468d442154cabb2e2dc09e1dbcd0f0d08edcbfb748599aeb945758a7fc9f27e347496ebaec3c1fc6a471b9439fac083e6250d33139652cc9041c8968b63f2d267d6019ac67d3c130465831790dfeeb25bc75758cc37c9697b68700faa2183ac2e8e2a8fee2e7d2e1214394dab9ff61cf32c6974baf14c09ec82d8e588ea71d20aca986f34c14405866ba60b117a537fc559dd1c1f0730792c25d194fa57e052d0199736ab105abc7414cbff778bec588d01f0f414c7f313b4e0a08aeacb6ff520c4594ce1be83a45e762badd1f886222fca14b7c766530b60a06c2e3726c1b66f3367c463c49aa394d3976d46ada5e23f6078757cc151f9a033fccca2deb9ae7a9e09ee5d88cdd3766d3b17544b6bb19d287837dcb393bee4b5d482e0dbb7c00f2a12dd9513cdbe69fb1ed7611e402936298ce4f2fb70082ee3d86c862d5522af95615f3567b7a7514c176d427c6c59954adda08d259b139ba6869fe87719933f1563d5c2aeda879de635d92375ab118e205da34a0fda1dd21986017909a0c7c9a61bd933d7a4d7909e2b1a6262a83663ab0f52c86cdfd38f20531dec8edd8b6912a5a4a28ede270ae9ef83b852b25868a37527adfa72050a75309a2c72ba0252c49a4c6dfab99e0e392b2e016c1d961f4415887e344c78239d02014c564f9af3a2d8f69174f32bd349ed550ff150e32840547f3ec5c9cd769dfde8829492a53d0b0af81cc18413c03aef2cfd12d94062476df378a746b14689203901c1f3fe3983d2800729084ddac2babc9550fe46c84d8c1347c046cdf484aa0dd61a3fe1d33c7b1bfe3999886b1f87dabc8754e9f55c2754bf4f1f50fc4676f9b2e92b460129c13cf525193a9a615c73116d48d1e576a7c5e3bbfcbb145cc8b08ae7a5cd837e4cf5af70c368a42c99de3a22c3b002c533b7ff476176d85bfe9b9018bedfeddb834a4db94a2c3a8ef31a283f0a0e74c818f14268a2a44a38e85e8fb75b31ea17601206dc55b082ea6f9b0322e6ee4b0b3d8b5c2ff6d328e8b03c7ac2e01ab190239c9e6db84e45c311da5b07e6adddfcb04fc8b669825f353d2df1926d9c476db25bc363b3b368bffe0aadc0d1fad262ff69b2dd51220592db9c95d3562b407e55d0cae9c381281b7c75d3163ce14d127669ed914fc46540c208f9b0bce8aa3107dab36863db0d54db36165b75a4157012f890ed72aed37c5fb86df055ce84615590c033273cc63176356e5c8a06786ff1bc75535c8338c635fea7115d377dc1129b3a2c8e2ed1c502474d64d0699e43bacb220c181c11134b9eea1843411a0577c0f291144a012e25c7d2c2b7d71821247a5585aea4a03377aeeb45f2d3697c026c15bb73181b1aee4a7af4fdb0be8815c14c88d94482ed2f8771899fcdb2d035e3e123519bd1523f248a56942027a2d838a319670bfdd9624c0207c7f0cfaba7c48c96e469cdb6545c892face9a28ac1b4bdd41980028748f3e23d8409cb4d2e00e81680ebaef74a4ed87838ec87c9a2cca3d8967e632442dc104b5840c7bd24f902ec75ed9324034f0fe8b7553e106faeb6a3b70e95834aeceab6f16aad703301d3c908641c9217d2eba5570f35e421fbd90eb44dea193342d71c66c168a8128f54b5e5922afd7a5c49fd45ec0551d81bff914f109e904736e45d11ca262f3226ad54c47f4d6b7c4f2a515e79604e22850eb939e61f5a95c63e4d2185b37519c2ee36d94fb55d136a151ae9e608fe86eae9f59d04a387472156a50d300565c657135f7623ab54b6a99e2feb7c651c1bef625f00b5611502a924ef24606fa766b48ec5dc0648a9ecfa2664a62c85b2fe386fd1c7f2971e10e7ae8bbc6cee3554b388f5f134fbe61f29459c722951017eb5544c90db4d28fcc0148ba5680a4247cec0d5d9c3a148e9dc92951e7c2aa6f0a210524b9d3bc22abd5acf6d80c92cf7cde70ba25ba3f8af322487b030e437e93cf31e086fbe84cba3a6a7f3aad740c69fece452d52e58ade1492f0173a585cd259bd130e09f5755a5cb70ff7bc39f25f1da7e56b3326fed0cf1e45865542f94a884d5eb40388e1ceea99c99bf3f1ae14879ffc72e5e2b4bb87ab03156edb827402325f0cf225bd28aea7c6407dd1ca1d2f62ff2584dbe62e83aad7c5a0e0b2ce3f233b5e00d40aa848638377caf5b4655463583bc4a3dc858bdde9a1f449f8e2f9e7e9c6dca2e8a501b62945a3660b1e9236bb4587b3489f9179934d9086487101c32910e3ac3257b8fa86ea08eedc1e5792f7d33871d7b40318f7bc7515414d1f34170fad4b5b9c4bf7cf6ce568288ba41d86ad159172b02fd2b6276e4060fb30f63265049e4065771fe8adece2e105a7678008d7df5c17b20fb361ec64827586a6f556d4c3a687f6ce6927ea0ead54f177f23171be6655c71a1cd93b4be6f179f1bf5af615a603292e48cc835c062630ddfb1d3611e83b678fd9772f6d054717fe9cdba93987b14bb9b74029571cd2429acc845b836513c09d2718f836cf792cad5f4411047af0f86d0dbf1232f56d37578ac82bba9229d5f69eac6df2e5fd7295dada646833cbc6597ffa5af83d8b2d34695eba26640e3c019e2896b232dabda2464bb2237c676fd4beb1ccd4e4a8216ff8e86cbf9a586f14e0e1a086e3ccbb0dd5fd68c4955d5f17e53f2eaf5b28573954a4f33980ec1731f5f2bd0a7b6b0606b6cba45d7dc391885b88e65a4174a81419d4ce5ab0843bf570c3d3ef553d4e950062b5053509b8f3bef3b8e10d3dba9030ba71b23b22b052dcbbbda276bb8006885d0c935923033690269ffe9b5b26a1ae1d3a9170bdcbcc684456f8c459d566a59ebf846bfe5bd2ed2b70e44318adafa93c0405f2f061cf2d0527f68b331d86f1007d798d48da14442cef9f32a96c9f47cc52bd4c8ab14e8f4f0aacc57d9656f350587277234abd2557f55f790b1380f8b9d838fcdf41f77ae0fd271200cae1314782ccb5d6d2101be277e89a00f6ef3a205d251b82ed299d8d50e89721576171fd1cbabe0fd59262b3afe19c4082cfe4d757152ea6725b357b5fee70ea783f5ea6703eeda70a96b80d4a8e9687e95cc90812d0a29bf9947cbcddd4362fadedc13bedf00779a01b2f32a915d77a127ca26ad0c8547d66832294e9dd78e413903e427f62c7700269d0e27c410ff39649c80f55077c862b4f853016ebbb18749dfef7970d0cd01c92f841eed4100b1507f0cd86da39cfd965870615532bcdfac971709506026a20780f92bee1eabfd882045020d7e0165e154f6dd2476450e0a9b4d1bff00c25c983de23f282f3d97a44a9aa9e6d01e91e3d36d6898491725b947ff4b983789427750b487bdeae3443d187b4de192b347ff2d1c708223563dd5581204a544b86a227331a3dbbd6f6d0f4a6106702bac429682a6e4403eee991e32da10ebe542d405b3473ededf5a602065f10099940fdbff3bc8cee5f371b4e8eac416d3f38d9259902e582c4e51e1b1d95359a1ba66f10ca79e31477208743b95e8f350da0509d4c753907379b7c46b0ef7abfc2dbc99356dfef3c0a519e1ac69507361604da9ea3c3691fa4157a53f1a8305af9233ccca56959c8b5cc8228ad6268eaee52ac909e150c277be248b4f5fd9633162d567a3190bdf711654b6b918c1b8504eecc1b4cfa13344c7ae40d56933b06811d524032f7169d1b0222df84da8763f20978580a4f166f2cc721fda42d61f3f689c77ef3784739e9e76ade05af4ef1bbc87dc3a93b6f7ea74d8711b3fc120214fe13552cbd8252c1b847cd410b4fb88cf1299836ed26aaf1b1cbca5273c31126be96e628486ecf83437cb9a95e76a945ab4967e98a0851821a6ca85f63cc5d80f7fcbd6364385238e881ceddaa3a146ace9ae25cde82b041cd21ad57bd899deb3beaafbf73286a2e96fa6f5e234f4b49605fd4fbf841314b940aba4107a8648e61144b07e7770bbe1cafad0327cad657cce897e82b02e9ba0c11ce7b80d5b782061aa4ff24f281f92f8958ffb7af8be0820535d911571a66bdebd1b56d7d8bcfbdcf515ff61a8bf9873be14de60b77aa57a2bb65a3910b3cbac61fabe5d4531d22b0789d4b1ce69c7d55efeee4de1d22a9a4fb56b8bb9b8c4069fbb93bb6b10bd5d797e89fa0ecbf3931d1a28f78e6f955e13683bc76d90983395922ca78950c7d239bacc803c17dada799392aea99d498d5949da298d4a0a46a1236fd932673432fd0ba07d66daaf9029087b7ccb1bbe950aa700619099aa8c0ef44cdd4c22a06279e104a159aa25988a0a59f63e95677f1bc241e43f787106995a8cc46ec02f47d16c96d72c7bc3c1affcff31fc82f605be055714de3acb6b77531d07a1a66f39bd36ca0e1e32c3428ec7a6dd6af840747a230c351e15d2f83df3a0f1710e56f0175e51ef9aa74fb18c2528af6d6ea96d51d0f7d073408907f292b7ebc46ea4fa00828f6591f6768882e6dfe9eae381c70a2ea2f0664f4cda5a76d72915cf46aeb14831fb9e6b4dbda471e198028fe988875cec60d8278ca5496974db50def38e0123f9202ac215bb5bd1703c9416b32947870fc2c67714909165716bb31c6c5ac826b02013b6521814e4d99cb9bc498ca9f57bb999d11a594c516b6af36f4bee06acee5fe6a79f6449a0472b118a85ae8fe24adf4eac512d20b1e90a55c2a9a0bac2651768101e88e9423c4d567a7b173ea0284ce76f1450d746f7666d708efef207d26bb4c398787fcb708162f85ec0e3379cb4c13bee7a023dd4a6f62535940d6ae29d8b71a5d85dee18d2207ca6a78002ec51d2c083c5ec445c01ca94c94837a1dda2daa4fbf99b6d6e0d0ab04e075e0699dfc584bb9703edbf54a3dab0616701d25d5c4f3939b117d7549350ac32bbe60b62346a608fa4e300b9c3e61a3e3622682ebcfff8093af53f50ab9287658ba19be57a8372028b13be4ca7be5fdee65f8e0d739ca5d076d66a43322434872a8f46c2f69fa51234a2eb173a118d1fd06b7a2ae69d7871a79e462218fb7339931fdf20b1e189c3dacabb4a3902bfddb33de897b11635a71715e1e65bf7353106396fe172e4b27332372e4ce2f94d988954080ac813bdee867d1a1df066dad14fa36a50ee01e90d878e112fa46dd488d2fb96b3d22fbd4c5aa449e6b6291e416d08a488a410b1b01f50a0fde0c03822e7f74d225b2b46593d157d2363e13416cac12c4ae6c40b7d7f9e094ac7c84b72ad3ff2d4b0771cea2d633061fc908c41188c9f77fc2cc6ac93dccf1c05a4369a9e59b7260dcf50e22d6729b5fdb82b168f4d06e5e87606593a44634f39a14be183c3cc37408a9303b9b484e2c5378f3c6520f67439b6ec889e6eeacbbc9c05597f5a8039a3377b39cf17a60cf984b6ff4a53487c554bc243cb24a54a26d956f8980cc6cb3d5c35c7e58a1ce37af50436312bd3d0882751d5cc3cb3dab779f36534ee39ac233b7867bc2f8f835cbf861374254d40430f91aa3afa7b53f41b539e2fb5c4024964c55b4e16a3777504fa30e40f4964a5b5d4b4c9044f0beee05c4e41f1c7bd37be254c28f0a0f540c2b3e1818e65a1ea78f8ffddb6273d97ea3729a8a99323dedd076f8d926c6f1a558a8a7628d1afda198a046e93952f0905bc1350933e0163e13366db4c1f9a84ae99223d7cbe3cdf7eabffeece9b4543c10b0bd4c56d2f66913d5b38ccf78ea0947a12dec1faf9f44e32e097409d6b5db56e17595448db6f9ad61e40834149eef3cbb668d575a0481b2ba8e861f5ce454805f0326e313736c3a8c485af7ce3ff6e41247887b3fcaa9e983d4d0324d243919b22d0f7e1dbac766e1652c4c404ff038ac4bc6af964136fb0e57fe896bb1551701005b45412e91cbf1621677f774ef982e0a116cdc7ff3d2285e17b5e0f4eb8b2621b707a1a3a77092f545e14fdb349472e752d9e7d8f8508a4c5ddba95b0134db581746a5d16233d2f7e574f736d62d01ef227c1de11c4724e6331fa282dd0022bddd453d7f50997592549de618445392a24ddd4c39460b1f5b805305b35d70ae58f0751c03577f8ddc7f0f2fb3fd451f5fe15186bd7dc84120a930b49a31f4c845c4b47bfb7c61fb621be031e555571081233afb62210964a7123c1c06537bb9bea81fa17ba32b7a7f715f02f30562a565ed85a4faa60b9e42c7d3444b5d7285b5445d8c4f16a2ba0947d71090375a64f05328159e774a8e26597f7a179f107d9e805257d93a8965d9e90be10dfc8babf53b5f8f6ce141324904d3e3de4c96a41b766ec7089f0946656c7f2d2d2fc0eaf3b6f9a3c1cfd1b5024bf5266d6bd979d8e3b44c910b8a4b1ed043296b50f01e69cceaac2b19fffcfea04b252c67baa483c8fe97456a5223f6415661c74ec0cc14cb3abd8e8ab9db4fad351ffe22deec9bf3b21e5039a2badcc80e682aa93771c0b0827b49374e35c0449e3be0c2d30745c219c12784e3b4eb47a2535ea9131f1150a640de97c46589df67fba7c1a63f20f903b2ac8055cdb42ceb7b8798eaf7cc8bff299e6e6694af8f809b8f4925f432ec6e72c6db8b297c5c4c90f04882777a1aa509375ff7fae2a07019526ef027f90cecfef6ad5646c30c805b15ecb0f4ede4921b80dd8b97d7e93bce97df4017a34e7dd8c542953ef0d81b945d09d7739be8cf6d9574ef5275b5dc007735ca8c7437a56c099892415fc86a55d95604df2c20ec613b14a3c4191fd8268530300a262f4dde80c6e61fd47b630d7d032dbc269b67909c38db2e6df2a9be2e42db745ca96d56d0eb364e6f52278ac5a4913c0a658f9ce39f75dbb82726f1dfe67ed3f6c40df20456dd58867ce822e90a6b877eb7bfc1cede1aa4f0a6d3eff258cc6e14028fe3751872596efaabff6ba16dad5edcc2ad2b7176082b984e83b477ef740f7e32b170a2f8e3238038e1a041b5bdcfe88fa32ab307c7731df25b30b40a3cb1d8e1233f6031cf609fcd308a35e20f068b2d632ade9d15045a7cd1deda4f992df7b0d29464894f01f9486b94c8bd9dfedcdae7458c4be457c4b37b0dda32125d2fb39d9b582a96187716513e38f125ba79b94fdf80f7b808f0c73ff93b532e2ef1932c35919b0d55737e51afa6fd2e5d59a17514a8089f83918917b22ac35f4036501c7ba37d507a50e659cfb937ea29e6de405ecbb75269aaa6f922273797d07274002715076f8d34a21b6180ea6f258ac6dce542eee00975de1a6c0b54baafdb7fb654b01d829443e3406bd6e6ac32c68e7963b917f61ac73ac76aaab93cef3630eb3eb64e67c0ba5444d97845de5b58fe685de659f479d5cf9156dac0bd2de86f2d6d520d8b89fc39a83b83784d84696fe9076502fbca3b91231a237e24507175a63fad29c9c1aa03fc67e79e2c6051f24086ba2f8d60ad38b7f3300ab3c1758ef3a9d1696087eabb24ca8e15b966b680f5061ec3ed2af4739c218ad8e5c02ce81056b85a4007b9fee8977f620adccced41a854def6258b09285987e99c606386644a78b2c99052fe888ac19c23d30634d5eb2d4ea83c8ac785d147862f1faa2e2059710a86106ac3b775f485617b0b2ac9ea151d382262286c73bc912ca34c0e9231432807cf6b1085cffbfc2f41cb2e62c5e379654a48a24a425af52caf324ef96125a764e94be80b8e91fcc889ae6c49fa9141120a65b995de8afc28126684477d128bbea724981635982db146e2752ee18658d8d879e974b8cf7dfadc85ab2ac672294016b8e6e968eac87504ae942ccf5705544349168c6e8a937738e31453bb260575fb583f1ffd057616c47713e4a8ca334e85b045789964a717baaa1e7e76b7b88d8fbc68f501d50c86114044ebad6b178b3da4ffae01abe6d373f1fbebed685e2ca872e4fb0c0f38842a025a5b4a4875db6b8f0ced871192b59c6ac3c30ac8ca3d6e82be7c5eedfa3d7d2d27890cbbabf084445437f7c543a880d66e63aace20e570ed5129b72f4575872819866245a5865fd1f1c83b032c231c08ebd3cb0e6cc1d1d66c0ac6a2d7f48718b7a3aeccc472c080a3f6c885e0431b3bbb91bc09a1bfb76e6052dc9331efa4d45e221f8152333406a719aea38dd3321654199655aa109de47fdae309ccf4f339da2821e985f838380c2b153b568b0e7ab4f84edf45a9a6ea1932ac27e6fdd3d43d1702c4b829c302bd398b412ce05a13a38cae464d75d8ea3def4c7ec4dc21d714967acacd37aba2834097834f2c102b1112dbbf2d99c278b99f49ab465eb566df1b357a798209b908a0c749c30c81b6ed1cbe5c53e30d41d684a98293250f87af80e9d4e1244ed27e9690e764193daa7a9a91ff78b0f730fda31e897858add9f049278bf5d362e036dfc02930565b3bb8f7e941dd576dfe321dfa4323e989ed5beaca711602943e8ef8f657049348b6de00ad4d514f0a69de21ef8c2c0b847019b3b17bac93e0297bf7282924b54fa20d9caaac2d8af91b47877e681a7c62f67db57a3180a045216f5a7166e9830cc735c0e2747664fe54df297e0ad4424f94c9f0ce9f87988f2c32eef5b9e4702532fb57db696cbbd53c647dc30e4ad65caf7ba3dcd80d5af411bea28f891b2a4511ae348b4447d692aa072a63a04ac6bc0ef59d05a9e41e57d30b13f4dfa8e4722dc27a5819a0d5c899b330c2399d1181bea73ef756b58157c858ba64cdab54f161e0c394acb5ba70c09a4ceef0b0479e3343f99008c557c07e4f920d6bb8318681964533a0a515628970eac3cff85f60e427a665606708e2c580d25088221909ba7607f14c30e2d0f5de3d9b3c","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
