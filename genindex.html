<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"873fd7e329e42e653396a44e3a186b433427f991c403dc2f5db446867b9d08fcccd9331c0d4cea4e5ddae5807682ac3eb87ceb1a395fa5e48f0b748a658296d8d2db594528fe137edc4ae4f1e0aacb82c7cfd46514518060856cebbe2b6b2862c0048c1d6f0d9b96e37834571a206f298bfa5bde27a2a97827b6e9cf898171e0f68978755d3fe6e66d8bab43d8e21b01280ccc6d73570dc4c3ad70977510b0769c7d3e103c31a433e2aae01275e234a89074f54a849f851fcef6fde6f602c2dd75585304cf24ccdf6530ad894cfed9860aba6be15bc8776479353937cec78840c8378cbace285040c52e52af7515016d5fa1f89572844f0373e3cbeeca6799b883abd73ebd126ae775573d913a09a03fa010ebc7943aba9232a4bfe27666eb99eb9b0a198a3f7a9ced62c0624721a53bfc9577949f520a59c2ba03b863b23545b7f7731dff7f645f0d0dad2c29e40c49b6d3896f3da3d290f0131dc91aebe3ccbb622e944f65018148a9796d24d62dddbd45a5e79e9e6b56f4b118702eab9d640ffc186e331d6281bc281a1cec48b4c057214c3b58550a7c7889efcb579e9482b826721265b621f6871367902977216074620c2d6a425894d61c1d291c56d84c65a24873731b2ff5f638d14e923549ff953b037320a561cb10ac05387316ba1c87bb19231e2b66299e00c0e46bf9465238ce7f0a29898b11b4e3c9666a6b4ff710186cc741ab56cfbc6517c60c69b7c4dfe81baeb63d83706f30a809a15fce8c9081857bfedadb5fd5efedcd4d7f54ea1c50c39c6c41ebfae4c5321c1413b227cd0d8b0963b71659faa94ed1b91782a3af4ade5874124924aa8515d2f460d8252121d19e6cc9cd100ffdb814bcbc25b23d8bd626ef0410e6c0a7bc4e3efbed69fe5037b2efecf7c7559e9c62262dd7f3b33dda760809dc280d57188912816437f5fd0e125c6f933457f09c8e1b816518a82695e53269ecaa68715c84338570615bb034512b1c15cab41c338b8bdad51d6df874e8bda4fb40c571e99ca5012114e6af5a756bbf51b1875b2f4344fb5dfb3de854cbddb838bbf3a1e8346ebcdb6426a5a30d8b85169e5c7b2931bfe400c27d4395606670efdc8bfadae60ef6f41f7a2558007c6e3e9c863d70865e7c0a3fbbdb3cd818d0ec4abab3627eabf97364cce10cae75a6c32250dcc77c4fc424f4eff99fe3382b6ab5f277fec34cd3a0eb3a710c03a97886dcd3cb986bb564686f8bc6caf127376951e024717ca73ec8f83ce8b198fd653adccb9093bd7dc7313b2413766f51b807df63ec6e8e12534e034c988f07fbe842b11edeb0ba4c983678955878e246819fd315b354004224947efd8cffa4767b4bb44882eb64f552784dcf842d98fbad103807f89bb6d970d4fca141572416d39053fb9a0faab495ad0a8e8f929c37c0bb62270818e1b8cd158e29042a271c7fc38ece6bcc2e7fe856b6991f40e37d4b79cd895afd8513db4138dc893f0dd9c6c927104bae95cfe1061d72e9c378228a2e8b66a5a97cbcdcdc9af713b851a61646537983d26c95926ccf72cf3f9747d329825db693b0b980aacca70e59964818ddfa104366e8994c8035e64bd04122d69968df9e1f4f7067e513bd2ceea371ce801e3eecac7a635c6fc83275dfba37d42808c631363ec1d65f0f8b99f4d52f19c76ae2286fba1995c48e039d5679f6f7f375061e0af23179a20a6bb9551c7262fe2eed60fa22a82fe9b4cc5195090b50d86c2911ccd2ef12a90642d30736dbb9d7ec35182b6bbbbdf73d6f444c03fe9ec74ce5a9a3d22597df050b6d7c071b7f953ff6566efe72fecd350e2d00d4dc03f37ba88c313f4d294fcd00269c878ff7626368447dfb59eb3eac050443a4d8ac84847c527a88dbcdba019e1ce7bde517bb4c07cdb81cd005b22befa3c5ed2a5c6ac5593b3637e2ebb29c94e8cdf72f1f66534eaf140f94a4c083130132ecd61b9e7510aa87f1d14a0d85f122360b288f6692d44346619c03d1d862aba49eb9c54af76d93903ffd101c05ae33f67cd64b1b6b86d56b88497d3ac5fc7edfe88c1eb22d91aee80c3216b231d64fef5a26dda4750e71f340437207b08c77ac7a0dec00981dfa1e8311da50dea38aee40970a671845e631fae25a79f82a165a9a42ad2f2f443fd97620cff23e92b8aadce9c9c60f378298342d73d5aeaf783e7006fc1d176344bdb701cb0e6ea80358372b93fd6b3e7e8833801fbe4370879e869aa891f93371b13692f5cf9b883af4157c38661f558cdab66f81cbfb7e03cdabaaee57813206b5cc543dabba6b94458634499580ef67a2dbb6c7be099b5b7cbe647ffb7e18acf46510065d36331c130e874b640266d98f0e80e630f16b4cc23c646db3912f6d8aebbdbd6cd3aa2b49083d9f35a25a17efc9bb6995d08fbbf06eb89b50aad48564ace3e569db66466fc6ddf8f8801262f93bb6f49128eaa79671fd0982094df8257d643d589d7e512ba61f91a43e10a4ce51821d90dfeb87a02c79b66750a271dcab192adf15c09d87a69f897d6f8a4747ee03e725f31df3c1900c634ad769fed21897ead76d17ddab0b176a926b545533c9d17160a6c15bfc660a49f67997c0392cc403d0d16cf9ada2f033bc4468a8e9d4646fe3a9ab3e55cc39c2ae2ab5ca02b92452caa673ce9b434e93009cca5fc160e625a5d68dc64ccff84653eee061c2b1c7cd0e79152e0acbaa0391d66fc918ed07e9433a1b7507cfe23d4f3637bd6695da38975510c1cce597855f6bd75e83d58b473de9510d0ace63f3e6bb69e124b9d0c91a586fa00f8a3f0203d1e669cc2b0bf229659d15f5a8f002abee28b0ce865323fe2e7860a455550e0c75eaf00c835609e35bdce80977933a7afd59032f7dad7017f0d4564515167baa9472253e2f00fc92f89df0b7f9fcb7877bb80ba1c7d7953585d27ff242de00b086c3965ae120e1e9ed0340ceaee3047b1287dad39f8d687e54b902a6125da000595f34a7a320bb74e61bd3fed37e17d4cf020e5c41bbf53f0bf5b842c645e8b9833fbc2b10d7896082834b2ee6939612c1ad34a716cf8336c932055204e00f257f4ea2d1c203d21766abe65738abfe979de178f7dc26449c59b3004b2555c92ee9684c1a6ad81894d18177a0a8ebaac1cf7fe831055489b790e380744f9a50b2ac0957d86172934bfd19edcb7e54459c1681c2a10a13cbc365f3dfce6aac3e8090cef9c0da84e1ea1304c4fa8679db1ec028e3f233187d4e4414bc05a74e8688a5f40161c95c1f28a3fe82f655fb80b696d5de2de71488b808d039a8b2dde84a15e2ca64bfb0e9327a75e39d03b8835ee3b9ae0d66e11dcd48432f53978e9beda764561e16c1e25935d0467dbec084e9c64c8da59e29b0b52a6657ab42105bb1b1ba4894d1d7eff56649f59b0d6b1cca65df9307381f89b14fe7f5314efcd2a564bcf7e4462534048b0571180d7d51367be97d11b373999735de6323cac872a7d596c6b7be3eeec853431f3b92c8f4d7558bd4426ce1600a81d62b31c7c52d7b3f2ead7c85125c90a0af54d6846a98658b7478caf1254081220bdfce008b04bc95c4de2f34b9d0ff4562328eb2a179202ea5aa44a6eb255e5a92e2af724bf42f2be72f16c9e27e983363bb149b7bd2ce898eb3e3b4ca8117027cc8c89aa40cf9afa68be7e88d385b7077921bcb96abe88b4d0630c469b92c0c1855025468643a83e7b08f054ddb895915d11977e8bc7a2c667467159a2652b84f7c6a3c8eb2a04c91eb8d13042eaa08390fc014ad0046c6346d7030cc4cd7a3958b411b4d456acd057cfb89234c23c5172c68be5b8bb41bad4ee6dcd13ffe703995a0843a36f3048a6008deac89567f699a96eb0ed05c46860b35315e418452a9f23c93e315a2e88fdcd6f29175a93be2837ccac378ecf04fda2408100baac2d5bf433b866c91fc05ee6613ac7017d06e3869e4f9d6ccfcddf595bf43403abff53d8fcb515d96a121921bd958ca9102e37ba1cebbd18aae920d56f9159f60999b0fb4f4330679f009312a480e5523d4bcf7ba9ac4193744a69a0b81a8cf173dc1bea30d7c16d3c703f8e874d0e99e8c0fb663c03641ec7e7975470d9e56b3463db1faacb4da97108ee949168c760ba32403ff9ea86fdc3aaf4b65083545b877a8af6cc7888d64d33a9672c878611af2965802a2f593274f74c911536ef1ae8923d0a59b57f07886143b09c3af7be836acef7bb7be1e8990eb5eff017fc5d4135d7674dac079ac77d30b75c20435f4abd73f9bbfb46f3a156a874d0d0fd52b44fa35ccf437aefc196e5880d09054abbf1262ec2db6949ced66dc8a3d68e0644c2a1068dd6262b305cbdb8ee71d006fd255dbd37befc39af4a4274c8122722ecc01b5da64126fdbd2bd3a49c821401444fe0ea977e54fa39ec2e6e84f796944f99bcaab0bf77d96918bade919d0fedc7f91a1e831cba3515bd0d96ce48adffe94508328fd187d10887e01303011eb3168f56997cca499ee1b593b4f44a431871547d3867238eb1b6148cb7841e5ecc14bda7e7a3633cb42ef98d5ed4d3a5337748eb331fabf42f051989860a45d4532afeb868b25679e67ffc3598c74d780e99693f0b4874ce79b3ae64743ffb37d3cadc40b15fd10ce60b0bfbd95b3756ecf7f8a0f5f59fb8d293e6e25c055e0976ff03371de819fd02897a438e573f469e378f2fa5d1301b89286e5f69126ab085dfb73a9af5be1475de7b0dd002c3075d996165b946ea57fcfe965ee256848a7d6fee53b826daad9543333499e06d1109d8c0d54a156e2f2a68f595728d1738d5a83b8a2e6bc7929c74583973db5961ad46bb87a5e2bb76fd78da7f9c98e8d184863e47721dd1970902de2f805040f468605d56353bb924c361d8bff4a2df70b2efd83bfdace81a70924920e7ec69d391bcc74930c4d024edac6c0304644674b3cd9869f4857560c819076496521b80b30e94b70b3abe58e18dbeb9ef5b023852caaee5b2755c7bdc5b07840e549f0c7a5405ff4348e6e3ae23cf21e1fcce765d09ff1833edab7554b6901759071839603e324c2f548cad4fdfe3cce5751b09bb5d49dce7600cd5d487d36658d8d10d5d5474f6d6b4d49086f698ab42831ed2bd6fc65cb36a26ed6894ff589719fe099c45b5289cea1ee20ef4ca1c9ef76dc468ea6209b515e5ee4af86e16e39fe036c0fd4e749b9feffb8ad281b517075c337ff79f79d16355c6d593c967495aa05a781b71fb11e9316169223204ca302a60615c75e8322da6259b6d28ecb527ba395e87da204977d0990d0f7b11492386545bbd4ea9de7689c3b984cd42f5c2e2b8d0fe58f29462f7a1bfcf331da0c8e5486fd55f87240ebb74390a9a4552a467a46d3ae7988a573417f7acbe4325905d1faff2ad2f0ced167e624e4c955b6bb90430ba2f69704e5d5da5c82094d2739c51742d714312719fca449e5970f5472fffea857b6c482802f484f3421aebbd5f6bb0628b2d9afe87ce4d5222da131f50996e247357887c85f4b1ef197b4496148c01a55e0ba1ff8c234f33317c4a53da1d30d4fed030ece682471d3e83bda0afb213e9af579f9e284ae4a750024b4379b483417a7fa97824e92057ee2f9f7f19398030baa36fbba68130cae1719109bc1ff438ee3eb3fb2c941d8c9cb8fa540786d004e1fb31cf7f60090c1266de3dde96fdf97149d4c8b186e5b6dedaece268acb3e2917fcc9cc8ebff36e612695f2c4345cff35cb13782fa507f087558d654602b1d1601a31e0c41e896e1c2546baf947d1dcf2144f942bc2a0fc7ef023606dabd38f74708315dd69c9d70b267e88d0149030490ff86868e7f273fd264d75f33ad9888a976a18dbfe406d5c3fd9c883c9a02ba8af12a1ff4faba21f2fe48b862e57360ba7925e5bd36742849a07e5e58d8d0882a6977718217ae8e4c0804b5126861b74eb1e401f2b12f5c8f61f6fa4a78c5057fb139a8e4883879e2a6b0b3af0302bcf3c5d23c59cc1ed87ce0aac6f11c3eb46b8a13f925d9ea037369b37e35bc23a0dbd8e35e233c9b5acf2f93062dd6162354a3058ec63ed4ee9682b7cb022e89bd49a81f2a0c122dda9312b2343fcd871b6921aa44c82ca910c2082a8b26ce25bd820b67ca8494b058d83bd9d779104fa1999c3996605cdda4ea0d1a55584f3a7d860a1c94a11c9a47044930dbd599ff4848a48b7251560a147e85bc69e44b0c95e41092b87b91786e92f77f69b9f414e4cc0e71aa098c5c4f9d679c957317f34ff0152b9a32592836be49d506955c97d668107d15ad9c711ddd1296ac416be47a49f691180441c19c8d7cce7ff04e4b605de2163dd58462a17b67a5c10130010d90a05f62456a7d276b459c987d01c66964cf835795b9f08218e3c84dc5805b168bcc71fd0a4c0a5ae0bb2eace300535620a7d4b609d47d30cbb1f0a3527078f930942b4a28f26ccaa786a9671577a257263c3e93ffba795c78cbc3de39804e350712f5e8cd95c0d9adff61d1b7f574f9131818cc80bc0f493957e58a7a6fbc7e6e16777ab71b644b2305213f22c6746bec23abe91c81d5c8da536ba46ed666000c89147943d294d6d2a30e2c43ee02f2407de9242d7ab804c9e87065e2eb0c712a9c206f37d8340439c43be29e7d1d697dd566acab48b55f1a426cb54ed7cdd97c6692e6bd1e5e4f7460223c282d273d0d7a0c2df24fb0a1e61da740c8193fe6966e520751e57f4e110436fa98a87149be6bc8ce368021526ffad77f6f67a0ac8dd6e61cf672ee69af30b82233bc54bb73f7eb03dc399725d4d7a4eeb7af0699dcf5e9002af0a74662cbe53c190fdf62ea82a56c6bf6e2ede2f6e80194c054c1d57bcea12120c6c6b6f8ae87f890aa5a9800ab489faea7ee5124cc63a4a476032ebf10a8826af9f20100e9acee8d5b0f3792bb3b91f5ebe5bb96a27dc1d8bfa950fd359a706b48d9d09c1ea83c9f051268660208c7b635656f8a0963bd04f4d0ac9aaa1ab3b022c85a3ee5107681dfcb7b2a8f41c601712bdf8b915933e0a46a759ce9a49d1b403878f8a3aaee4f0af15cea25d09cf557a1a8a38de93c238bbae8336054ef91dc5e065fd70b7432446362b57c98ae610f86e4b65809d1c17b169d6c99f19b232d632dd4241f04a77cd07c7ee60792931ec7e68280513266b406c041591dd78cf6f74f5a2ffe5574ac203e019234d150dda1ede96af252524ba8d34f76fb48bc95850401428be5e3d460f4500a9fcc1e448cfbbb32220a720cce44c35dbbe8efa20bebbfe056f8e941bca9183b4a55b0c84cb9424213733bfa900d1a1a2d435028d105416805227823238c1f7b68cf5c44cd2921e458ad81bdc4af0f370955fb21419ed8e8bf4715e18eaeea66e9182ccfb48b899f13ca9c2516dcb412a50caf7f466cb15735a08bcadabdae800c366d3b670304f8afbf8cf60e465b5d46a5711e53d3c1c2961d69010e27736dd2204c00f9c1f3bf1ceed63194c41a777948142704666e9c68a7dd308cce8da90bafe0e3f324d97efb4aafc4a6a21ab4af65ecd1c6db52ec4268b4209fc5ec1883f4c51e3f9e1c6b30793163745e918cc2ed91e2a4a79d52527e6ccc3aa38b3f80c841623a1d6ca4a68cda940d92070122669e7051ecb306405550f22911afc4e99b7951c51186636070e7c08fce870ee3cac932fa0bd239487802ed63e37381842f4cadec8005da3eba8dc8edbbfa2ca21cf1c327db19282dfef557384fff88b511f64653657c60ee38373afdc3145aa9dd995b47877749f326259a7956cd48087e31176127f1ec63c31e41a71314430633224c3e5d6477fdbb3b96e89c42a9dd3a5d946641fcee4679bf1f1cc8d19ab915df90b72183390900bdc0cc77e1f2980bacb5024b2a3e9a843b0b33d067ca66290bc0a896d51d7a505a48b31caf066c703ed40aff87a2570226b37b80c8429f78dbedc27b0017dba9274381f4a1c3f1729fa09430048e01a42256f2fad912dc10ab9eedce4bdfb8f7056b867305f718531d56e1e0c2ca92908cf49ff8f3603a12f87bae13d70b011e39da5d3a8276d96c5f9ce19f73d63dfcbe92f61eeaedce3a24c52ee0bc7704ba3c6c14375b1345a10e040412aa2598a250531da4afec6113338307e98fb5d8a50b8cd80146cf72f3590d4c77e625c27851645f0bd4b87f13d1de0072c2ec2c4ebfbe7bd203b8446d2a4766971a068579f0664b87fb2afa2b6a5e7b4da108d4259163da602ea382836f06aec6b461b27d5dc7005f620bd87917785caa3c000392c04db96c9cfc67e79314602dbe53d3c2d9a4920dca9187f68918df95416f9df77e081e1297641c65364959c12118671111cc8d7810a1240b03d97c4185ce18af3c0e5a03d576185784c07fd0414969d37218383f12bf5725890e969153343718e9dfcda96d523297cef04ada2692274c4cfc7f707b7c1f3a57964bffe711612a9cd9d4ceb0ab2e7c6065225591590a01d4a61bb3ee2a1ec7c4f578ba6b5ba7054ef919708b64826a466b5b508fd7666a522ae41f1b6fb03117ac2b9411cd238fb70190285886fdd1b7e554857ae423359820b99bac04cd972e1ff6551d2cfae3c6b38b710917cfc9d4aeade74e428386f13d1bedce33cb52db8f5e34eaa615e53468c2f0d1e8ea8c045dc5307de3b570a18daca93c437fbab3f215d2beb5add0a852090db68a3ab6df76793db4c8367263a2c948fea6e8b69b659976ce379cf875d079cf0b362bd48e49f80c16ba3561a34a82da48e41d2046248848f023e3b32a19a705f2b813586f23487854045f9cab172bfc091c292e913380584de9e39da21edf28f95e6c8e34dd102949dbe5fd5a2000caf454a6fd06843b83e24a53eb88f71d6f933c8743fbae24e4174f08079670a4ca5163ba9ff0ec9f4448dab83e63d38afe94be47bdef35927d44bf8cffd8f74adb361f693ff2cbb5a19122ebf49ec8712171fbf3fee2239856e5eb46765fcbbb1eb5f7ea4a28864be19c7d3fa912bb25096fb1e02a3f1337b6010e23f50f0d831d75c72c9519a375ad04831314a1e55fd95c70a1349fbea11505000486c99d21d632cca57925bc3aaf8722694942d267371654a6b4b89b9d75a01c02774114db51a52ee0262f659430cf99641a2295a28c3597afcda3a840d92652bd1ac9fb8d589eade46de6643ad19b59f8282e583f540ebf6ee5592c6fb21b87747321b809dacfb1d7bb3f5383a472f45e2896f260b8189a7eb758d2ee4fe46a08d3ed94c91072abeefc7f27b71e5b0377e28b62d3f06d99b0e184bccc2ad41e71c788cbd36e499efcb40f560f8138a82488e51ad4e27637c04d681d94299e9f8911858837f11769eff9528f341ce41d7f0f9450a6a3805f82b1f73b365072b3d3bdeb082b9879ff5007380cd9fb14d5c8fecb9726dc4fc8fb5d434c4a9df108fbcc6012a5d4ec59f4b0b51fb148ab413c74960a179305d96423bd65fb7d4581c02f55e89c0ce92d1de8b331c39d624d015511e662d948c150341aee56610d10a891f5bbe9c3c8910e7fb50472564c77e0a678aab3971208c19a110fc50eac83d0e2702f3cb50bef5bbfab501fc4ecde389280d336d2883e29ce024e6b1d0620db4e56338127c1df1bcb5e668172c1ee32b6f0d668246e5b5a1f8e486cc98d638b79db57e7507550103a71c1264342546aa12383ecc662cafd705351fbc5897028d9b7f19bab25c37982d617c38ff967a91d374921f156e63d72451cd3ad78fbb2192e3b4f1397c656f037372ef7b17ce0cc59a674f54880b5e199c4d8c9024f31c5dd73f047488a0f5b8506db292b7e13c2d65e61391a761f8bbd05da5e7b98c603204758e01634dc4018264ede35059ad4d5a02a0504980ed3cfccd3632ca0dbcbc24536b21501612e812822024bf329e98e95cb065a85f61e757f0c0a1f7bffe853d2f0596bd5397212404408a531d5c457646ddc0bd4ccb284f3d6d831cb76b71f438de6ed5d4520410a77be615049dc2494fbb7526faa56c5cf8b0cb788a0e60ca8e1bfb8da1d5cbe715a912b205dde412845133da8afc7927428a906eb366132efb1ad25fe1d39667beb068cc8e5a006cf3a7aaebdeeec992407ee8e3322fe25b8edc84929127b2c79788c4388902183f771af6e4c01dbf56723014ac5a55b780bb731fe940fb10149bf17813eadafde880061d849cb600d680f51a8fc3596f55e0f862e16156bd17411d8009c13982a4b85f8f3f3b8b11b98f912da730f2bf08bd7b0601c609397d3e97eee17d453ce56fa21c8cd9504321b389c9c14b45cab0a01c1f659c7d9cc71767bd0f03325f4eb57af7b86b01fdc95cd3ea9a6023fc2496f489d74af414aea16289ff571094d7ec76d3a0f462ef4747c13a59c8cca8aae9294de906e3c4002ecb2934b3dc0a24e58ca5f6ff0a610c010838b750f0748f61aa8ee22ff3ae2274212f5bad5d2b4c236fefc5f776f0a06aa1713cfec6a097cae438bbf5d1c55cbb2f2fd762d64cc78f9de55771151b254eec6c6120d12e1e5568d645309ce428eed21145ced593f9f25d910c9320c64707df892a190d283ebeca547f16e60752ad990aad44d29278a312e1116f2a2550cdc1ce3d3a18bea20d6ab9a0c4689c0f1aa2133e3b10e18141af2341f4f48d97534f23e35b19062035f9bdd4a2e5c6e5279322a24c1474bbc417878b3a29933d0ac31b40d1998948fb29189a0299aa7f94cad0b93b6a4891435d7b96b3610f5fca927ab8c2a0b98dd265e3cf89500eb688f5e785cf8bf334a11a423a0413323ade4fcb84a73e57f2b16b1c6210802940294de49901d407de0519eb5e3e43bf846c038a8d62218001ed06b784057ac3c1935a849d57a376575d6b3656cb799fc5d68a90b6c9ec794548f83f8909820dc71ff5ad22a387439d096826f19f5eaf6d26d7380b04fb18697a233288df274081d157529dae02335d5f50424cda53646529175adf41fba292c0c8487e14f698a61a6f2fe8143f648ce1e99108cc6ec204db6c5d57a9c4c46c4f3de17023ff964219da53797a135acc5b076e814c1c9748791d03cb1cb9af7ca6b00ebfc968bcce6b3177d8278953234f69f05be4c31d4a32bedca7f4a94825b8f1b031d57ab82939fe5e244c789b939e82dc76911110756eade806dc6dd3b0a2fcafcb00a145f85caa5747da9fdf2c8aa3e43fc3659081fbc0a4c78207eb167f92cb17eaf15c0ed8ac05e1a1d4b3d64e8c46fbe000e347388b428ef7bcdf9c6b3a5508da2b87f93eb65b4199a6f1263c3f69539c1c02307e79c2d0b97e2a80b2529786b9705876f3789b7dfce764a6cfaa3eb737aed95b2ee48728beebf923f93576a03d933897c2b600b97fe78204f2c0e6202a909b5a595cb2c19930c145c99c8f05729514ec14b979135d8545d3360de0f4b2a29ccc49dc5a7f409038aecf05c1ac9858f49b4e299f4eed41aa296ec90fad40344683b3e43c6baa1d5892158c4613c6450af70f193d809dfd9cc34d86d6a3710450508457a9fb10162ddea66c1f6af7e5788b5a2672f7ec1b823957d7f3cfcd90222683f21874f0d2629fc97d935322c83c6e9927502a7df83842031bdb6f7dfcc921c71254ac44ed0ae5f244c3bbdcf857d033026b8e27f71e1eaf9e2f8442a44a1adbd62c7a727e9d5bbad894898fa671afb2083f84bf130b8a6eb244d9004e4a0ee194ba629c1e63f044ff9d7d457a15c2bcdf11a0ab2e60341d6e1247d2a7f6c3e0942c702ba002d2674b737f01b06c92ebdebf0cc0b4005ba624907b6e1d6b6b7f0e012138074084b3a3470675ed5e6689e070244804b74d60991e2c875008b71aeeb83978c8befeebb0c3e9d3ef886f2b69084c20ad71cdb9d71f026fcf92b4db680a17eb6ebfedf611f029a0f9f997299e3681eaf5a385b48fe5d36f8d0f3e532897906ac0c4d6f9824f617d7db0b67fb248d10f5f5833259455205c771e57473c8f1822e530796edc3821c714d010501c6c03b44259e9393f6d8e4d7ea5e934d8e43c01a49773c5977833b47965debd6484ef0d7906a259466e6234e858af1b8e488031cfa79d99d74857bde2f78c12b18974c2d249d53b7ee2d30215c9adae95648841250dfd5d6b14afbedf13e5e7254ebf586ef0d61795ea5b4b19f8d454b32c5ba73d1cbb0a13b2377f0075e2d23406bc981327d9ff6b9613e2793535c12d96327d9ca043a87bf90e3d01ffcf5a45f908d5c940dd6497b6e1d03525a3777a93b1cdb5ed08808c222f38175b95c3431e31d097d715f84721544f76b6594197b08f1c83770f92d7eb3b07a49c2abba5aa1423c9930e63bb16c5d053f42dcd72144ca6d81a7c9e462baf82ab9d3b0b0424c2f06d6643369d1f1f829c3678fdf06fad42487ddde62bf517e095f002e87f696366144ce0c12c19c4a8a8ad505053a57fc1c5314249e06367bdea61bc9f629818d00045d970ddfd301a403a5b5f69f3c6d04195387a83d158a229a40b4bcf0cac969166870c667595e6608fcdbfd6af3a02e28a46800fa39ddeb75a97c4374e455919f37e88b2ca3a2aad8f39c910d3e0ca06f907ccba94dfc4dba037ae9e8e90fcd6b78ff434b244dc5ed5e78214d83d0f0ebdd5227ab9a15481fdbd2f2d181302f7c20d2def0233f14feaa394cb28744f7c1ebe60d2fee5e138a64cf8c5dfcf2f8ee7d28a244ac3982682fc87b258d2d6ca9218f3391e3a2a34337c52c4850ffca698c2b000d886b4abf20b86851e967db0350d568b35df0ceb8b6dbed462f1c58dc090f7de7d92d8e4d906ba4e2a79004dfca4310317ea90a91e1a869a86ffd3e5a9166244883ed796cf59f71c24829a995822e809fc4892f9ba87c22fb9a7d325b940e8a947e6eef97fe00e08e7d8a797d64d71a3e28b99fd5e2ff2d3cfcd1e623216efae757c2e2ddeab9692e5cc262cbe76fac8e5b60646e1abead38f2d66e3a4df3c2714dca30ee69323e536a54a0ba089dfdf3837e0d84dd0d39cb4eb809507d783a7e00cc387c78dd9a5d8491ac362056113a63be1e98c45ec3a1179a42b0e0f4d2edad2211c0992c5a7c1ab00a813ad378f1fef1078ea2d0d44bfa24d92391381fce3143bcbf2b19074b5af2655c6b9d4c1b9739ebe030c7b8d4acc4cb9f9b3d74eff64982484314b4d1c089be3d41b934045aabc6e0665d55fca5a09c39eda8e7aacae2e5c97e279ab117d3e970dcb7d0cb22c24c9bf74f0beb85202ebb2f2a7f5272fd13bd40415fa23df1bb42ca2d4192d3af8f7de5dd1cb53e46fd0911cd9149e0551b1a3e5f1a33b223c01c9d1eec81c82047323ed3403600a24ddd5243fbf5f1f580c5f6e40feac4b38353eeabbd97824193080e44c50640da21b486b9461b8683d4992984e997dee4d97f5e52d99d813aa67a60e3021673d4928f09f83a64b5daffa27130a85a3179209e7670d4923794d886a9426f06ed9b6861aff9f4266391f6c525d5cd42b6f2a6f392dc421491f55fdcd762fe280baef626947b67571caae4fd0c2ba3cb6078ece1a9863b9fd6b07b3271945f916bf617a576e52ce572d8dfd96ae477324c4426a5b8ad755c93ed7377b5b6c0121d684e26783ec210548748bcb57a848b6b40cc4f474ed8fc8bf7f6b4c59649641da379b623287b0ee7e91088e5747d46fea07f6567fa57017c729e0763baed03f296af86251a076707443ae7cbcb7bde0b5eee7367a779d80c7f36fe5ad654dbe47d52177a17d2b80568ac653c79d3daaddf2ce51a39758a5f136aa38f0402f9d13b314d15da993de13b493855195924663e2e40d7d50f6010ac433f49e7b5df660b452ba5c095df8c32972572b11cdf766cc32b1195a2b7aa4d7c314e3d07123ea1329f2a58140404c2d2652d6341224b7b29dad2667381f0fc2760e718b58d93af45688c5d190460f01b18b916530fa39e4b5e95a5caeccefa1f4238c5fc2b0f7175fac6e56782dd92c7bd42b6b435f1d6b66c6aaebf9803d203eef261290ae8c4cd77db888bc8ce8282f99e4604c4cb95cb718ccf956cc3dc4cf5867057abfef53277370a10a09ef9bf803a246753e3736f9d5603f11b05b9f6970ee3de89f30d0946e878fcdb84d82180b3c7af557e7f323fcd59416f48a96788c4db25e7179e58eb74a3aad506386b406e6f37ab13f521e6d69ef58fe0ebdaf3a7fe5406a9d2c6d6d49a97de67b2172bfac744a399db2ffa26018bf611d0aae739c8d8ee2b40d85d0d3208f051b19e815cda9ae5319b7a671f1b3de491020e2f96921a5fb8023bb174c50b483cdcec1156704e2d1ab7e5a6c130e9ce4f94ad66a10a7b46b45c1533943c3313ae02e12de7f81c259510b76f21501b80e21190d74b1dbe3a6a6a1cd9a5416b01b9dbe73e41900801b2f13d315b49eed493aa12e6a35a0fb0c11ee2f64566e161c266de8ffb0ce8c77587c6e778deec0687583afe7b5b660024ba5b56dc72b0bdb16f5d904e881eab7a89055ad4fcafb616db9429e98b4565589eed452e3e579d35626b35cad44191c502f566d4d2c9a316a59ee9af1844a19daca360508844e9f9e595f01015b6976d35ce546ccdef09cad1495517b0f8069c4197341522663d62e23000c0c42e5aad87afe0254bc051bddb53cada3feb692146705d1089f689bfd16782afb6783e14636e075135b5fc7b0b4dc7d820ea15669154e9a68a84741eea1654681b03809dcb20d1287e1d68106466a6f8d7eaba08dc27bceee6b63cd65c8f81b64bc875d7676ae5d6c1f69df82b5190fa55c7c502122ed3b16b2efe1b814f9ffab7218db517848141b49ecb47a6119d44ad44f1e18b34330bda40f44f3bd3e1e70ab0a723043894555893490a221ce7d8ef2519042dc7480344045947f5646696574246818d6d34782a7e97ed76536880ae45cb2519ccd1f82b071c7da4fa72d9a3fb5968cd2b90bb4e23876dd8019dd9d5d27475a8365d8f57d702c83191bacff53ee7957b6cad5f5c904edf9063649c55d6dc2261090518e4eee309ca22712583e2f276b5ca43adc3da329a8cce6b5881d51e7a06eaf60aa038652a4fbecfaec2e23558eb551baff54b16de4b4533f6e6532cd867424a0ccade8679adeb19e71dc439cb98fe80cfd426a92176f5e4cf84529be2991744c39243cdf27ee4c69e324497c80ea632764cd4223cb7be2d8574f4350be1f1e2c118b38e28c852d6996bbd2b40e8b4e8896b1031190bf1a7619e6a2d60464168dad2be57998956c4747cdfee1d54b191ea587265ba773645db990e48a69a11a22e7aa4d43e8bbd962255df77137a458a945da85a01a4866d1ff36b26276bf52d9ab9d6e567111692d7fd80e0c968d763bcfb0b4ce2f0675e093b06655d7722c1cab564102180d3e89d75434d63345ce8b6eb9c66a1104b5f27d90c450fe1f8b1fc24583f8a6881c2fc43bdf3d06aa1ae62f2d241111e42bb75a15bdca0f5051c141d697cf43d112984a642c9fc4c5393e1722d4d6ac9542c1f9bff4cead501c2bb8ea1f7bd21f0eaa3ae35119c0345c61d13c9f3873a21b8ac00e6f90178e319eab1d5cd342feaa190b832a5b0fea0cb37cbc2eb4ef05db48f8c42a1f03c4ed75f637100fa26f9de36dcc199f8ec435b770dc278a83fa916c6bb8c75a1f24fe67e85f91b771cf9148672bca6b37bd50ec12d14200f89a22c3d2a12ec669e9a4539eb765484993031ae7095700b2211643ddb698aa303e4429bb45295022d7a9fa220bd2f65391c69840d416f586c695b80cad29d43b875920c62ec3b90ba7727329114612a4747ebfc26e7bc07a7ce48f53cadfa72831a9320d6b5e4d5b6860b66e65b329d12b0e6bd617da80b4b7df9e341e5545e6249a0fee8ca9610fc7403db640d0e8dddf586fbc59a5ac6e148806f433e420a8719fcdf853ffc5216eb40acb8aaac0a121e8ae9912a8f66d86c44f9bbc25a0eed9f1136741ab7efb69ea3163ee7baad88f75aedac964e719f5944375edf9aa5e25c166f6f4be753d7797cefb005835047a9ab798ae949fbb93a42778bf2e217a26dbb1165c2473bf0a33743cb6171fcc42137b39591e2501a73b493daf3fa47a4c2b48b67f43eb94f481331235dc31fd930deeb27ade23db01b7f2821ef4d81ffb1a79fd1ea13b55a0f426a28b84451071c6e77377d6379cea0f334856c49043484881e12e4479b3b010440067084a59b02dd65b01156a8d560b3c13f3620c923604de0babbbef66cd66abcd7c50981af92a4c24e6e0a60b04dcade53a7c9e2a3fa3bf1c12addbf5c2b3a799c734c9d52cf2ef17b266653c65b5a9ac628603b2973f691d418fa1fbeed366009468bdb6b0b6e684debe781736366aa2a585fdd39ac3b1ea55bda250042513d09d17a66135c5e47e33c94169c28998d3ece9fe34e7feb30f46b510a01987c2ac42da4e4fb48d773ae04978bfe83d5b7f3cce2028641b8eda86e378b3bd0a3cdf7c0a09e9d1fcd5979eca483dda2b38600b4e0a16ee245c56e501412916a7b786020c745bacb3f0019ebf8039cc81dd67f8a7fd7328e914366b61c182ead61b450ba91d90185d2fd7639b36245c429ca64f9310d068a11cc68fcadf8f4c0ac86b7feb16ad57d47a393f3b11a0987fc90be4e46f802f8bddfa5fc2e99a9f110a0a06eecec02830382ce27c370bb09fb669ef0ed3109361a01968853e61c46993b2be23ef598d701d3a71068249396860cee25ad216a9b2e4cc4079352be4aa0375c34638354646599f7aab603a5931649cae236f1476e286f19c5c8ee1a92027671a956dc26aaf5bc17da925c8df8282e4a6377d73c28f749db2d6543db52552c04ef384cddafd96e1c45ead293501f5f20554e730210bd18b6885d49c72c8b8fd972ac8add9b916303f2472065490af4951049c106988a8e948ce18bce777dcad4b0b08dfd7f979f428d7a52856b9e88d1ed97b0e1e9d54223b9264e9658d4035cfee8fbdd8545bc07136821db56f7876a188ff47a805f304cdaeb8ca8ff2bde2c95eb85de24a193f725b408d91af75fae52bf0096b7ee0c348fa7c08acfb6639aad0a222e0d5b7ec3cde242f5a79075e4450e749fd906abb7a705ea84a048ea62d3f06c30f5546f1296c21216759d7cb46a316756b2b4a078ec2f9192ae337e4fb509a84463145808215d1e83cae4e0287b684483ef533a9aa1fc1e62d153d1fa471c10ed321f1d37d61334e30251211189edbcb5f42f26a2b73734267ed25dcf35af3e6832c6b07fa83893e6bcb91dc3725fe59491336d57b3e8a4e9f0618512d332b39fef2c4e4dbd6c3b0e872bcd81e8f15ea71285ad55bf4f9d994ed1105b13ac600548813506fad011114b527581ecd7f50fd016dd34524b4486cbbeb15113040663786b4aa753698f617dba2ac8c0321d0c5e072a5febecfd5fff0cf7a326f127018a0053ba292d658416a691f4b560a0314c8b80331f7fc03199258451f6e3bff28d69b0347e34811080563c7330dbb132971d339cac94afa1f46609670cb36ca1901f0d59cefb9f9e0958408c319b6753d6647cbacf6e6a360cc2db46c4beed2769ff862951a92661345e70e1fe4525ec1331a0d2ee80c13f72106beb9278a8f7a51d1d331771c8037b20ab68def2cc2a9655775d68a480b1284adf6a2132ad143463959285678bce814e50f13699268f6b761fcda421fb28cca228ffd760630d194e593b35c6a53b2bb86ec8347d1178609f2d6639ad7d5ac9e068f9d1666048250969b6c17a257e8f7cedd4b435980b7014748da6dac020a06dccc34577ec7de64d777eb9040dd406721478f09d130e7ac27e3b343572c5729a9f53d0028caafb16fa5b02c43ab416d0b7cb990bdf08df2e3d2e189c6820d6b5c81a58fbfc62fac301ca808153b8956473551c5788eba020236aae779c8cb1261d988a4f2e4bf6b3d772e0959aaee7edb6db4cbbe4060cf2f502cc3fba5023e25bd0e65e1dc1b23a0eed40a1d05a05ac71c6a4efa402563e0da54e15892c35eea7c320bf92b37b9ef72a534c745e73d9cb14da36cdc497d48e9c79a189eff67e6fe33c7df8b867d51bfbdb1cdd6c774eaff612d3ea48c92fa10394301f4bc026ed4dd933145f2e33750c165dad449a28e22e45bc45b2bf4fd5206327bd57dc6657d3f0b64e570f9cb38e1c3cb7b5357e7a67a2c72b1b090042f38486e5b5b8abf4d91a1eb8b520468bc0038283ae373e7f2bfe3ac13908e2f7449a5f3d0e575b11a2e9f5e0d601c1428a24b9c5af7f0d1130de1ed23e3539cdaf690cef9c4bd175532bc75fe08a0bfe38c9a15235de01a13c98958fbf0156e4adf0f535b6b0dd3793986e37b4ed8597e3f1a0b72bf9b331c077a96d79b69ef6a077cee83dab091579c069c8375dc749bc1fa5de9137e42f69a84797e23379db1d989d41a15d76f874d61dc67764395dfbf0af5e7ffa18920de4545f354a78559ee9ddbe94341857864105210cf4244e04596937054af26377d9bf9ce042cea27e08754dfd019ef848b2f4448d7c5fc38d98e51f2fb23d29940cc73b45c695aefea8df5858bc3bf118dadd3a6708018fd9c169c051698796cce876e1b48b43e64802883b153b4565b5906a753423e16c467afdace0813f4b30483f1fa3ab0248799ae254db4b21e8f6447af35d89257e0e8e377abc6fb2933ea54b62e1c93e553b97d215124c0e5ff4333e246e513b488e6d448d958af75474eb81a312d7657ae59a8c608b6c1d8a8e57693cc04d604f27911c1d0a00c5c42a97682e7b0ef64b31032a4b7d9e9cb705788c01cf313ea65b88e8370c7f6165eb461d9df66476a9ec543561411ab040cddebca8bc57bd962ca7443fa81dcb44c666fa89cebf549fc67bcfbe5e7aa2a08f81bf3fd95b4cdbfaadecc701fbb013140cc6831c7d94c4e8d43a0090bfe12647654ce6d6647ba5d20e62389841f6f84d342641eb8ade25cac2d7807d23d19519ced5408e34b6021c4d589609f788680ea0a58fc0e4f01a1a438e57599c2463ed007d2e36be4d3e74dd726f58161e0ead88850e1a2f89ce276f5e7b16f0f6ca88127ea2d02205cd69cdcc665c490a0ed641395a11f5a5c197636d68cbe6dac2b4fc2667ea76b2a0ea1e30c2633c052d283ba15449448edf1f424836d64fd96e775970ef2547f36a7d1b9612c7e68c89c2639e823dd5a119526962dce4ef97c32351ca8062c49a454e040227ce4ac302d298b39e2aae0b1d50ebe3c68f2f24dc743bb6e28a9832d0ba3179bf12ae552d38f5ad0d8c986c8888d85ceaa96ec18ec166ef6c12a9cc8ad22cdcc86763199b36d7e016d2e5d90007910a4f22d0d7f041847b1bcaf9dfa57ad5adaff50193298fe1917c27368a76ab64e3b405e8a7a98395baf4f653318251182b1befcc4c6da87c5f10dd310fc8b958ce6b4ddb0d144bf54623f17f9cd8881b788b4495a294c3584dc94f8a9429e3c58e53c383419cc9f5d4b4e67eb9a4ab6195b2462711b78d999deb88c85fed61042c5dcf02e91afaef9c5100a3f1b4dd45e9c124130a069b07363d027f1fab9b63a478cfc5a5945df9689dfcb8e709b8d78221327da4e8e89c3acb1a5dbcc04df351aff592be3a671f87feceb336eb8c56dfadbec11719e8aba5c67b3a8c5ea88493065fc93195ffd62a0919988aa85bcf50b83a95d7f7258c7745f92056979b7fd4cf41a7f1f17774076985988db839f3b33a045be93e88bf85ba34c2c2c60f22a261a4e19e11396c19eace5c2af202c04c96f2fa521f239","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
