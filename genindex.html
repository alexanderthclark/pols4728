<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d8aabc381e2bbf4504a2b24ee5d1c63a4c286f34db7dd9c732a222dbe3e92b70ff938e39ae3cad13938d96cfc5532358554b305b5cd85df8cf7b769aea5dde038796b0d6ee416beaa49b7ca54f8bcc45ce9f66cf76a1b81e92dba0414714611a5bdf794ee9cc4029a6135b87ede31d73f043b57be36100185cba24636049f8eab973c087b8ceca70010541baeeca3ff788eb56d6ebbfe5e7606d41e0d2a77c0322a1c832dac75abbfc4d7fa675f860dbb76c2f3df9ca0dcb2a80d3747c5c3b6e23c1314625928914f4f2b51e0c590652e9fe5fcbd7bb887c63029be3b3293a2dd4625c97a29b8f8e5d2c916870e16fbcdb316d8a108a2b998d80b86780bdeac09a993a5a73afdfebfea4c4a12d6b33e58e9b506b1351fee771092b4c1d40f90edce109da8e65aa7ba5a1f59e3543b4801beef301ce459c156717624305e32912701ab42766080920ee82dff155d7781d45e2997f2ad5a526dca26d59c0545ad888b0b83635884c91913d42bf56d4004a50299394961620c7ffb46689d21483c00b23cc94dffcfc01d30a43d2c53cad3e1ddcbd3a769fe81de7d7e5452dcf4615588da4c080844249b14b9f48a97c1192b5524ffda1a835a554553a87021f5620d4637eaab8afe9ac732627fc87da781f8aab1aefc7f5b314e48c750a2c904fd46f8d41758730657ddaa20fdf7ddd2c90a995f7ef084cda0b405f36f0013d343afe4e2bd88b8c7e3fa1fd8ff3b546ee910e9922831a98bec54634e5944d830aa7c1facc392a0a9baed478d72e9c37ef754114520fa03e2fd94f2cc77d55c4c357054142955b6603a5c677db9443eb174da1c3caa244b0e0b091a34e8ee7306e01f5a4237854690e862958e8fbb78750d75453a30076fe3cc25dc4824fb25439265647089d630903470c51f9fdff561473cd629f2f39751bdd6855fed3a5cf11993d0d9f1a99e9e3a6b4e96d1051cd8895535c35af55866b9c949b0d6e4456d553b850b4f215424a5d496cd85d63c184cde934f7249d5989a01803e452ed0ad7d97c3a8975166e2dae1a6cba6c6352bca50bc54c2712215f82c29e70bd825efc2210ed86e208f6640bb1541a5766cb7c572d497cdd49f6240fee7d02fefdc13c9ef2da8b29672826a5e9e9dcc9e74b416cece8f65a6184910d314d2ad4a44258054925bed1f30d1022496cea316f95bf5cd7c738ff83464a854be2891c7475b56b5e1a07edc60fb9ac01fa525691f47d0fa77881ffba8335291f5af5440e1fa7e2fd62867be7cce8e15a2b10346e68285a69ec1f31cb81105c16f5c8f6af1524fa08276167db278e0d2719095162174fbb420d8e196333bc1f0c784b6259da5913a690c132e381df254c54f2ea4427347d7348d7efe42fca81a7c9c7b879d21d2162f28790690bc2fc67f99b7319f162fbc7a5853bd1d8f18614f8d5890248f8a3883fee15317749f410137c6f69278ff7fe5284b0e2ea9ac0eba8cf3be878eb8a4a572aa50be488d4a46e438a709ea64ceb5be25898f77b9cb1b29fe828a17493ac1e3091358d2aba1a031207a1887dd840656d6cd0c156bad23f0825c53954c1315e5dbe6fd1b97fcff22b001c9f8a94a9765e801eedda89cfa23f914a3bf27c901b1a1c2a43d0134280b907598ea4f8debc57c999cdde422f3c51e85d9fc468ae174c3b56d3cd980a43066299a703b724d11eeae3ab5032959104b5126d7df6ea5901097aecbd325ab27c6466f24ed118fa1b11b9dfa7e227b203db93740f4fe5e589e204363f35c76bbfbcc5438cbb4d7ee73f58e8d02e99645dd29548557bd9a1e57e2633aec1df9821d5f4fb42880f8dd97bdbb7cd1a79e594d2edc6fdb410ac29263e028b7d376c08b373f97f04c5a0e99cb0598d710113bd393205c78789be40e9f1284e0dc2f5db356d729ccdc9952ee4aac4fc1af693cd0a5b6ac0f29eb1dfa3445c362cf81e90243957763cb53ec367254a8a9b15d86954ff27d362d12c05c1ced5777a26d5ac0f89d9f051725cde84dba4477c1ea439c8167fd3d16e7fba31e13c696c46e02a0ffe6a9699207c417e68763b30e48d19e17a08814d5fade7074bcd2c2aa62022b6fa17d7683c8968d3abde5f644d95ef2030b3a60ee0492de60c0973fdc65307701add5621ba3e9f7d695a4fd42a3d2b5b3f18d74aa3d77f2dc5358233d9a1beb76ff4a508e2f0002a8067fdd9fd2f785e9fea919c0919bfbc0fe89b4b817493df205bfdaa944d27e72e9ec80a5d76d987f7f93eaffeada5e0e7c003e19e7ccc8b4cf7efe964cecaa7fc57ef73247b0412773da7b8cf497561adbd5db47e9a1d42c9055c9fb50c5cdfda11d1f2678f1ec02604515383f4fa8a170884b65216bbca0c8e9b1c8bed50ac2f6ec41f295ff2cacd61fe28d2277589d8b8d99fbc9c300a6b422c3aa78cd98a4fcb9bc876d8b3417e7e53732b526840bc4126c83fc763050c00ae22c6ade52be145f5ec2983cddd7cecaa886080d27d6bc627338c612d0bae305370c8869606144bc0519aa6e00f1e8a2bba7ccaa281cddc4f9de157065a2eff138d91d1109e4a570d9d8187174079926a31056c257842042a72e043474f062e6e84f36aa1097f382c1084172130e6651278c858d4a39b3e2c04910cab63377799a6fd375a72e190fb67b62fef2129e410b5446978e0ff0e7405d80a308875c5608e163e1807224dc24f4e25237f64da87a8c87705751b60b8839bf61572d3bcd546773534e8436674d0aba9afe04f263f81484f8967646ed0768fe24e7be94bfa5dde704815be34f40f33835f93861501a81eef2ad7fe86e9f0e3f3624bb2ce85daacd17c67f1cb34df5bb89799c9192be22c8b4d48929bf7b8040ebd2ef500c8d599e63476ab7032de83d52d14a78109a568f89c1df1552784991fdab629504e2c821ceff8eafc8e6a4afd010f04b6c7d0740e847818699cf59494ff08b94489668516524d7a14c546419d99fe9c32382bc6e54dcf21ef9721c0fafeb97e7a899f83621fdf9171660db83a2f4a4988a3ae495ec8fa8870e6dbd88aec305033b68505708c0c4beb8cccff01957c35dd414db889dc7126a85f86ff512f5ed9af70524cde6802a9da9435712e8497801f8aa0c5cd6fdf7fe2108c388ae30b1d3982f242fbba02d5b10f87f8ae75df888c271749177a013a168965a146355fcaff6ed8fe03ff22c98bf8514bf728d6521c4d9ffe5fcbe5dee40aeb6b3e2cf03c2e71ef68c3d7723217a563c2504db804c6bff46c62ca2190d62ee4d994cc0399f74c60fcb6143b37144adc56af266b141716ca681c911f59e3fe7a141f5ec4bd7a08597fbd9997ce8dff8915bb17efc0a0211f6cef5eb1c1d70f639528e81dda84c16c2be6a6569db12be5d7326d4b63218e2358215942491303704eb36723cd295f9f7206d2e950c16a1cc379981f90db237a913fccd9c34e5da089ab4e538dcfb97670989c33231f2562b1e7a3f44d41e3063aa2c7dd375e872b7e60179dbb7da702a5d906c5952eeef1b847b4b4a77521116143e009aa50837ec169481b96352b0bfe05bb519898a2eb7026f08ba7bfc612aa25507ad861797968b0d12534add1eaf3ec0e7b54bf2c3a64bd319169e789591acd05995be12aa071ff1f5fc09385b69baa5f3d1ad8df5d4ac4d04c2e65093d149f1da90df2bfd0d4419d24b5ff04156710318112bcef379b6d0c2fb095b0726262939a627cddaebb3612580c68837da0d9022e183589e3f60e4bc8fc445ffd25d052f239e948e7e67d50f5da2cea4f483b8105d211b5bae6bb5dc53e195811ebc9b977f7ab091036680a2fbe271708c052a34c99507301dd56038c95fafed8b1d850034659555c52c0f58df17e0292228bb5bc65b5245126829fd6c990a3be23da71553e982a603271e1bfe83aaea4a86a88429e3012c1820ec7393feb31dec56dfaeef5f77c34ca214f55b8e8bdfb4aab5eb57674bf6d4870488b33fc54c180bf422ae3122f0b588df071bb6562f17ef519b4be2948c89e07be6e5de12b31889e908b496d19ab3e12b97299a0951384f926baf3b8c0795588ed4587c5d28709c690f8fcea921c02f8799389bcd44eb58a34d3956a09fd07316b107d3dab62d618875fff050d66901668c45c12a6b2e41ec8026b0e63496a742fcf6d66762fc72e23584240080ebe5d9e1562d127b08acc47aad751785b06bb38ef745051b4e1c5b241d16fc9884a1d3d749e5b7bec656d1b02dac093631451949800de9d182f1491872292cc30ee1bd30d7b09960b144ce377d268eafd238f96f223785f11afa4a698f4b23002d847e11ea0f9009121769bbd535b2b464331768b58c23d1a36507f10e385ecdacbef39dfa50a015d8d6b5287b776474169af1a737180b66c007bcc4bcfc7bfc6c6c3f4061591347d860773f78830ed112fe424cc07d48dcf4aca0a96dd933d491847c37b55f9e676a1830d2671985ab990fa25d05de399f169026e07633ebf0ffb293d26278334f005125bb7eae1fe534e6f8c4bf69afe2023d464cf2cb7b98d7594e332b89df63c7c684d711a7e5dc3e4e619c7d2174b336da8cb6783a6944be3abcdde5b847815c5791349f97b188848973f85f159d0245a95c4b7afb87a6e5a7c6909c2ca053c00d15fc9968bf2711dae1d71881658161bdaa5f095940695c11198fc541d06dc2c830d98791382d4d09dd7d22d1c175ca5713c81fb7efacec6237c20d739e287a4da362c3c88a339c46e1c01b79fb86cca704b60bd7f8f9d0d4fdc880126ae44175fcec2344c9957fd8ab78ae1f463ed6a89bcb6721503b1c5637f107160899d499be601f0dd3710b45fb13da2f16bc7825ceeed846dd4c0648d00534edb3d11dba3a2608cc2f2d941a02ca28d4b25b79e952c59faa74c4553957e9a1cc9c3363505ddca04b2eb5040c9d78bd27e9ebf67d0c5a2058f4bd783e4b59069aaaeace37c4aaee63b4f930036f587440077b278c44ed851e27e6c4ab8631cd9c81dd71f3989b558be269f48ea24de823da7217b32df8af8e57ebf75f7367d5650d75560917f8fb7e19dc39ee053a89ceddf296a08e24bcf05ae712d86a467649f2d1769a3a3083c3cbaac666c1543be26bcdd9320873d90ddb7cd87e6a249574f1746e3f42667be78e16a66a3e9dcaf6dd893c4ec65f9bc8949cd8c32eb9efd5c34572726abc149d683773722731e4e188be228b958dd0167f7cacb4a3701700028f133779859907b75d2c1101af47f88049bc933de50c16d555b1d3991d1079479ae596f7ef4c256766637e82c25e7629d20b86282d22f7a84e5ec7fe9c485d4817feeb1b6d50351380764a3e88b6fd868861730c4d8f41b7a9781d9229a09dd2a216d7744109e6f54f9d9f241d9016fc76d0ff4320eff969f9010d9de60ce4b7a5cb6e9a40fa032cabb6d47dd2295963173669c2fcc56f5f69615e05c97a8d0ddca558b9e8e680fb5089e4b0b125bcb3753e1f4d25772e7e7d3038d934050708e6469eeb34187eb220d31560ea3f70ec6c5206f5929b6a284336be122d7af250dededf217f773c944c6768a1b29fe8b2d0640d308f5f57e207d7b52e7a008e721351eeb1fb90700e26e37a3ce73719ee553296dae261bd48c849719d5adb08eac558036aa813c76288320e14400299ecb2f73312914c2b9349614bdfd873d1b46868e6b5c21d3122028e6465df259ec171fbab413e92c4a5e2ef1604baf9d2c6ebddb10f650200b6253bbfa635d0018c9c132947f6f1ad8043076a581f08b517f8fe7d5857b84e74c9b26531fb6b913b42c2c1d641de168083d709729ed06d44525f8ebb591640caf88f30c41accd9ddfdd292b419c8e0d136dcb962c4a973318fd8ce32a5eaea08ee13968970f359ad4ee0b912217f3e9d6d5bf9da1fb6c554579a15737a4d4d1b613fc536de42e3e946d57ff254cf5762793e19fa0fed9642dd0fcd383f9cd711d2d0c88b84c7f3b243ed834e9353cfed7917e3bf9b148cb022ab697f73bac181d0e8fa4583c9234a2c51ae30926797bbd5a1cd65b81557a6637cb305222343c3e1c32ce30774a96b17b06d9e3591d2f8339f5b85664533f304dff8a1ac7036e79baa438c953630d18352c3c9d7979104e999b839ce790f99424926fbb9da2fc262dafea416fcf190fbf6f45133079200d77b25002a56bcc5147a6446f41b17feeb0e0845df80a784e8b2551a9e01f539a4b1380cfc4a304091272e32d808ef5694e5352b7b65df0661141125d012592a12a8feb68398d7bdaaef68d2e5ac2377d2bfa896d66c521aa48a55eca21e8f2e8af1bbad815b10a5b915a0964cfeada26f7c346930106b7ddd2b83b52304b5fc7f6d1dd637dcdd2638f774202f0c3def94e378f9eac6e3ab2351fbabbb7964a1555ad9245e28c03e7e318a64d01656fbedef7c178752c8b95367be1863064a89a24e97f649ff943710a00d40eafa35f5d0843242117009f4b7923116d7a910f56a78c84f55042fe5ea1d94b38156cf23249c5fd523ba029ae61194cc28eefbd1c5622237c68ba59cd044763078019b630cd659554cfc6d2f286789a0fdedcdc40586f13d78b73ac0ad488ec328506db7d346ec153af98e6bb4e757bc1e5a64da51026c409c6e59a976e641aabb26732a1203361819d3f9a19431f50530c90b955c730afa410ecb2571b4b96dc502040c83b11c0992ab088b7903c22e797f5b2b3b1e67f8f84b93f59e04f1eb6bfb0d5a20bb384d54da01b68bd2638bc930be1c7416128d8b78623f0519c22deced12be35f63e81b11cc3c8bbe96f6ff4e983925b775a50748cf5228ce7e6a099e9af04ff8bb1eaa48dc40843945e60e5521b1d1e81222ab57e42581e68086789c2bc0f940d423da03474c54903537d3b2f5a6d42236dee8de1793d57e00b4274489c7950ad0fb3d481b30e146d2d6589ea58debb059ae803678bce2b04e220d7e99a7fe316dfaa0619f7cafc6fed4a7397413679f05b40429c6ce3f5e112767cd71a464930272ba0cb9f3ed78a9051ae26d1434acb4c3a533cb612313deeb2b973b483990f193f911d25d315548d44932c9585935013932cfcfc5ca0ecaffadf99671f96c68e034daf6acf4332e4360e77f5d7a1340e3b535257b09912a7be16804e0811b41b7d2d95e198b22ec492a6df5bad58ffb52ff330e0f2a2154a9e16ac5aa396ae1a7c70777e101371c4cec447c83a75f10702a7c05ee23115e3a790ca2a6c384779813355fb9f07969a810dcc1094d5f56045bace27bb2a65194c253bb6d6c8423cc22ee35680349722e534198f3290565248d3800f1e520a85721f891f4680c53fa41d5ceb49dd2cd21b0076196db83c8e61f2211fc92a34591b1651642ae24d188604220c9ee1cde4ea87144d417068230c6cf1c31830dcb50ac6a8e59a19bcb961b9d6b6d454c75e971c6ba0cd19db724f923efbe841913f8638f8fc564858472c382981a00c6a9acd85a950e4cf1165d3c53679fd0b10c978f3c55f97d12f7a7f4a877574d383b9c9bd5fcb4d4f97e19e80f3e6a97ddf45ee08869d868b65f77733109f9bba53f353e3af2b2e4797bf55e4eb02e207fc873e8b01e72b7fd21ad9576bcc4853e2fbf1fae78be0299412ba24db50a665b1e55bf1b1f4222c800a5c449cd20f7e21ea10f37e0a89270223d65249c027a44ea8f7f50d8ef4f14614bdf457d1210715b34aba06b685e3be620cf6954cb2c90204a1033514599e946f0a224cb2144c2f88cb9853b1da3195672cd8e22049cf04ecad2116c337a9e1c57954af4cfcdb48ad96fa118920fe715822992e375f37e8125b1eeab8bb8456122a328dc108bf6a9074eb3ca514eaea451ad2c38f016a378c14ae4240d0a76b0ada20ebe374f233fb312b23dbb9dfbcf30840f41901c78caba92adfe6ebb044d13e07ed77cc763cb0dd0cddac2e6f5e53712282358e8ac3d2f825f7363e9af0d4e399b4dc5b3de8005e6607d3b1c3f119c69050bba6df0e597ffa61180e2f7c32eeda71f21c481a35a1765d11ffbb257d8ae069f44f6affec7dccc3cdfa721721fe05d2662b3be0557dc78109538241d057d0fb389767bae4a5cfe7528693618230735e65f575f2c4caa9b3e31ad6e9f54e09f651f6adab6afe185916b97f7f56c44b1353cd7b0a614d3025a8e546d8b88a191712e96848d5035a8afec26550834fa09a22fce0df702f23a94da8e83c34a4a612c8a4c05dd3e689f00965a0c8e4184e491015924ebb3e9b32650f5f3be483875a86b2f3699d204d2e87961ae16f7acdd7d7ec3e6f0258fd701e1721ba8ac0e4699e412e97562625ee7bf863bdd29addc8aedc2b125ecdddb3b1b57b486a3e60fb33de25ee1959e9dd9b8d9abd94fdc6cc720c8df82181a6bd807d2687568716486f207aae65f082bf5b663b776eb64378666a9355fafcc22ec29b1650c26b17314d749369653033662d426a421a124b41c43263052b965cffcd3111535b5e0076e9212f564a1a08e1cc0ccd6a63a5c696053316d14486c60dda1466146b15095d685a27dd09dd30356305f20ff9db27e6618ebabea5e0d4709edd52ba18d354d40a362d3b3846c55b652d911a650ab02be616bc8cc623ec6b03e04a9991547b55bf09f909eb60f3728ab0a43d2124d523ae92bfd5f2e11090a1f6902f06eda135b542592d9a5bbdf685656bd28ba9eeb23a62e2a44d86636273731ac4ec07256a53a4a779212f7d777285a7f873e06397660e99feea9e2a1d07fe55a9fce145bd597ca810ad2acaa995d3268e0ea24e9050a1b6a855ae79c39a4c03ed1085411e5817eeb8d6ecc287504780c66dba8b55c83b57431dfd1c29f415933a6012521cff61c9a1ca599031310fbb19f730e20563b015a46abf22cf86b8b982b4d7584759087c610fe2e955df2db1916a38d048ca7ab09ffbb4592a9f5cfa1f4430f809aa64c1dca5a01c0ea122cd3618913bab9a615815463a68e4de1705adc555717dcff25304a023846acb714d3ee3dd70eb4097939878a6113ab8dc33e14fb63910fa71b6c824afab34f43bb9ee18f398c3cb3669d6f23ff8270d54a194eb04584a62d8c6a02e22ed7ec2a7767b050ce19b0bb210216991abcbb7e0ca459ef9db47eb5e1b89bd27bd09eb6113cd7b8ab5ebfe22e78c26dab32a9b9054890f3168b247d95838f6ff4327c6a858bd9794361694aee97fc57ed2c11b04d846aa7b0dc706cc0435e49ea94217dc7a034a4e96b2a3223b7660bad499037bb467ff894a59be2b3755c8a79fc5f1c563459ab685c4dfbae308743b4e5bad2daa111f6882f85d6c0fb6c122088d571a1618e018e4740b245f2516b1182b8a3b024b6600d8216cd7bfb4fe1cdbae2b5a3e573a2da80fd40c7eb7d81e73e2973c2f637ae5bb2624e6e1a1329c326a12ac15254168ece3e314a616f2be8be43bb75614d3e2e542751ce30bf3e6cfc688de333c5b5bf1a0a2679419f303621057ff909e008a2b2f79b1cd9ffa8c484088ad8e785974a57f7223d88b268c8515736ee2470d08635a454dc2f84b6de4fb58271ddf60021efc5f2dcdbf2648ad37a788dd42f218c9385e516ff3c3d42d0eb712ac543a4e5d6bda6aeefd16a78c76618cd589229ee2400c23d9f7a5400ad4df2c20dd89b668294768f8b7b4f226d4e3cc315fa194851d59a3b955d261e3c910c97a30ad168e98aa61875d1509057a38ae734f74b63f90f20686f5f6ffc28a8dd577b6c530cb67303c915ac369886e1f6ac26b7f8287cfd7c94990b88887a851c7387921b8a801aec60fdcc412e0b57a8398f93f2ee4866c24bd4a073f6cd8efdbbba20667f4850905a81a83cf096c5f174fca5ca241e280f80113455bed5c8a6d35b78da74c588459bfe57ad6fd787266f2c40957b586e6e522f069e5d745a84376285831bd8ceca1b056b9192bb4aa16d73b93251e63fb5c326889fe798bfbfb4a839962930e260c8704d08c474fde3d12fcdfb48f59431379366047ec182264e4eefde31a0ecc3db42d7a73d8eaccc01dc6c5257f0f80b9f91ff93a3e429182a048ce0f5eeef632adfaff8b441cc1b9c2b597c0094fd7858083a480d0fad6fdcbebfefe9c2f14554ec0d68f7698f876b03e9f63b0eae18347756b988c0ea7f51c3c6d015d6571e660957297488ace36d1498ee01034e691dee1b63971a1e6d09fec2e423028e11b61ac5ac66c51cdb5b79e674682e381f4a24a201350184026fc3bf3dd918f9aaac5ad47a9db5c986e77a28bce62f54ffc45d22aee1fc7a89407f654bdc90d4651f75ac7a9429d89be05d6e51298e0ce4811f14d1225f27dd3f6569c4ededde48aafb74234adc2bb5b4eac248b7dc6e4a547db7cc0944a272c74c1c847b33d38b720724974814392452c8e3830a66e8bda9a84cc6e5c8fac558ef5404022c92bde71c62251720f2767fbc341c3edce744229b7d139bb10c9dae0863add6cff425179fa8ca932b999940396621e9cce84efde95aefe65f3ad00efb09c0b68be3fd74be4c3ddeb4d859265554f5f5c1dc7aaaeda636199895137210908fa454f4fe86d478fbeb0371567984368c060c3902d0ab15df0f90b2c1e250e392a8bd471ca7f73def1ea10a6b87fe7af30a84469f754f86e065ebbcbbb7e2e7b345ca8ad1e08ba8508d3846793c427821b7971c420c81510b34afbe0554011eea5649825d3557d5a2b3c1eb42ce0a61986cb86b9576aef5ae32fc1abbc16154c2e5e0ece456e9ce5b1a6cda4853a0a87bab052b5571670a2557452cc260ab5d717b8934f68b0d7abede8d4982adf455b4d912ca140f816636ac7ca6f971da809642fb3aa49210aaf0bae23cc630c6ce676518eaf083369d0492a0901b618687edd597375af6d1acc39c56d437cdd5012349df11be5c1af931b733858dbf34b7681f7b01750002c373009f4fa0d793151e38bce7099c80101f4555c9e307d7e55870d9f2da896d57b8f062a4cae2f62b86111dc21d6e8f5039f5945a7f39ab7bcfbea424eccd6199b1776a674e7caf74691bddef0cb2a4edf0995c8bdc745df176d68ad6909507c68c6272dddba9c409c808d3028f4a55c5e109c720bd340b84f696fdf5c098bed38e6482befcaee5c4ff67978c1d26177dc0f2e2cba75ab66acd15f3b670c502acd51659f46fb97305ef05273b56b4762757c6a10fbdcb247904e1f36a94c392add5290db22708f7e236118daa82d772702c8d1d4745c1207506cfdbf03ee4d70cda7a6d65da112d0d5f84c9003458ffdc247a4b8cc1453853f03b6b9241c473fae57905cda4bf8924b27ca72355839706a7ff8d23de4480807ddddb3f699ecbd537ac18be165d64f76d3669fce971e014e0e84fa475151d94716ee2be21ab7d2424d5d56bf5b6a1250ced187e6f4a13b8a56e483fc672bf847ef74e0d309598fcfc6a11a1f67f3ef3d5ba37c5f5d37cc45850c333a2beae7a212fb5fb66111076f92911effafbeae82526368addfde12c7bdf971565431987437ac54932d56938ba42a396f40b3703c00ba0e54b338c23ff2c850efb905625dde04973433e88422d2f4bc5abdab5464d0726956d1735b1fffd199a18d3b4a95be6f392fd0a7d5d5dd884afe13e910219d5daf3f546cf8d52ea8efeaea7e3e4b8d5af2555407b22b3c578f4fa2efc12e4ef48d24e0a7aaab9ceed22ecd572268e8cafea889df44dbe583612b1ae9fae56b068859f706b104926113c2c5045af0f077dbd401159f6af033cca68ef5f4e8dfaf14395b18a8aa537ec73efb53d88ebf4c9d345ba407a5e7a0fe52be7ebacecc408ffb39b076b8f091c62f6c4bb2a375ce646b70eaf5bfdc54ebd9b898ae04eae67488ec373d0c90e0e459c9a2fa69a500fd5fcbda1d50fc51e1a9e7879ff4a52ce8e69d7fc0942df7548d06d7dc1bfccb140333bb1b3212d8b0f718dd0d9c43f2aef17f05b4b61ec9431f8574a1b16d1dfe60dfff5f189cbca487f359bf18823e17ba95d9bae4e1d669fc9648cfa6ed757c15780d2bffc5d153b7258fa9a926a6e0411100e44c1ae09fb02bf3706c53f66b7658679a0fdec6557f482adb785bcf3c0cf42e08c9b1b31435f26a3f7801f64c41ba887f66d4b8891b7df0f78cbcc52cae0786626b66817bbd467044bcddb0c8ce1e2841293aa71fc5dd3faf03eb306f30ec6ed371494721fba6a34b301208f0b8753c9aa2f993f4996fd8c44e7f0ba9bafae9c76358dcb757f1e9b387ff0f87a26cc42d8f87b5b025d46c14fddcda478958787c28095ece696754d35b431e26952a0b6fb0b41e646834c6964a1c7e6e0268f385bf1e18819db0880f18b5248a6f8c76866ed5f113bdc231d0c7ea871a12882536a55e8afc47f157dc234749cb5274760ccb7b6352e17c08b52ba628ab126c0a9739a94a7a295e729f5ad72886c156e01c882f1ac4eb9e9478406d15f324c801b30a8dba854b55b2975cdf461448fb9e691478ae26565e16a5186c2cb492684d832599a738f7775ff984d2a6fd6a71f144b38c2c81fcde61e097eec7a77b18071feb13b9130df6e5c12c747474d2ec44caf1b5259327718fc179af5b8f206ff5990d97406bcdd76042b1f15e9c280640fce6ce70246f655e39c253d9953caf01a8624884027569e9b750c095f83906aee78982f4fb001f4b8b426bc317cd3f5c9a1e24f5060feda2b33042f638e59aaa26c534a57c9d2c69704d78fa6a6d292dfad427cb886792e7b1e68f630e93f3dcbe1a4ab54610cbc52c070f699a868e5a9fa391c8c57981586f488a734cc24be028377357aa3a22ab90234c55bb51c33a243409a8085bd27de9ce7673e29a82616714980c36b7555ad404dffd58b95079eb7c92351e13447403f9221148cafbe09837eeeacdf2089c11ce6358a7495db13c3a21d397e663d052de5ca9d049775dd8422f6f5d5ad7cb6acca86a435be561c147b440dcecdce178bc84aad11abdc867b97179f8af876ae4c2c2273e1a1b98da5203e7d85e0270a3d6a445853c08b06f9f48f920501dccbca48a4d0f168a5b373225f9de69246ca07d2246589bde35aa3c21a2666db7336c70d8f6e1a91f47d25931587e3736e720c29d9173cc83c99938cbd7081c6dc8d8b1699473a799f70708aea082066dfc79479c2c7d612b8bdea47656dd66dd8b550247bf61f9c78c2faad7cea8173d730c06604ec74a57d5bb2653344f714e559f49e85248303e8066dae16e7200f705163f91e675368d7b58a5860dca3f5ffc6b8965b915a483fb9e48d128a0f1e44a359faba86065b288f7102160c4f90cccbf52b3277d45fd2ece5bcbf9e919543fc589ce9fb9b6501fb58dc10086815c0632674cc9d88c186819603c89da83a2d42e18a866b5ac1ddcf1f8cbbff8a3c315a4b9a83c6cbfe8da808ba169cd571707b190e9c4a754e540778978c2c1560775b2c8ceb3bf6f868f136ea46251e998e62de77c4fc7d608844cc5767db494e5566581a0d45b53de18a848d198f712fb57a65986bef7b324081d27bf89510d8a53b67cb6793fa1e334de104c9cd2467d1080cd5623577b6e7603b1ce86b8f3cbe3ce49919002a8973581781e3533d9076f0cac642406ec92cef9ecd59a6577ec2f0f64e590e2de9da2bd30fd8797f45a5155e17506c42da7be6033b6233aa5f821398283daef165e3f48f857943be4e71964cfcd0f2957b383aacd61b74a3b6569d31a5e4159b6c205ae74a00697a5b18e15dc289923cd94bdca12d2d8ec7a583e64c8883f8a7b364240036522d93d20488ef3be2080b8f5518505ee74781357d6965d1207b360177c059128268e0e468b6c339f75d13c00434aa883e4faff28ce252bf72cb97390216d2d6355cd42d85f4f598d872dac97b127432657f99c6b4ce1af81ddcba7b97392cf40a832f4060f1130be20ecd99fcd89277fe2a5df4618a8b5a534a08c5133ef49fb5ad427748d4ebb70bac2e09b60ecc3b57df365e3041b6e576924ca8ac611541c71347c4e7cae6d998a7a7bc988d7af4892e04ff31da8b888d6c897dfa3c8f78452bf9bfd17e324acfff7b64fb87ff7dfe915ebb76113eeb05954ea099d7dc5114c56af145d17ed59d487094d85cacf157eb7571d31156a30268808584e3e80eefc5892f7f5135d153bb2d9017e3b73d2c9e1be296ea426e9c77eeab1490a963815666762dc6eb576ae667e2d978c6b963f82c102c96ec6b675c68ffab0518132c755ae934333b7d224d6adaa8e2fa53d741964e832ec11292f8cbf323b634de0499b81ebe2c575d1684ec19ff80e818112ec9ab46449a8da8773cd4bd36ebcaf2635538fb98003fa7ec43d9c0884aae9f51f4dffdd9c2c773501d424dcf982a04275754b8c4158f91ae5c972ca648684cec41205bb5924d825be39115fc1435bfbabe94cbaa1c0f10e6ae94872fc7214406f1b23f05fa5d5c31dffe4f0e8e9d70222a5bdd23891a28bdd47a527886ccc9d4f371ffb788ca990eefb6ae440fbe5506b650803a5289b5b23160f360790c9a3f6561be190ba42e5a974a82ef5ac441edd523ab2068e7c162ae2848b488e312ea8124b114622b8f01622ae41cdf9797860e6adce176000b7f382c6ff2aaaac98dbdda8b8d3496a732211a14eecf6f3b71db8e53fffac42d011940c57c3d3540f87a14ca70d0a414e23a350ae84c645b442385444dfc4d4d10f5b861b7f1f9de0ea6344dd46d88981e819f25d913ff7740af1683cd65e90fcba357225f708c5751e9fdcb210e47c2a550302e23a08d935bb98e0b575cee83cec43191185577fb845c36e8212ccb2057e8bc723abf809a1897920ff33a9d33f800ecf3dac886efd06a00dbc79fbfbe68bf3a03675f8783dc86071ba1e216c83ce794ac061bfc64a7298b77c6e9480226857350e49108b18e3717020e283b7349423b48d183ae051f38ee5563df68ed4082e800d74d9e6664a52bbaa1253c12f257a058875f313f909bffb47b1bcf1a5003b3b9562528109fd9f615ea8c4302287d279a9022a4110641608a5393cab732b9fa64e28588a1df910f16703d672d5009456a383e96a98c4a12cf91047dd538732b8910c0ee4ce1ec54b81531fc830995b297006433c45161a641bab40c091df26656ea9881c8dbbe41df5d9c10c58bf944bd3d8937eaf1ff160f46943c4d7e418331e11b247e100d385dae867cc67b604d7ca7f8d75147af4c1057340d20c07dbcc35ff92811d629609c6965a1200f9736386dfedae743bfc16d57848517e7645409689b4f1bb048a6e1e75296786259a6db26e756f28fdb6d230c3a5987bffe8f0e6f8fb2d3936c46518c1dad99159e84611477862870285c8ffffb8261d5c30e84a6ddc50a2fb01db0f2533d346611a29e9412a4a94e831f35a2d45a1f70e96a0ea08032557ef1a470a8fe54ee31dc1e3e20afa5647a28f40a34f15c50fa8cc15f78094a1493b52db4d080b2426f9a17d7083467a8b71827c8b124dd31b7f89440fe26d76836dbe5ee80d234edc8350a81eb37e21a0a5c659573f450540af21cdeb533b0a8e3b7223a23981267d690558c3e07895f988487edfd1400fa9b21d458d57360314286c8044c3bb1b57fff89f1dd1ab4623cb2925be5b6ea5789cc015aa6d48d186704c584c6260596364489323ba40734a0cb3c41d0e93a9e3bcaedb2adaf6eddca05c4011b2d01fc10ca2f58a2e6cd21c731ac8685b655bdbcb7741236daabc10886bdcaddefcf5f6d6b86b2e2ce9a3755e43a8d11e5931886d962989bba87e17a12b53917798bdd65edb884496f0b160a38db4b191e44dd5b36fa11508f85670ef7ec2dad6bef3234f2ace9ef67b0e222120c04437a9059da4e860b4355f7223f1459c6a5f4391c20a442da5ad598ccec1453694ee0037e39215d426190adc6701eef10695b75f33fd66df1b62a81f9c7c6e550112751d9bbde8e71f599b5b18e86385e410cf9ffbe00ae46c89c2ac1b7b6079e70485bc252bef668ac63db11f51891e09f93421cf7eeb807707ec7ab54f091e0dd1d9b93ea256b25046cd15b0c36456d08d5e7429398eb4ceddb3eb3c34498da12224a32f52aa14016ca08f1d911c35dad5c86eb0f816b29a7267e1adf2e76b1708c07a2fc5cefc20667c32f05f014923306ca872e10f2bdcc58e6948e07d67dd0acd7477d9af5c90a952ab36bce983b3cc9d3d39d0a9138ec078056e814ef12eccc6d830d9d37cbfae1baf6ccc82790c68ca022d9681bd4086c6807bdc8c0255748027e0439009f45b92258f5a9415d54fd1d4a0ecc2f2f3d286f02572ae62d280555f1c4d5fb7371d8ef9a6354bcb8800fc6ea91095e08ad4707506c49becd72f85b694496bea71ad3485a579d286ca0e10a9a93c0024a7da0538f8dec31b17f4a523278ad71f26bdd947d2ac978ab977a2e9991aaa8d1c70d595768fcdefe40b3acab63017115603fbedbb73983bdf5ee688c1c520fb7ce069532afbb2bf1fda89a6dbdf54f0c956c0d8a63a176374e4050b11da2f2aa32bf47d7684f24ed7472cf5fbc27c14d5874d4b893a1db9a5237af33e2577d4c12579140fbba06a2cfc026e19c9b69d3c110f235661a35bba75832c15f697415d9a622b871116899df2eaa47e6ffd76724fe2f1cf73da8749295e0bc8b5eb708405cfa675568ad865aa4adff649836dcea43f218f94baf70912ce79357f7b87ad0d76346fdcd089b285207f9ae8f8b72b72489170d07e08328652c57096c31149c66f5397a3d480a3b492f67de590b2724f0cb6658f5bc413a52d8f8a1e0ab1caadd0fde8f90c7a3e82c33e5a77bc612cbe09d57f032344fcd42bb4197c80d5d458c167612e61c922c523d0dbcf344a094ef2774df0f8635be5287bc710bb007ebcfaca2d465f2db5fa52afb09dfa694da444a313dbb07061ba46578a080f87d966ab6abd39f9351bdcb913fda86558f975a3fb8a867c679379e80325ef10839355ae58cb1ebef660d464e4bb3baee8c432c05ce90372b315683285b15e2c3b85a6f7cfa46c8703fa6e39c1b889c71e5fee487606f325ccdc7d86b388119b400e85c4822b6f6f389ce99955ba936356173f6255db30c7da8cc0578f54d1d1648a7bda9170444f81a07eb450a2b382a6827cc86fcfadb5f00b3500c43c1178aa13ae38261b0673d4910b39ebc987834e37aedf3a51f50c6a1326ead4335f84c9f701201c85414c39f0391c5435e5b7a2d3f6c6d8a42b4f911519a72e34c7d904cf766cfe2e91bcb6a51ff1619a58ae4b300ecc331aed04f7313e88e0f05a8575075a3c5a8d5d34bdb2fc8c36ab1e11d39f9334514f8c40dc7956e216a84fa0367055eefcf84a5890b51856cbbf7aee77beeeedd39d7d1147be5ed5f6e78bdd561d59f158215230ec6dceda013beea293947248e4c79c7d1e8bdf2daa188d4c2c7692c9bb959f34fee70307efe02e33094c0eda2b384a00791a19b5fcf448fa0149ce355b75b0378e763b7dc11ecc31631e34186225d391e67d9407495a7dd02f49870bf158a0df8e1b411cd872bd8089a014cdfea76569ed3ac5aa8e97d31c518b89f621ea569f79db620b4008b9af0ff56e9441165831816187a98d6275707b9a92bfce6b618fac0a6b9715850342d06de6487986c577fe5e84491364b50cea9d1153665f66f514ab3dae84d79ecabb9c100d997c01ec9bf8b0fc4bbbe3e03d693a7d201443cebd667f9d80cd048401e6eec0862a2f803a00c961f22cce809ec2b5dbbda8556486dc20f3328a710731a5a396db1229b6574100b00740931a44b301a38fd34d9f4098603b8193b54c6944253b9ee54bc497e5aedf0c5a000ef78736abb54164bfe60f761dbb2109654167d1cea6e508f247486eb96f9156911ca3e67ff3dad3eef2d99b1cb5ea908147303583fee41e4c6e10a4eadc66bc97f87081850d6f9d4ca893b6831c01ea7c70319d4ea699e8c8fa9807414a5df9785d56b6234cc43ccef96d47761a57231e2643e1dfe46c147f8451c3699d10f9f02da87532607112d14c54d75733f4cb805a776dee0fcb56d6031ecb834574c04ebb2c9bbef5e07a68b55dcd62ce459e48c52575f7231bfafd26ae3799701beb1e9ddd219af7439235fd0bb51015e6ea32b27d4e5ddbf5b44196eb71473b99407c2fa0b46bec9e677a54ef671dd10651d7baaca4100dd805a7b3f3289c930f73109e01e660e081c902c56e8552efdc9be25b7bc062d99e5e4b99b1125c676c6667baf6165540e79a8619d4b51d2316609c8166d68f0b965a31e8f1e328a9cda033077ccb26edb922a01a5d0fcba7ba24737fd149adf7d0badf07d747a3a900d16a3c1a87f5b299216bc126697a09f4931a11fa12bf81d463f3e084a85d559fb8d15c1487f43a6afed7412773d4d09757fdb2820bc61eed6dd3d84334c6153782f76f46aa2025852fd39244791d27fbb7497061a56c0d748c31f1243db220cca59f453761134845cdba427f5a3e8ebeaf3cdd54a5c7932be1c4d541f0a65e4e2595315e986010f8b602893de93df5c1eb5894553fa8c47fe607294c7b50921cc0c078b2f1fd98ef778264ec858f244561fe52a1bc973536f78f8bf6c09c0b2ad19976a9c6418e157c6947042f4a9071fe50b1db294ee0cd8641ffb3106507cecab176d0cbd2e1b14b9ab391437177609e7e5041acc2c168ecc00fc4dc7781ec7c26d852bf3ba23be027877dd1ea3f5918338170283dca4e2bac84b093314f52f871336819a30e32ba970f291c3dcb78d78633996cad5d16da95d86af622a3f9e322c90bfdc51e871dfe5659ad18f5fc0b761ed9bdec3bf87af66d7de0e186c5674e17b48658bf6fa90b951bc16611585bfec5fba2a7a369e22521de3f96678b0e0c78f0fed22dcf68ad1ca5bbe3bd0760800bebf199b4a3a5d311d0164aaf6b708b345e3906419077d35559d06a5ee0c340fb5ce18984a32acb3ab5c3dad752330854fb168f2795c0e386fce99fc65d538dc997f5adb5f2306079f35645670707de598d922250c5cce107910ebd6c772e1639ceffe5d9a5fa437bed94fdd05ac0225e95c999bafc820c72d103f0be5813293bac9c73fcfe965d8bbf8c2be69136c9e632628f22f7adef2534ced8c6032bbac488261b9bcdd02233dabe86996f7cdb14443e427d729321448d0231e16933fea2d8f489cb421c72ab59cdd8550b60ba892af5709ce048e70efb0724b67cc850b09395c62e4a4702f75b53b8cada9c282060a0df8d2877bfa305f4c3b3723f243f9c3f585bf3a99747e0c4cf6b62f6a646d5b1b70127631618fe7bdc6d0e04a197563c826882ab391a0c803786978326ae9f406b2cf912fccc15de8b78563f13b1da76c865f81f332ed139dd87b5b3ef4511347d045fac63bf559bf885a8607eadfc1bf2db1495db03d7055aee5187e76d0853c71d7fac1f66c037e62a19f0eeefe0c7e668292071dc7122dc9c9a7aa9eebe5e05f37abb8a0ff28e0a987cb6deb057f80b997e6f79f9ce3ca6ff5a3ffeff2be43562dee8ef994c1cd2b03c0dba79c8a2ced96c7d51d1e77b18a8dec3c284b2ad0b560b0dd4fad7cbad27fc6e02ac8fe","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
