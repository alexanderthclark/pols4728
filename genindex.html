<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0dacb332209f74b99a2abcedc6fa4cfe2ef6e8d49d2b370a16405dbcfd65af5b8bd31089c1e674b1dafd3e44ea03bcd0e6ae9fbc07478ccc2df08e1179fafbee1574163f47371842f1f7f1e2c7904262b82454545597e1edc44513d31ad7baf0e0e7595a12cee23455ca452ca836cd1fc34ce9acd2eb6f65abe2ab695810953192844754b422b2c616d34ac5fe60c87a04f05a18f06059e5a982a05f3bf9847a4d63b9ae9d3d6ad76729cab56f88b2223998dff07e4d3711c15756347cd10e67e209f124e5c3cc8cb4131bbc95687d98dbbf4d7b7f65c93ca0957889f551fabd61a095fe349e3d5320b3557808d293952cdf5a3c4cbcdd80e492ddc9af800caecf7ebb5fba1f09fd43b566139581bb33712bd3419451f8a4d4c2f3dfd3a19d2c9d642e2d5a5231342ad477faa2b19170e3aa00bd840c5d333f692b526527ec2e45f9365f99b18aeef7b5e19001d86163dab52dd913f6d5608efebf8184130b06b8e59dcb42ef660f8269f16709cba4c01ecf330f06c421e45a7a4e5eea9f802813fcf9d3ffda09e38385faaa5c6c10e3a4ea9e8b741a761f86997634d4bc3905ea0fc89019f1fa124051b8e762348d4df0719f4a4fd7e76acc7fd3fab17922f57ebf68212df348376a78473a747b22b92370091053b75cbbb4c452478258363b06a776b9d9cca69e52e95b1951fb146fbc5b830945252b6111112e5125832a794c3033de58a981b407685a3d493e4b1555def895d5b862f564d935ac5ea2935b0d9aec183836659f836c6305e7553808c82cbf9fd7236788d7e4f202226e22f4b9610346816e5556453e19a0e89c33f51b747c4ba7c8f7f8587fc71c5f2b4717f843b8e14f6625c2caa7ba5858a1269e5d0258d8d00f6e11578479897759f979abd9441eb3f967b3657b220e85b13c19a5f19b03d03bd8ab16039263f7543208ae0d7c3297e14c8cf8bb148add1b8a2b2239843d221b49f6c16737384740ae63060fd5224cc62f920186a6d4678be5148146d42f0656d54975b5f43b1766cbe1a29a98a32cb872b668d11a38cb81158148688806727e2173105290dd5812ce034822fa9fe9676350fa90973e4878a988aa6d8f24e974ddafedbc10ade9ee752b600279d80e1fc1664c8ff07dad1d2b2902314d7b9e9568f7d2e739179b424ad59bdb2f21c907e48f7fbd3db088b3d6a58aac799ac48210214b28ee2a138257a44b04042dfaa8c87de8389d4a15da1116dcdb2c22382a17c9ee24413a90929aab0fae42f4c05d7346d8fb5e435827068a513c273a00bebb569f78c59417f9c2257386218272f8255441c0ed323b3e1cee6d0660115c19d70ddb9b62c5ccfe51f02966431cae63ee15a620b9e9600d8ce4de9cf28a71e2ed4b12b70cb74a5b638faf360cb39dcdbc80fd133779d9cdb74a43a8f0492ee1fe752c51f5fa08f5721f6d3861a88e7c7e4595cff6486bd51dd8ac5f6d01de95df1f0203184715591713fb8092b29f57d85c845ee514a5295e51af2e47fdfefc63091a33acd9cb3dc6ddfa0ef1987d5a0151899888c672aedccb79e2b4730146f97818b06b58054984f8135b6133b0f6e00bf56522a17e07d34123c2be898b8fc4d88074a6d6f41db1a78aa17542a947cbc5b65015fccaf3cfe27b41d97d96d2f59ce4c0e9ee4cfaab5a050ed77a02300d82e118d6f832cc9adaba529efb8aa2e31478c66c941e94068f2da2eafc105b30c569ededc3115d83ebbb43d49e430c64639e841414cea1eab498815170cbdcfc1539a1acc739a1560213d7c5a5eb4902fd4964c3b2e30881b71cdae149a86b0697c8506f33022d16a7a0386f999fd1d536f77533c69743386a88820a7aeb7cf3b0a142a87001c25af43b3f74519d57222f80cd5517712ed31524fdd1e05c734678336884907ea06df3600ea433886cd5d0939b7dc4584b5402635f187b056587339d848a5479775412158ee3c4b01bc6b249c0637bf2202add505775a75e29c50d9c75122049a1c94bca97e8d60edf6443519c083b585903e41e33e0c267ebb090df61d5e978309d00200c2bc90e8a5dc3be47e4ba5eb0c7b2ff7b332e289e2c903f95c51fbbff22525657f78d2554247fe1ba9d10e961641ae2a39d1270355571961dcc9d4eccfd42d774d00676cc0dd00a30b7015360bf2a22489a76a26c4f76ca6229a541527a9f44b406dc61775c05d0e7eaa141fc4eb78b6f6076f15171b14884647c2c7f19924a2e33437d9a01dc0fd8262a0c8e41ca644a4c15808371ca975e17fe79cab7a7f53d6d244efc4cf6982eddd1b51579460d4b222816a54716c11ea3c1c8733f74d4a05f8378a612827e47f0144760507a119a4fe634cac14d18de15fde996399f0a4b71d709b45330aaa12e33d54cebf2dbfc1969c9cc1e74753721344f454b13a0a34434e22981307e5c2985161b3264621736ced58ce50df4c858b0aec85777fa17d5da26d8a9e0d73c8551055fd6c3811a91bc826e19a69976bc04a4bba07be9c9b6703d8bc270e2e62d4bba5b87c574c58121cf3989ed1adfca9721f7ea6f57a64d5e779553de7454428a919e5e2b0c84b8f335f49b56f48e3c0ea2ffacbd84262e26e99e03e16af42ceaef11266b2676bb02a2676403ea5e41f020c24eacb9c0f32d813f40bbf43f75d696ce6ea1e14438656501d21908661ad8e1ad6371a2dcf22d5c7d5ac7d3377546881159e87a7056ebb0ce0db380a9ee3eef8d0744f042822eb6ca493bc18aa28d2cb4394ca16f7a7a1b8425f6976372e5f44836b0093f27fa9d9718b09db91698d7041db6498309fa91760939b4ecacabc96418ba95ea224828cf71f659fbf8d57fe4308db0136a123944e263c79b5c13ebf3d4df84e92210a89b4afc9d8fb22d5b73c6769b499a54462e31e293e6fb9fcd06bb4ad942c78f8c5a1c36efd61e1006865e0c6369a2f46e2a0ca0451ac5c95d95668a6c743b000c2e1eab6886fbc04d4c513aaddaa5a22d60cdfb3446e1f0f174c3baf587fc1189b192884642456c2e82b7f93fb93cd3a1020cd570cee36f6e81be8946061f2588068e5b0927d75b261c19cfe038cf2159c23fbd5afaeaf9ef1a312f023cbd83e14b3437c728db8c9aad7b368a46d1fa3bc0d833033555e65aa0e342d14f5ff69646d28b6d24f300068c10e771c94b272fd09ecd506c7bcecb394108c8127dedb11abaa7f5bdebe5c26e3e0bf1ced474e5c58c613c07d85b1cfbd0516e5e8eabbce0ccc3ebb1d78f063e062ee7ce8f3a950b43ea8ffb6ad6bbf9cef1c54b5f7c584e58b4e461619c58d04a77afbe9c51c9cf3f1d3e9fd692e5e46b7ddb86285139436714330b819a8dd27d5b0e99d492be2bd107423d0a3c1075f5f05d0f49761954472bec9fafeb2e8af125e3eaef03fbf096606768f033fd252fe8c30ed41953ab835f60b8cfea6e7d67e0b87c48deabf6729abae22b774989bd8e1a6cc4e805efc09e620e9cbae8787e514e4cf43a0756ca9f288e9c54af9ef4e31c4b97290af08dbbb508f2c713aa774e00e452aa3b0d52ba8c8bc65ba7f1e7a7461820e4791f2dcddab9be585f9ee1e460bc6d3b2e082319d42b8649ee1ba63eac0a6456c278664b3f3fc0099ef4a2de59e331c9bd52c88ef9ec2d556b9f6d2c99941b4bb8626c219e5f819cf3c6ac7064ab8b6fd5b0ecc58d0e7c74c536db35fb581d2f2e3029b31a46865fc9a7a065a200e2e38eccc6c64405374a2c884db958f09cece14ab77875f4aaacc1213d53e60e49b5ce99d1db5f07b3d6373a313be4405fb62c6e2d710d626d463a953b7619cef3ed764e198174d4433562fecd3718f141488e05b395ed4761d109f438732236e4438f4efd28b826c1d84ea84ac40f53a48da94979e849197bcfec4a035eb7266d23b1a301033b8b8124926e22ba584c67ce0b0695490dc7bbac77388b32df6ee4950a37413e15e7d1f26b63f6e424dfcaeb7337a82cd54d2ac391c988336a7c6ecf00ec2e21ee9ce4f4c399394bede0acd942b17ea116a5109aa354e33a9d3c649756e0ace3924611de085cac70b1eb2667520f4383e5a3bba164769b55d8c5421f17824340ba767c51c6b89344edc57984bb50805dbd8731a7b4f2e2fb893450edcdfc037e419d6f2bcde81d1fae20e45782807b4276146ccff888dacf97e807cd43635acc4588ae3394fb7eb8057adbfb81d680771dead7c779f9c16d47b3229e319a6de2d117b991706d3cb5cd683952fdfc925cb8f4b49532e7e7654a0056f84aca88733b854543d89b414236eac9ab8a21403e96925dc3bbac1231d4421272218f2d6c644561a05dde89841859a71217f6f2455eec21d7ab9ee274d86eb99734e1986d38d9cf6cb70db039d49c092c5290523def3d58baaa39c510401e87c9f8666a24416061922a26acbf744859817253eb5f91cdc35555e5bc23f19fde279e03e4cf6ee0d9ebdfa5b9b5313eb839aa90e2b1e5f040a40adc4ae0edcf46f8e0c4b1eacc6de42c5559a5eb7d02ef750fec67285b17f298f01b6ef2aedc1e30b01608213ed417b29859129a1d00796198415dd3771d4ea87c4e7e8d3d9518952000fe947a27dac2c3404c491ebfc173b379936de4b76a385e827e7df1c67f8761c2e1efe04e6c4a571897d6ec3342638ec6b46c569934f5afb3600f421afad63de227f90acbb17eef583410f9956c4b7e278341fdebcc7a5f0f712b759760728d07d33712c259132834e07451f6b1fd683d788048d38ba03e56902dca4dc9db1cce5ffd2c5a7b201f92cf4ad0ef8031fbaf7c6daddd11781f52c0abc6bd1f179fd4d08304817d4cc07ee219319e64c20c457f9949dd715315a026c11e47b4c4743efd5249a437980457f58d137f067187112a3a5b593efd6860a3339b883f36ff736168cb2e2a95e6174fd10407d4ba7f6f2b155a45cf779aca6ed4ed7c896aa60ba3b3811c169f4646b9c0940752165bd93c1d65a7e5b2026591c25eeba1be27f897dc6818d25902398d7136181feed1ef715908efe2e6ad2c89478fbeea354270ef7405a04016f2ef4cec9c5e6883b95ee1e2c82d3b6311e27132db61c601a8d4df2a99d6ea6f2309d4ada5451644a98c5eb0cb7e8da72962f6b0f38afa45a9b03429fab6a13060c35f72c5f94e3e3345263912ea9b56350510635078bc2df0108915a017ce4228a39e59069cd9e72be040ee974d4e47ac418b445fa87e14cbc2ef99522a5b3d02657edd34689ad0275f947b8cbb4291e6d253485464727c5bd17d09afa24f4996c072f993291d1a07e6a7c5a9afd79256dc6e5ccf745bfeb7e3c6edc8ae1051ebf3c806f0d556f72a72e232e83ae0c6fecfe336832d401e4ec6601c9ca39521cc5e5618da751a63ee12bdf1a0e1bf29f159cec89854fe86c4933c5f8f7e5140857b38697a259c9fc6ed0aeda6715741279eb31d9ce25759b9afbb6dce73269428ad802d9e17a2a194b1094ff9b9e24897716e830477e8192cada74e67f94088fa0795c5d187766fcaa3cdd2031ad7bcfc3654d7ab61c5a112d59b52833e2296f2c9ab3f9fd322d049d6e53588e199ce01b416d26008c0f635e4dc77d8497b57614e17e81f41157ec6e48a1c3ab2a1314fccbf5564a0f619013873afb6bfc5906b508f0c053cb9db0f08ab3111a53325669e772bfb8a58ef2fd28839c85ea19dc5d8d998c42318e8dbc5f1daecca7e6497df46fb4c091fd78a80c2084907563b5a26b0482fce9677c501841b0730efe98d8b8f8ab1d8caed9b99d3c51f4e03cb4213ec7adcaf667ee7aff620f3150a3ddba18b5723980453a105b911d8a60bb4270985de951b0c51f844fcabafc9fc406097e138ac601a7ff93e4e3ed7c4e8b40b4bf69a67dce12546e0b21c342983fa466242ff75db07133078d62f82eca374df7de837d28c92c570fa060b7db0bfa5404255c65547c1c933a64ad5b8d75d5654dfe5c9c1b5e8d9cd09fc2a80a3a60387b0ed7687b57442e5ff9e28d2440004397c15a89897cd119807471bb1038e08da2aa959be079dd8d716bbcd21c58efcc99c92d54a8796364e3ac014a3658823db84b6f646ddbde4604d61d9c62cdc312b0ccf446e32259ddaead790577817f89d9b96565cbe3128741e57fe76b25451cce9c2ad3ae4febe8280a60d4f215541029c1d7e2bb872aa54143387be323cdf345be94dfb7ceb00a5c0a018c38bc6fc1aa351da333c26d66415f2f8525f4e12501c3c808c8b1e436cd44ba0052518f075a408f7448cc4b4834ceff459bebfc57c09b659cbb0dc8c35db4afd7fb0de809291328d56d76ba8063363be730cbd6744e5b4a7151cbf015493f17da4d414d7bb3db4afac5aab81d6ec3de9c1a4817319e1e0e4c2a44cc8b2cddc5a3dcf4cab849a7a3ddf0c449f0d231cd9ec5a742bb887813cdba8944f62ee1ff376b3a8a5f7cad71519e1b500c64053de976903b56e430019b7252bbd398b84b9bb87be5603e04398b7c98df3d8cfb72709ca2487eb109cfd43a6e7d09f4fafece6513625badf1f6cb7ac46812d1da5c06603afde5e2283e44436b28fc99bb2390283acb985a527a8ee597036e73a60910d78495c6afba837acbb02eb158bba4131c9838e552bf4369acc672688200dee7db3de0bba498be195f0e80e449334056c931c035787ea0cb2aa43bd16d639d3bf9a5967569cc1f673065156fdb6d960486e6a120b0869fbc4765c68fa4f3de5c6986ecabd660e3db3bd9d39a76ee392646082723821be28cdb2e117aadef4deddf83e1e00b1460da4a8425d3bbbb2e3cf2d4fadb63f39fa5a9e13e0ce5d45abf056f401231585047231cec07795b3c314af73761aed691823879a6491f27b9c9a14e569aa1a1699713b1d122dfb01eb642cbf45fc7af826a385cf0076eda6b340ad92572769b0b004aff7e6a1b73eef8d1de8322efaee17e0020d1db444691bfd385d41b74d1f13c4f13df6d4dc5593dc09b26022be746ca93a99d6e3a47f72a82c71897516613e71b571200a516db616a47cd8f620654fb1b641c9f5df35ff8f8227d05f950c1b21c4e8dfbc02f903ed2c61a10bbc66d73aa042c5e77f80ecf9d9f8551ae77b1263d4f93ef7d1172afda51523108bf576cb8928974ac7a3e05c1ebca9b05044f85dcc2834c411863f830a488165ce9101baf5c706fe0e2aa49007207abd76fae2833c866109664e4eb536d11b4bcc208bbd09f200d3c5c962d7a1cf87ff44156e6eab76e0bef8f5c5ee70f774577f66498c620d6c5cafca13828a3350b1a365f15bf9a9a112e3e04ed5a74401c56043e8bf5eb100c38bf36f08d2a2b5ab3e4cd02ef7a81adad37d35e466dadac8e4e72533ac6e1e3a679a73e49c4bd2a7d96f1c8f81fe0c4f740aac964ee9557948bad920140a21115b491aa3b13690e657a680cef8b042df5c494519fc130f5d3e248032918f1e8185ccb872d466d75794cf3d5bf092943c40cfc0f5af7ae7dfa7666aa3dca2dd5331afee10eb0cb0dd9571403252ec96eb2dec9d7b41b86c7b7f545578e57c83e43cafa06a11fde28c34c856626eb8f03e514063e742ee21a07f11f009e3a008bec61e17789801a12429787e155f74d163606a7761a255711514fc61a5ba1fce80932cc2f1dd4916644be76e7597eab9e17e36cf4d01d290c2b4bc9571b34adc5aa227a28aba895dcc4feaa03c8336266279f6e7fc575bc95c095ea4ee61bcdd0ae7f9a7c282f78584f2303ed37f0757eca91b503ce5a7066e686dd52330738df8900b0e9faf6119e72a8e47da583c9ec089f85cc39c7cd6b2b611e69db3035f141cf9f47d16249d199380980222235a6df689f44a81011984b700f25c5c4b3e62daca1f5df9b477f6b622fa06bec5405949cdaac2df2878a74c3054d09fb0e2cc15c3df35121b3fb756cc7a03e5cee1387f4425a9194505e2c5da94ab41ff99cff5fd62c7c4317372b84af668b2486fef5a641fb2622d18fc3893c1105e546d61f68bebda5261e3681d249b9d51f9a5f5ce726867d7af375521aa942b5e43268cac39d9dac4a8cc14e7e2c33a17ac4339a1594458f3905792499b356d7f07623abc4e3402d3fdf30383f0af749263880e83bae4d6f66820b6f050afd26119e1844de0877c6d8d552d33b1727dfd786294f29eff2bee4c3d7aed5ebceecaee53f4601b07949984cec78a022686b3630d96e3e9529bd4e75b1dfd9102797960588d937a2ba5d6ffbd645f82fbed247b9ac30a06b974f81de4d856d2e4f174ea908422e0f7f2ffb71d1cd71de58e2096f5dfa59212f06df1952fd4b6a62ae0ffb671355771fe2c0c8a5d6fa82fd03039fe8ebcb4fd5c07e917a86bb205ce1f2c4488c8f37703a8deb9c682dc26aedc7c72383bb2e1d3952dcdca9fab632ec64ba3e5627b5f6e9ec7297717f164bf22a483d2a1f8ae20c6b3852ac1f316226d9c9439b9f9d3624bcd9d93be89ccf84c785df0e3b884d2cc01c7c359c463219af198935935676e522443c4cc9375df6f412e20d90e6db90f03af41d1da167e788e9251400fd3db3b3f2e934a54933adfb5987e1ac350145a2b9a22d5cf8e40c092d25759963927f1b7f3a33520e8b83250ee427106987a6a41c54c43d0c0897128c1920ff986581eab3f2ed52bfe4acadd5ccc0bf899e1052db423ed317c6948033a53bbfa42bf38238dd03d33171a07eea0526315959c566f74adf9a9a6763dc60810a6da4aaa7e5b43c1c0778227422427a23d4ee6e042745a992f1bff1a7f1a1c480937a4921a3217a28368c29547b8e515a08a89917464be780f94e38a6b273c9114ccbbf7399435ecf409eea0e59a0c4d537cd21bbddc2cf75bd7602abbb872cb3ab63e3aeccf75ac58834b18fd4391a0c1b9f93550cbda7e563d21e971d220b56078372e568e85c767e2c92c2b35828a385c39689d6d46dda9f73c7a74058a644d8938cfbf150d44aeaf4c85e0467120e92454864e7c6d0e620d719d24f452aaa5de74b18ca8698ee8dc1f2c3baacac095c5982a0005a753500317b912ad59744734e8d5f35c1e94a90fcf99e7d6ffae1a611cf3f4a6e154b80deef1bb4d6e807b65af1bde4fc5edabc29036a9948cdd462398fc3a1c284bea3a7f6a6a8885ad55c9d85735069b362becb59beb45fad14907d73436f82965f9efe8f88d7cd4abeb313e8448de452282fabad257450a84126c7a687209b97c298fd0cf536e65d1b385eeb43b4baabcb0bde12c98c751d634395e597e58674e46ed8e380af913adfd919177cca76c6bf26492c6b4dbe97a347981f650e062f42f3e2ef4951747ab02f42647df73e1887a47f7dfa4abcec1985fd449cb814a5047fb6e805c326b92ceed9805f7b92fec081e5372af57dbb137f2c849581a2786e1def98b2886272e7b703e863141376f0e55f8ebb1fea2110c1651150012cb4c717c5ccb15b0e906a4f9ddd8f3ce5bb2ed44a67356538167045bdfa970fd4084904a090676ab18f912c3c5bc71106d27a925d0f9eb306cc1557772498c018edc1d534d7ea3a206a3a8439d56c28270e2c587dc535dec93c419a387bfc01872457f90ef95ecd3d1fedd69b89a124fb5a14607aa0dfb00c1caa8807d9f82591c6207e6ca15b1e72769fcc69272b0cf9a00a13ac3cc5b5e9082fcd505e63b6fbc6b68efb6c3e773b67236fcc9d6a48ee63ff8527fc60f5fc1b9a7e0ac499d614cc3bc5c86982ec205ba93ff441c9a45b018d52d15c4f239f1110a293a5b47b46d0a3e0617b077cbfe7e0573554d54773aad7a8f34059574aeabaa2b8ca4934737aac5424887e637ddb8f1439a2cf428a3c6561c15e894ee93274a9cfb76b579d127e1e4bf7e04082d478f8a2a0745f7a3eebd4ed89175a248eaa9418487f9a8de6c9789325ae01d85f2fdc849e7d037c846dc0f31cfd99fd6c16d92e247042be78588559b7fa3389241f4a06b1b80a42ae837a898f5493335dda6f6e8f86af5a742c6407db323893c682504e75396f5676470bf8c176701987ad96d025a41204e80383e47e75b6e07a25aa47cc21d137684bdad41c5e603821a96e9f557cc72b158f564c49fc988ef76dbe6bbd3034f522e263d00987e986956f91d1da21a2d42eeeb5053b083261651815d4c38f8f20b8e6ff8c563205b45f236b731b4957f4a0fe80dbe43b8ab3240750cc2ce80b886c313ae5c4aad400524e09b9c029a66a163c5dd903d24db7e34e042fe4bc5f6d7540b9d05c87cae79f99e9cedacbfff43539ad4858dd333b13920a18000322a97686a5e076cfee902137103a53d5e0cd2722c431e2b4459024ee39b79ee4a0a0811b360f7e8716ae7f3315653275e68d35c5885156410b56d3e6ae427c412a64156f6e32578f9e188444a6cbfef57966897a41d33bb098c49fb8f95c8122e751d3861f2c913c139ef4f6e94b02cd86d9ec11d7c63828da38b7cab6ad0265b93d3f06259d72aa7c1ea8839ea8211834030c15df32ed21161bfea33a0335ea69b58bd6ad5088b8a3fe23c96c27bd67b068ce74d02072928ba45a2cae9ad5d6962ee4ab3448afa25e124cd283a25a2bf894ad59efda8bf24c10261c99a3fdf1ae21c0f24fc0a1b80a1164fc8879d9f275df47bf1cafe0b535085834fd1e186cddc072d24cebf680ce03c793f335f7bebd26b779e4a7108936e001958a10f1d5d9a25bc5c842e332a6b3360bd652b6410cf5791f2bd869dd1575218a41b15f9ab5cc1b629327b815b6b1a847c4143efd4903833044826de1176d46c2ce7b169f7947ed3d9fdfb77e5dd9c1c79bdf069a2b3a057247f3eb4ddbf5ca0e76809f19aa48e17dfcc9a192f72b7eb47fc82c46b5c7310dba8cc9167c95975b55ab332029fec4402ffce4af90b48b25836cd04567e8db945408c87cda3b20a6c9a301e05a7b3251c5ce628d1fe26233e1ae0632915c7abd98526da72d4226298d787940e3b2b5ea5e68368157c8f4c1765baf3b804c4617582290b5baa5499817c2da8790de39b76ea0f550f7a5c15b897cc68ba116a859186d2fdff1efe4d1edc19d9ae2dc6d0ffac43dc3adf2773875e2629cb4f65b64328abb9812143f02d50de78b6af545119769de3f405efc587e66a04a866e3b7b2c2294614fafb70c6632cd1cfc03c90f6a34c7ef0dce8a86a3bc8f1d370bd5d1721070aba660f915bd03ec1a84a0c0e32ff22398266b555bcdbfa67e8c0a8e2881c4e1f56688c2b9e7148fc8881f13e6b2abdf05f071263d069ab85328873d40f19904ac4a6fccd237193dfc8b45ba4052e330f9fe0e83bcb157a664f9b94b0f6cc4f4cc36f1084c78d4aa07ad78ffad912def43e3e3f11a13c3f91c7847f4c36ba681367c3f43728aedb3ef889e1bba6a1d002a3d54e14f25fadeaf0c460a27f291c1c0c6fdcd5f693cd3ad126d0f8a1b1ba5806a01988fe53ee66749e74fff303e6e9b8c3acfe6ef0a546a043189eb291f255d2787ba2b6aed9532825a282266df65f320f07f501e2bfc866d700cd46fd45cc547d43430dbf952a5bb75474565e3ba3f4e53080f12886b2e05408191dcabf0727f469fe8700a77bc8fb1090c7b2682c254c8008fd0b6cdd8810d685178a0269bcd50e6f8dbe531c6c4196a9ae947ec106646c5a057ecd1f7732c69981efb62a1b12e9e7b131311287cf513fbfdbcad9790e609452f8d628251ba8201cb72bcf80d5c758d796b4746b99c9dac0c1fbae139faca94800c78d4de78de181e93edbd75161fd0fcfdd8ac5ded15d8637cc0b665a9e176e50ad0c038048c08ff0662d8e6f634ce1944e5aad7ba6e102b2af659e0ad00423b6ff17b381e4047fdf655ef792f09987d425822015f05317d85f63fbc519f27690e098f44fff3161087312a4c1dfb9465cde8a6568320d59a68b0d235b3458a9365528165cd2148a1339f109921aeb13180eed25c446b5f7f19698e6f779310cbcf0f1ac749cfce65009f26734133fe39a473ddc0c4c91091621162df70e3a56eb4bb960276274ed5d50a2c6808ec5fccf1eb65f748cef1ba7980b179e82cd4cb7f17e5eabcb2e33f89ee9a4186db379b521066badb7671ad53b2c60d44648d5c151b91575ba8cec71ce0ac68398a689b1c648d391c14b796cd1d624b1de5ef9bce3ea1d6c2c77dc431320a3cf17c309df7108caac628eda6b38d377183779f7558ede780283fe78e29c5b825e1f794aba7e1678c2baac677bc7bdcf9e6fceb706ea9bc35ec340b0c16abdb5f8e99ba7fc104d16d9fb2115c8ae7a705ca9cd88af23fb73030c2a8cd04e673bfdd681824868c689dcb8c7fcd70225cbeee4dc0801008497cec5e161e6e514f762b5f306508049a7b7c35cff67bf2b039787d2142d6669094bc5db65d75f47cc9b3d4c91f3ec923ec0a070352ec597e286e47e30ae81e39d6869fc0783119e96e855412a7ea5355c6673bd8cc4dade9cc2766ac1c1cc3e8c5eae0c5b2492f2870b0ca6f49468241013e6a24ce1642e9296aa0859006b8b37a30e618d5d68f4d1c3850f0cd600181430879142d11e89a2dc2fba208f27cce52bfde0a1e0ad6f8ca79b780b675a19e7017ae19ed24c7f719d9860792268a23f559254c6d64af57701e27465f52ac44fe1f0de8df9a6f99408bd79dc1eaf3e4aae39af063013631f8f98fb054baae8807aeb069882aaf44139d4304e87e8301b8bf44fd0599e6a1bc4d2ded5a818da902ed275d7a3e08b8e26551ba07fdbbd29d4f96e45894c20d34c6ba738bd93aa2acd22d8210b55236860eb1d501b02ad7a5adcc1f2789cb09f37a219ad493f263c41a0f11c06e12102cbc99e2c0e61b53b24446a7b1cb6de21c34a63313dfd35cb1d49d4af1fa200ff95622e7396ba4042cc0f777d3c2e2992661eaa90f386190daff7389da596c94464aeb37c0dd15ccfd3e274a501af936c8e08ccef590c67e0d23162af127c2309256ed2a882cdfbd08be6248274e8c8131d0ab4db1302be4874dc2dcc530c63bf7a168097a2b62cd600999baf4a9f8733002e3eebc605fc8158fe20547d0e63a1314a34061628507a1d2f72dbbd2bedfd68ec8ae294b38c9f980404a0bbcb5f896a53d887b9258690fb1eb33cb3f58e2ad48f335ff7c3292ff7d2ae0902ff221289b19ab6871253db2cbf002d41598c487b97431fa0a1fddaf67f6df38112a440da37880d7a05e769bf9567db9ec02a09c461447e17c4751e9528d71faba19ca4db6c4a8df8b40a052b373513c32ac330f235395611a51fe36f03240a8a044c1d9a1376df4b92556e3c79d33f33dd0c402bdb905df7fece0dfc50b3550a8db9132d6e15dd5d87f33d7fd27c955da6e7615dc3f600f924e0ee8be4ba3fe548312b6890fb5764ed212f01dc84ff61af18db05a26e19c504b91845ccfcc6198a26408a935e606002d9c14d3f6999763832605449944116bd04d8f91a0a0b879679c2385a193ec7527fa28b22ce981436e76009404a0fc602b5abfa86424ce337ffa4d199b366057a211d64ed4e17be9295bff28adb7fc6ef63b875c78281e185e10a614638fc638eb55818ed67adbb37f3c88cd21f8f8addd3d9d3dc8686cbc38bee501a1ab49538c295da9033adba0dd67395a2c075097354172831a1d4042b799852cf417de8c8d9b499e27aa1114ae4129fb18eb360b50836f307373b8876e57bc080663e943ddecf4cfa839419d1e8d34e54765e41f5c1e78ab86f28500ef965a32a1590439ea637b200183f61eab4ff08693350af9fdca8d373a315d76a1f5824f7be8f6f90da419c4cfa426d831a429976319eb173a056448c27c8b23ed5aa8218181d1cc3782521ff6174ca0db8782fa389df56af5bc69d1c564c391b6c5b1ede89379916e784bc3c51055ef9ab8af136828fd69f5e3f44a1ba99b2b9719cbe8a048154dd6dd3b861059bf4c66ecce20a97980141da04f7a3b31705762bd7304ff713f5d5e15d5d064f4047510a9bd1859c0eae1a55ab9ce912068ecd1da1f3f7d4eb2626363098687b311800957378364191e61b40955c9ed758ad69bc0b608b6a1925bc4d299d9fa52bd51875fbc1ef00d8c4243e10ed5c2d65c0a74cc50fa3221a4549d0c987b0d24248a06ec66e335d5c65423f7806a027cd694a44bd8de70c04c93a5c56bebbf3c11a72179d24f885e61dd4126885dc398d633dd7ae60dae885ef86ed7bdcc6fd4ca22d1d6cd49e16ae53819e5e6eb5623a8b99e07c492e7f7338ac409f07449ef664f3d843c780b59c91521ccd1f4582fe86988ad8dbcc5417b3f5065f6bf83f7a5f3f92eb0fb25a33b66a4f9ced75f76feb4e337d94e77d8e1ae8a3ca77516025d6537d5d10293b48c19fe41b95103d6b3c1003323ff8fd91adcf55f60a1304feaefd72a58a522f28b13cf685b1e1e6274505c9f782bcc11d0f4b7be15add540051b59ff902c7ddef100e24bd398a58806f491448374c61afbd28c62002e6a1adfd25cdac767f5704f6a9676662cae57a0b15c212fa927f88eaaf97c0f34ce4cdebbff2060f60796dbbf208f5647c83289213f1df2daaa14cbb1ad453209eca83f20b495c25f4ed64b964568403ea8f39072e85d561ef92760f6d8752ce498d42ae796f6b6c1f41aa5f548829403e9c142adaf0b4ae0a47896feac25ae581a1df18eae32bee1cb1389f08673371259f5fda5354d564a8b03e9b8b6db1b33a66287a9862f5029d7975abaf8f0ac09c7532f4531f705bd40938ece09437e44749197a0bb31e18754841cc96a11bed7acd9d52100c719c0c0462bf3d401aeae55da4622c3816e800349567aefb447305836ae313bec764fe3d1c342e4542cca4808af626bffa88a605f7aef3d3f4c3f750db37fa450b0f3fb49325b733a502a284d20d4ad1c935103a4c7ea7cedccc80f6a352111ec04128fd336417f4e960384b64581c1a9e6966d44bc739c7963989158a83e32afa07f48b1f9f0b7119f78aea3501bf959ac0a56dc83f072b68e582d0899b53b4d2d430c812440ab5a2454315b9a480b1e12f33a410789f113ca85f945d1163fe18daaffdcfbe2c174878653bdf40ab5e6e25aa42ef08b041460107dec57c68e1f78e8ea1314d84bc3ddf219a6ba8b8da005a328570461feb8e17ac4f5013827cedd247c21ce194f1e1bccfd05da87a3a4308efc607e423935aeb489c4bd06df2a0fd7b8a87c8e3e198bdecbf08662dfcdb0bc2d9fd3ae94661d2c98ed3cbed1a284b6165bb5152dbedb95aa6df4c0d152cbe15c72472bfb83889262ab9860f3edee59928b847cb3b9177a51859b50e7ba9abb8eef7eb749cf5b274515bfeb42b70bffd34440d1cd7cb839cd43f66a7f2d84b9e5fd5b8558bf2d9799061599d7549ab5dbbcb370f1b72af7e7c9962b61a514f71effd020669b58ed65170d8b2b7b4af9fe23e2586ee62df17a0f3a17321861f35d36a48e2c24f7e3ceac6e4fb85ff4203b9d389c3f3c0e4839b2793fe31c4448fece378e1e4aafddae0294168ff00b8f79adb3b9fcdfdadf15f13568b35cea1486dd514a6ad6fb42c485e6314061156af549ba4047a3417c9df06f2de9c064dba6732498536d4c5ab693c6e4c4d00431127446d8d86364d8601cf08f5f8f0bbe2fe4ba3ce8244838eebc25678239101fb8b297dc760208b6f34925af7c373f7c1c73476cd9cc049f26f977fd1e10f5f436f51581def17b8e3ceeb235f149ecf0b05d1731dafd70a8dce2ec65ee001ad1bcb191d9923da29e98c912fc4dae6ee05224bf251eae8dd520200b94af0486e92f41009937fd51daf7d12c88b0c6e08c1259695511cd00b664cfb9a8f07cc34006455f3ac874232083a658f6419dca2c223897a0bfe0a66db6d737696955534398acf337f6c990cf5a07d4e51a06cde353150ef5abd90b152a29cefb4de233a186fc2529b49ff77b6efaf3f3683052faacaec7527cb923eed6865cf05c79cacdf53914999bd082c08a4628d636fcaf92c02ee9ecbe8d8e3a101cbdb6cc58e9bd64a54399a1b7f75967936180d3fdac473a1a1120bae73cafe6ba0c7e7ee9c43fe64a7e877a5af620c2d6b851efa89a4aa96649b1e5bc18a24201aecbe5980246ab3dd80275e34377a0425f614e2a99fa07c7341d2af2d4b756e805063ab4958e76cd0a29ac373da7b82adfa172addfeb42d1e292354e425b80bdfc51f2566eefe871be519c1b0e398c4aa525df6bb87b4db31f14e539331e3c53e633f9a2a54de97184561a52de30c03bfa605aa348749d33491a4e7ee5ac7a884df0e648e5e1e848a14a238a34e3db60a90c6ada45791ea361a833a6dc50160a119308030df2588c6bd877fc88f6f5c7461e629e547c88bb1070c18840fb90de2be5467d972a51ffd75c681ab271db9ae43d37b5b81cfa6e5a80b7e56ab8c5b202ce2ba555180c66a4d501a7ee33ef3b1a46557a4b611b401ee5a8fd7da305f9906d37b7f3dd8f5cd61028c0d7fccf0703006de18932728b2cd8867f6f990e89c7f0ea833512391d0c3c14b7874cf9077871e7edc762be479abac40f39d419b73668b933d2f63d1bbb9d627d9b5e142a927dc2941b4db182c0b77172ef1463679bd5427e29897949a53c76e17d34aff0576b47e1baec0cbb11df91f754486e8a52381ed353ff4ad2a711e2fb28a20fa35070376bd8035fab1d42a3d6d3d4cb93415892ca482ce737874faf2b78642415f5ca7beea3fdfcfac55da3fb27b786bc5f7bfb5eadfd2fe7c1bdd2fa46e0e3bb1f8a93b10a1e48d7cde259127b38a8fbfd5b15112e21673c3e33b0470858853e1e1c0841e883eed5c215d0271a4ec0eddf0c282165689b28ce3d45c79e49b0d36db9154bb5f72be7302a05eb53a493714da5e7b04938c63fbf18d1b01a1e95e043f5336a1fc5daa26f31ce0ae0166374d2beff5f3046080ae2a56cfef36d8b0cf14e877e3547c07833f40bdfb16daa5e5cf5f78f27f0f0fd67f1d74104e66894975550aaa562ab6d272ab5d47c80323910a60c10febb954beb87e68297962d617b053f05db505daa09e3506cb3799686b74630ffc20403489ba3ef9032802d902581d2356e5ea95e25df01b698e540698d0ffcc440418261b4afafb6c7f09d11e37c0002795494b81e8e287057f011a3771b67dd8333cf191b82ee3391395ce5cefa352a7d6adcba61b864fa5beb0bfa5bc69c24207b0c3d38585fb44209478a07b507f4861351584e45c97459fbfff2338afc38d402c19b6711ff292c623ce60a73d26ba5bbc7f41bbcfa975520ff7ab015cdb1fbf4d429df3f723588c912a833825c17404234cabad3a439cdfcf697dfd57227a5909d1dd0231734d53bed034ea0db7f477ad745cd3c25f44119f42685414f51f258c606b768a7c314df41f22f4a22d6438b860d6c79096c6a65c50971447a3754ffaa2dbcf68b1f7044ff57616c5151dcb720b2bd6115e4ba3b5ccd2b6662178b3f6591504e79faa4a0e0a501a62f5a11330cafda0dbeaa2d0891967d96992f3980942866294babf14aed93dfe48e8adcba413b587365efdf0f476310a04593f592f1f995b573e31f19e72656590c3304106476dd1af61b724169fe7140d49a806c0f7ee5ad6e47428e5eae769cce08868302e7dbe58b9034da052e266972958dec7e83ca8d8ac49428d599083fceacc2f065009b0dec8b0dcfb7f189c7d422b98833d27b6c94a95106cf9a47796a1336ff2d3dd9414f5da350aa5786d16e4d838a4c8e590f83bf9aad0c69051942b7e7ed27fdf9309657bbede653eb317db950164f668638900da2241e21bd6c1096a038e2ef6a5f08748fac52ceba18ffe2f56f6b745ce04b8311b81710b33c66276f370d607983d14b6056af00a87da8cb83df606622ebd3f0a84f17632b05c0111c45aced35c3d54b0291fa1ea26b8e271cce79684bf803ce13419219fa096b279bf7dbb4dd2887f30a9fd1a39fc4b797a1c9d2d2eddda4f875f4b909a659ec87796d22b3d2d5bea0cf1d7a97f6e1679e1629e477d060dacae9706ea26be0da4d85c319dafcd0178a2d5ba8b21740096e3ebd523373f401670af73874398ff0039259659a64dc255179a1f9989231b406f35e9a9a15e3671fb4d43538a71f0f4c1e82566649ac46f47991f8e4aca49c9e8d7ba03aadb23877c88eb8638ac00fda7117de97e3f358d66e60db43276d46752b6ece7622cd99d292167ca673f09bbf3dcf84c183f4053de7d54ebe382efac7aa34d3884218dbe4f6fe9a09a9c4c3a529a355b996fc72f3109561c5cb6764cfea332bed160b49e83e5024ff530ffee24d5d6b1ad54076ab9fc8c13473a338050ac250f1bfc2f6bc75fdc6a59d5a6606f15ac74b0f756ae0d39cc6888a8a7a19c525315344f6c25f48899b3a462cff4b0db331675f02f1e5c746b615d7fb15e9b81ce033b1c29a02f8e4a51540a8caed2544686bac10500e41813e928c481b1d93426687853a68ea3c11f55ef902c7967a013738c6555a151e7c0ee06ba6bf1e758381de69cfe03f35529ddb269300128c6666ba7c5b4c464d04fb839c31c1605079bcb5154707d428994bad35dc6710c0314ce8503bc6a974959efa67ff48f83f4a5e2a8f660df075459509172bc2c4b609f79958e1136a5254a70c6eb5833a7a2bb1bdf9219091fb6ae70e89ec20e909a72b31752a781bbb460c880330eebb38e798c54ab566a65e01afb6b94414e29b73ad174138ce15515a8865a8f43105d2f303d6b6dabfda46c939c13506ebd26a959531d0e1bbd7127188d7ecfc71a15fe8b20b662cfa0f64e6393df37907bc53f8341f661928c90ddadce1b2874d085b8b5b2e484f47bc6937d9464a7ec49888ab84330447af4e93a983bfb35beba3e2552f560177f286e59a74996e99bb884be3a684f885f64a78c9071e8f4ccf395bc7a847be840ff6dc2c4e3ce302b46257a610dbcf5480a924c36522bf93ff2dc018a57e20a012eacc087057d31008be5022f42096117145549dcd94996b8318cecef3aea3892eccacc02e64c3abf6d0c6182093d1c3dd53924ef681ba3bcf7a6401e809342cd8aaf142fd995cc31ad43d5d51a43cae6957f9b953bf06b56baa27893c8bc8c8dbebbd833c640a7a98acc69179ee29c5c430287fa1180ef6b14c85d340f400b97034f75a798c91efaafc08a86cadb42b5d6541f6974a534aaf7a123a5c75ab78084691db162d628c6d3081cd25fc35fe3692117c5ab261725cb6539dae147c00834808da43363d4ae1f92decc299cf92e9de0292de93f3527e940b6b8fd94788e05777c7597b8bb4eb566fa5f4cce0f20d565c9595065838e6093c7860af110611fc2d6b0248e387defaccf5b4e81459860f82bf22bc27c69ee9afa7365b5bec95b1de92aa4738bd5c8b0b9a25d9a3d414a6cd0a6dfe592673a22c22879cc9ed4edb4c8a3149c32df5a547b705fba693237f3db5b5f38225002cd2fd343a30c20c85631e01b5cdacbbf36327f3fb7d8a48f5611ca16096cde15c990cbb944f60592522c23b2644ccaf216e4a76de170c3ceb9dc94827322369afcf32234eb9f4fc1c135f35dd1378a74b221a7f8e2515f198e785c971986e99953ade08b09e424c5dc40e66a31e84d","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
