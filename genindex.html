<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"de9109571100199f093d3114e1a2e6bef4c5392e065bc723a6fdfc9a4fa6f1e1d43cfc6842a045aaed062d8d05c9da2587921844edb36b5c2fe6a3d1963ecd52830c368fdadd23430251ee96a53ca8b88e7c260f7357a3303ed80134341232f8af6f60b620733cb03285be9f23204fc48ecbcc50f7cfdbaec3c3eb773a0d5130ee5bccf6a86cf85b0b2ccd187a1f7101c4e98c4c6e855fd0ff1c9023c8adf48bbc5298e091af1dc9f4c587992c61fe86e54043654bf6ea8aefe280ab547574f11a3a5c5f2760ac213afdae365ef6c2b900bedcd53456e41a2f1b9816d4117a864724117608a4777eef5f62541b62ac5c208e780983d3f2703b87c6b3df66a09ee7a475d73874fdb2039f70afd9fc8b0e8857b6c521a01006bab95462b5b502ceadb8ac7d17a4406f05af9b4c5fe59d21900005d8875017c82a3d628963fe933bdd740b3b8285236c7f8f9c04b728c61736c34c208ae37229fefcd0597792cb95c72c985e25b7eac0d6f3b9b0178df5b842acba0c863ec525d237ee9749a5b9ae6440e4ade58e7dd8826a626f3d8d70e5cbd780009dd858707fbb27b29b65d83e4972ba51e858cf2c54fb9f57b180d2ee05bb747a23cc71a4e79a8a8767c3c953a832e0fb90916265394e49a811d0bdd3a9c38f407411c21c291fb37d80afb7f4e6521866c2c53348cffe6236ef9b8d6bab3e7431e8d43cac1bc7947659fa64c811de6b760c99acd298a42be05cab0210ff00f75cbfde4876e27771082eae6a94422a70227081d360777ff5eb12fce4e988dc0cd9a489b5529f80873b148eb790ab039755b5b39c7ad2da0821baa3ab630f2bd5fe7cee5e264c15aa843424a32375f4e37a0e3c0d2b9fe5faef7341f87217eb3372c4127311f8206dbd07858c1f174b3e2df3f4b4294cf21a6446e69fd05e286f6320e87e2430c265b66dc2fe0a60d826f1e7f8de97eac496831e95b2e46eefd0f24d7a6e43f27f2f919d3063086aed91d890cfc81915feb5fa4108d120df01fda3f889c8d68a0436f11385c333efed8122bb1e772096f7fa28aded066e2f2088f328f5aebed9318f23c3db0607a0444b2f62ad328760359935ba63f2e1a440f03422b08d721ea3c85855a1915f96de0594bab78ff2d1d03fa6da372da8a7965baa9488a5b845daf5f1c4c78ec7aed47680e6785c8d18700dfe328b286fcb98cd530402a71029fd464c604682428288aa6e7a315570274e4917d4be40c9c767e6b8046257de136d6501e37990d3410d37b6a9ce761fd5eeebcb06a520c6a1c8cd4721442c65e12a5d14c3115c42ccfcf77af8d6940078735bf7b211c9be469bdef4319c7a418c4ded0bfa01874e8a112381fc0ebc3de5f1c3c8a2ceff400f8b9d8a24728d1928ddbf305bf13831505bd9009e65e401f017e6f5e3e9affb2198aa10b044bb93e05e05ec65cb18ea7df6910a3b2d025a9ada65fb0055f8e076eea41341ab88c194dd9b89c6390d6f4fd0891d5fc8dc3f0f25650d89d773a34abe662807c4a063ed4a168bf13acd5dc3aab2756bdb1465ec6236667b82df891816509392647d4f6116a6f04c28b4dc35567ac8ab6b287fdd6a1208e38d2e9c298f14e218babb273fecc185273704fd71a3817e4c419b0f4c70b9ec335de239ce0778a033c68126040a2f4fbb0dd1bef9403427eb5cfa1176897b1bd6450c79e24e6603d69bbe409155b0adb864e029cda9d58579c09fe0fe47f3ff4a9888fae933b404dcbfb0fb9ed8723629d92f6ae5cca854e4930be7437b6ba10a81d1480d3fcbb327ff42933eccb32ac6fe05fcc47202b47e7b744e6e7830c2d3476acef4ef8289fce5bbe36539e634b78575916418964b7bb548541e6414eb398f80ede42356748ab7026758dfd3d220fd48bda60320761621e21072bc3dc46627917294e102672bc5f7f5be4f12625bc9e6322db790ddddfccf252a823ad7a65f0fd2046a82fe7a1229408bc97c543ec091d89cdc66bc04ce69e8e127ee3d2146113710be17eead05208dfc824b76b9a0aee03a5a8df2b71344c3df3e9d3ff654064bde3bd03556ca63d79c0e8c5762eabe3da1b1f4840b9c94bb854ad7b6a7048108cbb4afcd14538f3fa631fcb5fec6e3dbf64583ffe429070585ce8e80f3289282cf061ee84762d81520fdd784b3f2f493d0ad857a6dcc747cd55175ae5c99fdda72cf4e5133f373f83e1a120dea582dbd1093914478b8d9fa983a26483563d642842f351824217f98f92bd809c512a515ab65d26de3a46eb26ddbcc07e30d30e7aa26ac3c8dcd033e282ebafd97f6fac5c61975182fb4a94edefd47b26a4c88ce050249070c09f8b021f6cafc6e7e4e65a6314367c5352bf1f91e567a9d3fe2258dfda80f9ecf8f81c24ce090821ef390497352812f52a6ce2b1ac3d1b502ad68f260b8f9d62163068a077a4b9ed733850b550ac27adab0de44c08e28ce902c109905c911bd7d86cc0a61d6a395ff142781b3bcf3bb0f7236acbf246c4364c97ebc1ac5d47fc9d392dc8af7911b156ed3fb691727c0346fc5aa12d73977c4c20c3841529c3025497c7148369abc94ad3d39f5f21905cec1050bfb0b720e2ca76f7ff460b97823d2a918da9b6e8e743db8f8a8912face2af956170b42d017bbe3d5f9f21fa25b6d5305bd58833ff2e76e4343df7fa5c38f7bf148be6e838f23083ae83bfb3eda47584a2cf7708bdb66eb3f454d310d8b1601e12977d0176cd80cd9d3abad2b368fdb5006cbd5b1670805c5f3eea359a80d9f242deaae0d131be0f0a1fa1479769a260a14d773396a3c8034c1656da8d01c78ac515a9c73f062475d54dabfca48a53dd4c3b68c6296922baf334da28f9b010f2c66befb9c626baa511eb652ac06c62970ec36947be3aa9c21055cf1c009cfa25600eb4cba5a33cd820b50e20fbd5ef86bb7c39f4f5e811f1f3c9d0bfe1cc33167bb55e5a8ad7982cecea03e76c3cc25227766e32081fb193cc0ae878ac8b9bf02b45580d307a02e61d8b6875f8f97cf2a908d383d66e8cf6f60a913fba6a9e01e939710ddd6f8cd3190041455a4f46c789b003d0ec7df607bea1801ef8c579ee7eeb0246fb50d3287dd556fd10e9310300200ea563276dad6fb7a5892880f6d195bf18f7870ce676149a49102d4e98138d3ff6cbb4be20b2f21d27d67f103a7cfe9217808a6dce24e22093554ec2f6d407e669f0fc026389bfbf1beccca46138060503d5ab6ea2182e49c6fd974d9e0cca85aa5c348559e818151da625400ac011655b04bad5c8441510cdb6f8328ab2d0d7ae071f733b0d94f77b10d3b456792141ba1aad2418066cd2a9e53cc3a976152e7f2822bea8652a5d5d352a7441062786cbd034021bc2bdb60cc2bd0f44ca451cb2f0924278591b8b911d3136a0e6b3c294d0d878dc95fc7ce49f0ae1fec5977ec4acb3cfb96b241b435fda5cd91f1422095ab32d96c835d2aae28a54e2fac1fdfc9ed2e890e16c66a5283d39017a508ea79554edeecc320aebd22c113a01be93f7a251ac28b911c7673bd76312e87d801829b3de84230312ecf3f7ebf81cae7f38420f2f402c02ac752c9037e8e8944ae9a82c50957ca54001ba268e9599a32ba3cc65346d066402b35337e58d52f1e33977bae7f95cc12fe19488798bb5ae12dccc82f4d3b2fb09007ce5c1cf78570c36e912bbcdc6088a3a6045e883135c934486d3551cb580baef4a799a1d84a4f834e4f2163df6cf0717a51d8d18299b7a01ef49c97c2bb81c50767f20f96a5c07567979abcb3d87850c7afff8e945021d8af5da9533741307addfbd61ee9146ed03cf691e5b7605357cea8f5ed1eade26316771aa8fab677438c6b5a66e1e53b9c363e77f33bef9026a65dc273a940f91ddedd7a874c14c8c210bb9eddb5215ee79ebeb1799aa79b9057f1348029b8ef5c5cfd10b4fca56df445b6e4fe98084b862f0f18915f1e64ad388ba301391dfb683e8e6b42f6b384046c8bdf2949c51c05e4da15ac2bea45b1e79055841440aa68489e89a40bded59e4541d55e53262d58fbdb4bbf1399f747cbba65348bd55983ba47f97a1012e45b3e49bc68ce5fefaac9d33da7f4f41e5c97ecab4425ab28a09bd3145322f11c0742da232a3afb164ee5218c5fc51efa6724b3d753ff2c019100bbba9bc4c186cfbfa885f9adf7831948b49ea03c271a08e7e7ae711627753668d1d6f85c81ae16e44d49681576252356f080c8ad10deb0d3ce1cefe45fca419fdd696d590a9f94e893d008ff9ad179e8d75f404d7f5ab918f1f9828a1a0bd1cc9dfa11e9ccc415a571a34edd9846cdae6a9b73ed49a892e37916a197d5d97d9c29765fb51e5ccfb252254081f0e6b8e3c33b162d199f56d76094b21483cd84f4cc155d8912974e148ebeddf2bd9f8d29454810f186167914f255b69ded9c8af5f29f8dfede805de595042ba86cf20230219726de26ad1160455e1cdcebee3e457304d0c0ecab172c85924d9bc6d26f8bdd8eddc497caad2f176d547f6bff6fb708d6a70095a3028a81a9e80f4464d0c1166831c639e4afffb123908988c57eced78aa8a38bb2b070ad025d0c88b0fc166fdec38da2e969aec7855d436897d993c115eada8e39841fea161d51c6905ff6f455956b76734cf73dd879f86d257da596615975a0c7f9862fd769996d0dcdc34e28044a982ac8aea5f5da9abcdf0f12f471cdacd0e34db61783f525aa9d027cee23b840a14f1220b48943871d355c4289947f43c6ca687109ae52533976ba92f1c132580f618127f8cf9951d270b75190f4a0245eb61d005a6d48d184fa1022d6006e32275763771387e361eefa74c267d6a4f57168d5b1204b404c6513056d52acab5f87aa89f61af1c0b24c7b8f189ddd02c250abfafe1b960b5b0715b6102e7c9b21ef04e9d2592a931d1cfb726f5bc57e5c73a40c79c93e281643005af01feb3a00381c8b92aa3ee9768aba1f638fbdd9c9da8f2bf2c2cc5cf5d5c1d7b3fa44d923f9062321bb0c3b297b93d447b54ab8963279ed69adda4961a1a513c286aac614ccc12f0a52a5cca588b76349615b6ba6093fb196bf416116d7363fe6d404467dc8e3b4229d626935482df4d39e266af871f11e3c8668579c65cbe20e11f1948540b697d1088654b661e8928a7a4f53d922fb6cf8fb3f08e6490f5082c64a231c4a886a53a3858a04b3a814584fad7a47c502cfbee1689f690c80202ea90062c4a2bc25465a514dcfc6fc45ea9f001a68afe5eff7f5f5429657375d3455b1a0f5c5c0fe087da15f024845fc716c9a4be8c832d7479b151be4c3173d56133d8483c96a766ecc13b827196e126099458e9d63daf917a7a6fad078390645ced2260eaa057b2fc4e40b23d8bc763d50ee6e1c9873fd38d617ce32b2389be45f2b0b4f7d75fc2addf68f1b945d5ca1519c5873583edcd73640445af650ecf7ced325bc17860ebb7f8742b7b7d88ab4eb022cdf343941daa7df14637c1887f5de4c9c14c037e3e2d197a485a45b0e2944378c78bc09791c2509a1514da68a0bedfc8c5608ff3bd75c662c8a1084a3836a3ae9a439ea35e9aed8046aa522c28fac91cab0c6ec8a15b764d333d3df36e328f78009f96d918a9230b57cb6839a71f39aa042e4335ce9a6d14796744742548646f853bd16a7ec9d17f24bbe1cc9aeb8be455c226ab5fec93b20101e8dcda0fa54434acbb65e78eb8d7b6d2e2f2de00baff03b53fede037807c09259be13298152437131dbab78568935c7300252e0d0ade586ff87a73cd784ca0013d3f23ec8c179f3694cebe132afe018f3e8ae51e33346400ef9b83bf41fd570eac9645ba765a595434485cb36c88ac07a0f44a088be875f51db9b96ccfc8cf2345db1d216b30621c1125b3c5b9cb29235103d23a1189da6adee9fb5ec61dd450de58abc1c6ece9f5f7c88c601c92c6e5f112e8197b6fe5ef9f7ecec116fd5bfe8e313523a1ec29c33faa84a7a8e136def4b41d342ff35702907186fdc32458a1d616e7e31148b59c2a8ae4a767af90d60ab01044d93d9021c9af04c8133898cb9cdfb17f35f1e12dcd3bea59005589dc983d3b0418743130478ba7a28ab3ef323d7912c061a961a6fe706e094ce164f50dafd70cdbefed1d8dfeb630667dae8411fb9f4df48548258373e16922e86b72c37f046fd852baae78cc94dbc0f48872f70644e895aecde97fb3ed7f7b74b3c5ead6a4ae26576829ec48d5fd83c1d5cec525e7719c8268800869312d144c21429bc05cf3d3852f6518966f01d0c33a5ad2155a6f5d60ea2ef4e7b1af0bf05d1b6293885b003747284674ce6a771233d9dfe92cf08b65ec91a38d2ea8bb3ce765a735ec5a302db302a5961af147dade05a83d9845136586981d88faba213dba5b8fcac98aaa61def42c945b19192f857120b096375321710ce390a6f0d9cce730d2f537bd900ce913fb16cecbcb9a0c605049db733c9cd868ae60291c925dadcfe21d1b76344c8d2afba34728db745bd4f86ba6a35e35b3fedb48ef416570a949b0be0fa913e7de59a41e838f0e7bdaf9c38c44a3b2c58e170308fe1d2d60819e8e48a2af2910e8c94e6820dd1ad4e0511e9d5fc9bb4e080917b7c5873bd6d0b988cec020d6571a5a64ac75499527f96cbdd154325c4961885dc97e4bc3b3733342dcc965cdca11dcef69988fa3ff6b064d3ce0a8c369203850a1da0e1fd25faa9c35b6d9ecfeedf9fdadc3bed31bb66fc094a587289e44d89946780f0b88974a6225ed40761d1426ca1b89b3fdac664952bac68c69afaf01153ddb5e622341530cf120f02cadeff263b3c1d50e42a70899f9dfd3412a337848f18e23af3564a089aeb33de2c35caefffc15be332e08107c11f83446f029b5c0d147fee46274caabda2e397b259f8d95d5dd6053cfbbd07270a4a47cd71cb82faa0203d83e29bfb132fd7fc2f7d072f3c8cf8fce70258d7fcb051e979b8d23a6b0028eb5fefe1553acd90d0ab5a771b1984f09ecf04403250039b01cb63ded4345db66770e82c11277a498a93e5bc3ee25d6d26b261ee45e922ee678dc7b75fd6d4cbf7a33dff6f9457b09971c7966615a9b5fd334a6fc67b30822e5b4efe64e1171a3496aa1bfa26b18d0799783845a699daf3882776876c6dbc3843b3cd160ddde703753862f454df5930909dd70da6b35ba3799d7f348199e4b82a258569f34951a4d42fe003d430b5bd9f283e097f994110d2710bcc549fd33581ad74e6fea64fe771dd4a58d4a1c14e62545d09f4f717895418ef3c3d75b392385d689b5f3bad15648f43b8a8aa71712daa465c29866a735ac4f9cd5e0a50bc29398321f6a884e8e4b7ba3d6c7d373c672656a35606ee252f945c045321f38dccac77a583435a90bbaf894b8209d42b654d1e19c210da66e569dff615848b165d17756629ccd944cf268fc7eae41dd05cde6c48f6b0b5c464eae275d11a3e4bf0bc8afe26ac2a7d5101605ce00074231516f15bf37b8836ef7f4b95ffc09119fac7fa570dcd9d3ca331e8d41eb08ba8904baffd6311d1754f28a2c0fd26173ec0f34ab5ae1df31b74d1293a92e3770fda0ef5d8c7983ed4027a77edbb55bb22196c5af00d3c2185be1910a3bf5a1e96f4d769853649d35ff6552ef58f6e90ce790d74e2430f264ab71fbb644f76a734f487d956168e3fce55a61d870c443f7975761d5f58f2051decfb443ede2a64358126440de6956b54de569a8ae2de025dfa9ea650624ed0ef1f20786ac8e3d05b0e75dad898f0f23012b50c97780746ecd13eb9606c2e816822e66e9e931ab15406d6afa3b4aa0839432818f48dec9c19ea44af6d6d28b39d29cb96c6c81c3cabfaa861206eb0236bdaafdd043dadc1ae27f7b77de2e855d15eba64fbbb8a864c9a21024c964027f47f586c3e5e68f976eb8d464ef0421c90ec144a4724df9856aaaf2c90c18a70127863787c6d31aba218cd07d4d26131d5261003cf0e51dfaf3081f9826d0ab0bfcb4c0383a612e2a73544253ca1846712d49e34e3d97e714db5ad69c14bd1c4a951220c4d2602fb7d0e56f71a133f15475b02cd2508225834b2ce34c57dcb5cc8cb91901aa4c97c977b3fcd8a19531dafa00d2d0eb2446f31d8fd63b544ff484e3129542bab220167ff9cb875f8bb0adc5135ba7b5216705e031565a857b25bbd9ab42e631cd1a78beff553d56ba3dbabed7091264e172c8501c2f6b0e3357bb6d1a496c9042c07feb99533ccba1dc3769c8d53d9023524b47db12723f139b46d1e4760baec7173732de09a502c91f1d145ea06bc18404960d08b898eb836283e7882335b7a6ad4773470ebd067c4fbf53c8fdcacc288efb5df7a3899841f1fc713cb62e51e06d993c71546e4d7ce6ca27fd7e9a2cfa5e36cdf615dbe93a5028406db277cc5c5059851ed1e33337e2b0c50a956a5bfce80a165cdc39e01b0394cabd13c39ab13a2181485e71b41211b02d3a1e5f0077f804a89be2a8bb93bf0ad24674f64bd7bca4a7f14143d864583c5afd853e1d06b505544d50a33e5dea86607cdec273263ef32ed39d1f725953ba52e542416655d511eb9969b2520bbff4662897024a87f41b860c67e96620b5ef45e9aa32ada119a5dbdf1d950c1c1171d20d691c37c9fa6fda0dcfad3b188d25a160e1894e817514a8cf0f0cc1929f4a3597a0e50ac73b8018cbcdeeea398887fd539e2bc06792cf129427a0d79e25686f6746c24758767990102ff1c038b376dbd2b01c56d08f475f0bfb1ded71b5da4305aff5bfdcacee653ab2ad4839dfce45c527779ec8a424a9c1761136a9e2c230b0224ca4e7aa4a44f3ebe335aa920cf48983ffe0a16c2f91407658d7cc6ef101d6126c8dc61dd1ce6f3ba51415dabf41a699d34b86c1fb6ba4675d1c0cb4e2d7d183fecfdd13ec01cace17241689a6ad9c61a0d63d02c2c8004cbb5d30fbd41972a060e745a2454e176d208a508b8c8f19dfaae24dddafb3e84840e7b599e8a070ea41281daac6832e902add58c6607d3a46af72db2da6cfe61a58527b4f32150b0c6c8f28c92ce5fcb419bf38f1e3f84bf24a8b869c41ef9297ca9ab16d766bd9b5b899510dc5fdf5843edf426919f5ea91c8461706622eec9a2c58879586d254ec8b3d63cad525265a66dfa88854fcd5d22e2040f44a860745585c34900b87f6bba1659bdb586eba97c3a9fdf3d5970dbd0bb1a792562ba50d5b3ec3891fc229cb111984caaf5e5802481568d692517b0ec952c18f7f0ad0f36ca1a8ea04df4548ee66848f46ecb74eb53233a3125db0b32c5edd823678110698d65218023c9217788cb0f1aa4a601e8cb6054c963ef36524fd6a7aa39cacb8db31dc9b8827e15e784459d4325e71ff951c3cead62b4f910ef2f8619c38bc22a46ad2188eae6aa360e40a7b5adc8322bc9a4f2f67df5b8f0970c1a4b00adca277c838f6a351fbf39d47be70bec4454b2f991e8d77c02acc755c0c408cf0c0bf266aa4b32dcbd745f8a5cbbcf1934f19b63d697fa2851020cdf00413bf31ec0e127a1a8c069398c3bed0af6da6238588192a5a7225d29b3ebef217e5775381682790fe5abf972c1b52813a1f69c59ca70611a6caaf141f7c7cc5bc0a4856a56b16049b168d89ed1f2b4acf9fe19d519d4f43e0894c8604ed3aa61b9b0c33340fa3435a00fe16cd6105a1804b54e5ec5a43b1adb5a709da7279f7ce793f71449bb641cc89ed2eceba067aff66dae64cbfc906e4f919cdc8392053962c9cf9eb1b1c71f0129fe78901590a92d9e482e36edc637ebc1ed9bf0f7dd06b06794411a005915225051db320a5bd2becbca1318d765fa55ed0dfd423fcc426154508122b2de4489b7e8b43f07f60f3dede589e24be9d3f2f89575530cb545889eb2ac2c305f95450fa9316a4788e99b54c621633af02b3ac779e21ea2ab01b278130baf3230e0a83a33db48af3ab35eeaf756a0a0cd20b151304e5e8217253a2b6def70c78ab6bd4bc7a9baf6eeb4c99012fbfb0edd3671763a4d0850018e335ba5d68b6eba940b92e5dfcb1b151d7e8815a737e11e7c4ba0e9cdb2785e33f42c389293aaafeafcd259400ad4c329f21a9bbece1493fdceb08a44695835d4debcc2c1cf4d3d33ca4cc4834f1a6b1fb81992b055b7955feccc6d8110788cc78bc4648084517ca8f76acff16c3cc5b1c0c3cb26c8d7fa742e2c9c02eb5095d8e0084f18fd60634efe454099309e2af1aeabcac5fdc065bf9cf5a45247d97f00a6865004f83701be27c65e6c63f708f6b5bac1896301a43e927df9df7716045227960891b751a3ca491edde5845ea81fddde33086491f46df7690508842ae56610a045ab63b8e582bdf0c5a548c3e7f060bc268c0437e4c4201521aa24140174278cd509e874cf254a80fec0ba76704564b3ff57140544e7553fcbef89a788a1b382a2f01185700904d036341600fe50d28c506e0ee21d12b256378fd45525cbacbeec53fbb68873560fbca45e237a78672b4990416cca9c1eca774cc7eff0a425692e53d322e54094ffa6125ae9a98950264342a60439e91dcce3e5c32b93f055d56cf4f80512aaf2a766e94b948a5c7e89afda59b4d8639d8b6f9f3e2397364c0325f2a4cbf9c01d988ae28417ff0c7cea68ed11ea4751cf9a54b05afc73c5f45e4db75216a6e4de5bc750673cba84d184ae66b08fb4e56ad2bef19e779bb9bd3fb697dff3f14d4d86effcfc2d18945805e24cd126a74de30d2af2049d1caa6731aab2810309847d954cdcfa98233c80f1c830b008949e3188f54c890adc1f5003f7fdb7e5a9050a829c828495cde85038843e0a6333a050f78d980cf234163a1daf0edee749c1b67409123049428d369c22f68f7e38bd50c921ec90a3dda461b59dabaa89e1f7168961fa434a32861df3fa479c960939ab080df5d893be55575c6deabbf565194af2871c259dcb09deb5d43b1949cfb18f02f2fe70b8b3300b81bab88eeaa5132f7cfaacd8a2ed6585996068a2f1a1d5bd4ce6922286e0ae2a675372ff93fb70ba7f5c823ef2e44f03624c5fe4742895259286cb2fc5eb677902ff57fb40be3f335981f00aa1b73cab2d78811560b5aba72e98fe5f82d6601f447cf520073dca4fc58e1d1c0ce5c4a8cf2ed743eea76f0607aab9b8aa2143189c0aafb941758b1fce9ac02226359657ba66bb3f0b0fa22d4e109461123b77bc08e121693d60a023163589c14b1385d828c0b45d3149a2ee51976505ea3aeb6bb6b8013a7c43eec5a862dbcb36a1680dbe41c9a5b1b9d0180bc4ed244aabc57e02da2f8901a6887ea7cf80728dcf1afbfa3a2d87499f32d2148e007c61bf1b05d5ed71e5182013c167d2a693eb0cd0dcf57816e732677846d0649206355ad0ba450f53e6172776931c030ca8568dc9c8d1638817afb730482cf8e4447904c22ff0d50fc0d44a13a8ed8fe8814620238538a0bc622edbe30667ca8d8616484579b5ada7db25df8a4df1e98d533439cb6ce1e6e8003e2e7705761c542fee193b60518441f16958dbfd581965ad5da0a7b1f7967b0d0b309183907b925511b02698a8d4ac7907a4417685678ab019b4e83ec67c23f056b9ce64a869811b1a46474213ea5f124d34e6af88d9ff78acfd0588a6a57a0031a7e7a1ca172131414313971eada9a4b727773fdb2520b14efcfdc5d675657b7b936f841ce95809519c74152c4ba999e26875e3a07f958665653fdf3b9df0e98aa65a23336aa29f6d7855f1d31145970bbdb39bc18c32cf108f8761f303416cb7cff0032a8dfd0d971e91e892cf6671838091ab97e1be839ee8b77a037e02efa90b18649fd77d9f838d66cc731de61862a69a02f67c0e854b1927f1df098117bb5387f0779afdc7d09484ab0bba373c9e34acdd75e9e35fbba81085b548f4257292ab22b5aa8e267fbf5fd12bcdef92a817cf606d8c69dbb11be3a5d3d9bd8e82c0ceeff05fa160d9c3ed607a1aa83b913497226c501c691490303a4e68ad6e59964943be5466f8dcb65c04532e8d69b23d9f687c03f8d1b3f13ae4fc2035fb6da98f2466c3c4e97c9598e1ab6a4a283b44787997d1b48d71db85fc19c2614957eccf002d38490033130619200aea4a96053c0279ceb8d6cbab00c3629932b7f72dd0e29ac65a1e8168cebb5ab578c752b0053dd35b6002bc23598e54d9695e4e541cafcdb8524feaa0dd7ce9964d466c8e45c5a4d230d940c1423587d98292e198de947e94dcf4eea1e20cb16f3f70ccb9a226390d70889c9a2beedfc73483b5fbeea61b2eb4fc8ff56de8c81b686c7af45ea38f30d2d7c10a9b3a4cee67fa78ec511aae2fc59aa3cdfbd653c112c1343607dbe6b8fe1ce52e560e33e7af74250ccd41df92eaf82a1cff68bd24920ddae11272f657129765f1e3f0cd739f558ba8bcf55d50cd83d1de9bc09cd91556d4969a20f3d35b9cb361d72f267566769720773c8523a5c881a77b92fc5ee3ad5514e53d3d78b76d7bd2474250cc41e78a41bab71574d8dd3e6d5f0daacf92dadcba00510c13fa1aa147402666b22f84b44c05d428bbdb095e58aa6f72210a5e08a147261a264f4b27882232d0cf47f72a183ffdecbcb4c4916356e897c913af3b27ae422ad71c6fbf5115909d109337d0632127cb0aef62b6e0f485d8b0adaf673a149f753db7c209f0287c895146e26c16971491303fe84183b2bfcb79b4f0b6dbef5707e0dc021a021bee49031a56f30806cf85bac27a9d9d92dcda5171fc836a0c8e7ad43eceaaee0c7d848e2040fbfbbe5cc073a48d9e92064f4d9297ceca50719a4ac5bf55c74e7b82a1f47ab684af6a6d53a0771adfd50e9958f08797be0b668cf26dab4c800fc8ad7f3681f7dbd646857098085070d8139f69793f5e35e45f6f6a7242f6fa1c1710f5329a74e069530af29274697f3b3025796a9b4d07463b711788682630d606a2977e0b324e900cd61bb66a6dfa8c541e89b7f0817943d84daca98170a09aff345f531b08b86287f0e0e48d3df61138778c832ebb373aa098536ade7b99a27002bf29b9e18e8c28b362213e6426ae75a62a39e4f1d3db06acc01abdada8fdb1351e5558e4493fc98956b3f86e993aef0095a367d94774927c419a0df1c74db856a090098db61833e56d5d402fadfec55c6e3855a69c090ed6a9f87d6405864bea244a3b4351c0df9873af9092bfb1d1f97324fc103d7b945c8c1ab7dee127b0a46dd45a8755e5a1943e3f40a5d2930814069e0e7d5dfb4b78009c52da0ea75156955656678047a844e6bcef82f88d098783b867441e377e2236c75dd3ba21ad9c6843d0855dab5a4792d633847879a91416284ecb0420404f5a1428dcb95912d221a9af9759acb9272ef5cfc1e4ddf2b7e6cf3f937a623ab2af598747746a3bc5005e31b7bcfd0586b0b6cda6c58b884403ebe620778f0a4e6519aa1e5cd832637a1e5aaaf167f0ed58f95a426c2759732d0a5937ff67df667fb3925d8954f9b64176709c8146c3d62e0050d5a63b1c652861b93750fdcdab7b1bf809b652f5f9d82e5625aedb6ebfad438eb6af6ffb0142953d4e1c951507bde9abcc816ba510d4092c749addb7b9cafa455974f6040706980f36fe6b48d198f16b3303bfe4d3e0705523eb4536ba9ec90ee02a5b09850212d84188b8a58e766c21d40abc069a647537ab10feade929207edd9ce01c8f3d10e507bca726880bee0277c126eb3b59fb86bbeeda3e51633aebbe8df716017c0fb972d7c114a0c15d5ae9e4e69eaabe4f2d1a82d9fc264ccd7db80b36c9d1ff03712e2b74fece1f2b3f5a6f1645e834a5d974223f365668c2dfeb120cf48d169b908fe77b2137b95658e9cb6592e5fcaf40832acdacf955e6ab94c14da4a2e11fe84d3b67afab4eec6b6acea451cadaa1e5943d609c4c7c6801137ab2ca7e31fd32885f357d2ebdff89745eb7b418c2e745274f95d679fc727d88f677f56f3aa4b8162d6c5bcdd9290f98d477078003f3d65e6a134db28f7670e60460a6e6c5668d810a580f78e173ed1c38fb4fc682951ac28dc21029d809614a2bfe0febab47a203d96b7f265774101aa9b38553a41e23631a76f4b31d64d6874d5bf51bd46ddaec07710ad63615a35346e232b980fdf55fce5e6ac204f0e41ce4ac8b776574f7af429d06e5a829d24c3a62ae466a541593c1e46dc733d3b9494710d46f6d5623669f1d42eb43ab1736db88afc3a6d7db6755445a18501b08d0832fc7b63253e99c84dd4b7efa83aef3d35704dedbeec50d5d821dc199d9cbedab19e3e1ff3d49015928b4a051a213f2705234c80177084785ac35a3deeb722bad6995547330325df1cd2a4ff46bc0788528a56a38fe0f435ec560a6341d1b637da9cfbddf4400f2ae9ecde7dd10b92523a64761664447148ad11b454342b72e4ce1556a2d688e7d530664b3efd6866dd5e0583577e9562cb60126ebffdfa14a24784addf8ba609419040e9a0055ab8655cd7e3bd6ec553627eeb34782866b122a9cee655ee4a07f73db9759c2cb58c94e1b695ee1a2084d9c8994b446f4b3ecd078612b754afe0c8c8da05e280fd4f6eae772435cac42a71cf56d875a0fe53fd4d82c2d49eb3603fc686066fb97638b61850fba6bb11bb0e208122a7d74133c23a51eba0ef3a701193c6ddc242f34d64dba4c1e6a47ce25ce6a787f4cd0ef0ff382803d1146c9514e196a2a1493b8b7f989eacee857b04940962db005d1de686ef886bb744d00c2e50c3717f541276f2c02bee6d65fffdc741c2d627fdd51fa7ae31a8fc15fe6ce72f9e50b8e05e152294ed33e23664761f97ebe7975a56856716c52c2eabd88fdfc6673d6672eeb0e0709d17c897f51e314ff5e2894e3de76949eb2893d284f76566c0473d2ddddc9a708dd09f3acf0c34fd2b2714a417d528d35495ab82b0f17bca67481f56e30e087f09e5705da01c28d4c7c5c349d6ade1346cbf7308fdb2b7eaa243c0bd75cc134a2369530e6f6524d9544cba331339e5fa71a926f34f20dbd3b1c914b427c9d4df6e5fff79abcbe5ec1d2945397bca8ec4aa777e93ae8b32d5a9a443ca75a29cc94c1b3d93bf93b19d9e58d6e5a89bdc395bb000a959f1b7ef3b2bf3b0d08435f9364d91c2074bbe32920f2ebf86548d0afe5da6fa31b9591f606ef288145d96c409766f43c38d6e57d979fde86a2373d4a7b9316e7b55c1bcc021bbc87f9ecb373630603e5fc09c36f17bd4fa5e713b3af837895b5b9b543039a28e555504c6faf8e004c6b7765d8dd8715ef95cc6cf68c6cda7877dfecc89cf031309813d23ca7dc0dbd1faf95e705203fc26d78ae2e876e80e44fe5b032bbeca6bdcc177d495483f1c0e4ccc7001e96ff9d87558938b8b55351afd294ddaae504f15740e5518e058189073eec85373e1c6665aa72cbdb2d0c1531ae19a0b0179c46af6deaceaa86bebfc0d6fa1fdeaa302884b9d5a638bee39c5d90f8a7f760b39aced4b761df328c934a7b7399a7f840b597f190d77bbcbe509742c41ad391ae209459776eb97b032f7d2af519dd82ec63c99f022a0ef49dc4ee0d601dabf5eab874ffae4e65cb5f2a41656e7699e4ef6807cb3f1315a5d22608abd12728cf4db88e07dad0a2fc62a277cd7f2d6f0cb2e7571b76d38dc574b2ed730ca137ed97f55d650029af2ceeffc78cd58f9434a300861536645238b4dc4160e00ae292a0c39673e085cd813eafd7349f8c56e9be4a3aeb72ba4b2e6c39451aca46e5de910be2474c23ce97ca537b1d455ef1a7a1ca9bb20936d7a30b51e7adabbb1213eb2b2ccef8d8869d2c3153d7e0e25f6fb0423608f932f20e3dddf6b4391301f9a19d00ad4b8cde8471ac374a06600a8b4ecf364da4b2267c9a3670735e8c1a3057daa59d4ae3d6686ed3c895480fc052a8bfea1844e9ed04be8bf728e2f7d0cad1cb82965d96cbed9bb7c013649be1d9b7b788a5b74917e6c49a663c6e5d2a9e8769e1bdbd71c1783533593d5c33894c54b0abf064f7af1056480e1d412661d3d60defe47b2227fc686183923e899eb2895751f05b028f9037206b6c41c2750c558aad64cb30e1af53af7e197002e637a3e14cafc36716d62c8d75e3210308770607d4359951354eff47a196f4ce0e45949605dbc15d7c5acd959801113ddcbebc4fbdcca31713cb8e44986c75719014d051e3628866d9be053f469513f24f8ccecfbeee5ab0619b8433a48843632cd931a9f2d507c08c578eb5816d5138e576ea41fe0b84439980cd3f604028257d72d3a40eaf7c3e24123df9677ef4c70a8a6ca2baa77336790ff3307efb9b9fef0d8af6895a735db9a00ab667a7bbd05938002ce889cdf244427921180c7f4cfa990a044104fa6d509be01521c2ccb667969d45d1c8d9b3fe20842ab9c1df1c3f7880661f68ecfc0bd07d67c2c9f0fbcea868b8d7b4976ffdd724760b2d2a70e4ca62d74587c35755efcd950ad98f6ec12e7f7c9b82d331b76ceb4883967a09b6ea67ff26cf9bd18573747c9a51f2f043f6f889112913b63440ef42486a45347b178e5056247865dccdca8614104490a1a48bb7e4443107e85d4b704a597f3360dcfda97951e6da55427f0da06c3e4d69dd013dd7b4a25e46b9989f3cd0ad86dceba3103d97ccdb755934ba054614c7593d9def19bafc2c1c766bd327371412fc563a97d8dec5e78ca736f62c760b75ba89c9da0516fa5df984c27bf8edc923bef2d00cdd8fedf16804e03be131405e032f981e8d92360cf116781e58ba83e4d32139abb7679eee82b25bd187e5711b871b21f4913ec7ac12b887695d1f0b5f7867a925a8a6ae95f33c6c7f1227c09b7a694415d777de5e93d367901a401709771beb217042ea2bb45b0a92093efd94c9df9f71c9eb276c5fb95668168d2cfb32c232981ffc117625fb564cfd1b304f381c65d279f18072ecaf07882b9082d1a1639a48407db68e5364c20280964c9cb4aa1e58d1fab4fe010766b6eeff806ffb59b291afdd5460f0130b080c3939cdaf77708ed29c02b9b26c80e1de639f255033f6dae86e219c7e45d9091964029f57d218857a87a9f3659ea3838355b88b015b5c3b8bae992cc1d3d4563b3852d31679abfa7f4fbe0552fdca382e497e3d983b57b4ee04c9926311878537024d97cc86a3ef2a6f90d0811bb2d4597e163369dd8dfa9ffc126c2807ae0a53676644dd4e064f782de7cec88ab0b39331ac2062f92222223009152043140ab3d02e7be6cf695ba36b0d66a72caa7531a30b43ae5b17656e30cd02d0be2e07ad45309afecb82aa02db1359543b061cecdbc464dfb47535d0e298fa499510b6c655caddd1c32490f1e6c54d451a6981f7d32fa119f08be37ecf6631500f4c4133d887c8e5fea4c8f49cd4fc3c994163a476ceeef8796057b4ee864def492a45a8978eb4614344df142a82e4fafb102efbd5ae2bc50265b65e1645fbcfac103ac83df8b73399f20def8df3130934dce3627957ba889dde2d329ec9f490f1564242673c51edfb9f79fa5c0fea7fc4259425aa8bc3eec5f87b722fa086892bb08fd0231c3f04bdd450f16f43a0b2c6e7600c3e0e9b53ece13828e2487137a41f77cff39868d2a7a0b2acb400925024dcaae3a7dbacc7f57baeed0b38214e2bf0935afb515c7b8d2340455efc785806f6c3d717941c26f567fa8558082e46c2c966e60f3eb3eb7092146958a7dc78f992d9079746b1b9684b688c7fd883610c8a3f1bd8de30abd9aa2c9edb55a59f824151490079c0847dce6e443ced5338b700ac09380b13dfd9706d12489407a4c01da90e401251c03d5d0a8610b73a87b5ca094d42accb0c6da18ae4c1cf895f91f42a0ef8346575771f1f45b48a46c8745c7304600c9398615d12cc068746e3d143657fe080a11918d932418670c737e687f3f5eef94d85d901c22efd6df1fb603c067fa3b787a523004b8113c0b827c1401e21fba68150b6a5a9d83be49e27ca18a76208c57cdf1e764c58dc6c49b28ec9ae7462a1fe2777b1fd99cda4578dcff0df15e1ece0e912a71c567c9e8cf0a1c191cbf8161d0424c46e3213d9ff12953e8474036d8afd1d4f7a170bd07db1a6777893cc29eb895a9f4b696fb9a4aacf6d82951619da91536c0689dc91e5e34b863a377d7b693a66f854401d4dcef247ed3bb9569ce705a2f67bc26b8a46ec6b898c66b301d2005c376558c75673b5698247b31a6cc19b8cccace2f3e53e16e7b6d8c52741418ebf84c021893a791a5a548c099115a2b0c1ca2c53227ec38e5555ada36ff34725ae5e9cd4bfb488c5a7c506197ac29195be4ad655b16791f3be1d6cb8134a37a37aeb191b7deea5d81331aa6dccdb6e0a5ad9649824a094f1d262c54c0a58385a887ccd44ebbe1d101f6d6ff7ec1a2f7d8d40276b3ebbc0cf59f0ec3c6154570ce3f15f5661873dbff9e6b28e81adc4e30834a7da0d45065a40d4fd46bfadd6b996a1c47594b90335159f3f23ce6e85643215954a0c2ba50020eea41f2f6dd11a2b3daeb427c5629b40040dd29e3c6d1a707f3da332c88425a8062c601422d688a391483ec640399d54ede8bce6bc2a8e5710f71c0503ef4e0cee2ff1d2d02ef05bf855e966255232de77b659ff78f71284efa35dd046da1e26f977cd07190fca4e1ec1d160d88958af7ea0648113b41241119e1f870597853467d8430e43887082093236bd6bdf4984ff906ab06fcbceb3451a169b4bcacab45651267515cb2a9aef25c64ebae27dfd0a5db6cf2cc36e960400d024d80a6191bdaffd8992ec4ff97f0b0644103ded48c746e3003881b6047a96b6982cb6683918dc40a25a0710158708e9d2f7c015b4b723feff78a88689d38c7dafedbdfada5a7fe882493bb598e5b9a64d1be6e09e9e737c7da5ae976c528f8af8b93d1d8925467d6e3b8cf5a915b1345da87b94b8e9e36f64bcfb6152e005656680c5ded5f3e3c5c2ae63ca59d3cd3e8874be63572a37e389658d8b2764794990833985392730be53ef488fcaa2c0f1b1a3cb9507990c153ce5cdb8e4bb2e677c6be74368c0b8bc5bbbc47ca593318cb7985b5124eb6d47c3fafcab34b884a35e6cfab56fb68a9d966ffe6343e587ac94fd1067ec033b33cdf3d6d8793bcf7e035808c0dbf74c7a67dd271900a037e04007b8b69d343b1156cbf668e5f4951cbb9c58aae48944405441c9497ffdfd42f7b7da1bc79c5838b826a2e9bbe1386c2db4b09917e06637d2eae1b043f97cc38a12cb079a6200c9bdff54313f44663737177d3e812b90dce61c9f93aab81e0c15553e85d238baf5c1d9dbd1983c6e239a036d58fcb169abc6c05268a3bc1eba5b34650345ee1b4e9938f1249f06c8483f8ab6745f8da9d852dc0a78701668a7b644398a9cf783d5cb7827302aad32fb8b225856edb72758768c59c122616767d61b4c01e03f0b2c189beb4e2e72c7f4376f1ede872292bf430e580b692cca4b2a174e63ade787122d3cd6b2c434486b17804bdf7136df54ccff68b1fc90dbaa2651d70c16eff4ca2830014a70cc08bb999d1a9e0e307aaaf662035","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
