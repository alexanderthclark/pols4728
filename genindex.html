<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7d4123a367fdcb43f4977c2baedf5a69d132f21c87b7c227d3257c76b705cbf9b684a8f8a7dc3fa9cb06073d9713ff5173b1ef7517f1448bc14b13f4d0449008f7a1c9dc24dff9167ab0262ae5be8940400d10ad1b789d426dfaf346bdbb206d2bf02d18e2a568bbeb8a4c4cf60b23777b85516e46b43024ad800b04184c575fee62e140abb020d2286d1515b55f58632dfcd2846d6898b0a06a55285b1c7b76247bf4034a014e3c97503fa1e31556850b004ae36d6f958858f65b6be5196a14c66648b417e4e4977e7551c2ef32339861a5204ef9d433f9379ce8ccc3eced13aab4fb750032a1bb2c7d82f49d2386779b879a9b567ba2122448bf154fe4d11dbf8dafb455db401f2c2a816aca694546fbb36799c2cff8e0bdef55595b68897cdf71768221ebb7832c060a785953f31e1ccdeb342778d53d68fd2ea3d434aade28b70c560a3dde7a567912e0d6a1a469c3f711da049782478b38f9ce330ee5bab0274d74544aa750fbb8c0304169dae99f3514d63ce52765bb5f05b492522955a0ce7f295ae51cdf887ad7386db22ef58dcd814442bbe0f77bd93ba750e09c24345cb8e7a434a7e731a27904d264f1f594d743e4063c15099fe861218373543b643536a12aaf075516f520d32eaa5364b6595654508defaf135ef7ea8817ba32326dd2e4208537960aedeb0961a38fc280e4f6d9c6fa95e35b39448b32f20d87af81201544d305bf2b0b75bd1c427331501d39f1742e29bc91d79068793040408a07d911a2f57e8c10e20ca1da94fdceae2d05d2424e0c3e5aa81603226c407a078f12074536953ab5a0d786c4e5ea305af1cfcd13f0fdafb472e3eab7add0fe609d1f611235e0aef4330e8c97182dc1aa7c2afc5b99677ff77bb1365456a3cf6092c7af4f60b47224dd5f04b75f65aa3779587c6d4bf40b7e99104bc99fba166c2f34ba6e3e5e883e51a426689732c39b0c763c9b9fef7e309641ace6e706f216ba07f78c10ecfab2e7fc8981a414edb596223b79338f14fa3d2092eddc09bd13b5305c7bde9cdc06a73180802408445576a131e563bfa05887c0fcc8dc867b044e8d9e0b6700294947c3c96d5e18fe847eaa08332dd00cb5c8da0d08f980ab254a5719032a5672349e415523af57b0bb55cbc63e15c331ab149b04f8073924f85bdf638e820eda30fbb7a4b61d4e8dbc0874a4ec7636fbdfc7b3f2242b1c5b46d749457a16c564b3069fc6d1e2f2559652fe5e4498533b821640464961fa6be5afe1cfecbf9cb143b54a7056d3e4a61f49d123dfb5c0011edadf68fded6bc30c69ab8fffc3e2cc9497020091b0fa47559088463505a57630cbcbde4767da418cd8e77764ae6b1b850c4853bf822cf50afb31ea82816304a464f3b2684350946d99e920b5de0d8902f579143dceae8e5de73b7d75504978240e097367c6a79d5bf7c3b4961189da083cbdd52f1f09581aa7c2767fca13620fd497b0509c64b878e5502e4546b8ade5c4a7c68c3c3a28969da78b0aeb91f125f6f97d893b9f6d495ee21571dd1ed46f74441e001f251f353dad8eac5935a3672d79dd4816ab231d27373caf04f0baa388a3baaa57e86d40fbcf2df039b283673c8a8e062751c5bfc762cc3493e527178476cfa9d585547364e7e37b95351de3037156f3ec10516244ecb46790b4869de6791f117c61dccb0ceb99a3d25355aca5abc5861fddc00d7ce93e099b998c63cd611295775bd76e61c11758d1e1bbe0e0af0e8ad5c9d1852fbd9280385b14a61e7a9f560610cfdf73a645d9f331ffea15d14d8e6558e53111d28cd3a848c3e5d747a05c77c94aa5dcc44f28f6dee3adc5abeb50a7522e75725b97ee75de9a74a249c22058247bfce8307b68f8afff73916c40526244788f1b07ca93a2b418b29ee86db7c2707281328ef3b06b9e83957c5700e08812918667a5769e0b6c5e7a6385e6c7876b8f7a819bab79abcc85f8fd0cb5cb29c4e669b8baf614f5177a41f9b94b6d16d07f4c583346489e0193b045e57afe16d8c1bc867b908f6602d5e79ff2b604438c157c55f875f0a3f92e655254ae72ee44a24f9f6382ddf46c4def63d4ff401353ebedc4fd8df626380c4e5f07a635804f426e0d07636d67a45a9c6434dcf9baef4b66cdd86209bfe6f54db5596affb5979787b3842ea886b814f64453d9921d122d0f8dd28bf2d26918dd0feee626fc00f8ee81bf447261124231818b75f81b28b1b9d5e2133bc1e3386e7792c21eb4756a3af4b5c2c123443fcc1781bc4e3dfd4c0b00f2af2394a087db6dbb7e9ad995353a55ed3c83ae527549d14bf9de7435937d8e1a111d7fd84f98b8784cd7dccfacd39420fdbed100d6889b69e6da004c6d1e1c1726e564273e58e1dadaff88f7d194e66443c3c1ac3783502044304eb1a47778a210f543dc42b4f4221d3e91133815ca9d48f39583f13c31faf9d1bbef1477c9c52bd62eacb2ba68ed0ccc83b95eb834b7797c6a7fc2e4a3a4a6acd6d29c5e3e46ce78692e4a567df83f71982adb25f06146ebbde15c7799dd2c89482761ca7690a4970a8f7e8620cbbb1818c7399fc53caae542c9a3d97e037294f9d9d73734d273bf531861308196c137daf63e5df318bae8e062a58f45bc740cd7f33d169e86b1cf47fb7e2702199ee231b43ee30769ec7eb807224ec5a5f9318e94f4b3ddbc71223e3d403f9a4da9a68fa08ecc76b8c8582a0315d0a1007f0c8c3e226f00b651f4273fd9e2d0dba3f3bcf5390b7d6c60d1a80acff437b5df2a0dfd4bf7e6c1b63fd70ec7144e4f61ecf47c8097d5b0ecbd5cb1439fa89cadcecad72d0fe3cbf8d4e09075b0c70e0db76ca175f6b50072e9ba4cbfb794c9f330e96084e27461a02630ed84064035f1031acfc2f31b6be97faa8fec558b7ae018f4974e9d5c88b8b2916d9b315c0f0ad04374b51f09b187e8c2fbbd1442af865b0762728f8cc5bde0c9221a5c376b9ffb8e4a13c747d6066efe49df7fd0e608c7d1962cfc07f2b0b67497e1a83bbcfe4aacfd758c264b345c2061fd1d4a81b366c142b07d7b5caa36da9d4a120809e033f5ebe2dcb0466801d6f7579fc5184b3ce8ef6470c776ffc6c888536d3eb6245973fd5082a26e302debb98d942124e218f8aeb72b845c8f42b8a0d296392adb56d533f94a3df0ace4022553d571c29754a14abebdde86de8182d288821ef5965145f02549f83594391abed18f9e6f598423242b4ee9bafd3ed13aa2341d875312b689e860e0a6c6c04a9a96125982e7ab9b6e2c09f6c3e23b40faf8225e3d098e26aaaab243dabedaada42889dad80a4c5ec4d0200c294e3a59e6536177b7cf18a94f6e3141216a3d5aa759d6e31c6973a4d18558f4c1c62a6c81a29817e381d4189b6039b7a58ce1f37647297cce56683c9cc2acf9697dcc3bbd8b26cef4cf3676fb13edf77181babf6f8320d047f8e4b65e5f3f79c7d516bb66b77c8929a375aa10e7469bb213fd95167bd370f5d3a98e53fc59db36ff2b92e952e5de933c8d09a46453719349457c336c25ec69138048aa3777224e46cdd7d1357db2b004011bc006362a1277840610c2b311b6b9feb5ddd43600b19b16a56fd38c04e255163ab7ca96d8f89a17c39be6692abed26dacc7f863facee81231705b01df681c9c2f6ba06255bbfb7dcc39a29883a65a016840d5b2914e597353eb1a127db1d37b54be48ab936a18f722ec32cfbdfd7df6473d236e99813db838590672138f49d37fd6a3f0ae64168f0e0639f957e481f605eaa97bd9726249415622c0f535b196c98b4596db52cc759c8f1f01e059b998addc0af540e5b67b57dfc3db989ef810a96a6d39921da704a1500e6867b36d7e17e5e0582c42617be9b736c1f29b69b9fd1cfd2f573f716ede9de03750a36e6599a9668dda017c9760f0629edec74c00b47d23669a5eadead83bfd9bc21c4f9f52f30a7c2befd0c9a3e602ebac98838865a23e1fc87a309a1d84aeb9d3bde03217e5c91340d40e20b5750756d5f972a77e646b29dd82c4e431e4befc07b69c4b7a0192176acc01198efa3965c08abc535bb88e6b4eb9a6df6ff4fe85064c2bb6e74f6055e0c9405f68016ffc41ba8c15f84a198bf062bfeb2f934e24e01304a90c7ae611787047fa11a2f100ddf922e16257914d97650a9aaea4ab1ca9c306939da3577d03b63e0a54d56d6ad5a14867780e5d276e21f9e6453c366ec25eb9c2524aa9ed6c4a9c94e30f138d6934ca6fee21ab62872f41c54dbfbe0a456ad79a283573a641b0baf9c2603dd9463c5d3612f6d640cd71690aa6509c2b231a5e8af590b7541b6c6c50f1c23430114dc4efaff5b31cb6fd3a75341b2c7e102a887778af2dc9740efc75a9383b5d79c0520cfdd76a589cc97a5e26d432caddcc9aa6ca79c64b90e3be5ab8658f878588530b3cd2ae26205908ee9168772fa9eef0f4d83dcf68c8218801eb3ca796fc20035833dfe800ff5f6f1356ba502a1f52d1d2e78158d1f9fc57b363bcb42996a11acf4852375dbeab880c442f258c2c52e96692a5086e08dbbc874985d39a34fbaa4e6a43498bb967201dd5365149c3e9ea946e1bfa572e25991684edc47eb4de2df2c29058ef2aca37bff0aba8103a958fd6a8ff533c3eaf97dc70d8fa415c4623499c1d377b4f8efc4e3cf3675b1d75432321d43eeed7ea9038d2b48003c1659cf2e4d9f17e8f3b44f802e94a1fe205d26305d63de085a95a34e4924a27c98f26f37ddd70eefd20a505e39fe946c856a69aea9028c1f7e54322efeb96a2de905f46a0c2afbb8354ff74c580bfab1b1e982651d4b5a2f2c353f596c40f89de605d3c16f9dc20a7ccbe3d799006087742883d8e6e7678d5e15261aee3044b4ef88126067adc125c3e3587993e14a2231023af3bdebfd4de1bd8b9b1fb3445cce7bde378078a9d9d9b5b2a451d4ff673820b040174a4ee0bfd0a46bb94f4e1fc0b90a5d0c992bb5eb0ff893e2bfa91fff84519edaa2acc89741d8c5aac101bdcc3d224ca9271c49456527d7ad653edf89d33b1291cf191474b37fcf4ca57e147a34f90ee014498f51ef2696c0af9082bc4a950d776a3e8dc55d46763e6922643a84fbc8677a1c4510c36727b801cc2637bc91d77a86c681689d67d442b5bd9317b1cff95e28efc7945bfa2979c7bd4544fd6cb14098e389cf86a442c069bec53c3e07dbf0dc8c051051f1b2fe737f0a77a9cda5dbb13cdc4aa6f4c845d4e38e6b97c300a2915a77c216f0cef3e59c3e2f47c8020efb1c88a39eaacccf418754e7e469ced89ebbe7f5f8e061d88ba9500ee1fbe0f1193ab5431bffd9045498a903ca4ecfb6c2530c384a0e5f063305dd7698c29fa4e30f7aca0d575cdbcf6a9c39417e11edf163560ae42966cca6d1b8d9ce58472cae1fb767c062c239e65c25ae74b9aacdf6c11afed539f3e42efb7514dfc7cddbfbae10dce8133774df6852a339b2f38152ee16291812fd7e89cebcc5a4cc795a44fafe77d6a06f02923b598abe682b07b35e5b4defccf0d1ddec4e55676d3c3e843bd0601d4132c760f4c9c413ca2af656175f4bcde2fba87e652b2afc249167f7a0bf3cebc9c0709966a76fa104d85947b4727a2387981ce5c33a8171edc86f59aaaf008c3a79a785f4f7019a46eeeae1dcaf320d823b86b18cf53e144d61cc8c9db6e8edbc513a2c730dde8fdf91b7197949bc2aab52a90b9c58625113122d67b64c4d7fb07a1bcedf6f7620a6aa9b70fc0667818e4f6f3f0ad08dea50c7d01e477a133ab4a57a91d974afa4a7d4efdd023dcbb7db0c512d4aa588088aa06b0531b6eeaedd03acbfc7140f4a11146dc5d010475ed54bbe1c65f173855c4a68bff422d7d25552319be2dbf1bf8a73bb0402170543128e29a4d1da0e5aee58ec2a556b17a11267907196044fcbcbc8d0c7ea6aa2d272bc5473d297908121ff5669597ba396a1c4de9bcea5178a453a43a6c17866232f99dc023745bdb7e0f399cc055a93967c2a6d05257ee5e11744fa57db1910788b5fcabe1712196fb1a9fa0e2a1ded004dff377e831611e71de6247717f144a59a222861d49f0facda98962d0264ef8044d55e17fe30719745397371d852f7b7d7fc6509d73da227af85cc57e734de4b1dbf2c380208ffebc1f91e9ae902c028f4a5d6733e5ae468c95126967dd644d1ab423130d8a4caa62b1872333fbfea705893c6d89a7954a7e903518b46595cf81877bd1e50d68edf9a5b72ec62ba297a129efa286382ca9c277f400a96e2fe8ad12374703c30825416c27a656a7d7a49d2c78119f1e70c3326222262cbe2a3881b102d425bedd48ac142d633322d137b855c6e0e82b520318c4e77f3bd96677430f204c4f22dd1fbe1e6f70859a814588e1218e75051cb7ffaa05d55a8a9e30f8da260c2e506e6dff99e480f1f5c3b379bc50ffc1f434f371ac2c7825afe8de382eb9fec6e966bc283929847331c96ef12de102d8b69d12c41bb0c1f9986348cc16ea244f5ee868d285afa1a9ec187c71ed48acf6d27a7e5ef636f3c28958d3c486ea3de5d6b5eed45c473f2445c1aa8ebe0ef752aa4e9ce7fdabd90fad59b9fba564d47321868b93c3892bd8823d8d851a7a64e37f91b832a6c60dbc74b4853022f08cb4c6417d1a381dc09b6a593aff719966cde2a6050579d896340514fa7d08d4c07b7c827a247ce346a4b77325cff9cf82927504298b777ad69dd2342a445da91a2f03c6828413ef9ef404fe604ff06707f2455f8d086320a2e11ebbf432c256a6f4a45cdb940a1cf274b959fb3c358c86871586f18e0996d530cdaf8291f99f1427af8c6502f78f2d067f6ca898b2e20a70da76e6abb5b683a3af957e0c49f6f899444c1da24b4379b9fe01358b92b65f491474c9081ac52c2de1b92ea0dcbc00befdaf8af3d9fb82b13e905e644b6fad45d86b6eb36e0008ea224cd1c6b3cec60048cf561fe731564f2daa18380002914c5d0858e7847852b603d5f9b25e1f360dd3d0b79bd3505677416580fe1fa2891654eb3fd0a794443abcd02989f4f5174c228bfcb446bf06b8d50350a36b31663e4d614b3c535558ddccf2fb9ff4c1e77b01ec8b0e0cc338d4e5a52c17acdef90257488388c72a0614a07cec4c396e833b754b019538c8f666b04e31a47860b3f75e04c62e45e64541d219be0ff60cb9f44ac07f675cff3b6239f44863fcfc2eea298bfd450c94df2942f1c74ab48cfa9dc857f585e1292b3c702400111aeb3cedb181765b8808b9893c1aab5c6eeeaea4a9d8cfb9a507976692a51c1f96da35489dfb24c7f0f198605297757056cae47538029b1714dbe3872023cdecba19cf5026cb1f587193313eab1033da5dcdf6e5783310600e95ffa62c8ef4c694b27854a8a0932a6f578c15a41982601fd1bf7c02d3e7d5df2c49f7383450617df0993bfe109d87390c732928338cc32a2bb01c811e689e6aa8af6ef8fe7ca6fcf7645fc1994cc65559f1e21faaf78cdc70c8896678ecee8408bada1a35f8c9d6249a2504898830e76a6da78a1d8b61b78688e58fe3cda6d359254ba9124b4e09193316f0dea2a2857e8f98dd6cc1e9cae0630f4494eb55fe19058e89f9e543b9bfe94533172932e9cf881b64ae3de67a862be517f4738f12fe799f8be9462c5903fb8fc17834c11dbdfdc7171071c7366e4241b9e8a7234580128e36a25c421ffd844ec0ac87ba5526da67cab2c3d02d4eda0e0134dfa3778facf3e64699696ab39033f52f5c240ea146ff74b4e5747c5637602c838414f3593f64d2374faeadc4892b8037ae471d05b101bc93dc87ac41da259ca79f6e5259cd035075f6dc94cfa5e76f64e5c3aa7d231a3c483aca1f035ba92a3427aa86e439ca5f341874efc1fda2a94556df9a89ac974c7bb0903beffe8dbafa246ffda27bac94443e75b7e28866361004713cbb0b6687784fd1fc5a36b7c11a09a5ca1318d453af621d76915d9963cde95e2048d8b94aa728a145b5732e6e9f1d5caf6be641439caa99fa4a161dd54d56ccf1b34b8c3764503265e41acdc0b15ab5e9fbde7473164cd14e2c54dd652c428496423a2405695a5952a763dae5e2b4ccfbc5443b895ed4a21b9dccc94753c0e4466edd2daeb43632c6b38aee1968dbb7cb53979baccbb7c9a7d884c8f4a0a36c88993211324cd9b549d874a105922c23f8d0b44f9d86ebacb441bd0cca34c5fb3593f49a0c22fbb07b47928a30cc9a2fa4b40b82e2227efb2bd120d1c43f97ac403d0cd51f3a6a83f9877901d1baf9167fc82621eae839f7131376e57c1099969f4f06f969a79a0b3fd9556016233ee044dcc0564d1c13bde925020c290623f31d8364805b0b12fd98cdcd25ecead6aa906c229f8f492b1eae18276e9982490a3a7ea0b602dbeda736879a00627172cd56f43f19e7da5ee8b9ef129689388ab1eecc7f4d7bea4952c95afc09cf54a5f1a2b2b3f1072e9308398cc24886f421063b88e840a3bae005b6a7c86302a08fd69546e7b249a5498f992eb13e5c5296b102ee98160348df38f8e7c8db82c230d4d85a9bf95ac8fc46cae721fd9d26ca0e52637bccef10bcfaee60442e758710f7a6e9128c0269de8106768b9466ea1fe99c20f8d11064741bfb4eff2ee20053f2a324bf0730852f6cf1b56e214d6db4f9077bdf3db57eb2bcdd3cd0a428c697032ac6ad037a31836ff2af07c3001f1e4385c0030dc6333781d7d50870c2a368782415ddc76764d070e4d5a3e14d1c05814df14dfb41f0b187392378c0d4e5b5042ef4c1733ebd7f2c405ef3b680dc721f8d75ad4b8cc85e10fcd12c7e475c007e88622415d9b3d22e47b4b4d74b6b8bbf1dea0d9fe9c30fb7ca28d3109dff4f3bcd88fd04d9411c5e8e8b7cbb5b34761c8002c8566b36eba3035bfdc6a790aa30996f33b6b37db74cf3e52ec39a45eaa7d459c31adcba44007b4b222c46859a99ea299b680c6be8252ed7aeacd6453f4f230861d480e7c08eea356686b3065de021bf118ae3b5217304155f04c6230d2142e8826bc317ef8d1ef9f0031f50a76b2daa33a9cd37abf69b64cbbb2d02b12702182b71d6b9cf45607151f592b29d049cb4f987d24188fa39708c5ae1458725b8c6ef03497cc9cbe96f83f41dfd3f2829d20908e877faa9fff6d2ac950a5202dd33651713b91f8a7b95e28801df5a9c732ae654fe3c6db895e25dbd5ab3220b4ad7db8d1046dbb84fe6a67574534e413f0d49ab939872c4ee1c8cee8ed6fe91550ceab1a3cdd25c0450151ed230f20b0bee604b2c9cb019e71787bc22a9a7559401a7c238d87713dd8abd38e32e2ff6f6bcd89afceda3181f184e779198065e0b2a34673b0b0911d672c47ab93fb1d21d485022c22acf2a9357ac66fed990a37a2f9e773c69c7cb1746f880a7328706d31b234b397979cafb8a62f193aacf3e17a43923d4af2b68e974d90fd8c443050d0e54288864c5702c0356b7a2fc46f09731b44364c15d48ee07ce382d89a3ec7ab2abfe90631f24c450a35daa5291f80bb0b9b266dac2ede889a52aa9cf476fac9137a0767cf28878cdea7d97c12644de08fb546ff96e141e15491445502b5c416334cb2391ddaadd91f1709351acf6b0ae94c59b6226510e6258b5653e0478a102bd1c6aac9f337ae4c14bf17bb2e1086adc818ef4d05e2a1235d2e2d8473763cac622758ef225339881f8e289e9fdad58014830f40925236fc268168822f32ccbcf4037c5fe2132f0a3daec70aa0f4854ad2fc17bcfb89b2c11f45c744eeb4f0d9f7496365e6ea97162e46560a6330d75a6cccc0e1389d4f2afe38b46acda8c9bfe5d2deb3dbdde5f4038284dfb478b66bc1e64a1f5211f8596dbd781c09e0ef0dd8e42c71911fd985bff6d6cfd22289b03ffe1dd2994b279f79429c5c10f39b4dfad2c6e1ecd70abf1c787fd8cd5c0baa0c92630e81128b955345320cdf619d20434823552826fb9794187f9074a2e4aa4a38b4618a0cf8b872ae721eacff92301c3c0190c9fd600a26f6884f66e8f548c1e1c0a8656844fad24df220648cad1012b29599671afb6cb2fac9a1a7d4cf1bc7fa4cd0ddd8f9a220b3b3a4e283088941008a647ffea4a974fcf70905d1de2b5ebd8a26ddc2647a038ebd84aa51106ee8c123444134e348c1e4604d730583d855551c35455563d087167d6ad9cf84572e57934c78e06286227a3ead2c58bbb50c18a5ad9b2a36bb259295acd46a51aa556d3231aa1c953e1c57928fbaf2e679aa9b7736751af75ecc80879ae45dbde7339cb2159799ca1abac95e298c10eb7836be8f79df9b89f41f862d016ccbe6b8b779ad02c4f0f3a7a312c3766d8bef150681a1e19bad02d440a096940256c58f386a6d85a7c73128d92d1b2057752c706a6e31c019f811302d23c28b5b25e1ec7d098cf93d2ba507f92291fd028e5d95958dd1249e573e67fb69d76aee3e9b2ef2b010fe243da5b6fe0651b9f49cabc561f130b5990cdeeea2a0b37256d611f47bed468df7cc57530a735104422b24034cb9033327af0a92465dc2fde1915a377549a26fb8726577c3a743d523aab9443452a7360e645af281edd242f77b0200f98c308271eb08d53e63217377db268a721084a2b1b7d3febfe771e18f71e0246137d2036560b61ef6328dafd726c8043854f670371a8c47fb502dbd7f65d798d52b1b93b63dfabd5c48c7566126cf8f2562097bd2f01f3c0c823bf4794b7664b273843024d55d3114543527b10a4f8b9f59b1f89dc11ab75c203929845ce1eea1e36c99a42f7ba919195a1f31de0dcac094ec442a2f55d0d024bc5a3da8df1f18e8f5c353ddf68e6e47d4b7cbc639933679a4e3920fdf46191d8e96863ec2067a854d84094e85e3204e2649bf539e4adb0c407bd7187f1249c26d1937abe9cf9792904833bad262356b4129b9f50764d950860aa0b534b0d047704c8d977e1968cc51e611dd17b1ff7092b3b67ffa86d731886ab55761891d2138579904dbac67aab266ef0a8f984f1a1deb6a07ee03a0ace06c0a6ff2368d3753e5952ca196d28a57e2c527d80f545213ee98af934411f216cd5efc454d83b1a96032af5304b7e21679bcaf37405be4f4eafc65ca97964b0edf835acf610332829f857f47fe3a099597ad1e0bc9fc49c83c326d7db0249b4ae2095f24456e41d856e51dc648a9ba588a4a91a6c2903f686e36ab981fe171085c2506c0827412c6d8fbdd55e76ad00d2b1c986a21eb0e9c7577d50fdebd975c5391774b9fb068953f60ab9290fdce4348184d958495621d593a86a2db1061fbb2eb610f514b7ea43131203602c3b59ee9343486560556a6168437c7670f8e7272cb2c38c29b21cafc85b7a489c38e378a18569c7800dfc3b36505c2f6684bcb975b2a64148253a83e3a64e2ac2f758d4991ce439a0b6d2420f72d4d8e2c645a492632f0ffcfed2581f60d71bef3c284f04511a5d749a85b71785b195193f994c5fee7e2022f28ab04cd76907927fdb1098050f43a2bc6f1a07842e42824ec89605ad2c6c94da6b6fd8c1415cec4cc795418e39145a395164601d24aec8aa23ea31cdfda08645ee99ab51fecc44e0ef05765d5807b66acd6a39a4ecf7cd2bc9da085ed5bd4af0c69413e7860368919d898b33b3c2917ff7a5ec4324e2df416a8edb082356769920cbb128ae456449c7c5216d7510c286e348fd00acf609874e9988eceb77028efe0960c8b1ef5d95069b7cf0f993f2b3f25be82a0aed2b03e42f9f2fb485434a4f72e2d1ce85ae9870b38244cdc35e79e6be5e8d2118245aea0d794fc5efd2fd7b808db447959a0ec51b4f4b56860e00c7588917adf462992ed92388179b72df8e0d04bdf4b082de339fe315d6afa5fa5dcabb07e13e954cdf87dd854c2e1786c0dc8002af36f95199f1fa2dea3995dff4636f01faa6c41cc395d9547e8dc57cc3f2692d63c960af8a1f3120417926cd9d5c945115c23f998b9c6930d59899f53cdd046962f001ed373192309d017c36781ce5d12122f49d5dd60c0f21d85b3627ee58d647a44275d809c0bad32298081bace40eac51bc2ca0054ceeb53f3baad07dd6ff605eedfcfa8b66c4c7ac42b62fc522478a25193e2943604b48edbbb06c3d548058d205ab4ea4cd59edb0cf07a63f8b7c81ddefdab6a9603fe13a6ea5ea094a053d09f7be509edce5606364a5936a4377f7d80d3fec7d98f95b8ed3402cf7fc3b3354a3cd5fbfa152afe402c6bab37a8ae320ecf705e8778e028c3cb74644b96687873f8066824b8581ec794025c0a555b3734b14ac039203eda8b9ead4eea275d9c5501635717bbaaf1cf2be6a498ddabfc9cd73c28946f96de1be2563812cf5a01bf1b290993f80e5e32b67578a51ca2836c30c43f243cab84d1beb7db6c7036007868daff1375346b2c847462b17e35220d8377f00e6b138b29f3f6ba682181faf1aca800bcfecd700c712346564d0bcf5e583845e71736873d0fc4129853e75e6a61cde7db3433b53f88e8207436e7f8ffa5290cb2ff0dead8dfea4e30f0ea0c0339fa45af5f0ee323415feadb325af3c6e3c1041d010f7a64d0c860b22223bd465fa5959368a95e41ee23309eefa407ecafd43c4458a2c135081c4e4ed3afc9738de9e8cef34d8a7660765cf7667218985fb5684476e5748b9ef97249fe35a5c1e9d479649b019ce01fe7016f3f48aaf0d4a763b2014ccfea993e9a30bdb1fad9b79bd91c4010a1909cf29cd976f91f9f130b5af29ec2ddfbd460bdb653a8e618f5116b42fb0ec5b6908393c8a0e961a3aa971b8a0a88760a3be670ca273398bdd9d7f70f7758d39c6576d0635385336a125b6bf0c7297e42babd56cf373799997c00cb560bf97d3d7475898a327431057174a1c65cc76124ef11af4d4f1bf5431c622081dcf184ec8f5546f9e822071d9a9e9eed8f0d61bb704f4536b37a46060c1209ae6f8295697baa3c3803c1acbeda217fdf96631896cc8e957b174ea073d27bec59b0cd1eadeaebc528a7c8269f5458751d77c8626e2abb40c15f54d4c7071fcc42837ebbea764c705ce64b8d6816b4a84618650a1f5601ff6dbf95e4d00bd109c2358ef1611a408b0b2cdc6bf59a6596263d491c15bdd38063cf6ceb0a05f77e3b38d4e380ad48b2e8543a7729cc033a67e635febc90025cc4cb4ac851a8cec66097a8a158f77865233b5c1b399c1decc9007b8318d8c7db4a0cd9971cad3c73ad0ed608cb3c19f1c155889501739f735e49d9dd888b28ee3e0acdcf989fa9c2a14a7b404d08966c7d0c43b19abf3d6b9fc0faadd1b948f64dfaabdaad0e4a287af3384bc5f38f85e02004051342d0854ebbb39ff7a6ecea772182d8159f341de876c0500bf14fe554500cd093fef2654aec0b62e00106a1186d3fd9778def57288fe86040eb80e2671a956d138bda2b2d81996a5b58b51bd66303cc5cc4f3756ce6a5fe2168a7586c9d80c89592297baf4a8c62facb110220114d6eace8b73594777fb169482c4cdf438e8326b0f8d749022aac40bce918cd1a3bc4b820189570e7b14c99cae3060c37e3a4ac4ca84311e2dcbedd0ee4a85119f69c89b05c8638aee711388511552e15027739fa4d32fb4ba2fe19356c561d869354303381ce1f2d7d0941d1ff2fe3f219824f2dfb9d837974edf8e948f8bb2fa05f551267c8c1ac6640d8f54d3178589d5ca24b8413918f6b0639ecfcf8b7ded5dfa151067c710e60d5cae11c753c33476d45fbc5e00baedb3a94b6fa657ae4077480ce41a91913dd8a874e99c5f21882f3aa852ac4e9bdf78b5492265edcd21788cadf243ab193cf7e298f732dcab0f0aca083c3606f886198172608de4eb8ceaa43c9b1a92dba9be73168efe1d37ec78515f95def19869b0b1980c3390c2f24747cb5685092fc6e068494cfb02448db0c026c58167213b80372c5c32bdd9f0c89528f81414e36bdf0a8d96bac6d7a7ac5c2091693cfde2ed3a1f827bb47e2a930e2b3a23627398d502e62b9fa7099ade8d115bff0cf2dcdc6137dd4d6d4c7adb03873613f8ee07cc9c0a169a137206b2d387e9028f03d52916c25799dfb695be56227507ef6abe517cac135b36897124a1af32424fc55d263fd4bdd05973a26fe9d527dfe51f86f062f7cf37c043b234ade0f5c749d34a9f4a17d5e7f5367eace3d1e721336d59d30983a1d83910e08de61339a806bb422a987bfd9c542bffcedc78f0c2c71b740af44424f709cc999ae807f0ef523a6ffba9aabf7aca92528681dda1a43341acf8105e547b587b984b787b55793397cfe2089a643107473d8ae368d881ddfac0c4493cc84dfd60864d2e8c4e74a164fae2c1bf16375499aa5a195339dd965b4a3c340254c664ce8dc3b1195d75481b0dcb0ca8c4f5a58d0f4682cb4ba8eb6cd49f88c1586312fac9cff4d09ea738ae437a218646d96085e0d582e6c59827109ba1e5bf56ab551531f1e5cd7da42acc12f5333b0562cd870dae2eb423657b5c212d4602d8e71fed71907bbb9592465eadcd290135cb30006afd6a945f480803241264560d54582185902eb4be621c1d805454231421c67234fa8ceef36decae29d993415f31f61b6dce2ca9c1160b21a426b9c06adc6cda3b2bb855a27379f481c0382d5ad2c5da61cb676dc54ab5daae23eca28269bcc942404dc4e3fd17d207fa1d3e2f87431cfecc5e2dffd1a32cc60d4d6a16c4d2ab8f076c540f8280b45502e689666670185cf960eb13e5fbd2171216f21f17426a4e412e516b2023b2cc00dc44313539dfe5073379e35e501207ea79b006100fb536864f734bc9a2b4766cbe672d4a887e850d89c6b8a5af6ba1873eb2d6a4684b219fe89e6743d169a1377dd27dfd059f831e6ef19bf0ca52756630d3347586f11e9021ab6df3b65ae4a8798806cc084ad5f477809bcf1cb31fccfd0dfc732dd992e81d151c0dd851dbf9c7a673a228024e6fa8f57879abedff526dd918e77e70b0ca6a4e23d498ee7bc27e8043a5849cb433036ea410196006fdf10db9abba250c7b2381b37ea70555d94443c01ef78e777b7dfb589aa9acf65751c01fae788b64c4ec18bd1a13ce417cf15dbdc6c5e2b5087f595c9f93e5ed19045caf2839a64403421867a32e096f5b543f71c7df5b75317300f58bfa5ba4b5c83c8798eba4802576289fd6849fb20d50bcac485fcf977b1fd1feaaad7a9e8fd3ae3bb1887b6284aefa51f0edcea6246b84cc41eb4f2a4f30ceb9e33fce8ec142706037e240e1cfe309adfbf95b9a3a94adb07e517898640eb60d7def39042d4f71b7837d6b8b3d5d84c535c029ce1ddd5225824ee7f586d46df5b83b1fbc95e78f4007654371f1a4498f040701c9c7b8c86b9762dd0d74e302fd9a161c757e29a4479c5adf821152b929158cfcb9abd87bfe1ab6b15950bb999ecab4dfd80c4f663292341a8f51f4620b610f2a926212949f9d6188cdeb31a16f653f1ff9340bae788434186f5dcc60daac30272470c3ed2e4339b03e036c62fcdfef59496246e94592199cae3bc6f859ec06ea259c7ae0803cbe41d7b48589d4878f910e0fc856ee9de8e8bda8966b44f87e618d4c6fd1fd80085a69a05b184b4ea97b62af48aa40ce6c37a28e9f458bf3c4e1f0d01fa2fca4d259440db45e1e134c37fbcdfa69467022283c53c01f0673828a10c36dd2875c622363d21d0528ddc6c0a4b16049cf10e5b4b2881e1d070b2905beb7ee3b7832e4feab1939d09f82f36135e5b4eaeebf7cd90c5eacc13edc6f4bb578a9bf226708d17659a267168dfb39dfdca1fd78b3bb45a6b0878890fd15c91359e322923adde74e4e46b29c83910503cae7c56777ae73e394778c5aca619e9d3e6d19f1f5f898c6a7e210608e058c226833a06d417d156c27f6bbb1521f6cf19d5d5ad23e47f2b16a5832cf7980f354c8204be8afd8bb873a36678b8e1e8af5d5692ee3597248c14501acdf4a82be407ae1411f3ed455f5a58884df429d2150ab29eb8f6ead93cc37917f122e7c80b1b313ccb69301b22c9285b9225ed2cbab382b19b49186445458873203b419649aa7e42adabeb5c01a6718180eb8e3ab16340f18329e81faa3c4c180c2ec1d61a53751c3d110ad797bbc3ef326c2ac92296e627ee11381bf31d8793ee199bbda87236341225aba84f0183bca1efa00f6adbcac22e4a545e35d174ffba1176fb53303c3045ab9d6ed935ff1ff2fe9789729d2dc905727ed37b13a6d81a1d3a94319471a48f6b216f3ca382afd8c42efc3e3600d805f501ee71e86a73d9c19a96139ca0b3d9cc8719c9e89d8c5ce9ae575284516ce584a8e366b605169c368449c2fd2d0b70cd9cbf8f9dc49ce8c504bc726245f1a641267b65fe3c0d9f6633f85a4c3fe71c3c0ba616086e79d7be2186e465c07a33cb9589e78384666acd8d3e5947780d36a3cd54d9bb42bf6e80f299ae665c1782748f5f866d1ba43bb6ad8f1467acedfd83fdd7dacdfde58af321b48c939b4b859c211d73320efa63981ac1350aa426a98bcf2cec3976db60d3320c707230a4cff6421647cd464eddbe7b42cd7a4b8559392eb023df701573b9c1084af5dbc1dd3b5b3dea9180a9a7eab5f9405e3ea003175c5f0b5715c86ebaad405df80286808f36681c51bfe4f1157a46796f70b33fc8e76e1c91bb84b25965bb22ad86111740c81dba8c5899b2bd0d09bc3a186d04bff7bfb7c67c54dc79267ec0d74abb697c5c19e6c03bcc7cbe1fb7c7a237c49cb7d6bad480961a84b2ac05e8b558f97d840b3e0c31e531f339f6a4eaaac2160ca379b22c4645b5f465e636c6ce7287b9861963e38c09a2c52f6a2ccbde46d322f707e00028d3a70d0083f3274097337f8bc2b31603a2766accdec36e6eea4c9b99618baa0a161ef611e910940f980428c4b69e11596ac76560ec6303a7b3dcbd2225277bfb214b22e345a9549a4701b6d13f5a8cf651adf36a0f70f179a81be2ce7fe63c59436c60fa1bd489156c4371d47eae14a9cd5f927372c9f792d9e9e7094be1c45ad5f47fcf769868f56bfbbed56eb12576be480db98c9a6383f2a3f80473852405b09b37b06144d9ae2ba79903b18ebce0ea0d295410f13585b0d6623a82461b15180b468c17b375c8f7875c59a5f1ad222b7e35e6a1950fd7f8449bbdf8cf6cae55ae975472b08b46eaadc9724be7b2707d7e4eac6f4f44595128a4eedd952ff53dc2c302e586eb61a48419a3a80d1eec9642fe543d61c39cb71dae625c46b304dc2e58eb43a1ef2b0c340a9fc6d29103da6cb8a6d5d0d78bc80136a588b5672143de20402709a3e57dc605a2767dc691247b93051d8ae53e3ac6d194f3f25caf39e7eaf6c25d2e725546ca4118f9aa154bfed427b6601d29855a6b9a283cf7b6d77e13a51f614cd1fb12f5d5d22ecd4c977cb6764f0731c8205c80a5b930ee5396037f1f742b0cf578c4a5c343af8c21fa104bca207a94919b9b86e56e487c4190d96210433ba2888ddc4471624e3a81de572460ab2b7a5d587136c219b07e750c794d784a1e8f527f823b85068f6dad0fe4e18b63ff9e8bf9a466175a9a9d229f6b924af8d054c2e8c8dfc6070214781b4c6261725a5c149fdd45e9d96b7ebed3219750ecd163f4653f0f3391b62fc55ce031e520674ffdbe283325ac6c2c411bf91a640459859d93096852997426cb888c5fac3ab1041c872d8e8200dbadd05e6d6106e0a0ad6110b116670c57aee29f6d6e2129147f1e35f37e3ba9d1fca08d3a23469f8270fb69ce7f1744dcd730b15eef82fdc2d7c78d39bd68c69b2308c7b22c9e841dcf26011fa67cc1ba17891924c5c87ca8631b6f4bc01a68c578dcb9ad89770ffcfba781e3c05885a3a45cdcc130ce219559b9654f1b9c225c9a4a27e30461e529a4afefce229e3586e042c68b9f10f05283c3de85f6cc395eb3ad693d54f70b775c13a2ce78cf57f74b630cdf3117bcc85953cdea9c2b7089fb3ed9c020095994e8d32519690fffe983b030cd4fa76cdc0aa3655d270d58ac4bd8eda7f5935cbf4e1ba71747a5a12045acea16881a11b27feafb56544d5b52ee42dfc070d137897b688be595469f5bcc33b8c95dfdfe8d099e4cd772c873848c0f421b853175cf63e589e7ee7f51f658fbf9b6a7c028a601d7684fca503d85462c0f661d2140425d77e6dcc12e9b8df862e29adc1ad8a136e6ba8b76433bee1d6d584d0948f62f1b24110a3d656b0b4d19e5a3cad6995420ea0719a3ba7b9bb03bd94ecc99a2a93746e8262b0d3e4dd45a3c091e1cbdd72b37dfbe487d403e0da11cfcc11630037d5635a074d73a4bb9c76af9b1bbee5705f6f9a8699fd5deb13f7c31e3b02ae42739146c03cba5c956ee9933bf096c82683e34ac2f9f10a692958a536f59a2180b1b41f1f95965f571b101dcfe5a10673287841a9597b88acc6e2825d375d19fbd703030f3fe42602ac70ecd8c90db172a56c5cafcc9a067ae1953ab91240e682077eac19bd1a9c41859381bc521498842f96a35b1b90309d5a4e9b24bd4e55bfcadb8d5301fbf7a4efe4b33c29721cef8f023a9e4d0d425d334bce4fcb8266a8999bb1136552cd8e92a35aff0e54c69ab2e0ce85f4db156440a1dfb006e370ac3915d43c94dd3ebef7d4147c596beaf108139ea3af52e165eae255b193a6d200f3b23ddbc808a71a08697234ba4bf92d9062a7e4bc0ab430c43cef768d963de4abdb669f17490b8f2c81de2134f2b7a3143bbd8c8d0ff5c303e4a45fe21775c18dbc29a9fd29a887f772f984ab3119e8b924d93c62ed50b52c281ff4ab3ffe086b2c7bd9620490e793906666fb3d3e1c0440d114b1a420da9377fde98e1326eaa363ed4721220267f61c295c584c6b9373aeb85f4e622bf56d26632a04ac2406f3b781a154530c14dd79768e8f3a2ce3abb7ecbd11038e2f5d0dff9da4d13903099098d4bc33f566623d331407447e5f056038616e5a437b34c6213132254ba2914971033e2f5656596b6c54e4220e571f9cfd93cf005836a1f1b48bdb9774928e84f4b7ee5b22530ed4093778673fa6da6ee9f69179fa2ea8aa6a7b00795905fb6be06c8bdf8952bf21ff41b0bd67ed1efc47a27adaec4fcebca8c7472b95e1d068dcd1d118c5251535017f5d4ecc204482145916269bf667e20845a1a3fb55b1e8708d42638cfdc64d3025a9606d7c0c2d7b12890d95b454485a6480d75fbb37c70dc31fa85d78dfda44da03d9c6ece349e2b041a0170891b32d4f5251aee5aa50ae33eda74fc35c664664890fc31736547516592206a96434f8d5169efd42a556c95d39ac7ff28606b335d600d0d21a55b87935672b8fbca8ba16fe220d9900eaf0df34b7eb174556c46297b391b48d0ff3ba734e261a4913dd776f04bdef5be99c9c52131cf95063d6ccc0bcdf20101906967f7948018b74025c0f020b3037398e74a9f273a279d91cc4d9ea72c62d464fddc7abf769b6ea9128ab89d855c61c9939ca0c63f8aad4a6729b6bc26ff52d7e59bf87cc933a06c4fd5eb24219ba7d1f28af1227b823a6fefbf072334c248fffd0b2d91396ae4fe4dc6db85d2ccc87b03993897aafaf5315c2cbcd63bbc38b120485caab5fedf3dbe4b28877b0ee7ca9338b0c9878c3ecc1725eaf35625e5b4a27ede830ce3b9639793259c7d6866fd696533d09f203032849cdbbbbeebd21bbde1b91fa2254945ae0147b9b3e20f94543fff3f2b71d5e1dbaaa","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
