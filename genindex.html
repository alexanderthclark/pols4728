<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"2fd893cfb741f9a65ceb04125a5e4afdf107c14a66937cd85f24aabde242bc20c11d431dd2ca51426ae15a1a25ba2539db7b8da8b0c04d9fd45ac2aef3426a218d5b013c5ced194a74eba9cfc03cf7bd8db4ca5caa8614d2af2e1e108291b866b89e1dddd04a1e584c8a0db43b42829088bdfc99d5e603e8242cc2470e30cd23d41cbbdd3a06daa9dc87863131b717911fd8802380e59d53181e8f4fd644991cc250c1c6070eef658394b5f47793ddce097ca8474909173f8a09371b25f8ba9c11f3c4e2bc8fadaa3ceca8723b732c8c9515c436f80714e44e4284fa2f26bae1daa00016630ca0934bd5971236401d7c2b1565990ae3a6a6c1a9223f8c7d24c623471887135eb7774c88ebb2f198656856a2448bfd69445d5378dca7e6a1bf933258f50d2a2fcd1435c9e96af73bbc8e1b976ba3dfd75f49501449d38c62ac2be9edcfa783524345d878d43e81fe0b07c3c6bd29e1a6ae5f28cf0e998c680796104e5d2bb16ceee68bebaaec789e23900024d5b45599f4a7469d1c144773f2122094bcbd4bf691730cc31ca9915e2dada720c51133af53010ed28c8d1b5637353b47d2cdef65e8fc28653d9ea07db9ca232ab4a69068a0c1833933ee470334d547aeeae7dd896ed4d46828675d32ed12f918493968e5710031f1f12ca5dcc36475ad3d987235b4fb42e10d3d45608c0aaf312c02ee4da2b57e081de4c322e871296cedfaacba2cbae0b17c581cbfaaef8e351fcb740b709841a14235c2f52f814c6423b56a717a27ff37e844b6585e633812c66b254b493eb205c4b367fb94d78a040715f95abbd9e803191bfe50a14041dd75dcde906157ec01e4dab9990074b1af36905e957d69364caed54d77ec7407966777c75839acacc69a7f89bfc8cb3474ea5e19d26b97b1b9845df734e4f6d08176b11458db560291ad5315bd4c61af1e4779118a7ce66be3259c00d7d367fdf79b08f512de7aad0dc5225b000323570c12f8bde5fe41fa1c91adb34aca20c1239035d222ecf0361222832b9d24b45e80c22e179b251f0ad01566fcfc421f5088a2376ede3dbf505ad2b759946369f516c48b2d06452075ca0a44033ec00d9633659b16e9a721c34f3a7270460f9c1d19151f003d8354bcf5d7e37376e83dc5aefb47abab0f89d46dfe564ab03d417e888629951aa97e641f38d2e1e21aede614ed5dccc27ec29931a24c201cbb10b44a5bb3c2975ac84009450135208b2088e816f59df3bb7d69903951436532dbc3e37c3c8b1118875a4663248078aff4f8cd3faee2fcd02d9cdc614adb32300c0accd8565021b11ba9ac550c675cc35983cbc3cde8f9b8f2e186a5f77add2b8b8d9a50ec7212e13251d3ca6b3d73ad5a6fb156762eabdecaf200d92ada2e001ec0ac30878a02199f83479c7e6fcf414163f087aa6b99294084d4be41fa2f1cd25b667650a5184cb0c287dae3f8a03475a70ee13dcd1c6a0c8e6f7cfe9e292780418d093135051041d00ec15c6d2068f5134bc9c603fc54a61c2db175147d43e55ec22eb84621ae59dee8522f06a5a26ff8e3a15b768c0fbdda6feb275f1d7b3dd31536dd3f200ef9ca13485d164838a3b9f99b33006d3624e5f9196c38a8f1e932506a30f8f34fdebb822505bd15222cb06481310e7a370ec85dde466115fc5da3e9d62059cd0d30daa4fee976e2cab446b1a9ac6c60a73e40d0cb1cf852ef89aa06e7336844b1552828d2d7018bfd04924b20b9b226fb8c75a5269fcc13078c34c8da049c96ed528d597506564abef440e96b0a790704c0ca65860e204c352bcc8ee4a40483cba56365b0bee889dbb9f18c624c08b305f46ab7a2c0265f6e8e1f89fa0510d3c53c40226917501c5446067bf2bad9982f20860d55b077ab49f9c7d88d85a2d3bfa2094afad60c969450e8c1c3b68decdd68294968acd4d5d5187604d5bc96a1924748a05f1aad245c1d8716c4ddb844380cd279aa5e1bbf133b23c99107eeb3dcc47484c79d6908672e2e4a6307fd67a9bc63b3a6b471c438e7cf741b23637260307b3f31573e533f339095225e3e982c870ed78f10d5a9574a1d56252eccbd37bd3d91ef951f35c2e037569e639dec78b67d77bd197c14d05a2ee0e128cfc263ee658a15fdc0611d8f029722d5db5a67a7cbbb243f1a6bff5b3adfa2040caea460a68b383c21d79388df9eb6e437d02b361124e018f3dac301e34b7283768ec6d51803d0e8603961645493bf0206722d2858b125dc6bbf55fc5543b117a158b68b3c2323fa1cd464d0ed9cd46eff8719665821287a3acb24e3188b062fe4dd6fe3e8b0a697779ff64a9298642ae8b9a0cd309eadf3caef9ba8ca11e259d9b85608f1dddfe77e5e0b497da695055e5ee248543dee8030174504f6acd7f4362e17237b588c95dd58baf8ec2df68b8a1b9509be40e5bec03c70939df56bfa3005b9b026d70c9b2683f220b6a0463f38370595631c91f654b08c77c2e1074c811b555a51cbb11c40cfac81ee792ad7e545f5edae12609fe30e171e181022a57835938e2d61464b69492a9663682d4e56aaf903800568f0c85b55c2feae339436c217bf73b88431772e034395165c39bb4dc161514c2ddbba1254548d87172fbcb4445e3119db226e17e20f529f65686179b7ac40047e7b931a500b336ab53e0a557a2404c76eb37c63614bdbc9e3aa29508f1e09008d89657724ae72ea79e6f7dbed36c7a31842c6e8a7eff29fc6170d835a7c43445077035443226d569296c39e811b66545837841aae47729ba25f5e153acb28ecc7016d6e1c288ed9af67cd84b0d1182d4b223ad293d263edb13a6d295a9d26e1396718d435e2d4ab6a3e32696680d433831090074422919d0241f80f4e8fdabae74b2281905f3ae9bd86f1c9133aacf46e92cd239b6a9ec06b8f30eafbf871bfce79bb41c1bcbea933f46b26ddebf33c0def5545b80f33aaf41d78a5eb47508291c2f933b7b8369d190f2ab5d5340964391f534890ada9b0570e0163ddb64f9d7a7dca7f71382739aa20a46b0a8117c8b351104908bfc39acc4ef47bf72da2831c372860cc74c570bd5cd652530878b8b6c23a203aa704e99904341400f6f20df0b24491e0b6448c21f4813886c9c98b2ff77b9b383b85bb3f6c10be01db6dbd4e8597fa6235a90ee88edebcb553bd06052c233b1b08f96647dc754e9235d1914dbfef44040393cb835821e628887e05b9ac64f76ddf8c1e2cd98a788d297b780a7f90f41e4c34bcbda6ae9ff8c020f5fb539c25f1b1fd48030efd16a4937bf2e05ac21094a5b2afb14b466324b3dfcbf9ce4c0e45e100247a56023423af607ce9b26377151720ab6b2fc95810e8a7446f591ecc56758b0989db28beb39a376023518e725b51749edbea45eead7f914040c2ca1b7895015e78a5468ccadc018192d0d8c719ce41ae6b9a0c574cb2f6337117ad1817dbe06a45e67f4b7c4ed256487a94780d681b1cb3e5382a30cd4760f5f8cd556ff49f8e7bb3cc818b009bce91df74f75f2a69800f7f68883b74b6dd14d9ca05e391fe5f9ebd2073d841b1baa60b07aa223472bcf962e82e646fa40f48e2b6d43c16cfd1793264ebdee14a4e6fe3ada133200af7ca728fd07201ca22134d92aaf4e1fd9c00b4726cfcc55a18c4d95f473076ccc7bdd17f3afe4fd9b88289d4c7f8ef99e8359f7d3aee3f4d24a36a906f7abc2813fc6fbbbd8a87b3900d67327ec91f45011e2f944339ce9a533c2de7d7de0476b918389f18df5c89903f384c1ad15b3785b936878cb221bc24d7844f7df85408dfeeb98bce5178186438a074a4bad45512d5d19939c642593a47919d7599fe2cbbad61784ffda9a569f9539cee0fb4e564cdd006aed9f2d1426261845ae7be98f47ff72657857da492cf567fbe96f1e79d2c39d1cca9d49262e401e917d99dfed60a043d6398af70ee7b66eadea0a05194e845a444b9c4ab5b9607db7b8a3ee212e931bee2ea7758e7a671c974efbc4944e9897c183613f313f541f37d52fad4c7c67fd79770f3c51a4ca4bb31df96a0c27961a663f341f73bd663739f1a256e191408e8d41c71f26126cc026e1feec436360e51123ff9dfa5dde95b1cb7b22131f9908beb39426438b6253fe65d0448932a920c56431ab624bc215df5188e383a2a0f3fd3176eb9585064cc3ffd24093ee1e69f1fc58761726041b53144d43ea906ad4df48189a23dffa654e35542ef38f2b36720fd1dce5755e31828259b75abb7b41bfae388bc5b8e70783deba8074741e9c622d5057722636610c9fac54cedc5eafddab3e02d7b5f7d9b4f85a9559d730b34cb38acd9d04b3b619bb303b42a2019a3208d2384da87515f5af6783fe2859c7716383a726f32e74a8002f153e16c64873eaa65b17b85a355539a83eb07dbce646bcac911a0e33899dad231f76343886fc5ffee2be9abad446bfbfae71d974447546c546a0e5d0829e2cb3d272925fb0dfaea71f3ae82be0ef4f663093ca1999e390a238456ce957da3e842d0ee4428cc096f7fbaa31a06d8eee8ba1753b9138b6b1308f18d555ff68e82ab3a4f0b75aac0659060d34c52cbcca5ee6a8fe923a4a73d95e628c58de3e6183fe2a340b59a32b5f47e8829e6e9b3fd8bd6fd3150a12fd98d310088ec9a87c3dafe2cbd92d69a8161ee7f6246ab1e35bdb92b5f0a03bf1b2e87a43eec0f0f6dd95e21c501811890b06345793318d2cabc60787fe29bd361f3c87c6feaa5e24ac658092242f2d35a556733fc0077ebb8226efb45eebcb6b1912d87dbd72bcc98599e4e63a2e9b3afe4df3b12c203192c98830354745d552fe2451f29453b8ac3bd18eba8227cccce7639f61e33e79c13b8fa3d8cad2d8eb882c3859d608ee811a9c056129d8b990e6d7c7f710db37f557787a5fa6bdf9dd0322ae2b57d0311a9f10d858aa966fcb9b3d7112c8f9dda62a804d0c2cfca43d4c371a5b7082d3948591a46cee24b8eab84a9d468870b652f44cea31cea7a2db4bbe3603b261b720083f3bc288db8cedee29f3d679bc26195c347719e52b812fb1402959ce7fea2c7af8d4f3c1f5c3bbf0757d41ce7192b6ee3a586f3c1b24312d434d916773f481ebb0d5fa2d49e483601838426e8a87b25d2cafc8a0012abe915c640c6cd8956bdfec8a945ec5b995f1ac94b77f223dcbe65538b785f22a7850beaccb3d6579119ae065e00f708e9f6f1939fd06485390d6e9406614260a09b79e6ba8b2f3831a2245a90c32911b3e5008c940daae9f6f8e9bbbc97ed208f85e714f04775e10816b2d36a201732f523f5c7b66bb48dc09f49e4bc13bcf302f06df7e24e3eb31f9b4a15dfaeea97ef5c207f0137e8ba523441026f26c2dadd6bf7d950e6d82db7aa1005af4f5373a2ab42a099d2486b99482ef0746a2173ea08625789b09250179b7bf772266eb1dd7bb2f41da3e8d026260a351cf3ff27e36f0f0447cb0c5562385ae635cc301322311cdc6fcb1a81e199686e87d2307083f23e4e2835b45ebc2d981001ff04fbf8325433b3f485bca1a3e012fd14ee38aef7576cdf17e9b568b4f2a619eb88e06b5519559242d009da13c191ce9870d422e7e97052b6f11ef568235d847afe1d655b0565f5d62128649c10762f810ba453ff65c3b11490dff462c35992023fe856a501a41bd320152382042c983f0131e49dc6b73895b46e474cd52e7cea5847ed75b0c0099e56bdf81cdbce689c16a1295661248211ecd98484ddb2283b080429d55c62b8f7b1f1fadb6d853f8f0a3536839eadbbb24bdd85440b8d1beb9908653d12eef9e236769ddab9443143931b61866677f6aeade2347563c1de8a1ed061f074e6294cff52825dc071cb163f1645c9b211de84ecc76700e72aa386b019b191c1cc67fe90b143719ea328afd6421bcf1ff2b0af57a06db3afc375d4bb20d28116a87d04a030be1df13da45cd63670adffeeb6684bbe99169aa311e57acb009baaa8f1fdf391c73ff001a17308ec5b43141001a77e74604b31c8f7e44137b388eafecdbbbc519716335755d6c26405434f486f429fbb900893f943d1ba6c6fcfde62075fefbb397c768cbe8f9ab02764edec930fe4121f111ebe6217144269d7b1c925f9b8d348da0133db088859e40c0e209a5efa1f967b92648f86f5062f708095dac39fd95a7c699e95e7cd6dd2c616bdf5a400f2d128cec70282bea8a81d840cd1201a0d079e6f8614e4455188a8ba8a93ae205214088c4d220d97ba33f0cdfcacc65af8d339889a5bafca9c205e2352b6eb3cb707b9c684d87b0a886f43691042aae8f3593d6e4cc36a499e6d60cabe732349fff4955af417b9d75c504af7518460094ad04b0a4d535482da71172d6ad2c3926fcab57da9b2c621a177ca4510fd0cbc177c351e4c0df9bd9baac21c390c630848bb9c898fedce35bbd4fadc69a53a3885e330a0f32729490c4d1546fb293cc3333d6417129a365a9484718d21397ee47e324afb365db771b6df05b4cceac217c9f138506dd033732e027c540e0c16681b928992c03b02bcbe35e95220036484ae709bd4a623b527e5c840ddd860084d59d4c7bf23ce988f6d935f99680623613b468ff7fdce4198916087f1515d236fefe2651bb0412779e54759922635cc507c2496ad12cc58d7a1bc265113f57741d4a0c1821ef4c3599296cb6fbc8819a0be69c0453a63b658c24699ff066c60c4baafc69e64dc7c543fe28760ba7cce4d26e038b529bf5f884a522e3cfaeef32bda0a38f4d63699b7ec170e84ac8ea0c2c522bfefa46a47dd2d118537023133332ea3641436003ec4638845d46baa397a24376ab46a4a6109be5dcc86c8bddcdeef28fe63b31fe1ea098d34762893ea7fd1d2eac3d19cd144f3b349a93823c012b89cc87e7f354a0c935a744a8755586e7666d1cb1f66746247a71759d148f544e4f30136fc5ab4d0b828dbf281446080a9f74da8083411858154bd6e92fc981aca5303a0e7bfd1d1f4d1b6e41b743a2a819fcb3e0b023f8f52f2232efe4b7a1fe2708179459d078810578a8989a01afda0974381b96d34296fde8b940074f5b023b5dfb2ebf808f07e1b2bd53b1c6a622716dcf82cde5b7cea74a760d801c0231eae5dacec3eb3f739500c8dcb38ad964ee1639e15d8577a03bbf2d944053b74a02d2e19fcb64e6d08138af8b46a1efe937e98837c9e405d69a2c0fd617ffbcbb8202019182429437c44c1696dee330489760df6ff3641fed2b964440ed692917306c7916d5b5707dc999f1ecc3afa3cb91c8bc45ca2c37141be5c6d5dc87666db86b6c72005489ef8ed5e3ef37782447823a16858fa8c8c5a2da4ae4eb639ca3787f8266cada79ddf5a8e08ed03e38ee61cb590a942264b97251549e0b179bdde01ff8a0f7cb5c52c587ea3d1aa1d835ecd068e3cb7e0e9298e0a8b085f28ce73cbebefe12a621cb0f96e7e62055f8c0134ac27561ec46acc0a7421ef8d819a34631fdf41d9b88a7869b73a170b5cf11a41e8da8e586dfbc27028410d6e8722a542d4dd14b576def3a5289d09adf870b11e6b612b35b81db44bc57fd587f41b0b94c77011681cbe065a3ff50c7d46a9436a3664549c0d906e50d7ad0653904d5eaf367302544eb0b853c6e5f8e6f0fda229b0010b6569b34caa7fa1052c2edab0dbc5d0364d26e1294b729579feeef6e7803c5cbefa672208f0fa9af32ab7e040dbc902a23f13980de5ee4f21f715cc52e7ee62bf4e6118a06cc0e72d930f1fe46573b59b008661703b0b6e4fe92807286007e20cdfa01f6f4233c0d72109786b59a3d5fc1a500f4dafde2912556d88c030cbf80875586d76c88c2fb673de83495cf3ad2ad877bf8b6ff69bec3ab4d012244a3a70db86daf448546c73765ff996206f6d20a81aea9f5ff67b2f72148de50d7823a50fa9c0d82701de56f39bde81a81809e3f323b4b3b18fe93f3856688d904a5363aaaaf0894bf6a152a36b33334c4c1c1385bb7796d169f93160d699ab5ca28f31b8c2f37fab045630afde83d5da47b9bb99e448f412b4a5c07f118cbe5882d468c11d867518e72f427d52ee072918079cf97cf680a67627501d7ee4e222c1433e7ac9514a8a5a05f098922e3d7f9969da8512240a0d25772f8ee0f4339aa21b232f719898c201aba83742613175b3c38f683cfda5cbde1eeed79eedfaa6b4a7a2bd885e30a6b5dcb9096848aa150c8580e95df3c57f44c94161059315cfb5b4d086f3d2c9ccd46c3246916cdbe728d05d92f242d19be1c8540c5d0752763d0a7a186b2706596aafe03043b3da6316b712eabe8e74b00673ecfdadaadff39e9bfac849d662c9742aa8d28194099ffa54b2eee5e2b2292320d816c6c9e81fff917df911d1380bce3c2ac28dee3411b4628fa9eb8ca29a70326391833a44d4fd041adc654bc2b7950e1873ddca54da256bc688d616728f9b6af6008abffaeea5250ab7413a1b8c961ce7b942e68d1cfc7eab2df59de0ea6e294d4ea9907cc9b4e432626f854328342d0342ab3b8c777b34b5b5488ae6cd21c83dd7314d446974e1ec0935593d9d8578035a15def81a627f2dc648f9266bb760bfd2dcbd9969caaad1ea69d9b613660f82846c7de2433b9bf42405c61d32403416de0efbac228052fe4e8d9bde0a9c1c5bba8dff6c97a79fbd6b32da5cc44c366e05402676e47c371a3421105d398699eba3827817af63a679f75bdc0084441562ec144b567170ebaf50d6f9758c916f713687790921ab71ec95d6bef603ca4ed073da8fb04a44142022d42d1ec141156a9089823a95014fbaadbed271e0916f02fe532a2dd051f70812a4a3fe9399da7ebb0c9216e57d55f46a624f1519646326a5f46c0c90d98a4c3540c324bb0314aaa2cf02c554cda10581dc913adf46d85e426b8765191011a3bd70fe76b685c4fdbd1e97cf7eaa675c9cba4611e63d6c17cfd46cf248ce5f1370967584152b8229810c0df8a408c8a365722d1f3135f6e9ff30b5c359c9db6c662fff8860530fe11a4ac9bf8a4404090c9e2f84871c7374e65a3bb5d222178fcd7bf4b6b02a70cd0ed255bcfcdee7d4e03e189542c453ac2bf4336a208093b440c07501da3eb5cbd075eb6bdb182d754452e0f02a9201d26c333f74e51137ad3e741dfcc0e38d9733e9a2fc1187ab68f0bfa2c0a12850f736ab4e70f6f86561170c92562a1c27b4f362fcaf8aa01c9139c6e7240a5a197df9ef241a0f9f41e382b39db5b998c88032b753df54fcb611d87ca15d442a40f16de3c361ca6db5667ec7979fefa80e54088e9e01ceb1a78739e0ab4e2c6bb849bdd6f967ce76b7036bcdaa63ff168c08b9bac7f84b88aee3993ec29cc58177cd645d19daeadbdecdd9326a153e17d23a24f7a2e63456d77152b8c1ce522fb18335b61365d7b7fe2f262487002605fd97b7bb6e7faa78af584309e48639ec83cc024476a727f82fdfe293899556421c22165438232068e5e0e2c974c9bf41a9da809dd29cf2b9ec22fdedfd90fcc1d402dd0931f6c2f93abfce062ef64bdd960aac42aea0de9a59af928c5122dd73ab4f7786b2c3bac68990d2a38b82c509c59fe3182ad47df6e0a1d2e0e910af6f64c6d812c275a352ba2f2912ad4c17612c28f74cf2c75addde3749f2d0b4c6006a85a8cc61db5b37112adceac523318ef9c0e21606bc0bb21a96d397b8a0ab71c8f7cd935950453759be045cbe1071d881da09eda126da9eefba12a3bff2e9d5813674004ae4ccb81ce193df50227824a1806c6e6fe5afeb0ecf5e136c57535fc2b6cb14f7130eb0a0036174645b1771481780b56f3985299d0c560894c0fe453183d7e0950ba253c6243cbe418d81bcbc87efc00087319786147acce52ee94da35157ab01075921fd5fa79024a8416ae706b898849f0cf4c8163f05236cdea111d3a91afa412cf11f2ce42669e7a34c15e0e89b2a69960795ec3fbea335162308df8f4133c652ddf17abe506f0a01e330d54495a37accff930385bb4e14f5d618e820f3910c8252a8a9ae9197eff166ae16d82823fbc5eaf494ca6202ba8267c1b83b2c9abba8a57d4f112d07a12ae326f4c24131f6242f6272bc0d9cdcc070f17dc9664ed4f5bd0a4064800e87b2507b997ecd48f2c05a69c59fd669b42bf88aee13c8d5a1d6ae588fdcf67bf79c8fef8563c70e0ab3916ae4046ed277ff4804474d40cfd249c2feffc7ab91dfc6592831e30188ced0f77481a5c27347e8955b302615443d526b015b14611a242752a597b4a627592351279fef182deb335d79c56e279da66e30985a1424c93123ecc9bb06d2c904b98a957e6785c88c28cffc4d6c57aa8dea4b3e18638016b04050db1e11cdf14aac308d30a206940cb6d0e1ba5563af34b8c18dc5713a5ec463e1431a0a162f8d6b809ff0722fcd24ee309f563fd39eb707d7d5e4b8ccde49186d3dc85d82872b66f4ad3335d5913e342b41537eb1d1dd187decfbd0652de79b37705b0cd532197f0e492f61190adc98a37a46126478187781bfdeba3561157c3ba0085d0901db3407f1935e6951901faac0c06c84f979564c7f7f938fe03d0a8cbd302d6336636a63108970e6807a398949938451aa37997509bc0824b87b54be3ee451b53e2331410fdb06188501616f318b0b2493c0a9c2c9fe1fba4ee78c9dedb07cb0f1f739de782790a3c33fc9a8a9f58963e04b5fae096b49cc8c8335b3cec214b4c44e6efae9cbfe1b882c74196cc03b2cf639d1482b9ef577ffc61c5bcec44b3ae186a6d30a63833d478146e3cdaedddba1b7012129078d8a7423981a434b43b78acc684f035919bd58c7362995e589143eea853efcacecadaf4db8271c3433a821ef53ebf4a59aece520abaac7327dbc291bcd0c333f5ba79621640fcf4e903aab3d9022d725731d532120fc0df6039ac3269d62d026baf49cc74b2bd56ebc03e09f8de20d0fd9ac746ac723d5a8d8e462e53e4c44ae2b5e26f787cb1267a3f477369a71520145c6b54090635f2ac691b73900297591cd0926785fa27c8d231c3457a2d3b090d32231540ac0f9337ec373ccef5e3a9151f45fc9ad56c5913d7ce34cf547b257ff248e8ff705fcf9146b40e708de22e0877a92adbe26be8c37cdcd738cf336052b5a594d7b7dd54eaed049a125e511139124147c716307cbfd4e2616c52fc21f58b2f82ce4f48a429531ffc128fb7bf3d95310c8c6b362acfac58dae47fa541104a232c62fed8e9ea7314a8ee6b471d0a64c67a418bd39abc0b4212c45e06445c405ead2b22cac47aea55ced2d5006362da18eafa377ccca228f8cad70163be90ffac14355ec266234ee20f69251be32b2d1a6ce8d4a41402b18fdb39b32ea03cc61416317af5d05b019407a99bd3b722c86afa6e05b206a23df22514dd66025e764636964b6ca92b11c6aedf1e87d2893cecddd34a36e4857b9d887eb89f6ba137468ae5e9d6593c7b89b6c7fd50c2dcb38492cc4f6df4f698b3b79ad2a2c8a2f56b744ea29fae0ba68721ccaf506ad3f8f660253294d79eabb92f1e4a6620f1c20e574724594b17c7fb4e6b7635377ed7e1e44f0b9e329767c9e4c3e718006ddc6583a017f0c331bad82ee848c429786e697c051f03ee3bd65ad9c2d033e9f0f50ce793a05e3cbd4a7fc2d94c002472465ff217a32f9fc4d5b499d3bd7d39ac2cca0afbf98d5c75f33a9a3b4a74f49b2030eeff67227386183e08ee9238a093f5880057a5bd7f413da1829ff6eb25efe4af14dc584ed3c2229ffce482efc4efc567920c1832911bfd340ef9a1865b6e60f0584f41c659f87c9973f328e814564e22aca282f42ba16010eccca5f27aeb6f7b35a9649f7f4c9a3860f1b17666a153d1df4c507bbc0e3d82e2a53b450785e50a57905904afcd370730c6138f20a13e67f146575d220585972acbafdb593d45c1a8277418fc92c6c9c0ed16a7464c471052193a65182504b5ddc534c51f081cb4ebe9209776a2fa1af8ef970f18ca105424aaf5edaf71b8b0d9fbb7f8be91bcce65bf9bc3a9ae6264ad25d26c1e3a3194625d4dc41f9fa0041a031ffce778d6186f79548a31af9abb8546dc381ad9ba49917989792d12eb86a64e890afc46d16080d5f7d81710c5eedd6af3ef84dc879680409178eeaacf32680f4fd0102894662bce0c7d426ba1f32d64d616496999e11abcb8a952a9858efa3cff5cdc827c936dae9a791b2d4cbf08570fa8830fce37ff71e94a2deca27388dbe6f56f4b542822751f4123da0e8ce08223fb2e207934af196a4823efd80d4388bc09d7700abe887c95d9f22c1e0add5ffed3156aad023d2aba565b38ae6397ebdcb4ef20db35b8ed40281c84130125afa3f8015c29a8d26300fe633e24cfaf4d786627853f8eb20ab8c8300e533c3e186d08db211b71880b66c39c72393eb41a1a7a0929cfdedd5bde5cb13d8590f8f43d2f2ae377d3f66acc1a4025b72a41a18df4fd6730ab75b5726577b9fcb4a239fab1a727cd54bd50c7848bc0b8258fa46c6957d7b82948da468af33a7d08116b3858ee97a73517595c32074b1285775bbae707e4bedcf388d63e2add4915577676c3ce2911baac331890e94c8f5e8454398f30106c6cd128239e216db4b45374eb43d7e47c4b0d88f3f637025869b9365e1d08981d37f1273d20869f805492a44574ed67b318a2fa2c5c30087da51ba65f075081196b58a527ffdf6b8f4f83ea221524cf5ccd2fddbfb22763ed3374fa39eb57fdbb9214a60de670f8d1aabd1f4f48ce97371e1a51a98f5bb450844b236d5d8874419a39f54e0d0fe59cf5800ca280abcd0e02e228ef39d2e7c33792de2144a3a3f27db95483d717dbc7934d0858332b771742e43f9e752432e862d5871bd4840286724e93664eb11c212dc338d997ae1a28b94c4331ad5648c76bce1c58760d1ccb473cd18979440518784752456d15af5c9db213d782340bbdad7f9d6c5a18645f7f9530cff9a360eaf208367a226f9792573522417532efefab8130fff7ecf2a72f9784c1ee3d0df45ff73e2769f15ca5a02a673fc8951d51e3204c50b86d066c0fafffb44c66e8256e9ce8c90f0b7e17b1cd3259365292201a1b40ecdc89c31d0a207d6d8634925a355c56538ef02f4ad0824fd0279ff5d9cdb02bab621a338f530310b3cb040dec7576377c480381da4c456df8e1d2b93aedc0d1f794909080881156fd69a69fe8cdb6cc208081fb56a5dd41d16863f9d22e1bb4f4a90a9096847269c4c1bc15a6054be467ab982b79d840f1e6782fbd0c95e8a4b8d7762f78400ae6053ccc619380f281bf66575fddb059abf8453ba25d7e8c450551620de8b3e92143d214b4fb07a055724e6c65bbd68959ac3b7deb264355a72b0cf41c7f6eb8d8209ea6d43e7ae06a74f90f858caa439d519d69065a6a4f7db907ed6e935f5673e91c70bd5c1327204605ff62b820b1c94c85e41a9ee86dc7d468a28ac023cb9e40d850a75df30332191406d6ad066b7add1df67f6144d2b0a7144a049bc0b83177516d2e469d768f521f2238b352e4523f268a55baa0b8e2c4e4920335b0de579c787951582940928d7e7c8fc4a287b527957f9c17e5aacf8ff1307c155523eced24b96584d677047c60148497f0d5689c0a13f2b09c52315d53b545f3a33136dac4d64eeb2e490d5356ba992f1ba353efa86fe05f522ed635446676bba1c0945b16d96ee0a77440a7c75ea6384e165e104cf35ba6039787bbff28766568228a63903b7a0bad562ea4247562f32ff95740c134efbe60564d43b106d436a7f28cc1c7d37481b1fce12cc861e94ccf97b316dd54d83f38ff1c0be365271ca1c13a3b8883d1ac9e8e89eff5b048ce9608f916460e07c4edac67ba4766916c5a4fd7a0505ec67dc82ce068ed96c669f71983f35540051a0262d589b0dcf1552e661c450d3827ca093aaf4d35dcfd3fb9b14254e334c815a42cbb42f528510d016e148a4d492069e429d1db191e9138a452e585a0b755965b0cb0f893c6b6cc1394eafbce84b0c112c8f4989aac6a0ac1928f46a873ed147b9695e87632f2007aef7126d4a04a45ed7776db3166ab43c688ec98b98a0bf2a2b61d115214b6a0c0018f100c82eab1f03eca7a82d9330b8a651781273d8be1f41f06cad580860747af07eda1c6ef47d685bb1eae4004ae10c24f2d9b70c23ad760aecc9f55527c0cef844ee114b04120bcbdc52658d8d78ff4e2d57ba87cd58708844c7e3c0e194dc1cacfbd8e4e80206348ac2ddf7fa2be355dab4668a1176745e67dba8014b21c7577fb56b228ffb94b0d96c82e2d29d0d2dd171441dfc7a2273fe4e740d1a36f3c532019150bdf82ae9e19991b500e4885cd03323a802f0f6b6fb820a08d15ff0ea81075deb5e5da9b77551447a25be90d2487e4e06e20c21f7bee77f21f22e6fe3ef939c84df5ce91887501d775c996103f85784eb4547105b2cbf6cd6b88921e5991bdc2f9bf71c04b4e6981ab7364ef41011de722357e32e311f540ff36d72b27e31f31cae1629768a4ed26fafd63dfe4062909b23d8727c4e3f4c24b34cfa8822facb47faffb2b341ecb361464ee42db8a4af77ddc6b48e20aa5bd7e71426ec081a9545c1f05c34fd3b759d504a9dba25f54dd991ed899232b6f2924841085ce6dfc581f9aad6396c47d3db5a6f956ed2e2f3f1a553783458bd78e055ab87a214d7e35477f602076bc7521982d038d6b84109e9bacec8a06daadc790205a098da23a09ed54f6b103007fc6430d0c6ffd4121e07f4ed77b4a0cae9593d15dba0431a408044e03c901c46c164e498808cae7d663cb11dfe77b091826f72fc5dedaf00b89a80c244f393f6c29d8df3ad4141290a0f3b16cc50fa2d62c21c84a8f996cf05252f35929e53230001e7d0dd8bb44779e3b9bd171a763e3c934294e24ccfd4abf7c6f3bfe29fcd79dd89e4d8734b4c2efe0669fbd995e462fe15d570d7953513be1431f4007c9f67d551fee74c8b368eda521bfa787638db70b59764f54636a0e9fa7bd50a012922872b77f5a3613f894ac9d84876c6b2669be909bacaf919404f65269eac46be05b645a0099494e4736b95efd35798cc8ddd50e2c7f514decdfed8da66ec879b7500cb84aa3b0e4e2f9e3342a1646b9d9413b885beb7de16091f343f705a132041d83916644139a267efe28d70c464a3bee1f16951318d709c266fbbce0c2970599dbf3b10e55b282ac5326707f179c58a8ae456587763c062ad641492aee2c7018e99f892606ca467b671b26d337019b2e2ae7f35bb47b3b6a914a588566eed45f51653d542f716842189990a5650822a04be2e08b779872a333042bb6aaea82fd824ff40944f304b3b415050291771f985526edafc46b58afe05c743493d21dae8482e55e3bce12f93e63abf8f6b445e0ea270d5e3f86b7518fcf488a31088a5a70518aba1dd74ef19707e0caaeff37ab522619c1a1456eb5fceca5bf74c2fc77f3e4127551959feb27396bc13fd7353563f3800e108c780678855193015c089809417a04891f94a107e24389e798df32b03eac57ef86d867e80548f7844970f40d1308abc6433491ad031cc9253687e9335969acec801f6661a2654feb495666a7f58c2cf49213b4a720c8ab45516f439288719a758abd88635cbdc8a0749ec0e86191a98a0e65f2b731cd0ebbff69b648b873fef66dd3aec144d7cd20398dd4272dc5a39e213826bbf88d209d685cceb05ca3a002f0c1902268bb2cedb8bab0a726c9860db160fc249de0a0f78c9c12fa99345b911a96ef64e6d6091e2ed3fe24f4c4971b4af16bfdf3989796701053061a8452b121b7d38b6cfd85873227ffdb51cb5fb10ec957d2fec387e1af0490eb8108bac96a174ac255da6d1148aad3dc3f8d99155301a4c2155b668d934d46c8ea3adee73c8962f9483f43c53df9c8c9728c83c2751d753a8195059ad539c99d47e6aaa2d50b14c391d48ff0408de1dcc6ea65e758e95f9b635265b80dd787cd4d1574885050df846b8b8f8718833dd703aa0543494bb8d5cace9bcb35744946acbf5e83277d1d48b76cbfc88d04d1a9510e3514a14e840e154bd6628734b1df4afe1cb49887dc98c5bfb967d1ff61a2e65439156aa055f8c172d335dc8182dce5d0cb88a79313789008009ed549df6c7bc7fc3070c17215a945cb184e9e0b5ab3a0a7b62bff14876895fdbb001d94b8956a7c136bcfcf423522ade6958b25991540e03dbbc97961e7d9044c2227213a2e970d33ac18e15cbbe1a77f024338b3bf328e10ea84c15715a52452929ce7a1e01c77e3e9817b62f613450bae84e9e265903a6cead7a72af2b5a14edd2e6af68a9a7ec1df4897b5072f67c228b963dc30eb9b9c35db8e17d1f98aca17ca5c4c8fdcbd958076cbd31bdeda117b5bb107cc153271e607bb4cddd18ccb863ce34f9d6e132ce3341a46779080fada2ba435becb87ed7155955b4ffae4758ae1f4896be41a89b0857692511cc16390df19950913a6d1f30569a2d3e0bce87b16d26a7746295b463181873121bc4fd68e7101067080d26d1086d46cfca0186ebbd5a8a6355df0508caf6b222f808e8579a81c05a54452fd85a63fb0ce508f8710264462575c2006873385c7dd8eca0089d9315e288450890f1e3420c00465288b6441730871f8b49dcd985cdd8be86a63c96dcf6dce1590a6a49939910910a7b36f5c43275f4e48fac15700b5cf9ef3c1237656b04a0484332dc7fe12d07f784962959b43314660be4db8bc11d0d78a62f2ee01a84b96b9c68bdd884394768e68b07e5e0521cd7a7d3a840d7979a3d1b46f68b749b5fb37a0f5de19f950c9e466eefac59866e66a2e8b769b797fc8ce542137f4c0beddce77a2dff36aefecd54242d2a431c5eb6cd39c219980b5e5bc002cbfae80243da63b0c6ef17a88feb523d5e902ed68b889834249f0c8b76eef9f243535c62c04869465ccb953ec9489d33b86108b0cfc1f0409f84f48416d74372098ea0b106860b2577c4ecb9ab57e2bcdbbea8b9439130c9cfcb283e8166485d06e2b0c1a73c8b2f327c085addd74d4dbca5199884578e2c56993988cc21c31a802b79f562035d74abe5376ebe96554e5298faa2a08010a0ecb211180533e484af7dfdb96d38a36cdd695429db4ed10840414912ad7211b79dbe112d2d54ac7ed6e30b51b20244b88dddba189039e337db25fe74d5e7f7dcb1acdd3c78e707fb5b5df473055d8eb392415fc17642210817b09d9cf2ddeb8d57074d95b4405b0d3df824af6f04326da041c5c302be9e89877dba1fd1a17849d85d9f90ab7de091bf857aade7d5eb9344d87892644675432b163dcec9f12674e1576fa0837b15722ede9af533b3d9750ff352ac82ef336dbcdd71328c3445df595b0ff73fa0ce6d4ff9426804fbc3be6062d2224261e19d070f3fb6e36b91fa12674ad5b5f354c2e9561f2f7d9999de61540c728d119014430a96054326d5c00c987716f7068a261b8fafee0615bf95c2c440429283c6ee97b20734aba12ad3d084c7d05aabd4dd469483996e8b3b0e7de80ab6e1b6861978e76ddfbcc0122686af52fbb76bf40cd96050fedb97816760c76d6d5eb561cec750966cf8a5eaecacb536ed178c5a97ded291cee4dc1ebaa0eb4ca97eb4155d96bbdb4e924639b9dc3ee8e4dc62fefb255978c77197698dc075f343554b2edb3d60f394d86a422834079efd4c7b8ee4a00c25a64fd204b6f64dcf864c7bb08388def7de7909d331c29137f49e57bebe34b8b166eb83148e450bd0f80082ca885be4bd42aba88e3b20594af183ab17ca46e11a984d1e27bdd5b9350e64d5e57b2e657fd622a9a38cc154d73b6767987eb0b9c0d25f4847e2172cf8b7c6306f774d91c7ef66ea6c34114ca222ab0913aff2efa1fb878131f1cb015a0169c9dab9d2b593ce89f2dd0a2d9c0afb4483ef2672a8cf3b48d1ebe01f0d1f01a7806be7ccd1590c67243df3284af3cd4293ed6ca231f0382e2b2016ddecdebfc50892ecf21df629d8cbece9695989024cad53543887fe41a804be641980cf312d541d7fd3d75e7d529e852d3b6c5ce46f431a295a0bcdfa841bc79987d8b2c3df8f66e0a72881c3edc465e6d0b6d9c6e303f76f26733ea94027748d6c4d2395b7f2cae973567d6eb98c55ac64732a4c07fa7daf8b03c9bff548c99f2a3e1276b85eb352fdaa9200bf6120c03e1a52a0fa4b0374a9de505a9cf3cf9431c50adc40bb9c0f10b48ba79354c006d1662d6dad2013531595e99d2efde8e8f26e328b447e346f8de37ecc0014c3ee339d811027c517df0febd61fabb0104cf2ade72b8d1ef6d6c57de40581b2c7fdf690dafc390baebe1e515174956e4151e04b1776b46fd67879b2993125a3112466da745d937a6060a2f297321f446692cf2418a63e1ced8c6b7b3c1fa18d3437a95dcda5f6148e00c7e42bb938fb86fe1886fd075f24b206dbe02738dc677ac4fbd97ac2ac581cd9fa215c021924f0af8f58625c0d786b541f61d4bad66a569bf332413c42f3f9e625c183cc71fd16ead3d1fbe2ef66bcfbc6c8109d45aa14e117d1462be3bab644643a4b9139bb1ac38d211e3b0f351e904a34b7c07e38f230bc44861b245bbbf43891ed7e61fd523115baeaf351429ad94fdf5c2b7b22d8b31c9e81dd6a1069a1aa3f255c4171c0b91dcb0df723ed3b560bb315a17ac57e68de53b33bfc0e635d537e1e2994b9660712bb615542b4632d0c06130ac6c7e3359e559a091cda0742eadb1f0ab43f46f32f233ba44f51f4a17c9e1475574b71c92fac404652826e880a6b63656750039801281bf62028bd2773c945cd0757c1a8f3307fb870ad89864360cc92c19702d25f626f57265ed9ba15bdabf1035fd0326dedd6a98ece015a51a1434869d8bc9bfc541e0e022f99c0f9b92b576c97e4deb7b453a16ffda7550a5ebfc3686e7659592752989837d37e3a5904cd01ba813ace7c823ed9c82a32c58f67b2ff81bd913c4d9631fbfa2fb6e93ddf6ede68ed536a5478b30e1e685dc4bf503937c04fb7e8d110a6ef95f7247da769a1f010af7fdbf57edb5773f8cd79010423cce82b4e42dfca0561d7b182a161ac9de9b75dc05c09cccb8d7b43971f2f919e98f7bb4fdbf40eaae78bc91ca584d8481bcf8e749a17e84dedc0a1298b99a13b8087b4505c28ac005ebfe725a543520db10f5d41051647ed11ad93cd633612e0d69e18f9a7840f1f5837708d38128b68e43ae3dd23ae03a7220759d1bcbfb0cffe6a7826e7d3e43b57ba3bc724adc38efdd137af71a1b1996a6040ad8616dffa251ac44d82158d6447310c07f71f3eacb3310d598f92258bbeee996e361c51c25b3019570c423e30b257150c628caf3794863f4a8a67554e47618792352de19713ff9f1568ff1d7f2258e234a2a9428f6de3b7ebfa70564445433db77383ecd5bf05cc791a54273bd7824affbb17b91fd0f4889a56b4e580af56831d39f68229419e8d8e2cd0096ff61be95fc1624f57424ddcbfde4f6615a777a140","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
