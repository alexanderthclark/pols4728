<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c6a67b09c0c5695bd318a4c8b01e6ad2141ef1462a0c7f4b6f9425cdb4cc7b127060bceae532eb1830e76b35f77b620b1b032f3e99b7b2d4aafc57526de60a307399a08337d4277850bc17af5b7f87d556f0b9d40ec7ead27385b28aa17aed14cc0e34186ffea31ed2fbfd9cd75003f5a2374e7adf82f635b872d19d150f5a600812ea6e3014493b8e5fc75bd018523a8a39141fa2db8c58a12e310596e0756701d6430cfe0ffd542e80aa22136966486f0498cc18b54faad258dc2ea3a2dc912325bbf89e701dbf87b34b9836d19b09852debb976aed2c646cf7c1c7cad4857573e68f5b437c298c27cac8be31d401734d7b7c73963dfa8b136734190b8735390204d4c7e106ea8f2cc1687cbb6013745a0aecca881013d86b6368734fb481f3529fad1d95ae5c7cb71a20fa2993db573b71dd47e29f0bc12d0ee0f923cc8c3de6757827eed6e8aefac919b932a9c097dac17e54addacafe510ba003356a87b1a19c7b32cdfb1b30a6cb608c39568377ac8339ebeeab1d0cb6809cf9e769a10fa1ea53a232c84930bf982a2eb354e26a7164edbf3c9e6f585fe111f0bd94164c0672e20c3d5014b0e66fb156fec616539367c3873365f3507e247a67af93fcf086b676296a76ac1c623cbfc3a739d48d5db4b6faf15858a2ae24fb2b0cdb95afbe9875a13bbaaf80a378d8d5e72a58ef2095a1824ed8fb54da47d483fa2c5442e539ebee7752a0900f76f849cdfa9dae012a7f0de4dc75b630ff251dd426e328b301218acfee4d0a9db5e247b178dfc29fbd52756a92569457e40fe6abb1cc84df63cc50328594e5ada242d48071c84d03ca51a6cf4d08f531b6e095188cd39841a09a529ea265e0db2ab272f81e0d36871cffb3e817157a3fd99e39436d1ddffdf628ff51554d0dac8eec49d4f5b14d6dcea96c17c8bdd9c44a398874c62f2b50b6ad53cb0374132533a7b27f711c0c882c9ace247b0ad7149af89e87e6457396ae19d3aba159170b66d1fe878ae8c9b9c1fc4529d1968c537fd722dcd512ab722049841a8a4a6214aa5cbdbfd1a348f367e729ff9db82604b3af7cb531068e4bbe28fe4ada06a1fcf6505f7fdbbb8016af8c7e0c69557b4238e76535c295ce2eb4bb3b86a1d812b684a4fc20a2f65c6dd3a253e1e65127512f366a2992ab33a3bfc33388c64c136ed2364febf135c821fe82d9883dc48d033b61064d910f194fb34d523411b380a103e3d0ec9a64de5e0c579729a21b9f34be7cd3dce96be74459ca596c1f1c78182de8dc9a2804c689e318c96cb30ad1dee1a57d1832ed729a823e67858dbc6c6df96502a9a4a71f128d36c62d6bc8ee2258f9430c9f3ec5fdb3cb21bb760822e9fc4a79d16709ffcd361a35ff72e6114c9b2b7edc34e0906fc5aad904e06eac5ebe1dc8706cfe4a0a81b4e89c2e7edd0b8c3a034c25a1ddc84dbccc10518572e340b373adec97c5727899544750b8ee204b19b49afc9f3ed4e517db9570bc38b30052207da008ed6885e429469fad74920ce84cf6c11bc255e1c6dfed6bc62834e4df78a9f10a0221c5e41fd168b57b5f299669fb2b1ba8595866d13bc276839d3f949451a3c5741dab5b7bee1e3eff2d1a77cd23aced050877afaada6126f8d723ed60ed28b2eab4235d6463e80d3f596d2bb71b38b2cd0aba2c43094aead6cda5af24175ce6fed1dcbfe3e0469b0ef0a86fba4db9d693bd591da3078dd8f8278a9c8eabc8d42af67cf8a92e2b9ba710fc3c59596a582e739e27575989d3821f9631b6f1279bf52f3b5412062862688dac7971f3c1f6dca9dba660a4ac840ef49dbb35594e61e120bb841b0f35e71edbe7d12dbde9450dd219323848c98022b10ca20a5b10853ab6e2d4b4c9d3e835d8aa0500b48d0cccb0f2aae8ec14b45dc69e02b869159302f046115e25a0372d217058949599dcdd7e5abcb8edb9c7f64f4306cfd86413e3b47a2b8a9fcf605f91dff7e27352a0b6835084a4034f26851ce9a0d9dcffb70ddbbf27338ab06db1d784e57fdf7c20a8ddc1ebb256a235d650172158e48ff44d1b78e45f4faf41a8759a38598ee022e167f9ab01a3bef8f79d529abf93828fabb5f3d08e6af4dcf2d67d9b31e7ab8cfb21607b6c2f92d6b8e63cd37f97aeca13ad87657ce2d130f3020bf860cfe2cc4def754245136dcafc811a6e9c3f2bf9da499eaacfff29c06c265ff17f4684b2ff73110d27ad8c1efe850812a7df6a7882290468343f910380cbf7fd40af2a16fc04fe8312ae962b97478d3fa8da5fffa6d39a350cd70fa28fe1dc381bde90dee8545628a0c093869b142f37dad36ca0efb9ea6d4224e9a4c3515f6935fdc31a9796574f88a37218579858a8e2c3507525389b566de2e94e2b68806ffc9356431b50354bfd103837deda742378f4647b93743b54a87f21b1691756858ecb06a4597433bd4dce316a86ea6854e0d4c75e0a882744dfd4617d9a19d99edcd8ede9f55c883d0756abc7801fc5fa682332b129c7fe817c71e3895f198ca90b2a5f90970b7cf072d8ce30f436f1cb75b8983d92bdbf0f7b6ef065e95dc504227a8348d29f54107722ec128bdb42217821b17500133160b2897b20738dcef9f7c9f4ee45e05f43b9fdf96e92ecb5233823d7043e0bd16ba950bbb5626ec4f423b1ee9471ae49104ef5eea5ed59544be18221d3724b1773e4da7a4e0d595a867c874987eb27d07c55f59c0dbee2a81c58fe688e7475780e01711269250e104e077c81d1b3485927c5827b2bb4c9bb899a5fb0f206d8617a259f9a4f28e7bce732db6762c9fb3541a19777bc757be676fb31da88266cc46e6dabe7207fe933d7d3dab1af6ef2e6f5428f3cb53a29e04afce537aa448c7b17140fdeea54939bd083376a9858b39ad27c5e15693cc31a00c1921e212624e43a4dc8b19037324460bd773130eb44919ec794c9d2f0a48b475287749a095a602c841d61b448d2af3904adda380f49c4f88115e4633130c0763e370d6e77262236a957bb26ae6d9f51d12416aadc946960eacbcdf70b4e1bdbd94836357ea0016a2ae406c8ca37352317ed2d5512354fc9a96118b7a3d2bcbb2168857a9a1f5e92a44602a8e762aee7a7d27ee04a5a7549d1b7ab20c9f42fc8c5ba876be29695701f2e5c114796920d0a142d1c8d13210d8c429c0e357e02d547bd637c26e3789c2d21832d9c7460fccdac07a352b084923d988e15b24f0f55da0f57246da2a421fa3d3f2fbb037844e933f5caef503c101ecbcbdd7275acd0052ae038ab6fe3aa649dae2132619e3a98f0f8d8ae3fe9ffaeb6ce30ddbe35d3a804cf8816d25d5fdceaefc503d00007cbb09ef633b8c8d24ffdb5488a467a4fdee4f41d1e48da578c77494f6861c1e5e61c07880585a491b6c2dbf6860cea617d950fa68725c9d1caf13f7454a3ab49f12bb4439ee518cb7950870266f6a9ff17bc63b952676f14631c6e4bf845945b0bd29bafe27e88d526c532f5d96d0e89c188b6e8fe9364fe6087f5cb34993225d69a20a5b199a3c4baa102f926598f97df8067c3848644565db0898376ea515334178d6a4aee449322dd986504e45f9a214c21e89befbff2a40524573cf24b8b82d01eb52b039c9f2b176de0cbab444d1623ad122d79b06a0b62063d263bfad233a5582744973961a4e3da6085f74c242aaacfa6cb8c97b0d5797070e6f31ffa086f138a3d56f2a49325e614135e74bad9e826b1dd1bb316b7d54263bd8594bcc74d76e0e7c68bfd9037de2e84bde69e5945b8f019cb63810b06e1e4122721f23ab23bdb901e0ebe14256b8fc95bbd2265365c413b7fbd6182cfa081f4c3ed211db8f2b46ea610203690dbaec1b8699971865a45bd2bf18cc7ba119f098bd75e610c2a3176f3ad399fb60bc2e776fb5efa5a96d95f660647dfee86fe022c9d3cc6a942f725b6734a3c55b47cf8c43c51466bb4cc8fdc593ea1ed4381ca784e778dba60826402aae48e88834f128e1c096049e069c57f98f6a78223b24b4856c7e8b088067f99b5b2db86c2b696c192866abe77e7e15b8eef5629ccb96956fc056a550877fb231acaf85ab51ac2ac321d391b2f3bb0c469c961a0d9d1831160b3431fc3f2892c32ec8084bd41679611487e899df4cffdd6acf964e91e0d3e137276f0e9d69f1659a86fca38ed16615c7a3d11afe74e5c6f60132bb0fc40e7442a299bbbfad03b929a2effbc323f7955d0552a537ba1b4cc70378a014cb6fc7cc2ac796981add1f2c69834e867f4227ff7f8206fd661868c7a0e1871078bd1b93dada13e20121f471fae3fb81183c1a4b46fd6e4accf3d2392dfaf863346b6eb3356235160026a878f17a354bcc6fcea5eeffe102fd58659ef888bdbac55ccf168878fc204e260f3adec26b3e9ff7b212e288adf830abd0ae4e9f40d7b816ddf4b2c9d9ab799ef1c32b34d635ecdbe606b803d74ab2b042294840a40a3e22e8ecb3e2e13bbef579d5924a98cf377678ae9bd5eec52cce6413dd87c925bb5a42cb488aecaa0a5217d5833789d6fd243c71d33f1cc68cabe12de1505a45c51e1d7b50bbeab3a830cbff687ac0bb5ddbf98bc08ed822f9eeab95c5a5acc840d70be04a7842502ae95d28191a2ae928320b12428819c795955226426f5a92322ba16d49346976b038fb807a9fb480210bd78281d40655c180bb9657cc34dc38fad6bb78f1476376c9d5ef2b1d999eaaa53973cbc477f2880bb9bba18c99312af8f4dcad5942725fb0dbad156b4deb337cc37515277c834cdcbf9bb1a4555517715819238af604de239b2950290db69e1eb4d8750eab4e9e2056f333f86521a24d639f564eedd2763fa69e427b60ba6ecb1fc6de083ea3a628a33c812c37fe513a60ad631fc6366ee3ab9e47d4545b6b836bbba8f69ea0473b9ed19d2734e9d3ab4a1729cd444cd84cc7e2c3e22a9e0c92222687a8d7aaea945ff4f9a593539d29a900794bc80a409dee9373f305b599bd4980056a0a9d716c358e89010c9739de6e2cd158191cf03bd95deacf85697fa3a515df4c1645d76740ea6969caf53ae4efe535461e1aff144830df24414174e30eac5268b291cedbcca972221e251aceedaf89d5ee897ebf4778d01a10866f33022fd071f5fd1af0324693442cbc187804febd2a238bf942386d1189b62abd334ea66d8ae923936107db9008aff4f8ff066205f989bd66521bd4253914fd6b01dec27755002cb3b7d28084b8f5f7a637a8aecf470cb61f5dcf5db6e28521e2c34c40e92ba873f6f90002d71a3742754a3aef3def72e3aa53b9ecc430d6135000f4051b6b9a9df4560f9275d6db1417ba5c20f66b2e4150f7157e2a31b847173d3c729923235da3925b9fcf683e0a53a2f38a9bb23fa762d6ca0f4c4107b1ae1304b5da1e205e38f1df9970109699691b3a4788ed9fc6e590a10da2657ad229ea19feffa96d476478cab107a365e969548a9ae0e34a12d60d80de3a2f247cd09309d94ced02c26caf1c5f8e52ec7ac3f3aee04ca474615cffa04c9cde4e7df2ec7c33d13eafe9c145c71cd49074c69090a7df0f90bacea8a28f89554436333383d9cc40d7017bc9bbbe0a37a82e0b8cc51d8fd2f8f6d01f0c83b508584e66b462072bf012af44f628b741ad583ac134bef37ce6d5bfdeae147c19bdaab7629c13c4862b1d90eb0a6affd0346de29a5926f47674129fc1a76177b6bc4986742ca996ac059eda52a9954a0e8de68a4acd9f7ad83f77195ed1716361784ffb8533be85a875d91f495fb3e643ff40a3eeecbe5cc466d5c5c21c33194705e265678ed4c2955fd5772fead4ca04ed491d42dc8e99a0b25f9fc1e134b6806a4d5b06631f0336e7762391c4b72954f86661ab3e74c046d4e6f45754e5457ac845ba703d9fcbd77ed13056567707532e29f9c71b3ddf2763c8d63fca5e4b2dabbc263cab0bbaa5173bb528d0646164ce3000497f980b9a036fe662b09b25728a36c4c0c926cbd2384c1f99b6c156887a2725592bb0da52ed1898500bb627b16d8c0225ab8d249e7a5d0effa50266a157c8c4d0a66c407092a297fec959c092112223753206acf7423598477f033afba0380e75a2b6206da1e2f097eac43b2690caa5a0ba578b0b8e4798a7a87fdd2402175c4525c82aed3954699bf159fc8b4e4de20a4c425411d554bfca761452fb4070d43fe947002fc189fc3fc6b96684629b49aa0939490625fd6aebddb6d54921bec921616131496b52b0f5e7807a1609b5052f66383bff43cc27761195d6ac68c6f2ecc0909f06cceaf595a7e9b82a63631e2abd7e2d831ac4fc6e1a3e396519466d161449eb034f09cbf41c36f6d6b2a72f9ee1d3d72a3767420de82646d1b2b0d1513197c404a393147e200dba6f347ecb504bb97298f6c496966ab2fcdcfebb18e2d77b6fb34b3b41e2d3f93e3ca2ffb241b73974947a1bf7096a18dbdfab90135f2ef4abf6a01dd145af04f0423e72eb37346ad9e0641e590ae5c459cada3e2a622c9d0de3cc9f419525a269d3b754e9720a891e0380569086b0efa1300e9648fa8d51ac957827e72ba5fc8c378bbbd5d36f83d6205b96bc1ded27493cc56774fc8a5d6d7ea206ffc5b5dcffbe7077e05f8e34b20ec6e12607b15b2b3fd7f79aa67b6453cc4d84defe5cb81c5a1a57a4a7fcc1097cd273ddd1c1f6a4b62a6b875f910e88d07cedf6b110dcd1d15941edbf9ef8433799ce37ea3f19ecaeb48d19dd6880fbfbcc0123ee6f153d00c6153ee83a0aed16fe63ffd6aeeb3ab315da68cc69cb4d692ac4c0e3c7fe315ac08e8921e1f13134d9e8eb908f937ad8938528681979993b2a3761e93c2c8565ca24d6291233440d2a45024d4891de86e28559538bd23ab9a35befd9c88875f1956cededc6cc363903ec6497ce7a3b4d6b5f43f99c074e13d31991c76d21a396a558a09c3735d1253e678ffbdb35a4a92472ffcdb215b722d6211532897cf051e2b184e46277efc2cf250999c18e48ff0f1f605357b3d262b76913f6822c8e4f1399b702f45e7ba94a3767886f3cae81d9f2dcaddaacec97b121eca32b7f8c405d629d36d24965494faab15117cadb3f9b11e63cf719d3d0a241b52a8da1de18765d694bc110b035ddcfaa85f4f803193b7d48679d6020bd233a7e0e5ec1b5ee973f45a5a217f42f5b7712ea62b96b017336e32c093a5f8b9632830d417e5601cb6cefb593875aeeca4580f8259bce2fbbacecf22b6e8fcd0a2bd65e901004aaab337cbaac820c3e94a61078d2f4e528c9b130f16972c824450a0ab82a38bad01d407a211e96b88fee4daa9813202f68840ca8d98d1835d3b99191add5cd6efadfc7556c0e69085c748ad51c02f73140ac1ed57b38e02602bff1dbc84ffb4bc37e14de8b0aa6817eadb146ca28d82a44c531836f88bc9238e0b6b34a71a557bef001d8d9caed4186b3060ff2f5128aa50987e5f32fe9665e4e3b8d7494170eb7d756a16752f4ae378215a13ba9dbb59abc506d6b4dc049c69867a2eef1d31df709f88ecabd6f936c399ea788fa78d9d90c9b9f59fb2d08ade97a577f170fe9944e5ce77619024fde631a952a6fb227a9dcc34e1f96bd333aa4c881b9bf2e316e1e2c60787e0dc131e8911ee3d22b59f95ad69c0961a6e7075328b00a1b5b7e961269fa2c32b907d02022ab9c74fcbf7aacc3f38605915fb8daa5b4f9786b1975e8b7db87e91d4d2719032bb2b2f2817f2ff7813a3265d6b5c444ea2a9de018053f50620bfebad266c663e3650a44efdd0b470de4b22ce0051b14691c6b9626e9254da82e76a80c47b9a4f7f2420f3def2f6275ab3602c071c3fc0de03e8e12c43b3cdbb701e3a97bdfb15048d69b1e487cde72e5c9733bea5f2e20039f846e7e1c88bf487b9d7b2f942b7efd41a2ca1cf10c3a5a2922a7bfd328d196f82778842bead2d0eb871437ee968f090e7146ad11fcbc8193e63a0f28a3ca1ea8e56eca6adce458b32e95b38fd5b8ca244c4bb4e56fa3afd9ea1364ff388ca15a2f96f32a184a511babddc8ebe20b5cf1a171f00067ff4ef478b7b7136a6be61e353a7a1c70b9c32f43bc7ffdcfbaf8cd2bbb141325f4453ad42157b99c5244a545948af4f19bdb43a0f7a87e5547bcf8f842ec586faa75b28f46a6262028016464bf049913f958dc4e7d11e5eac907e8fff509f4e4d0e8b452c59bdce868380108d0e466d3460973b61c359a241c6096b3cdbab35f393f241921204c4308e7f4bd7a63323c814bc550699ceac8412e63eb7e9b811fb388f931af49177d043b28623020f09de255663e0fd005c48aae73588021f945c6dbe5c80c5bd7041f320b8a109604b71dc6db99a8e63e5d364a619b5a15dc3f5f02d06e50582dfce9102f6c14a41c874232bc97bb70c38dae385ba310fc60a108ed58bffefac5a9ead4fc48557e54a6ddb61deeff1cd6349f1152032dba780dc5bd87e11c89e73f9f5a5dc3fd1a8611992da3f0ed6b06d8911f7bf017557d6f3a567235cfec019ff49c1bc9a0b8c5de60de53e9720bb225a5f190e68a884e6e63ee4d050049e2e60e56e2c2d6a69e7e29aec317868f8868748be66c87940062c1365d1282f76a4a845c33ed44e88e9bcbfef4cf6515252386e05e33f02aedab2a5b652078d5b5d47e2d90fd04f22e76bd91f1c748faed87459f4400632fbc522771719a02b237f47e5ac8845370359261b8318bc93e9f0d4b296d67a31bf7dc7e2e1478c5d5c14ba31ac4777c735de9aa0a43e3ed39708e670ee38253aa1c50779b918e50879a9e5b379200166fe511d1da92a79f0abd63a8bcae41ca2e19625c4ab783d9105615dcf87c5ac57ce70c18094ef75e40dea85926b6cb703f5184a1cd035317efb1a7f9b2bf125a32882fc8340b53596b5b3c88fc7b072df6d03ebbafa894aa501509ab4cd8c2c034e30476a03628b5ff3dddcef5b0d8981f1a2719f8ec337d02ffdeca7bba98f1428276329609e1fca1765080aaaaef9076a12d90b2e9904f43e2286a4ac7ca0c18ed198f0caa73a520e4362a31222298f5fc3a043929189337af7fcfe647c232bca3ee915bed9a44f9e698a5b56291ad342c454c636672efcc10e5e40e77f6f6748db46a8dbf35f80a6114fde134086458f09e3a678594eb46b30299327d303e4f026ac54410f8486cad090816567a762f17e532653e9b4651b705b294698c76093c8d8cea4c44c46e0084d6a43844cc57cee8d766e35ac114ba97329185d130d64e246050859f7d412c4e777ecf4a2557c979af105f25ae13ba7ad7b54d023601a7c0fd3d4c5887bd6987a18ea1871225fad99b43885e379c3254cc81e6171601d91a9c69f2d078d0be4c998c38a97d2d0cbffdb2cdd194408fec3d8e111053962ecdd753a92ab7f1cf39e88fa5228d92aebcc8e56db12a6feba82ca3758fe5618efda95913929547c3fc49925c0aab7aa43edd83750c7c55a2150f3189f848d355b00e581fadb759687b5a0464299645179e2cbb9f37fd1733f8fb31eb69e9d1aaa4ba5f3797acf9dc1456a3fce84e67c044a76e4f54b1bf660c08c1509229ad4ca6f4d565309d1018b19ea50b8bcf68044fac130288b7747538f500b45cff19cbd07a54b330f6407e323275a63b966e7ecf746aa97b20c7845af07efa8d487aa6a1694c16479ee1044d062144f1ff10439ecb07c28e8c597a33ceb1007cfce2388cbe01e0a13caba9240dc88149b06c3f1defd1d50ae2045314d27e54295c24f5fce64d51bae169b88630376ad50948ca127a1308aa07ac36592360b41e647f2ebbc4ad81bc4091c8994f45bbc515ede4cd1ca0d2156a8f7f3a2feea685ad6aafe92370cd7d961c96c7916c66097c4c8a34003bf6bea6df961400be1d3a4430096b8d8447e9683a476ca16757eef58d8914337b5716af02b36363fc52aafc43dd5b7339576e51c49dff9b9714e80bba0b2725a5cd7c75a68d4095ddf3aeb3cde03c40f26dccc266eb40249129cf99409d1bdd7ce7990f1c70c9500138f54ff96f6e6061b9cf02a52328708e05dd6622dbbf3d8f6634682b567fc3c39402ea436c8b3965085d3b562b5ebb1173f24fc74ba128dc424232de9156b9faab4e45f9350aee01d259c70b8776c6ff98cf8cdfeb2125b7f60ad64ffbd24a66f25543468132d87a5c99ca433397369c1e8fc2e3cc60a93eea447b47afff7845acccf4877a4e9fcb931210bd90a9da723f62e58d42d7fa512482917aa6884484b0099fa9734c3ac1575baafe648e7fe7ef06b9aedcdd1de859f048f14e52e050953c8dbdf23e59fe373e0bb7a52d85e9bb18786a47e529aebc529849a3f997635ebd8bfc0071704881e107352a39ce54caa7523edf4e6292c4cdd5d8d76d619a6717436bb6b1a18b4e8248324c47350b8698387b48e6989cbcf36c20f31d39ae34732ac7ba5c932f996db075d3d212db681517597052d0019bf4e517a27d451bcbe13062f64716570ee82ec4d9ce456aa6bdb797e42a1659102769e858684b22badcdb7fa6f6c22f6df75fdfb8a940f3ae287f005454965739e9c335213e69062075601b29ed68e6e608aeb32de8213a0cad86aafce94a01d8ad257e0cd5edb14482ed8224d8cf356808733d55031962ed6007dbd5b8dfa57fbfd0ed1686c5de8dee8cb65e065bcbb71be130a0110150f47ca135f08bc3af5dfcf9f33298c4521ca1dd234d8b920a491073ceb8e3a577ac0751f41351aa8e059bc8c31fcde557066c6f1767e1bd430822343df72e73d8b735fcc525b57d941783b925cce9a9e39bc06488fedd8a6a931add2abb2c1388b68640e5c8b12956198c15b541b3a629edaaf888a087d6730e6ea2f6299553830a40c8ac4955011e4b84e018c7daaec8a7c0433cdc02dbe60e8d8f77f9f0fb013e61b4767f9212573cdbcd5dfd6c308f9ab23ca533f77b6d927856f3ed26feeec507ef2ccd32b4bf6bfb3c694af74432cd48ae42d755989c09e94c4f846c5ffb6afd6c0fffa163a75be84fb8c4484573943adde7ff6cc8ba75fd8d7674fc118e8de11c7b7d451094be7575a276a39ff85ae201d2aafc8ef6fcd43356b81ad824cf877ef82434626b9c5831cb2eca1e49d9f3c6c3b241ae9736f2ef593988cca6c39fdd553e0b3cb945f3c500740da102b8bdb0bce5df143bdd03389dae17bd186b62a3f373bd413b1349cf7128a4d7e4a8123740d6ae492fbace86a6919b0491a899c5b75977a23bf313bd6cfef0f234726bc609a97443f01172cb98a7a03cea66cdb15d8f177987bfc3c2cdc20b498afdf4339887f67292ce287cc2ef212adb035c609e3b3ac4c306eac10938fae85a529675beba6038f9516a09973aa5f692bba625b8c5e6b38e502d4ae684dd81619b9b8d766a657e9b48c6aecff730bb3d42922bb999a33d1a620f05183558a9cbbdeff434c8edd9172d12fff4dcbad8f31c8f3ffc7619dda4cbe4f75865f18ce7d34b00c1fad91e55338d3e562eaac3634d018380f25fa6bd901dfa55c308836e67981ff354e990a8e845133f26100daa9510bb474772ea9f48383159eb8ef35a0066e10514887b11737c981047bddd78293194d53098bc609ac1421a38cf40cd3a54a1dfbc28bbd660abbf27c5590fab32899e1ff5e0bdc33f9fddb342de46b8f7c79ed81a4590c67779c8f9159ea4eada4985ddf7d6943ec50ab27d2626094dc82ef6508ca11adf1524c9f070a6192dcaabe370a4629726a9529febfe62d30ef43ffa20db10fb7187ed046ed7bef4845c8546dc397d78f887049e700ede0229368e67e91b7eba9b14b98cd92251e32726c9827297935368b6475736bb8bce3820c52385daa42c6e907fdb3fd82c3d82f4d5be807b67188e47179df7d87cdf6ad00945db402239cab379f1f6901938625127d6d4e881ff8e267f5ea03b8625b70a4a74c3bd17d0bfcf060f38c8bc9ed4bfa8b08b6bb8190bfb97f07719b2b8eed3ee0508e418cd46a99ef4cc6142bcc05f7371ec6e09da7f0a247aeae74f8dc07d0a7cac1aa75cfd6185050e98cbe5acc914896595df9d2651625cbcdc0eca06c290ac3041742317f6f59d56bbf1d7f8f8ea11e732f919430203c026c82cc923ceae130d05a7fb7fe7314a4d28c7b5196df7f68fb9a4db121746414615021f0675e1f7a4b81b17eace79aa1279213df6f7ff72ec16b418626ab19086e7818714150798e3d8b099bec2692b60654b98db31292ea15e8e9b6137289f95b465a959d240d1df9adf566b7cb4c44315561b61ce1bfb4f76b59221326a91595aa2eb17d3852d88c5470da927090beea4a6ca5532c6f4b8a54ecfb028257350d46b8a3735b15a1d8e2d3d9ff00d474e97c85fff10acd7ee4b3f2ec56b853ffc3b9eb73dce35fa83457a326026804344baf871ea2878bfa214d70e56302321f01f652db21d458335cf2b6991a1fbd64e3056e26f1777a9bda2834ad6b3696438290280b0a713726c06d87d2b71f54ba3bad3c8d6e13f0f41172fa4f8c1510b58ad7e76505f0265df0ac73e64890e26f305b9bfaea2f02c5f9d3ac2ef16b7e0afce951a453e3977137b8ff560dbdedf927591e34ea4f3b98be392f0dc6c648e618371296e6f81ef316ae17b1788eefaed257ec79203da1f3447822ef9acf2bf6b28aa119bf0b05e05bc0ab66543a25a8b75ae378de20927b7fa99814a3a94030e0b90ff5e65d95d96d56ad844245448c44cc8822602a7f02ee00eb78bda96f56dfd7317964b18667450615b6401171268c4024ab2f9c185554b7364109700e0ea084643f97b8518d4b830888fe99fab6c14e092915be4b7a35e3972608c03b0ea1fd9e9fc8d938f8782fefcb35aa80548e31c528ac77eb51ccd57d4f30d2ca7ddcf5d0809586255b67b87437661bdcbda2c147feaacfc414fb0ef44dd86c29d841398948c26bcb975a015476e5f4b78f937063c8207a0ffef8cf0bf5fe92a360a91cb44260c206cba77eb75e352b4ffa159f042edc55106e28394879d62d96e52edf852b0eeead5207bff5d53d53c82bfef7a72a03cb7d703d27607f4c3de63d40e330ad9cf0c8881f627055b256d06c58c5a735ed615e5f954e31279dd48f6f9d48162a8f5f8f1af04b05b0e0da4c2cc83458a0d819df781a20fdd27703ce59274a4fe68877858c8d377f89d1bd4c28cc8024c76f13060121a51b6352aea28a045a5323266ab289d939bb2b57fb6dcf9ffaf0e0eaae274e3c306a7086feb546fda28e5e7d804d9aac93923d92c7c03146a43229f9772a08b4b80c8f130560fa0684d2d1a6f26fdcd0f13e4b9251b7b56ea41548d4641d2890200cff9b2db5b98203f812f593fab7c02a8829be7a03e82a95f49f01187bc88f0e83f92e53d3b9979be61739dc9712fd72bf8760d062bf96ef69f3fbdbcd8304d707968e2d53424da445255c5629274811dffb25206a2bd9a36649f4306141bffb8e5f23fe4dcee76f3d6465eed1eadb1f2d32f3e3e8b04366f3ffd0975017a1aaaf3fda712fd70f7b2c6c2049ae43bdce56df27e17cb65e822fdfb0dfe6a08283fb148eb4f8a4f0c4db85ea1a67abfaaf28a29e36223a5a5d78c61e7aaeeba8f02aaf4f6a8ae146509ea40b75d01a37c357aae25a1c006c692ff7bda77660bc12a63cb4d2505365daecda12811404efc1ba23618a045a25207a53161e942253351be12c799c3b6559702534fada88365d160e597309b315dff235a06777cb43ed41d0ff5b24df1b96e555a06b0dcaa9ccf519ffd32f79e33d88eceffb27bf11b872992a46665f2fd6eaaae2dab2fe86ca2bede05d83c7c7bfe97503c67f5c533911a353a6a240b1e895b4b21d7632b0276a0cd7de9ec8345e380e20f14c46e06e50eb8f78fce5f1d582845104ab04ee639a8c743c8002854c6d88f6b98f3ebc7da963f0e66ccbe3a0739611c5d5eb4909a22f4a70e8b58e9a3222bab1ca6e7491a401a04e03c756fb1bd3c402799baac9aa0622e0c01e3396c6d64f7ea3e9c611663a1c55ff38e1a72336b95b71c78cd9d2176d86f41b9dc363f1961136cbbd2ac650bf06449bdb49c639cb51ec3182e814aa6f59ce4d701ca440e822a52016142a683d222cfa336b32e8da6367a93a671d20779f1c6cb71c8580c37bba20a7d5e6d313da795fcb0d7cc5ad883526551cd41bbf7319cbd4aeafdd3d94a56611d313dcddddd95b68e84783781107dc6388e220fac2a7fe566d6fa98d243113db383310e4d7f6e7d46973bd4d8183bd4e7b4639cc78c3c6cdf4f45afe7c4aea5029d5ff3bd0932e41a86a309afd901a852c06bed430d74d0b2e37ba0a888b2eb829f078dc06de1bbbd94f90252fac0f529585f363b10b74a02cdcdbe96ab59ce28e19e219a7a7b8056592dac181f9623fce6221880ea05c772c287465ea45769e2f56a9b080556c6df3eeb89b58835dba9a9a7e2ff53c7785c34f8f74a84592abc8d869b241bda35a6961b2702fb997813d24177c5162e6aad731283c828fb2eb7b97abf00113cc66fefbaa4f73597ccf5dbd4a04fab46040942f68e661d19fc2f28499578f6c2d45c8ce56f6a4b2b9e20d33726323777ee9789e12a9cfea2b4e851cc61622f7f62b066d835880e63e2f149f0313ba3b426c0f846956657a7a2aa60f8ec02cdfc932c8c7cca5ec3a36cbf0d4298d60598294c5466b4d704e6f97f6cd3d831e98dc18123030953c4d2621d0f6d2085fe9ef2e54f580f9633b41d75d6ff439e20b9a2924edb87196883bdc6ec9c6767ed7880f8f21ca834695ec450e092bd6f46e56f4caf3226cb15a12e5e1cb73074265b0a62ff6d453dc6308bb0073c3b306d674983bad540af401afabbbe5c96461dbe64325751aa07b23e2cf80c400336711122ffa8aece1a845f995685f50d8e1bcac003389ca36019f5ce24bf89da4c2dc6f0fe4c50c5e2176874129c2d3d5d571215b39f8a29014624500253dce5c125308c71d2ac2510519a9aac838790ca8e5872475a34d7a16f4ae30a642091657298bceefa47043a058c9299d43863f4e761264ca4476aee7f1e40b0e92d3020ba97aa78710612531e9c43daf8ba7c0d3c870ea2ec250935cf956a674f8fb35125775393fc7a4f65b8cb7db7e587bb1a1d65e85c34b78897f8471c28c435d7394b3112b2f818d4e10273f379ecfbe7f3cf3dcd11253c06fd979f1b889205417d15cff930c1897f761262ca6d3069a88e2717d8cfcea8c1ced4d599411238d4821d49ab80525d6be7500019e26a4c650e688b134359870e9a5b5a0b3530aacc880800a7d3ee1efbbd3fc567e11c461afb2585f247e408169e56a06a6b017c5c4e9bb70539df5d61b01fe05dc6356bc8e33b3ec598b612f35411b6d73e796e67d0bca186847e14a9df1a236e77a3148434deaa92125e05a0b2a090766373c7bf0591a9f1fadd36302cef644c3077000321afb34afdbf5f32761ef42958c18b8794af4976179bd115c8e7db07dff96352859fd7ad1da04a5816f70b4018a01500987651919d52c011662b42f7f8bdccb8694bfae3d3b20de79dd5b92e1b21a4bc6811c588d51706724d562830c5bd754b0e530d27339e1bb34b17ac63ce822d742e96e9c4bf7cdf4ece17da252fdf79566da0a0db82eea05d01f6fc5a9fa743c622a18688ac1f6aba014c98ed520d50bc30f01faa885f76e1a095fdf53f1f8fe5bb28293607d01284754ab67d5a85bf49d25564f85517a757283d211e58ba4a0c4741f6834ecceff8bc1bcb51ff48527e1559d2cb92380e6b3b79df0c5d487c0398fbac4e0b1aa664b374f19183c1bb4fb502cdc5c87706f025b4adb9962e2c8fa158374a85ed01fcf5b0ab047ad5023ec8c6f6072783f75ac3c5c0b31fdf5aadf494e5f37ce924ec7f4e738f7cc1fb80393502da779b4e870fb45b9f12e4f661e4e18db2ab48291669ffb148ee4b88e5b9f48e20287a6e4a4d3048f9d2dbe0d0d14334630f1fd9c43a42aeb0f07f34a23fe53411e397163f68d2e2624f47c6838c68189efe982bdb96b23f74f845112fb5978eeecb98eada0214ff856eab6c115b62a3777d1283e00d7ef5ebe4fedc7b1d32d2234682f6486dcac51d5fdb22b5a2134d977fc3a2755cfec1bc49f5ba7de24321ddb35ea76c280cba23d674a1296027764acda8dac69956aa0e22a3741693babd0673fe21c673be1b3e0c90a11e8194fded28788fc2437beda62bc7c2b226a3f3b150d02da4b8e387ca6d9a4adb9d9fab6a0e1aa30b48719fb4d084752dd0b28a789250db80c5855b6b9ad20538c04f2ccde0a2594e38bb06605bd97c51419c70a0bbc314236498cd14816d877a66180b0a87b45b929d6e052af7b6aeb20170a485b7616e5ab8b64baa238ebf933707585a214596072a63c1302fba98444761e0f50042cd10dbf3c74356ea3a8cc641ee0873f633927da5850e4e737aa90285425da6c48ca2ff093846a9e046670136c5440d75a0cd892ed2c1828c94deceb780788e871e09639193265d36c10bd06ca29bb75fd6e72813c9f141ed0b006d8221c50e0fc146ea5773b33e33b4cc281b8a93aba40a7d19e840c48ab256ae4504dcce4189fac52779e47412bcf999be9938f9d35187b4e0624b33cad72304d929ca42a001d490442d4e5a724cdbf96317fd46932a0e9866a121f9195ab0cb9e4a1cd8adfad8aa11e391ca88aa3ab7ea0b96405d33c4aed572a44ae9930fb2c77f0c66f628ba5e8559039185c588419ee7500af5ee40f6e356615b744f9b189864dce47472ed19cd9b6e13a1508c6e9997529a53bf860e33d2f75d9916faa4578c41f36fafd153d77fb88471435c93e0eb5ec9cac8bb491bfeab2518bb795d8749c56de69d5c9b5f6a9e8f913d2b1e04693875380c1ebe61931533d64d5af6b851115088eaca43aa50fd31f85eaa477acf3fd135849018beb487ac4f44ad3e27dea4547222326f9714cbb87257471c991dfee1c75e84f73182a70ae7a32c280c936582f755efb8c7609b26871390baf2d14d9028fb7e3e3d6642c37289648173002e6805694e692e71a4f4383a93a1be0e77f641f7aa2ce1a4f97a5be083da63b5f7bfbafca1a4f69e493f3c81c41d83b7f97f1bf08193c504168eab631be0d69abbc0a552927642ab084935c0b22000edb856d6b2a12d30e82340c5bfa066af20b472be1381028fd107c6c2c942d714e05b363e9443e9ad255168e8de1ecd7fe36ed39643259b04c450518fb0232ba963e014a20cf9fabb14e22cfaf070c681c9109b6d74cb839e1a80dd945201b1c7efa8a92dc2cac41b07562cce6adc17cb75f6d9589e600714c680568759a0d2f12a302c0f58a2a786c3b60be8114e7c4e0f8868182e83256d18c10005c96c543224d8ccbfd208128e30718622430f7eb9b4528f5db8f0338539560803c6118e3b6151b31c4c4eefa101d7b5405c026b388285bd0bd64d605d934c2467906fc3123882e5d38ab45ac2948e6d48a1377e0bf3451fe8812a5c19fff7935d500f9f7e9dafbd252abc31606bba332a19ed43bd68ff02d3de999655819655fc1aaa9d17dca8b40c4657288d1dba78a8c9502361648fa4d21491d869af54cdfaf428acd12f79d3ea279ba24d46d5205c550d7fbff03d3600050515ef0a59fbe706698542ad815bbc1f65fe171777f052c1bfafd249640a49ff891fb103824542de0742082e00c458cf4c1be876c7ffbd21518564c1cda78c8939bf0e92b0cc11f3eea0f6bdc12846b55cfb0642ac893faf15f393f4bf642d2411250de86d73a26dc8f43692821d17a88c10948fdfd2a7158afb34250a6ed912dac1b652d41cdf433360297c1ba4d4cc9504a48ce49d401ffa4b1f20dc31cf64a15b6fd73350b6ac2ad7f3cc66b1259349b3e2078d39e689d8b715c13caaf60a46618888f944bbdbc52a36fadf3ddac210b599eb02430f25604cda2383f8d73dca910bb734514a4d0ca14d58ed3b70ef5ac092eb55bd261d9842a8e55b3d3e9957d7b49e54a00095d5c49981d82c81ceaf5baedd32b051d957fddd3d56d3d715473050b1fe188c7e44af71b6db5e09b162c9503718e9c1adb5353464174d2958257a676ccf2cf02ef0fcbe54059fb1ac3ea16a70a2538d29aaf58da09cd6742c0d44766a8f0b267bfaa03ab86583bb50f2e12217855aabd54746748e5a4e817bbe70537106fbb06bcb4fa05a1ea85e23d5845636011938b7fc67ae6ec742f399c8167780962c32e45acd1ee514e4bf787fa1c6e2c5b931c826c9ad3c31ff26feae0bf5fb2ec8b83c6553967abf5cdd6cbca6f3cfc9df30e832994ccc9a24c428ce7bb177e63f8cac353fb37b16f65dae8b54d88d30fb5d7ad40597bd5859f92c716594d113c72a9ea73cd79f52e8628fa6011575d6ede32b3159b150b00f16ccc0eef9ee698d50e002aa3123df19bb98d6aea70fffda408d0edc4f180908cb6cf3763adb230984bac84b57c4a29602ac716e664341dcc98386635e92e91c98ff5a03c00d21f434ae51f3291592f57e1dbd9626a91a616de99fa73cd5995b23f0bbcbdcb0599f86829c040c240d7b987fa87b399a78732448d4375ee04bd43540f3a6d128bd8792a0608d11c3cc1473a6f810ada1885cdcb76255713c960f4e3eea5f6139ba3bfca46d0a66b7f74940aaae8ffb6aa15b9863fcf21c1e6d2bcf5d99c5ed521cc1c6cbb104a3266c6515972ab84db838917773ea411a353459d1c0314c9e84723829ef8bd693065c767818117da50c02572e75c43d756cb9c3416208e8d8e024e28ae35836d3dfc352bfba29a3cf366c1365060b315defe7f215dee6d0eb8c301db99c83fabffa99f6cc45edec820919219cd961c6290c263bad0fc810e90e358800e68c5a78f8542969c38032c7828a44e472cd0e5fda1caef30fe080e4ae2c553a71351b774ae0caa3f1ee3d4393eadb0eb3e07706de7a8617cc80572e23396fe2b40e630dbf87034ad4ae74715289e55c574ee698363ae490c4475f87ac4e8890108fd5febbbb19d224e2a824e0255eb37209e3cd40fc0355e95b975dcd2647df63d22b5487acdab0157567929f72362dbe5d114620725cc936687b18b37760568cc12b68bec6b802c7089eb07826c0534e849d92d26bfb714d53a3f628dc4953e61f26a2543c5cf6bbe14fe2946d2809259532fb218d2d0bb0df9269305ceddad87905fd5b281a15f9f54bf335b2215e21882e0cbd777e36a5368309d63fe68e51a17badaad97635805a7a7456217cd5eadfeaff67cf01f50413c90b1ae53afce07cf192f8f96b00701c4d8a7dd6b5b8b7670141e50ed52eecb890e8a3eacb5c3e5f3e57633b3268174e3ae7a24d1aa508d92f385426dd3e3d94e78288ed27461f39b7855dab382425ea0b08a2b7b7159b07d71f84deaed96d0d3b0fb8aa9e33d1b77669dab02fc7a7a6240ef52d08572ea9abd8ab706d8c7af4d6bc3815f6a43b76e85bd3cd2d6ae288ccb834ad1a7198062b79e6d0ed99fae766cf2853a051c5b12308ddd7573a89dfb42655f3146ad8ae08e4995832826d4a9ed767127bcae5283a0fa8ffad6609deffc46589216d3e06ccd15964394ec71888aa","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
