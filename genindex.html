<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"90ea399f2b8cdb228f9e155002f29aca1c2451e341839074826391be5b77dad67985e285a8f042d0e637d9964ce62f8d377d5474a204935e194b1809e9811e3ef3d3711c4245357eaedd813f0fafa65cafc5fd91720b7461a70bc71489b8268804ebeda3efb7b65ff6d20f114e8ef8e97504ac92a330b99f5641db78fc3cadb2fe7782435a5af7e34b83c970bafe92d6ebdf6c506aa45878aa47475a52670826bb3d53a81615df8b119883e2f2219c63367db21eb719ce644a9b531f25bc20e3e748eb7adaf612a64200f972d08d09c9d70b9e06da2f3b81950282ca07aae30def5bb5e5fc202d123491dbdec7ad349034616f6b30bc9b2fd25b7121d5990e53145f40f692ec3a2254161a75c312a7bbd9649c82d5ff45b17286208bcd6b13f07b9cd596ee8b887fdcdfc4620dd6b13527a33f4891b3fc9745052ea80471e9d05b59291964237c1cb4f1dc40e61582809a5cf320a2016d9f7f3e3b12d194f4b0f18351d0884cbd6ee099dca3b1e9ffda786e8e38b72c912bb1a9c20ddbc87365b0ebe96bd2e52c00612e1bc5f006876965e4578fe9468b2a1eaf4eef9009e7f6942a2d9b0900b2d0ceb363d1b6b4c84918b16a717e22d4f926e65db319e30f2906dfaff08879dc33736569e439bb20b904766f1899a456c250255db838305d423bb4b68e4af8504b4e710ca1f7c158861a9bfddb70d21c7a002a5369bf5f1ccdd75aa5c6e9d642bc35df5b5676567720bbac7c0bd4acb6794da29aa7b4f479f852a349a7a124d37bac5327a188b9af51b4f57d24fa727adc44ff9482d891499c4d6fed6ff61f5fe8414c6545c0c5022f61fb68da2c2d6e752f1332315cb5d2384e3cb8efa1c0338c98b25226285c1c3de62a0402a556ee02fa0bc958a2ded44b3fb6ad0a1841471f2833c0e300cf538b75359be9327d9da9356039138789fa03c98ccc58005830507226587ba64d1578bff5a5c30a4df3c4dcb2a438b588c4a3179776d89744cc805eefa2f8bfadbb8f31a8e20308389bab92fc0449694371c683585d94f5027f3ccaf2f0e7fb19de49a21b7240dcbfe81ac90a9734949dad19006f7ebf576f5d8a4c061ff4e5a3835da6f4616c6e630357ac1b32e136c177a942feffec5dda0261427e3e82d2c67e2b590ba603e73335250bea72c0a4e235e0dbef2c51bb3fd077d620b91b35247ee82c2bfdb45212b3cbe9e93a06ffd5ec78516dd6549c8e03706a0f5e248fd6f1bc8cba1254967f8f2979c3da21841f5665693ac64941a36f88bb13ee2a4685dfc5deabedb61a97a592751561569987c8d1a60cadf483d64f8183ad42fe143859a82bd7a2a4696056e64384aeb7793f4bcecfa2ca7c0a94ae2c57ce71ce88cdc25c5d745576ce5cdae66b1644b52d60e3346922835cf699fffc9d2a3d27dc992ab6816495c04f84b3d6f37b2c6af270b6bc7d8869285531219788bd93b3329ed71d810d833a157848e996d8a86d6a2ddbeb78f4da1035af92875d32fc475e57deffd87f12bed46b4e5ee8ad4006aa41aefad1341e10f8389dc67b31d91e4038290a090d543c4a1d73fa2186e597047d8343f7f617638d623d0be8282b6f5e4dd43f77277a728897ac6a348f91e7b7fcae11d29aeb038fcc774313f90db14c38ffd23fb71e2d87e16ef523761cc39b8b4e234ee08a1c71cb6791b17b9d0ecbdf83802da2625a963f62749713b489cfc2ec1f0bc25c410f1329dfd3035ed14fcd8e374beadaeee7e26905c401c2d8fc084ff9dc1427c38b6b2fffedc29b5fddfaae23279ad6e8b180559a3368ded4c068807ffa14e0e4d8099eb55117af83a30fcd78ffa91130537bf22d964a10159c8a33abadcc6de290f7f04e8591aa9c359b81d30773a5a00cf78e4ac983c5b7beff8fe80afd2c6867cca85cf378121f5eed97dcabcaee5556667bd2206c54ab34fb571bca564b3102e6e550f313c7c51568cf8af5b7bbadd990929d924a2cf822501a8ae5e22ddac873ac6cfd6622dcce6a0767de8fb192a928942fb5ee1677e7346c20ee0338b0a7309986eab1274c8270e661cd7c8c40b40db54e833e587796d2013a99c1492867269f8c9694aa8be1a1de5d565689eb603832e6c63ac6b468ca66999b35203889afb915075fe4810ed1551afe40bd2691959a7c69a049249d17bb21fa50b70c59fe7f1e1c137b7b179f9d3c7f2e73e2804721650c90c9eb64cc1e52d4e42bbfd45d8c4280b9822db0da04de438e5d31028fcf8807a388e38fb1b50b1a7d47ed5bfe8fddacfc090c96006a8721d1fea55b946b5fdbcaf845b7ee88e4756312713cd7c7a3043d091da38eda996d9024ebaa1d479afbf6ff06179ef70bc63481ed8291500cc7b31744606240a428b789714d8ab028a9db029fb7a0d97a47727198625a65e285d561a9dd751289622bd9c034618418b25cf8acd3c3b6708dcea970a6e89ce0323586339d529c2210286648bb4e86d431d3db50501464ab0a39abecad095619bf5009682f221e6a4ce5c3ec58683da90f15248a6c6d2f67bbc615d2da01b3ae13aa6e10fb415acdc837cabbbc6ddca24c586c7c7464b0b28cf2e35290d0c3a08d2b187a54849491d9d10254d55830663698475737d2f6202aa131c1de9e7c6a479606cd9c7f58c1ae46c8e2593531f63a81a509837bfde3cfa83cdf0457cf6e31eb254860cc307b42a35d80feebf861bc3a48147a772223695a573df979a2800ae7f1c422da3c805e6014c15da0509c46aefb64141f4708a1f65978e8cc253ad96aa60c1467cfef20a90f13d091727ae28fc41a5346febd7eff0543b74ab4a459ff4b53a7839bccaf6220ed1a2c20dc2689fc22f41a44e84d31738aeb98b2dc2221388b512d2cc410a33cf672200600fff4beaf8539f465ff022b341c2a78a0eb0beec0c854a1aa25a6b9c49233fa81277fe8f88257fa73cdea0872a8580e1bb641c8321ad424e29942246576b7c890ec07e8180f341e51f73da4122ef87f57e29638ee26025567e086ff2d46822cbbef77040caf389444cd9b1bd9476ade65a9b20e2894781cb492a20bc98f60d7fe343ac572a6a04cd4db6b38ca98e6e6b36f245396d71d4dbb515a7c089a99ce5728d5d61327f65f0a57a358f023345a982ef3b633b7f3c8c52cd23b01ff1d6079d7b907f8ce37fa252a9576332281ccd0a4e5f791426db8e76a39a420634b8f2603683410988308bc264ce648cb1e3896acbedf390c40520d29da6c8fa6ee406b5b8b59febd14ef3e1dcfa04c1aba67f5c31ef2a5669a458b9e41af2307fd7f2d879c4d4b7e1ebbb56deaf6b713173b917d05babcf54dc8417c31458856f9994c791b0c500e54c82ec6df72df18a471aa29c0e8a9d3f3dbef69cf4f413e2ad4a17dd558135471ac3e7163729c4e2c0d0d2652aba78d50d730aa69c762b101f38755a69735af5de738fe13fd6935492c59a6c22370972053412427a1496102908f9f24f7c120650de74ad5d9c683be1ea731996eb3748fb06bef6323d1b7bd574068d26ed02ad39384411f861bf31e574c7e9ab479a851922c808bb715c909748078a500024fdede87d6194f65e733944131926bac925c24fd45c3b3e13e7322b87ecfcfb4e67f32ee4940b019786b1e2a1bcfbf6f8a8459a01b3a7640d9850926eb3d0b758b63c932627289e2851096e132c71b13b610365bbd1efd477ea883eb51b7b128a11157c8d12762f47bd4e94a862711256b98f00a224871a3710edbc093550f3848b781be828173126675854b1b1db066693ad43cb0e168a0d24986ea01d9f64ccb5b8fb77ff20ef65da394f92738d4ef6aa1f594387721c638c7acd9fa4e7b3d2c804f14a2d807f57831b9c4547df795a199db06242b3d8db17bececec3efdd826a8937a26ab15c737d80e535297ebfe0bedfe05031a4f64c4804d28e9fa669e5cfa051b4e7359154f9a1f86e410f029f6f2df74de2de1a6acee179dabd3a2960862c0e2e950f677e4673fafef148bb05a406b1e789ac62dcf57b114f0862fed57978e92f41c018a6101ac86b51180fca370e3621d56ddea0faaaa86f7b22fc4ec5dca17d526f4893978b87a7207a21769533697786685e95d3939f4d97d9458bdbdd99d4e727a4fe1f9e8f39ad3d970aca91198a05466aaef718c46ba8978caa4be37a74866d56104c54d8b5e2e709e6e621674ab8a7154e791bb25e988660b42e23e6139fbb822b369db127b17a5ae4433aaaf85d146257506d4167b0402a77af426a686966f39bec1eae0ee69b69de2d84f601442cb8e445718b6de1de34f721198abc521c23ef8f46a3bd16188460b2bb361f4664d6358aa8bfeeb515058ad9b0f1c55a255961944ed29c96b325b6682e9b12a6649e573dc72f3ce9efda942a50d26f4499e31924b39922c52916fbef2f12fe03491fdb5e4d3ae9b8eb7601eab21a8b6c65c60426d94983fc9d3b79b840340dc839fb65ed6cf7575cfc8345e9e41caf02ad9b1a6074e14a356e6f59039bebb11b8f05d12767a16d29a134acd4da952b8ffab3925582765454c4af4e673f0cd832d2d5971514c5e2fafb7df206c89a1697f44bce0e0e49f23deb13c0144fe4072c70668de821d5d7f44afc8e675a40ecd63434c4592aff2760e34063a7a38dca898d1ead48e9ca08bf2a7e785841096dbc72ee24eb24c92f5a3a5da6fac411fb1ec8757d3737b5f47803554c9ef4f4990c2d7d139ec58815d2125bd09c581a94b630d4c06a342ed2e1dc030e0cea218986e1ffe85637549a14de0008d2d0376252a5c46d942c077a90e3ad89ed0ab391286d39748df27166a78abdab9c10adfe42ed4a5faebcafe505b7d8d02170b35051b59a67ba10dfb2921ea892f87803a2f561bb473cd863e1d0347529f3fe726575c8b91ecb2fbcf2b9cd3fe3c8b62944899c530ab1b302d8bb9a90ac52a911a139c659763bad7a093847fea5b39bc10669fe933c3733f4e903db173d0c0532b71cd6ee8cf467b91c10a113a08b90794b4a0373b4658317c330045ab6c4e56a4ebc7e01053325d68ac98d07999da2ea787cc51b505dfdb9b8f452a591d4e15365c03260a251c1152ee7ce52c0d82090a5ad3dcaf8bf95efcdd0332cf63ffa2e8c322ad12ed6e0bb37e03e7fd05a14d5b5c0dfb1be061106b705c446e000fb2f66603fc027859a69944b09baf96a91f4a05be1ec0e6aa254c5aa26c63fbaa57894e251413e4527e2468f6d0bcc767ec6c9cdf685c199b5ae3f78f88a62c9dda541c34c3d7433ec5f03ef1cfc288755d6a97ce116790b6f6013f7d2e46c4c3f3a75731533cb41279239331f1fe32852807c224113ba997c9a46ed0b7c1ebd258a78afb4a0b88f7da079e2e514fdac89a656384e014f107e011ad749a6256886bc83c55277c6ddb9b57ab8c4c3305d7bd67b6274b810b11f802c75e588de0fd7a003ab406a6a5d14274edd4355b3deaa8eca82a06f6c54628bce0962f6d85666d01b1822920e87b5ed9ceae55af82e0fc4bfd04cf0d10fef5b772b258efdfcc41dfa22b0e95fab7f46b477a2460696c55b6653dc7b6432d1590f9f5ac789db1ba9b4369ea650cf3f8331ae7134e91aa8357bc1796da7ca87df1f3de35b873d153308bb5c4820b3dfaec06966175d076a23f7568fb1110e0609be76b1d22fe7ceec5ffec4c0d972abd0a2837096f7d3225b697b25730225b02e6c6dc8e8c1bfbde0a688b8550e184b369ce5310e3c193bebfc6532dfd1a1b75a47bc3015948c6c43afd2096fd4264310d51592dcf5d2c1629b2e4d233979d7dd6742b90a8701567e573cf40f99912d8453042f480710060caa77b94d93f051b9d388b0d09dbf966e784642de299ddc8c4086aad79eb49548aca4b09db703a495875e2f4d84dc6cadfcea14a79066731eb88848246c353da0d60084d51f6049f1ebd32bafe16de1f23b5c2d83591c60d94c62a59e05c603a0364f308887fb804649bfb3e9b26e882ec9f0d0df034c3747b3693af813f0c4d29216dc98f8bd25c6542cb98d00ad56e43ff454114e94df9a112919924f43f9db5f55fedeaa053029b6f62c26497483aa07582ff06e47999eb71e75db22095987870d45e7643ab54d6ae5a49bd24afa00996830ec81ab15692b9dbcb3b044ae5029cf58f8bb48fac3f79bd3f022c013f7b563c0fbce8dd8142576fa3eb0367a7cd762c7486ee5f44a31c1c2912c78ddf147d40bc00e3e55d079163fa5efbab1d8d959e1a8da0ba5dd86a61b5b482c9b01612e8ae40e7bffde56194ac41c61efa78373e04d19aed3b7fc4f4ef2d6b81e40dec5dace741c6f61707ab21354ba7c99e1b7e25def930c2ccbddd53646cb5e95629fc45b0997d968991bc22053ce1793da0e2d6f72931140727395d8312a308607574991325109acee30580a60ddfb4579d10496e6f6cdc01cde41f89e619395ebcb413e3f16d8f067d1f6f459d539e07804b884485a07c2962ed3567b07a04df63eab3fa2a0b29bc6668a9b740d453001a4b9225a7371c35105a74080cc0155b59983ce90903158d88f2f3c9f0d20e7d2b23d1466ad9adb5b9f5d61d88479d16f0b2290431f2435732cfdbb1683bad446e02a6a05e136b7e1cb9595fd364cadcaee70fe394528dfad8937dc197d6f14439d383cc2ec00e08e921a60168697dcf2dd34022d9628f78c670dd28fde096ce96d07349ef9ac62dfff74d358f7063b57412658031a824cb37dbf17c997eee0ffc346bc599ef07c62fb0cae735153aee959a318752c69f82f57fd2462482b73f7b03281cba92bcaf4a224b67378c4726646bb4100bcee039d13bf9719a4a68406d342e29c63120270381b6ce4668a0c76d38377894f92f1bcf173dec35503ec2d945933f54916e60f5eb678815e6c5ee3561170683bd4c9d85bdc57e3c68804eff1ddc1fbe64c7238d57ee48d4644e45c1f47fe142e21537b03700f3e1ef752b6f478b100916a03057fbcf1c4bb386399937a6932243f1bc4f628fd4d430d6a89662cb246ab731b0431622e6f2a549d6af319f5cc2df3c4750c42cce676a8e1b9d2b16af91e76e5e1f058741f6409f12c187e98d903c9568d44a6621638b9a33b6c3f5cf67b3fe64c0ce42ee1143eb4853c78b572575904f62a12d7d876167d90851accd95d727378368f97d55c0e260a908d2b6d3a78ed8e2565f971b25c686a515a0fe0e89085bbda0f048b9c445ae1ff4752767bf67bca5fdacc82508170081d0527c9502dc9a50d6279acab7283a251a4d4260551d594bd1f8147529df244e4a05c51521bb5ab1c03177cdaa4e3fc923de5b90d411b1e81e6eecee28dd71f62ea8a9eed250b94ec38a8beb16fc9f70c840fed4951bc1de4ba4e29b8baacb216dd52e49d29ecd86294111ab1c046713fecb8d8f39a6d7b44277231217c3296e06e048cb9eab533bce84500e3fa3ba7718f96e7eebe2d0af3c0f6cff3b84ca5ab9bf7d2251b14f3faf2495a6adcf6a49932aa6398376a227acefb076c9eeb5db209b4f6c1508b3f2cec57881a3a549161239908b6419616e9bc4688cf274846c95ec08e807c4e5185a0aec27af35eab255a91edd1d6472cfce72e661801ab403c8a235ad519d8515575805cd1bf31681e128400bdbfeef800bec750aa80ce6adbc38dc9218124d2944b1a53d6ffdf25074ab044829f716b643da356b3068d9b489a1f9911aec63548dfa01b5114a5dd690acc213ca3f5814a21ed29c6b7e660cabc5f06b7b2d147a885135d4d1f11177059c761c98ffe7062f7a0cb6d48aba4afa1dceb0f18dbdf07903b6a81cc6a7c749b98a02a08baf32711478e8174578dc0de552c0bdad3c549c09de550d5e7775ad9d3b3b1de3eb217b6f9fa3a9212417ad0491d4474a6c19dc11fdcea059effe9ccc67cc93be6f7fbeb19e488a301cece84dcb76d069d754f75b1195441793d6d300fd37f52c982f82f2c73cee815c18b3c47d6728213201c784e4b654a8d7db60d6e2dc76b37b6c9528d118cb4ea15fc391b1f8e96954ecaa98ee11dc9d6977c3325446bb0fd45e79dfd7683a0b3d79007ef8adc7ef741b5daf00f5e1e30197d13544359dd8df71fdf658ccc89e290fbf400020ee1c00d71617401db0dcd28e98315c72d8edec9b8b61be86fb3cbdd548c28841a2c498a1b77f86b547b1419d22f073e53f445ae7068851ae9373b3c4726c6d5534fd8e3f52e1498a5308517677dee6f80caa2caa20c5b56a5798605c3b192011794b48562e590a31d1f09a082ab4c9ff78b09ff711955538c09163b01f93b6043ba36eaf5f4e16bd845f65566a106b6fc1f8fb7fe7dea3d866be396cb13937632e7944246d0057ffbfa8537b035f40cd9b93d174f40572d43c0e7c979e132095f915dcce4bf00b5f132079b8c00dcdbb3c85af521a90e053778acc9f4968a94f6db58067dce6cfd86a8f3ab704296420a2191b0e21fada63bca554928a48b1ff092b769e3d91eb91cfdf55ce95030ac53a4ad477e8d846f16f8fcab5ec61bf784d626c2d9303bac691843cacc772b329593cfd3ebd39558a007cef6ca71e4159c08bac01a6280a9ad20d97021262e8045c8d26a615b1407caf106d9b591c4ce6994b1b9782580a086b8113417e33b080c52beadcabb4ca36eb568d4a7cfcc9e16b9fbdf52c396a4a8319d6fe8e54e8847552ca58262845cb537399c840963acb2d6816123642b20aff4bdc69e601b2fab51e9b3ec94850ad33fc3d89e88f07860245144b62861b390aa5bb6d7aa3da160669eb05bd2c147309d70e9110d2a17847297a6cf1521b5d18ecacab75d66d446262fd4a747a9a7fbf7f75fd536fb9b18ad03fe93766072fc0e42a5e9d340b851e40f199932e4d729800a4be79561bea9a97dc54152e66f2cb6b432a0dd970de2a0f77c13b4de11c6982c3bef4e2d6274a54afc84475ee2aefc3a8561ae5914b2088c6e07fe9176def758c31612ecb99cba12764c81b9eb82cb07886508566e6aecfb7a3c9967c28ad3eb6bc0c46c0f9c1e6a82ef4f6d0c1dfac09441a7df230cb133523e299b105defb7fdad1894acfd2a32d741c1442c2b8c71182b8d53807f49c6412acd01ea17d6cbcba2cd611a2509fb8e36d8776d5ecdfa744069bd9ec6f396694e3dda422d5e1ffed302b8a1212d272f29a19f00a325e69c5e8743e49b4d98e3c2a2c5fe8024b94d36354f829e24d74fecc7a01c26824b3a906d3af8419980d18d9f77e9b2f18821775f9905f7571b3e008201e4ef34abe004d475db05d5cd98adb66c8fafbb3a8d6f930e93ab285d79e63e7185e9c705e5912b689f13209b795b71fd31d9b2e6b0fe7fb5373490dadfee06d097a7688ab5a81e1c2725a619b53440bb274ec56ffe98fb3ab59e200034fba52d3d69da49fecb14c2e3f50eb08286600fda68283030dca940e7b90ea9299833a9abdf5b7ce9b31003b530659b4eb795dcf88cfd315c53f9c430654fecc8fb96ec34a8293349d0e132576360420f67aeba94618511b01bc7fb7a2e49a48ddb2b594a77ac7694d2908d3a25fdb2aa5a1174887e7ac0f8942ac393e388d2f45388161ea5245b1120c0037a24a1600d46ac21c9fc0d82d0ea626ce3fbc9cf3419e49a68273616272aa34344e0f07d77f2fec13d7e65bc8ca496ace51909c05aa79193120dc6a4a19ecd99f613d9ed8c8d19ff9148aaaa2a2fa00a3e930d124dd267fe856f148aa5a0eaa54ee13972707608810878ff9ec6dbc75e75e3f5e590600ccf44959ceb6c301bce1083ddd834e315a520e51a30e9be8671c22e5f98db04ff529542b94b39f7495a52ae6553bec26704bc9e86b88d6d8b2adc9750301e63046963697af686d554c15bca7e509380da7ed9906c04137bb6285caad93bbce369f231cbfb5d55a83b8e9de704a5320ec26f5a9fb9fabe03a1cd9d1122cf9354b4df75cba3eb3a111bb9123c13d2472e2380b6558ec06a191d67289763887cfec674dd09bcd11deca69f744e2335bd5a88275b02c72c9cbd64a9c244f888feed24522b2a940d1fa71afa075f5b62255d45296eb4945e35b4615248ad046633c8acadd0758e5db11ed6067708156d403020eda8a57bd2dbccf498dece34238aaa1106e4c3c7c0364a71f30281163805fd3b7f9e4ac80785510544900fb0e4b61aafa3942490763ddd0bfdd3d6906983d666f2047324f94115ec94d7829882362c949b2006767af394571de7cd76fd87586663e1e4770132a36af4a95366c146b3b1ee5f0fe5a2c8d28afbbe4aade4998e5ad53ffda9167dba0c1409118a752c20efd0990681f57fcc66edf56ae495b31d3df05c3762e32e01573bbf13349c89f1071fcafaf9cc2f2b0e6f6b4aed820c7eba5d74d7deb923190a035fbbe0dae0f311759d1fb555d5ca1c3e1ef595d7222eefcdf5de0fe11c33fd07c8a241f692acc89daf70df9a315fb13450c62b62a933e99898f1302df62d32d9b4981e86f7b18907985393273cebc6c48c6cf77e005464d051b7e58a7050f7ae1b078952264d539371992cb2812f27e66de9503480d5e63717552144ef730dad41a2be59047c647a974d3b24d25d9ac14f183bfe0b9133b9d8ae8d9201da42ea72c00265ebf6eec251392d14a9c1fb1b643970f591a7b1c6f3d9ddf6fc9e3c3bdc35a5d19df3beed6bb96c7c43dfefe86c2d0a367a5dd03a0592109e7cfb1ce2652bb9e734a9f44cd3e6ffb2ee7e9036d5792947166ac58d363c7f8f6c19079dac054eea185975d3b74956751759ad19346f03e3de489523a999abc76ff1c84e8a9b0ff1d1105c14cd360ec552b224fc8a0ed3c44f88867f3b3ab9ff0b5c9f936f46176e928973d76eba0feb0f107c08be92c725efd5b8ab4a3c70b4bcedcb6b625f3808983fdd6c09ee17de44c93d1d73051774e04a4904d77604cadec7adbb3a51f509434a4ace0d029ed3a5787f92678e028ea7fa57b38aa7a962f2be1f06011970873088558556fbf14161e9522d63dfcc46dc2b91ebfba72aceaf76d11c899dfe2970c4079110d6930940c94a491db385774965122e7992723169a75f4af4a398d7a99f9597b3a8d19e3633f63936650b1d363e0196d3cc7a4b9e2ab5d614d179e3938ebc30a4961d91a5e9481435830e88a084e8f0425d4c167f6a693787771dcc99eac8945890273c147907f6bc1bfb6c1385ed1841eae21c6c0532a447d0e1073bc5334fb7200c6a6e1fd21b48aa414cd4794b84ff185be50720ca2a587bcae3ee7d655ad64d8276e527c2732571dbf205d882c8639aefa6e7001b6797d308a16832a4aa8110b7f27bd80e002eaddf7a31310648763ee9e4c256e4278d0434ab912cb6cbd0572a606c963656346f0b8dc10572d4ccffb253dbc6df955252d82c006d1201231465625111d9b7aa6965f16bf15c0a4cf24700fb7c5fe8f376a5158907a04dfa9cfc9e5a529c2e2aad18aec10f643d450c4a662d381279c9b32e211f0f9aa6b7b01f13443dd3f8d0d5ba9de752c6d2ae2a2ba50ffa27f28acb5cff7e22af1460e9a106693c526ff1e225d1ed642eb660ddf327e3503e2e52dfa6d930266f3ae03a22d5a6a962db2b5eb4c539ebab049ccf66062ceea6b5ac32c6948a9beec2fe9b5958d84c558fd3bd0fbbcaea1d430f39b6008bf1dbc38c2c7a7ed7cf6f09a99352b9558b10882f05be71ed1c57cb44d46df3e6d531133daf3806638f36c55ff2368d4fa29e12512ff20f1be965732512b0842bf8275e17d9df2993f09e7c2b7ddd2b1a874b3be5e1cf56c3afc0213a50ab77101f30614005212c0259b317c4607fffe0455945cf9adfd3d6bd48622bee0e18ffaff5cdb15e0896a432e959e476e17e0d7fa3417cd301ca9e182ad2240a4cc5d1124886be335ad2d772757a72e146a8d0e56b5b0ead652c3eb2cb58ce92ab3c29601830234cc22340b90a332e8fd516055439a67a12939d2a315e23c97db02ef9231e9032f6500c83d01cbd79e9b56cc60f3fb227d082e748e8d72b8d89913bfd30ba4e8deb204874da0e7678fa079501b895f29e19e496ca3a0f4f560616b31efc1deb266bb86b7bd8f64a3455c1c81b4b4707834093ab117de1c2e9177516ab0026179957a1ed4fd00b171aa096909354cd270ec5ee62c84024d0352ae6a7f27731ac78d36b82fefa7a757f1993333a9ef0fde2cc257a1e3229efbfe6028a89dfa9153ab75ded6a0bda64f3686f74cffeb0f441dc98ade26cae0fe372075f9386a56f343892cbaba3fafe5e7448bf5d0c51779f1fc46253d20a964201d1350470f93d79b14519620bcd8beb12dbbf70407cf7c6909497c515e54ba7fa6530cda5869117b37bf40ef5035f5af99c1fc55a7cac4ff6880ecb0ae61800d01bed5f00fb26efc686dcadf92e98bbbace03c309bd93e8369b36907ad684d0775ca41078d94b636a3a6a2b15f40b59e81e35f5ad1f801e36e1058e004c301fab92af0ee9980c7eb1586db5750e4dc885105f44b4b85cb4dc1c8aab18f390da86ae3e6587919177f491c1b6ab5f5299c6f4e87f075fe297b2d7a90279421c86a6cc1490661ee005e9a009f393b3bc301a93bcafb22abea44225a91c5ffe11bf34175533150f53b9b7154c3137050044d933dcd5b05ebbed3de3c1006b8b579293c4d6d0358cbc2c0c9798965a53d0bfdd19c9b99e4197550d82979488877cb5417fd58b9e02bf6ee162b01c931fa1ee79932534f74b771b7b6387a0dd80444475d42de7364521ee9c9d32847da1092b1a0dcdbc711f7c9c170c81f9a4d5cd6bd0dbfb88a7b786e693902dfc49e9eda11c81435a78d310ebd8ffb3383485e09896107e65cc63df6bf5361a3747cd7c9c520ac77e3ccc5b7c73384871ebc6eb571802a1a830143110c6a6f0ccbeb148fd72c136427c7b487381e9b5424ec06461b75841fd7502761acc3c3af7e082026c3c8b83d48a5843c548f4361debf4ad798b469c01516a20ebc172a51fed74298b44c2e8bcf17dfe08b62f8e5735f7ebdd9fe0bb1e323dde7dd4ca9ccfe21f7bc634e03151b7c6fc99257e79ed9ef8328fd63a9e0e6b1f5a9a2e5a22119a8604e99b74357f631cf6582aa59dca4e4403130fc46524eaecb2399f71bee09fba9b042c7f15dc79ac9cfaf6df95e131601ac54bd78f985278c6151771a300724e5c5b101bab51f9894d28cc53efb17628fbcb66ac6437272c37de26a27effeb3e7050f022349a9de572e986d76d14cd23a76812da4fa1626f0bdcfe63f4a72c60c160512fe32908d324afc972f9a9d97d23fe740d29a0496e039f4f5e6020be856f9b54895b7ed884471d04fcff484b39aa0584dc3fcf7ff2df60df536cc0a81db7f15c34c5dcf8b5ed0879a2e4da293ea5ffa95ed248c825158b271e8b45b16a918c64dbf5f0b008525dd835b8122c4515450d783bd5b25c18fbeb509fd9ee9b30e0e9e078eca10d468b0d1d607c37251388a03920325e3eb970eec02133b8c40b3fcdeee0c2bd3c4ce6128f259e15f37b445c0e757a1bd77936c7d8bd13d9d39f907e06e96ecb56caec31aaa38986b27a290df35102fbbdf78f7aaf7d4419c0a0c3e252c9ef828641a57a25c3700fdbed228047c21652a72aabed214b7bc712f0cb88d94fe15ce9d47641fd406e9c5a096f760e44c16a995de561938faf07d37ce9b784eef49792a410cf0f7d82748fbeed45f04dbd04d0ef6c8839708868cbe19b28efe02f5c3aa88c068a5cb3d43e4baf1ce7a294946a7c1855c63de63f95091719f4d5b831f49db54a77dd35a4e41cdde7d8cb9a08615ffa19a4c731b0cfb71ea053367aefa92e164735b4a2b3b25a4a7c622492acdc203e975c09e92799e7b3803c770e700cb1bd58723698ecc5eac5540a3ae6c596e2b47275c20164d6e9ad8df570871c7eb8d9ce006b50b396814dbb0ed6a74121fd984bff977263a1431e0cef30a5a0253fd4ae11329050b320063af79aea73b4da31e72dc4be2a997ad7cd8d5d7fc957f5cc7fe9dc2265775c8a29f34f8232ca6216c9a8276c25d0ffe4a9910a27589484bd5ec7ab5b3e2c8dd5095b8952699cda327019281539bc0c4e7c19abd0a3fc3e51133af75048f5f0866ec6cb746035a1fc424efd8f28a0702aa2fafe9f751a70a24106aa5bf74a10b3301d32cf3ad03e3ce0eb61ba85ea5fce5b1e187080a6968dad02764e4de22a342e3f2851f2751ecebce629e65f718756e24353b51b95ad5a1121c73be04d711f6298e7e9d1fdf415ef723ffedb9a44014387cefaebde3826b24998fd42c2aff0fc843727388207f8ce996bf638de3e5fadf74c54d478578e42ed3fab11ce11d9bc3e61e5f08e696c3a485eed29bd1aad813d61f275a99f22ccb9d3b2df145af3e35ca40b43b2b47c7d13fd51f2ec00f528bc0d335f27e1714030661692d7fd17e598c26347b05134d763c7473ec8f58a32ed96cebfc742afba8532cd55a056b312643c3387c7db4317aaea1a90c46184763a6fd80e974d844a0c4d024dd48c50c2e8651630c6c379f9e2bee4a8142b866793a9515ad69668c7495502f28f9ab8aee0bcbd1c864859657d0f7270fd11a247f2a650bc260e8789c035d0a68a3151542b6377f50e8b3933bf5b4f5145422350ab5566f93ff806c3568dc4a6c2dc08e891b299d110510f8f68840f6e71c585f9cd2c19ed45d31f7de3b8cb3b04e224b91f8d3363609347905db92abb84b89cdd35a7aedf2122368fa238203fcc9ffe8e3267f9045b2ec12ee8977c68f4e9f7fe7d270e783d61c70a54a93775e267001c878922c1cd069b84de68ef673264193037f191beeebc8c57fd6bbab3081f53e4bb64eb0924c47e4a247014e6e38c81ab1181d72106006df1effa486a6f9c7654fe5fdef259bc6926bc9218283e3de33d0fa287431d83621a1fc1d334a3afb298e084d63384c5fa4a7d805522055c889d27933f9862dd717b531058fe5885270ff1fd430871ebd0876957193ad338a25903929166b559615b88480785badae40af4d886e033c89a5189497c5b166dde80d8cc7db669fc13a311d88a3a791deec3023008d3825745f39e61660b872f710fb09f35a9d84369c10e87ce195dbe407a40319a4346b0226bc8441480630b777d25e177daa3a6a58c50d1c06ec9ffd26a208c9ec4e7d746e74c79b2a13bf7147d6ac04519a16157a6894994971fb2a46b6f49306eabcb65c330f847ca0ae644414140216fa402b6a63116b765530c9adf8202a98cfda7565a7c735893ff5e45bbb3baa6a14cbe20c1f04030e6297b63b814f76471b0b358f9ab232134124f75a202652bf4854ce1100d36b4ca1a66f6d07274583723d314ec2a061cb65d374005ea0b34c6f8b54906b44bc2a5cd59ebb7572c62047fa9b8a96caee9eb3e1a79f957f3feb404c9e199f72c2818f06c9202d3874690ccc36a9895a38f979a0b1e2caafd923e79e37587a623990b87b048e8d2b3cf9d3cddaf4ac797d8588aa7ce0aff2ceebaf72a3544fe89d1f6ec78cc3f9e15bd0be96cc0b7f30d6090386b61ab9a345be8203c917b5a388ea4773b0a0d11e4230929fa60aa7e59775aa709eb203e59abc2b17bfae2b186aa29ab208274723114704bbe9c2d186aeec848278411603788570cbfab92fc84689db34ebf3debd58349b407cf03a95cc7cce86e3dd2bc88e4a1c1965e4093c6b4347a241428b6a2bd4811b5afff08268a28183f3b73a99d72287cc374b7467d659cf7c3c6cce993ac09a74752ea972e930ad046f33b26ff813ca0330aa8fa8c4fbf850e6c96bb2bbda872e2324587ba25e498b6ca05f9610bb6278e0a4dc9e0c0fd49553989ccf6c8c34f414d38f8254fef7da03ebb7703bb9a2b3095df3855cf00913222cedef02bcfe2a025cb2a1378f27ded917b726cf45d5ca2e6244a6e448ce01a6bbb01276d950c1aae3ec304799761a15a7af9a3f409eac5b841b4cc4902a2857b45c77d3b4645a1cec296d40f435f86e79b71ace77a5a4cf5b644536881e4a776e0c6c48f951cbc003a2372fb9d27bfbf763e841ab6615872ef2d0a4ce2f84573883f48401feb86f728e77087d84dd33d5ae15e5444fc4b825b6cb6f1eb51f899ac41eb3d734dc9fac3eb7f6cf4f6cf9d9a806a2c46e23f54f45ed064829244405cc4e94007a0eb9195ff1f45f165b8276b4c4daaa3036a4596944032efbd0838292129db1c4b454a35de99c9ca5da2a520ec569caec102cafc155d04b512cc3060dc6a035b990ea2f06cfad8dc90ba25c2b290123e1e4e2eed8991022b2a7cc87d6727db3827ae54b4e02aeb4e938f65b05e72bdfdf1f70d9669e1f1f9d0638c32edee0922a80273eabed0c1ea013d7efb546eb04f76b6d1941978e2eb384087dba08245c5e70aa012cab1b7e68f9371c79fbb79a09699ab9c254ac7af3e9ba771ab5de55dc99a6b71756e57abfdc321c9312fad14bd3ec70644e46ec115edfddf9f644ef748dc3245c7d4e066cfea47098f7a40029fde17c3f326e20f9f81c30ea4a8c0152b3a13bf7ca64d1ccb9c4873812ebf4f1583dfc99c630e6d77090adae13ea0eb58897894614e44026566cbb71878486697af56563a74028bc3865e0b13689dc0ae1391e297557e846380eea9a06981992807ce037adbc95901f049f83b87cb9eea4df402976cbed6a03f6ba747a3d99c6772fc33ee6f2145acfb5f8295b1b3272b5b88bf82ab0254cf39601bbbadc14464b645adccbaa72d820fc7adf1719d5b76c93393f53770fed719d5c3351432d7a5919b5056a5f3f7a76a2f8c18dace83bdf3147ca49b33815615ec4f81d0f3921015fd32b26b7181ca8321bb71fd2aeb4e253fbbd6dae0572cc740f4e2918fb6cca2c2ea63a4e0cbeba9a129216a3743b98f963e7e17988b05e17d2e3fbdfc2e4fd3638c716969e9a140fbe7644a815e4e2dddcfb977cf31763419e181ec2a849a76ded89df2cac0050f343e7387db78db03540e47750af9b1b6fd9d26563ff3ed8307df83df6ae0910745a805542f661eaaf510b434f7d49e0fdd6d0f9042bcff1f21868d7062cc73a8707ab560c6b13963b37019bc1424688b55cbc7e601b64d0834825cc2debdbd807a1d016000f6122e86c015026ab367b029c9927784437c2dda9329b7add94d6a22cc7f8b9a282ef097fb7f7bf112a133f5cdb3977af76259acbe0e7e5754bc5aeab99978694d3b752777247f0a5a5c86c695983a532a91e9ec4ab93a7d207b16f3bb60ae14040b4f0cee57b8f5799fc2d6fbf802182404fa2e7b582bec88b98ae18cf65f2efdef666aee56b8fe0251739613e88cbe6c42a7513ea0e659ee7be516b007bf73552f9650c92bbe85c587b197327f7ab230aa14625e16f15725d9866669c02b1352eb4893e5188687cce8d5eb0059aebed522872fb81d7785df05e0cbd96d2eeb8a9308bf77bddeff5854f406018f955a5ae8b194e851d54f4293b86ec5588b62055c34093aedb9ab7d13634e86ae22a0e425ee2aa53741eeae727d1d1470d85290412e58bc24316fc973e4495121fc97244182c7c39125559013aa3f4f32628477afd58433b41da3f0eb6d3292f3a1d22201dd3fc8ace9550f486471b4ec9ca0f6cefe8f95ab6da67f7f4a4fa161fb42170f326ce61a4cbd69e0daf4f2f20a158f212ff36437eff263f23aecf28090d855be80bb605438c71451b5b45fafeaad394141d107266f5339310fe886db09ca8b9307e12106bd8888fc3b68dd749d5d9ae26994a6871f74ffb3a1a11a478de2762e7225d2fc8024a4461646112b456cbccc95a05c1e4f294c74264b7ff13a1607db933db82784f55e3b8b08bb6b69db249aeff9489954e08a92438414682996dd1c850d156f739f67e47c6db6cddee44b78a2c5b6ea2dec77d33fcf0d0a07ea60b97f94a33c0b9cdecc9f1600ea46262f65c94028391d46621913a8231b2388f86ca004a2df557174db469098aac1585b2c96dd828270f30227546f59390e066328443a9842bb7eba9a5fe7433e3a37df2692cfdb43bc0ae1316390f231e557d4971eb413fc80e93b669955c330f8bd284d56e8fa749f6b955b59760a8af8ca1f0d596a6f429bd25e4f97abf82be25d8764b8ca74314f3efb759bea30de4f77e1233c2ce006b43a231d5c3b0d351b028ef1c0ac0cb9b1e7b9b00b247f3c9eb738f6377b3497387ed625a417f44cfd6316d97cbdde0ce8b69eb98c1b424997a65d7135a1007d70f9922c96583f721234f22753c36919d42e44cf23ba244752cc4aff3b978b6c480aab3f5bbe637b5fc98ef364ddfa4b296274a1ff0534f6aeeb3c29b89e8ad8adc5b1563901248692f913681301e1350f32a0fe3e4f8fd32317ec4e478a9a615d9bdd0713a19fb539f21db8a22e19e5cbef5ba0853a6a1bcdfa6e8e24bc10e631b7a7c65331cbbb9eff64366d5c4f0cee03c36eb97d735235f9996507d62d8199844465019ea54eb6aa1e36b797ad2f4adea54199a14125b04a363ceced4fe7af77f4ab7975aff1c0c9e868aa8320cc03843e7a64121cd1f8b983b2b444d74d0f8e3f1ff3524a939842b7c2beb5f1ba0d12dbefe3514aef1c97a04aa598c6e760c09a870e68a19eab3ce0f7df640dc8afcfd16dff7f823528f2feb7555f7cc2a1ff275f84bd0141947227d3c53eb8cffce1c207e9bab0ca6503783ff6f451400ac764308fcec0c6170cd4b7928f48ad0c59f47474fe6454a8ca297eae6391e4a0428d2d09b88e78c190c80c3f89c10e19f5c2b0918158be4fa15e642e34758aa4fae5b064b831f3e6da1b63afcf7b2d371e24a0ae48e0d54f1a4be1440fe0b5e8ace4a0f307232e064cfe24b1f6a8bc34d9628ea3669104aad55513f1dd0219fcac875bec40b0816f45083f6d094d2c690b8e82ed7aac0128601929991e231d184f0d3454f9ad17f260bdddb4cc6a37b9be9643da34531db69a9ed113510da6802b405a51ac7f0e4dd6b360dfd8c56327b31f0a718018bdf637c79a8931fcfd4290f4527333f010db1e4997789c1b0fed895c82882bfc0201698cd5ce3370d611bc27c4be2d617a957586e81c382d65143308ff9a87b8a162f43d09ebfac2f3761a066671576f3fbc75200a32ae310f3b90803aa92541a1486ebdd6d6f8ba5f36d803691b610b268a765503033605cf594044c1c27b6c019046fcb36e4c060edcb6d4787a4cb40443ff4fb14cfbff680f3b30eb9ca8d42d62d7844dd69455f433c3f5c046a4b8117d6baf7e371ec44e9cbc60a3dd3fd4f75dff6724c5ed7a9efcd4a78dfe689c6198ab412ac9e6ed85f0884ce47ed1941d2ab1c37b1ecf0588bdeef1864c2fc726ff99bba3c1ba253b9a48f84d1422fb4681648080f7ee548da6f4f2de054fb913512314aa5df1ab6262f9bb887593f16338bb4b51cb10fc7ae999a41278698f9924282e7dee26780d3e266375c91d645932e5bcf0b2344f28aeabe216e10e5f9fef9599ef7318d846ac63479d20e4209023dc9dcfeef45c9b06f0cd53b94a3cb76869feb5a801269d08bea46360c829da7531680b85b049eb57685922221203722fdcd8a56b893768bf95ae02f959b11618b1a7dc3253998eaadfca25cd0139f511e","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
