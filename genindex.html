<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f7e0145dee2cffddd2479fe17d7f074940f9680efa54c4bb634f01b9915af9cf84603500602b5a89fb9d3017ced26788630a4239b23b6375231738eb302ab866e15ae393d57375587a157b8945e9a51496c3120db90b0b21c972fcbd4fd08379b0bc44a7aadf3dab321d1292b8d6a75230280aab6793ac46b5da0fd1c2abe5d02ec01b38436c0e9244ce01fcd1338858ddd6c8d3d3253e27da74778dbfa03780802a669bd83f569e72f09b0aa29e46aad228e1122d1d79d398881f3c82d24221513234f39faee7a4962ed1fa68c1222a88645d2bd3ce3332838fe8e222392306ef35c54129689ab8fb686e47c4d3bc567034acdc6d35f8a0c09d4cdaf170e5759a4a0d7c6def6086652ec094a7bc0bfbbde8e1c6fbf80072dc2bf329de42ded3f62eb7c94fb3c9b8d3c94b98c9d7ff97a3d83dd67cc48e1e3a028deede3ddd9b62ce026ea8858ef9e45ede5bbd005bf4cdd9c0f691ac06565336ddec95aa8d2b003acaa37a08b7648a6ee4a12e3cc4ca1b909a21c898d2539afa574912a63d81d8ac306fa2a01fb59c0d8cc520c201c30994c7952f6ec26148a8966f76598b75b40007379eba983823be06211da480f7e63403e8fa0f00a8c36bd92ef4f6fe3ee4b99560a2a9267aa4ce8779dd89625d0ed13e0b125481f624b9f748a5dfb23f707fa90ecc634e4801b4812e6fce9756fb5f57a8b4d7579a838d78d89200fe9531d86b4c0750d66be1a7108bea075edc2fe27b0651c78acf2fad56ade27813eafcffe06e06b10a65a79d10b0c65b93b852ee5e55bd0eb53dcb55ff99ed962e4edf4237631874aac870d34b378412dbceb051eac868add39d0fe62295f4d51e8acbbc94c098d2e14c71dd57015c256b0eaa50a95b2e2ab74bfb76e87b74af8bd2ce8ed662293ac7d4797beaeda75adae1fea9e53ab1c3364cbc7fdff1488ff30879176b74d486579f1b60a8d9dc2957a60b02acbc77ad6a17859fd309b8d7ea6fc7395e2136d9095ce11c65a4ab7db816daf8c256920f462ddf714f7bbf4658a50e0b985ef4bfa15c8fe7074bd6dafc3556b74b87549ae419a742f0b4a112c0fce893f6d6b2f55a4d80e455136c584090381ead7d3d7cbb320ea1494fdaf2039671cdf44f7c4c304b36b96baa00ca87fa3294ab7c0705f6330f6b746cd675531c78fb4a6cf4ef39dbdf161503efd3e39a420832282e79d59de4601130dd0bdb42368f5ff1488cf8c558bdd09552dbc7fd8d83e14401761bd27d1aea586fae09bde041b615a94719014960940384447721c882ed300245741c242a88e8ba1e6de695ae2609d160c3894055a3980c605ac483622052198e469775d6c45816b7cf037f25f8f4b601879dfcf3d4649359b80b081ca50952655acc5f7db8607ba793fec830614483ceb7b6e0fc497fc73488bae5448f2f034ae845e2b3778573c8f9740eb3d1df65f5107fc591e0cf7284c5308b08627a1874c62431778ae963419e60273abb5d8077da6fff28a902afc8369e09b6ec87e6de25c57c2c09259fccdb55ac2ac2322217cc96db9eb48ffe07d50d5cb735fd2a6c3cc6faa0fc8f1e7bc81633139997cc9513dfe635105c0c89e98ce1c8038cfc46f6bfb890176b157f7e748e15c4acabdc2f4b705cab6f126e42ec0fc50130131daf8fcfe35cb1f04a6c032e0f225f9f7c2bdee2f628e92e1fb3e1103b08c3c9498c5fa9c22d8bf4da82127134ce8cbb167bd4d5db1dfd1b9f5f1911e2632c12609eb233d04ee21f33ed35a256526d2a8687f2e5f7a49a5c17e42f5a7f1fba001ed48833796786ef165c931ae84c41017187c89797bdd7fac0fb123dff8b10078a07bf9482c4ac6a7dfbf89956d9833d1c268a12a6280e9ce4e8b9ccd5b4dd3a26c10e9982a5a387f87cd6fd86b6ea4d795043efa34ba667b45203ae0d72f935f806ad6aaeaa431dc56df25feb43f90b7ecefc6fd499522b434144d51fd5cdbcd475a58e5bc24c15a6226fdd7418bd5ad43e66a5a60e1bff06a68eb562ca52b3619528d98e9dd6bb2e4460448074e42ecdb99c1dcf1a22bfe4b6326204847d2d5ea12c3e3023f4d1e3ec7c457bee3c77670835841a5c4a7b7a6726c8d6f6c15fffebb468ffbfa5e8f2c9f948c30fd6a97057069c3ce288f9cf4f3460574b5bdd55c8caf425b8aaa14bd553bacda8fb3f63880e8eccb455d4b85b01c7f62c98fb208b9b1ff46ddbfcc8e7b1380cd44f986e2a71be636c1448aee6d7e8be661196aaeb008991c9223f2dbf82c2595c7c51bb9a9b7de135b7822e323e320f40ce9fd816929a07480550fb2f0fd2835bdf71fa03e0096b9f8523a59b4d00e813186ef833ef6e9c7ed3aa2f956d8b7068638d110310d973719e2ac8d8527c952fffaae738f081e39cc7ae284582375b3de68ffc42266f53bad95189dc6ab6576be508daa12dadfbf34df850371bfd4a14f9d9f2140e3e6ae12a972986f91a6c69a9e814fddf7440d952558dbed53b621ff0e741a37f9a7ec43529554b1f912b60f8991509e059ed6f051446ac62bee7e9e5d2c270b17a4d2d9ccb1a097c96c16f0c423c94db6dbb6a6812a7664651c6031a9cbbd9b3cafd2e50b198f7c0b8fce3495ed17ed77113e29cd6fb56801c0aa0f7e24d9ca1be366e292dfba4a50bd5f231b1d6a6bd50af958d0e8b98634c899796832b57ae8c5e1c09ca4a36fe7cdac1ed41044cd0357597599387b19fc33f0f68a7016b60f155c098c5577b52eadc8e6c3ab802a86bf698d72de8bff5e617c02d00cdbd10209a7c77ac7b1c8503b5678087a76d7d835973e0e9e44be2416490685b1bc1099e657ec3dceb6e4e552108d0680b27a3e75140c140254ebdca202ee0bc9b44a87c990317c6c839f46d03fa2bcffb281eb9525ef97ce718c5a69f50023c5858af57ab4c3050fb0327e8936e6784237940ecada726ea172ec4bbb424751d874f8919aba9d63b51847c6017caef290fb775086f6e1b154d17a2e43de7e705ac677eb6107f179d7b57b7f1534f06598181c9acbc3131ef0ef32cb8601f6991188c6a50dc93fc260ab93bc0a0cb659692e2baccf0d603dc65870f5f6d3d017d0ec3acfff74fad53368c12e0624062dfe03e94cc13ddea15a2a37d8d9a593bcfdfb1bc6b52eb61fcd58180ad800ce36b4fb2ff27154fb0f459fc021f7b2687308a5e2f1d1378aaad4ac9d9930c6c9535e5be0297803820c709b1133abf626da00ec146dd2e277e0381fbd2269ea0e1b7bd4e8245b73884fed459fcf2cfbb9023d7069416a6e1a2931b785c7ed91882ffcfcdb40509391b93bd0c7d7370c233eeb3470ff596b1b5cdae46e4023d93aa58d7a39df475b39cded79b0e2658c071cbc209830d4f35781112485b3980eec8ceee883917630e79da1654a57e68e13e0c85435b890a95587cab16a73069f460f93829f0a71500c1050657947a599d32f2386712a3e407b49481a7c1cba8220dbc957782276c60f12bb6122f88516d43f83e38b4f0bc286a93c11237c6eeaea1a508732dbf1be7dcbd8797ec6cb8f097b72054a2559e01165fa24f2934a5ea893ad22db14ddfd57d7cefe252c746659ec7f2f86c8303fccc6d69817ee3c16adf200a172fa4a593ff4a2cfd0aac9f305f65c2547ed35ee7e4884d13143f7c6922404ef03a4ba9862c22130813696e5b65d1aab89e8175089d58c974c41d4c6e1417db5f3635427b7e42e4d90e67706af8f16f1ec353ff02f85ff4e94a0cadc5dd6e6f6d22302077a043d602cb473494ada9c672746ae733deda03c8c4212e5420d2d68ffd887632e2254564d2d0e3b6651ad7b7d967439972ad0f23a68e27ab8ee049d877c9cc75e12a47ab6e126da6a76f23c92e8475ccd235cd0d279655eaeecc3d4418169d570092971c7254383de9269c72599b3a903423cb2f4c3ab29447ce61fb9ac6e95bf944a2ce6e851fc1e5fbf04c24bf4fa8ebb555273327a13ea5a5807d21bed9ca615ede21a1b646afa341913ef79968584a13a601aeb5c24cc8027262e6f676d7f4f43e701b0891da73e8dfb552429e41e487fb4ea0cc41d1598eefbf93245d7ba052f3312fe7b393309365b5b6216f1d4dd81788709ec7999091dac1b27382dfd5755f57a6f62b0a8c82e8b898afe0b5cc649a2c02560401f5bae6bb1412531b6a6a1e91eb646afa8732a2495b9115c93048337771c48cbbc35ef346d5eb73103f301a42b2de89d5ee547b28f3c62d5d75d6b3dc7821f0f46296865a775a029b3cc11501e9adfc581733cee334cceed6cc2b71d03f22ccb3bd93a3b18da909e2c39ae8530ec88b6db153a6d908d0d31515b44921826cb504b144c29263d02093fdd99f99a5610dd5806211ee9f8762090a47ab06061bb455c5f75dc98873281d70c0bbb08ff44080340d86589c0629ed22d3fcbe42057691a67adba295cb84a093d64d8b5496053a32abe6f611a8dce0845bc499479da0a59920834cbe7b36a5eecfbe863b6bd055007ebecab0b45e4b87a2d90123e93cae4fcc9735804b6fdc467797a285b80e3814cc07a5af6925a413a8ae34095ae764ce812d8fd98770aef145cb6e6d18e317754b079f83f73120144479e0be1883c454ddfc8a5504e8e7d70e2dfe9b438aa8ec266eb2757b920a4e3882dcbd4f4d92c396a7d0894b1cf775e9e6f56791769305063adb213449221a06e73ce2724c25f016741c95a445d0e0e61b55291b42e3c37cff68c62de3a7299ffef8213d16bc5ef22d2ffbea86addbaa6ba945e488d326d19e42871ff712f3b811e3d32a7834282612473a9125088944f537ae2cf0769a7a8b4be14714b15c9afb729b6a5a0a9f268752865b67c8b23d6f30bbbb1bf93560117efbfe0a87575a0e1d45ba2778d9e556083e5deae1e5493e8736a8d9258fc7f52015ac98d1d3f264bd0f5b41ce8c764a18219c05d53173e049612d65739a8b64ae4ba712cf96f77047a6f9de6e2f7892702483def33e53f27c3d50f612fc387064ae9953fa617f0cefb43ab119918e95a586d6d36ae9fb28754445ddc5afa4bba1d583907d58ca71064874b705fb15bedff3f341581410157325728db31317b3b9ecef152a6db6c9d638af1ad7308e7a9729a778db8ce583763e86c18738f8affbe4c4214e661e5b7c438b1f03a648fa27ae70fa13df07d98e2bafc9dbdfbd131d3b4ca51d2d2b8180a8068ff27c29f36517b06b425d2a274f47f846bede92094a6f1becb4deba09dfef02bbd961bc66f07b90cc1bebc132987f23ae4144e8805f6e9d5e0173e581d353cd2a6cd22400e1a608bdfac0b49c52e438074e3bc7ced4e91e4dedd9ab6acc3e097514f67b462c6e9efc5d368f20160a52ad16405505305d53624d80809d4538afd33d601fd0511e9711597fcea1da98fe9418e259240c2e6f89c5024039bd8a8fc8d0902167cf8cd489cf6f9cf6530fe698ec63b5195274791cd2cf5ae86dfd5f881fc83c41b70bac5f3a391adba7c008233939229e355585b2c5007be614473b45905d3cf1a03cacb079426b09db1ad472f9beaa7ab4a5aa721395e4ce504f282004a5512ff2197676005c5253145e4fbb43883da0d5f5b639045a374211e0528ac5b79c707f9378360d9f030493f03e952a137dcd53741bb0f54ae4a0d42fadf235316510c8f02d856400f48db958a7cd521d31357ffa049d1463d59a94afd0f41a273530fe1eaa56f78414e65153a309a9357acf3388584189f40175457c534cf8eecc945810f66c6d8996d94dde14a185e0b2fedcfd435071f7bc711b7377ae9c2e735169a9b0869982d5b1ec6e9ad2b33cbb165c7b21f61f82613b79cde0d98674c76653dc013edb3c202d9c4ae09e2bdfd2adad2dd149dbf0a74abd16f446937844818d6681f9496be242d88b492fb6cfa9aaceb51f2a26b1f353d5925cc28556c67f2da8e1a4a442170ec9a7f62759a6a229b957402c47b94d78f39e77f346dabe96d7290a39e1153aaac3ef746fc25b98e8be85292705c8e3b765cc51e44adc2ed3006e1d0adf9c7952c58ce804f3a5873b0a4d3963f64307a2b9ecdbc6174a2082ffa3cef272ba253b52c5e4968689318a37b6789b054ccb2a0ca8e88902d0c4aa61b01bbb09dcc6f7578df42c52d3db95388660b0c7426e16365b754f7a973b6b37438215e6e641f004f1c76dcce932c2a056f87c8c9f322ed8802c587119de6e407dfc3dcc10ab7a799acc4d6e9c82e220aa39a23d9775cfbe153608841e6f08caf64a782d7ac6bbbd747bcd124a2b2843e286a0ded8ddb27731bc082f5a62b9973ba75f5b2903d8256614dcb7178b9ad126daa7062d0dfbb99b5a2ea97f7d6b08b11bf44b182feb300ad612b6e160b587d9fa9b344cfbb7471a90e0f0ee55e529ed12747cabfd1a1b5c9ca76634d130e3f227bf35903432fad9b812057c756c26549f19807f67832042d48bf16481bd944bd600012ed2567fd0bf79fedab35614337eb3a0efb8b5010a556d8793f396ad1189ab00e1ad83a1ca264d77a26907644d10f42e8f2f7e994df20fff910474630ab3a422c5fbb6061543509bf84a4505dca1d2d5970d986dd9d0563279a5fbec2c72503b50bc66d1c7e6932fbdc263a36173f3bda3bdaaf2e74178a6295eb4f2b6219db53f4a8751f265c248696341bc45abc82f148d590c7d9eb482fcb2b5b45aec934fe5ad1e9c7bbdaa5c406d5248e445d43f85017751ba58f1923c16978231afcca80bf5e7bc3872b16575dfa6c673ef49a63232a95d196383352287d00050e6681bc75a35e8a719a3da3fd7d57051d485add79333f9bd3abb76c5863106a390ecc47041669d543ffd5ea444130b0c176b290f3fb8fae0e1d5770afeed239efde995970ab43d9399f7ef52e4e6a34b7c35ed7bc21426e003155b6f65f62d025bd114817913985d5dc39d2c67d1c948370f49778d4fbb91d44a41ff613d9df7adeeae78c6c9fcd33e0d62ad1ac0692c30914af575d28983b444d56714a023d58cf83dfd77373d6166641c51fa2f195cba96d8066036dd94239458ca62d7327dfd8ad0361e4781371bf364458aa338dab53fdef051de9d4901a7508dda1cccaa4e3adbe319b8f09c6a5e1a68d611ab574386b87b17bc313f80f63e56813127208966ce38515c5bdabee432912061ab866be7061a8a01f2d10ac3b41b4c18790bd1490062a310d6e639306c66a4ced5582249001998609f92ccbee135b2333419289aa766b46b63031727b1e3f528b8a2c8fc151ad63ceeb5924ae27930f2200b19841e99c6a7654527218181e1549acc03d4067b4c2cbaad22e406141041ee0f5e5cc7d5f021f2b3da9e8717d2d302de8d2d87473e08a411bac5ec89b7fca79bddca60dd8e476f8f021a31e6c98585741d3aeda1a8a42f37a6a97a2030ba94ec4cc47a64a7115c807e1edd2ee0639692c3fb591e8ae011aca26a291f34df5a69e0a5eff80aa5f8bd5d5b5835df7e039b9bbf667e1e97f1a213ff3f5ae62de12fefee5a0a6d3dafd279123d6e759e9d0e98f3eb9e195c027e414fd09bdfd958bffba3faaafa7d488c424e227a1ccc7de7526ddc976dd020ad05fdfebb190505ef021c661050cdd52a9e15de95571ec6003fd682c2e511b53eb5f9c4e9fdeac8f62773b3d6800b0cb9bbd8cf909c08cf6bfd342aa5e896a58d14c82c4f2f01055e6d7d7b05452f9c3da62cbf2a911946684dbc5b7d99e67114e7bab4b0d1af02b116ae0f38de8f6d11eb00c79298b99cc6b8a61b80d7461d03973743791c4cb9549102b97dbcdee31e1c8656d9a7360a845b993b25626403d3f8106ed63b13be1b09d4705c84d231484d9bb5a35dd6026a2a182d46ebed41c129b526c0c29be06ad6c9bcabad20857a990f1451221b0a8e71106860715e1b071bfade7434be4481ae87d0f5fb90175459c6cf02f33953224f6e30394e1f646eb1ca9f8cc9bf5e6c0114f2f97c57c176b7b97091910e89f06d9f59381bb1559e0bbf62557396d3d3957242b674fccb0dad584150c08e77a189e8a21b9abf8b76e7dbb9b861d904fa4908104ba540762bdcc9aad276ff6036acdf6aa1217325aa1ed026b8c1884169569527938140cb15af12444c6a84a3207836ff24e5a108fdf33607a0df59f95d3ca0a91cff54a4669ed19b6cd6d3ffcde0800e0fb3e99312757eabbb3a94117ba83d326e2ce8617e674ff7cce79c3b3ceb6f58e7e86bb00cce5e4f178ea7d34807536f7e871ed80052352713c29f6808d7e1edf542a5eb0af124d23fb878a608221ac437e7f16c6c2ed1e4b411090d394f9d1f44cab613be0a1d0bd3694219f2697b91d230c16a7642dd2772af9884e401f446509fba05d47281618195a253ababcda36155e2dd8a9945a76abf85dddfeb26507947628fa9ae2d961083133db97ad6683f3408dc2675a73f6688b82849f537573788e7fd874e3239b5f4c86614e7b866869c8f4756db5113baac10552a6db57c8cbef0df035bf31746d6c640f7e0fd550f499900326425b66581d84a1d8070c98fd7a4ac981fe0862ad9c35896a5a88ea6deb09484d3bc0222672b0a4e933c6683f5b693a24445be237ab74f20944a8e84bda3d2003b8381b43766f7c24e1eed78213b025caeaa36f38a9b2458033f48d999ddbd0b6fd8094c2f028f4bae82506fc08eb39003f2589e7acbbf9817e4cfdfbb25e9518cfeff6a79e9198b685ae12cb0facbf3a92bbba9fc13718a42a61f3383733b203fb3312547d10d91a8252affbbe0e10185c5999dc11c6bf0c355877ebf4fde4226c9c26c2ebc08e151054ec1b9b53f1574bb3b9c2142caa2efe07e825bae9660fd735d79d3dc736f45063d2a5dd054d11b37436569189adc189b878de9d09dc2710227bf1e52a737c4eb485a52177a5f0deeed7a91c503fd732b3f414ad9b89126107ceee5f491f49a5247370c49b70fc0ac90b471b983d3eb3c6de018e7c760482f8c2849202acd6aabbae19f516bfa9ef1cba3be84c24839dd883c9100cee69c0da17aedccdfc3f14908519e50c6559b47134bb8239969f682610cb833911a61b4b1554d18031cd7d463c8aa290ab88614cafdf7416cfd5b41298e5c16651f9c3d8c95ea5357d97d16f8a1e5f994361ee08aa1aed1ab1ad998842ac56d3da1ee0baaaee84263ef919c6f4a816a9e79172f7452f0e18e3df9c70150dfbb5e26b3c692680ec672f9a181c79c7cda365580f1a863894a2571ab13407fa10b6368cec1e7751b6e98c75b951cbc51109e6ab9cb8033a2218871e456789fe4759338ffbf9831bd14d74fa753a89019abca8cac53e522281990a9533c6093db06d013139c737824556e98e21b902d5b6eb681146491facb3fb6d9fc745abe4fa395fb892f5d830516dcd9f500c222d17fbbf342923d6d20b2e74a6503535c8625cd1e0307b221fb362be3caf531f2204636523d49bef60c24a098402b066c14b72b9bdaf8f71209b05680c116e6d051ecb90e50433d612872a5ee0710fa6a0ef1a556932b488482c7f1f178a4f140e454c5155d4d78df47a396e09d6b6ba95fdb52bbf87e334e83447c3d575e9094632b4b7b21ddec5fb091d5176facd256436cf6a2957381ae33accef173378e998f4f61c58cd19ff65165b469f1530df3683fccd0dfc2d53424718e0ce27e02e356c88095a354a888c7f2c3c2ee63106baf6a1d5bfff939e501650c8193fc63efc45abe4864986fb9f2188eab92d4f1234685be800d63770a560b995094d05d3547f4885e814b7e9e6aa540a1bd06f73120f40882c9f60b2b8db0de7a9528fe87c1a921fb5daaaec7b03137e12643b427d841e37d2a04524b771e330190f11a8b8e63875bc4c27c52c30ede12f7351cdb02965ede98976749a5174d7b52552ecff07fbfc0a1ce624ea162c12a7b2cf18377f0d49ed39157b9ce345e41ce513ec340c0c9f936f931a19e4ba76a0e93605315c174136a8b157a248a8521089cab8b3ba9631051608e08abb213447b75edd5d5e7580afafb47d9460b63222bdba6c728a961f8e62196002f019e1442a9ac8665aead679604cbe7dede3f7e07f6c21cf1d264c4b19e284c39abf7eb6a274b9affaa06f1be78a242324bb4ee74f51db69741aebd443af37bcb8054f7b5c520b1e57a5ada98d09c52f928db58fa050c76bfadfbac0bbfa17c5fb70067e595fdf11d472302b878faae47dbb0abd94e7bdf96f8ec2ef364afc93474dbfe2c8e1daa26bb4a12eb276c85f3cc2cc0c0de8eac4420690432069bd943745bf54286cedf5eb9954952907ecb9063f4894a9fd6a55ad6c170f4eb78eabf9f41f90f033c3235dc8bb3560853635267a476f72550f85119b84a0d6bcbe4dd80688a34e6fc2715d2087072970037281f8e2ad748449ed411305751cf7525cbba0210728e2ce6640c98c6c1624d1074c53356b88a9e94df6ef2a9ba0cdd6a5d3afb599b02f5b542ad45496e0d3da17622c2759006516418d32103496038042a06ab4f0ffec4686ef1a75a5b23aa2e1caf5fab0bb771d3e299e3e4fd8edd758daba0ef4ec9a5699e78e1af0c0f0257da78fd953610c528709c10e9028d8a329c3ace0be5c399f14ed1bf63d9cbcab4ea295b7b420f18fce0196f6e70b1117237abd841a12431d2e94a04a7f0b69c951dcc75d688962a5b99b314d24f9b818e78b3cf60b1ba32123a461f9a9bf8759d81eb776aade99e03fe86ef10db8a6c9a8c454b57efce65ea15f351f308bc6be4a9473844ef0eaf6a52efe459ace8354e34378d12637fccd0ce763b9839e49b1042aeff2965311445b6a79b00614bc6090c0924190848835e97f3c3f428cd4da293863cf20762c9d6ee01d50566e0f9ba3ab701b33fa4f8ef506450b59c31632d13bf588817b7d5f3df41379fe0abc66dc28c12bd7c24ee8a496facfcc3b6802b3d4f771000c2a0046ba9b3258ec93d8546b9bf6238a28c2098152d4f4c6750ab83f9afd5c4c4a4e0d99c68f53c073d65b12037af8bb23ecaa6c884d70201f4b25587b18a60ff5e36097ae71e917ab335e8f0a303a265b62af6d97954b3592dc2a99afd1a23fdff2ecab6bcb856da4e806494c89d6c2091b1e151bcccb24ccf954401c44b187896079e93c71334221bc6952490fad5563517c5ab37cbca1f068eefef6d3cdb470243d6008b97963619095aab5e101f1ef494cb638224bd90c1ce64a8a977617f5d73db52456a4692f2218aab142596d45a30e8f6feb626e85f3fe07a9d54ec489ac376007497a3a6192a3ff90ea3280e2818a24abff66413c6dc32472139c0d1d7f9c4a68c54c3e29060a12219b2d05a07c15fb81e54688b539c827414e9788623910123f3a5fa63066dd00074f0fbe443f7ff1dd1b7898c444d7c5aa33a3cfee6194ef833fa2d6399bce8823f3130d0c8661f5dadec03caa2df278f4d23d0dad47563244867049b75c4e28052cfe890e2b75d0a2dba3faa8b91556aa3c4e833dbea38c9bb5c1e8a12aebc32461f31f3d26ca1cbc3865008300644390937bc1c1423a5c17088f0d6d9d4a8d816960d05e37d4e9d48589165ade4e230a6cbdba63a5d5670f24654ae285c27904760f8fc08289f6e48954178fc6d488521852f52d9d0fa1cae5dbadd191b0fa6c8218b102f1a7dc9a22dcab36625ef9d16de3ad934556beec747a9e4e4ea4f0cd76b71ea4754254dad7b865565d7c9291df0e0f05772fc7473da5b85f666996c341e374e0004404e38514f4b4f219279876a454f87424f909fcb32cb3d2087ca170f2750a5fe0fb94c8bcde30ecf3476add163287e8df57e724eb28b8d2453c05e07246377899181c93810e3d20047d4b5c2b87b1c233715d85a0a36d496b2848b4d3bf6bc6b030d67f4d5fd16ce5e0158b9f7f9e8b1a3c0b27c2d414d6b2617f8c0d92211c78430f1185f5f0461fda9ecbc454aa287afaa708bd182dfc307cd824cb9efa892717914deb0fb10267dfba6b69d3997623b488ebe1fcc374db492b793fa368026d8b185fa41f11439bd6508b34e9ec295ef564bbb94916c03ccaa35cf05eb61b69a8edc4eb3d65ed900700e584f518b232f1c6ebd94e457c8576581f855c8f730ffc88640ac1c4348fce53c02a5c34cf3a24f25f34b7ed1ebff7fc97e1a77c08ce9a55ceacfa9760e3afa1a67d408ad0268ff1ff2a3ae1ff910c2d54e25170f5df955e3427c96aabcfd7abb5297496477042d09d07b0ae724eb56d1e09dee225718811bce6fc8b6fa196641598bbb88d23b14139ce55bdc7ef91fb13e15d7d20310197b93577e728a8e99af2fdb9d0664ec5e4188b81384e6d2a5e6b3683e6a7c5c6bdf9a3b850b302e52f1d1d17d75361a1c5a604a74067738671361c738ce62d08454940b86dd9dfd91de28f9236d16eac16814c44f40a30dd9de3560193dd2fc39c5d28cf130f8e0fcc63521f3d373610b3b9052e044cd4fdbb4a39ec467a5494d4dd6513b54eb07380ae79bfaa0ec1eb5af8535823fd8371a4568d74312a21686724999db4fd48ad8a00a4eb2fb79135bad229cd5e42b7274e62d75460274b76776f790b944850cef3d38a3651d467684302a61d62cf4267aea7dc26dd1a807e7490dd6698951f86405858c020ac2330c3db095dfc542a94be9d6288bb35fd06d276f930306d318f69eb5fcd98ffd5def7c71d4e4227adfe3d27d78d7069d196aa1e002a598f21b613011b5ee9695b29fdc93f2ca299fe0cf32d8adc8510810bac712a6c2b61dcdcbb91e3974a1efe7a2790e1c35f8238a3996ec4ffe43e1049dcafed2d2d0bf29a1cc5a84b442bded949c10a2e2a908788023a375583fd18b9ae697330b7970879a00fd9b1a522fae4dfc8ab7f2d3314538b1ab3621b078528b23f6e347369b35196d694afef1bb8de95a03d6dff835f33e0613e9a944ca2bbff5697d976d2d64f7fd4785536ab153f09e13b42ceecf8365a0a9decfd83fc61d318975636763ec864d45090eb5c717090c0ead005fca86594b7110257064be37e0d3e4f91564144ceca81173210a4e6d33cda99ab1bfe20831a1640deb2586367a1bc78ed88ace10511230a8b28b6cf0549bdce3eb0aa2aada2ebd13a6dea9706e9775fa49500217e54d45c6de8b0824a4e526e6be685b012665dd8a191fb24712439aae8f31f08131a832d02318f74a9be838c8b12c0c48f0a92bdff9434604658d38673582d84fc26f896943bc156ed3db889ba595e865092dc814342a7c325692a0299cfdef165f6cd5a645203746980a100f5f57fa6e2055edcbc0983e1ceb375b5db10ecda7860f1809dfef202368eba55c5c9c190c7c306b4a3ca217b15d11544e20b24ac696e2e13b64d00e284d5e45d9bec18ab04f9b80a99e69e46f3a5b010a7c8e516b6ebe7097f72d953fce10963bff32e4d258f6a00da1e8184e39441c5b2ee1cebce63be28faaac354e3202369c34507262e4c4db896c6c1a1bdbb32f3a2c2bcdb483c8f2ad1b0bccec650020acd277633f6b253c02bdd11e0cf99f709e7eddaa7f1bb086ab94ed2e784b7fc107a1d0d4de12e1c3f84bb1e4fa8b5586564af58c042c773ba12d109ee7f1f603d67b0f8f277cd684f3ca094e5bf1353bdfee438dd9ec4a9c21bebaafd75735d676206e4518f95021e69bebe863e796ca86dacb5d0cf52b6b52e68f6789ae81277056f92ba9031af887e14284ff464f4f4fcefb5235a15ba812af11289fab7cd0e708c7ac29cc39f2d0f61059279514d368b075050430909a007f53c7d5702b266e0e31a7a36b62f6d3f44a71c4be7ed142c08df42bb20a4180736b23d3a9879dfcb04e9f6132bed813ebb2977177cad6fefd8f9e9f47b0d27b1268e85a6d2790fca0446bb746e6dbe587b4f8cb531b277574f482613cf502d74461083539b5bb91f39df33daba170f8bb38bb23e0d1bcd5e94eb7b5a04c9d662b43ec54d79afdf659bcc64644be5d6c88d91bb637be8d2440099086d4c2e5f46c92c651bf8278c638b8aadc6b772ec45f13d4b0a40ab0c06b2fc77b894bec61d09a0bb491674399121d6e6855e310bebe2b9007045efd4bf238b7b40f2f03d7b43a9f919870035a456c2479fd16c9ad014d60bb853aa7ca78d8debedcb07a6b195a2c971da185d29343ab25ce41d942009d5d8fdd04916b5cd8e13e1c1a9180d6ec781882d3c8ff3d40bd2f31727f05b1c2c08bd8acd7993dab76933424babe07194bb292e459ce44acb9d4162fa5d3a52c7c10e393793578c68d830c571f4a9cd94ddd9853cad4bf5703e6129309f747c4a4ba28623127a316b97534a9f05a0b9b864f87a71a412d236b6d1cc6c70a59d974272beb6788b51656c982f7b3e6ed2ac67cd5e399f3af5f08f92c32c5dc2c54a7160d9783188891da860df3a760f49d32675e9fc8478865b5832cdf0e209ba2109dee8645050944618ec4cf08a3199ec3d03be2f18994f2bc67b75ebfee4ab42c1f721895830a7de376ae731f330018fc4f54a51a5539b7793ef1fab587168d8cc787409b6d27dbbe2b92a9104d72d70d8857a3dd00b697ec8b2725e61a22b50e6835fc259ba73bc22c19fc71c104e2755df06290a84dc0a88accdf532b6014add993a6dc5408457ba0133740a565820f7f32e6ec99da0988b3d7f41a5ff2488d7c711093e1c5b4ccd513258840ad736e22bdd5b59385df759bd8a5e96341b9b40b0808b49b8057d88f35bf9f816a0375633fec017490bc94afded472c82b585c46bcd6b10302d2753ae6a2cf7958c8c80c5a0a4c461063af0628e2872205392054ef4e509b93cca024d91fbfb28ad756582965a2737396eae81aa4e6c7cc1d1a3cd7722eaa221930415ca817c202cc12199767fbb8ccd4e51801f7f4e6b40108fd0815bb5fab5337a9fe45b605af7dc56521e17a2485a809df7206b69831faa621a8c4ee164d28338a4233989b8776af78c43164b95d5821a34687d3596e83bf139a804f31cf60ef5192104dcb516e06d1cf901ddf2aa974ea85262c4f69b59854793efa1ced7f9853a4f5a853ac69b062a08e73b517c0e7776fef091aa56a481745a0785a73f2f90b7c5dbe2f5b176cd68097ae289e488d9291a956c6ff2d1f66b2232b6e9af1c8db7e6a3956ca4df140f615d4166fd60aeb9d109def883f8883e6541eceb04fff4097603da1bab577c708cafc7b1f6b9b5b80162a3729c33e23c3eb0c4a9f581cd8bd223a37d49586d14f4f5b61f3f2897dc95dbd0d7a97b3298376ad2a1e8517b5ad68c326765ed988e2ad752d4c1b77b7948ff1d14ff5912eec4e3e1976137162b886cdd56bb8e50e0f7ab4adb986b478f8cd272a36235c5461d5d41eb1920411fbcbc525bd717dc29d8f8e53c9619a8088176fe27cb8b6474d8ef619c71d2707d1981ba61758128c5c4d28431fba9d8f2fa1ea1bf852f3015f954a74470b5cf5a6b8c92b02696b1378fc177ce4e39621b9b1a19a9f56ebf524b0640ad791633e99d61086dc2517ce4d2918a42387ee27b1d519240e7732f8e7215751dea5fff6fa53c9c9a1e186d3aaaf449a237ef191107f817b27c2424f677721c8ef2bb130c2adac10e58cef2b907cba1566b2f2c476fc01199ff2b7a7aa390e189138f04f7acc8737bbf44359a601c78c26d959d2bd7b8c32697755ee8eeaa43c32c78e01e457af7583fd0fc79df6ed521a9cccfc0582980149fee4d7b7fdf3eaaba937c411ea4c79148a04e94e647d09eb0b710bcc1ce5c315c11161e2dd61188f1cd5b941dd60a063fd5a1307a58f27da34739658fd6eeec78194ff1be0e6940376c2f8316e9a2a6533762e5b1e652469304bfa9bda59bdd0ba027a792c1824598542922f6d3c7bab203ec554b5d8fc374277b6cb1a3e87f1a225cbb6c13d01ad8af1413c5f78c91a4fbee18adc3104fc82833e5a9e9160f6a6511479140abbdd3f0fa1da1f81bb63f2b6c8f6f5d60d6a57d89e2b913878a5eda225f9b5d1b7992c0b7681e0d1cc5507517be12ba00f36c795a4cf6e31e21d1c158ec923acbe0c3012b8ce4769de65c6c0d6f715dafb070e9f1b9f8a971c0546deb6784fdd708a177e4c043fc63a5e784cf0c8c5d7639550c6c2661fdad3f7d334e4415296f9f2c3ad1ed6c0d81b29a5aba37476d37b482140245e5d714bd0fe9d09356442ccbc1c0fccaaf8142206260c0643de6d70af25ab33222a9c6b935db3e2e03903ac2a368b6c82c3d4e2ac4c4d6ce665078cd6150b5549402635a3a2f560593f8f274a2f5d18ccd0435f6dfc4ef10072afc4d5e12b03afe292ed69b2d6939466e891e8460bc57d51ece82d0af4b502b852afa34ffa2f9ac80eb58d2cbc00435f3c24a729eda1df357d982b08c39b61d18f34ff7f4b154452c2f42dd87bfbb53f87556248b26a1348d2f74c13b484803569204617dbe41c31cbf8bf48b458160e49492bf3624bf3f926f805bd2233c5ce46b284b04d768b51e3ea498000235346ad5192f13528503a28eaef5ff6c81b303d13db5fa8753ced88824ca1c1364932cab5526f0e93741bcad6ae73f48683f878342c23d84e7b4e5fb46d2ecd579379985848f0f14e937dfcd4e190ec8ea0280f56a652de39e0f1b11bba7f26934408e6c99f909888edbe84f39d0fef306ffcc3cc5393d8e05af3e7221f7719153624dbc0246d4e69d914aca07414442c8c8a34fafd097c02bc97de9a7339da51282c677ba367bf95962fc593cc5888cee80d9e21bd706603b99faf2cb71e2d15e60a8dc5c475d7e26c237dd551369687f4fd6d6ff29dac2fe65fa45bed8aa8a07f6738886a1aca67e11063c9ad52b54e95e01782e2696ab61dbfd9e05bdb987efd1195c1580757e1cf6e42befb2a7b8fbfdb390e0fbbf4c78db2add38c471c463788698cdb19b1acfb7d59d394b6146c0e05aa62dcdbcada0410994346e8132eeddb9c9cb655a385375d0c0c844c5a5dcb027f86fec7b6d6b79931a96b384a814b2592d1ce6b5fa44d534ecf9feaceeb19e398bb2fdb31ae1715a779216f0526ab9b1ccd5878e65babad00e1d4fed4f1cc36b1c0531f19ad403a505cf46161cdf2da0acea9153868ff2c0c52705da915d6e09e65b82f20dbb8777fc2b18e8a524c3fb63bef4e574762078522bb53fd65df85a7393ea799e66994ca92c68c852acce93ee70b60e453062bad72be42e518a9e24b943df5dd9fdf9a81425478aeb75ce4ccf5e6b7979e379d57198878ad8ae3ae2f1af4a81892758cf8ba2e04cc6f94f604202ba6b7206fe1adec54797550ec08abdfb07154c749c83cd90f982e180e67d412213783e979e1edba3256cfe376338030bf5dd53e624c32c52b3407dc8e418e65cbf448f82e27b73f657d24a541f20d16890d9b04ecf8fcab66d6b7ffe7572dc931ed67de998ea9bfac7f99dba14a89f85624aed1ad70999c562d0fed9d1b9e1a007831a3b855090ec47afd9c132716bb8f813bc9274c0d4826f297dc3efac3fa0ab42a9cd698820c7fff506dd6a3015ddeac5e420bea5c1752e50fb189753adf2e1206311578c37dceae84dc7a2913005832fa8737c2ec1c25601bfa39658688dd63147145e74c0308a2652e0727a3969f99158d88fa9924ebdf0d1c35c3635cbd51e31501e242092e9311d73db210c180c3d3657bfb29a13958333d32bc340ab181a17a3c19ff59b73642ebbe4e5e688a3ea3af3c4ca1d8796369fff546bc02e317b8e54ff521aa6fdf0a93f88c18c0c48239b06a35fb21309ef63ae99dc3f392e9eed1e8482866f1a82f5931cd9c80beba4e3c3b6a97ae1ec2915f7a1f2eb545527d08b5db3e95b85ddef6b204055c5d88eb45543c311ba88d2d35566b25144d378c2e84b4f10c6481cbda3af699eb4f546d0e6b51847241e7c60d8f230ebcd2727af4e3d230684aaed256d39583e7887a128ab3a795d351b533734c5373f239fab5ab3793f2296868d2046756fe0be6b93a3b275b7e29a9245247dce567ffdeaff8e9af70a2a10430b8c87710296ed1702b9a37c0c2085fbb87b56dcba008d1d3dfa30b37303c53fb2994cde5e486be1ebd3c074d8cbe5122eff2fefb40ce05fd67ae3fe938d6a367b81d462d888533fd97f00a7c5bb8839d84c89c4f6f703720997ada9de872b19d25dc5f4514f79942fedbd3778ea3ca6d742afe11f3caf4d975bad88f5aa28e1d78a3e08d90afbf353c90d00e4af3cbe5c70cb5780e989c38177fa20143e4331c24b56307bb1df2fe9f9027a80a56791869dcafc204eec175c9cf7020edf645d1a585a6fd4c8b4c2484a7c9497d614afa2ae104e3017ab08f1a241f703a0beaf3447299e8ae38a259f80fb42189571bd350d7cdeec565870f702f08bfe293c3f6db8bec579336979ae60dd21419f116dd2b572ed86cde78052560726ca9a80d8b4992972ec54cd8c6687d2ce2cdf8fddd51e7c98ddae75413111ab3471924d2a3dc341dbf39c780f53659097a514e7359d6ef048be9f016ca203913d191e23d73eb9e0db2d412614ca479b8e5b32a4cc534204c7e5f153c1a3a575a3f9c4504703ac7003606259b30f7b1b1a10e5dc265c6696663b3aee0617d0cdae73fab6d4f3aee51b94920c014d64f77c85636b82ea77263163ba59016d31a03c41e8453308e3f55c08839f4e18bcd4a73fe95431738f704ed6f5dce703dc754f742fbbc8fef7c3a84a845366377e174f267233b8e7b600bf1c0176d4cf87ace94a2f1f57856301783ec40b4275dc3394a0327b54a478e88b58e6e54b5ba09e68c6ac98ff8806cd14e340dfcd172bb163e50411ccf3bad3d980973c1d1f746113a60cb340480926246de4f779b9a64dd14639bc604af8c4d22374810213a6826fb331dd1a66933b134c7b559d8b408698edeb37123afe1f96c37304ad986c2074da6166597bc5233a5ea4101bf32ae797f2a948ddd3edb8dfc361cb82af7357a1517973e41ff5c5001f32e530913a509874eac0536c34e7e23c9b23385284188430ba6a8c90d456da884523bb6944a7156575c9529f0caf3fb40acbf3078386684f67b1c817e573925b00d62b32c706c3a185f0cb22d99f416cde91b78e4aedfd48b2359b0d3f8758a3a43e4816e60cf3402b3c2262a6019caa8f0beee842caabf74968c2b7e7290fb553fce4cba974a6d4daeb42eeb2d158ff9ece8048a5d3e116b010b2b8b450a074fd18ceba9fcf9ff8dd89b979de7dddd183a65c499881163f7877c627848dfc8abef777b6fe0a4407ab169f861046c1e43640a5acfde1b3e8e9247877cd59cd77b6aaa24ef534aab6838a2820dc17214703c17d4f5dddfe95a688e0bce26fb60a7eb8863a4017ea4d4dce30286174d07d41657e9b469c385c160b77e80e2df41012b966de317de9d513259b368060a9b52e89753156744689725e5e079519504d56711859fea6e08df05a764a74aea367ff3d0dea3946bac8cfcd160bbe169ad703fb2b272762ae6510968f84cbc89dd8f3be752a68e6a5c9f41c3f07553874ed55ad72c3b5493e66d8d5d3f2823864cbff82b2c4a8e54c2cf0b395a13a1ca524df369c47ff610851cdcf3f885ed98f577780f44a7c040c82f335ef8dbfe481c001521508502214c3a3f59f97b6ff4f3","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
