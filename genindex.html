<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"3a5a73e354191bfdf1bdfc4e2d40417cba4b85f1071244ffef8388079a5a399fc7954ebd62da1d727d8a84a4627ef72e3e8ec45bac33671d55239c7547b72741a941f3bf06bb80b2f0b21a1b3dc88cc370562c26c3bd3671ccc3a438ae23697ef7c91738f9d9cb0b4915726fce3775f944fc13eade9d0de48d79c98c5a339cfa35fdc3a12b4a6211bc8279e58d872225b7682f768316723bec98eb98eb1896efea5e53d379382eabab3b2dc4d8272035e4a7ccf26d1c78e54e7fbb9b6c85f8082d16de1dc8b31764f916db7e8abd9ce009c4ef927f6345b48b2482b60ff2f7f8cf9b48b786a5be87048916893f8fe96b7197262bd970b77e654d78b696378529fac5e4ca61b988a3c7e3caa197fe4f3aaad3a822a87ba52897ae03487caf7fa3ca5c0f42f2273f776439c1f90bcc8de87d8dc3e7585443e4205de557e0ae7b7d5d3e4b3354ef0b24ea621d0beca20821bb8f06be9b26d10398b9bbaf6111f7dee9017a00f607cb8c1c3832e2aba2c87ede0ad62a96fdd6d4ad9627d6eb1da593bdb7fa2970a52e026c083310764a839ea8d7ec6c46f855e317b83f16a19ddc3fe3f17fd28ae36ce0b0029a5b9ea523bbac69a5b197acbd7a104c014c0ad8e8f0b8212728d909e7970185abb8a8c5ba4693167b425b04d94cb99459b251045f501ef4363eb5b6a8c146894322b36035b00b62fe28e1fe47e1f9a55660c59806ba67723b17539744d449bfceea451a3ea6a71fea1d993a7beac2d047218b6ec59ba1c3ecc9062e6803d93f69ccc733ef8004f2cdfd8346331eeb524a00ea073871a8544f6bdde7119330945cf27f21bcec823f1fb5bbc7b0201689a7e239327be063a7f197a456b25d6d4725702df8d9b38fbcff0bda8115bf5472c2800dbfbc08cf832f48b67521d55e66cad0befe4b85e7571e738f2203edd87fd6d32958f4989f6bb4d7a772c0d2d55649e21d1797a0c8a152de4b1348e7f20b12fdf9316cbd02883f354f66a473a110b11c32eb4f9b33dc2109c243cbb4efc2e4da432e12e515b35b863b45f0bfd26c4e23daca350c4118f6ff30ec7ce20024c49f14d921f46de24e920d80789ec17f5e9370a528f113da0723b1bd5aef7da8879b2b08ba47f7e3340393f0f81da4e3231dbf9d0037b884e6029a311775976b77187cc545abe07b1ed1b8cfe46d5baa59ffee570e41a61bcea5ffbfa433a70ad52ec6b270aff5d95263cffcc4ac6ce69619c68b8313fde156ceb2faa838714a6044274b40f598e3a7600c545db1be6aba3c492cbf4fa0b3d324b82954599309c29d0c99771fa010298bd83db500aa5d20593139fbab213c1493766e17efa77e476544b91f618ed8d3af6091f754b55d0cc32c0158731e548b52668124af7ec27e6d75f91b6b4102c227306e55ec142329621fe13e192834399799e33b97af38f42e155e709d362f32dd3b8ccaa901b88fce588aeaa597c67179d2b62bdd73f13d7dd9fea373524b644e80c966fd0238b2985266434f5ff584b0b2e4d0afec5c62c812491f7b7ce80ba56bfe9f9f1cdd90e6ff2c5a80f4873080bdfd90730e68a16a46bf67139091893be984e8179881701b929af06199358dcc2607964ba7acb5cefa7f4524547329641ceedac1f305b8b114d4524ac87ec3694781f399f232d465866488e302f05f6d7398430e855a44f256de69cb8b0e50a64a65e99e76d7a9e46cb44c5ad699d207274fe2ad7ce8e24e766373c037196f48c1eead73f1945f67aa195dbde93a74b22e687b403a899210c00af2a0ee4a9f92bb5d8de4861b4394957245316cd8f4810428d6aac73a89d6070d3b6790ff775c880ed9d393e9f5dffbf65f9d3d498fc77eba9d0ea0544fdcb8266e7f299eb13ae0a623bb3867d5f127edffe0b54249eb54e7b00470259ec6b10003ba30b70a152eea14209ea717874b1baba937d569f135736eb03d36f62ab46650d30b95d2ad93984acf20f3ba25971d92a0dea288b2f4388dc400ba923884f4934bf49c9ed5baa6ba2bfe0bdcbc5c4ea702388385844083f046fbb1732218dc6812341bf34d5be07ca26ef378ad69c0813e62b5b90c518e195c67e28a5dfbe7e64eefcb05273b25cbf6cdbaf1cf6c21cfa5feaf5537c046ff6ab0ab92674e22b2af9184af24483a42764917d18cf6015f046733dc06c76f006f68314637bdf69c15e017f6da1c1898534c8577012214c4300b80d109b5012d3ac0b0d96d09125f33e7e08160104dcb8e8a1c4cd673d1d91caf12ed8cb3bf2c81f0939d3b074e08b5a52e41003b267a3cf6be71bf24ca456bb1879918fa4c69daf7e6d590e53e8316635351f1e8a09841dcf2063e1d4ebc2d0ca44d5193a298b76b08bacfef1885cb2b06fae6a127e00e019b711d8166930041dc30dcbee9b07670867f63b4d6a83dde6b6880408761b35a353f0395e9893778c767b390add5b4d5471144936d364f4587d522ffcb0627ff64ac4ce44fd1552ae4aaaa810f73d718c5a4d79b2756f1b7d7bccb765c05386e2b038630e184b2ac5c922f6d69bb89ac3d74ad9770636c5bdceb043f6e24c68f0bac376d02b1aa8430ae05ba71fa98772b1199fcf5a2f690bb3dd687c9b45f38959c43c6e470c9a04d711cab506ab2d4c45e22cca5d131769fe0afd343cd845d9db09c55c82dd57b8b9e46634759e7e7f0916bc15c5fc49ae28a2a6377fa587237223e63162b14d27a69297906ef3341af05f1f7a18c77e8ac4a01b3067af3670d3e0559372dd0d3bdcfe11e7a970f1d37d288643c134417a100d4cb73400905397fd260bbafe0d296c791a3374f48b58b1706327c0a53d2622ec5aee97b4bc87122f50ebd0761e5883bdfd7d7af379da28e337ac7acec73cf9dbbfcbc876aaa462feca7ccf2a1cddf8797872880691fe70ab85597ef68f3629d93f68728842eb5393125175da2babcc38b23a15f5796e20656227f767461ba8773b824e16feb3ae9c8bbaa8f3b50c42b7e4ef77e9670ae338c5346c7cecd3301eeda297606332c0f02ae932b399c12f861bd1cc8fd277a4951d0a1ee544a27bdc533409aa28e791d3f0c2295f499e05c252585244e31cdeebab75b3d3064d62c75a812c147d59682a716c25b30b9037333581fb2a28678c6a510da55751b55e430d228a283e84a56c974fa7ae224f9b21683628d0f24e21890ff61dc4757449154ced09710308b3db1a0885848ccd1a5e8219fdb8c2f918c0b55870bbedc52190ab2ac802374a5952edaec0a01047601ce67cab12d7e45c9e442de8ed04bebecbc34fe2fcd9c2532171d2b4554e449000c12ecce1d090386ab9fce5f1c8f31042e4353f3ab24368e08adf03b4c5d37237d48233479cfab6f192458a54706972c7cab162170279b120d990660995a1884a63cf16f0458d0628f417a8aa8927b0d81da2a622718c63b6fb61307023172751b55b8cab44e8c6fd8a13530b98ea9be0485303042f2d04539485ce11b4e255f5291257e37bd7a30a5fee7dcbd317ec80da0f49a5a1ef48da3bef4a3ad4a5ae6901b22d591bee0e55c4f98a82dc2e84b4bb7cad8cc6a095ecf235bd66a46a284c71d6f5df431edcc8ba641173d37adca7115657431924fc3678424bc9e2065d8477b4317efb6da286149e80b03a8f955f02599b66f0da79fdda1b1581206b3be3c690f46cdcef0eff3e2dbfacf8cf72e2ba54fe07eee925270b3c7d35648b4b527e84003b38806cbe78eb3672671fa99fb082b6e99f63a58b66f37c38e88f1db1d40c6337bd5a8bd149b117f1763c1358807a23f30324ebb2b7023093e4ed713d709c24763b376f6a2e2ff719242212265fafc7b8deec3697fef88d3fd1fd89bd5761bc06556317dae34a96a9cc8d894a16c32c438eb9ca718031c8956630f1776401fc193f08a7ac42226297e1afe0e6e1219816a2452312199643ee81d3636131c1f910ae873bdf00bc83e7c8240cd1b7fdee98bbbd5daf48704937c296a2dc901bc6bb1ec2ce52b8293bc9958cfea12723a89f9423725e444d391a10b8f15289fe277c8ade857d7229243099c291fdae0e7f220eca8781cf909f6ea5a89db927fe138dc1ad3e1df140a041aa8ca8382380e4806d5b5bd8957d20be71d164658a52791065671075a92df4baeb9c2c0f03dca581e945978d0633ddee0f5c5d9ea01cd96c8e71a8cb8758381b0d8fd42ed22acbf5e06d318206ee741c74478c598b58e6e66e92e71109d34d1c2bc327338c62878ec3a3b1dd8c168fb6f3978332f6b829522e6b14f896795ca408e8be3a1256e057eb9a739350b838fd582ab2c2eec4b33a5a5df093644b5b9c1947e74ab5514c7a319bea39606af3b9bc29dff750cd164de6765eebc6db969e6834b4ab994bc109c7ce0bd670ff6ee3eb0cb6ed7d75bc37ede0e0bce73dff87f9b551f4bc7b2586b63b5dd9bb3aac7efe0a7a6b9bea44d52aa5aadfc434183d9485264ff095617d8797ccfafd6ba7784049c69a50879a5004793babb66ac99a6ea7bd6e080c20d240a0f5afd8905a6ef14312aa1ddeb2006aa9865df4e9d043d49495f6bc6a07943dfaab7a2365427b0bb6886b756f3e65487b47cd87ad5bd1ce78fe9944da93e2b2343db3d46e62ed6a403d9cb87efa8dca50622e9a7a9fb8cfffca227afbfeb0379023aa6a39817e4e81d7db68873a4c0a5b2716aee52df5469724d277b333943f21575572e9eebb6009e7f67d16355a37b369158009971aef4e6803aa49821cf5fdf7a3e8bf37f7f7161b67d041d6cf96e51f6f43dd2bb9551358ac2fa2f31fd8b73bf34b46e70fca8872d28552d69b3887bb54224af877445279283f958cc757fbfd8c9268c7d8dcb5009985ecdb90cf01207131b77fac4e4636bfa84263c27f44307065518b1a5ec24b179fe7ed12f2822ce5ffad815794c998f5c6cd71bea0c2ed275ad59be6f5b369296e50c52f7eb28871ee8ef6af89782634436dc0562cb02dae6ea3994ffa40f5116cdf2e23a59aa65a865d0c75c94db46b640960a5ca51f4cb1778e93adf34af5a31abd8dddd74c494c7f50dfc07fc46d95ae912398a7ae16dd38515bc05ffbb8ea24d876254d39d9cace6a411440af4bc6aa9e11f09a2be8809d76f4e5d0d23784360e879f1ef448ae0ecfe76fe503dd29f1222367101994b98d2dbdbf602471f4b24dc8a5ad8c815c33ab8b861745104c72355e446a2905b9c9fe963f48461fc43f42fbb0c20bf2cc169980031ca0b09b33bd78617ac4e5db1d76d35c46f5beeb74e7c566fa487059dbc2e642ac2290e35f407a2c31fbb5791be8be0fc74702cf9d01c1b6b327dc9e363f9f65136cff4be1abfe2f31969466883d9ae0c5861a25ceb8a11959c2e189deb4979c3cbbdfb0585bda16594ead0303d39720ca078d512cbfb81664db56da78ff83759e225d29ca5a1a1c8873074ce79f7b9dbf181203b94ccc65288eafdf10d4f9c9c484cd0559611a8920b80e0a88bf1d940a4a8c63eb9683a33700d5b601d2212cc5560f056535d0c62320b22d24dd4c4a9bb79c4f1bf55f9866ce1e8167d146fa82f3d859bad44ee5ebd8656a482c8f29dced29e669c3d23cf5d7a228392bde7e078601d6d6824966b7ed5da53864d2b0fe65999dccb5a109793ffc8ec51af158d96c5679acd2ba312dc9665c78b64fb61a01fb4bb382ad5bac22b517c8102e60f68d13fa51d63df18fd25aedf88972397dd509b5d58dcbfc706f7f3ca6aa528013920c395a375e3d090b9e3436d04f54768fc9f99a2438e6940bef6d5f0a625289dfe9ac4c85c550e56d001a615459fda6e1908aff63cb1061c540fe4d8ade3776df9dd5df9feb5c91dff19a3b35c20618b2b7cc90385b4cc4ae7bf5578cc2aae11daf615c02c7c103010f6e0dac461c4ea583fc07a0943a399fbc9e2e863d7bf98075fdfe2ad6785d4520ab57928a5f1836c926a80641c10b525a767dd0c5dd14f5606b868beda10b7b99ec850b8b8e10596cc64c60b273f97cc5ddbd368530de09f7c1c98ef70cdab6b9f1d7ba80e32448c0164085344da3b2321895347783b218f559456540e0fadc6eeecc8e0656405d90acecb83b36814bb7554e4dea0744c5865fb14111d6d9d54110416500d9c614bcf2bce3df4fbcb31d89fcc4c84e9e93d86b38adf0ecf131f864887cde337e7f316d68c772fb44fd5c9472ab7f1d6856e5bc5ccc7805961a5d5de985bd0b744a819512f8c3522dd7256194d70063b2fb8e648d6b751e4f228d03d8ab4c52b60fbae7c8f78832d6ef432144e2a758c8fdbccf2bb4d62605ff5273d76373d0c77c3eb785bd7522cf0457d96fc909e33b25de38437914fa321f47dcb18e774cb82fdafeadc186bbc88b55f503201e54ddb3bbf63e68f0c5958d439e8b189eabd60c48177de49f7708d84d7288bb208d29de99f06a946c8a93375e7ab5294421749488a1705604b93a869f6840c7aa3bdfadf0057b5e6a982c33610d2e6726523ece6ee4df03aa2ae4535be85b44d33a0aa470d6a3795ae0fa190c4781628cc6a934339145b78d327eeed6765239824e65639368a2b8580f5d277f26bf390972802c67bf506d28f31c199d8e13b947e5b1dfba156a4c7d1174467a4adc6ae8e04a818627c5535ae5305d58e37b945f48ff87a0edd91f9b740e26a4e876a6e0bb27643d82716aa7a88f85fbcb7d41b566dc8db6bcb69c245693fef8447e4a859d33b2615ef7c3bbc1505b5c710535fef55e2d7bd3702f16f9c3b94f11d4d7204f390b25d825a66d2a5de3bee84b9be31db48b03e14ef742aa54dd3d2530dbcf56d3274716449dab7ce11eddf6f57c2f0eef50e2481aaed3a0facfe56724b0b3dd2bfc58d750dc9088c46f20ad208e54de2345ba2560c77919a4f06e9e3abc72dc8aced34042ebeaafd9799e8babafda4aa56cc431abbffbc3addb987e39263e7b1e56d0bf98ad817b1e47f5c2ef9ca4763988032e22c256d017c5a1ac5a4cc98bf7562d5ad97a059668a38caf9b726d3c74fcf3d28fd0ed3a5c02c077aac796c8281ea71a2397e5ef53c7518eef64418f254ee1c3603edc72ed33025c7ca8d83ad72e9754ffaa1321450afaa197ac0c0c619c579b781e542066c787ee262ec5c559b511e1d01e6657a84d007e0772a1172a1d60068572a92fa5d3ee746cf12477df5a8ff9fc2abed2f4845c43ce9e3ba6b1f2cda9ca99b422a8e9cff404b9a1272cdfa7fd854372c3778262eb0465afee607446b2c40eee80de9fda68781a78d45246a3fb3276027f1d704800153b537204edaf08a1296d2121102a5058b390bd7b306bf0f5de6dab7a8a0238cdc66b177adc3c5f7be2b8620f0516a4e696fc1899ff60c821913a14ba435c9dbaedfbe9927b3c27431e02abdb892f0e34669ca7f101b42c6b5970898a01e01c74fe74ba95bf4bd263d1e54d93065a9d2a6efb78494278717fba714613e357586727034a651c043877b4c65073f05744cfc22631e8e9ad4ccf176d522ecdaaabae647a5dbe52fbf66e7ad1d9c999dd5e6f542c85ceb12ca10acffe70fe49a056d90ec08e1570e54498ad98ddab5e4b5c5c26e6815e218219d9e9344988c2c82a464ccdf4c89999d8aa30a1118fd5d710b50bf33be9a7de6726dddd9c7bb808ce0fbf0fa4115bda704469bc32dce133b06c818328cdbdd9d795ff65ffa8d2b9d225a09de8d1b14b811a4172427da720da2b6da25eee567403ef88c1e6294ac8e94c992206e31a866f4a6f8f7c1f9e24f510fed14f6b86e3236bb0bea856983a09db11cb5f90adc637c153bfefdc4c1c924a9d06c94e4466a8d4723cc6212924348f79746effa26704888a094636ad909f1b11c30b0b9a406786867d6299695245b4ae582e964f4f05c6b8653f54ad5af7a6ef421541fe9ce33b545a1a699ca1de7a7e7a89ca83fe2d5ba84e8f20647bc85e38c00f0d5faaa0405121a1760a7f318ae5af1071175cfd02c6488d8f6e5429b0b340d22e58a937e1d7d625cbf99a32dd31b3cbbd757d3e4a59b0fc23bceb844f9f2e3c738f23a3c36f8a7b2aac3c588febe32e61b26926ad49e6fbf26e8910438314d2e14b0c1aa2443c4fa84ebd876d31e68b14c45b54aa2e2639e3ded73647284da13fe928c22b37d13df7ba14e0b09fcc392fed5b74d5e4d46754ef50e3516c862a7fb55c3869d7f3e71d8538426c9f5b47ac217c5fcb91ee9e2e3d3c00e9412319a9977f035104eb62e1fd9572d303933d59f112bd6f009f031360923964f9a55735626d0132410114544842b2ae0c9ae92125f981806794175a7ca21a1db0e26ae59d262b7ef49bf35038d1588f10950f835323bdb998b4296c37db804ae50701d51a5da61d5a34ec72d1d5eb5f69c67caa924a5d9a3ff6f283b5a1364d982652ae188d417d6dbdb9a7839e1614169978dd73f4692816e37e3999a06277b03c3b5f0904a9731be121efbed8d3b55b394bc1a6d117c35a4cf05865a0c2e6e18af7eb48699c0d1a558bf3156f4f93c01ee20bd329110badd2e354a6a509e190cbc5b528e6af49fd36c373f8e5d74ee40b7f4cd9cb17e6c192e144573120aa28c387f4c7d404a2fa715dd4e24f4b8685d30f590140c48012b18b0c013a3177be69bcb9aacfbe0339a6a21b5e5ccc34684871cc624527e33b06778e0f9f93fdc7f69014fcfd5719180d8ea750e5b60e994dd6c358a7940b7ddb00eddd0fa47757d66282739667fdb817cbd087f37d412204cb399a1097a3ae64831b2f64f1f5747fcc967aeecbff4159b830fd4a7aa7d4728d9b651adbe5a197f7bf650acd52b4693930af294bc12ba6765ea34faadcf50df9e8d254bd9fbd922581cf52223af8cbd4a9702f6a69201d6dacdc9cfbcae0b85f6f3a6dff488eb36d7dc43a2e033e10d0961252122bf9d3395c923582ba5b0d5fca6fa91cbc1d9924630e0abcabc63f082f8d342e00f4c94cbb9dd1bab5d884b924325cfbbf8a77a7be6ee9d8d5b456dfbb4ebb3af165beddf0cebd9532197661e35b0eb1e9fc953beb0bca5f0debc64dc63f95319f796d02a49688552cae2f1fc94c660500ef1eddba687c445f2504a7016997f05e07eb9082e7744081ad626eec1fb9a2e008eb630d655a7d87f21c57ea18546224533f04cdf01a2cea03d1eb87841f159d5fb6630be73c902941134b5a6a1eb7526efab3e6a80ee5023723c63d75959f470f111102706a9d1423803794a4083142fbc1db4cd29ee242010af7da8506ed1be367dcbb8e0e2c382e4dabd8add5724fd4cdcecb7067dbd8cf01056dd7042152b229674a896e2f86e1abed9a78b376b709af2d474e9dfddefb7ec825a93e151caf73f27f11b409f65aa1632f7840ae1128f30485f718656b134d78b868e7022f7e127cc3252c24d4748dcc1bf7c10add67413e85007b09f21f644a6ef8392ef8cecaf06ff3f596306f7e779673203e3886729a6ce8e30d8dbabdb951bbf11aa54c519888b6a3edcee7b909af2bfb58f3471aef86d144ab817157abcf7a7c7c47f320958a85846f36b41dea6b5cf77e27159c3dd583f1e12ea5a70a67714954bd4085c976061d15108d465c9fb91fc010294834fbe65b6f64825c37131d7f99134c37d659a90abc99c75f3db1ffae8a81adcbd8b2025431e94473bbb4c70c826ce2ff727815684579d7e1a0d35a286d81c436bc391baa1452104dd2d509abcdf25b1b644fefd157131686d149bf82ef54597ad44729e00aef0e1ab1ceb8f5521f71ca7e3a2c7f8207d7a6912d13e080c560ffb42b7ad98f36471ca356c18ca29eceafebe03a5370d94bef31f266bf36f068597d7d4cc850ed0ca53df07b464d0be9c82ec729b2e23bb4976418ff210553bbdd6f2b310f3d2c8aee3df0a4eb6870abf4bdfaf28839b0de7a3f4e74da1dc3f8be9476d6ad5bbc96549c4804924a85b34d23f19a632703447e122290a4a94c7995c224cd3723e6f09ded8fd9191b8dda9d6bd774af08393373e50a417d00d8dbea38723c8fca89c5729c212d95f50b298d9a631169154b1e74a33bbd9840981deba67913c08d8f5d6c38cbd0f11f8282d1fc85bbc706a80b28a3b7cd6f5eaa405eb4db463405dd00b461d8aa299d1ba602cc1d1e254c83665001cc4b8407af4d3c2371b453f92009b82140ff7d3ed2050bf1d547bfee892ec7d57db13b366f7aecba86adbc67503a6babe5dfd58acca566d207d4d92b63a37f22ee454a3b73d9f749c77b60ea83ae6bff96e5788c0edac72f029e017b0384637c0646229c31edc46ddb7b127daef9c158c2688ebd8fbf7248ace61c066c46ce8595d89786bc88ed3efbf906cd72edc4cceb54577e3c176e357e53759aba47d5cccc3506ef1d111600efab1be920262d3ad4f6cc78adc19f25b35241bfaf5d2e546c49bde32085453e07bb1a11daf22c6a95138dbf68790e6efa5791006ac19ea2c4402275296cf75436f156eb6f8be95df594426ea45e8b9378a625faac2f0a94dfd68847dbd52fec5f90f64c86bab405b4e59e5e41672d6bebeebe6a30bca4846efc2b49a43fa25ddec525b9bf82deaf94fe30ec3e1ee17385759172d14d62dfb367e51f9a337d8b07c66c9dc822d61eeb33d6df990059234992e6bc252da3d65f2d274936a2d5a011540871c00a62797f05c2805fb88793d0107bf05bcf3aa89c40dbbcd10396ccfe60b22174276a77b7873a99ed394c4264086d9b2f18bfff6c9df0fafab026aa80db273764dafd44b1db6e01eea2ec9b688a91c519c5228dfc61b0de181b41e0d1d79f0bc1b670768a2a1f899d56274f7f8f61f74ac1b3e493bc6b614fd5cbd5bbf13c4ee663ee4e042dfb75f3f256f41e7d2c5eda1dfb8270540751eed1e101c86530c2f645a868f2e727aeeb784a126359bb35abe9aa7292c9013fca2ab6dcb04a3c38811a3786547ae591a530fdd0911caed04e8238fea8f2c43669f4f200bea61320fc50fb176ec8be3083d4ab6c8e3817ab34a2fa96d9f9b941d5fa0b354a7bb3a1f4937be9d9952526d49ead44efb1014ef1935156861576ab020ad3b9047cae5a1a7195443309f7fc87f7c8485edbf7bdd5a9d49d9866a9da689f004888bdcdb403d85be3e379c1db157cfb6d2567aa28483c586a1b5e52fc1c381d5fa6db0b5d759ea0bdfd3cb7802737e82f668d451bcece7a29636e3753efcfa61c164f3919410f83495bbc23e592aab57d93909b0669c7b7da839f87b51d253edd6cc4b06ebd73089a6b9fd686b9a325d4f98dc788ed26ba85868b9b74822f737c95e1bd7b359c6d07260072f2d1c463d89ecb59b98e39b9c0b25d83e71447af8eba63541074bdf38150fe3b846cde7face1efa202dcfaadc5ba1721d17dfc53bfcbcc7d182ec6b1727f0ae971f6fa3fb8d2cbf1042be491e013be87f324b468a4598a4a8e68ab09d0b73fa797a2befe7300ac8e3243348f3d1bbba33c7f41f9c2f589127afc2f4d2a650339aeb243a657457a8dde439e304611f63dfc499c1fc099c74eebd04a9ae10e188140fd69066af19596957b394659e68264376b049855411f10d84a4ca04bb9055e6f1d45b9143b7bce0b9facd282fb31113b78950f22a1303eca6f486b7b4ea8e5064efa9d06a38576ab754994786cd31fa6f42480d1ebd9c78ccd639e740a95d4550d81f45dd200f8de6ddecb4c024cd063ca04796b8c24cd821c031bf027aafa0a889be5b2bbfd5286a0b8baf0be249ff3ab6642db80876539823aa58ff354c9bc3c9b5e749ed2428c776c5f592941736244ec58b9caf335229697a55afa3e2881c3c47575f70f07ec632b50fc9d87d78cb0b3c1e76efdfa9702c0d792752dc41c81b934f87c74de2d3a05721999efa2f4fae5f6914559236a6b0268c563b3ec2b63808b0736b7daf46567a4273dd7b272a5b04a7a640bde8c612d0a2a3700ea4864f725408cacfcf7f8899ac27e51338aeb578567e949ec3d8299ffd853bd9d2ab864976f5e4230dd67bb1c95be375542ae1dd26769d916d04981e74826ff4a85c394e706ab1c957643914d97699d9cdc40053bce7d3406ae132b84a1d22bf8ebe0e7ef1486e3022ea7cea53b5d35028071d7cd84b0d117021e217e99dcbc78be3dec6eff2dbec5b71755c1cc71812f1c99c5aaa058b82e6c6b8a9ff65569107cc0a4202cd0a44faf7ea853f9924ca40801e3b2a6f957576c9a6370038f9fb5ebe9c0e3a2b481d28faa238d793f28014bf06c07c335063a3008012fb901997e756984599272be85b1c5af919bf2a25495c47713fc4ff9a43146ffb2b900cde43acd68ede6b33d3ec4ecd553480f65b93facb2deb639e5e32e6c61f0797a9da5d04400919f680d6783a289bca1ff382a0d564620afc68e8fb0c218d35e0420bbf52d84ba9a7b34bfe95b9cc7ee4c1356b767beacbfb7de0b7ec456434cf27b035c395e894ac8974039556bfe31a340ae2723e5b8a6865567cd30003a1655d3af1c1971da103d683c7bcc6c6518e3a46321d7e3632ed64db561d4b8a53bc53d9259230ae5aedeaed7014449b87ea6e399ad2b2f3c16b6b796678fece1265ca766025fcde8dcef11ff05c51e0036112ff3789f65c37694eac06b89076f14492c5c38a7ec294ca0982470fc3a2ee48d92c65742007f9afc1413eb704005225c9b346211fc8336e215f742167150045757f93f6fb71d2effa40540b4f07394d0d937f25057ca6ad6fb81fbea024b6fc5e3c8b96b42ecfce5a61ff96a18a4ce18826b250cdd60aa11ecd0ca231101853e205d88904e464978ed53a7808faa2865c4b97739e7725825440f4bd59a7bd3e6d74782790e191b8842f5a0a55d86afc7fdef3545d10c9430def639fa4e1b3424c939f1d90ba4e6dd4481b3c5a368e6e6bc762c47bf6f7214f7c6194c8c50cea884e87790524cdcf58ab0789d7229c10a7cef5b20075d974519bcef35ece039743f8f09958498d2b4eaffce4a36e7e0627022a18fca1e41774b014bf6d0732dc90179e772825a88e628e985aa1be3feb7cc9f341a5ab9133c3466725bf1fcff801cd9b9d9ac594257b7c63ca72e7687b01c2cc43004bff8439366826ca221e0c70db896322ea773790e47b578fc4a1f5ffe1fbb3304ba693b9695ec3fc7231805eb1b75aa4a26eef6333f93386dd92372ce82cbe9cc0e7f28ca5228ef9e6bcff59a2122ec6454a98b94bf6eaea721c1bdbaf7af2a5aa8014774807a3a9e48165fd9b25fc701d41827a734ef6112f3785eba79d1d4538c9f304fa58df36b49488ddbccbafd46bfe5d6a57aae5d58604a4b804083130c64f166a4011ebd2f060c82ab74a2f8aa140f7b4aa40026e2f2a26af967660ca657b9be55c2d34489e4552165ea238e64794d8aea6718b006bb78d04769a8dc421d077b1d4b052df0a0362344beb27d03e769ec14bea00b9b97dc376dac3aacb9ecee5246e62c7bdeec7bb32953bd1754e68622eb68e398f5fd139d45810b0df39ca78be7729044137e38937b538f11dde7691828d947591c1b3472def8b392305991d6be066d15f2d9594322a4734ad80b8945e995a09927e6858575a8d9f573169e5bee64a222376955ca533084ad3cb985ee99c908ef8ba0f54b5d0ad2dbb6bbb1fb34ab0ca2a5da8151114b8e721043ae7273829279a6fdbfb785bd60004256b19b6a08bee38f3077dfeae2a14441dd35a9c254f5a8e4bf0e7edc960939a894ac3b58285ca52166b2cd962a4bbf95ae3aff38d3f64e2c555b5bd6966fd37d498560f7a87230ddb74115974de22ced85ca0df33a78e2acee06663f13425018be4b0515eb354e495d740a1eb98a99fe1fdb6bee549ef7f3a50d24b2f7099d21ba00c39788f97c26584d9f0250e78e1d456a98230ff051f3a364ee4e62f158123107af1266fe778cd86e0a57b4c267ea5499bcd155d7b399b3ddbdd6ccd19afa96b62cb3bc0e38820064793998f83a21eadd7966338f0d293a6c1ef7d02fb974a641adf9d5fff19e1a4b653b2ba9972137c40b9ef2dfa633d399ff4881feac5d4e6775836bfc180205b5e56d8ecd2b794646d425cd40badc8a66039510196844970121c24caac40391a7d25be529cc607448acfa913bc5f345062a1af934b89d9c700dea449eed0a567037e55c3229d457d5e21fd6c32ae6c4e11485579781fa8bc9d4f244cd5f56c05a5a35d0653201b250a174a70915cf64d38630a4dc95df8a15eaa6d150962249df444ee6edb7c82a35089ec1e1e2ff8e716a7ea5f5543fe309fe5f937f3daeef6d00afb97f97845cb4a62be304594e8f7b291caa67e6cbd5ea82ba3e48dbd6e2b918916bf05abf31759b5e3144dcca750585ce1c6e69db02dc6180999e9ea2aa3187fd3c40bde6ff73b6160062c7eb2ecffb311ad567247490e15b4b1fa4124594763dbbcec6faeb19e7fd759dab64d4c90c2b8b545dbc785b038d5cfb147ed841d40e20d81b640551afc256069d39438b4da7de4aa13e645b81aeb1110f7f798e9f96e0cf5a9c7f870fe3d9b5ddd7ce657f53bdb46f9f6b60476a3fb056861fe21006960bc630d350afc8fac5bb71bb8a4917b0d541da46dc56d62b10d4fa5478e693b1669ca040de99a9e1c1075ce734c0602ef1f80f8c29e0c315f674dd4268fcb0386d0c7998dbd68f7055aaf10480946e021c1b191ffe72d7f0fa96e72214b91e759af594137a7d8f394fcae9345e11b98bef8c322d03e405ced6f04387c35fdb1358043e129f7d8fccdae9558072404a68bc69e5f5e91822df23b3e13519f45c6f60ebdc0d0387146d3e38a2bfd4cce4af066bcdff11a8c15afce8323f17de01959a0b3783780d58af94d20ab7e457a19118a2c0d2d08ed0e385606d5192db3499330156bc6ec0fbc06ab6b1cdf88cd481708d4303944d459c5d3609abf5e4fb2837fd80b3a58a6a72d83c8f6bafbbf418117477bbcbbfe92a10c27210b772d3183ed4b8cca948b8f17fcf4b8f276c5d8ee96d86862b0e0f52b474bc230adc0547122deec4ef86051e86562696f0af0088e38967887911ca7eef616df39fb4c3bb855a5710e564c6759b93f5cc36cfbfcbf8b9c370ae613bb5ea23578a4c5eb66f4c2fcc96ead05a423edcc2b31a2923faf6f27552edfb3d3fc59ff28a40a6fe1b7b798caff65902aa1ffd880bf77381cde984daffd87c7f5a068bc7d2ab2842f5e779900aa06371cae195f5e6d994febb8fd81f87a19e15af7368fba57fdd29e1a8c6f8184ce5ebbf929cfcd63ebc20d939d3e88a6b9cb6d0459865d34bb6ee29ab82b98e9ffe1d499929616e3b19224b12881a991b885fbbd9b6902bbb3883e668f0084c7b996a82d8fc6668c394976c0bf9fd27b7b432f2f60428e06890a75903176994d061b4cc9d982bd7b53963d2de77008f84ef77538a8325639e4717a388516e5327321667149633149de7fc2ca2c7445945d8ef6cb842bd80343d66c0eb84058f13c147603d3d52c055cc281f0442994bcc2fd3330cf1cbedbad20607e3ef1303065eb8ecafc4a7aa9b868c90260156150ce438af6913858f5ffc0609bf984e646f5c81cae97e84701a49f2912bb97840c874fa0256730b04484b646d1cc02d82362f05ca4ea888e1542f0444ec019b3b7f719e137e3b565bb6e220aea84a2ef450d5c42cefa863c79295e2d0fc6d92c10b598e5b7f63d41cfb9180390f20a9adfb6dc2c1794673287ec7f4aa1bb8220b353bd78b9f78709f9b78164244303f83251c192b164f887199f8fccad2f8485df2d6ee685fc2e778262ec62edad74536a51687e4ac6e9de21c1ec7b1d4b9afd4e28f6598c8dbf0e72aadd6f022c659627f86272141ecdb3bbc90daab6b7869e79095eb8080937dd39fdcb20d7956184d3b6bfadfd13d0f3afadc6ce01608f118611f4c7903c8fe5feeea3932953ee57ca0c5b65e924058c010aec36466513a1cec12ecf6f0bd046b2ceed6b853f4c8f613d20362520af7e29e0dd6be18ab4c3828d0de81cafb9127f317079fd775b06f1f1444981c9773848b3612a45443ac3243e38ee8accfc7fc985e6aadfaf5feb7c4064bf74eeaee8be2923c9624e7df5e6de6775854032f97ee82bf2c989ef8cc9e238e67220f1074d3fa2368a8ce79c8df162b1ec702992dd78cd4cca3ae047751bf6c56a2c3a9b197f53c2309d07b64153ed2b866c1c49cc73a63d9a0940a2d685563cf7c8e9dc99081efda803d058026e563502c80609ea749ea0fde2821b370c6cdfe3e3415e11c5ae3828779a7f4113ec0c0f26c29b716c29f4c717ff471c6489b2210c12bc8995ce09dfe4abefbaa5c1ac86e76ee4c6ab0f4c6add289e06224c99ba10b96ffafeb0a4dd91a0ada85976d196edf954609df5604a0b77c8fc48c79815405df1ca7d7510967683a3ff620458dce16335e3d558d33432b404bf61ee70123459b3bec0f2219dd6eb22670ae7548fa074a1d13f138cd59f4c6e61b2675dd2a3407bfd7818854ca1423505873f718716de32ba88bf2acf1d9bb5a251a3657c0f75ad4de1925eecba72d8b8c2f2fdaea16bb41337a2ed9925e23cd9302aeb80b7b1be1217521fb1f55e043e1b883d9929629853df6fa3141e90f1b09395422a192cf40f90ec6a90b496674ddd6624d225b51825d86ce380d45ae5f975007185d26b67afa029fcd1f2e0a4da77e0b9a9bf831df704723a10718db5d28c626b97a175fd025c4263c9b7f936ac47b1c62cbc337c9f24e3e7d7a6779693e6759cace1d171bf2bec1f850a14c7fea88773db207ed450223b0ac5667645febc383ad9f8d62e70c703e013994514a907cd86934f61d53fd24377d8916f427e4ecf94a08276858870cc0b67d930891201b6c3bd7c17a7d732d7c2a4ee4634c55cd78c8fb618e8121f4c3ffd5fff557c590352a13cb61ec8b077bad14f0a626628695bf1419d4783912da229d01de4702ee21d8e6f94b01d50de882ef35fd6b420a8d735a63c1359e0dc2062b2efcb4f18031f2468d125efc894ce37cbb5158430220d6ed0b34e4ff0a7780765b5ca905805352155c4f8c001a4a37ddadc61c4b0d63e08b34ab138d9c2947f96bf1ffca822743a23f0a89e64f9ee25abeb68a87b569f5ebecf9f2a5d86b663d10b46ba3b73ff0fab601aab767b119915078957899c5788ee2379b8422e2b6b0b39028231f2eeaddce902601b3e4c9fc00171ce193e63910539d494363fb7e4021db9e81835d344fadeda049aa9cdb2ede4b543a42131e8f1869bda669bb0314f6f0acf710b4dce81e8b409793bcf0d99d8418d9a6a46c977fc4beb582f38836c35226059e9ac1a3b367d4c58b6d547fc5bae4146b501153eb9396a08b87a2cd13ea9405b644527ad131945aa5fb76cdda7180025b6950168bb69eac89649fd4196aba7d1bbcae137d419b8473859050761069bea3a3e591370d6d8b140db4680ba68e3d494663989750f730311bd9be388ebd115870ed64db479c5bf786631b621d617a78ad701af6b6582f00c2b9bf3a63719ff8c6f5689b4c3df71be80c3f0128691123e8f6af4ed324bf81b5222345c67c25e12f3a4d703fe96c864b91b56337cb257521056962bbed1ef1044d83ea18fbfad6f2131afe24ff389a658c64469e39061f2f32ba9bbf0d75c6963722f42f0dd32206db4189acf3d4edaf2f753d195e32db87a1b072e96d8b944613129ed7dc0bbadbbc3ec88a8ceb82f488e1f9f57688222cbcee16c8e3ff658dcde31af9ad83465d816483e8373dffd790c0e4d6423fd463908a6faae27e40fcd0bfe49d7014722ce38d92e2b7acb7165537e801bf7533e4fab8c56284781f2b37d8dbd4bd8c5792926cdaf007cf9291622f8e3f86e633eb706108f14a55ef450bef3b05c9599dfee232a02096679cf7b49cd5f3905a7951acf551298617086549a4c704b72ba13c0796c88d9d92dceced3f22b167606248cb30135e45f72d0b76d1aba7a69befdeeafc7ef7a52ed1d471d85ba8b6817729e7cc7a2046dfdf947fa4aed37281bb3da7a6dae161a6dbba998340e4834ab6dbc81a644bd1419825970918adb4d6ec2053c00e85404edca6fde5ed64edc85e0b9c3af845148c40d6df68c93803dd809446dd3dbbd1858a4dd27a22bc6050bda819a5a2f9f1adfc90c115cbe1402db2d31a672572c8af90488466161695bf7d50ab04c6ebae53c78c3ed194fc47fee5a2560d9076d40e6d34e96f9bc36154c830c5ec9e46a11874b55ec8b53a5f301e2f862afc1c40543d6da9b558db0316df3345036602bac86d64a0a1f184d5a140ce758e118526e020462aa6152dbe0c5fa8bf92571242eb768a55f94a52881c36d4dd137734be4590c25a4454fadebb950c95f557da6847842fdd7e13c2c81515adda352076d3b71774295df0f2ff3ed1780084694f3b9832936eff69b694e7effc958f2c96230b5a0f791a0d994de170181fbb8861e049cf7699904dcb5713101815c8f6470db1be95a803dca4ab1de7597e79c34b2185649c1d2b426c5da839252eb2762517a1549366daf58f2fdcc192c64d2af78a1b7569d9f20141656296f6808b3c8426035c8eef355ac9f5b593dc7c366a14f046c2a726fe448ec5a1ff2aaea5fa8131110fec11c43a2b262fa9bbd26f60ef40d75a31497b81bc785e55670cf4e58b958269942e2a9a149702ab48a223136a5e37ac86d70ab95ed7c9b7b5f42b57f9ca17df5953b7e19fa6f154efb6542744b4c830c3e1464ff1154ea1e6ccba185826e22f83861e709fb67a2c2e258081e46231b73cadebf5620b8f2a08c2d23e9532a26b63810326ad9a9e3523f136a47a4bb6013a3cbecde01ca63e414835c77efca4abea234b972fdd54b5a770b3813e48848745817f2f84cdb2a554503d07addecca78e1d04a968c6f3b7da682c275b03fbaf790f5d98842c19e272070aa77976d4a3ad62e4d17368137e7a0163785b07a1444649a1809fed146e862ec0cad60ebc1e727ca8625e6e2560d2a65e985d31a521c958132764412a8279809c3954453f62d2dd614c7c772490217312c25a7a15acc8a1fe2cdeb3a87be57304aaca921acefc2f66ff91b9b098873e3a78ed7f4486331a0fd2f70ed6d2e61bdaa72bcbc6e5cab05ecafd27396aa77cc214efe5ac590e41d8cfe3eb81d4ecb55a961b1617d21a3c50c3c8061b8a9eb628946f23c1326637c368071e8ca101bf3f14abe47699fc890add8388fb417fb78d648eac1161ce649984cd8d534875401af613f16b226c0993785de26be0de1783765f991db29bb6c7ce767638676ba4b2874a4455ff591be059ae3331aea804bc13aeaccc6d0007e588f76f0a356d7712bd91f34b42133d1f2938565223b68e66ea4685da4310730600af9e2066e16b921c53054477049d9ee13c4f76bcc9dc27f565169c13053eb170bba20fc2568977f07adea1eaebfc8b09d7b01a7e4b8e13bd46fa919775af912eef8901623f54654b3b46b5c4b05971ceb0f1b8e38c1582f2442d8943febb1432effcb5bd23c70b464e4f6eeaab49e3c2987a2dc75b7a88d41c634ba265709d6a238fdffa0a3d52edc587a51d8d789fd318b9ca65a770398789b765be76de927f8185588544623d2bf00d25","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
