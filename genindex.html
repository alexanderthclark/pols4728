<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"16a0b2aa805efd2cd069becd861eb9327a2368c7ec44ef97d7a69868e2fd224cd950495859906b487aed435207515dd2e149e700db8e9eaee888277cd10ca8ea4931061ec1935928d279bff4183e8605ced0875e7fb74b156f9c783b8a269e710d3e5e3671f590f5619539ae4e74cb7bb44d63d758a27d945f7001bece1a8d0fd00f3763e6384cfc4b7b8e4ef24ea87293c61bc995d2291c327e658a536205f686d7379dae9bdad1f322f24b0c7dde2f6c2cc6615a7a8ce56e31d687aeab61777c23d20081d55df0006fca5cb356292c9f4b9269b362ef264913e741bc7b806298cb1894b462e12875d0fa1a88179522826c28ed07bde115a9a1b7982552dcb7dccfbc22f56a0b554c60eef6093b241b7ea5342f84e3d8d8733f63d67e92853741c48ace14f2b30c155a0cdea98b0844486ce5fa62195490c20521e9dd0250fd0cace1b85498c82b890b60268f4ad1d6f91fb87ad4bfc38a5b61cfd19601e39fb92348bad2015a6d3616d44cf2b3fc8c210bc3f702ada3a7004ba748170aaefe954adbce8b2a0ff9a816386e7a0f3ed9c4c026f834e31acbb93d837043658f3185fd6a7164c0831e9ba7adf8ace8f3bc8116893f263058f2ee11a459ef127f29558ebbcb32ff3cc7912420de91fdd86f6d11febd2d5b37230fe1bf40c5dfc69ace021b52212921e096ab0ac5b0ac7ed0fa06e4f8145c665263b8a40616b35007f235a6200ed397d46ff0f474513325f6355d0eee270766db63c7a7b36fff2c742b9cf4a125b15fd870e440026ff6861094020c9f928845b4fae74e4e52738564206b7e24f3d7f140dc01915fc26efaa8292b31e38decb8915d0f8c54631cdf8eff9d8d08fc663c4fe1373494f643e6d108003868f4258c8916f66c4aeb5bd3affe854dff389c693c29f82a33351d20d1f1da52ec3c412b36a58fe28ac119013846db291a8e66d2a19deced779a59328924165df4742d2fc98768f49afeb09a5dad03d9b5c9f54e275478b631619df0d4ffcbc6b59865b791033ff40c3e5cbedea39983bda739ed7126791f5486b9d9516757acb781d8041472f081be4ffb9047e9c330f173b0685efcd5ec38dfe8897eafb38421365371b7158b112b3b01766a46cea8fe4a3b10002eafbd0afac64d1b5a84ca54bff5f30f97d81223b8fca6f941e938368ad3c22633127b04dfa3fd650a7980ff899179071a5b93369e09c46768f8fbc57add98e4b7d0a698c5780a7bb8cc2d6a86c08bd52fc939c4a59e54577be1dff3b8cddbe93fd9429f3618880f8059a08b1171a23ae00ede96eff8c870157c996e436c0244349cd5b5a80742571648c4287d30338dc4cd96344b38396e67fdd5e2bb7567b99f6c810b8779297fdc276e171aff6c27b32bd5662ef7c79e159bd344c4f88045c9ea014d9c6a168a72062e63d4202c400f03632f449eae260bcdd31e2e56ba793eed5c1f54fd081b8d9fa81bf99d1c3888d0586662f456aa68a0bc1dd02fa4f9e11fe86e8235d5ed06a0cc3c4ea49db870ca823ec27990d4557665b679a29787a8c51680670bec7c0c1af824df4ddf25cec9041488d99165b4a53b0324e56c1b076f23b8b831046ed2e08e86aecc99fe95cf08d93587bdb4ff692ad393f1975289b9b43ab0fab1169db009eb5f9859ce818e8ae91bc13eca93d1a155364cba10c39838f2df84b2714ac469b7d1a574f9b1a29abdeaabdc3341757f01ef5142112c4b74422ca09c8fb303c50fa8e83d3d94f72d2615e2d54ead687e02a247d4dd468e2841ca001335866ab99e17d2922acee7cd11a1f1e51804e01e1cb590a588d188a9129b828004870baca73d2912a11425f5f3c83cbc89fbda59ea4180c90d5b329106ba2df54cb20b663d0c5be3c3b225696a10b2169ad4ab2dd87c602b4e4626d3841f995b522cab97fe2d68573ff90cd1b66b2d29cbd43bbfe47a104d550dc09d17b6e6d396a69d7d84b6bebebf7c8e85fa5097a1500c87be40080fc3a950aaec46e20cc8baad9c2d55449f9edb2d6014ce2e54a041e3a4721891a92e127cc8bfeb52fa04e0f36269d45337d1afa3a6193c885eb06feb35bc0babdb0beb058d35ddecc779b42c0a78182861daa580d7223b874520a2ed3a27aa8fcba6355e6dad1ee74262e1875cc5b586978763319a4f61ae1e5c29484a617e3324e653d0e373432213347dbcb9886eef1bc8c3a2a045bab20defddd6f854eb56c1a48f179794c7fd766c6cae3d990e50061037b868cde986e415f4f0cb41b8a4c9a3adac366c4c065dbcbc1ae06684f38e1b87122b27a499cac55924957ab44f87b97657751c3fec905636f52b2490d28c04222193201f933d5dd96c8681f03fc2b79fcec120d1bc1bfd3d97c1bd66b36a3e3382ecf25b557a10529258d85df987aac80b0f05a17fb54fa2b6c1fa11fb038cb93bb9662c4817005fc1ccf84d1ad324d9a81d10da6948215e72fd31e3480bb071a9c9830758a3d4c0b1642b9c9955210d169624c7a5a86972f11c36a2d9bc6ed1a709f36819b8cae58f03012c6a25e6ca3931257a8c0e23fc4b022996a38810ce6122bc03ecd764a3ffe5ad889c9a63e84445de014bc4a68b2ea622e3813b5f6aff9e5fbdeada1724dc31b1c216966d1597b30262381354066f5247a4f238fd586b8efd1d7ca390e9b81c4d0a8bd53624fdb16d603736febf24a6b32720dc9420973a92eaefe906edc8c998c646d423222a0d508227fb7f7f10453e7bdadee9295845d2a2363ae4e0eb753506eed029967f9e9c3ea6e0f3ffa1c8da54b203b33df9a8ed7a8aa86620bf4c81707133c7e1cef189bddcc0caf6a7fd3d14768e3ff4a0a78cd593fb1e208064930dfd470f21efccbd46b0195526fe70e3b33aee3aebd316259ab656ade34dea2b58a9405eb7756e3c388c778e1cf467f32bf8bd96fe9c297b3bc3a86c5a529605729418a8b90719569665a6090e27813f42cb3b68f860e0c5449c425b5d6574acde2eefe8f0eac7cde6493d6711230a154f88ca16d341d6dc38a66df4aa8bb34ca3983f5598570b20f8d953b9e1253ab1edc373027ccdca8d95a3224e8cc233facc13b3a90383e98e29d81febbf0f68f050af29e78dedb0f6cd296645c51f8a00a4d395c0caec028d90a65367588ef58ebb4a83f3eacbd8506018d6cd016ee588787fe52c079a797bc7feb73786e0852660263a3c3e1141bd69c6762b0e8143d32d4d3a5a7b5a10516cbd4fed82e5aa1f1a126a723b277307b0c9f22d219acfe1c1ddd8429dfc23ed730eb16d90736ed702e0625cc97eaae5212867ec7c64f39a1d7602dd8207f22bfb264ea1443c5286ae32a9628838e2370f5cdc8c9fa7b816f3c11b75044f6d05248ab4e1a82459e47878629b38b6fc447c01ae9f335605e6b741f8e7e7fa01e14a05c55f7f97c2c6e8a6f2377f63429a9cb2becf8a0ae385a5403fe0433403f10a1188c7957b593a4cb0fb521df40f68a799f17679e68b0c898e557b1716a7f634bac6814de4c3b927672275839f4049794031d448c3859fd634413317a726c44eba10ce596e53f4a315d261cc967c0ab77a8e3456522ebea6d7e1b5a7fb973218eb10574caed1556e18997af8997b8647e2d8653ca8a4ed236a4e703d60e00350cd8708fd01f32bebe74bb86a2cfc603e441b66c819f6dc91749e06a6740493c103c6700ecee01275114f620a85891ef198fe1b40d9783f335f23708a96904a29a98bad61f4fc32628439525d80dda55805611e29593588636e93b8a0c423c33102abcd086ee73c6744b946f3c5150d8b0a8be886240babeabc69049a7517f557ec1ed535123c2849fcd5bd0f949bad42dd733a49b4c7156b96a5498234b4ce3557ef2bc5b5edcfa2f8e8b298128f6ee2863c89e607c7cfff2f0562f1f8ce864232162abe5fa8ad45c0dad574220192d00b3eec82de2ac1163ded5a08c99f747b265a41e1c9c5fc7a0f86b9fd93d143f8c0270e66518f2826f5d9f374a39daddf671c236742d67ed1b1d84afe424037d9e7861f785b12990fe453e03c2555fb7be050d8f45e39859f3b91d277760955dc4fa06b354cf65cb6127feedfdb4254fc715e7a4dbaa8b6f0df2c64f81685489697ea8a6cdd72dd63d79236bd6a6a11cc22e3746aa8ba8ef568c8596fb1ce50c2826c51337f9f4ec2add1ac2a45242b0ebedc521428d93a2c4bf8bb8783aa74cf05860389376c916cf66c968b178a1ab2d44df18f8419722a0d1de542ab8337fe3950c915e7642fcf113a5425faa52878614cdad32aae7abcb147d4f90404e63ad46676f3ccd4e65c8cb344f91405e9949dc1339f6db11d730b404a82864c7eab60fa0fa83ed07908eac470970a1a2865a6b1553a23cb9df9a0dc58d15b0ea9bd7670724568d556d7207e652f218d40a7c01f1dec9ff850f8134100ee5e46754f45a412ab48bb7278bc75efe2d02480c5f96b1ac33c2f7d063cac9516b0d24a6ac97c661a2b2796e0729ba0fd5ae8d5cf5d57fe298d4c0f9561bc63f0fd477553f5cc163cf2062febe86f323949732a4869e6b50d4b8a3c5ab7dec75631a3db817e1c0d4744eefd8a977294e9751e16a86ce93b4d617b76d93b7ce57a278fc2bda96c5a5cf3dd8ce807c986992e940cbd2524138b500e2b5633f36e4bfa95660a93ee73715d630eb4869b6a272e963ac2b9f36ff92c3a97123a0c1fdf9bb651e09d284813c7b307eefbf0ec51ec92ffce82dfd26fa22aaa54087a667765f00d605dccc8668fc4f2f7d1482c904c673948d221f4b3f8799414c3e6aedd519da2a324077ef17a3f1029c9921e42db4e9e511c778881607ec436f0cac06bd380464429b2a42f1d6878675449f8f0f9d9978ba5c4bc1a204604873aed8209f73d5916f9b4bb6d7e8eb2ceb4b1791849730b3f9da9305f5f417942f427eb6372dbb4eca48f8f6630f959683cc127659e9fc100760e2786e936ebefef29386283af17f1bea9a02c42444ad1d470accb6f58c9bed20d7d9e60925e74a305b039c7f7477d9e7e36cc9adae028f71ab80d99aa50e0422e03c6315f15ed973fbb7ab35ca0f2500d0ec76d83b53a3e698599d6c620ebcfc4d3138ba51f17af30944361153ab31f55d8817bb28b0dc449e0a6ac96ab43e73125b2e15df336992b76892e563f4fe05222d5df8386e77df68eceab6eca5ef98a4a20321c6eafa685cb8ebe3befb8015f26193341f630e1b3b6854dfcef5cba17b5f7aa61480990fe803b3b3bbfe63f721caadfa8d2f4646b82c7cfade4bdfa0b9a818d9bf5b70faa3be3fea32526954b8c7c7c5722753671b209eaf91901e0a632175ec8c491c096ce8579bf8513d635b840c6170ab1aa2bf8f46da0f2560e5b79a967567ff2863ef2ca371f3ce77a4093018bd64bbc4f6f4d7520efa0da23fccb7cfcf3ba858325a9b1c5f045c7e0201f28edc9313a6414f1864eb767196a99fdc1353a3b73b5bfb9b6ef945fe77996706e6184b5aa41eac128a0f67a458d2ae5b64a082ef7778d891958293cb333a696900b22250415382b26c954bfab9b757be94c5a53dddf577a891ae804c027770c32db49170a72a64157b41a490baea0878a9471537caea76261d970bffd1191c00f666c2e0482c1d29deb753f517dfd1176483a9c743948fc19491d48ea0406d3cf4bb2a13c626a9f1795102ceeabfc2e5ff9524b8e3ab913422aee65648df63d40b5900a1d0655895f3f0fb6285c6e5f26cfe463c08d07d4b4d76f3464da5e09c8542cba7a129295cab1d5af3497396a266773aca4c0c78ad677589a2b9e41cc28bacac618c96e714b7cda0eb5d972fa4a3f38ef565155464b1990c76357d2a49b5156ac3cc1251e62a2ae64e5d48a8407801b049eac6668690bdddc3b7b38d9284be6c7b6bf97cf123349b2489f97018c88ec8fd5c4f159445cf581160ea75007b73cde3f239fbeb2726bdf4e17923044edf2a30d7704474b817d353758a6d6a877235a7d1092a538c39e71282c377c7db3a41682a7761f9f447f150f7bc0aa41a257f474416cb20cecbeb4da91afcb046e657929b053365823550fa39cf3c7b30160d6d9bf6deaaf666beb46b8a443fd7b00dbdc7053256ce95354098796ae2ef8004db9583260ac775f2738561dc5acd22d353c34b37f1dc92584b5d4542dc5271db5dc9b2bb09e6b2e63262cf8605298fb31a6786adf88cd76ab5399461beaa4f937dff92bac000df1bdabcbca362b9a8659fb2c21e4af85e22b837488873394f7b651e3400c1e1e2616c10ffb9686e207716e12b49fb1abb42dc6f02545c4b81785643f7363fb92fd1dba4b56ed381679a0c7d21eaaff0bd0ec747529c620701ac8ee2338b0988d35bab6b6b34348d638327d91964d3cefe86d8105c60e988bb4d55ff8e4156bf571b925eee37a734b718b4808dbd34f896fb62b85b569774c487f5eb993d5b9521a0c21ba472e85318fcfe9158a9c42ddaceecff1b3547418fd89c945ea12ec6c8a564529977d0413992098f7d74000cac67498de10e6ff6cab8f5789eceb2cb057eb9bbf35ec5d65cc0e9ebc1bf386e7b713f5f1f66fa3a56ceeebec5f748be0c2b542e4658fce17d00fb74549d0ddeaf90a4e3f8fc44b4135dcc9fec205cd1d30a2004b8cb007eab456a16f44d133d2be85d4df998345fcf689bfd69b01aab5b035c06378d8d2ebf272c7f72549cec0a13c201dbb67fe057f4ea1b9cd86ebc31e47eede2f345465c8c791060eb9cee11d7803bce8e0858c1de820c4d80182f22ac6ba783600b70bda6021ef8e022bd721587a6899825496ac392c656c40943c44a31afcedd36163eb40969a66ae29990878a496896fd4d552feb538932c88f09cdece166aecbb5a280b1588e61ffb5624244da81b7f85bc977cfeb0920e4a00d774a613de6287066fb93477e765835621f86c8f61a16aeadc86a48b01130eb8dfa4d8dd0d30693574c3a377aa22fb784391f97cb41d4491a1a6fe86b53b8a910b64ad7392c3eca9ebfbcc0f9f570365f7b1a2d196de3f6544a7e9a8324908f42d95bb00a357e28edc304dde899274802dd1fb2f6615c623ab9df5a6a9719dce2eec771d1bdd16a7a360c71b060b2c96a0cc9a15434086e0a44f53575aadf60bd330a4d38c7a760162bc016d2b66d5af79898c00049532d83c2acf82a2381043b2e2fa7603e2d0c2eefd72eeee5201c327adef02b2ce65f35aeafe1f0fdb073febc3d2bb40eadfaa97f747ef63ed49cba14175ae12b43dbb2d181521cb06be8c7219284dea13f6a844ab1f59977e95582d221bf760b1086829bc1b72020f90cd4db45ec21c0d735796b221aae0242530e89cb1bc5025bc4c3ca8bf76d2c64fd90d0490d97636414ac346f3f474394798f93cf5dd1b699f989524be7b580e0c0cdc404a8b6965d39f88517ed5e461bb896fb8bf457fe6de78a0bb02cc4848512b61842eb79d77cdc28a838aa9db7c549205380c7b2d99ed9a13353b0abb0944061e340b6eba1646ce14e08686a999c9d7571f31990ec9af19539a9a05a5508d4cbe23c50628f993cac70a66f4cd3ceef1ae299344a64000df532bf5e35641f9a640b6f7d7b831fc1c9cf44ec2208c7853b178916420cc54121e1152ea3e899322390a7a1acda46e9d8ef82d594793090445f1c3e549d30b0d782608f7335efd2c95bbed1fbbb582aac4d74788b69b7f8ebba51ef3d7d9dbcca1b2fc26fbb78b7b706c10e46dfd3b65a992660da18d628682ef000611f30aec95cd21d815a0840bf2755ad61bc0016dc5da32013cb251327c17a0085fc7379dde6fc794188648910b8a1015fe911fab676b128023528b42242f206792276e1b27d9e10c6585c8eb0027b426656934cd4364aa21871d1668ba4043f6541f5a2c6393afc4e41b178ad891758a9c758db4ba008c29bc9f6788e4588f5b173a3c1fe471c6971d46de59e504b608edb0a7f77c16dbdf8be03ff268cc43793ade04102cb504dfb574c6485763eb15eca6514cd35e354c876086673721ceb9f1bc4a915633a0217a372b3b9f61a995855bfab4425d2687cc63a39006981635619eadf1ce6456034c4e0c90822a9cee39c60b61bd9eaa696d8bb85e60e069418ac8a21aef687f8461890c99cbbe5b36a0bc7d227d3e4ea2d3423b380c900c5becd7e87d01b57a86e0ec013be10a3a59acf6e64ff38fe3381fc31e5403173d5d77cc2177f68f88f38e28a8753e5c0634d4c095cd38f543884e939f07cc7fdf132710c8ecc7f438ac434e0bbcd94111be83d005a5669066f262b60eb629298b0b08421a9cb650d1e5b049f89a88353b2bcd1b9ad6671c2924f31d9a2db39e2d1b51d2fd9369cec845a191c6f69deb95d8a34feda996913b1683ee5ed0694d76f7f5597128be60eb07f67c34e7d13cc8655cf08b938a1492c71b16f32181f532634d18dc4b09212c7d91f271a305b7409a71c16feebc5aaba62563700c294016afec91274039731a29637ee0ca84335f1b6634c7b4420a0d8908d3c16571cabe76213a46d905d4da6eed5a15e2ce74819ae4356d1342b2172c063ead32de3b6e5d8ee052ea34ff8f62043d1b8f8062acfe735868a2dee058a97b2bcdada9dcc0dc4275589d28e6bc7cb3bf592a5e54037e135d555f4910183362456347dd266d5d0539153cc422fe4be6809e00d5372e75e00b7f851793c138bbe361647554e9b857520e27b5bb7d7509417336f6e684dff2e949deeaf2ab99133459e03bff5c3a4e6e432686cca714e7c0496593a160c29d0275b3f11b4f1352dc1a0d653d5fa6b2dd15ce2579f71a03bada336db85ca4df69b60f9a003d27a03cd9a71172cb737b0c8188da847dbca84cb655899bd5f44f2d52b69a4db1259fbac6576c8ef63cc4a2f6b003db6612d360e4bd15f9debec74ebc33500d5f38ff01956db27e4d5333ba9271f748f282616ae8cbbf18f26feb5031adc816471f803afe104c198e55250308d628492c73be087be64387d7a5c04eee8f5a9304cf7ae434c6a5fc6c4ea8e0d1f1a6cf6afeebc01810a02687cc538690623b844f1a25df7509d1def054a013826d336d3b818602fefb40e52426adb87239fb706590e7ac2ace06c2586cac563968e74e46e651db5e42a4801dc14468faa8205bfcfbf5c41310880da034dcc930b7ac7c1b46703eb375053594a21d0562d41369a12a43d53cfdb93b1481d17210c42fc2f49ccc790cc2702be2564439a48ba5c2ff00ba3a87a497d99c46bb3e9d23a41d50cf321291c57743940f5cac5af139b428b527a0b6dfdb933e8ed67fc7fefa5127c9c44b679e479b8a70139c40a20d591f308a8553aa443015ed52f2518b59cbb821d66c08fac11f179c559ff6e972e2ca52a10c5cd9f31b7aa39e69186d9e0bbc57227892461bbc1b68bfa5a30ae5a9ab21c3e2afb4843157a9bb8387706188126ab1900adde196c991c24fdc58c106334c144e7e5444d84cb84a9fba0130fd258ff5ba59d6e6473e6195e2e95a4fabd6907aef71f86728cb8f173009ab559c7624fda651d98fad5fd94db0db52cbd815d922271e24b025bd8d11668a18d586a40e5ab8498bc711863fe87ab10a467ebea71c6f9a96712e927ebf472b00eda3aa4a4f3589f35ded278f4d6b1f1581cedbe3e04cab56b11ba1dd0d6d124d525edeeb8db9511685947a1c57328e517b273ebf962a8955f5c9db9b7dab0cb93295c5eaa2ba7e3bd380ece99be4083d861f585a95f42cd95640baa9513d32d6da111c35eed66f56352a623adc991eb85cc142a87d46f62403f236bfbb59d0ec4c529c91452aba4d33827397c1d763181fb48280e0568a420daa37a63b0789e66ac18ed24f7e84ebeda6c2377b189e4da13ec8f0fb882849092a79777eadebf0845232bac1d92bfd04f318ddf33a91c701250a18751df7fd9e0c7a26d4957e6f4904be66e0f518f88500e6fed8703c29db45ccd650a35e6010a21fd8ac10c0ac510bf31830b4faab163ebe8f1a5d2a2418e83c7040f3709e205d3037f8b87ee8b61bbbb08637ecd05d5935a6107f36f62eb17d6ca52113f2162f10aa0cda02b672c41e5ce974ce5ee0a58c532963717b9ccbf6ac9c514fadb5053e4c20c078a3e4c5b4233c72f58ed59e9655167d0cd46aba1ca0b3bb1456cf32f1aff3a69ee5ee272abbbd4841cbeb632977adb36f40937a0eca9f47ca23793f1b071a989faebfce1917e7b2f11f967b731b7ed024993899d54aadea5c13943f708c80483b49ae3cb3d750f2a2dc15a604ad37c5153b9d1cd4bd2f01b8a9cb9cc62640806e567c0d04fcbd5048387f84693b239ae9453c820f614f52dbe502a8836d4a35651f395407f8085d42c8b873adf5bf9bc896a5818533f2916b4e47c0b9aba5cbf18c3682efea1bf2beb77d74c5ce837d053ba172c52dc262421d82491228db4d24c22f1ec76870ab9c688493defd24d97ea9691386bea3401be1d6f56d712d00871a5581421aa9d8f237082ddbe56fbfa207b38d20a7a8177ae089745a335ab0e5a57d2d6ac65cce43255ff44f5e91359b527d3c474bd67f9aacd4d3534ccd51ef73adffe4e4d7cb238416faa15de912ef6104b73f9db6a9272ace907ce01f289b64b2e1288bc63bba64572dc053cf24bdd7cadb8499cb9a18b7fc742d2790c261f2e503654a8bda7e3ccf06356f04725230f835f42997c3599bcccbdebaeb5fa35848d57edc3d36694c3cc9145e18ca2bd5f53b8f7538507ef047f50b742473b7a1c14084c75c2fb31c4a7e7ec376e52d8942c6b7024d859e485da9de68d0675b91ba101e5418d851162d5de2f8a50522ae48c589dcd65292715749d7001123e6af19f90bbbcf7c0418537066de554dcb28da0e61c988b2927733241474d39a65b272d2245bc9660417b9fe4fc1a4e173a4ad8ec320676e4ee3b87390fbba2d06f0bf2b2dc3190460ee14a007bab046b0d492d60be145ec5ffe5b9dd7225a4e81ac33b26d875702124adadc407aa4729db6b4ffe5ffbe8de6b8069cba9910e4dca221e56303e589cffb832538a1a1c4ea07564894b09c7134a258244ea0db6db49cfe33ee2a06e4c824bdd0efa8d84793de315e2d80a6e2ded6ef64b2706dbc43a13f78489a15ebd289d3de0a7c96936096e9c13ed077ebaabcf0db4842e505a51b908e2ef4692333a1f2be6c7d0dbe1797172cc5a145423e147d150295352a21061697be875a201c894adc363c729473c88a45e9ddc7ab01ced5e59c2bf8f1b1f33ee15d4c37ddcb7a73dccf813b9309074fe73d23b452635ad1bc8f77f9c30106b475fac1811f8b79ff5e0ca5f3571e2506ea14f9011266eefb3ef496a0bc181971694fbf9657fba428c5bae4a5f910a7b20bc8313a35813a63c1eeb6c61e6647a9d1320b40a5f1218b7fdde1d2c98f358aa4446e5262dd3fa2b905e88f28a4c20c3261ca8be93fd5cb5c892d07dbdc8d99a79cd996f094ec04c3bdc451dafe021184046ede250d284dd349f0fe124a8069a42ee120f432c4afa81b3f13172a93443b852dd94b19d6f914cd5e7f48b95077ffaac673d23021a1b820cb32d3308ab556bde0498eaccb9ab743a578292b09cfc5e7fb5dd8288ce90bbef38395b61127688a28f17087b64dfcf049995bde3ba6eb79b3b85bb29877d8ace71869fa8196bd44c7024b12fb2b088c4aff68cd80f6816484b66e15a57f1e80719db7775ea080d20806bec19a074276ad55832ca2913c5c6278f0f1d51a51a9702147ab70018d69c490bd8a168061b258f50e4ea0f3fa45381da9b26fe5a3c40edd9784dbe41a4f6d45e4fc00394d134689e4eda6d81707e032f816173427b7b0a473c5f288d636f14d00b868bbc831cd26212133199d60ad1b2ab21d28274507694941ba63c5c0b73dfd919121fba747f2c614c9797082abb49fa9866c83cf0c822883c2f252b3361b4bdb4eb6f53a08691675d33bf1711053f6889d15717f05d1d28bb6841d0936d68e9babd7d2f99007b82c2af2edf20dbb4438ae9b71a7fae6cec1a818920938a3488671eb9429ca1fddf0b9a95aaf3c930a1d81c0995fcca13841c9eae3f33ed132886527ce0b195cd7f47804a90fd33eb021d4e00f0c0ae550adf858d1fc4f49b22705faaa0ca8b7d3f051de95f5f43303395c09423a566d23650f7a0b22d9fd94bd90a2a8ecd119d22d6dc77c7a09c5683889c86089233ba4a8f28159d7a242bac740845c3466732877b3918f744251ada13a603bd3d6ec7fd44bd3c9bbb6a026bbaf2a4f4fd5c014b6b37be0be16625e43e8289c343e4ae99de7c9f32977073f0bc06a423ebf452a2874ebd802c92bd7920c7ffb5ecc5e31735f085587c118c8d9ae249d53e940d1b062fab7eef603cfa0d5405aae37cd40abb5a6e87bc0ca59e1d721197c5c909e9eebb20cf7ee288fbfacba1be2dae974611d964c1ef7df605e3f197806f644aedc6dcab41af203ae34f7044639ecaa53c785463a7a48073f97b5289122defa8e1f40bfaef3174e5cfd7e0045692fd86ee96439d0cd7d7f5288b0d9683caa82d526e274656011f4249aad26cfe970e97c1afc27dd49fb45b0bf6442889989cf490b3eb17e8eb254988e24ec5c2a87be7792b66000c9d06f54a5042d5884b7665924e1b388dd1e020da7328ac5712facd62d2932528bf3032f1062055ee287f521f6abad79f516acb0bc7c54eaa0542a71c5517973987346eba632fa4d86d8a105dd3533ce50e3d8e1770bf896d43d533b5a592259681ec3e3ee647729cee05a62754e2b4e0a9a91ba32667046a31b3091362086875c5be15da35d1e4bee3d3b6f4978ff94882e97d46778b336762422ca62931f2c7c9c00f2a29ffea6680bfc3bc00c4549e5baa153d23994e74632375fa425b7f8c1d8b18bbf5e3df17b517d206bf39eb29f1537c48a71658634baab094b747f081ef532a80a1ffea6281ca9768c80bd17fa8fc00f68a4e50fbdf2404a4edc866c97c2f28454fc3c7aa3dae35c2f1131b7febfb89abffbbe5e95d458bfde4e19fa130020037a2ab10b2e827e18ff882776d53c4310571dc6731b5247504aac470a1007fb1c3412d114c80f52395da52e328f577a104a0c95eccc2669bb631e093cc43a0baa44ad318989d8311bf11ff61091d604ccf10fd499af540ca043d119110d7c807a04e60eb9d1821d4f3b009ca1a1d6ce875b0d91650bd83a330c3e6911d0b490c26d7fa1d04061e8452c8f828708323a489c6801e6f095e40c53e9ebb29c832591b82f9c6d80bab69448b4e8967edb133fadbb75a87395dd43e60c628e74dd6c89bae585e7ed48875e2184dbf26cfd78eef027f30d04f772606a107b80f9dcb99ffa9a61fb0587aead5ade3866c9c4e9d8f2ee0d3aea205ebd228e0685b478d6a4026c33cdbf2d00a70226a1d0e65ac0ee69ddaabc6e09c435a3a5e68ba47f225047bf08ffd6c6fce0b8c950531fac238cecec58eaaad3f79d39d89d9f68ba0b7d2761ac8c2e9b19dbdfc88aaa9a91dae7fa7ffad2b36352e7227b97f4a050828eec708340b455c7972f2b74c7c50bf1ddaf3be6e10df12801a1b119ec79066f3c668f774a4afcaced37b97d5f50a795e46163fb0ca18e415a5ec3bf95d1225205b97d238f163693bf01be0470978a528f26c5e464d11afbe24cffeaa2f7844fec0b2da0eeaa10a442a90243744e211d66f08478fa8ba37c7431fcd7dc31535271b2c981618ad22d20a75351767911d12cbf1e93f286dfdbbf9c2f3097648b12b3eaff50737c4557c041d599377f2da8f21ecb28c3c705aeea6da43f6cf2fa30c5005b523faeb7709fbcfe4ed0ce20c00a86b786ba65c5ec443361736b93e07560634674a9092adda799c1424a3ab52ff1b2f4cf36e233cbfd8253084aab0115651ee17b0f217be40867fb95f97f5fc9553883fff2b15e33691b6aef276b38a583bf574048331661f4aacb90c43df2ba66824725c9f994d62e10c72f68a35ad662269b0471f056b0dc8b87b5d63d1347eaa77124dfd76b4443d60b7358fdb90cb0aeec3f20a5d1d78d9e3ae8903e9175bd9df82d980684ecad147986dd3b60645f4d2582573a5f183f1dce442134f40244f571e685fc81a273bd0a6156ade19d17977953746dc89d7b743e521aa3e4c9d6f67a64b0241d58b956eef7402a3abb65a9df7b5472a2a3f7bdfd268a826ca03fe903d6488fa5154134ff8202e125293d94987960f1c2228a1341a08ec31fc7ffa3c4114401324bc08c12b6e88ef0cb35933b76e982f1865f5250f6b05ba01702107c5bbef128c04b2200cb1da333e3981b88e2b1fc9051679ca5dfe6c6c1e2b953a18d78d54a468ea1f501904724fe80c7f31324b3b5547731fc97b1aca5d4ea80ecdad111e6c2dd881965408bf579cf1e7d55e289bced6109e3abf79a2da9a38a2e79590fce306dd8fed314ff246649f3dc975ceadaf383c86b31fb982e9b7c6c54d3e4a5e876103e5ffd338a4c4dccf53c7508c9a2706faad8cd4f4b4970627923142b32d960abf7c2dbc11ab8b777ace1d15497d5e0f56ead754d85917f545ff06db9ec95c1d004a2463be7eef8161b02decc9d76ab54f6b7970abac9cf61a725efda9d4659e59f9c717150aeac193969456335a69700202727520f627dd0bd75424553e129c798ede2bc747fbabd40d2bb5d6a3389af4486514dcbd01e62ab237bc1457cc50031c6d64fb1fbe0ff40d83983cbacb4bf28d7e0447ac5243539229decef0ccd7841dec363ae9de2b1ad0390e4ec9b5d0949f45811aed2b398b4ff6db769018a6d335be593813bee45a9f662f5dcf12280240dd03ee7f3c20f03e8e86ac575d05cb9c75d14d69f621c5356c3b30a1d58acaf086b6e39240c8b70330be31a9327cd54f8d3ac29692a853e93d6e162cf2c6e2add37e045c2d41727df4f8fee5a692418b09f14dbdaefe8860d8910d334cfb330dc4604558f5802136517133aaf88e7d1ee71b9b125ff8be500dd2df09de30865d5cb72fe09b8cf519d5e93c6b737d68c4414a6b7935ac9fe7482cc3993458a8575e0ca811146dcb8d6ef71c80a33c7a86f4de61d2aec5ec7fa8662da0573ee38539d9406f29af8db6d0d359a6705f1a943b5c2de7f635fb9efcc1067de7755dc02752f2d2700b0dc56e8ffcd6b27ec9270105deafa80f09e0538a69eeba5c5442c3cee0a933a5391419dced630aea37409ccf41de4b3d81cc54a9664e585b7ebadf507cbbfebf4a0e4c7476a954b341e7be12d879576c4be3e14e892fe0505245d1a4ba07eb4df918aba96766b6ac7c335522211451cce823dfb9587b29d3a33c3c53bfc065ba99837d11f5b01efe91c4cad84c19420a5069165ef9c2595f68bc8e808d6d17e8dbbb4a71415c9078f848899c80fde35364435a67ff79e2155985bd428db87979f745e1059cc9e7188c9a5c63e1cab78f904b193e85d5193f036d70741eb90615f57fd7810b381bbd1be8853df142c75c521ab064eb4e9d7be82c0a552eb60e2835b7b17fc78fc8846d71e3a746c88bda8323a229b4d2aa262a25c896434b5beaa3f067a4b30e744fad9e6c3be110e78aa01febf6f3867e0e9a502cf9691eef7f89b66f42e214f5017d2661f6b7ad15a5caf8d7a5a00fddec992c313e2eb3b30477c3bd1f8465a6cfdda47d3dcd293105d7cd81c57dbe77ef1b2a7e34b00919df0518f38eb27dec1c9df94d06ca272a6c93dc6e46d42484ee3066a1b2aa9d7f55bbcfdf69dd7f77145f623b59deac892d19c35f23aa9c4f2e140c44984e59729bbfe71744b2104bd4ed38345d2c9d3a547d6120ad32d156fa2de2208e9dda853a9fee977e670f39f24f8df4ec522cbcb11536c18c3eced30e9a60befe96fc39054ab64d53f0d4e59cb467281d06653c15cb1183b425e367816436694f36a2bd7d7d8e8863462d96d42b9806ebb9aa3242c6c464331319fa594e0efb1cf4a09af537567760267350962cdbed42cda54a808f9cf606c04b13ac24d8efd54396620a7b9e56ed5fa9043d16a22f331a10b221bb94b7bc5070383aa35ddb41192bd2c360785e9076af5444b00b4f2b9bba3df50101870b5c03efc6bc5fb799b66caa25d2eedfde33785ab4f9f8c4da3d544051aef2520ccf9eea94f97796ea1995411ac8722258e6803d85f60c0db267af9bb03969fc29da5f6cb7239d39758b57693586946d8a3b90f969d928f2c3b91b9b756b90377a9bc04e94058c092b5292e37ed43b516473fa691ae38c62b57d5b69f458e232a64a42a0e859361239e36d86038baffc396cabcf70cbb6f16fd5fe1f9454e1c683e34fcbbd4ca63ebc9aed54f01e1892181133706d5fab7adaa043318a2f7c45dbaaa424dff2f8eac2ba3e40c8d833f531052c7b48f64cb8ab8fe7ba98f11c260a8fe9a527d9ce9d0bbe9aed5e21f7c195f0798cb12689c62413a85b1237be4b6c8cda6d6be189604f9b6382240cf0a4bca396e3f9219b58ec6045e457138f1bc0948b7486d81f6595a8c3287329214c1af3ed1447a8489a573868e4371bd673aeabf54e11756d2e5adcceda06bb253d7ec699fe2e6dc1abdf96f98357d964b1c5e427ebff02aa3452312312ff06775624b2c1ee39694435bb61253f389bbecf7d250e44125c550482a416acf3660b9241b63818688bcd577354d2c166c929a16119de3b5b9df39a53f593d679072b7c49c17daa88153e529d337da74dcb22d860925e06b7823b8c64e36126f0c8ca6309d6a2bbe38b511c9b289d4d0bc3e52e87f965633c0702cebe4260a45f19021a8d348d9ee591e0d9f895a4ebc6f267983acf1246dea6511a87b557b6ea3c0cbe571a90ad3f9a8ce0984591c524165e982f9a0d056ce9feed9f841b6199741c907a28d42e30e4e3c9c0c88b1d30684cdaf0c8624d5c79e15b34462b3846c828a1ab5098565e908cd804ccedad0efa142c641a13bf5760d381d19e4bd282c6f49e97f2d260c5fb8abbfe03374f7819f2278f710ca4d2e9ffb4255d18d146964b2c49717b17db8a89e0dac9ff6d9e84073a70d6d5c20c7d17c1c71dbb5154fe2f544cab4a72d643430dec5337bc156ecd2160c246ee0f9c83d9c9a0cc32af79d7a3d4f6c837e5fd3fa6e0ac8fab14f2f00ca4e1e9b32f199f08c378c5851839e6899366b48305b6c1a433ab1d4d606266dd6b2fbeee98fba64da6308144740e0b14b865d5d23250d922705c1bebc0229df135ae645065bf599fa473ac404f6730e45c39fe8d7e46c1c1145564c49287c86dd22a02360a02d8817cbfb2f358b2fbe79fa643774a7f6188e7a576009d2a73d30355dd55822fcafbe43d74aafef1d81c43b823f67571e82302e6177f7b7a4cebec0a9049908aa93dabcf1f30698bda25285230cd190f7e20b9e6685fcb8df7b884a50810a674ea82df4b5f8daa7f3483dcf39f725c12ba1cc5b45ac563f2a92229b1b67ac56d1197085a9f1ec98ea8cd861cc3f7c93be66ceaa198eaf929e0de6bbc62a0662a0a36caf9b052e8c7ba5df8755cbd534bedf66e6e57341bd313bc4dd21e2b571957128486853db94e637358dc90a8c99252dd745eaabf3b571f508ff556f3084ad68a7e8382573bb89385376903477938519e9b85bebb721c5d3c3c540fe9c0e3e77f3220373baae56c9c154dbb50746a91bed866d12ee2a017cab18566e865b0698e24a8889715862916c597703b158c95858db7b855d387f70f0bde3c5d9ebf297878821e67aaedb83c66b6c7be907fca2be9264c0341fe184d3441196e2b9c76e384274db94284499efd3f53abbda0dc0b23d383b26505f51b35a093a03aa908b00b72f9cf8caed4d4f97b429c3b2a157653b1ca3fb168d8597974933d448c0d1ea4fd02554f2514e67b57865a58e0295e526d19f1cb4f5a05019701b531476334c837c0ce44b85a826062a39785df3a651919b7dd2a67ac3c8ff16a34d1697c9c553dc3a193aeee70fa5a47439ba4402867fd7bce4f44d9457254d8d683af14052909fd3b7fbd935a528961ba86e71e598a2fe34473a33d96ec622bb58b752f511fa952a4c25eefc423af579340302340cc49f2cebb6db612c5e1dbd4ea26646cb61387f9b8cf835307bd0567791cff38e118fce9951baf87bf464e8573cbf9113519b2faf11fe9b1e8d0f852e4876c60b19940fe09271a0be07fb6f99ca96703154bf6f9ffa2c3af1d0fc98058de01d3c445fc0672dc5f18b615b4d7ff309ae79fa4c49c55b702ea4f72f625ca9b8eba99aaa180a99448bbcdda1028c8f125b0516fa0408902984c4e6d93eb46b30e281c588bd4f26e171f9bf86ef0b2053f8ab2b5b136beecf34e5295902f98965728610c153e8b7f8a5e2ed563d8054d86b64200f7145f64781b479b8c4076325cd8e280490cc766b84565854ccb8a729b531dcfbd62e2818668544fb48ad00e357fa3ee71c9ca6709326e8cb7fcaefa93fd013e399faaa1b7fab97bf856e4694db8d359ce2caf69dc61457bd92569c9250b264240bd50a31e5dd8b65087ef72522f3425aa3503b965c304fe90e4906bc32caaea05d8bb9571d1203379772d4d0ccdc0db224faf6734ce8e1e156d664b24cf008e1ffb207f31ca7a5c58bc86dd7a434f097cd948b07b72957bfec4b74794b0b808f8966baa2b5080254c92a2a135d19484dd97d4b2240b6fdfe1727b250f15bdb84220354dfac78a443ea727d9bcb6e465695f8ebd767a91e4afde29311ff7a3c2ca0e6b9a901508b917e632b4739223bbfda38efcb287771fc875fc01f4aa522d5ca0d34c45fb8781e784956686b6fdd24feab2591d08529ce86997b7ba4338686f0ef7cac464f7c1c30f10b11c6f44e7cc791c641dda1a65f93ac6ec31a800670b73d46a67e1ae0ddf31526d0131061d0f86f8842cb3dc11fb3d36ec695ede803e20b8c334707d2c41cbd260ad76f1644f4b4087d58a836038460ad4e33618f224ac03cb5f475a6e2eba59292bc46c974dc21615fcc9daa71320c2d7d340e95593d31a1d4111826d3fff41f338338ce3fe826001dede67837400ff0bbdc81973c89b60ce66403fc41d5cf2f8c1c79fd5b3c4daef125c5cd1c7a4fc7ad75fb0a9049e6b6416edcbcea43ad0f669b70acc14cc251dc67091f5a667549bf725a106632886657f31c6d64ffbef4b91baf341c6b411e58ffebbe0c305e5504a0047edfe97bdc969f7c84696389f9af37462eeb8404edc39bb5a279d97bfd2012207c2d95b0e99e0b0e7050077ae48e4d5359ad2f58447fd6411cd8aab96effd37605af33b4962788fa5108c435f3741569cb9d7ff77bdc34b3d8655bc27b0120ee4f5f9c0dc824eb690b1ef39ee4120df44eb16a8902360231218f9571e9ed1bba52afe8ee83bc389633a82a1617f3922332a2536c09805904fe64fdc0e6883cc2e635aef45338d5017f16ba7ef48a41f9d71191b9e1d9b1c9fa5256a2a42646bf67add22aca63106d1098527099ca42075bd2c24419d99398de5f4b51ba64c18505dc16d5dff521086107ff31663448b2fd3c31d87b10d94d983bbb0daf526a3c5decd9411b68a68ef1517a7947594a09195a6b81e33754fece6b6a157fb9","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
