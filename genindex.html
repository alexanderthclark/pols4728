<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"11e902c554fee2ddcd3cd14e07efe0adaed46a67897b4c90c73a30f08f4e647cf631f29371a3a57f0a368b1adc6e3ac3f38384dd36b3fed7acc0439a5a005db907f3c7af099aa4b23cce0c30d90021278fbcc9322ca4281c883c9f38465a123388e9206451f95b7dfa7ba2c4b6f821630f0ed1a4ce917b5eace4b441595b544c36639c5983a8ea4f8bb1286cf241f4b2cd9d18b24300bbd5b961d11c8e18a143acc13124780ecbcece34a22aadf55df2e77a7d52ba3ce9b147b5bd1cc1e612106931d8dbf2d373cc0677e8042f68b6db6fe58f8ae83e32b44dd368909505bb6ba2519a46feb9b4fb234f32170194d3fd7066bee2b4de8dce30075543750c6648d623af998911274e472cfc2c4227d125123154ff2c7a817bd306aa9dfdaafaa48a1c05b461894c20cd2b56c5ea14d9c012289696f0ce4d1306bad5fc7d1e32efdb0d2e27d9e001f9c4d124c7f34cbbe1e5c1e68be0c48464e60dc6b45ede538181dd04c8ec357b8f0e2cd4164cae77c89e4fe0dc8a02714830c13ebb7bbb085c2dcf6cb88d76beaa449085a3fc8f4b43db0470fceadcf742b521640486a92e9d24cc63b78b5f9656c19e57d219eb1f43144c3ce3b27e7dee3b9ad6386cc52f2e8954a3dd22dfd28ae13c0686a67d3aa6738a4c99f96bc09500f53ab2ca71807986b03a322492c51aa97304a2324ce0dfe78a61709229821895e6ffea2381175973c5e2abb60308151c5ab6b36e9f651c5bccc66fab15aa6a6acab246656c095e071a66f5584a959c4ce0657bab40ee728766d4397a7015f7ce5178731737219c4c07675e82089bff90b84586d19cfa95c9548fa86e898814a6ed928ba0729a1417d26661b786f6c7f6c95ba1dd2b82cde15ff13460ca4e987152f2ff03b1eb12e0639f62879bd1d9aa1ae204ad8fea188ff36a19f11313399b1405369da38f1552edeca4f9728089bf5a2519cf98266699dd1681e36c8b95d8aec79454bcddfe884d8e95c1eddaf8d720efa72eb19791ab0ed3b2edcf2470369288ea52f0ae5ca5571e79593d12a4179255f5add972dd1af55bf31cd256af127e3abee147e0e64d4c1858fba307d9df8f6ea92da481be934e51368a855069ddf08e58f174afe14fd8810fa0aa88095fdc9c29c5dda9cd0aee80e5f5401d1512e3bad52deefe6973370e754ae261191be22011a312ecd2ab72dbbc8c751b98a9911c0e12c87b6912524c43e8ca17462c66f7e045d06b160baf4fef6870b835a865ec7f199cb8888a73882f845c0a7cb66f9f84ff7f5df0ce74493e01fd6db21d0b649b5c83307d305cb7d8a49ae5f31255a74f103d16f2a318a2ad44eec20bb9aa513cce79f3647c97d9dd56ece4121e9e21a6aa73c95728dc7907dfc1879f5af4a29272901179af095300e327989b6dffc09cd8bbc473cc41088e902d63c2396fab2f9fd317cfac91d01e6814e3735a44f214a61d53354c81cfb0f70e4a9e4420a58336820d7ca75ae8ac4b0a083b889c7e9200992bddac7e963a5f575260d857ad7f4195fa879ad06842b2d090d10dd9716b67e17ddd5051d3821a26d4c7b0d9cbbd6b90e5da2bf398d53e6feb7ab7d06d5b24e7d4d2e2a6c25ebb855990f770c5cfeefc8f07df0dd2b1f386f77db78c70a7b0390898bad5141fa861704c52a5916b640f4c68c41f104fc5d0d3f06116d5043e3256af97736c40b3e489c7fd667b3e2757541af923c67d07355d9f342f2dd22532b63f90777974f6439e250ee7c93eaf309082da1d98ccc02b48504ff8ef8311c89c8d5bace8811e734e5c26de5660057452b5d64985c5958f17e43d46114997b900f270f14b15b34f96c6b425005b5bacefa56c2a7ab8baf9e2c4836b92fc81af5220b9166585cabfc4ed7fdd4dced64e42f922181d52513d52bd5199d6dccad61f6694e074ba68d8b9df552f04d674505d81e748d655d23da02fbfb538ed6245f91d904110ed29d5c398b6e40bf842ef6d942628e29ca7054dfc034a632eb3e717ef767c5b079f99991819d2ccc92d25b592824aa90bba4447c33c606adcb9942b1ecef8dc13827fc591fbbe6b98a7dc174869cc503e7459d71cff879cc154732c4fdf72ea12ac87604588642a48c3992279c280b9f9e3fda6f746bdfc8cdae598b429460c910376a0ff1e913a32a0c427a7d9751adee569f078c4d385cba79a35b5d08e4928c5486f8c47de18c07a221dba2894fe80e6c5673dd021af291932898e245ccd67c063dadb5518a1895573e5c91795d3201a1d2fee171954268c48a1666c52d80db2abf8d1be8c6351c34fa91c07cd9293f4781d6ab20ebbcac3d99fe97bccb0ad0bcb6cfd93a818be23314fd570b4db5f6c9d6a381a745babded0424c7a7f88b2eeeeabf2b3e7194c1d0e193bc654aac4f896f14923e39c77d4a257e7ef46c9d8f1ef3ff5613851fbe019b0f8642ea97f52c07c93bc73cc3607766d350ff66b32b583a0b289a6ac172abf7bb0d90827b737477fe41623ba6426665bfe3c1909c4e661099d8f1d5e65f679e5e06b0660c9f02ceca58d916ac5a006666ee04c4b5443f2cee5a5011ac30b9b4a9995676026a862a86c5e6a36caa886dbf4231f5ce700192db5cd91c96de0035f5dfe8f2cfd1f5f79802b6d66c952710d09e317ce2cbeeeafba7f13a09f60eb38c9b6f9aa72f4a2e909ffa7cfd696e6d8e656705fbe426e17cf5707e40cd3a257a2e9ad41890cd39dfac454f59fa0193fa333da80761d4516238f09e02c6ca578ac1666f6d478131542f64cf01b8dfdf35f0b67c2ab8aea846d3b1b2860efc08984f90f5eae36e0dcd4e2f13f1d869869c6ebaadad08257256b9142f02b897d6f554d16056da26120866b00bbca457a5a0acf0fe28d1614a1283920e0c01554c74d20887923cab012130f9a55480c41074382be56a53fe99913f57419b57701174e9380e6f28515f156a96a45f2fbba94877f5198adcef96cce47d72f7061a9ae84253ccd02c81dca040d7250232314cf66f83156d12eb99e61d1aa7797ec36df770f8a07a09848b614f70e7d112c8a2fa9a4f6f634a571f6bff2ac8363419e696fdfe4f512bb393f05108983b5b7d4dc8b3a08df07fd8be79d0df1a1980a7b1f3fd86664fb851bd8a7eb30ef691ac4ef77f84c330ea45146b40cda94a4cbbc951c04abe501542c26621bfa10a655f95f3956655953c55ea19a1099d95068a16be6b03c84c3aa2e0346cbae04035ef8fcb2e684376cda7a09e15f826abdd9b3e52d07ae2d4530d9310004e5da356839b6e9844109b50d23d6b92b76687b7c92950d9852b4192e42f99a4f9efb9d2667da648b4a87638f026b238d0813540f678620d95b24f3181dacc0e13f79d30447f109733751def7878a9be94fb69e57890fd6d2fde261da116b7859c32d9a6c4766b9c7ae45f6fd37b204d2949ad1bb9d30bbf89c9fb578ac178b4a0e13e5924a31a7667b9d6b4902980dc376db3d9859dd33cc5c91d1ea9fe2aafefdf30c195078e7de2d1c14f4bd745226e52ec912c11cdec0bc3182a24ef105113411e6f79012d3fc2e69d884e87ec2588112eec6a6a7dd9b9aeaf44d90a68584ec985af19eb6b4d82611af2fe224e3577218b4a737b35e1e9f2ff4506fef5b26b8a2b68ab40a1a90ed7b606fb9445486a86e3d27b6ef9d5d66ecc38f0a9174f7dd6e58c71938a375ed7280efe3558f52e0af8d023b5ae4f6008eafef73ee25eb3b6c41e67679d9a1ed4704655145a54f96dbe2b4f75513f9b40585776502b54f9b7d96eec764af0f70d31c886b9d7c851bf4f9cef85956223117da698fa8978c295c2d47e8fe8ccb759e54c41c5318c823adc04bf498d98315f4e36e9b16bc800293a96004ad50b0ff924e782a74d2b4f1db0192e917a3c5ff5f5978098fbcccf4b8193d3140b51f692015317fee98ff5566ac16f427b251ab2305284bafd5017aa3b690cde061093dfad878cd19a4ddee38dc06dd403c183020b8692f877ee6cf289e69636dea355b1401d964fe9591766c44dccca1f2dc232fb1ef82a48987eb69b1f514639a75eca5e70232b26b8c3e870516b49e714c1e098837641bec2e0a3b680d4e91ae200ebc8e62511ef2b1f8ddeb6b4f320661b247fab6cf6a828f52526522a8062ee1c12c34653e14e7ab8bcf584402af2b414dc041c84a5c3ea94ff69e83710a7d260547f1a4f6ce5f247822c819eb09f4a42b40c5e6be9670e10323726674bb8474e7ea90e8aa1fd83aa50329ef83fe24ab98f8325c4a3650c87d95678773eb1c65fc8fcacea0dfa46b77c90795b1e124892ed3e676c1fc1b148e205362256ceaa9881f1a23a727dbf5779449a09df148256a4688f7a668bee60064dc373dc405ef9d9e47bb0573e5ae3cdbf809a8a0a3e0f9e9a60a12bdfa58f0606c3528bf39a3bf420cc6c258aea33f20a5e81be5db22d5b60cdce64b989f545589db01cb21feb41b9c7370590208218499bc7a7c7a9d08ab80db22940ad0015d18e39cb71613f06ecdc509a93ff256385c26cfdab3fecab0aaa459bbff2d3c0cd809a387ee930004fbb520a4ae5ff9ae6c0b670bb32ac1db41c357acc46537e58d906feadb96e2d30a84d2b3bd84a53801856acf3d930eccdb1cd2dc12a7cd25e6f5568b242887cb77cd82f391c7c9e915c18b22eaa01f79a81bf515e4942d83574d8345f89242e7a4da0ba266f32375f942fad07a89eacbb66be05aacad495f8e07e52950a9428cbb4c396e28aeeccd3676257b4a499f5bd420c8eaad70754593123e8a1927bde2735e1891cea93432720f5d36039a80742bdf61a0a2461ef2ae6fb01fbe72b3523b1826be3ff71a03b37411120837e422587a64ca6198b7a34f80f5075e6e7e3de5fa135efba5e241832787c89b24632a8cc914644749e462e9be00bc0ab2ae4027cff1767e5855d0c6099a314b675eb4d4f8f1ecc570e3f9b2844b79c63bd6f3c35a8fb3df2f820f53fc50fff00155b53ad63e6eca4f755a237c976623c06246b2b27f913154daf4fce6a3fe82596371ac8a6f65138e8cbc18d50dc0074cffc30e8bbd59ca47cdc071ee2d192663e54673d0c748aaf44f61ae3fbf519f77426b340b4303df1c2d54803a3ebb48897948c71d9fb06a4c6a27dd39f462fde73351b56014830210d1047c59c986552d4a53e535defa3be0fb477aa46bb75be85ce907e16d5be49ca463bb54ae2175285970cdc49072b503b26c3e0555d831c8258e3245be1a3ed135a90ff1d51ebad3ff899e5f0dc220a351caaf6e6924fa7a0c3be63e7b14de69c2f7a96bf89f3bf045956c004a32fd9a4766685d8f9328fec66164f54b448405e3e2f94da8e10baf034f6fa07a18ad8aa903fff1ef00c31de8bacda0a887ae3b3d01c102494b5f7a5057f4fd58abb693e9f5117db8490d7542b08a67f1de677f0beea4663a4d905baac6fac0aeb59b0f5939cc078b699aa72f6f8a23b04e5d8db30d68a3b6cdeeac61d08275a56a9c20657b51751d36ef670198c3a4a7b35f84edb696444daccc4dfe2cae582158497a7f7a0986f0a070581c7bde56af662530d688490e174607c1aa195f0fb2f90d36dcf51542082eab39817943ed718c34959c66665f4e19fdd466bc0e3d4ac0bdd298c4a399c402b57b00c57a89770d941ae916ca41b462100e9b7de8e4604191ad46e09ba47e3397b1e451ce71b1111061bb4d5638285992eebfdad5b8a36a4d0e77668f4ac2f35b57ad0165d1035f801685c19c13e53be7228ee035c390ed597f41f487855fdb4207638f56aa42a7ffd84f81e795ee578fdf80b85e27c85b81d45c59786cd81dfd90d606600fdf6c31531bc3ca9369c69ec42ea8f75664cbd6eaa80b2fa38d0ce45e72b8f47be633bb26897417f60e444a202527fcee89c97439881eb7f1afec64cf0e15a81ba82af1088ee9f1bf830716dbc9f632232acb3e88d61ba780da8b4a3dde2766d632f34b18bcf038d7c8e9d7289424159054ac9975b8c6724dac17f513f87454578559b81d240f71167b84b5eaae4365f2c6059879fa26812a4d432d0e2b698f598673b135b9d2694727e1c6ef4b98b8e8d4ffa90fcbe322f5f3b2cf2ba858d88278bd4322696bf0dc47465e46feeb8a045beb724f207c0aee4a3359150cfd5464d25db7743c5702ca6d56d78a06df65508b1c021c54bb66e372ba85ff31912376497e569a4848ad42951cb36e2b4d2dafc41763a4b3d40f6dbe02b1cda163e82b8652426343f39896d8253ec34d8e5ec1119905bc19326df03ff99ca4a40cf5910819714ef9d6847da7a1d3447b74d3e30b02678ca883b102cc83186ed3ad444da9afc088586e3aaa28f09d435fee4708b68158a78509a93c8f06c82393daa9c7068bed513c3edae37f794dcc7d28f023e80a0a544d013451f70ee36b53433d0a4b3552d9cac1f3ed8e297366c04356714b48f04c220006ed3d44a3f6d960339ad3e6464fd4e3642a9394d6ddf2aee38faf3c571c49558be87e78d0406e722afe86520561aa78022db54f28f41f64774c032f1d0c97879b6272ee7d6f36cbf8b907461f03c515166fcff7d9bcc3b6cf3472d460aa1f31941aa3ca7a2cbc00c9fbe2e511b8801cbd8ee577a136e4c2909e9eb5ca5114bb54bbda45426ebe5c2303966b484c28567850fd595b0bc86478cbd91a4abd19f642063e88961c46ceea10c993cbd5720b42399dc9384aa2800af92f774bc0a10109a0d446e08a547671f5e9582b86a459d374aafeb462d25e4ee835d56c0c036d156c2545b0d043b8e313fb0c41b0f6404825cccca813fc2c4c60c21b712903bc2a9b59b6760ea32fb0f20510c0a0af8ca11d915364a1bb347804e9743bde2e4e5541ee437890ac1ef31d10b5a90bb98503451b9afe5346a7bf106f2149932657e758bf1d58777787ac288ecf1e76e44c8e3d5f9c6c0c115c3de2f43519fafd14d707ea3e92fbba9b0071e7919dc6dd67f5659ae41ae7d8123b1c42f2312b3deba7ce649cc32473b01a2af8859d145228b4602d2c119ffe00771f4f6862390a8c1f920abcb16a94d7613beac2f8cfba598ee42e3ee3182aac602138ba8f0dfafe6a806904405105cfc6e8ebeb6358edca096a76b85f37c7935d2ea66052786b77b2ee83b6bdc7e22d01fa76a9d4d47343ae43892a6c3795a143d66ec2c0e33da9230f3e09a243690ef6617f1a5795a8b056dbd10fb09e004ddb13ba289c62483e27675489a1b1c37ab2bc44a761d499e3caa41166b36da3695e13ef448692038c702c81a4d1d416caa44f5907a9fd80347d657a1cc65bbb15f139da9fea95c1e820abab08838826141bedc6e69915ac11bb6bece5e0051853aad3eb7e64461dfcb449713676e1137478306f0b8ef4fd90ccbe47d93d89298c02e82a5dc3b201883dfabca5ba86598461cd8b49966e3dbb77d9de75c633e35a2904776e3e39a9fdc8bf07d86e18fd900e6c48351311dc3e1c0ff8c52dff5013d984bf2c186a6d868e0ac3bf55ac38f085a8554e0afe78bd96bf6062ce3bc68e102acb4a1ff2c101a9bbe4c5794cc67a7b3bdbbd638f9051723a68df93231f9a45bd827e966af6d006ec14d94b048751e5cd84bde57611b4b00c53b2d8d84d9665cfbfa5eec64b1375fd12d895bb8b6321157e05d1245032583393fcd1be84d310f9d3b9d5ed3da2de25ae00c8fa29602326f0fce2b72a5c9157bcddfce26774680c200697d5f7e93ff048738b20432be2c1eea0c85155088c741c7f6382ba536eebe5e53cfb8dee06f712e2a76d85914c8b9d97404b921aa459c4d3fce599f8c1114ffcc2c6be9cd20a6b7ea4fba995609eccaea5b6fea0043b3e238d98928971203006e57e3025ea121a7fc1d8093c3362ebe8465b0b8da75454ccff73a3938dc042bc5116b1c55edbbb2f6eb18bf61da6bfa9a0436ecda1234b2d803e54cbd1445f32567eda0cd0b83a57cdf3d1a3c6bf973b30f6503405572278de9fa7d3932ba8424b3f655a78fe73c29ab7c9a41d8f6a3779d1643ce84aa1aef72e8b11caa031cdbc09a06939e6fbebb616a3162415b6caa29f1f7044a0a4870c355f5d8581ee6e53476121e9685fda9aac4ff879a730ff2f9c7aae6830c8227425fa402ea17f2b32a36af9e7072bc8875798320ec7020ca6be834def01c9a15b892f78f4c574af86de6122ae60efeca9af4f2b6ff5b88265759ffabb354c8944d0b1dc38d23817a52893b7c34ee0c848cefcf81deef5701e45b7eaf6374a2263f7551746aa7b381da8f31b64b07bc37677acc71510d7851574613dcf09437be1a4002a2cde259e51028970a1e7dd6ca459a02bb2219b2c3464fc5397369cbf6252ee1f27f7d8d9b8bea2632852218a26f4f388abb1f80d49b9f0e5e5981301b56fcc8d4f75df55025bc0ef9f7d5576d599937f38b7a5d63660cac882813b75b2746748e3cab100c040b614e4fa8d80e2062ec7ff4c6d595823ae6dca641d6444724640e5ee6b677914de14ae56cd45ca2eda9472ecb2d7a45126716bf2d6ed9af48d4a6af213cd473af61fca631ef46788105af137ebfef6d6fe70f60830f95b9b29ae4a9286a1e7d11368c28e7f187348b82f9cd24175ebfae2060895eee7652b40bbebb464f29349cd17e9e4ab4bfd3198f6fd8b7b609c616789aca37e96689ec476ba92055de6a4ec2c7e130d9354ea381358cda0fa84aedaed13f9f44e66007f2c49b682e87cd968e3acee51d3d5b17026d41242846d2c9787ef3862d6655c7c75dae3445d1b2dcc1b849638fce12fc18615ccacb45dc358990ea9f93a80659e8263ca96b5b9a03a963ad842390d91d722d49f685ee721e81098c3d8bccec9b68f500dc18d48d23e075e767b1aec09dc265ed071efa423cb931a43ee86e535933b0de4cb1f79aafdec12f8dd8ddca436b33cef5443d65e2eba2c39b8e1cb14922698ac6bed420c02b73aa8f7c5bb8b3c95dba23a22ccb26b83b56143c29e534282589527100c3effd0a1a280888d6b7802493dd0266a9b0a9fd460d91c7ede002a84085fd1a2366def16413c8787b40ec4dd626df9de02979ef70d701850a843da78dc5d6ad24a02b942e3b118b24d6c05586d57ab50235bfc97151f6719a3b1b192fc06bf99240da940fd7c16e2b93a64c6d4ec256687dd63cd2ac27ce89164192acd2581a19bedda069c5c8f24d1493c54dcea4be7576e96f71c498acf6fbced472423234df0c124bb6389aa46b4e2c809a05ede319488d4ad7be53388a57d0627e64d1cc8daa51ad070944ec9c5642f991a96311006afa133974bcb953fa5efb6bff8869cab2449924c05ddf159f425087bc13bfda288e3681ffab0d8435aad9dc97ff166da7c620d6cea014c53d7c433ac80748ef1ae4ffd988e4150085240e4ae0b9b5b7c5ca277670d60c22bbf5f7a9452ec889376e5af8a869ac97bd6c865e53488374c3a29615a815db0d5990c53ec6faf10c08b41984146e1325315de7b52325ab3b45b98967f1a6e6214f0767264b3e5166446a28f37b0750182a0396f39b8d72bb8486b316ac1b9c12dcc58df7cf9a0ae8cbec6cd3071d84f8b10257e8bd3c8adef4490ad07dc462c9285c9c1286f4cb55f5a12d02606fe3a2ea1a3ef8e23e491da0e50da1a3cc289264b83dcb9295b1b568f85428cf7bcbaec2449589b8a36a96663a21f42657ba9b398669897fd9ffe0117ed46133cd84fc973f6c57813f99b36db4e25f78ecc0a343576d9298e0dbe2e4c35c018718de39c1f51c01d0e6a6157cddf15a7136feb151014aff01e737ff158a1295609c070e3ab0db13f7d8f0aed08a2e648e3f653b7ce800f87c5101d20e5c3ea2628b841939ace9388979e2ecbd6105775ae821a67565551a377ad9131d2e1dc9698b3710e338c04e5b9a037b0fc13473479afc4fc1dd328fc5df261d0c93bd5e9b4589e4d376ef1a5a251f2e484eefb37673c49c0a8abc5c9123fb0a28fc087ab749d47c46aa8efa117f43e6b4e447009b5a4505c19a2b56b5b2482dd77007f093842f402cc8edd2c55c090076c7faa376224f6afe16ceb68e061803e1854e28ad79675054eb366424573f5bbe68244edc30c66794639e0525a4458c274963681523744e45401ae3b6b10b5b9117bc235be435d465388a9908ced9575120529646e9c111d646a66b97a5a2c1ddd537899a54c5426536daae98b567e7f3f6c06eb7ed2ffa01c7bb80a00a2e6317aa32181da210d38f9aea216de1aa0cf99b79596c3623397926f6cb61486c3d249d600f70d85cce207afe07d875aeef4ae9c3ec2c66f09a9828ac36f1c76f0f4a6a7ee438cf57ca96ed2415ec508cd5ac71c932f588f56f11be439e460a4e6cfb0909264a75cb8a93a57badf199931ea4f10fd27e0068fd0162bd2e6c05f8a4b81906cf84ab93a43e56aeb7cb1bab595a83947051e30965049b4808f15dba08a52cde03b3b2afc703067454e0d3e9b1f8c67fae11ee6aaabe125be0f812384ebcf31a37852bfc659aeacd5992ff244842049410c061b92a4a5488d01dff0c5368443ed57e71795ce4fb7c664755b052897c8b5773cb3127feaf10ac074abedb3246e5a27d17c3f54813279a0093fc4ccd1351f1b7f5c37201e76e378e1fc26e5989228ad0b7c6860b0502a45185e6e9645137d1bf8fe6d6d28cb0d84555af4791917f75575d815d49b94c24a900db933a68165dad3d84d2bd1ecd76c62e5657ca4a50463672fb42576f79b15bf2cfcb2eec56df16317f4412c538d1afb17aeb5016c2079791dcd880b1198d3fa413b37623c0385a2e9453df0dfd23a4e791b4c29ee679166891242767f0dff13264e2a3a6ac5d7c276d84bbb648e6adf808cd14df2217c1eda3bb3397c330b56d5fb5c896e91ea631c3b4e0c66b442e450984b77a2a57213d644ae9f3e3406adbcc8695a16468418a8c5214e3fbb2d2e779b51ab22d15929b62b2e5854a0063c3e34d4dd4322309de460a9fdba216a9383f17bf59b4d082c7f8a61753302fdf2b5c201fd15cbfc26dd773a944e2dad605d76f240d1e793c276b0539d65144f60003d77ce2e30a09735bdb8b7d7dea6bbb7115c251114708774a2fc80bac025d0b93e059c949f7c3e1289bad8fbe32aab0c20ba6b75cd20a31570008e70afd25d7d87e22d9798cf7df7456cefe7ebdaa19dc9d606ef5aee89900e96eaf36b9fc2ed5b29a3d2ac6c1fc096b124cff47802cc1629f3980866781fd3fa28a460df8f577df5794724a83a9b0af37fd26ff396494d8e71c4d63f171bd16e431e2135e8d9ba4fe01ef4545f05ab7844bf681043d51a0b2aac8cbd02b84330a678ac27d3655e88118b9b409468f75d497a6a8bbdf11e360a64718d462cf670a991c139022b2fc7d3fc21b497ba834a43933ea6409e31f7d90dc2d8ef6c2a8beff9644305d032c9e4003c4825a65b3b5e2c8c28e55042205c951843b7a7a41296329c3e671741eaff3cf78feeb6e2286de213a83c06ea42dac1b53655885f7fbc3fe2f25b704b2d22d6f732438f561852c6c13d60b7699b09ca3e2584f89dfb36f0497f8f226acad31570f3f9fd49bea28daf87ba4579c5b5dd715fa0206af1842cc45da61c3751a02ba44c3617a6beae70c828a1d518566914f7937aadb592b0d85e69d27ad55cf1265d8f160a53a12b3a7032b3ecf80ffe43da8a42faab74a93c577ce812bdbe8325c32ff50380fb6c88c42436bfc36601cc27653b57f28909e95fc7bb720c8cd5a58a8d1530ef9146fd21f45f9b6c75c3a760b313ffa29820340350b86d69ce49c8415b8023a6765292bb2cee2feaea6082396ffe35f20b651e4de3d804e3d5056501fee28f84165e0dc1f8f243dca3b898ff8efb9c68a78373026228409804bab64b19eb99f357da11501dbc888050db686cf763004899594989873d9f6f3ffc34c13e8152f9052245c2cbb23cfa94be8662fc9cfd5475e151303e2713c734ae3db8e92ce2da1d7be7e9efab8158e295510bd294fc59c8561107d4c48a52160d8cb8b0625395a16358df855a3a9b971ff68402728e5e096f28b20e7d02233d57eff41264e37f021efd1c6ecbb707ed7afc42c818fce774480e74b90c4562c731e4c84e08c43dfdf5cf573ad43dceadc535711f81ad9604cd08b260ff74d5194b6c33cb6afbb977ec35124292eba2d254dcabd01e6ed5a612d081e162b8b908ab87f5b4bd1ae023879fac94db23b75f2a4e08db98af19531a98fe6d0837e5b48f9159cfe74d38afac07e6a80415a395eab6f3a04c09d69297e8ca77b311d95d01140f4f75c2cea2bfda04b206a0e05fa295b1f7885a84729ebef17ab9006db577540a38d8e265172b11ccb742c3f0ca80443afe5d4f867ae289b7ddcf67a325b06dea6799b595b72d100ddb8ac4f7f16171eef252d6b625a333a27b0eaa22a9605f50c96ae65c3bd1e9218164a3dd99ffe95558f24183be7ae2a250ec8f068e135103ecd4d4fa2cbfd1014d4ab2c74380055a0027ae05c571ccd2954108659c16cadfc2c8e64d66d7f8bcad7dac709dfbe2e7aa77cf565f92a48e9658abb412c9df929679fac9d2a38b1a33fbe10629c6d886351ae55a24d544198d1acc3a6c505cd739f1afc3760a2c35dffe1d8fcb1405f2fd21b5d59e12598e595c8f4e57db6c9a3d6d28518ec3d4f17ca970113fc909e00cf90dfe3d38138b4044e91d18f4a51ce8793df870be5bdd596eabffe2d906fa15050d09ec3148387a42b66f555f9c7518cae887db0d08dd79e5adc7e69ae4dbba1832c18e909d6638b892ad428ad1e3fe04993b4dc6e8ffb54144062f07b407e15ab8ca2d3dc9c6aac950f064bead175b404b9b5f1cd3f26a8051a33cd3290b992d2fd585f8d1afd313f36fc543fbd27a5810a6a26b6f33782ef013532124f4d87de1c31fda7ce80dab275285387c64c5796be075949f88e4dd66322971f9ebb11bba5ccf7fbe5563164fc80f1bcab9c09b3d49c4cb12a7a519aa5e257325b0305d9bcc595455030c1b03f73b52b32eb3295ffa9f805629869f2ddc1e16151baf461f213768de8acd1d6282d14952de048e09fe4fdf949046cf797d11cc6f212a42e20854056fedd2e9550665872d3404dee215b9db484c4aa130859a774ede421a73818868c730c772b581c336e902bb0cd06a5f9826ec437799ca7efc6a36fd352acf22c1ff3921528e7b365f1602168278662ad553d07e876f349dac128f577bd86671beddbcc8ac7877b5fd597edc0545e27acf2905903353f77c21a70aa9b1d6080407d88626f8390ff820887a1b1e6918e19fab165a027a4be1940a06211afb72d170ade9c66605c8b3ad68f6a95159039665433b417fe2f750cb7e5b52857d5f8cde01be8336650439374b37328212a78db467ccbd163d79d88db2f539ffc599f5382a3c4d7899911e5b2405561e45cf216acde95e4a6f72a77fb3e3d0db81324202b0d29a98cf49d786be42dc52908bc10d44b679718d97d8300b2c0c60ff950d017727a0e7419c07f88c5ee1c6d3fa4296abede595af930313a5eb362b05186dede7e824e4135b9ef23dcd089dea6bf38ca78f29398a9de070990402e7d094a726071722a8a01573fe06829f6b00ad7035c98199b1e42691555b45ae4b020f515351009ee8c6a4f313b7cf8bcd163cc4dd65cf689802a810e3f5a334e3123bf0d41a7e7464b324b482913a6f868f472fa2ca5ba12004ab2412bf96934c69d3a967656cbad2eafa3199419692b38c5bef61d15fc24bf6ee70c90e9973704066f157d2b303d6ceb08c566b2027eb4c3e356d1cd93a0e7ec299c4440c27957d1bc125dcc1965312ce701bea98cd8ccc1abf80a5d0b84c743556db05816badeb7c449b624fd216c144ced5dd778a040a607bbe403495b5ebcee7e468617afaeb09222e1ae177ee726d2635887541fa5ace072b6e6b8a97e3925ef7713938db2c28e0f1f466fb23a14d6aaa9487b639e3e01d570887f4c365722ff106cff19b02659a6c2619e5bf33986f8a43631d9dd1704fe452c9017cb5d6184cde72dfa29384f085657c9f8eba31f9f21a8d62b1083950204889f50ced8417a424d8c0da393c5a6d66ae67190041640b36aa0aa45eac447d42e35da8e1011d4be7aabd1e4a822fecf5bc915a0eba15ac84cc55d5548aa038c783933ab8c6b9ca9cfb73a6d2b31b2509ff8c4bfb0ea76016ebfdd7276c7379cdbdd09a8ce83572be5229e78be79026535fd53af7d17e45044889752cbea630cfd18d8d5b760921d2018ca55212a5464614ba1cb53aa4ec4221432e94d4189f3e57d68215f22cb0632ecae9809751c2f5b9016c86b557b59eda7498d71bdb5bf853ea8b762f8dad8daaa9db2ab4644a31960d608a73fcbecdffa5d4030ca7843ca0155a09b6b22c7fda95e3f0213bb1248e832d17820eeaa1539d9926bef6b3b68821c40903c52a3a22ef1a23a75534ee0caaf3b2b49eae540a82b88fca995d4c163222d9c3e71e197fd3aa1e73bda29d9bade02d2a1643afce21b705eb920660d223f315382b56ad5c934f7abf52cf31af07b45197c5874b63e9e07fd5bcef12c398c2b8b58a71edff4c586045ec618d9e6061042118db663ea8148bc678b336d2aa3e04beb8581f59e76b3a1df5ab8f7924463c55c6d46de778bc270b8d8cb9d7df2e92eabf0805e1e39c40b117994fcd524b9ecab038db68db56cf47e6a77d7e59f82d7c51e524e9d7aa24072743a162c7b1f62d4349ea023fee0f883db309a90f5f46edd59b6fe3e7db97c7f2608141c8c0c1273e448b15d2c16990425e709d794e023ff8ce7087c474fc6a889b5cfbd258ecd127488efa3e2bab48736f76cc56e69acea08f90be6193ca68232a1ca224423fff4b0177146dc0d1fce9cebbf948fd7a746e66e577b2e13e79f49cdc4d4f36cf52da04e6e75b4d9b2bd59075b157f903f2b32092120e60efd3509b011c24678f7803ec069c9c1a07f6080aa60149dfd98ce2ea516753e35d0f74c6beef0d66314875a337256d93f2bce33f5313e9910d50774b1a8a787ca67a3aabff14911573495ef180a05deda9b44cebc3e1445508556f135107e595b8e2f8de27dd2333c8ee4c283dfad03e081d1ef5fcb487163ee7b75f71734853070b7695e20a3f69188904abe967dee5c9411331cbfe3411e58ec99f456d3351cdb4ec5e2144e859a87178a1baee14a968353169b134f39a7de9287e11ff0868db985a51f752cff804e3d3f5493f19efa33642558fb4f2839067f059e7b8211147fd4ee0e30e8abf347bfefbb15321d7eb1824ad6522385253764d2f13c7f02ec2faa102599f8e04837d6acf05ba31d57450aaa5627f67f98b904945472d1341899c604ac2775cdd785bd75f3b443528099cbc4a97b92467999021fada6d1a6d7a223f5967c94f305454b655065654d6c85b19ab9425d90b1406e2ea97bb6b1acb91bda94fc712ceeb55f28f7a39326fa9bcd7eb464bc17dba3cab4c4019076b3ad60ad5deae61f4af8d228ed8bf3928452f87b2ef12dd08df9f66148bfb31f714af932b3f3070a5127dea00475c782b51269a4d9d0cdfdbef3f6e51fadf9ca428a63c139336aa455b64e2cf7d1d1c44e0e052aac530dda8a11a60ab84fddc54f60c682f459415eb975555ff8211746c9bed7816c6d90ae2cc285a9d3f2d3a6e3afa8f1a4622c0f4e0ecbbc0b7105f49f04a20a906ba0b187c7207ef1c800dff194bced52a2e19ec94156454c525cbe2879f1592c22acbbdea1accd7caae84f21caea917c0da0f46d39c86fcd13daf2b9f8eea2d94989f313963537a24c6643fdd0940309d25822b6b19037c3e1fe60ef0a4b4621aee25e18cd1ef13a54b95ba1857e71ef22f6cae2873b013288d82146936cdf7adf78307abd2e2ae80a3afa298e3bf719b61606139782cef14f76ade7fddd383424d740095b26d9d52fd317e962170666fc51ce6aaaf787925e12f68eb5897f5f7250444d1377f0f336d8e770a059a0034290fbea5f3455df1f9d44443269b4d0fdecc8c7ef69e2859db3a492f3ba06c1e70ba5eb4fea72e7af92291f8f1161ed546561910dc51cb74fd89d732ffbd9b2d82b5d7f6a331c269b705fdb0203286b251364bd3313029df02ef3bb7d6678c36e95758ebbe92b3822625f48a75785e1adaa5c2d5346246de50cbd19f14b3417d9a05538a432e1bd5b1921387c00b85acb227607f8fcc1876adcba3df2931b928bceb0930560f6f64397db91e85fa364126ef6e5994ebcdf7f8dedc310f240e92c796441bc1301abe89f1ee61d809623f15b50aed1cf0f63c162275ce0483ab9dad8abe95a844376a57b4d07829c0061838fae56662bb4afafc31c08de525dcb0b098a8037218fd08894f26e54dfd3e1502b2311453fa2124f3b2759ceb2752c04dcd071d2cd5ff72dbc5e994383fbbbe777bd4e2d23878191268df85fc235c95faa2b346f7e8a594980cf69544493f35b98b55d4353346c98d43d9f3bd4d26a682268d20311c2bfa351dbf4caf5b8f774079398619b3db8530f4d19e97c9e6cfbd2adee16d3835ea9ae571375c4bbac013b630b02aa30ee13970de5bbe451010b511074adbd7dd9b2b5fef073fa32da607ee447e262fa864b87e875ed109bd02a5a390a41008417cdca7a38cbb90e5934b2151f19265c0cfd28462951f6cd2cf2dfc7ccb15cbc38f9ac8018ba1fb4d3b19082dd97fe7df0b5b9734db80522796876a9658580512234858a3978e4dfa12be70fbbc7e8fa384e761168b77a618f64879be06173d702f3a7e0a6eda658d5d3697880258ed614049e913934fe110a3caf173353ce13918b5e447273609e9fb4bfec0198527d22d9be3c0d325dc816c6e73c3ba418eaaf0d544219461b9f997c21e35c7341fda83efa4267182050b81c056a7f46175f1fc3fc746fdcf6da810800d476b960fdc28aaf01b6ea421f51f0f3d222354e2042d360993ba47ebfdc36525189e8417f233ddf6ed833d481325da1f1f39a950c1ec9121a6996197f23d7c3e526409df371d45b140372cc1578db634e7b1a63278ede249f57d35b50e006de7cb6952016067d631bb649a6b7eeccc4ce6f4f8de82910f92d804a1c4203f3fc23e26e0eb3ad82d9e37bbc8bc3519eea957e9fc6a838e32041e30f9ad2b102980036210d95cbf06ac13615486e8fb2a0e2ab88e44c47d86ad3bf828df52c6926fcfe11f11208707a9acffd91997d808ba9e2d5a89cae073c5ff29392fea405a8a4821512853aef87ac43987d8bc9a9034e07ecbbe3673f9d5764d3beea5056f5df12a62a2b2b250f956174b2537630ee8c921bea8fbfe8bbd589a1649d8b089ae9f0c8456c4acb867bd1b2996cb99275d79d8bbc07a210699124696769d34c4b6f936cfb715b86b51bbf2320f415ecd92b8711ee4e3ad8149af4d8b1916a9537d5e4325f1df87c8a74d8740bdac6732256693e8136f97519cde0605008af4cf89661d89343ebbc64a9d9a8d6d848c4f5459a6889400adbaa402f7e233fe7dccbddc41dc2643e252d8cdadc81914af3335ca462c660e7faee4384b585e7f9dfba7cd2ad3d6633358fd56b96dbb52060b0be741129fe0b8feea198d8d3f9cf76308f08737fc813d54a4d1adc6ed37eb539ff809ed65a2c55c7e820fb783fbeeca6d7b94cf3a0f0d66241cfc0baaddf554130eeac74adb4ba8dde6e7b93b7fb03e3e2802828528eba0b6941bc0781846bb0e29a9f23de0bb149f58c33068dc411a976f0e577320a2c5602ba574970a2fb15dffcdc4f7feb6407544fbceb733b105271b5fc1dc89b307ceabdb2bfe778fddae8d1ab4b1fb06d48add19f36834dcb934eb5982f25bc70dfaac9909fa0cb66586efc813c024cf642b9f56af587d519c2b20dde6cf1215a0d3660f4a81a3d5399624f7cd884831b6f498a8e6acd2cf03a00612efeb680e39502aed911c1811920c2e681030c0bc871abce1d6bbb00e9216d0a34b3f4550f79d1f158bddefe4873f064acd7a579738208a28598578cef20c1b71f05c1d80ae5cb1b79dbf1d776f5ba308ed9d7f5ca37535a3816a3dfcc3e3a85d1dcec90bf2274b9c5cd44ce8e85f90e049756e8277e5eecf4cec10de4249976e7098d4db123ffd2c3e3263cb52663a715be08a3fd989701066ca895e87fc5ef24b7edd5ecd9cf5869261b624a71c6ca1cfb62a1b41b7059a25d09a00a9e0716365cd534c2bd382eadae13adc9e02b5d49a13d318547b5bdff7e1a5f10ec68729c50580b870b7b8aa429e77d54136d6d24b7bf6f9cf60ab306b1a55e1e1415141323a46203c1c2aa9bdcbca6079e8ba0dd4a76962174c84bad46e23c702aee0f7f0d3ae52e5fd15d158f2bd975240c2449e103abde065f892a33e29a30d2de30c1968473fa9aeeea5d2b5d3f5b3aa7f918b744927dd281f4a7dae1e00aac18ab54724fc194b090aae50ecac47528b56f56f380bd8ece494c88c4d5a28947992d5179829737bbd79299e46db57922487ba1d9d41a3ce9f0ed72f2e9e046b2246bf2f529ce62e3851879a86eff1f3f8b760a5119f74bffe778a2321793d8bc09477ee3fb1678986bc3c8759def63edbe6c5a29f1f67e1f38b5083f2e475fadac397ce68c2cd77636bc5a7986d1a36543a40a5a2a11ec65958545710b1720ca2f6430d706f1b7f31a56af840783943c3cfc935a6e08fd41f3a9d7b9bad14bb02f94db9866f8db0ed16db1bbcabe47810cf84a756ae6008f77a04d6d105ed63d39a3d7a300616108b3dc7e7f5af28b718437e9146395936e7e61daf0580f9c3e75131fadb482fb2998223225f2267e2856f4d7886035259ae890b3b06e5946dc0cf1d6035db93c5ced8733e4f49fb340f0decd7c371eaa06f652991bea659b10a8ec0b360c9d50c94cee5457d2501ca9c550994477c3611f93f9d4d60b7827d391ca74230bb4004c319782cd2ba791d62bd808e7e84da125fa168297077ec87d0d8130a391d89675575e0d2b87a1a6f016ad0bc2774b1bb408305e18e1cc68b4d7e15592fd3871af40559e9205e727cb525c2a1b86a27c57e5df5030e422717180ca82a54c8b079986abf3fb3c4fb2d2a77e5bd021ae1351116e50dbf4575d4037ed8460c1fc65b3a99e964720d10908bfc8731be77ea6e7ea80070d670990e98136ea44763442f852ed7c99204f395d615e82e7d262765870157b6ef681252b683c1a33c6a562a203cc61ba83a084dc7ea739ff9d706fa43fa66e181ac0a62448b3435ddde1d6a2fd944d1351cffd7c53c019ce1852353f7f8cf2b0bcd86ba3e77ca804da25939236a52cdd865f68e8d52f89716f99b8a5ed4e13c72e2c7ca81935e3cea144240989926cb0604f062a81955d61d880e0613eba2527b110dee279153872d9beec4e73b445fd962aa9d1e752e2fe082d3e934bfd316d1eab5901ca9d222d48d878a5c523116c5c7ceb5cb1157f367e9368a86bf7462fc6b005d9d6fbcf6d1d9b724a75ad1a6f23aa1eafe6d8ab76f7c24b18f364c3f5a94b5ef0e5216549843cb923e12f7e6cf79da75ef025b09a97f8265be0bef258ef4833c4c393d4fdbd37cb3d430cc8b","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
