<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9caa468ea2ac026f2af0b1b6bea1aaf98048a60ed88ff266914501fb0f3bad568f77b75d8abe9dc1ea4884e1f235d0c8e8f177d2dbc8e402d5add15786d2c1728bc86a9f3a6076a1a9cd63f5a7ba5ca374530a301bb47c9997f0063df8a9e602072979d7e1991119bcfdfe39a256b29df8862aa622b442083b8f02c1bad3980570783eb3bbf46d3f4c35ccb4c996ebefbb466bb5170421786426c655d147d48a642fc6202a96901bf4b99689c7faa4835967ff16ffd1e8ea0256ac89ca514a33f1d27a20a14130ebac0465c0986df9f773b391ad24aed1d5d1355b4a42a6c1dfb4f847a5701ad4b49f1da643fbc136d90270e07c2f0f801a7488b6f274f8b181b3792ef2fe6271c959285cd96c0ec82012a3cf6f8959b6cc4741762ebe598b594d13f69fe7744ef0ee3b46cb81e1ced13b0f782013f33a70a72a7a1ea050a43101acfcb6cce26be1103cb1cfa33e61bd850c329687cf8a61a435803c1c090ae2282e67bd9e3d0ca3ec81a0438e375c19a109f833f57c6d160081c4d563f2a96cc0b8d839e27f7d7192f09120fdc7f05b33433ba3a6dd9f989d1c596ea49526cb02370241ff22bc9bcf6a03e99dffc3ecc02615843c00e165165f885b925aacb09c6bf2413a82bef6721d584e1208a148bdc5ec3fb4b13701034613842fc65f9c982bd40b3742456aec9b8eb2b7498d8d468c9436c7e2e0f3c815321659c94d66b89a33c0796b72884cf87d47e0e77da5ca02b3ea76c66d1225710c1f009db37150fd36d85065b6aa4799c0b0cf38591b4a920108b6945e715cd7fe2d0ba9da5888abb208dc19893ba8512232f658fbc125584f4c82d0911202205fe2e6f87927d822e702c7f0341bb46df8343eb54415358e80b5522187b0578e1df851ba09957d6f5726773697cdf4f775da2f4fb21d3e46ad21a34ee4b8b7aff448e0bedb3b59eb5451e6b9de42ec7d1f708b9ba93494bfca7d181544750fef641cf06952dd68a72c2b042254ca3f154cc0f2616b908e9c64111841cfd10680619976a73388c934cb39b46f31ea17e170397fc96107f7ae78152aa89412e91462005f6da5a7792ba031e1bca5ddd823e4c65e974c8ea6db52111f04c78a7cbae2a16759aaa00c7a19a1b594c4f48ad0c849d7e262fb14e833e6ca833bf720c2f94a3b2706867c7fe026260dc4715bd213007b30d84a07a049f6b3b13777da92f14490d68d5255b7c7e9f705fd08d6a8fb720e1f59bccea034d7e004f8f4902a7bae7070a6b59144e83a9498325171736a38da7a9dc69960635e7871a1d1f4779e096d484c4456f7a8ebe7da06a66cded12a1842b6827f786bd73cace3de7efee021d5e42179772b61e864b908c6eb977f8bda2400f9872306e260601177a62111cf17cbf5cc4af96da0a0fe57e6628b78eb7c08a006c78fa91fea1998799b09d51e95e5597441caf33a28c6d93a4512471c815bccf8001b0e76d730b9f45e131e90d63573378789aa2896c2cb3d7dc90e9cc6e125652672d6c7a3a5e554d80b6fd12e703ffef6f49a535c0e440c9ba2f144ed6af5b3bcddce18033a8271e108cd8509f21dda83761a8e51fadba6dde25797e3991ac5d5c648612a3c9c1b06e9cfbf99268072ecb5aead430cdb95bbf0ce6cf7d61bd52f187b8b84fcc8a71b5f9283e343d7ebfb069cc3ede77b6e9f8ec8f9604fd93bf252512f1ccb72ba9a4b7f23182436d9b99a562332e122daac2876e1e3452d1c090731ecd1cff5d12d0eef3b9d6ac16200703b41e9b452bd0976bb822c2ccdb56df0fe4144f3ad1ee1d0b71f586a96f7da54f641f0f875819e6fa9e35729e0c24ec2c8e90b03a7f3992f6dc4e27a596ee04554da777ca7b74390a06f19a9b861df8df535ce5762a927003ed14ba8680b761b17014c92ac05569cacd50e2f89bd7b47529d00131fa44ecb434e2b7e7002089aa00c822c9f5bdd7ffdd90c5b76907fe1498668e02170bb6c4f36d72181cec010252a2933082bf1c24ec4cc63df794725604ba880118e33ffbe3c7dd41a063cae43107789eecde72e98111e15cec622fb2ddf18299cf15b1b973a03308ed50f938315fbecb9c166818e2ebc976196dfa9b3341afafe4b4ee7417634c44021ac3da7d200c665875f20c98b97541ab478d68a74ccc494c270c4cdfbaa87a86b6820a0bed054509c5dbd6fa041683239eeaaa355ac596495c6ecf28cd5bf30c2517bc8b50bcd1b42f688d4b282ceac1cecc6b2189418d88fbad8fe7f59fd97c09d0e8afec54478aa6ad02b3f4ccf78c96642e2cf9f14bffaaf16acc19d3a21a561e81cbd4437fe96b39c1f58810189c3f1f18007ceea7f3f985d903b2ec8b4b837c42f747dbfc3a9f5e778bb1cbc0a1f6685ec4a9e0efc681b59ae59403632f7f0b153b89d0f71fd55c5a53a68ab5c0092e29f55a1f7cc6d74dc70aa42f4cd8d58fbc9ebd597de8ec347512a754e09f2db894310a2aee27f246fbda9bece682f8f39c41de088183da19a9bb062bae06efe16d0cffdcdc1d9ce9e0a1fcea484b91ad3b272fd5a0adfc3a136f369bdd2684cd072a6cb95222501ac3dff8cd683169b6d6fdca1c4b08b07476631d375f9663d2348f23fe2e760bf483fa9f3f167d052028c32ec442a74668f183b65355c3aafbe980299c80385678b07bc6c99b79d9a628eea6ef20417fe1c8ccd986f0dc75343cd5ec8c14c5836eea43ab02c4e0a413f3c29b0c80de54a6b2d2b1da91577df86729a4d9f4d9f00d9f1d6c6038c9f641392f694d2e70c895f9cd1d2432de238fa1077d74348a367f3a563af7ca9262d23f968419af3bd51acba61011e045130bbf507253df01be9bbe291c693d8371ae0e188508483a1a755630bb8c42d03087edc982f92f6ec9a10a78cf95dce2634e66c223d209501daca50d08b0d656f26f3c6e7622368b2b09371fdb7cb364c5318128afa766dbb52513ebc41a58060a271909e2f1294b028523a04a35c35a773cb6e4b1ad28d722ee7bdf5374157ba9607dca4a5ceb0e78cc744f5379332643449b1734246aff9beca0f7d55feafcbf4cf34806413befb2362eb40509bea6e029d0492a5c53b1099adb38d3a5920be04d8fd6d05fea29645f7e43a22d37f4b1ddfa94d0b75bf2beb66f2891c0876dd4a1e022076b94c5a66336457ab3536016a27be9244fa4afe7169a7f4f568581afcb94b2006d32c5fc923a4fa5a56dfb632b7066743cc516d4d8f5bb4d9e8924c851f65490743e0245f8bb48a661fa71b1dc4e2e2e48477ae926d35162c91a07c1a169ddfaada34482e66a3a75e56d8fcc476de1eabcf4f2aacf4efd748f0cb82381d52e44f1128b985d974dd7781df7ea247acf3ce74f1318897ee91806c7ae12ebb025dda92396e33c215e23e2c1fcde1f75166b8cb933c5f10554d5d4090d67e667a3a7f5728600db0b31e447d04c78f3bb72b777d781af1e55ba828434b026efa9aebf2cdb3197e1f61cfb4639925ae293ca58dd0db94bdb230999d6fa6954c5d76dee93dffff716f075b51600cdd076442e26b6099691aa1bf3acd0b79715c9bddfbb83869adf5b5e840d172761a0d35fb63137ac1329adda634e1bab1a7e864032d25cb906c16da500d2db4ef4f8e641e55883c8f6095d95b754257eef2d387705eb463dfaa7396edc148f9e25c8ea2de9578c1a668e6dbbec8d9dacd4bbf5416291adf6ee2f169cd6cbdb4f8a53d1c7fe7132c63a72ea40db091b882a9574a5d243089c699580f035e16703473b049ef04023f257644485f1a9f2f26e0b3f0aece0f76bc55ae9f692414d1e48951af38a0925b8193dceadb4560848bb1f4afc9c56ac8096032a0832401b92dc18ea06e931b5a1509cd9fe31e8180bca9ee82a4b3dd0f2fd64333fed01d929b5a01fd2ffb709ab17b1739884f3da79e8be7257170a202ac5a51784b88d63a28d731c715cffa749e62551b97647933510e33c9020ec11eeb58040c79439c4eab4ba7a567b1eba209553504427314224765139ea301084c516bcc223fe22acfb4c6926fc80fca4ef44c59bcb761a306b4cc0a82b8914e4676530523d29bd96360653ae3c1347bd5a9b32c5005dcff72b26c259cd3fc8f4ba9a1d4780b8f24bdc629c8fe25a9f1f95ffbce1543554de98963b79e594268676107a3cdb969dc97828a17100a1bbfa9f2b45d2b08bf13547e6be6d24df1c5d6f73724367f1d0603db09de92fdd869043298f03013cd09afd93528a9a3c51f6297be2c88711635b44caa81e87d05c8d514580a6f1785b73077b0a1502d3cc13a47a4c665b053337d07764caf435449689d53b506fb04d6b942f6b43dafc3fca1fe574513b461a7024bf5c76d842990b3e7ea47564f087bd9eb64f5a60b8eb448f56b928c68cadae5ed17efd6b55d9b6a6296717b8f8b08837aeeb1e43fb6874b5ad4af07cd1cf00af1f89860b3fcf4a0c14092ec857810fe85ae7930fb2d268271b32dbb13f6e41a0954025645447d0b367cb899fd1a9a591d2869c36b29e619b4be17a5d7201f3e44269614ffd9fb15bce967365799863419ed5c6afaf8c91a7eb69c0eb3d8910d602b3f622a43cbd1842f49ca389d688796c2e97ffef4de3d0715324caa1beabb33f3ac7c22a52aa315eb27a5dce79e46eb8d49498980f13f2c6032d8c871774b7965c03f4e79f35a7a8b1cc1dc10ab68184fc139bcea13704ecb408bc3c0d1490d7b30fa9aa2c4a37b6946b7fdb64d1530b611bddf13f1aebeb66e532044a2a973509b2a6352185443b37764df377e91d891b39a7a7bb444dc08ef274a6d32bf00e0931407bd9ea97ae04f43813e4dcd2f066d80e7929412fcf53353784257869ea035669935b9726776569446e1d2074cfd1c40ba66a90c411a1f8743960855b6033baa7661f69eeeb9ae90cfe2c90a1676be08482438d60c56922f529dbf9e564a1632c73cccac3a5908e9995135bcb8803a6ea1e7f0e233901c14ea2a89a6610419495ecafce0335734638bbbf07c4a46c2a92a9eec63b4d8cc8056d4c4956f7210db0b0d85cb881ee0247959d624685995d7e83eb50c19fe6777c814899d6b429b855e28547014e68e873b6cf7191e2129ceab50e82c9219c2906380343553916c3d96a83aab65be1b6ea7f0901c61edef2ecf1b1e60db6b64ed43ae243f6a48d9d9e3fbaf174a00c3178d2fbed184cac567f2728df15e57480f98e1c7de37aa81d66080291caa92d8bc57ee2cdf22d9337220adf79892a9adcce1a7de53e3a65fdeca613419b55f54eec922b32903e7d7199f585786559320499adf72bcc20e273a50eb9fbde4eabd943db5e903958efb92ec78d6570d1979b79790ccc0afc107ecb030ed1cd869494ef037889063f6b95d99f4eaa48e4c64e48abb0d7ecf076fa8e6b334bb7e8d8b94ae4c1191728cf0acdbc5bae03df2cf9a43a7bbb01ec2f7ad9a1e88c6e92b9ae2c759efc10973efcdfcb18cab613cfeb02e45bedba11544ddee2657ac7b1d2dd7420ff93071c85647027368aa142a615e526dbf1fc360bdb002ce3582916fbb5feab6dac44394580e885f29b112610debf9bbcb875c49363bd926cf02a75b673b9a6d70a86d0e59943be3500f1f942e2657fe706a244990115d1e442483bca45bc3a03ca9f004fb9310ba3a2b762e48a12421935ae59e01d06255a26f4b99daf00f333ba34743ce1e7461c905b56cbb655dc6a78c97a4d82fff08613985f083ee5eb2b91610d14f6167207ac9250a84e84b41baaa59965319529e9e6f8dbd4a7fc17163588a8f4ab24286b5a336d12d321ef979b7c0ed42ea2e3fe8ea1ca62ad3b2d1114564e21994fe23f2d7020a61826ce48efa4449f918eee2ddd36b22fe008f42892643bac61b756c022d1f24d5c1f7ed97077abc2a3bddc06e4c225a7a6640e9b2c7b57103d620f08a88a920cec571de1bdb4a745dd0f8b2dab8190c9e7173d5f16c105bd0591fa8cfd607709789e1a531e6ed0fd64fbe2099290eccc021c2d6b954d958a667b0ffec6183de9c92394d41e03f07e6d73b07c8adbd82796e5e143e835510afc4e9b17cdb81ba281d54d1736d0382d78c5cc3dbecbf1cbc6f03004eda4825bfb409fed3555d96059da8f24e0d1dbc6b387b3bf22b0208f3a67479073e27f89b5c1ac9f8d26444fd87762375289385d9bf820df0df1b2e54d05c54b83c4e9eb0fb400ea66f5635b2a267ea87cf8ffb3d7e2c9842ac09ed32f8231d81c0c1386423bc28b899ab4fd8d96cb7d5f1d7cedea23095b4a0a07dda88a6526abfca65f2f0c5a93d0f3e4a57f35dbc1abbe2e78b76d54b2d5dbffa541de265d80a5836eb3d59eae6abdacf10ae53230095b232ed93c91fb7215867d11f6d858deae338b9016d3085bda892639659c59db225a7e2d76741e59310de9549320974f06f97608a2e83f3cdf67aee7e723a7012d2d495b92ea95efe614e9f8aca4627962fe36bf474305e1cf330773d60e8fc4a554b9d504b6e9bb161a8aec45fdcf65db42942196a82b43c5c09615cfce376471b103ada95e24c818f8dc7b11f9a6d8f69d4aee93ee3e5a9dec43e66e4a0a10bc1139d784bc6c96abf6839bfb1fb945c1f0cb455909b9eec178f7f96897cdb2e47b4e2b1c488c13d5cbcf634099d7446d32a8f5de1fddf1a0ac3f91b978bfc4d3cebfcc33638a887ef6acebebfb9d1336a08cc8e43d5477e1e332ca189b7bbe86461e59c0a44cdc08c24a71a6325628edd61c8e0a8676bb9ef37d43eda613b0bc27b917c76324826f9487c60a6ac72a2d674fe7be70f684d7e52c6f907f06cba118c635e31503f8d6c07ad58c45c625f1918fa9148bf05e721ed957f7d1efb765386992823c72065c1bbe6f874c038d532202149fc77a69e0f14e3c8f7b7fa482956be3c568f4f7bafbcf2619e2455c94939f34bb61a9a5c31e8a0970f849559f673e70c5b4c41e915d53fc2419a13b907d9ceb80c3bb4f2687610b117344917b92bf107df16dfe9582251bede45f0917b3649e87e87a04ad083e2f096cb632f33267008dafb6e674713d7d27a9a788985a215135aca157d8653d2cf2086e2b7e853fae24b82e68eedf4f30e29bb26b8782ffdca91a0e7996a291b1f017898eaefc957731092b1f0ba55457cd1bc589bf659f8fab65a8e9c5000a3603f0dc7bdc611aab30ef2592b09b1d1181b62e88c60a5e051415c897805c6a5a09b1f8bdf05f10aeb7dc52e8cbfb16af5b857c6910bc81ddc0fb779ca6a2f4fa18b63158522de4876cd7f4e8e02133dc482e2450d9a79e806a441c23350db7aaa00b8b8c5775ed6b2f990c3508150d1c0cfad3e6c29d0f46f2672f3b0541cd9b321c4561f0c1828a4d1a7abb928e352ebbcfcd3d1904f9f1b03898dccfdb3346fbd372b48d618f84766e2aec30cc38a93583e7ef9417557393b4ee187d35e72b3567bc65c3966aa4e4d79325a75400c8672549eeb80d0ac3d572ff23b81b88a1d43b1e6d832d8eaa2c0e4746372cc5d29537a9ad987cebf53d07ad5d628636a9a51c5f4c055c5dbedd01b740b51758d555f902debe92ceda141010eec573e41d6579a5e64bf20ee325a71ea1ef8573e8568ae579929cdccf46b135c847925b6dfda5561e72cb80f11453f0063a7ecb68ce418e975fa6a3f76a39c6ae07c6f69686bba65c92e41f70c9954badf83db0c0183d638e67b673aab7e4e09e4d0384686cce4ad0d6d8c0b84a9e585be75d1e51fc38c47a9b36b5ce3600ae7b60a1f7097391f25a71666e83b7445e99ae77ac5bb7acc9ba564a4683d60ff32a182b2f217d04a158ceeb101b7d31689c7a655d30d5a2411e7e073eaff57aa00e2cf980ac34452234cd41a5c8d4e8ee582923a92f69e7c7128ec520bff0dba7bda952e53d35ef38c35456668e1612f92cd77aac28cb594dfd185c4c8cc411ce7ca5bcb5d25bbd067b4acab9c29ed35371c56ebabe129919d9163a609d21c5435401ef83d48f1b144634142e57dc0dd33331a549cd3e84073ad006ff6575c5b9ed6d3fd56fce0eb55d57799f515f13edceb508209ac365bcdb26379f28dad3900d4ea5f94459c25173d13786e666fb88df2d9223456a3a2c2dbdad1aacfb1bb88d6b7d09bc906ed6b800a2fc2d100a485d705fe8cd611fa79415db6aa48051d66cdb612bc3c8b8e75de6e3c7f9a688095851c4a7fdf57a06eff4a1262a0efadd749a5ae4cb5ba2bbbec72d24fc2a94abcffdba53ed64c0f289ab308a11645064ef9dff5b1c6e3049c79af5cf58c8d7a2eeb27adeea1160b15b1c5145b4fc9b243772d3f8abe0ec7ba6322b86153fa690014d2197980c18eff7514de7238a96fde0afcf2e7beaa4ce2e9e959305379effeb5f5f48dfffa66d4ed15ddfdcfc541858c0c6d2a4b686695816c9f3d68d9d1460df3b76546eec2abc7c6ceda02dfce6e11dd2d7584d362c0d2666471a9d75d8a7258a50a03e1fc644a1a64e2a4c931eb94e21ec93de9f906532dd42b31c902df96a6e251b906f0a2b8d15a3be764d41aa68ca7788b0708382a76050445dcfbdbcda26b512e1ab0478444ba470a18b72b00ab2104f97d6e97e5189b8642b8dcb9c5ae3393d50d20541bca14358c96ac9979a757257cd974d7ccfb64d9a2cfe209044258d5502a9450b546385b4dbfded4a0eebeb7b2cce0d35ab633e3f769a68ff19ed393685cb77f5b2961d3e43dd9603bc6dff3d82cbd3c5f62efb2c0b9fe9e82099df1017e4dbd3f247e02d5d00c19364989899092d21e0009c935a8511d35ce69bb6fd7778df8e3afa5d1fb1150ce203db87e027145c1b9f249b4cc9d9091c7327d6f8129c88d78db1159e87e89c8972ccd9c24fa229ad9dd321762377d72ed48ff494fbf8c385fa52a9eab1da32b3014cad57058b39583b60ba3221f64b7a387890169cf9d7a67b1c787e4d2587b310661038da762726f646243b6eb5311e44e1ed70717917d6d7e60cfc606fa205b2348684250381822a114d35a12176b78f3cec4b4f2d687f77b4ee03c8827bb32718d983c3bdec9200d5119e1609999e7dbce3af31b6cc18876a55d7677c964eaabc49ec64c644aea99480a9e611b32bb18bed6b5550ddc08ae3d4a1a4f868f7e41f92886a11e5d7272181e81fd00c82fdbbcbf4b58edd1f718788b1b28f6a4bf89e7bef56a689ad1e06efc6dcbc90adc0c7952689ac74cb64e7ed1451d422a72ef260b422f7ab4eba94ffd698c4426fbc514e10ae35b75ea42b9a83a1aa2b41bf3c2cbac17a37e09f8b25d738f13132289499fa90796a3adf32d52a68a0afa7151d7e294f725e6f4f8bc563db47a0768599da5001eb6f7abd151beae063100a671b578b937c4ce2d75235fe8d3a8bb896a8b2de5b5dcda0d666cdc99e1f5760c4ca748253eb4550b5c361c2ced4e0c384eb490fd6304a9ae3ad75c3c5acd9a4a1750c444a38610b6176680667dea2f7111320d7f7f462632908a5fe77b214045d5f37882ce42efe9591583dec5d90394b5c748b55f79bfe8fffc80bf9dd2480e9faaab832555d6d8d0e6255964298181c2fb692c8a986ea54ca5ed35756cc8ee44f7194351fb6a0c1625e562433f4621f1be2188b4c45abe964f455d10be111f4a2bd9183326e792ed5d21265cbca98a3d7b4c0dfbf36711c370ab699ad81d7ca9f7a8270700450df15ba0bf9f58dfd2af0de34ba4797df5a80b4a61134ccad0428c966c0d9e4727f4b4b3660b339bb6cec6876a795991364d419a9db575b76c3327a1412cf26baa4b8c3b2b52ec29c2f82ed13ac76720a97ba0cefda3415de2a5cb3110808a36c070a446530a5a9262952ed73174b9ad389d65c5347ad042eec3090782be95e9e6bef7de263f47637428153e510695ed79657575fe46f28925c9fefbfd89b6c1b2b2a380b14d7337cca55ee1b60302ff43c1e30f2f67d01ec1446e84f16c1a520d2f86f3aada6a3c1987d206a46ac8e2561cae83151eea4ebb6f9d3d4c74c4cf17bbf699174d5864d15bc34f42a97c83d12bad2ec17a71040522a7845eb541d0d22eaf1cfa956de1a77c4497fb71e8fbca37b2e1a38958bf61e129e8a3bf34105d380f2d08f28217217b25cb8137e389017707544c3a1a135969232b1a07546d0f6c636ad730f3f7e04161422406172e83858672e7c35296dee6fbf3c11b261f6e2c78437dc88d22394ac2f7f5dd27266b3c3308ef27dc5fd175472cf94d380a5f03c2d7d56166f8b3f62686aa0c439cc85e1c19c938175037f6837bcd37e75b1c87f75277861cb3e174a38b7ff3b61066561e06f21162bfecbbc0600d699ac3a3569e04bfbfcd00a49120bef4290a85fcc907d67278c872d8964eb4e467941186210c0f9744d0a0ff232c2af290d5b1f041ce71ac4f33d3d987b7840bdb81fb8a050be2127a28a5b46ea25a3ce83036108a6dd6f6cc73993de6b20617a3412ca8d0b050fbac87f236a098c670aa26cb63eb643e2867bf9c94c392355c974756a2ebed79f8a4ae55eedebff70cdfd6174a55c0e5cfd47d77b7318417c91b51916ce3379de45d39a25c44e4b13a625ac0c2d19093d9d06103cd3108dc342668b0b452a44c1255aef49403dfb8002dad8e38d6505b9b4033d5eb4b42b36f74fdb377cbea6b6600a6884206ce1c66b3be19c798c9c548596058c2f66e6a0cd18b1674187edff95cef5c36b3482c574c9a9b6d8a98b340b7326edf5cf1d8ec31754d78ca59da20d3524f699e3d94c310784894ae6d2a5199e7b55a6c5a956767cca75d0f5a3b0bc823db99cb3732424a41b12698dde28d77ef2762c49f5dbb4780c0f26c6a4ba17d98bee8898829f8f570ea84660cc4cb8363390ce691dfd11106aad8dc39533f0bd1e4529193efa5106cee6aedd83a72c5b9be619de884a45d817609badda22c2fa51aa2cff6a1f594ff30eb4250d876671c167e64f0861e1df3b1c028110614e58ce9a0455e59d16f0b9c5dfc709ebedc8c954222b83fd14fc31afb74a4ba9ad50a6bea988e1034385f8380ddee3e6d0e142b1a03917a18fb4209424f00d664059202ad9ce0b532d178319127674f9d15c7ef1ab1208966520ae3f85aa80429b786aa16c363978d9567d8c6bd3c0001cedc9b5774152f14df3ab8de55645f2946dd08c234f6e934aae10a7ff0f90423ec6338b002460d7efa7ed784beec47455a1e935d04d33de3e18997b31281c61f98a7987bcab77c213ad023f1bc90726cf48fc31eb312eba3e488f12fe3830200124c4d4ee2273e8b4a9d4dbe060791af84aef2389a30c2128594020858ca750104ce795deb31777f952be4b55dee7f881dbd675a2113a0f90e8c58ede466dc86d5ac6e693d7a57dfc608e10499ddbd32eb3adc6d92caac8a19312ce543aad054411cf20409766727a6ab0f10744764c7cf93fc418433ced775e86869616811b39763802b484b144412d97a58c1338d1e725edcbb1b906b2c1e5381aa374cbed30c426bbd8f6215b53fe9c30a522c1a6163cd816ded36e7723a9511f759e20932147f90a14f8a38a5c668fc8723bd757d201086a9fa633a2889edc0d3621c031f013ca06075b294e9ace1285c2674f8b374bb812f6ff09ec025378489f5a59bab736f34411727b33ea1e9ac680b44cf105cf415fc749c71dbaa573de97c507fdefebac847c2907f8cdd9c5cfe6bc3cb26d163181bc246557967db05c3442f7c8b415e81d634170bf58bd7ada9458c85774b1b877779e4aafb4330b84e16813d58cbd766fd20b4d3f706844f317f53a9067ad7a866eb67b0943ba29af9e71c4027cb702b15111f4b24c5455f07b2b45c99afb61e0573d7d5e506bfba8c6a7691535c65fd011dad96169af8bc97898b252ffb6d15a5a0bbc939363859623e1a6481c97d0c37c54989d735fd031a30f233ed45e05facbdc5985bd7f9e6a87fc34321c1910344ed2bca1a76aa68928975d5e42b3e08d42232e96ddd8d65e28475530ce7b7e064cfd38cc8c633777e0d0cf5f99a90114c2889981f9d911e219ffd87e26aec29b2b9cf698bb9eadc511932f82e323f09055d2203100af3cc0054e4bea51cff3f45e21755619034aeb9550d5e12af74a67a3c7b4bb7fd88cdccb3f0ae22d76b1cf801a0520f73941e478810d2ca03c5e886592bec97190c36e521efa0c475a02201f40c70c5ce8f3c6b5fb623c72bcb1510af445de7a5cba8f6f57580fb208f14eb4b08f77b0b9188dc4e768e01c788fa9b28ce1a9ce7bc714074e93ab761148672880ec1b019536b92477568a2dc0d684fc23380f08fc281c8d9aa42d1f522157e33645542ce33cf8e5d8a58ebc8f697e282055ee545631938c0071de621497b767e2455be76b22734dc4e0454a00bcb148bce14585c18dfb0f7cc1ed1093fccf9b46ea5cb71960b3876480ebf83b772893accf30a54ae7d453fd75667efc32097bd60c9bbaf4921fa21d0721f756f83f0604bf97e7b92abedada413dba80da464ea621fcce8d4bfdcce905a3a62e7f634aa448c0c3bc44ccad9b64bbb6be7879afce24e3bfee81b14c74a4c2c31bdd72affa66d4bf3dbc2fcd6733616e357cebd51829b417d7c44a7b5b36486c4568f7063dd330b8c42442ab4081991b03ac9f9d756e2a03c1f46ddf810b44f1753537faacef2aaa28c357d6279c68c28dd82dd8eddb931968deee3ad3062480f8498be86b64d4ca7449ce2f331009bdbe12e6f727b7ca4e1f2f1b774b5baa78f21d97b09ead01a69e8e97c90df690767e6922a3935bdb298aeb8783aad53fc5b27180ff4586849468c2ab4e831068371d99484ea325f32a556a4f0132ad5abd664ae79e8bfa23eb2c7699262819f612adf9571f406ea0244d25986cc54c13572a70900c9e20a6270f4d093621ca7892ac2dc77db2af04ba57f6accac79f04754b26b036cb048ca9e88be35cf7327928b93b38805c4cff017d5cccc611659db7e7a1b40ccc88deb1896da8e6bf3e595d753a0ce5126e9cf2360e6353eaaaba0fc59bbe1e4c7ce9511c24534af400e224d3c094058c5b08c193d9690e146a839fa34039c228dd9fc2769cf81f543e7abcf6b66db86f6675e49c2f48cc0b89040c09200d053657596d99a0bc63f51642be668f5c09c1074f87b846dca940c7841c4dbe14ac81587dadb29a992ffc48c50919aacf2fe938b1aa05b3882a3b5684db2746f19eb21817d67ddb3bc400f1c28d47fcc4e427941cfee2cf62e0bd03b15d8e18683090bf248d69449462f6504b42918623b82f9f4bbdffb57b424ae5520fb8b3e8e4f9037d2e8437f7bb4579c6545c040e1213c2fa27dd71685f536851a0cd5c7118c0f50f7e67525405190f125f9b40c55f24f6c5a7cde4d9f888c143661cd82a74a8b1fbe47bc247ccac9ef444d2d75b1aa4a332d5850794282f1a257d0dfb7c348c473b091809d01bc94d15ebda3712c74d2c44ee73de8dddbe937007d698671385636b79d5878a8dec98db2b655ef90fea8d111f6078e5e71424bc130f706fd01b6ad564c9e683ffab4f9bd142bcdc050048c5c1cb9a89ba7abe8a6f3d18c2e74c50cbaf792b914f22d7f0cd58d1f253765ec3379bf3ab6b8700a8450a9516b08ba92203b53f7d6b8c33d821180b2181275270a70a305f45b53384c9b76a5855c95e97abd55806fd762ef886554c2af8016cee4bd1597b81faa38c29f8a1ca7acd58107a00bc444fe0b092a31f769a8fed2bbfb534a95e1e7149e7a0a9672b31c61e9b384ffac2cfa59030239cfb6a386cf9208edfc46962c8dd93c4b71c1a4dcb4bc616b2534439560d76bea08cb8b6d7c340056dacab5494e7ee6a7af06cd158e019fae62decad97cd2a80c80f3d50b88036561942d2f16f095aafd7c0b4bc0856ed0b1c895e0e73e8cbd498aae127eb30bee10b54f6c2a01fdeac6ec96fb9ecaf853eec5b534f398f0966afa28ad7f5291eb59d0e73a907965cfa02b52483779233786bcae91e4371cff7af261f45145f11fbe266af7d919a4c4311092f20b419aadb642599816882dd3a31197ee910bd84bdd7a64bde640a145c918d9230cb50eb7b2bb90cdd1c7acdc0e53ec73d339856bed7df5e34bb5b7129af8ee28c6c2bb138dd546506ed8eeb383ead2a0210d0af263620ccc41a0bbff90da22ddc435da22c40180a60071e12d66ddae07d826d7c9ef1a1781b6c9a85e031d25f3c5f2ee9e0b18482f3487677d0b75ff6d584927bae8c2e16d40b353220da2abe62305f4d62943c7ae121251ba9fbd513612465fe6cd6e5dd948fc56cf179c52d4b3c5a215f179938b7cfc41d351a9100fdb7eb10c65d030bb59f61286bfedcd1d72a7399dffd8559ff8f5b0e3d859177344a3cc2b48ce11ba0a2ad38ee34d40a90f739a3c6e13fd98b81baa4ae2f5113262b2f876c40d25d5264ee3f0a400b59d678a529b137fe4cd102d2abcd68ff92a8353243768a0b70ee47c8c158e8aa42bac7c5b55f5fd982629d7ef1cd415f4e152d2a9f79a7a6b5f1bedacbd99499d2ca8565d301cbb276d5d204873f2c6be4d886dd08e3361aa928ee80deea475df0fd987626365845da9e54b4735a2b93751747b361b5f8f3e3dd599fb9c54e2d648273ad6fe8a6ed6d82d44a67e2674b55028aabf39a1a45e9e4c07761d9f49ed23da3611960ebeac5d59326d4bad78cbf8c2d9c3b3a9fc3ed041bbc9f14b630678668f5618ce9df60bfc4c9dc8bd34bcf9c8e90ac8f711c029eee42b7b6d62157fad92eec5361358a12bf0504a018025a28a44285416eb260bde0c9717482b58a46244a05fc4011d915400f25d4921ec426f08f73e9614a7439e7d4f48bb4d35253703a3c72442dc43ad4ade27fa9b7497bcf67e09349a2ff1609de127954eb63c724b185e8f415541a6d26b7fc02436a541d9dd71ac1e9c57cb62e21ecb920e37894732a0be037466d9b736ed85bc239f046fdef396e67eadca558f8e3c66771bf7caf3ae0faae8877c4d4540227e450d286f4d01b3aa4c21c22c06184bc4dd86730e47a3653128cca5fa1542aff586a3433d2da650dd80494d422dfdc5168ee01751c0e193f84291b80b8da63df59252fa7cf652561c984cd2004288362d472ec4e0e25807ac34abb5b537f06377d970551432ab0907bc9e47a0d860170034b96aea5fa90ea84afbebef4cb32cccde0bc33448903f9d81d901fc25ab549f2c4b613b2fc36eae75eadcce511a0f49020547a873fb41dc3465a3079e2a167f42ac75815dad57d7df67f2794552c201895693e22fa4f0414369a726f703992ebcb1edca09ca943427c6db9567d62ffc9d2d393599c92d36184f391ed5ce8bd9cd5a541ef14c87fdccd79d192f5b51f1c23ada48e245c98b19744a77703493ecf0a43301266d114513663a9566c10cd5efc26c9e6107513ea30d7228c7ed83691cec48f287afef44904f394d52c06846f15d5be0c8021c6e9c11f5b4cac4d05cf12f2cbd94a9f0956f312ad9fc19ac8217509c0d94e7fdc3906707b7fe50af07618801ed7ea880201b5614a39b2bfa405676e781ef49da4df3ff01a596f75d67d75028388d5d3bb6a49c0a7c3b11b961de830fe05efb2a25c1a43d19ad583a2497aefd5d7eb6c6d68588009d35de784cd4ea56a863ffae03f269bf21e031128c5edb579ee44d4ae58356cf1ae45be3b30f515ef3a72ce0933a9665dc0702ec714829bb46c5bc4cfbfd9af371f536fa1f75cc76fe3d22c8dd67c0062762b8661de28e77a883a4bdf6f4e374396a49284e56ca9c233b58a35ab427144adcfa3133c9bd8e29bce39954b1e4279fce8d9d2380d0a56b5ad617a2a452ca6acd3c6afba100dcae9db6a84edc2fef45095105b255ec5c06c39a1b79887a060764db203b8c0b2b3ed984e2fcbc510369105c002dec5a546f757ee1948cabcd29dc6bb2aa3b9fdd8d78454cbfb467707140b073402134463b95cbac99fa03d0b60f27a0aa8357d94b817a8f5eab57ca029c153bdbc7cb21f5b71c5810e8f4e4c206d2ffb29c7d10c29bb64c05252353c3eb4bd567990731b00a3b3df3f9ee812ac6988f9f47826699d81d64ee9d8234b2c0f9d5456eabb365a16b5d1d70c696da785eee31010c4f2dad9d2a9d317fde2415affc89d5ebb1a4758f41ad7ca38fe03e4fa87bab26f81469b3871da4e8b5c3ddf73e8aface580607236895191b729e5f4f3733d6910b33d19b76c254f64210b56de5a28b692969a6dc8e7ee7a2cf9d160aa89099f5b0f57af2aa0e9a38d288b89ca96ac30eed7c0600240b08445de7f234145f6218b2588b1f32de89e5d3fc1b26ab21defc8e0654d9124a526041a8777187ba5c0ac05ec2a8acb9c01fb56cd4294fbd8ab25262dcf859e742a52a2416626c36c66d723af495810c43989a6fd35745ae2caccafdd4b37d6a7608e9cd2cc136ca0a4a74a14fb0ea9cf2cbad2e49c5d4af664ba55a7c6315a813c59dad54f3b8192cfccd3b139e176cb76ff3794749e6d7f574d8590d60ee13009bacf05c21a6e207e42d63cd4ccc6ca59b7a75271bc18a08ce26e6281e22643ba4a3fb187a4d8d11cb5343897b7b138cc673753a30cb774f7a63149fad1af2b1c4259e9c1550aa39447a94ffe9ea922fce8c01dd294b8a60d4923b41167f70fe178e12422174dda054faf7de953290542b8282067a1b8942a1b5eaef7d0f1aff1482b261f5b1e398a60ed5bb257625117c2d949bb825921dad59066ba0ff35c80749d4fb26c08a1a30e0b75ab1b9b831001d5538f19f950353fdee6399db894d5e5062e2fa3a71c70f338614ee1240953511f2c8419839c2aa8c5bec384d0257e60fe38c975b4e08ea35ae36e5da07d3b4b0d72f03e6606b65b8552505f3bdc793c07900aeafbdd5e5c972d283d2fbc6e048604cd38c47df57c8fe65de7461ec5c241f8aead3f186804c0f674249a85460bf3ac473cc7e93e6dba7035ebcc688ba754743b98566332a269a181b09a427d9f976348257e0e5ca38d37eab23c56dfeda99f206dc41e38dc0ddaf4ac6f9f03688cd75208c9f3b32e12c159bc1f877354ac0bb682a42862cd79da634e6e6d4f50c2c5ab8710570fa9030cbd872387b75ade95120b56ce489fa37d3d2a17fa467c81b996d6876770b831b87c952780e877d4b3c3188f1ba997d0585770c7e105c7ec8bb512e644f58259202ec39c7332770f7d1eb07f09230fdb02718950eccb744ba0c380d33cba141c42322fa2960cf581169573be92909677af944b676c395a93c26aeed2a7250c7a338449e7ca03fc1166f5e005f4701b6bd9bac4323463de1ad382d936b33acb19f7ef767f297f83daf2305b0f62c5364d7450f0070a92f694dc797d84d8046817e854751b46505a7ed8ab345255ea58b628addc2279494e8b51146323b3186e8b0600956e09193ccc1a7b66336020233c337fa42f7f6cf1e5b44553ea1697d4912ce57beca2c457e7a13196859954841fbc6885a4a4926ecc4bb55f1c3bd48ee52cf0eca5955a3b26bcd52e69de8e083cef3648621b3f4d0fe53e134d03c3d2fa66180907ff7e418fdc021bd8f907164a30d9f1686d2ab1fa43a79ce4ccd506b00b8dc5cd4fcf831f83207a011274c6a51f5e3b5cca738bdc4eff2c974ba3df24b4217aaad09d82834e60de490b9f0a7dda4728bc6921976c39397848e62e0b03ea5f7ce22e10973eb2da54014b86305cf261c356c63370b5afed40b86470555d78d715ae71e2697bf4baea0a6fd6d307e13f941f6a3d0368aee744777c75c08f7d0eb4fc7947ee2e9adfc13b743fc40c0ad3bf9418f4c004146b1d5287deac01fcef5495fdfaa712251e9c9ff1e081f360a13a3217f0c871ebf0f56d9bf662975da852aefa4169eee53cc14a31bd4d82d32730f8be78478bb9107db05d4ac4b68fe8d7d45b8eaa06495b3f0b01391b8731990dd84c1f662606577d79d2f8b2b727e65a8f08876f98826182b6ebe04b899bee76a9e15c0bb3532b41e2b660ad8f8e2c76c816ace8254b663a4ec15c7ae9ef22629fdb48d5de6bf9291d9d5e26b49d288bf85d0fd6b0234e503afb90879250686701ea3f534a4ed4fc67bc97f1a13812a4d4f5ad7fe377c75d2275dac661ff63f52f82eefd1ce6c8119ee35ada2c71dfd260e317676dd42eff7ac09219f7826ad96c670889fa8ad80b68659967d3d37a37daf438c6196817d2f56a5bd96e4a82c49ed78d91a4f2d9b28a8833b8986a9f1736a2e0a6316b6af1c2eff68e1361c1e8840b1ad2c6ab24945f826f1f9fb6b5d0fd0a9ba916ffe39bc94a2a8e1398628217ea1f315757311650e8efceacd9b78aa1dcc6407fb159496e8fcaa7ef8722f6e17bcd4c39f9aebc9e238ebee25b55aa4dcaabdbd7e197bb37c145fdc7e8fb66374c39f10a8aa4da67d8736d7d0969251a1a010d85c51057a429b0ea234390bd40139a3b46495bac3b81eab2baf1f2769e4423f6b3956616176645aa1f2809bbde7cf2aee99856104c3eb72f1e2d7a392fd863011457241c5d8a86e833774ee0bf042ce8558253360df9d230e61c6b598bc9f147c7441af141f00920eeda59982d2b429173f22082b1ae32a0c19661bcbc7a631139181c749f363bca7cc786ca864bfd3af6e5a8bc1788ae3058c1e7c4e2cedc86bbf5c830bd103219287940f591eef5736b47e8c98e16a39ba3b5f5c426e26855abe6547571ddfc225e28223494d905e8be4316df654be4c4c2bf4b70c262f030721fbc08db4c80c34932e1a1e9f68d617bef6c79d8b25e97cb09f1d53c1248b028f746db1f44f79cbd61b6b7296adda27b7dc042de1136b1b5326b8e8841b3fe00e9dc0947f7f8844a5acf7b2504932d410b43999c1d1031bf57b4a6dac1d703e073c415a7a8aa8157c972bc1e77aa74e338a44a939abbe266600e97c1ca76d53c3249aab13f0cee67556b0896f5f60cab857762cba0106f3cdb19d9d41200d24195498579dba918201f06f50fa315dd2be67d0ef3279928e406be9edb5326b915bd88a9bca9c4531161a84588e1518f73cf77a0e3af34b4efe483d444b6afde9117e0cf7af798a98f9342f0a001f8c745a82a2d033d6b83ad87fd6f5c8c90b358132f27c30d8689aca9c1ad544b59b86125617b4fbbbf1ee2d99847e33728a7b982b33b771baea38943326ab78d167cc034d1697085e90e4295b93e257dc4c36b3f449b05c87f9bcface2e92d71230b0f45cb29a0639a392c8eb77db11b7fb9fb4a410b58a26717e966d7bee60e5c9ef3b15486b32dc8b289edab0fd85ef16448f9cb8d31c2e17c71d4cb0cb38f947194e3ef29d751c3adbd17a010c97b5c210e55a8d83ed644d04a4d421c4fe8a6f971cbbef5594c9262952e61467bc26ca92719c9fcf5484ac7d47837e88020008ba0ff830e89f54046330f00a90bf947ee64ce5318910f334a5f5e7624b23a396022a3b7fc0ec08b31a81d837d4e5ba588c78b08da57f568cc3ff490969bbe5b9a21c0d5c987a48b51131c941a392a84f4e1841469bbd72dbd4dd7220c7fab33ea6bdd8b7171fa70e25ef09c2c3b54fadf902115bcd71dd115d091ef31b52668b03c12720c2245502a24cef3ee05ec8b260f724c32d005383064bbc7328e119c386721fa91a10f1505a85e51a77a85f073852","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
