<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"143c75ece31fffbff5b2f505a4eb89a4df2dcf2f110f172f9a1a05adf428212f1a81e834cd873433f011379bf8a4907fed080ac4bc9d5c6facc587c713efcb8a43a3d61eebbbee70f755bebe0d9fd0ef4c210d6b18af00f0e0561519719c60a2845598f4e833e4762de141eb461afffd8694c516cb6c6145d2bfdd109cbe20622dd7ce053b1820ed92977d579967d23a2e5be27155fd4f5f70908611716463aee0bc94ad266edae1d2f5b9e91af6fb74bd37c680bc7221866a9a36e189bab7ea37c4bda7fef897ebb7940edbce5421409283fbf99821df858c4c4e5cebaa8bee77716e5d76d813a0b6dcb8d68a7a6547a12688300dd5fba4dd4f4fa3d3e1237a101ac3b20f2a4fd4e274b19b36c2b9b87c668d0d8e48584522e4b441cd9a63c339c822f975862b6dad5ab076aea3efe0c7e8641525c5df8346031484763a94ea636d09a3ad2e1c8108ba49287dd8a305fc2582b131d41caeb8ab08b4b900d2306af5f04d2fb93ab5c3da418ab3006598dae52960d1cd17313e40e4c10a08740947a6dd39125ab9e787393fcc9be52b7f55f487f42f27c6f513fe192df52958a81404280941aef2d4a8db0249dee46469f9b471875c58021029361592c1964697089d7ead893c22a875039b208605442141453e68ae406820573e0f2d622b1ae330257951789de9a29ba054f33bbc2205b39b48840d464147f6241bd59c44cc8a64221911e6d558c18bf4006dab0773a46a5124396376d57f6dedec1f0c5abdf56c0f5992486a88217f32ebaa57b5b38f68c6328cebf3b7d600359d9a7037f96e4ac34238635eedc3356cc98c8165b009f8cf82e8f54341c0929c6d877c0e920f1811693a511a0391514f9f238a108fb46a0421063e252a518cdf33af2c1ab125be4b89f4beea4b8d45484a88a3a76ddc73679842c181f3ab9f9983ca0efb117390aed43f769003b4ebbaec11da0b11ee1cc800c374bb3a282159af9f3f5743eea787070c44014eec80893603c4b822bb440898b94119b6c5d56392a4905e0fe69e83f1e6b3dd07aae456e08fccf3f66e51bf0b6ff0fcf114d72d2723f4e5a3b97e4a2cbd698bb27d927096b31ac598da8705d473b28b871b94eb6e481ffcbfb136beaf79c709c97a254edd49339b4837f3329da3d70f0f905ac0971e25cdfdc417fbaecc6a902339cabe82e19d346d8456b1b726b439964afeab2480ec16e8d0c48fb041017592faa6ed2f32e84f276b00fc65419d87b76cee643bddadb437782f2d6de48571f1c4e2058169e5f48895ec6dcefdfd4bca5d798fa89148448e701ed64792f4cd9949c2ab0b99a3d39f9238e199cbffd6e25486252a6a24efc2db7b9942dbad81b88d0c836ac26f051a2609636e1bc7f17770c3f4782d710f98ed3505d75abfb2d8fb01b295ed5532f5f152c4a181a0d98e16bee011c96edf94e78522fe1c648c7eae6605607434c14d96db0a9e39994bb9feb128c3ea97be870284273dd66318e86bee4e27acdabbe6c70ec772a09c5e42b4bb66117f2cce6bb57d8a9f9e815f5adda72efb540649d4173d8689516e2e75901835d6c1ce5d6c6b9dc235dfa831c93e0b6d7592c22a2b5facf6d9426e6f8941d2784a24180bbdae69d025cd73071514f4d7c3207befcd9f04a406e316f17b5aee0af7fb50a8310fc000eeeab324c36b09943e7b65889283c8c1c142571f5bac0d7ce4441dfd78df374310e763db4129c73da23340cb4d3547ca1351d6106b1ae4b8c805d877d618ede6fe0479625be6691f16c80b5f5c6cc801795b9b9eab7648affe6d84427ee5b709f635691ea66ec88c066ab7d5ed3d4ddb1b2a4147bdca3aa802a1c496d4d4c71deec11740d9ba4b08001cad75e93b622b94176c2bd66b657a77614d02e5cf17c321d912fdc1dcb96743f30c2199fc22fff8df37abe219e9865c9c56eafb13f473bd1994cf5f65fc2f9835493f71cd407155abcf855cdf03cb15ab59b745ee44bef0fa8d2dff17521fd6a04d0c3962c15e3a718f2874dd376bdb414ba816211319b340ad430cab2ed92dca62fcabfd4f39298b470c5c87648216b176026a5dcbec4b751456c48322b79b59ceb19aa1ffdfdd1645976ea0fc42aa88df01cac71d9c9ef9728903d2e838cd746ef1735e2b268d7fa24a2794cb76b9c857f3983098bf19c75e725dd06cee7785c7cfe074af7e93171688448e860076907ed33bc1405408b8e460eed86c45afec4930e597f152fbe1b66ed046bbfa46397f8cdc0d7a70298cc41fb31905f55a569f501a63738a6e50b98f7f81f6ed55fd4b1a02df0fc20028d1a28a994739b6951d4cbf14650ae7a4bd233e7658546935bd5fa449e2a16d35b9ef5dfa99be99c6741d392a53234fd9bf106578e18cd7a27e229b4882ee7f93db0da6c6eb6ce6c713bc1e2057057e172e1f827f0aa790f7b6e602e40af70d31adbaa49692064fcdd0654d8f292d01e0730fae8f658b378c092d7641dfd9feeb4fdc32ec23844a9e26d68c5a6910b7566f94689bc5aed0678f5dacc7d8a4ae0c6eb8e65896c25f33fdb710db1448d1fcb19da76f733dd5e10c2f4344c184ca1a9fd9799004a96af872a77f3abb8a8c0f4d9a6eac755d99a1fe0941d05f89ecfa25f60c2c8840bb909d8ff8b8a334fdc921c837c7dae012e1152db7a5e753f075d692ef8323e52a64fd11da0325c9d7c5c3402f3bd08930dd2bc0c782767dec6539cc931b201fe64bd40f20841296c4cce5e34fa0c73a308ca5cb21ed643c97868d9856b0ae5179856d262d4ea7f3876d45b43ba77f765dfa093454ca2a4fbd02e1c5e69bf60ccbe720e809f9f1cbe6652a8ef4281f7f0926609dff7c2c37e1fffb4acd77584ecb75c5f108f419ced3954dc9f080a2a50151c01a90eac3a121b3caae1f5d331117ee5398c9b72581c85966ff5427c3266c42a8d16221156e0bf187432b2c56ef7f9a238c6901d94d34b3c8818350d2b5dbcbaeb7d8712d7a210a04e59a08dc239d62b477ca58356c7ab2f6041eccc80801cc77d64fb9e6e4e5bc24425a69cf411993671982d54f32b301c4c088f1d9c0b96390a9e396f91916fbfa982ecb485cf0663b361a33de1a9db491f90552fa21bfe9d53b5d823b63c6adb4d102e785fd16d8756755e27ab1f5f9b89763fe27d72cf6dfef844c4c6deb288bd1bfcbd439520e465221d23b80251e934b7c0d719f41bd9b59d226939f2f23bf9b24f3013463c5425b2f65399ad25ff0d2844efadc017f4cb433b27a4a7d14f5f533ccdb7ff1e8893b1059317bea64d45b296b9f960c697d4e9f2b5e47912b5ed18db5d0f28ca41cb31c64bffd7aa40269c47ebba1a5eefb9815a5699b5344f42d77dd2672a871e6339600c51b43a7b44abd454b4191018578fcb2a175e11d39e12357553626343e7f372c6657776eebc63d819d331889945d94fdd61b99c81ff15fc1432149fd30081f43d4916e0b322de61f77649fcdce378e4ef9a0ac170fb776bc54c81c038032635ab7152eaac242e6484a6589477e1b196920d7f2a89f422e6c2d1f1a0308c533e09579e89fc31c7ae34d4e0b73446a385df25a3d7a9939aa6fc8ed032f15fe92b2f072908d3e5fdae2e7af442abdce143f407f64e1176483713317a6aec35a76582e57dd807f424eac6e37d2cb39357933a96fda804d25ebf7064542b580442a8570b05c5c1fba069ca4cbefe04449fa39ce15ed63bc28033f6bdae678b9c7d1fcd1dc2c8caf99fd76b946a7e5241252cf27f0a3f221448651ee31f4dba92f675c27ed126a0761aa3f502722d64b513380da713dc8c962e3a40dcf577c18316f9431e70051b08276e5949a3ad33792b0207d74c8948ca603e3e5df6f27a508bbf7ae1371a267b1f3a42e81b65436120c08920d382652f04d4e26426a27308ad7b22fabbbb404745f488788a97f449e21eed88c388fa7fbbd08b3c3ad607f945fdec85de95d075d09712e43306ff95ae8430d4ea3617aa9d231d5b0ac0281335dcb4a9d719bae8e84563179ddda1f8cdcef71455c2e18527098fcc4b91adc8b0761dab8ee717690b329557309ebc863fabb08d40d58a93828a09a4a91c437f0af1d1a274e6515cfe85713553ba1fb19ae79ad9d58731fd3d8e6ac41924c3e9d359659b6022a31166e22172befd403aabca7bbecaa126d4e5c08470f2daf8e97594d864fd07307e78f5dfe847a8b604808d8dbe62d84f54b522a658cfefe649a5f0c229bd5c53259dd48edad49a02657a62774a4e9a4abfc3d56423eca6de079aa305378278a83f0381cdbe9ae967e829802d7708d9e8847552f032ddc37cb2acdbb521e54f878d402136f7dca443ca5edc2d41e4f5fb3d9f26544855720cd4cfcd96c255ff339fa40bf8f1deaa554fa4277ecf03c9f2a6e010e70b74f1edc8cd15dfdb740daeeb4fd945339f69c5f78ef2bf3752a681067e37ee53a8fdfc04b6e4c3e5cda0708d2f254398ede708c6315453aa31a0610c55a7bc3fe9e68af3e3b05da1b5ad1892d9c095b90495c18b124a31e1e6e0b049bf59419b1332f20e28ac3276b6e3dc15438cb524b9aa56693e3712e5337c4134f7106a5f071b2d30fe53b71910d01fa1e3f69f43847961af883707e0048ff923bf55ad15b6a7d531480cbcc5b87efe8ec60b612b471b797d5738abe7a5d6630387b7c81b3bc933eba70ed2b438c4187fd76709eaa54016cbe3802df7a91e0d0cff7b4af5f244fcfbcb865482778a8be2c4328c2036067d882471a4627523bc927db73e7034e34cfeafe1a943c7c49d82d9854400c50589a1147504c3cf5de99c4d64effb03526670b61c151fce6a830dd266e1705cf6e92c92fe5d89b9bbf0435905c89bbf1f0623938a786ef4c0369d568caaa15760b2ee02e63d00038ed15e041d8bebb46b47dbbda019102f7571fdd297fe81000d6f731f186b9b495d8fc64d2539c5858c0a50c7c423bc929e67e42d2c7c0099b04dd1933b446e7d7b8668dd9a5dd4f807f429899c64b472846272d822525567dae3733d9e4b70c56e8b6e9a1d8584f6a5eebbce6236f2847fa9bce10afb09fa301553b593def4aefcfc97541754b8bb1c582a4a807fc3926e7e031ac6d6bb1dabe06d5ec9f597f964c89499ffa3d5aed4cbe8980ad2781f22f758c4ad970c742097d2b101640043f7ea46bca3a1fa634a8e189b97423443310414a774ee40a325cb18ce33e3b3b72e91b7cca83d08f97ff890161f083562acda160c3a96ad176bb0e2a393e352b2311de09da63b14e730853aa4a24ed13398bf0c7dee6c474ca19871b406f30a2d5854000c8fdf19950953f386e448d3353f155c770a2c7adddb3e0d393b71356d0d25cace3095df42c2970ed60832d282690851a4719d134ab0855ef7317be60beccb26cb81e0f4d528ab46dd7b6cf6da28378e08434d047f9c9cf762cff158229ce53058cbcea01837460d207575cb31d35bd673189c9633389af209d486ce07b44802132812469f5b8c22f67c443a0d910dac4ea5e8c3f4ff6dd2f0bb2f453a7ed614d366474933dd352201a2a5a4ea84cce00f0672fb2d47a2b420bb8329145c2f5be10903844bd22bd220e49b7ca629b4b57f82833390c00a4d17e761b5ac5c11a569f52a3953fea48ccfc9c2a937cfe57bb09c7f0c4df8fb7ed0a06a09e2fdd2ea5caedab57217c9f61b3d4c1d9f18be7797785b0e5e3568f443ec8708037a9f2e1d41706051cfcb9e2a9739c61da1d7adf5ea23a4855bf4aa0240ef995e6d95e96894eff7795dc0a1b16325851a1e9657a2610c322184ed1b890015fe76b0499492236b1e7a417409cf1f773528e461121c5b630856877bf0752bd34fb0248b80d24dcd49e5a5ef0d45e9b424c43ca785456079c226c8cf0824da6847f75d592e12750c4ddffbab42026fd46ce387651942be7ce29bb6fcd9821c1978a47066ecc1da4ae2dc815d7bc71a591297cdd52abaf76c9ffe8bea3f6e4e1ef9c39108a97e04255b4adb42efc0fa6167ec9ef0866eed6b96d1fd975d19de7da34153310438e4bdf1b665e9dd4917de655401927a307adc39969a4ad822de71fcacc0edb96a278fc84b0679f0f3b7e29ffda635ec027bab277f32cb460d2d7d72561b29f6dc833120ad1bf9e08374962bb5412b958a3fc740edb6abc47f6f612ea7aa6a37317a6e73d918ed0d4012c5fea74bac0f3dc448d2beffe036de2ac1fe73a9988c621909cbaff60db068af76c3e5644758ac66e524a70e90c013cdaacda11c2bbef4ea575b872a3481efb8138a00115f456936d78c83e3d87f045dd1afa571fd9124f5adebe13e2efda0bab066e7037f7cc3e6ee000f99366be3eae52cdfcb1bae7f1aed09d2ac10f3d22742eb14eff4f988de21c86624c1bc1d2730bf54bbbbcddf43c739fda2bb367c89d18af831bb45267eaea1c4648bae27d72b513f4d47d5ce44a4a11107759d4df1557570cdeeb84b08cae116f0fde2ad5a7df852859a348a873610932916cce5a7a553d1ccc6e8194f5232e18cdeef3df2c05305c6e292010242b417c841de1418cfa61f66510615659101b804967a7b1b70920d16dc53c67a1695fbbf85130d384c9b6f3f2b1525764b40143f37967685ee4957c2eb53cd3298a798e3a34b02cf20319f0ffa7db871afed31efd053f43bd2e420f35be9f8a9b05dc682dad2fc2fa1397cd85b88daad0c83b1ac325c326a9a11907e41cc2c200097c083678ba3cf8a1480a97cce1e1e7893aeb5bb6232b6272c6c7d12803ddc378e74008a6a6574c70d7def5184ef8aa57d0ddf8c82c918c18e68c6e0cd2fec158cec92601909f53c1f81e152c1f4b434e1e19a415993763b5681b686784b81d7dbec609a51451fa7ffcc8814438e82f4d1115ef975dd8d6edc69b0addcc22a4a3ba3483f16dfa6b219ac69ffeb10ace9c9514320c251ea46a0792b81c5413626603f0122f087dca9c4405add265bbdded7ee75145dcce03ac2b167fda2b018e8cedfed100c046b4372107a655c36d6d95e5f5c77143dcd8433bdee32cb3c849495fb6c002de42ffa68dc4ce65015d63958ea16443ad1a4a0b8c608ff1cd32adab6cbf66305bebf9765955561c2b0922aed4fd69d2eff8c5cc46097ee473e200c616a1c0a120182efa5c29561774bdf0fd0e49777a4acfc191e06b002bfa883c76dc44608ae5b82f11cd653e282629fe889146488bd8fc86b1b4737dbd26ae5cfa00b1ccb52abf2c5b7ad47a16cb5d05607665d7b0dfd3bc8cf696263d632ab257b55958d9dc00bb646c24c0fd4c715f3cb784fa0fcc892b30f4527cd15de5b96f11d5e1faef1b0ee97bd69bce99f61686488ffa4d3c438eafdfa2814c60e0e4f625ee4a44cd1e7c2ab5300e56c7b66b01f26585174a3bdc004415002a3e961727f56899acf2c871aa4a4988a5b5c07af03e43eee4744f0e9f702d03892704bb139c6c0ccf16e9cb8242d90aeac730a71bc7c6bdb33cb575cd07fd9d70f98708fefc15f5c9fdb1682fc8400867740c81ede3d2fbd3cd788191a38a7f5dd1a770189578d5bed195db69f131a2b02c597d27189c8f682d013667ba472ab722132fd6b5f27ce5a5bc05c3e0082a20b059c9fd93ffd50c7674492ce0229d3dc1c7c2ca61961cfa704cc50dbbf249eb6eecf20a99dba9c445fc68c265df2ccd3202d94a76afcf24a63437e85210877d41f54d231eb33041cbec00db1d2b2e76824869eab350a924a8e26a98274cb4f5356d4ec7adec06e4d19a0df9fa7552241a3f36edd1d7fbf1ec8e5ac9933ba05db2c2721c908e57ffb65b2cfe9029efd7f6636ba0f83b63aebb8add0c938210a51a260ae7925bbc91003289c1543188d4e196792d1a31fd77f27f3fecca31244d0b57fcb42265fd225dc4e8d8fcf374379dfed8a6b6eba35e7476ad8b49afbe3e1acb21e9afa99899c9d35aba3f21ca0e3649fc21365bbb13bbc1cb873babd1791aad6628f7488fc9784da4331fda731e33b92dae9613706b0705fadd82e24134d5dc0f64238adaa1450a7f704cdec22f46cad3dbb9588cf5e80ad6e7d38abc5f5a1a7ff7a08e67c766560f8f2f528eaf519894e2950d79af9834312e162297b301ceba76f7bdbd33823b5c60839c231fe5514ba39e259b021cbedb4660b4804d73f7e26d88f4e23174730a7828f1f849b23e1ac5f07104f649268b58453c4ee629f11c53474a50b1b9bfe6b5709d2c2c0c789ee4aee7489c70649e87e95056f96cbde39ab60d218f7bc10527412fea6339f87ce6d08a875ddb975f191818a935c532b71f2c67f2ff682b6d66716c2dade4a9665375a2ecd6526a0ff56b87c29ab85658cf59d5e1784d002110105beeb25e29285d68671684762f918d92c97e5cae5b29d734deb85108ffd91361d60868ee6dbada50660378c18f9fe0c2179f8801eab2ec2c174f450c6c3843dd2a6691412bbeaaf218a5e3844f539081570d6b49255b0f37aefd944ad436f521b73f4bd5c15d58e2e80fa1a177399a63c131b27090fa800bbaf6a75fffa08e656b81f54aced3694a06413ce89f35915b642e1ed8142e4513dfd6144bdaf236f8de5ae56e9b1e50b7c25ea7923663c9d108ba6cd3c60edfad56df48f4ba0bb6b7e44f2a6bfd931c10c2f76bb4f6e19c4c5f4e52e687b3835d9018504010645c9c11fad4f8a79f5ba9c99548cb8cb09ee970b3e78a63eec07e018009015ca9d03f53902c78005944279038d43aa5f692135fc8e09d4af39e986dc761a80c1e1aca7897e99cda56081533532270bba37732166a76578d03c96d6946bcceb40e3019d4a36f9c5b93a7f293ac83281b013eb5e0fd42317444f3ec01d84330c3bcd45fe037e98f6b0601c41b7fddd3f10c756131f78273bc2cecd90cad00b9043ca461791d531891b14627df544c9d4555e7d4d3418022aed4ec243222ab5a2def69b1451fa38d8897c40391abf6a19bcea3685c5c3e43c7f1c099492221da76cdabdddf6ab71b8564e64fd87174c766bb790ca6c7865ac3fbb3bb925cd93e72169a5253e761a7953129144bf41d350991a562b24ead5337895bb7bdd18567346e25b5ba9dcf6f72e4473dcbe8345cdacc0a07ce270ce4aaad982bec1db8da2a6d0cce235f074e5f21a87c3647469efb792dac6600ae88dfbdfe25b6f55428b717b0205fc00ec51171834c2dee03bbdd222bf8c79315e9f7de54e98bec37c30e32387049a118c3e43eef3fdb9b96863cb089ac3af0bce2d5f8e6b573868903e3a42b0edfcadb82d1ac8013429b3bfc9ddc0d8a5fdf3fab63fe045a4a86211246c997c32f8203e6e1cffef0fab8adfa1e126262b8cecf13ea3599c1d3691d6a91909579ab86bdfa8aacceb61156a30426bbe317948544977be2349f95f59d4a81effc14eb96a1da7a1fc67b9ccf66ebc3eb7f4ba2f314ed2ed9faff0d9aed7234b567866569ad94fd5e906228784196c4ff914e9397c23e24706ca3939960ad64440626e0bec989c8850b4889a876ebc604155798e8898dc8ffd13ee82babc9c9c3f1f027ff55c65c4655585a8e01213c86f08cdfe43eb43e838c98cfa37c1e213995afa6cd330de23ae3aef7138b9bf32a8d2e678c135e4614295959008c58af0aadb297aacc886443391d14ebc62c1902bef3912303aa8820603f95534d8b49e0dd200616828329d79d6069e8431c7725ac7810940f4a12738d5c1b4682ec4aae67ddbc670d83f173e303462c6a3264cf35fd8edd662239d02410acbaa3a409a6a01ec9deca6383c6f1cf6758168f75c7f9a95135fc8fccde5e4d06b5ed16e11c489271cd17a8683da80b570d972098f8dc64a2de30a4999268a28d4bd702227679086a5c1c3598284801c903445a54ce72bbd810ec3d553650a4cfbd79d47d02d3cd218001f22116a775dd23733830fe830f6eaf5ab889c5063a7f987456d0dc0174b2c519e5405c426d6ccb38061d523bbb572cb587e4b31e2bdc115f9494c400e95a48e09f057a1a173e8b7f6010d885c1d9a4151c0179cff7170d1440046d55eae110de54f8c17d40b06a7bbce42960c7a69b2e246e13e6da7c806a695d0a70d1477e918f7b5f5d8ae0b754f70f206fb642e3fb000386b3b1c9de0b4debc1c07c85606d878f6438db8ba01c44af6ce2de78186d9957c0ff660bd56df6eebda22183ac88da18b547aae4f2be1d756cd7189931784a670d044c46b27b4b631dc8d66474830eeeb48f72b2607afcfa8dc5f652c5823064f468370a20371e6c65b134e7f4237e347c1fd12db92b548a26fec6555158eff353be73d5dac01a310c48ebf1d96603b0895bb228ba43522ca51bb9834802d75f08facbb69a95ae4efa3b254342f3aa152d4506d06970efff4a1580c780f5f67aa04382031ab38ab787cf91f82381794366e4be5d90ebd579310216d6ed2abadb41289c8e2a2608469a53de6e89cc52ea4a9419d8f7f3b35962b6e64ae382089081928e5ff9829a698871f123ede727afaf32dab20f19256ff3a4e3b50d866b7be5f649961df96f04979b58bc4ff97314c0d796f595d2cfa89d1f10054b79bba76642fabe5fb53edc8d8800c0fc6c777b3274fc6bc22851f87499f21bcabb7beaafe7e1832c262895cb042cc2ce363a21e28151131a9fb15ed8685a1be3c06a452bcde9eace58b7b4b7d4aa4a5307a9c78dde26b1196d5828a04b8a5f7ca141e62d9a2d96775c70be7d9c4da99f3b41cd8f8fa197e2fe15df2995e43f2a8a731378d68fbc64ec0c480e7c7a3e842dbc4d85e5b8ecd69420acabe09a92107975531737c6d4222f03d5440302382726bb8642b3ff2b7d8dbf7f55ba1410254191cc4b6e976c8a85a4eabce1ea1e7a5df734e8b9d3b0ef8ea19c9183c5e45ed7ad4cbcb6ad277066ef27e77a89fa28b215db0979ecd0aff2a49e421315611c1620b2608b1305e8a81371b57f7d6708b8b51e4e4690e08b4e0084e8bc1c7e0c59b62e7c7343df15f1c336668842d5b49ecb15282e095c4bb6ff2f379f67cf6a32055cd0a91a3dd2bb28f3a3e185617c6db0ec8c9911e1c709391a3025c73ee905c652719d88faf6efa7f12db512a5313d9216f83aca7ce598a3d2ad2db29625962078f542dcf925d0559ea932a6cd9c41fa4d42afbcfcc3d3f4b33f6b30b59901c9d57b06f1296a30dabc82109852b776d97f624d64f2a5ea8fb7587679b804be147ccff9b92536892b4564e7cb926de2703cde63c8d03cc7662d5712e6c25a23ea3e0c385a1ddff4d10cf5a47db1db97c491379a902601eb90ff541354a114a94ed068724d6dd570c54a2a89b39244a9776a417afb6880965a65e99d8246b9819d6e3689715061ca276447196b5c57078b3a58e69e2199f17055d3ec11b3b7f04f8810399170471f2065afba89bbdf42c814099c74c0576c8238e3b5182933dd6628b68cf3be82e09915258b0cc5784d355a6b7660615a2d7394b321eeb289d068b5aead79224c4156afeafdc734727b9c6b4aa5f9740d4f6388604edb1abf0d35b2932c0449f442376f1cf6f99e84294e450dab94f209483c96fe059536de193a5df6efb119402f4a4ad514075bcd9e16dc7ca8b9b7ceef7ca6e6a3882f08a023d29072c3d4660a7fa4211340d67ceea880320e7686936ed6461a55061a0d741ce25ab57e57bb4c826a3fe43d5cd6f62de681376d2d8b427fa28ee7a925d9d4697f0c285692eae0c38b82bf4a01776d578368241480bd41cf12116d440e261e6f1338a87a1a7f3b45d62e914353a6492aac6e63b541b4e7523a2b1329c4265e76d6904e2cd103d8c23b2ee4410ae5b8d181e3e0418b79f5b8581f7055ad0c57551abb0f135d82253351c128f30b42cac2135bf478b15a129ab5df257b98b7657c29fd4abda64156b054149148ccd89c6c241f022893c435459c1050c45796bf8665bfe9741d69c27f7f2a8321913bc7a8dd74fa97d307535c71f81482ec1d4d0759ce4f382ec73af724d4243f80af2fcfdde71f2674d0381b511c28017ea073038248fa4db1eba918acbfdcc848d5fb457e1bce89978ea6d6fd6770e6222f58005b57fe942c6f9ae8727ee3c486ae059cf7fcbd9dbd02e8bb9376bb3feb1594058a54ad795536d742d90ca2eb13bfa3f350f0e66d057eb976f97f4011a6d15ce7ccaa27c410f777725fc9bf4a7cb23ebfb3582a573fabb825aab2335cecdd2b3c700fa3418676190602033944fe59b8cdb3f4b05c111c4aa06dea526b31f35998965a720f4f63e813155dcc7f73dc687affb5da78d8966277937ab8746037601c9744be7a5d09e24ef87504559432c53ab9b7ecd0bd4d5ae5387a34fe86e747631e941a569d6ad80bc4cef2ba2f65d93b637ab3a726d52d078691d12edd5c461d205b3b8312d2e23fb6af69502163708d0c35d08541d04435248d41c227fddb4e28305b0cbe5e9f53cbe860ea17d7346c3396ffd5bdb242b4e48657187db18942b042d39aff99bbf857cbc8a75a0bc81a5bb7a1ef25fd2b85a7402544644379932f890afc45186a0db69479c0a11b6918c66a6225e4c6af55e47bcf0b761c2b6eb1495be9cca24bcd08b4ebf67ef88c980ba41b60cd697aa3c969b72b8232977ec8964d8d5e48eeab9eb3e8473533d29a8fa48a7be806647a094b36975add06af60a288b09d2c42eff26bbab6f19ab59620d169c495e3ad1e588a46824a893158d95f9ffee82c4deec09fbdd42e5d57662b524ecf12533da62ca9116f38a034421fbcb531a1b1df93947ac2fde1ec0aa0283ee5c040f0d9c0ee3a5baf40460ea02d15d856f89c7c4ad1e16c776de4ad956c6cb5f54f0cf2a6132c21ded8846cb91ad25823d680c2482d6d0aca12456f1a99e826c02340b5477071d004f90accdda5a701c0160e4e88138e6ad46dccf145f2710f95130511eb235bc3ddcd79dc448608a2b70f83d36ad21427ceed2ccc503b9ac731932923f50d8b98f4fb3e47e14f496fda191fbb1f53f32d7e9201d0c89c520ca7ff3d23f93d20c3a866d8fbf2c43e910aee7d5fb94b60b87c2c3222873c6d81935776d9af064cff9b8b50104b89c75eebdce44649de03fa2c54d32f403c5f80878f9c27282616c5911eacb51d264721a67e79a4f429511d26b1c3f52f874b59f9082074679fddc71923b7882caad4cacfff12d0cc6887f70e32a323a1f64b84eb172657c78aa56e73f753b180c3af24118b6d5089b88ca6a8070aecc9d9850c06193bd7e26f1c569674a8719afb0b3329d1072e944d43b40141acb9ed75c820ffb3102a3b2d009c84f40644e9f115def1151ae6369935ab9940c079fbf81e59a674b8fe684736de0d8f9e54c0eef8cc3dddc7722ff27c7ec5d17483a7d7f2e808df1f213675175c43a7c100d467e6a4d33cf5c11cd8319c2b51a9c72ee600268618e66bf1061d4895066a00b302f790791e34ac315deaf63f40c5ec1f7c4c50d0a29a93378a44ea87d9f98a97b3ca04f58c3596e0489e8817667d758c72c33c7398e6cd1704d168ead7a38a86af27fbde4ddd5c81e339d913ccd94089dacde0e7137b9940bc248b39b46b14741850fa236742072b0d45e1c707ae138028de90684671a74e628c58441ec2abc466a2c8480c99a1eacac470f7b65564fcf813e12281bc023ef6a49f8af668b8628f2473b9a013b45c94161f54c8e3cdb5d008a4451974e53a679a48d5f7e3975b2e630c7c764bbb4b5b326ad1b0b9582e14e92e40be2077dc494afd216ae85ae7df492b275d7d987d3447d3a37eaf9efeecce606423660f7a80e07ebd4aedbd13ae08af9dd3a3eeab3daa491d3dd4c67451e4fbc02e1dd15491acc7e5472808ab60210d32a6bc9fe5b5426c5fb4db8535fb182334c2847a682f1461cb4b6ebd7018e80a30163fcf4beb792e5c8353ad7011d72c095f44a8986ee9ba4b3cc0a63d508377452c4b5c2ca79832667f4c60bd916be064e9284b1db5c89e8846cd6be53bfc4504f824a3603707f1f703f7a79d12edc8ba3dfdb3c3baa70acfeb25bbceefbbb77627871c199a559315748b483422933a0c138ef663ed6b81d71a4013e5727867c1195bd72f9f9d4df5979a3cc51cc0c002b6b4660eda0d25ae45f755c15471926ffcf57d26430c066142f5ae181466957be89a466b4632c6694211919a837f6e203bca1677d78b2e442f92025506a8b44ed1ac2c09b4c9933516cd927447e22aae80da44527710b3ebe74c8a66eea408119e5f5db7db20a54bd00c372fc75986fff29c9c19e900de40af86136372086e26aed1c41165d1b2fd2a5d1c0cdff69e77ea4d603f83ec7c4efdcb2c98aaeb25aa2b0044f696d0d87acb6007752229c1877e16d6d361d3a5236382ad1aa106e60a6942fecab995719d08f7ee62899820c7f1c5143d749443818d49326887948e1b85b2497c1fc0b050dc2529a752f167aa53b2ca2884a7a9310ab6a310944e674b92777c5ca338c8c352c5ba9e12cf3f4ac9322c9f2c97bb4f82b4da62b83d53cbbac3aee7f9c236d1e8baf4c0ad9f172ba2ba9a598c401542a065a8e7e218b6d60ee558eb8f9bf13c218fb3bb710dff2578894343d958748cca27b689549a0cfc4921722c3261090996e44f50b43a88fb90113a88dc21f75aebbc553c9f73194387a2816e4ce62772d9f34b33ff556f8e662d91c03f2904dda280f6111baaf37106da900805d04d7337987f508620fe68fd39612493c94a75d445072ce8b37f4605cf785dbc3873ef49087ecdfdb6fb3a8fcb1ae4117d3bfe8b06a51f75ec5bed9f301b97fc7666f589d3a3188fb1e5bca66f001c19a3693c73750ec9551ac2ddfabf4d00b076eb6a1dde66d9dbf31b59c9fef585b03ffc636072de741219d6759ba75f5dc6b0385be9ccd6c591cd016dd828baa933bd61480676b0ef79a8450718f397e681d1a17575af3f9b62e2c7bba43fb1d24db3d7f02bc5d9c3feb42b6b33cf35e59861b7692b2aab9bcc13d805503955fa09c3f07f1b49c314d16f23b54cc0dcb128795d617b7f90bc844806aa92e7b2309f917e31d97df636d61b5a5ac21df3cb18ff57fac92d037e31e790f2fa0573dc5cc499a17f759c8855ed82eb53c4afc793a0873f335a2288b251fd59d3fb1bb5abd094c56d7579c626458ed9ac58fe6ece8b8dc215fbe6a863071862b72a5de633202ee8b7e3bf2a15c1fce2fb8fd84b822c1a0237760014373fd2dfac11e7493b16b1d37286d29e06c89a0959659e85f6cfda75bea3fce052e096887a2424128c7e507fa74bf553f638a6d8735cb24edd2f603f610f0678421ad0f0a1d78e5a44e614d3cf84c58b38f1695df557045401729e254c8b2927a57ba11b30fc22c262ac35c02910bf1b3a04d1ee786242bdfa320ac4e33d82aaa5b3df87ba13bf0287928644b9529f37ebee50dd87be0372c882b0d55f686294ed523f499c9348d6e59f6d87a6749737367c356b7ed2cc92eb99e64f4087f9395a705380219aa1e22c5aa66f79e72e76c9bbabcd4c8ceb132c637638e2c15e677a47465365e90a7b373311ad5402ef4f2e70e66d456770238d2ada35e50357c7809b08e785d6fcfa748a1db408f3aed9a7a3dcc1d31841a951100b9f36928dc72e2c43b4a5de114d7e6820298c271590fdef4020c656482d7f72bc4464f1886d3ec25482e9319a449977d8954c6f869fffa448d4a8c0cc88535264f0a1c9e6899046a23ba3fa658dd0ed1b776592f0e43e4c7e31988e45173e0427d2699143b526dee2ea32c2dde17cb2a52f636f373cb35ffbef5236ada63a644e1346d1da0328042a65e1a6e7c89c499372f1f619d8ebf549240b1c3f6b2ad984719b51ca0f5e0d406c23cd07765a21e7a19c1a2f4c029b0d5df45f68d1dbb009289f577a5ee6541b05c30ee40baf6a68c68c666707e8518433e52cb07abe38339e00c643e125a91884bf8be4a5bfb79a3574c8f3b515ea3420fd594e0710bc036d94c43e3984eda1ac03d4ab947a15032019d2ddb1a1cb8dccac2d21f8227fbcc5283e045f134ee5ba9506bbdb53ab813d02ac797d2451cfd735a5e85008ddaaaadd26a74392e1f57e4e04575a0273ef6dfa8d771ac5f172df3a60afbc7fa6af84f14fd836a2fcd7347729d6d5e378136e203234130590aa84ad39472b1de76776c71a1bb8d5fe00789250b338c5f3485a1a02649018b8ed28fea4cef418741f9226f8962a21f69b8cf33793dffabbfc3bc1ead53962f2c09c0ccce20439e269dd355c19f609abf20dcb7621fe5683d47b69dd24c6403ad58908f271e4202334b41622b0ef9d9abf4882c1e8b5b08882c32c3974cbc71bf76f742472b6174d679e8f76649ef63bc122ad465be5f16372723d34a6e4e30fc57ec10bf7b6e69cdb5cf8ea505ca56860026b5473fc027b91a6542b873fa9d670f3614b742323b71b39065a27cc43ea257faf4646a7add6ba5294d8f202682818e1eac63659d40d584945a0ec816d3826c19ec8eef147fe620ba44bb6a10dd3dfe1d73ade4be818cdd810074784e931e6b76939653e47ed43e5da25b3aa9b7cb157f1678ce6a1ee8f4a3749acd75d67b94ef84b31c9a5aacccc888fcb469741c3805f6d08332c8030195a09412e364aba1a3bfb9846a4451c66c12c0f51de1f583ea58817241449762ae1246a0d30e986da095de03701eae0cae0c196242b9bb9ccbbaa7b80501881a1b73b60bf42612dab2804464be03c1fc38eafdd86aecee49dd57e02d75d2c4e70122cf800a327090dafa8053e4fe3027f818a2fdaaf5349a7fc53b7b70c3be1124a4d1b30e7efca9e7cc3e2ff2940d0f1cb8cd35d9315d14a26ca087fe7f969b9d66c5066c865e6546c4b0700c3e2c734d765659993a8f36dbf2d0f190d080b06d5e4ce2feb027bfd698a4ee814e1457af4304910348b1d9cdb7b824afd6793d590c78b4088f75eac4cdbd9eeb8e2f37c2ef93e3d2d2ece3987d082a3f19c19cf8cb786a469f4b03f58ebfe57be7fb872ada75a1e318be4a44340d5278d0ddd95c795ebc4e1be67e010eb54ce26bc5c2fe1ea611598b188d8939e217f47c7f5e461c7d1a437058bb454cb26730a51482d6f0b53bbdf07937c179396507b88c454dea30692552c48766f0963886434d9e49795e5768790a5456fa5662960b4b1a44a29271b898ad44f1277fdce48ce4c16991ae0522b13d8ffdd5f1bd20f2b73c71bb5834a46b4ce0d5731ed0d3f7a5cce0fb5272fe2adeca3c5054a2a6570d7f1037963ee79852a2d2046bd536cd54a448f5b26f99177b1acef78cdcda4cd818bab2136b4a96e681b88466e333300029ef528ab54b4b9bb5f90e9dd1e40b4f99b7c66b26256d0d116cbb7cb1cab170d8c7705c7f839d7333bbf84698a44ae1a288ec09d51f22f1fe591f08b9429ad383977c25b7403bffd1f5fe85ef5e42c8b1b015d625b26aeb76fac823682a5310675b9b5660afcd4dd3ba11a7f422bfa4686192637e80edc2e68af74f4ecc5527b25fdd82ece7abeafe26ae9f569257fb5fc45574f23b245abbc886368fe3af1c3e3d09d737326d95c342581a5782d02273d15cb63b171b934cded42e9b8946e6020129f9fc1a5bc7a318753a64ec53f818f3bc54960be45a38478d9acd5d5aee27791798916912e7c647817cece193bc41c228d0e93b39a42bd9018135ce975ecd4eba53c6995896705ed478590649e5e0a2301510b3cfc999df35909f7ebe5763d670f2a313c0aea6f03f59baa553206074f5300fc35409365e0bdbf30e2ff90a103421e63b51dbbea02622bf58de44413daa2083cdf9d96bd697cd3b8ab3c48ca0ed32201abe86b381ffd1a272592940fec4ea0097b305455696013c697f209e4ab8be064cd79c85533b18d6b37c4d03c5cafd8c133691eeb4210feb90c73e9889223600dcd863d6509dd7622f740526f68c31da9c3fc4512d44089bf8c2f48f220903ed7b66f0bcf907a5f19c7e70b03f78eade1585f8fdcaaa235363207c4a3460314111fc8b4bced11952e0ddd72326eb7e68a65de3c3c83cadfee7ee32cc60900216fa3e5392293598e1f5a3f149d262f37c39910c90f040b8533b70e33f85b38f5409f1c403fd2983d9c900e6c048ba5bc9379c2ad577cf148c0365f05a92f8ed203864dbad32223aa3b38b83d3fa85cdf72801b97fbae1a0befa031a29d4e6349a092ffd00d8d8cd08ea2873d7e7df289a0c5442d857055acbe360d614d8a7a9e8148ff434b94b91c6d273ed0dc3ba2675cc92bfc7de4b43dd021d2684a02026be546eaa31722304fdcd297fbed9c9bc01c8ba0578aaaf5f888ecc3908a5f9f9e67055ea8e7aea5c07a91de6440ff1e201ceb7796d031934d5d3cf692525b713c85b6cb7c57061f882ffd36491b16f770ec898b1668ec0daa9e11be08eacea7a20a16225122c050a7b634ae68a3a701b6583493f1f03767758ce81eb82cff9f0ea61c1729d7f2f64f16acdd83c0a2a5b130eec3c0345bf5a324bd89820641be76bce77b7d694b2c3a34eba1f63d73772481517adc60bba3a05f9a3376363a524d8fc21bf33a3046e55fbdec56ba12dedafc63a7512e9543766148c5972bb0a6c12164740c04639fffcc8640f5a651b60ca4b0e4218fcce7eaa5c4661f4020f2f625af848fb3b8f5f208af0786c968999f59ca1934c1e8c7242d127c5ff3aac5950bebbe5fc6072e25a5a10fc7beaa96f8b8eb99530686f1e94388b906c91bcfbe70387e71bb27f40d8af5703f7bc5039e02002547eb876708ef3fde2985c9875e50d10b30875165cdfc889c42e6fb63798ac53a95bbb63fa1c37754d073ec476fbfe2f05a9335b70f9bf28ba133aa94809904594141755e14dc410c81c9900ec4d704ec26bc1988e6cfa351e8dd60e1f8dbc20869ed08f45b7c937c2dd3e0b12a07d76313fc510e64e8762de5b8d8c88997ebded5ec990e7c3647bc611827fde2e7705432b63d99764df2955b68d74ee3c07dbe99a3adad860af60b7f047287ec36dce5d96d97b0c9cc37c374c2225473853baa4a177bd0e5d814d1df1f1874dc57f3bdfd96a6ce2178ee82f77d3963e026a10817bc854c4d182c79dbbc0604a5eea9220f0becbb270c85c1548ac98a9ae5463a097ee669f818b9642925b28f0cdd266ad61369866bf6f9ce700c6c93df987a0ccd9021b907898fd2bc395144a203ce1a8f5cc02f3408c3a12b762d141f3d254805735ff3ba6ed7b31d1a0e00fa567d394055c71abb5504a77ff99020897b1e5032dfa937489727c809b166192ba982e3e5abea04d5579ef467f8d2db3d5b453952de69030f533ef9ca4e247c1025817bd65e136e95b12952a32f2cd272cb73164e51536f13a9b4a3b35ac73a5fdb677900fd91186d149085c56db00278e735b36ceb49defcf5b2175d011a55dbdff27d2070f8ecbac409775f5941245e33aa5c8a88f94186fbb3eb932796b1ef4c3c952a922abcefd5ba511297d4e6891a8200f51844abc74ecc3ef98047f422956cd20b94414c7c0dee3b421fe3da53159608499a2c38429fa493524875164c84906d1446c54c99b8bca59a139aa6de564fc883c295b5623f261f9818f59ba1a47e3d9b7a8c9a672db23780f037523ef03f8b5b2fd0865ccaa9f0","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
