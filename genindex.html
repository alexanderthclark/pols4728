<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"eb34bf27e01cca3c59fc5e913ef66a2757aeb4a4109faed67da61f93c9ecf7a2713e68cea2e7879215d31c35154fd5eb4aedcf2734e238bddfb1a04c3f0d8d8b6c28c0e2002f99551c151fab2b3b91112512982b261748c34caf6d62b63298b1443c226e47a22156b4a0909c4e0bd2c4de20ba10a2b20aea5b94a748b1f9a258c4b5794604bfb9a3e2ccff0b1aa1f194069eec2d0c53904d1612cec2f9a088377ce5d8c2e5abe1aa014017c893b21a593b23fc61d9abb9150fb142d13d9d308f2ff72adea0e4725d745ef4888ec83d19b13652d22c5107a707e149770df3479f3ef0902cb38b9c27db7aed08f098f15466272ee8447a6ab1ae7edd4e026421295ea7d32e09acadc9b33aeaefb23a131509e9caba332f97131c06cea796303212b2d7d8903afe88daebffaabcecfbe1b9666c61eaf8120bb1eeb06b2a01444b3cfbdd6a74bbd5b8f61c08c35bbcfde56905f92994705f9231afe94a0d8e921b5262eb5eeb36127af363689c3b6aaf493c5bbd0992d9a4d9933bd3985f6db200ab536aa874b4797d85feb5b47708c70647d176a155a8a4cbe193b3ea19c27eac0de1fa0be996f62ec4fefc51fdd9639db6184e351cfad53535cd0a67e862761fc6492ca3dfeac74b21716388d94d7b445e22e010e09556962475370851125b5f62fc6d0f4f6e3d49cb02e89c71eb290b8e3e2ce35ff2fdfb7fa5d283680ca2d6b3251d02dc3b0a7ee485ee8b7efcacebcca9c2e36d886899d3b001e46c2a6aad161b1571a4ea161f028b2075c7aeb17e1c52f1e1c5712c9c5c14aa1227a4d3c547cc227999326d8434a0276dce10f781762a65bb94503337fb1eb9c16a157138ebd5e0b3d2cae2e195a3f121ce10d8a7cc0ce0e2be5e701358b11add627911f08ca6b94ab6048aea2ffdb3acf2be492caeab493b5b15ea61de454b86b438aee7a2adeed1f69f4fbac336435f7f885d8eeb7e52f422b8ded4a2efa9542cc6e6dd1eb8654195a93e9cfc847016ec648c42e770578447b73710b2b83e864e59687fde6d325352f9e6da0da6ff2d5796963979b28e65f4f3dc5888532365f8e8e1c13d4fea9dab8375e35d624b17b665402945c6f4e3dcc2ccf670cd011d8b138998b62c0dd44c5cf73a636fc3353a4ed35662f8b34133f6fb513c5a5f7cb313317f357ed54eb342989b533c80adeeca2c57a89feaba81c0eb3247ad9c1d1934be9933e33add6f35f05be34f8f4a763574fc6f546373407407247a14ed0ee2d69fa2d31c894fb4a0eb08aa886fa030473dfdeafdc082822c5e17f674c02e4e5eebeaca3be899536ddbff5142acb326c65a5f4492ddfa4dfc74c95c8452ee4924d0d8b6d2c49a6c274a86f5ad8090c7b9d8dd228a70b6f04cb550ebced78dd35c07af5a719446044d3bc3d4d1d1a820e802cb57b72ccb0a4ed10055832dca3cdda3d5a2e54a4c26a90c169cba3978b17162cf79477270ae9b68d88faef5b32a45134ce3b9d9746634394f14a40af8c67c1e62e4a17853391671c46e2aa836f9223ea05114ad8343bb833cd022a1afe534bd0ec3c5b40bcf2b80eab7acbb641fffe1fcdff60ca172db1ad73c4d330d249a11a132f86677b86b1d0de4168f3be0b5224bd297492cfcfd5f5d9b83e496c82e08d303a003edfdb1c52a86a5e6949c26a61a78c94cc5d21a6da4d347eff41702ae47b58e22e3eece40422a736a8a018c408e3476ecc81ece31de738b84a5bdd1fcb6331e06eb525e1c6666de309a1778f7110a66a4e0dbd58e2957782cc08aff168f5fe565a8d6962524ec80fd4c920c71d05dd8d84bcc62925a826a4626ac20ff618dad9b02fdc3462421e62222cb956d7624ff5a62f7c55d1a6adfce31ea674927262a72857e2c27ea00ea1ad856357008003466720a1a2a62b440acded7954fda8fdb208e404b198791c5db167059bf0605a55e8ddcc5437c10bf86dd69ee03c1ff8061da1eff39da494a14085b6ff6cfd8207658725679b7b21ef4b1e05b24fd0b820055e9a9b9450b9d12516817a5d99744ab6c593b15889d0099f6a09a9a870682db46a9293b89fedda6dfc47e3aa875140c245ca626cdf7bc97981549fd2e2082c1b74793ad95fc6a308daeae6830922dea54721a054fa411cae536ed761d9f48ae62e2ee94d45b449f89b563a6ce78ed4c19a86393a9064d6665a6ae23d765c25888d876f0932a9b2be807734e479adf4f8a6128ba80dae4bcff8680fbb7f4c0b42637601f46a110cbd15b4596c0722cfc37defc5a17358d231f5c60b0cd01dca0e1d4b4787891c09b33afe536eabf3436fe35cf60933d3d01d1968e5ed9b3a002ba3ca8c0ca48bcea8f4a5b8aebf26d1faa94ce5695ae4e0b5b211c13fd83a8ed36dd1d5f67b70b4448c7618f6aaac73608d53e90bc7d577e83de384905ab00a18daa9e527b485e285ecb2bfb023c2fef30c4c2284cf80a5c6ff564a684a025942ee0683c55802b3d0a32bf0c8336f50f97813f91ab110dcf5e8e00bbc7b816d48fe5c351af5c4d59839ad912091fb1ea9aa9ad32189e92be52e8fe9dec3081edab59b15018169d3451b2b2c92308000aff388a16bdf1bdf2e8e6b3496628dfc7af9aea4ea7fa4fe34c96905e7769bd655a51e858fb060429a14910f9a737f1439cf1e41aaff1e2297108bf9ab812339359b75b886e5d518e293697d24d50431f27ffa7b000f6ac2ea61d249057050fe1384338bcfde1de39228935a41daf9e3e2c8afe312ad07c349cbf5b90452ee1edb201ac737b08894a44e0f88bd1aee8b624043d3b14d4c424947c21da251c058c377313f536cfcdf85c3125578d32affdad009cfeaaf351bf464e2859422ff1c1f85336b9ac347ce839c6935333d898ca039919740472d012a1e28b6e97211dadf3847dbd98c15f2aaf22bd2f3b55a4bb94b315639cfd14cccc061e25b9ef8475d3269be4e7253555d0e146461ebb4ccb31799840aaad87134833a995ce9d2dde9e930c3be8e48a9de81124c8a1626ec12301905005ee4b4554217db9bea60ccaec4ba0e8b5c58a6c86f1dc2ffa0110ef6d3c1ea66d830b80277b9c87e29bbb7f3ad00e5e0c2b9f4eb67d6e15d0fc1ff6aeb5d1b8b870223a9363cf94d81e542aa823ddb7f20af1d95202e5c75c966cf410c4f699b2a7e907f09f3fa978ea2bff19d4c72ad0fb742afa718c62e9b8e875a4996cf1771d8e73126765abd5dc0ba3f323f18b68c180f7f96f3714f3a989cdd9e7df936478a231bbe319c4ebbdf50128a1e63e348a7df4c5415a44a4496e7c7fcc970ae2c33439c71698959cc3c6eebe4477665f46fa44b4ca57c49b22814ec8dd987994af35d3065f425385cb929ab0dd66b15c940ac5d0251479328841d07d9558a3cc60f7eef6fd03481ab836e635567ea87b74446d9181051368713ec6281200abc9d94512930161e6a7123e9fc5a08beccdba6453e37451beb86d236c8693394b44b68c5b4b58ff914542aaf84720c9c84740d5e21e50171ecfb582bad0b9df066ce0b72b7e3feeda0a4c2ed38b40acc21b52f3be4d4a2d2f9f014a14dca58737cb18d861653ac5d799052fd9eb74fab37ec1f1673f7ebb9526860cf4f57ae4d07ae39b9cc35790628db73bdd4aa6bf285c9befccdfa6854167c80ea926292a1c41cc4dabe3a94ccf6c834f9bbb5fe8eb3f5a7e6df5ae4fe27636c217842f3851de4a6b68fb667090e0baae31d4d5b7c339e9f28f86ec57fe59f46d9edb8a2a4b29a50c237ef2abc484733b865d4e3f0777cded3d0dd53cd63a0062eb52f2f78f2b215573a7dc16ad5023f6e9f15c8069f0818c2ca060d7078850c6c9e20a4897d12b5a62f96bbbd20911a548dd1293c0875b252031f92378ef85b99bfedb159228fa249919076326a78072efd1fed37d01e5c589bb7b4b6b11777cc05aa7bd51c54345f7419ccf45de241d2792e10f9602c266cbc5c939022b41e5103e1bc893aaee8857d4764292980ea43e95b7c5a101a727bd8a1403e1c50cd3fcc4d21dfc26bfe3db64b0b32251e14c07d0439fa7c35323457a99d7b75187cde6717ec11f099aeec0af83961de9fe76af8578f8ac07e753b2284740749e9753f97ea7838a54dd61de787114ae1877ce8243701068c3d2763f70602aa601bc1b9bbcecc609893b0ab164d04a0995751614f474b06582887ee407b228d7f9f592468e4c21e930e35c8d2e93013fcf1651012caa2b0a221ca39e3c3e0ca0ed7aafcf1c4bc5aca920a7061f40ddef61b14d9d6f8e0396567621f3c66f34fc46a1a1787b93e9ae961e82443b368e5149a1cbc2cbe3d81046c9f11ef9f8cc92e9f1b03693e6ca410fb5a20faaba976026d9cd5cc9cd7672bd8a5c109f3574a53b60febb933e05cbb0ccffd9ccea7bf908c26bbd033f4bebaef2b470d9ac2e5f2978d67c97f9529e63c038929a7dff594ecb0784c12f23e750b3e99cb4b7a8ef00a0c9569faf75a6307da60780724cf271e15e955ea91351e4be06a67af437c015d71b903ecee7738585f18ea565c68c3161c41bf7b11eece867a53042179cb4c00fae40dea60a6f22c3756b290fbe1e9a292186bfe10fa7ecba833fd7b8f50d0f4b5a01fd3739ae01b1ec6384343be2ffd518f1ce00618c1ec5bc4e30494e9f5d7a4438a8a5aa91b3c6583a05a1b7fba5d5e85e903e03cc914282db0b8f844791134e38cc7a21f6dac058321d8666d7467d638ded7c201b1743f4b05136e3c0039b4306d086116f589acfcd6aa5203036de39499aec705b25eca97104f207d098bb590b637d1aaaa07d66fae5803499a9ea4e992fe56378eca77186ebc1cbf4c8582a508a6c3e035c80f5a165b1b57ce127f17d4388b4ec5fad1c8cd8e71d460e19c80c617bd5aaa3b62659ea9a3530c8439cda435ae7938de9361939c1cc894a82f8745973043fcbbec74b8a5ddc80d904600cee757cd54eee1afc2b332457257fde179327fcaafb02d6334c4cfa3f9c22f6ab08011bcd95512980edd7d598cab01813f70513e16bc8cbbd09ec5d4ddc79d00c2162c143342aaaf668db707d985394656123132173e4b2fe7ee4d1412e962e071c31a11201406b4116b84fd430f58a2570a0238d113950979d2e33c62820070f2010a1a1ebf3885999e9124642402cfb46e7ecd0635061715373d03d60e631836f31c8ce179c49a4e9d22402a4c91ebeb23726c821ae84629e5549157aa1348e655943e2e47f1f96f0b0f4f7f489d8ebace1ec2b4fcb3e356fe10be4d21ed8c83308357b1d1f6646a9514893be2c0494fbae6bd393abc4cb1f8d20b5caa81b4a08435dca7a4a4730ab9374fa89ce2c7b6fdaa86288b417039a959b37efced172eb5640ecec655c18583b7aa87fab875249fd85d8fb56e5eaeb19cb87f5a46a3bd00be3a35ada9fc7aafe9ad028d29a60e9eb9dd015efc96229f76e087d675bd2860a12c98172022d2d9ff0c03f1a5d9eedde7f67b36adc17a414fc23b78c91b401ac1c9f9165729204324c07efadc4d8075892a5668e9f2446c1dc08d4789c0d6ced8c6a79e2406e088fae465b15470f69a679e520b695d5f27ea3ef7c63ea72aa9607c441a029a9c0c259e037dcd444a751a5865a6fbb21d6b1c40af8066cfe9d32c3b81aec46402e467e17ed02d17febff0229b195204d7af5a3379fa747674ff45c9689a5c2e7c8a8818c3f04eb49675d519b62e570435b6b0e6523cb4e979ba3b1b96f5d5c101d9690efb4043122a2e0415ffb17f76d16f1a1fd813afae7fe90d7a045c1b51ac905def6cd584d24c08d16208f4744d40234f40a18ecb3c1fdf915deb211e4654f32b1d68ba41bfbfd8ede3a1bacb397bed188c9083993b572d63d9a816ecbeb9874fa4a1bd0f26a8f2a7e547125c0b51c26f95ae93dc4e23027cfcc59648c32f7f2720baca83f62609903324455aa395a420fcb881c986a1627b40efd982dec7cd9256434f2e7a02559cd1c8c1698b50735b0094462a2136e67d5a04800d3131b3cb6f3ae953ba530c392c722cb88a4d01b39098e1274409326e1eb3005897c70609329973177b614a36a4cd489c76380f8238b5f1877a5986acb57ec8f5b35285aea5729ad572323606e82ad471e26ef2a3262579844a7476331c00a0178f3f586a849124ba5b76b23150579e4eb29a350e539ed32332c04ed683e477f64ed9bd61ca5b1606a8e4f7f93649d46a9e1af0c34e475d46c6fa0db47976ebd6164bcacda042472a453be20074141a5363fbe06f8568e9f3e09606827fb7e6f64c2b5136fa8ee785569bb2076244bcdf040b33ad22ccfe28270dc22dd4024054e620b5f87a3f4a6727ebb7354c87cc1c23e84bc9cc2835369ecb8c105dee7ad23087b5272778079ca5abe10f47abd14109e889a1693ce2b3299da9fdafc5f6f221b823400b1fcfd589f0817c8b7c3a4c44ad10a8735eb262244df93d6985ab09f65db56ecf120202920407683c8061f38d216fee6232c78f8f3dc7ba30b7a5594647dba5d1209b7bc43f532de16f7c5a8bc0df4b086078e01937fd1cd1972937c1492c8fe7e9aa401cfa96f840cd6371fab0253fd926258bf418b3f69c4fd0644f9ad088eb0158bc6133089b88d686322268c121aac2a5ecfc1866ba3d5f39338443eaeac498e689cfee7df559edccaa44ff725ef15dfe3d395728ea2ad63710b303a546ed25dc4ea60529c548dcbe2d85aaa28b0e6968657f463dae707b93d195a1222cac1135acb3fc13798179ba9d15b76a462f567f68e57eb8b403ca3e38e57e391ab2543b46bca59b1da0411ee85fbab89de279b729d6dc2423507f3599800e7742ebc622f5af1c51c0fcd27fa757cbf99c9f65ca9527c286abf000401c08982f384c1bd3d6554e7674446a183234783b5ccd582971dadeaab1fe8a48c85f499f50088ec6a36cd05c1a3fb29ca524ea38a0e1f870a928dc127e679458de948f5bc208c3d2c15c11686f8035e83b488d2c0ce27305dc06f4630e36d35e1a959055ecb92e243ea1f1882d0729c5572a31cfa7893505066f87cf93beac4e4a7ba6b9771169c01cef0b8fea93420c6409283ef6c890100384381dea9d065a7c150da9ffc9b257e0bb1f302c7c96515cc538dfa534bc8f32ecf1fd757736d968b4a171e3366431ef1bbb70a8f5870c679f1cfa02a5c26edb0356b8943771bb7061531cb749747fd8bff5d1fb95bfeca5197321ad5db84effcce5bb207ed93c6068c3402527a5fa64a09f64e7ed2b5ce1db3397b480082afa262b5ec5bbc3be8a18bd6e4f09aa9942ade56711294c80f7a86c21a31aebbc78533b3704d228c2118c17b209ae0997427f71c50eb02ee0de5324b7378d86acdcd540417019ad764209401454a487e7ce71578667060ab6f13c872564981ee0200e158f707a06a550a61bcff5d52281a7c424b34c3781eb26d3d8f88fab667af99bada8871a9db8afe558017dfdd12344209928def666290d04035dbd94314c641bbe80be95ebf984093fb2ff3e6aee79134f178670cfc4c01f1492b796aa04f5c318d0317731c72d86d575b9ee4128dde85893561d3de25d775c1a21a190d81ee82aa1012255c85b4864100ed85e26963d00b53537eed4effb5581be4338025a473fe76ae94b6861d7741dcd6389684e2421cf0be2772b5eb3027f51feb743c6475305a3479d1b31209f28280b1565074fc5a5f87edb00d061ee5a4cdc71dc59fd66aa07f02f86ed9a24ed020fc3a03febe910ae4aa7fbc535ef6ddce18427bdae628308e31cf5fc919997d0c112210dd1cdc853f0a7c1ed8d8d478fd7fc211921138997198ef46cb61e5b5331ade7a398786d5ee453ef5a1086d19130ead15de92de566a835b3073d1da2e18a71bbbf994d8901d67b836fe2b3ed541bcea5aa2f294fc345cc978e8d1d8643d2eda3c4fbba50fc0aaa6192551987f28196666de1c3a4dbbdf3c95f2913218eb26926c5eacd0ae4b380f0dbb01c3bfc0a4135df0d79ff98cb7ebfbc59c61e0a6dc744be8eb8f2064a01d025d0af4d805e681a20f4f9d084df8129f942849f2acc0acd2456ad4f5747de64ec33bb7a24cdeafa853440f2fe99f0023d73ef526c6f056c0e0b0dc99158fa03d7040c5c7199abcefd7455a5e85740138f070b5acff5dfb9476eb3c0f137340c36fd30448f3b1770cbd0ca8300b7ff9c3a37252b444ccefbf6e4cd9a7f93117f0f56987f9ab2ce011af1f82c02599e5e8fb7504a63137fb87d7dfdc81f290da5d3e64be460f4dab21479fc611598601aeaf2e455b8271f9261ec43aaf187a3400b0391fa58a24df18d22cf3e57240ee32b49553a0c7f11a17a745bcfc0ebd879dc5601fb422cb6cfaceec833e87e6839e61159a6bea4bc021c72add1a5627e0df712d527d00787be9e4c1a29825a2ac16ad0ce268d9c9746382447e2d089eb908b4fd793bdb590b163e3f26b54f8d877cc10b9151cc2060f692e67d85fbd3c4bdcf384b572328d69397890aa994bfb03c67c8593df39edbd82d91f064b00e5787b6f8f9e1e920895a53ced64f28fd8cfd612d91667dc8d51b5f4d9a65b6c80de1ced12704d6f9cb00d7efe8c02ffabaa19e111bd79a116f210fade68cc60e62d0bbdcce88cb04fe8036617404109c53d0be670118dc8700e09dee358346981d8bcc4b70a5bcad56db7bd75573d1568f620f6de730ffa4e6c766491783a449cd683b350ddfd9de07346db446a71b886fbbc003af6d70625ccab0e8f59e471cff05efb2991c287accb9dae7a4a25dfeda01400f5537f7f34a1b1cae687df2631cffd07621fbc0857554f857ae1c4746163b3a9238db35cb31b5d70dc03756ba93459e8c285ed625aa16ff62a575950a5e5e488aae33428ce629a19f45090ec18f40f62a63960438159463a441d4a12916f8e03637c80159a5773916d60ecf6628eb18255626e80597cd65d4bb212f09bbff44bf46a937b47587f570679ca775aa057b34c019cc1aae9d39dab7ca884c3c0dcad48cb51607ee03d2fb1bd96adf7c6e2e6b492a0329db48461bda52954d0826771543ab51b25b40dd6f1fd71c13a9d834046380cbffca62f25ae6d0f64f1e2675e10a23bd4642a7b3fa1cb45eba179b485d4cfba2d31d335148440c3f14a33ddf6425c6b9ad83ad53b179b5b54630247b49e7a6e6df4d6b6e0519c06e18450d8e773670cee026f3c05e56ed52cd35e5dfa23029a541d5f059e83485d5307970344405b2649fcc4cc75d3b33007cb8dc9a576e15f0f67bfe79506a53b96124f3185b66177fd4e07a4adc8b9e418e35e371de301d6fa9aa647fc3156ad084fcd8dd3b52765006763fb226b69e71b952bfe28085b57f67142087935f7a0cc21267be0aff44ba6fa354f8a4a88b2bae95c4f5841bc9ed99f2f1fc74d3ee0e9ba60b1a25d4228728363c2b0170e869f357179b7e3e06a7b3f729992105bccde6365ad01b452f4617ee26f73213ce37004cca2ea91e858a63249f9eb653fb3b259e386833c01e1fcc88569b8f72fc71cacf6457caeb544322b928d29990ce2cada90c5fc810153d26247bb654f5583dd3f499f94f17f56863e33c02e0e4a3cf1ea915d91dd66d48eefba9e7c051772d087e67c94d8892471468afc89fb621d87a08454dfb619717e38d15f56994b4800a2988b8588a6dd45b5350054f499ec5f8e2749b6a32d4a64a96f78658fde2457a0ad5ae10ca8822cb76a32cd8d2d0396f3ed54f618f430411075a891f0832d421daa99e703b309c8eb2501e0726f4d3f2e0ea81409d19cc42e0cb0e921f3d924ef1a9833dd95ec142aa7470d6b165beaf5bf8791f068528bf6237820ea20b4b483e124b225650e72dfbcd14f184b607eadae283c96615862f0adc1d5406648c01b999ebc726aa3589cde153854d731973e49200fcebc3641b2546c93d0c8e3c43f71293aa96cbba13c7f80e925acbc8a0dfbc0d287b1b10bb84e55e25ecc4b662064c0dc0343230c3b2a6ac6799a9ecf6da25f24016959e0940dbfec5f61aa01354fd7b18f99e7787b40463b082f9a4517679267c7a0af1f56c8c26925abe7fd532d6943e1f42085ab08e999ff77bee1f312703e4e98cd71ba90b12a73c0eb9436296be7cdf316c64350be7325eef99de6a3dfb80055cc2964c24f198132002cb52826a1ed99fb05733f7c0e5beea21ef2569b0cafb0079b55b75b557881721fa7886e91dbc3fa60cebfed23da9724c1cb33cd6a9d9d9056e4901c9fa543b219b24339d07d5c7f001a1a630827e7e1034d77ac4872932d8ceddab291fcfd4bd786e23e912e38662a17397eb5318558cdfe0ec5bf02573c5c4f03df67ca39c0affcae7108a988f2f4097d321a3de89ec89e351a134197a9d34892ae2f79b4b44befc9ff46bc23675029826fa7708a662d46f9b4d40bf4af149537d44f132ff0d2ecf0b144c9d59c597ae254cc0dd7a6206d701f146905f600945c760c9264a0a329d432293d680cb1792ec210e37a9a3b323e7759df453b49cda20c76d0839da48ec58edc636090ce45383e4ea14abf3dee3680ebb8008b8d5086afd67ffc6c7c1fef3e60211836c182738716d935b7638ee3c87df624ed53482f1dc4cbe96443db5cfdf8a99dddc3477d01ce72779e2baf27e3d4265e04c7b80018ac62c79b70a13d8636e1d282ab9e49009abbe4497e67e2b329a88c7e4a3af7c194f77bd04390c71574529030c75242dd1eae539e33de016fba77747168350700c4b0298e0c935ec7fe6750c4e255d2d573237f851da903565bb15ed98629320fa10291674617e5c1c159c697a48420cbdc721795b960fce6092bb755d2a0158946d4d2bc8c3a8e0773f8af1c5f379e0f2ff31812f483b3a8a7ffcbc2be9961e7cbfdc78222c994fda411c667b6bd88aadda6603cac5cbd0e3bb263fbcc61ed0a5983de46c514f9245c361396ce222306f1977c9faa3ede1f9e88d597036ed2360af568724db63e45e54b3f6f628d976e61603be6f2f90840e5ab6f95040e73bdb2d580714d8065d5d98ecc7f7d51a95383af899242bd75971cdf90fc8a1906aea989e68d40ffea039b62764f4b14777ef80eb5fa02ddf35f50ecc1bb7ab23f99ef90c81ac1003267774510b6232988673843108759ae9cc4bf69c483ab8f92e0bdff049d0a3f07a44a7091e7b9731421bdf64df5de1ca9455aa0d3e71161b5a155d794058f05653c94525dc156296700c99d8c9d4d34c1f1b9a2989ebcd161b67d1be85d42a78463ec394a06db4140aa597b2db49cbc9e6d7f90a370ab587120943e766d71a1e8bdf87d7b1963a1be9670f832b88267d6cee206927d3bc1985af0eeca1574a6b73a5f14756cdf55d3ad744fdd454297bb1575e28ecab1e209ebf5ef64a7b3a39cf4ea71f7aab78868465e5465b4886f2708d860ae7368749c1ad14f5f9ef67c1ccf255bc5139008bfdc360f6997383608b60b42b3133c8311b5b13e7ad74fe01688d239816eb1be5c0cb49e6c6dd32bf242b3d3a5ba5d59d558019e6e57572ef9d9049bd8d09d5dc9c65845d73dbe2e4bc6339636746ed9cbcaf100461cde6e17aac982027a4863dac6df2df78872dbe505edf7be2103e515c859b6b4af1440e40e1248546e124892bac1cbdd742a19ef48e2fc9e709fea1563e5eb2f52e95ec48cd9ba2447291a60ef733ce564beb03c91432ca9e5046ee0d1f690504c85816fda1dc9841650dd51979e3e4d665ed1732ca6d3a0c664327be3264f2b07e5ddfff9502fb6e73c59ad1508bf34dfd2e658904a740c5d00504a6c8e32b14ad87e9b7c94a6d421069323b36697055836e011bd11de01d2492c8cbda3fa67f8c5839863dc8505551b39bae050516e88b4e8eee34628b6286cc15c52ac1a24cf3358c87059012cc7e38f1b5a32fa31d5864fab0ea960bb3a450a43c58473abdfd8a72cf2fd3f2d81fbaebf6dc13f5f45f9da7dac4ef3293a864d206a73546b59992b334670bb96f0fc0c9aa872ad525fd6f431641b5bc81833cf86d1157940b714dff21fc3587b664c32aac7b5f92e23fd78396ee1f24cc014a2b4416c2abc00dbd7378c2d13cd932b6381fa0cd42fac91a3b8dd4761a5d860d0fc8ae622e6b69e462b578d75abafe281241cac290e675aa9bdfb3fd46208aefd46df99eb68856f635cf2217954c97ddf1a2cf631b542c2512dbd0d8d5c359a68ce5f740fa12b0c0eb52e5c43819a49ecc53c34468f9831da22ab68d0e3d794d4b31b6ee6d2874e51ad1bf61ef4dcff3fe8e7d2aae5a5f7bf3be5ed3345b7f7438f1e8c216b04a84f44313b726f6d4dc11160ca8b8b59d9b2cd1f2bb69725f6362d6e371d173db01e7547cf8d5247a1c872380ce2d602eb9275e4de8a409d366c8ac65cd0cdb07e733cfc855f03b0ee0c086ff9bda23a20445bdecb5dc777a7b9a60cdf6d27073a38214e668ec5af9702c65dd3a30a1264c0c7c21d7d658008b6010a00a655a42e0d99cc973cd475a8223fe522baec8b5197cdc5f9dea422e117b6593fadf04bfa2f36399692921761a06b17534403d6fcd33474d2c58e7853e8ad3add7b1e8e7b7b3ea1ee7e7405db48eab6ec274aec0beae61f485dc0d185abfeaeb7a999ee323068641d5130117c78170460b5b43bbaebdad7ebe1cc67b6eeb59bfe5f31172011232afd0f24fa46ee81f222f80fc71b1dd104e5975db07372062a1358fab99d982574047cc37cb0abd5d27ce2de711dee8b07014a756866b59c521622e9cbf66b2bb63447c10c9b0ea72cfd1ccd57ab9a081d5bc4def251c3ece90362dbdd5dcf876aee05216d1486a5b9f0a83529329d79331523466074b3f2735025acebfc5583548ecaad69e56ed862cb5a156a81dcefe630964edfc4a897c2c351debef774b2a4f58734ee50a09854239fc07703c9e9d769ad71cc227f04dc5c55d2f70ba025721a4ade8efcc461d1c6171038755aad75e6de770bcb337285e10d7cc972b9050fae367d63eabc5b2431cb7c99e11a8687599e5a5549e89082c8bfa017535e2ebec746dfbc79a67237651410cb163ca6a51d7e217c63341d15cfe5fc9f744b51f46e5dc874427aa7fa3487d19999ac3a95ec2a273621ba4bb452b317d1f81a1142e8787d6855291a1343fe6aaed8c74fb7393606b0ac6b7effc46c931fa8b674626eba7ad08355c5ae7b5cd2523aa00ce110dc1f2b0a136252646308dfdbfaa133d48d06f75468186fc5bb776a5fdd18413396d8c0cc0ea7679ab85416484a4ac8418d806bfcdd0836eaba90e70e0a82e52026bba53dc6b307270d90aaf0b2743dfc8316c8edd839bd2929bd02d78da7ce3b00c2c2fc06c0c46569e66b755bd9aeab24f00ae88dfc58c7c8a8441d072427e7902986148d18084eca2e5cd45c5bf0de09da93977ad9ad1b38a7c74bb490e04c5820226125923250cb2c93bd5d025a967a7a67bf164ff4c4903d967ce1476a7726d96c1cf0b968a5145e604e6a5d5dd0f786d817dc5751fcbc8772f23bc7042c69cd67fe9c3c1a69ee75b918ad202a07a9debd92e23381179075a4d0178dfe43858301e7f3551debdfe8c7bb00d43981c0a737bdc9f3cfacbe62b848c7f026e4fffbe16c3ba8e5962515292bc4ae173b4ca519cb7b6f1a0d066e144f0c9a908c052fee8c8b5e4c68d8c7643c2ea69bc0cf5245c016806e2eb2ea0eea93b368ab555a36766f6b6ca585f559c76f6bddfb170f1c5fd8f64035363ee908046318846f75ac15e72fc62075fa31df2d8e81c5f65d57e2daf7166e34fa971b27ca6690b133dc90adafa6d6a746d76a85739d2a21a40332bb2139c2fd9aec28c3084dbdd9edff81873b44ea3a404b92be74e31f32a8e91a6f01a5cc3907aa7d9b853d8c40f8cc3fb85932e2862bfc5cfc02400ebdc60d4c409795241ba62e84b582d1f7a28324cb78c628ddc574cad215f5cb4e56f29ec2f9b9ac4d77785661d254bdea87e0be79c7b93a3901730b994cea3b3b5f24938cb1eca9fd77d989c9434a11d4f88ad014bea9b4b0984a56231486f65680eafbb1418e091f6288c68220575db63c4c313be148eef1bb2b3f968ebfc285f6e0ce852126432ba9c38245957ae02add68d248ba93ddbec83109a313e114b2d0c4859eeca0abb210bbd8642b608ca1a6b67c97bddda163f92d1aa03980d56cd51fab0c42a4fecd7950566d583841e7260b937775e4a1d272c02d435a4f8fe043dd62480e0d946b26def3e3340e3b9b3ee5d250ff2e45ce3e3d7402d7b9c8c18a4bdc44fa01d2121b95e878dbb01f24d857bdedac736f08c21e8fb7ff3d76331e401cdb889177c772f77d6e19dd4304ad51627e02e589ed917972eae60bf5b12f631f811caf12eac9dc9028f01d3f9d1963302ca6692f279899b5bdae7e2a1df83e1edf29ee01d11be5622fd77b5be3d7edf58655c0ce2c434d2088427794d63c4e89c54eb06964ac91bb5c23d4f532ec6ecc85e7194395a80d3c2d543fcfee629857749f021ef6cfd0be19dd49a93ca646177cd11ae85138c7727683615ac14d1d05c372d5b178faa79334a8d6038b721213335405bb3a3094a3336f6524ac907c71083a2700bc04f18efab69de4c232032c21c21937d2ad28c73288b74408fb3dd5e86a10b7d0da662618cb21ef65ad983d862fe98b31241a960a60f0a6dfaf13b185abcc88bfa52ef3e944550c2a253e739aa2cc0c0e1967297f09cfdeba45fae4b07da06230d59bf63a6747bc948eabadf4bdb7cd10a2056c11a16717932445097ccfd6064ed902b2b41150f8cfcaea74b749c4f04eafc1f0e63775644920713ff3b147ef6b101f982889842c6c4758d408ccb0385661fc36531318f7928a850e0d9f8a7fdb08213c15e9dc14e91357ddf83f7c899a79c8fa0fec69eb9b72ac791954821580a03c6ff1db7ddbbed9ab4b8032fd19bc66c02b13ff0f7bb88e452d9cb203845e189637d225fd885978e30fe61518d88ea9efb396c10f296a30768db98f26eb56be6523bfc6f238940fdea3f10e4c30cb3a618edd464b8a6b254e577b6a4ec4351eaaca6f3bb54684696f8a7429ccf6f6f27336e33cfab4077aebf34ed7e7b3ffa0a28b4dfe72258d0c8ab74e305008049fad40a94e3e0214d1a782329a6023d16193d4f0a76dc6ea89dcb367b42653c7256efd7383774fa4a4cf046dabcfa9e24d7e28d30de657b7187bd5b5e97d8b8c5de84ce11a5b746cb945e1c9852028df2d201323cce577896e2ab59fe6fdb39f3b0064f6594b50308f93931def6eb365257c784f9366a8b64a3fa3cf3a3352ffbc2fbe8fe561c9064e4a216966af88229a0722d14b468fb5875688fc90eeb9254584c894a65bf1d9744bbd08e2a611eeeed73e37ca0cc90c2e9a3c2b8ad2d31bc2e1011341b602a7b366d8430a77e505c2ece603a6904f225e482384308777d45773bb9b79b88700dcb5b1ee20b23ed7d4d7f9692c0d0eb4156d0a277aeb1c040b032ba8e79857dd6da8d4c2769f79d438e6331440fa390220b77e142a7ef2b3184a3f7532a8761c001c7b406698b62aaef670e3b67ea653a1d5589bb2bf9e90393f063d86b64de9fe40190e6e3c0db811da4c5f57b42389c12ac32ab331a7326e40e1a5d7f64655f846bc25eec150646d5113b91b872b5a77a6ae5c3296a056b3b58035b2798b9618b4bf55a58f276e5c3957048c4472ce65ca02ff127e4930438efce7f2d73f2ff363b06414193f6c9a2a449c06ddbc9bf9725c4a222b13253cbb8230a2aa4f962caa79cec7ffdcd3dfb6c8fc4c06aa246ed6062034abdae7a70c069b20b35caa4d340b570384bafee115b30741754a276cbcec2e16f40752c4412541ba5ccb7a2d3c1c9eb4406b30f9651430b9a2bab16dcb302f8188961b7c357dffd57fa51169ee5fe3ccfa45d8dd3a9bb45a8a26c62891139dba380feb1e32b3a32f33df2dc6aa7d4b31f73f440fa08d4edc7349b9e537e431380dba79d84b089f19c7deae5f73d86389a0fdd36aca6f39079fba27529e2d9e0e4b655dbc730e3eb6ae9d81663cb3261702ae152d2b23e04c01c062554865bf867933c124857dbe870805022200483269d9ac81e9cd800dd03019927cbcc0be826a4f9c27d9a7a13c82a7976aad27b892833dd52b9b181612922aa4b7bb1b8fb478d5f5b9184b8b870bf7df39b019a312f01b07b762a7abce33d9e9f7b30c14fea85c3f46a24abcb3285be5c12edd5fc1b3a42e07d4cef4004483ae95fd86999af7936535652b84795171d4970979bae0431b68f5f76c7d7c08abe4e180d3c6c5f4ac5809bd5fd1527ef66062ddf8cf990bb17c05b96bc91bdafe1081692c634e6d3eb7baace561819be1805daf72ff3f7f45cbb809af31aea753ffbe3ab42f6ef1732e3c84f29a662e1c912febf7cf4de1e745de1a53c055f420c227b706f23ece86f946ae41c2e33f52802153e1883367c7d2c08ec26c0a64587799529c9de49921381237f458fe9af8fcc127a28cbf9c6272cd7f4ff2f4b168955f7352667317db97e9ceac1b45618bca398f244e765cf6c82a3b5302212464af378f9c06225987b36baad1b56bd8ca9337c9b5d3c6bbe23ba330cd210951e44ab0ef3d9eb681119d070526e4e53710720152cfa5749f49684bc780e7452bd47d454046996a94e8e39855a31364ddd8771db95f3fe0b417a21369315d8ad2cca9eba267e915055debb2859b3ed20fbc41b7f57915b992a9469727d77acbc40979156c77f205a90d644b75a014e3afdff6650b7651dddaa83b095f779a6ba24fb54e5a2ad1e4038ec2514658a5a9ff965c18f0a164a22a80cf7de5c9149eaecf087b6bebacda158223dba61d6924f63788f5b2b545ef5d5769474f1356bf3b54d4c2a778ea24edd6afa2dec66cac62241bc682844cb2fba38e58e44768bbadf32efaa472f140e8648c758a635e3aa9ecdfda51076ee61f50d8820a4cb3b54c66e0833daf680828ee8ab8fceab6eb25a85d105ffd0fda57ba7c5676632b49138c2dd68ed8cea073bc736bb1a71c2ac617492995ef6b1e83b6be0022b86172c4d4b2d0400044d4d3ea027dfd6883381541cd9f676ddbe39da622a93b26944acb1c05911c7c77b0f3fa951a8bcde75f1ba22ecbbdc0fdfe97b11c0d746a270e5323df8aa319a1d0245460eb0633b018104d0950505f55124273134b7f240a01119e8946e53fb730dc1a8b96e15afe719438ad7b55e23db5bd0c132f520b2e17bcb2e226d3860f0b576132d6085a9a0d6514af1cfa9aee4445f321864f028e21a34d30fb70b11fac67e1920997ba962a69d60a1d2281fbd08d063a2590318da1438c63b23b382b64e575a01348e725fb3765145a4be1b004abf04e93b66c2dff8fb0978c5636cead167c940b30426cb02fcb292a8ca999d3fc4920d3b58f055201e5a235a58b043fcc79860c8a16aa15a7aade2f47d72924ebe13e0354af0c7ac0b7064c3948d5a04f86a86547eb490145470925490c57809673009d19b278f0a4dde95440314f227d53cfc41df4e6c758b9cd74d76d2b34c77b192387b737e4b36273bbc1bc0378584e19d41fd48b21954aa676f0ae68ac027d700dc6b6f02a62e86ec5dd64fb093799a3ecefca82e542d1a90ac6fcc7c9d97e4bedbc89ef7776edd0324650954f4e15b07d3818578b136cb48cfcbe3a2c3fd049221d055294c7b6998adec6993b0d19be1f51d30715734601feb91b3bbd66422aee28164658aa19be488fa9a4a052bd30506af25eb1db0d4b391684ff5ae8e1af2fcdb05328e30e25899713b15446153a5bd28000d796b5c0aa8d0d758cfd8af562aa67246f48b458ec6b68d49f2d8410e4028d599ab13fe5a4c83f3b4ec49fae11476f1269b7721ef1c808770ac336a1f3ea75cd8f3582ad377aaa09d5d97217f635c9b59cea6775e6c5f8d342b5eac5a6daccd069b62a9686a15463b0602c320c975dbc844b3be4b99a5a2b2ce638745d0291975013b1af132611a4ca53a2ab6bf52ae4714a650b18864775962e21b1b7cf04a6c7e7f2ab201cd9b56a0e93c328b39b8499d16a48e600f1197c87f7a5f2e420bd43dde8f63510de3cd6990349d93e02eae8ab6512c1f75f8cb6e099e7be72917433e5105d8a70a6f68582ba4915a1e085a9ce39551d388f4a8bdcad1fa33ba43674e6d318d5fd14b60918e712b1ca9f92eecde24334256ce477b598c7d4d0c7caa5a19ae993aad768b331094f0f21a13655cded02bd39cd0c99a76decf28adfeea7057c8eb8580f2af75b83331a96c8c0b028e5b830058e2966ab32606cb68cdc13a93ff9c900fb1de6dbaa2cb9d376bf4deb625fedf722589a4a96fe72bbcc3826983c8f8af5553d1c01df9d6d8f2c8e15fb47eff2b5c232149bcaee6368c4bd2acfca2d0a57d9509cac4051a19c3ee9f7bd8b248ebd9f67ca7558dabe8a776c8a4ac671c80278bbb0327b6a30d7324d43cf3e52869270a0c73b69ef6d4dbcfa6599b2406a15eab23dd9d5c4177dcc6ab00dac4318cf351c47043781e1aef16b81d982db1c63dee45834c9cc90b3e14614ae13b68c88eb60517e53fe56198272acbcff0d3ac1de0344df5bfb7dbf6723dbd590e21b80b734ed81ab2fedc7dca84b1846e3bd69a2659f8d8642ed16e82cf267f29f1ee0798f1afb4cadd050d221117cbd0daf7c3b5981eaab4b3a42ddda1af9798880fe9c7117d8d85935023fd2c2fd8159345b6f596cdc138ffe20e76f38b3dff5244cddde0dc66717827f8ffe0b92b92ff4abf22e837595aac8fc04cf8b4f22d888f7a4b4619b13581c60c8ca318f6b8c9db69c27fdd930079afa40843574dfe5444eba44144d00ecd4386eaf06c787a022966d48a15d6dbb2113b7b7141258d84e79fed93ff958618eff1dd6f370aed35e2158aa895321834d3f75396176865e552180f84fbbcf6dc0aac79c6471b7252c18406946f231f340e1875f4fc9b18fecdd03a524d9d917e84242aebce7bad7fa384d1552f57125167a64eceb77cf8523df244a0d9f8e710a72138e8252ae5c90e717ac35262adce1061a0ef11f09a0735ff509cfa540191d0316839f6e42826e0c29b553b92d7935f7cb6095609f162236cdc9fca714ffad3e4a80ab24ddabae40a39cbede001b7252def143c71e6f77f9446f418f04f0b91f4952724bb3447ac1f985778d4967c3f4db364d3736ab5c481b1aee5f274860733f2bd12ef94a7d5625363820b6e401811d4a611f62cea691301b485b7b354cbe7eccb872c5e1b2228a65dbfc78dd0a9f5b786c54fd24b4a623cd8811275a9c0f0af2cdebcc8d792051f76d44ec3c55fc4b612ef0795ba95fd32961d482527e0f866487ff6f467fab533f8e9877c9821e5f23a9c44127f0df31ba6d6976266173d8685b40f98ca3e91fe9f050e46694aa6c21a15495cfd37b5c06e90165846f90d5c03400b6d73c873c6a0f08a40031854aaf6c6e7aee153c81157cb67d955e1554321c41e8e6e5b06eb812de6343e79db11de55dbff63d195b0cc484fc42b5b400d3f32d8ff77df8aa921a764af109ed0dff4359af66232d1ede9b43b80db3c61002bec31553c60f117cd0461301ec41597d405033ca604b9e74a58d9b5ad3aaab6260890afadcd34a60ad1a82280fbf078f321641e4d031e6702e8d2e60019c311f7afa9d4513368a29bb93c6eb14ef1e6b44556077001dbc297a7059a28464300d4eb9ed6d162e7e47801d9c20bb5db224c6f89514292454aa6782a2a478a1e6b88093243abe0fd714cfb12e9380f1fd13610800e3649443edfb281","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
