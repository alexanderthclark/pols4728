<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"04bd5c790e7d8b3edaed9757146cdfa008b72537e73eb648ab04441f6446e9f339675082b85d34f6c8f14c3f6ae6034d0fdfada450ad6dcfd0bb231fac6da92d13a9f2ad0af63e6b8407df319f3f401cda83910265edfd54b335a50acb00086770f6a49f61a137e1cb0e46124ac873567920da1887958011ab9db8f9e0355deb5638b9e54a576d4b70b701ab61a515e56396fd0b9908f335a4f8c9782b9881652dce1000d007d032cff0a8574a4ac5007e258538520173ab09a02fc44f9e8634e90a6a9c75c8d7c5b233ae64270d1400d6184d2b27f8f0af6b8beb913670e69ffa1679df209e7ab20d8ecfef07b27302e4b6f60e0005094489ead7935049efdaf6d725f9417cd7a41bca9024f951b85b3ef9055f76b23c3414c1cfabaf8c40f26df29009c3ae4eef69ad33811a01202fc20e2d6194898b54c80fd4bbd0b94931aef7e73276ccade22b017eec2ef1d3b84d0fbecf72daf078eccb16d3878e4e082900c0c7290e913c26c734ab50203a22de211a04925c0e51a015de4ec9c044ec15a127a22fb50da22ae4b17a15c1cb0d1b9ca0f7fad2c38beec3fb092e55d9d1823ed9cef0210b7f86527add3214864e89d6387e8be1742a264997bb684088e67bbcdf832c18b62a5b2977d1b45a6af80ac1a5a0a3596da5a0990a320924128d50063be0884148a4d4ea6aabeab020b2108728794bc65b470e81676f352207759c553277c8fe5590956909d131faceff5c2fef62a2cf7929c90735450a18f7351eef9aa8181bcfe7170fd8345e56fc6b8f9498436bc995faf0129794bb2200ac22facad0370fa3cd4a857f82d4b646cc09ee7339162ff50117451180c1131ad4b9e99210956199f45aaea9b42ad01bc8e2121f262eb56b82726ec37359be55f73a74b93191358b94f5c090ed85941b1043a3117fc28ecac96a8eefceaca94a6b644f184e624e210f3260772bd4e4f763c43f343f1ce2aad073ca78b73ef5b96fa0010f050cd9eda69b2e7d7c7e11b0481079ed86bbf074f91777ec21058f8e39d845903f32bbd081c48017deb4b9c565ece4b55857f960de6906853ae85ab2ecfc14177a1ba864ccc3626a0b34ba45e63f2501bb58f1d35dc0c0bfaecdfb9e4d01405340bbc708e21d27f2a8533dc1ffb392299338d586d34c6c5d442beddd503d3836c517e3651e88a3bc50e082da136a4cce9525602b61a5321a1b106101047a4d94531608b88949f585be1401daf078814573f69bf79b60295de60645c9f10c609d51ad0e5e44edc49d7a6a8bd2e87dc1f0ceb88fdce1e8e8043ab405b3cf5b394031dd26a4b9af66fde22454bd3227963e1a336ca3779427108dc9a43df5d694f98167e3475c3034d38825e61f70215fa44332a6c51c1d3317ad738c604a87564dd5c42df1334457fcc7a8c331a1dc3ae9b9381d9d451b02f0b89341d23301d2a2a8b7ebbed6b8eca9f99e2465d831723320c9d2736602d7084f1374a981505d5c5b88dae9edf02760ff27472d8d76cda40f4fffac55404feaefcd98a40cbbe9ee89b67700cc5b2e7daa4e9a88d25346c6f93c27a200cb8ef095d4868310cd65f5b687d05951b151fdd2e7b6394b864caff93f36492d63e1c18595e6899028cc1a532807f6f658d84f994853bf0dbeedf1ffc1b71dcb6cd5e85640f45d699f6c47cb45ce0960bd7a7160743b22bec5f23e00dcda77215e815d2fff4c21b7debf0f881dbd5176ee1cfce3ea4a4e8666712ef4e3ea93bf841ca60542650120a65df11a503026028a3028e87dddf1a6fc61766ac496ff2360a1f886b900a10342423695616a88e84a651057bc9577354b40e9c9f8fc34aeb85d1ce1ba2a7e44045ef51634553a0ce9f7ae5ff253c1746fcd91731427e015225cd4ffd0fabb139774d1108055be66ef6af32bc19aeff21273c65940294fd4015947a87294bbce3f751081356cb04a358725eb3fb4908725af77466ee4ea5f62b06968d20698144e508cf61e67277b5ad6073f0c22dea9bb1874df6a2345618249f6cf0411f04650e286e78808d50206f75b90c92a42f42a26a656026aae08a3bab76f49f21ee42b2e0bc7ab5597501d7be8da2f803d23a408d39a9e05b5e2b36130612581eca2b319e7f010cadebcb90172f9ca27e46771565e35f493d15e010885b5108e574260e07b2041a99df2b382dc93f5a71e22109bccbcc0dca471bed0dbf3c44c27aa0806ae07f4be6df63b9fe7d00dc1ef7fc0a7e793b6c648b6d19451fb0e1b7feeb0887d8bc316ba083ed97b2b5aed5871f026664e9d429db7be3ddae76ef3c4d8f1bf753824c433f9f43dbed86052c6062811e6e3eab5548735e1831d837eda8eadee96421e79349ae18c784692db8d3a7d4fb21914b1bf4943ded2cd72fd9d1cc21d7f544f82b016cad90c9cb61dc2f69ca218a5e41dfd29e1407596c7c364c5b734c1854cb9031af4ad8799ada4a80e4818a7b278af51084905a920e1702258b8091f9e5706e041dfbe8d6d8313b26eed32ece3c417496277a0f66e4fa8598e751bc9d3817dbb2377a6d69eb135123a8399bd16201028fd81318bdf704544f2098dc5ec64d56a8611df5a5b00bec0d6c4b5e021822217f524ea773c3f91f065313ad1252f3eb0250216b12ae33de22551910f59867f53d93ec60bab2103685287ddd5e58572cc181b95e5fcbae415eee847e22e70594aa8d790c12d3dc6a9ec1e7fb267e7fd6915c7a8a0f74bf685b7de56e2a9e55723ff84a6cc7820b4c4f8579e3cc35f0609c5ed57182f6e028846ada8fab05830c9006fb14be5dd083429bf9ddd2b3c22c980099830f48db08eca3f168b7643b8fcdde2e2fee8c8ac37eb1abd52ff8f0a64464936baba5ff68ba0578c0ee03d470bc84e3710b4fe58bb43282175df889c14e67e43ad726ea1ec64064bf3bed2879e803608217f797fcc8a142e44b56cceff9d0b654fa0957e4f8cf79775525e3527013db8f9e89bedecd3f7c9045dccaca63c829cc4443e942d176a50845c85b4525eea50473ae4e090af61cb28886763c5d3b5b7dfe8d6d50e39a9e9b68e5421017ff3a8845cee657b581bf812cda99d1e767f7afd9c7b4c81f09cf71987f59a77f29198f3d1e094433e791432f018224535bebe8b1db168e9d6c217b1d6fe0a433f17186c5b26fe5f6c79cca70531389de3f1e803195f4b1a09fcde454c6948ba521c995b6fc3a5eb6a869426772b3baab3b6307eca9f02632a656c5ec94c518e3f867a04d7f7c37815a32fe3b1804259dce81d94f2ed78ef09693bba760780ac88685f7eff48c032ae79573f9d486987db405cf9e279ecd00b672c714d62d0cf9655b987fb648a368d954a3a369c87a93fb2eacfda9490063c9a2b4faf67c3016b04c99b6b0565c31548c1e149bba8728e24a9140cad51c1ea241a00c1b91ecc6d1b846a7447da3f821dec384aae107b428b5e37d187f18f56bd04a684f1141e91cd257fc7c2301e746956b950846a43b715d4a58837df3a407e8145b8a746ba676c8ab1781dfbd9f903bd85eceebdc6a7f7dcd226bc3fdbf1328ac066af7b3136a51181a39ac9c256a118a35d1f874e52d7cb83b5a7a73255b55850e25e2605ea0e9f3b7ef68a1dc8004895b5dd9d5b860833e62c0794af8ce0e8bb6f9e1c7520a146f1fc95a81ac3f273285a108ce01c4726b2791dd569a0f43b26ec35d2e3f0088c21c7ab4d3c322162f57cb06aa4d1016eeaa1a133e7ed28e510612f165ea72dd9d5ed6cd8c6c44c21774779fa069343c4b718d30fe1a3507fac0d55487bb1a610045a1c743697dce15133da1321318f2265cd7882db0190b0f216ebc547491da9038fe80b5ac7cf9ee3a5673c7134fe97135aeb9a5bbbcae9b4bfdd8ea81aba23ffc774aec5b08fd107a8fa01015e977bd1632b92bda1fecaba3d9c6ab321104b4c507385f741c1b02416221d449eb2e421796ed74090a1735e7404edc7e15cd2deafe970f608d9e53a5c4361289ffa93f45bc6ab5c85758ea8d385106a5da482be051d1893163583b920fed968e8ee4511f39f26961f2904caaf362d42f3ceac5808a557b590da93af994a6bc40f38beba546deee3a534f429ab43e4fdab4b2a32344a5f892b11a45d5eb5c8f6cf799c32c7c4c2702222b444b49d07322e0ec80e295ff99f88afe2d4fec9f1d63127ccd316bb4249ba6f3a0e8822daf7ea47d5d2c887a1bfe82ce2d2cd6e1266b0c7f5756fd94313a27e439b58ce0ef4cd7457843f73215dedbfdd28539f670da1a19b02629be30eb8919fab40db6106226c20fd12074a0bc05084661c3570264de9d27a10e643d50fd5446ed3a432c5abcca673249dfb81ebacff9aee9bda2ba2722db1aad2ee14056bf291e8ba97ff5454c8286237dc005b24d5284d02730a4668b474c4af8a40d8db444811980e8aab6ae8d29438769216942de8c6192b738ae766458887f35c6cfe8d487e473486c67ead119852142868577ff7553164d4e19aa08428363daa5dd1188ebcdc2adaf1c68e1f453f839cbe608e760727c568516b5c788862370d8065cfa7cff1ab5419653275651e4ab604012fd43f30faa6b08ae668b27576631b84cefb3090275b59737b8b87bba46eb366f96787b79f897b4acef15575570b153589f30eb094e150fa8bd0040052fea43b97234b62c866f76f424daee53a1ec243516c7e1acc532b02d81b3bb0134621eeff2e719a6d8d71614f25cb8b40f33df978471d916fc91eecb7ee783bc1ecba4fe017b6c5a97003e7f08e88f648335e0273251034e9f1156da7129163595c23cbb576decb2a433269c1d4e93026142de9dba188e8d2b1ecc422ac18b035465bcaf752a808295e5cc920ff52f4b9723dd5c366c1f6884faa4a0e5ac7197930c269cc0df9da9e16246e104f9b56a8fc3e59217160fbfd4c31dac42ec6bb0e4158f3243d2c8cb83f55c24dbc7a1bf1720bed123d5f1262144ad2e04c8e183999ab93548a9773410450c4e9b6b821f9dbde848029f1f3a764098d9e9dcab226cfb2cf1e72fba98b5be2609c7a79e657bcb563b8b7700eb01f2c76b1260169c55cd384c16606682d4b71843db7bc106c3d55ecf3cf6e120e09be6326f69938e70bf21734ebbb4fe90276f841df39e3c051c35c825bbb847182a8efac3ea359cfd60ed2cd643b187d6737bc21a000f887b2781e0b6cbb1982fd84544d5341b37d9a4867915e5f319b552a803c0bc2a51f89dcbaf4192a26d088d947f80460570c87e447e96490a8e6f529b308777fb0b1f8f61d6ed494d51c7992f9a00ae7627bf7d093920d970fa49120032d97a25cf4c8a5609f3aa726e8e81c1ba92751e7b478b54f5a46ca2b41fcae8da3464e999a8e5c0cf607d5047d9eec96a583d86bf649bd785c8d6e413eff6b9744b2f1b61f92a744eecefc320a2f0a5f5b5d1451e032e3e41751a40ea19e0278c86c4b7bb807d498dcdef57ec0aba76169c06d5a58cea228862b79fa32e61a0127db088b4e9fa740e4ec4f58f0368431127998952fdf8a77f4c44deb4de93ecabc34a7805597febda4f8830b900cd96530f8ac2fcfc71995af53b3697b192e0e3c16e4b3136252a51de8832b1a350b594c3ec03f5d0559571deb4daa4eb83b485baee35b29212ddaa9ab8d57109cd481c724d5ba9a0ed2ebe7c777a147e401ef67761aaf7b69bbe4e34d145f4a98e7dd98bbfb22d08c8c49542651a7174c2dde239c2f373d61dcf2d12ae862bd7d524cdd4020db4fb19568c57d07a93cc04583401311b00712216dac005ab6193670b981928d22ad7bddb51eb348374650fe94270984ef26b9a9cc171884b3b220fc00789f089cfb435f530d2ff94452980f802b2a8db9967aabc0008d826493e362a6230e5c8d6f644f42a4de56563fc99a26578d7d9cbcb2f5945d6873a2c186dc9e6f13902b3c7b88c77933ced92d06dc75e22968f44b1ad9c728b7f80c24c7fd3c2da0eef2defa93c2ca08455e071d25952495356301032ce994277cac9cc405e6ed63a36f15eedee812292907ad68b1b289d234e98ea20946fc3cc08fd78e9e8ed5000c6dcc56633844a76ee2b057c73515540ad4a0654d70eaf29af58edf7f4fc368585381dc2a737ca328f39aca7144ed6179e54acfb9e37143f60a17cf9e90f0fcb35e825649843a2c69f0f9aae3ce3a55f23172b833942b7fed3ffb2c5effe28104ba50bb77340d09400d475fb915743fd0eaae29f600d5713be1f302ac8b73d54f2a6c71815782e7c42985956be19a5d51c4b83501d38441d9a0d37ae4cb1d499362462ae65b64dea7c02c8459b57ff9782c0f20c2e3a35b48cdcb9eccd1d380c1903bd1424ef669dc8d8764af3cf94f94c95ae98787dfd4a4a61c196c4e25337c568db89e8428b0a23b1b4a0ab24e86b715206691403e3877b6a330bf024eff0feeb376534a086d435f0d9ec709a8a3f66019fff7effb077c944100d4fb07a0e6ed9db1edf1202ad051ac6029135eb10fd72de62532666902c42428c8821e4664ae66faac9a871df82b54968bf83b5634773ce59c5a0d5ee94fb1c93f1eab13164b0531ac031370af85107b0bf7484663a8bb6044bbd213605870977ba8bbfb1987eb1eae3084b7f1e110a40cbe683b83b276489f3a3cf47d9251b9226a4c3b8d3ae99b4fded4d93f893d8f3a912f86e1cbac705bcc2cf05586858fa189b24e3b43645e69954c96ce9a57d3a314916d6d5d7d1f2c51695d5cda28c3ffb826807c6cf9184fdabb729868ce9e57b88275fe63d441e42e212dd311805c7ac85162e5aa53fa7634e739a6522cca840cccb033d865be8eee82386f7109659d451f4b8531aad78b1591021ba0c41c1fde54a366ff4d9c42f462dd4d2362620214566d6a0015ff2166db745e4e46b5e12a3a0a57629beebd20dd7024b5605171fe6eab5fc6c3d191b9d35520f7b6d4751165153773d463d17ca690893f3b98ec99c55f2d867d2491b915c63734e6499c88a19bff3ad05915a515f62f2ce30fbb67f7685056682685d2bae6f46cefc50424283a068e684fef2f6bf851d9e15a8081884a9902d728fec9284457a35f769bf7811cc469384946d1168152fc8e1fc8bb630932849199c5fed258b15ba28ecd00b33a319fc53871dba87414573ec8b750ef90258ae8da3d32b431d5926e0a44175dc4debc93209efd3bb79a9770a3c80181e5309d311b60ce9e1f9e99cba49eef743e05163ea4c721d600f59ea7d285f24e62de86cce99e80236a1a01a409ac5c5538542bf8d955106a9a49a0367ba429c667ca765d03237a18c150a0f4d43893fd9fe4cab063ba5eecb6d3716889fbc2630979a029a8ccc66a97acbe550df1a780db97585117f0a9c1deaef18bb8dd009723c2cbd6ea4ec02c39b218a4a784fe80013fd7765e587395bf5a149ee24c5ef7319f5f4fecc3c43f6aee4fefecc010a2ec2aecf4a557687ff68caec9b47b17de9ddf4ea4ec9fde5440782345e4e9dd704d81e6fa161204fdc9a2de5112a38c242d7318d5b65c62ccdaf228214286e1b6d4f9895cef08e2b772e069df744e3c0b5e56f2378047bb119e02a59c85afc4e7382bc64fad567c5dca4f97d4abeb01409f333e10f5da14bbe8544f11aa9929575473f55b74a2bbc8a2e928b4ffc7be52ed1c14107a49124f891d73cbd2718c156ecacee3b01204da8c75be363bd7639eb930d7ed08fe3a2755cecc5938e705f4b6febd55f73013c742cfe7ce31b018bc9c169b32973c028f7e7dcbd90cc984ef9c88916e1d33f4160ad88a2f251895398ca0a9a191fadaf032cff6b6ab79ac289f55b71deb7fbb8d3f754fb2eb24fc3c0dd9b2c549fd0fb365b705dccf59c086a7a8113abac493c80565c0c1790cf8bf195bad3a7098bc6a202377f233edb964352c24387768b6ad30f8ec7882929836974293e5927d0363d3c0c4bb0c27a2fd4fc8e0ee7059af2ff3946ccc5b59c4821548847caa34c92b1ed827a105302a8e4808acf757463f70eafe091cb9f0cca0f7f9d663174821cf0b8be53d15d5c285cadd0c26710ad23cb159b6d2ea1b96cbe353a5ca287b713d6b3e68d358b8dccb31d014f92994f7e9b4b590a4bfc0e0d2386c80fc0246def70aec85ac1eb0e658231e279e1f74925bf5e6406a5bc406140185ea01130d409d3ba4d3b988cda72f5e956e98ad5a39cb982bf8b81d72ce3c2ca826a3de01b2bdafe6b08c4e15537a687a26c10a5871ad521f78560b2979851c375e83739ec46744a8a464b81b6f0807eca9715b82a45e192431dc1e60c343c4ceadea244592aff9a81f03da8d9b883fcc7beaad1e97cd5d1669a7b367f7f2a9eb8dfa59ec4c4869b477b5d2fad6552fda71a9d7a437a563dbfb8adba8b37a63384c8f0af6e6bad5722d414d6555c0a15cfffd483e65de498d571dc44a59701ab43dabb199a510c152d53031a519069b66d54d6cd233ffc347c15e37753688c98f2565ec567d0bfdde5407e100e1b0d56f7880b1291f9acfa63f8070e61471ef2870eb4b39ed7b619eb7b34b0ec533bf6e45355f5efeda93da537272a8c3d3b18402a876770771b8fea34fb74c578dda425285e251f991bbe0b1149553bdd6517984e0c942b0c9dc3dfa4ee024344ec239b2b53b4219649438a0518631a1c42164704b30793b2032e561c28d08d8db37f4c9e94b09ca954869146593c63a65845e1c0410b85e2dd2b0f64732132a4b492ece42ff648733eb146758d6619528688d8b94816448c3446b6f2a6c08124aed83ef1140e6795fa76dddecb49c1ab8773843d565133c05fa93e84117dd2929d1c0609d80ca1724eaaaa3eed77de4605bcadbd851f41c6da13412ae720b7b128ca1bbadbbe41b9adc69451aefb4dfff21d6b3baf2ac54fe7ece9cadaa9935887b15273df6881a3e61be3ed2178625314b92578e95c8eea4d81973687289846ce272eba5ab4dd4fb7dcca965a2b98fb43785e676d27ee3a302b7f01b8df1c1763d04f9831597647444135f871b803cb0b67989d90179ef6605a32fc4fbbf50d79c6766b4825dc5d07c09c8b1878a2f825b5cf58680aeef320230453b44fba0e3cb9795c6e4293a361b7ba019164d232f91a864dd7fef8d985fde48ce5ed9bea8d4e3447800b5bcb5bb6aedde46fff1bd8164db140c11a49eeedce0e70ce8bb6d78241b16bceb2669663656668956536ff8df448112231fbefba2124b62ebb1712fb53563d6bef8ee07886c7ffeb074cc94b6b68b1447d4adec336afc36d31c374c9ecd1e617adfdb929d03a30a5f4a6826241198253613178a104e4f777986bbbd8317184465419815626d57ee84e771dfd87d6f4812ce1c04d2e4c65a57b9d503b009cfc3813c1b78918047873116905b287d03df2e9cc6bdba5ec73789497b1e6b97749c4ae016e7830e532008bf02ab6daf5657079353f2c1e863ad6957bd828b9e7511f175ed9e1a7986d8e5810072b66e607a95a50da4129cc7d5a7fdf8778b21b67d45f6013f29a1d496568a05331fdb2c34b344f1fe640330d25bf90b0a5db7f76d9e162875c0d3d5501f5cac782dfb0892b43680ac0c4d392b7ea84851c5741167f82dffbb742598df2dddded9ad6a1b344381985ab32636a258f963f5376e39e49e5a8ad14299eaa2d0aa799fe1bde66c83d51bd58744cb89c8395259858c26828f01a9ee1373ca26bcb3afb2b256963b9965e0373b122f5b655abefd08b30c403e6b7ded324d850894eec7dab4bd9df909d428edd1e438646e2aa13d6dd4029909d0329bb1a8bf7c3bf40b0aa0d7fcb709af4d4cdcd0a6b3e23ec423481c902a2f760147d7755cbd88d7a3b00d92cac6fdd6e4096025e25ef9f65568f86916bee7f62b632360db51bf1188ce1619efe4fc74de470532250b11a7842f35b8b3094576cc2c44787402036892404ff5ea0c5d698ba711fea51a9cc2a8cbac05b0ad6978b25322181255a8a4789a7d4f4c55b856427e8bc7bd02b0dd37947d1f106004ba0aa83fd6de9b5b9b8c21cad012568b8d89c59614860c61d9bedcd199a1d4c36cd2140d69be5b7cef66017a5f1dcc6c4d77b769666361dc9b810bf4c198dba81432458c0ab87f038f99c0dd0a14135cdf0a37aa037cd3999e7da24e1d348c3677fc61ca6cd844134a70183ee32b4c972a68d941d7d47a5f705d5ffe33f9f658c1c4e1ef9c492a380fedc662bad80a556eb127f26ed9e81a7087432246f5377d37065aee271c7ba4d1b07b753234749e3beb7b0b1b4450697d76bcbff613caa23cab050bea33b0dddccf7257ff2bb2c33910d27c622d3c99d0a4b148e57d557b4764687c5176cfd8019b00ebb0ad4f9aa92c18ff5191e37c930fe2950aa9945e1b2fa54e9dca3b46e87d9ac82c753154c6e11cbe5fd746cd54fc226c95f1b995108ec6fd3716469f1d8605c75b05d4212fc329f80913a70ed62a444bbb9b61326bdc6bdd06cfbe98f1409b93d476125fbf4a064d3ba976032fde8d088dd7e29bcaa6a4c762791a3117f9cbbe30df2010db27ca5424e76cbd67989a4566678eb1f23f55842eb8c9d91c72a108c57e62691974baf53e2f1240b48d6226a34307d26ebfa9c9da0060b60c0eaeff7d69ce5e571f9ecf779cd6ffd29d4393aec16eee0225614f08ebead951036b29662c15e02048a842f95ef25c1df165b72206bab7ebac665eab123bd9feff5c18d987f3572d489381ed80749b6a4af027a00682fc72ee96e25291779f199b57189246d387fa2caf49e07f270ef871445be2797c2813e248d438353b7fb2254121a8d300365cbff7c41b5768e46ea0478875c3c1813ffd657b42569c3af07c02c01067210f5af313b3839ca96988d327a96a5fdb1b2a4ecc5211dec19abc52c56addca1ad52728df056fa0639e98637f730dc61ff64601023d1848924c787d5b6181cea2036796a170f7f1e653cf7697005fd8c411bf7cd17adaf617046fe1d2ddad3240b9537563947d3b44d81b61064f20218b34cceadea49ef0aa6d921915f296459fddef3fadc3229ab5e0929d94665e5051cae316111cfb38f14470140d0034a0ea64ca935c4468fd411b6895e320a289ccfd6dc11d6b5a4723ff3073095957a89dcde6b7c82214bf6c1dc62db344916554523ab4af97cb00084eee9b4e905b9f8d16178f38bad0ee085193805765ee62de28b51c678c45c4c966c5b4389592f38c998b0d046e9d5f83fd8c376cf38ccb906cea5458377b266ec69d4764ca745aa0665a7d6623fa8923a0d74cdb86125f8aa3ed968b8f079ce84e9a6efe8c35d231c1c6e356551a00e6c37194a23ce403b52ec907746e2e1bc99a649f2425fe708d7ad2a39ca35d8dedf0c3303ca522d4cf07dc01144a1ab6ceb8e6b22527e1c4e56a3f2673eb25b565303c6a88324aae9fc7f2519b0b6ab929905b09881417f009d29ea1349348885b5889a535084529668a4a3755e5ab0bc326fc0cc5d0303248bf7a1132c5948c635e50ec61079ac5f8b7dec590056495891f20693113784a5ad3baca4d92bdea64c0ca92cdea50be787fa75e62821b46ff6ce4e13061d5c41fde744575d0d7e922514b7a5dc8847ade38e6aaa102baaae69bf3f7b920baa3a7dfcac116b29d474caf1a60139390a5da73f1f4a7400b3763592a3b9092b0be3adb55d0417e4e76319f99ddbe2868bdccace74e1a7ab13c749c0b71c379afa4dc80e7bcee7694ba98d0c7fccb02f5c337a353a3bf20183a05be9ee4ecfb84e13a09a657b74693f41c85c4325d90359bac676743b50a7b3a9316cb4931145882ebcffed1e4832a112b9da74a4c9c6b5944f5af05bd6e15e1617e432041c4277050f4caea5d2700f72ee5271cbda07c2f32787a87df16816ff015f1188d68a90679c44fa5fa11e0b6339ec9f4c2e60bf32c6782693f37443e467d3cdf966cf0c33d4441f6391fc517fc8030d8659ee0d9f21644f1a90d1a2502ec7fc0a9893cd80343c11c262a4b0976e6de7387c174f7863937ade000b533568b58ce3ab27d78d5bbd825fcb71c6e18cc33afafbf356ad36b622aee63f51fa09e07a37f0432ce3848129fb463aa2528a8dfc1fe10b2d98e2dbaaf52b7ec3bc1657b48acbd4144572f7368a94220e0bc6095fb6536217ae248ae018f7198de7f822df2c4a12f25411c9860477a5f21aca1304a94f0538be77d29fa49660c7c50e5c1c5615f8f0285c81044a073d9795390d3334a54b4608c9ca05e0586f7f47c65dfd1f417393ba98501ad22ead973ae05f3b718b8f88727234401aa8784e098eea7158677fdd87c64b504524cd160323d9bc0c7e38b77814c48ee03409a9fbdb6b7bd8bf8dcc086dfd5b6c85ee463d7baf3f947372b27f832c9715db4e0c7ffbf3d6df4357d2c51422d2af89a4ce951c2e8e4df1f54c800c67f345eff73cfb66a156740ad2a248b1cbaaeed10630d914486b0aab3b31d6382f0746d0a282199c914cfa3a109b165575566e8e2c75ce16c825b830800dd213e2bcef81eccf60e5bb664a80fe040b29b1b53825da7b547e66b24fd0b573bc78ba75028643af20de5ee800bb114e9bb10beca49e195905567087fe9eff4b158f9ef8a2222438a6fed00eacbf9f5481af9b662642a404404680771cac2bc37e91f5f9117f45bd529c8b429b02b0f3a24e1ee19af1592595cd1ce308ce1c6dd65f8a055c25ab803b793d1225d356fbcfaa583b529a15b498033af127d4049151fe2416484103c6c03fa2456e4a452be63df12068a022fb00e3b1a23bae43b73fbb1be4ff238c71c149936f2785eee778d9b477bbd64c982f10cb7853768ffbc8c491466e3de7f47b99b779bcd446c0e7193f11ecd66b705e7ac4e5d49702dcf539d64530fbbf30b218ad537f843feb6c3698cbb754d8df77dbd9335649f0d07dfcf05384962aa85bb968422b497226e1d357d77291f1f2c900130d94e492b9be5ea1bf44211f87760c96f1ee2e57fa7435fcc19f2d0fec3248f4b5d36e06c5c176b630c3911f00376806a4d4eee4059fbf76b00672334041678585bfc9b5833486b22d429ef815434584d1a14da0f7fb102e96caa0b89cdc2c41ac41fc972470c5082a63080c529c9f5c62019a238daf5f31496476bf2b110824c6d909cf1f82de4297ac40bc225ecaaa2f6f821bb3bf18d856605efa5d5630df840c9cebe8b6f9817f57381d05075c7c06a7febee2a57b2a6b52b9c0ec01ef3a097f4c6f01f6f59fdf9ff49923298456155fbab192e57d1e06a29c1e367ae4d1a98fe97347343de0d319a70f7410e30b2215369693146fe2cae9a5bc3bba4ebff772920344330bf95967bd70f25ffea7b59bf4a26fabc371bf487f1ebde8f694c2fca9892f44def5f0159e602430e545d2f099ccefeb25ba591aa5d185004ee951612440a67d644c8b93b65d97c4a78551dd6945eee1bc68b8cb245cc57536ae13259319ac02fb154568922127d26f594ed0b832c18aae551edf902803ddfbef63275e0a2ff08360b39a22eb89c869f823bb1a4cafec2bddfccfc7bce44236dd273c350f7dabeda7205bc6027412f1d704d6cf9fb3aa1ab57f42a528048e7224ffae3dbca480ce8e72b0e8cc5c1e8390b149608363de6e9576db8674e3316ed80c29ff25fb98de628dd181478adbce2e9e988e3cdf04f0012472b1b7ab476100d91f329b289584d4c9f9d77df1de3dc2b726924d599ec612414f8dcadfcb9b2a5d93346b196a4a5b016f956cd51b4a80a76a255892a7103ea64ddcac7b2ceb23634323d997a3565e2d1b7f4107f94a2a57fd1b41d5b2bc78264b367ced6a8f7a2aa66c9b8d8ddb2f285001d119c29cb26b71b7e5609f927d3ac7ab717eea08fb38f6ed5c28c433e6e2edda0d364347dd12ecf4e73664565c4e9052d61984040b4db0333cde86f270afe058a364775d786bd768736ef991ef007532755e28f13a0a866344bad89564721b54b2c17304da315759f2509ed236627de18ae2431c23ec195e9bcba548587c3e2b712592118035a20d0fdf9622915e54a9ec39e1d2f93d32ecf81ad7ee14408cadb943de920dc8a021c9f64beeb8852ca6570f7d595d589cad13ab1a4e01944c601f12b9e7cd02bc5c5ee0c1eafd6fd0280c6ae637043a65e971eecf31d8a444046363c79c164d853949f922141bc16e19e48cc4dc4ee0f8448c88d0482cd87df577f0659a4067ce15279e7116cfa814683de81955478247c214a9249862ed1b8cd1c27e68a71df640aa89746924814ae702d9629adafbe17ae78a71ae5dd3d19e82b09dfde5c62984afac4ead89d6d1412332190f2f1d94393e8674488732ac17ba74ce828723efd8ac8c7578eb9ded8436a6e14d8f56b3b9fc7d1839d34b28681f238602bb8dbe7c07caaace3c70fd392212c3007c9bcd26d95b87228f050993d2c83ea57974023c1b2957623fc6a600f8e0c3eb5f6f1f1789de6d31cb85481e307bd16f89b4c1978db454f97956add92085fca27c1fc5f0886d48c0c50836af57f0f52a8230364390d54f56459ceb2326d0c97e1627b553affa512f76c1ff7c89f3b0f69b3708f94cc106a5455f6d9a1da271f766b6f70f3f2b25930e6772edbc2d98808f9259f16c8f2d9c2216d46d6b479670b7f1d277f5c0b0c87bc57e34ac6999029c213f6e0e32800dedb0dd20d8389f242f61853ae97c635c4bcf5344a0e1fd68d2c89b8bf6ac5dad5d1d5d893c00208309aefbd7b88efe74c369c192f382ce001988931c6a1b363e7f6c7d5eea564240151d9708f8ae017a0dd4308cd778b93d2e1d56ea8f47505fb29a35b0dcf072f81d67f6fe8b8d47332ba2a3d98302540233e0474d1f82381d581db68e90a66abe8abafcb471593a63d15c8ebaa876cbb0bfeaa87a600c2517bef60d7d30b8068880f609699d43e82346f04bfe0d29710d5044e6ba70c8b546912fc20d639b37f27b788ac1ddce24d67675b133383e9ff35f9b1f551837834cfbaf9fbaf137b101c910e1013495e0ab301dc92f8051fdd2fed8bdc7862fcd57b688d0f73e413fb534dd1b6c8102044a183ebe876e568821d48d96677cd7220a7ddb1b6c76becb1dc36ccc8e8c28eb8a5118fc872ca0175bb9f5e9a8e8fdc7d34e4fff03528f611ab7643928396bd622abcf8cafdbcea82ae321c18f977334084ff5e7dd60fe726817ec575e9fe46dc1814225da16431ccbfa5ad714a561e4057758606a78531182e92b109ee175d3422c04b03a4bee2dfed19115dc9b9880b9dbe494d8f61965e9cdaa7b71c30f3d09546bb431b700dad714a6badc8e53db445bee97e92cb6bf0ed91301f6d7404d141375367fef6fbe081c5ec83deb470a485c6d898ee30709225f2e6f4479b234bff79cae3857565991788b43c7dc11a60fd9aead817c87399f69bc04e3732599d95bc5ed9fc9677d0ab6180ad672e6ecec77e3af5ec901ec015a5668cd8c55d748bc833533e944589a3882aedeb2104b4b4c495047ca552698d4c508643e3aa29ac80769e81e0cf193ee9a4970e7000cc5db3fd2f9e5e28213a5049bb893b5ec877674f3e682320cd4e319a14d9dcd436fd371e4fa0f4f1561cd42bcbd9a709b0c21b0a38c0f0c62c29e729b004567eac7fdfb4beb270c23a8842d62c949cfab0e7ebab8bb22c8e149c7f18c25679b1b71583a559437e28819d56bcbcb5b308a9747de41e8deab44177173591d62fa21b07ff65ffd7f346bb1d180c666918cc7b2b64490103956c3b77630891c28623a0271aa1464f9886d5ca064b7bf405cf9e8dafcd1130fbfbdcdd68dfe0b922f74be6ae4287c1b7841b65ecf965f682c19499c5a292a7115a5b3e4ea87a5f13499e49e71cbcc461d9a133d065462ea86db3340851118c385777d3003e4291d378db6b105ef2b8a6801d52a0632e765c2fc5bc64720852cca9a54a01866401ad861aeb767f834fd22c3dd49f31e394a74028fd205a1df1ac0740a206a1c4fc0a85a82e2f01101993549fa0d8a9bddf8ea71ec0c720fe84eba7edb3901923b9604034c60e7a13ac86bd65a5544bb7a0251f3dfa63662f21e34bc884e7cb14652acbb89b0109f3671bfbfdca9184837f6ccd48683e2a3f5331ae8698be1b9b9a80060cf1aece4f829a96bb727dc07487cc16113f062f34c7ce0298ceee434672d7250ec85fd0b0d9dca77ca9dee40f8ac0df3b70a75185ff1ec0ae3a5cc42c5bbbaf6fc443ddeb6d6fb61a7fa5e530821070b97a9c045338575e80d828752a0ef3d66009918db1726e11192d53a56a0e260c98593114febf8dac7f5cf55abc02f3a4a24ff82621951bd2b74ef6c2a474584126a3cdadfcef7c237d5fe9b4b1ba0ca7f5363d241b5769cb27c6f58c82a18d5a8d8b2db797a7c5858bb1d586f1884f694a781818741cdf099e411c1320584834d738de64ea315559ea4d33addf7d8d9ec2d8da07c51626ad14db14ce5760810c9428761bd11fe96904082824c4629c9e11f4fdc4690e03986117b7425bf9ff05e6233820993a95ccd28fff7e6a96fb7e68d094f710298eb63e30d0792bba28faf3fbf17d7d2a7173a8456b05aba12ff697bf4cf39d3174ebc3dfb206180e3e08e57f3e372997ca999fc070c6520b8b4df343fbda806dc4e0a81375bb9d01f5cefecfeb2ce9305a631c74f412a77c2e78b9e83e1f0eed972d4dd2ba40338fa791dbe789a92e3be5e685457809fc9e6a1721bfdc87be04ab4f8addad87ed27b551840f762e14be674c4a24ca7ed4fee738d01931e6b81bd54765b00ebfbfece3eac58d4101855af27b4a026509b452883109edf1f7bcc72d838f1441268651307756acb36714af532b4e112a57485e54bf926680b7bc9ee71845a8ae18a41eda3433594703eb7be473dcb76d2f639cf9ec4fb902ea2751a9873d86438264c6dcb709c4116a44baed5a27231295683d74336b059c7594f850790adfd49478c5ba14c85ca43fde349c03b5159bd82d6226bfd418a94d5dc38ea1dda480408e6d5ecf333e43d3acbb087fa4ff6c8632a09e3f4718b569482f87faacce2f14d870a1e8c78f49984df442f4532d2711dfc16b8f8183c50c03d7909ebc584d65f2ad3343b45bd037a4c27e196bec68e39aca8582a76dc4b76cbf22282073cb887d324b6f8471aa0951eaee2fe792e142e789a05b6e969ab9451800e1a678fcbfe5f244c4e06fbfcef84b032e11847864790d2d554af6ae63a6e20a887bf45a58575a96aa609f02e467e604e583c8b81dddd7c1fdec10f139ca823b4b9771b8990d52312914122010a1b2898f61c9b62fbe6600104af888ecde0a1fc41b38873f6d876480a6a53906e400ce497831a4b5c56baeb8d5f4f8b2bbdbd072d933f180384e066624fbab5f0ce3e5fa0c16221cce27110072fa8b7ddf391f30610f44cbf085804b649d22bc18fcda2c36cc7a9e2bc5abfc38b813a06d82a2b44bc76af0ad5363f59e80a3a0f6312127c5a5e1954f700a609d408d43e31bd1b1170f877e0ed3dcd948b64022aeb69a6a8375b9599aa70580e4f9652e421be94a19eee68f6dcbf84530462e4b6aaf41680e1e69e03d498dcca9fabfd575239805c6572355e8b88f72ca3775f5a4b9801e281bd54050bcd250dffd101ed3c0ed5c5742aa591b3fd9d5b7eab6e358f83b26f59f1c4574d29be3493d34a0e4c580629de851fed2a9ea11cad2b899c707215419d0b3bb75dcd878acf2e9f6938303437186692f35a831431d26a108e67a27aa1aa2ffd5ea67a3dcc9371770cf260515258f81861e99004820611832145d40b61de818c6f90a9fe77a43ff3933c49d03eaad9d8cf7c852dfb037a6908b5f3b1bbb8c9f1e757a83dc3cfbef947611f017b43ba6bbe14addb2280b0350c9cbddc404e03f44809e81806227557569d162fcd3eb6419dbbc7bb2ec2e82df1ef55eb29bd2ededb5ee7217fda422aaf62393b7026d5a47831c9b3897e2cf094eaeb90ff21b5f3ff34cf4edc568e3af5ba4a092b7eca15608ebdaf057100d7ef62c6150e025e2fccb3364cc363afc5b152f8da341a79d10a6c5ab64cc9928d722bea2017acaf49dc10a7096362122e37d0354140fa0a9f847f95bf06a2dcdeab0a4735457639bc9f80f83d2c581b6d987ecbe1baa9fff945d4a0b602e67bff028ff28ed2b1b8e244ae086a6d8b07128f0a18e0a2b2c6d4baae9de2d8d0dc9dc8e42add353cf8e27974cd631aa58b3399aef8aa0aab8a4db46aa3c0424a8108640c5c263875bc0347e2e3f1c00977746bc7ea0b63bfe7897d786348bb644900e156aa190051ef7c9c3def78dabce2e5b83b17774e594acdb7b3ba077a8be699ec794825472b176a1ca9d6e8cc5a23888de5cbd2c5bd26c243d9c1ccaf28b1fa92bee3ad83bea4b3b32bf356c8376839199c37c076c2a8ee62cf817cbd499bd7216dde8312b23d9b0859c5a6ada201708db4eb1453aef5725ff6c46a50c36e448fa09c08c726f59e2644600e0a184db1028177ecc050d6f9ed8866d2138862d65f5fbf8827845a6d50c64e44ec2333fd335d881f49419bb0fd75b6b99aa88e56d469b00f90e3f098540ec95d7e600cfd3894627c8ca87833e528809664eb0fb971ead5ea1260ab417936d650db5b58b2d48e845bbb2c6ebbafd89e673507164abde769fd52fa1f8302a7d9f2d36d1dfe87a8f690b05795db04a587cf9bf7534280c8d46311658ac4898531b29c90524ad5b2ca36171a0a79a72fa98f2934a8b0e282ff448c74d91d413e6ac9bb97eea7f961fddec25a5b27fe31a9a199a18f6aed8c22f63900a1def40f317fa823316be165ae890800f26da935236f660559a47b60266ad5ce1757eb70924bd51866297c10633498276ac7798332b6b771e3dcdcd18b98c7417b8aa44513ab364b8938c5903f01507f83e5e249166863cbb82d10d221c97f5144fa9df90361fec51bc895cc54f00f82d7a9a5d186c718be7b050c6144c64aab61a93d425bc9bbfb74d9e0caba19c0b4b6b1a9b96c889f8509823c11f485898b1950152b469c1b619202abe765d2c5cefbd728cb20c0c4be2234aa43fe5e674b0f807cd222f5a7dc83bda91cee78b5469fac27f661b55785bf027546f223cf8855f80104d74c499e4d74c505acfcf2398d530f4fbc60ee3edd7240bbe27167765ff86e2c22669792f5a2c9f97002b469d051ac672952c7cc375cb1a4a9cd68bfff8beaf2ce09cfb3643090957ebdebbf124e61ce4f5576f920ccbe00f483fb57c82909dbe10a1bed5b4c1bca1f6875c6470c9fa6dad56de1784d2023af505ab75350912c4c64d164276eca15f5bdc81eadf95698f596cc869db506e4bfade1ec68b5b1509c787d3d90e95664f42f749fdef7f2ede023491226c874f002344594526c0e031e92d0cae9988b3e25b539fd5347ca75426f8ce5ff91cc2702ee8db6baf9f8907e62480ae3b28a7b9cbd75d16372e7150296a0ad7598f56ed9d87a99884b2234d95115d9fa290402c650760a1f33d810fe4d9f8da30c4147e7d2dff7905754933b1963160b9647fddd1116c2607a5ace875bf30a052c4900ea64291b6844023079e4683be47538964bad2a6fc634c39f639ff31f8","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
