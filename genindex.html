<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"370c19b4c071058eef96df993050cd06ebeec4441e7c7204461cc70f9ecb5eea809f5c2b0c1cf2fa59295440e562573e3ed0ac11190a0125581e3b9b25e7f3bb5be133550607fa57f3e379d677594adf3f344788c221bed133f0645451cedad2126534f784fa7ffb4458a399c11312dfe816368f0e86e57ea79d82628aa86cbb5d5753e928e0830b60d109a3839fd1a657ecac33fc93c05c5d2a0cedbe5890ef1dc04ce7f917bafab960ef07aea6a1085d22ce0086ba3acd49eb9c5527ab19710cc9bbd4dd6f12913754f6be5f561c06db50404655c7c85c6d5249e21dc911a125ae6fa7156bdf60e49a7a68909bf2a0556eb7d3d8e455f59c1cf912ea40f728d6081877a0965b298bf62610fbdde69993dbb25202d376d253d658df026a3e5f0b16a8ac37fe1c9eadcbc117e286c1d291058c6216d5d68a8c84cdb90d6b21c7f5bbd919d4981467bd709d97e5d92974adb116e3c3f80ae707e9ba417439226967304086d4286e8e512aa052c26ea4a1d5c9b5608347663762a306054820fe51bbd52c33548e06d75e72c241623e626d8a97e6d6bf8d0199778f15dcfff884cc3de27e12813bb140cc1fe859e5064470f0e76d07f0b5330019b51dbb5b5732d21bb64d74b9ac2930b34445c38eb75cedfba18e4104e88e6a1c6c7713b18fb1afa4aaf9ca122abdc399e6f23f2c054e45c7bbca3569b4368175b37084e89c240b486a3da87ff7bde6d4803e9b2634195daf8ae6f4920a287ed670e7994296469e83a38b148b2803e13db84b9de8b28054d78d7b86f59bd5ca22893061363f9eb9c754aa8a40681b81d0d50eb174ddf92f49927d8a163c8abbba3b3c265546b4d0f89bc0f97212d6cd07fc47db3c87bcc12cbf637ac8b2f9702a55850402e5bbaa3a84e25b27a2d322b6b0c05f42a31f650e3e6f37d3958c1fb93c1ede99534c42bbde20a2e01ee181b0ab77bb33a6a52b953af7c707cec98f0f6c25d2bc865225dcccc87c6e041e28920a38e501542065b16f59b65e0337239bb6f1bba1b417ecb4052d9b2530ae56a8d191587ac0d505b6ecf4c6b45adc83a740ae893ef9b16d959da558524aab226ddb8f14e9406c52004f0550e839cae463c442a34cf3bf38d5fdaea5a49d487861bd8cfe853ecbd3eb2aef8772f37a81977484def5bafde6f00d4d426f87f4801533f73c584cddc3b973dda4eb7198278ba456248e5933026ad17b5921a0ab33499038eb394928cc2782a931eb23eba87a98dafc338d7e247975f6df6be06571c52c7a84e4d8014ae6eb1a772e96f56e19d3d7bad9d9ca69be7817b216a78cb48a244e30ea9f7541570401010e981bc39611ae333c8adc593fff155104454a5e42aed1994facfb472f85101e9ab611cae7bd9fe2416d9aa4040fc5b5d504034a00431600b8239cb4c2b473ff81cc01a5d93b85dd3abacd00eb18b808a23f56ce2184247754b1f257e461618cc1ad5ac1f1e43719b67d5717b979b25eda6ed755d906f8be3423edf69f4056e2fbfbd479869612965a7eb25dc69def6b95dbbd2f6d3eca7009af51b77d9ebef1045469a90efeb15c1cbea3513277ab6e1333164a8eb86984336bd09d5d6c63d783633c291ef11c839cf6542042fab3dec561e3f519066872dcf636237974aefbc54ebe423a5c5854d7a0149430a83e570453da76ae6b9e4a15f14cf0f0c88f579d5d0b2d9d909363a3ffae50a0b3e3a3ee19912c35fbd383b9dbf6915eecbd4fc547696bc64f733acadce2b368ba72e7e475b4a17b48ce27bf629d1cb373d01057d6343c63244e8893ba298db265470a394da7926e1b3de3c50bd11678b6f2dc614e24bd3076485ce4f2bd6cf601be39491c93a21f246bbc8d9f493d9e86d5f30c05e61a3763aed22ae22aead3a9b1abb12972490bd93d61a813fee9e0406970286c1825f322d769264141f76752a7eec4a3e188ec70179a35eb38942a0fc21ebf53020d91a018a9cec4e641d2f24e318b80548f62b86c570c6eb458141dba28b172aa9892df96716cbdacbce4e4a90a137d237b308bb5664992f83b2fca5a855aa7f3bb704a915dc917793a6ddeae125964c9409db05ba263a15bf0a7fc675e6521b5cfedcf882647847b7bde8c9d62c6798730e660ca8887c981c99430238ce622ba8ddac35462b063619f82d66fa2adb558cf03e89e295b4a6915760da7b8e2b3272d863320957bbebec1465232f4df36d86fb745a6bec53ea2dcff35a475a73696fafeaceface89914468fc057ed7b80b22e06cbff0740e97c440329aba5bada82749f26a8e8709fb9a0b14892b24dd9d6634ebbdda1c897fcd8c4ef896a73f3f9c685441f10d76a9dd2a7fb032cfdbdac5266e6f3d6ddaa5a61dd6276266978dc774c0d0f5709322bac2011bfee0fc99803aefd396fdad57710a6c3fdc222161df5c6db2f2a3eff280403e13655771180546a81b8cbb9cc7564523bbefc33eff720c4d734bb4f77171e55b572f68f18b0e5c56aa29aaffcbb2fd70df2f2c6cd0f438220cbd7c29533f799291206a6768a51ea0dd9af90c1ab63fe6e20d9a5a6cb3e3aa44d305f442ed1af3980f2de53f3fe95733d4b40effa8cb5982edab88bdf83ec6f3250849d3c6fab3910d4aae3b7c7c9f5489df407b72ecf3b5d1377f1ad2110bf6267cbdc3c48f001c66d3fbdda2eff07b1b7a165a633b8b975680c8674c73621829bfa5f64ef2920abaf3c1a541b7f49b37df69ea8100e1387ee0d973f354733d9142c66268bb0fab682925013ac33d80300f474fc11081147ba1984a6159d07f9d9ab423facba164c7c87338927452bfb03a00c280d7df56e681c93ee4d6685d663ac744c5af5400ee308dcdb167e8df5a16bd0488c484acbb230ce66623ca7cba013ab53625540dca602f0c4b792cc624284271366001a97901f8196b935cd8d726688ef6594d5075bdbeb9a32d19c51b995ec25f1a1d1a8da4514ed79cfffa682964306ed2c0697309c3dbc21de209508e16774754a9443a17d64f2e8f95b61f41092764355c012246370e280a0f5ef320acbfc16513147de5350f3a4fd133d08b8932cccfa8c9d649f99ff9ff7c857dfee46cc7aa28eb2f1368dfe49f33cb93f682d1d42f7d810be10a24dbeace9e9d51d63058d0dd54391da286c30ccef4c9adbefb4f9a2b14021404e2b797164e18d1a85e0f3b26210813e881b14a9300f9363ae23fa6f2eebdcfc76fa3fbeae0ca7c25ffceded2bf07f2f2a885f0a22eb90d000080e1c8a02bd92abda1984eb0a48aa02713ed108947f1a7a08402abc6ad25f6fa8c791e734159786877b8da9bddb0e7bd7dbe8cc87c22a6c5d80519c4fd7ec9fa7a6821d3e769434636b63c31b222f199662c1b76ff36d39311e7a1f31c4f30e268ec7ac6a43cc37ddf8fa40b04306930957ed916fb330d0bf4caef6c700d7148f357bd85a24f3d3c8a273970272c375f25643f9119e9e38ada3aac0adaad8b0e0ef6ead3b5f6d5dc1d66e7e6bc801a2d9cea88ab8e847c10f1dabfba88e59ecbc35b0d5678d6b8538c895745cadbea742fa13775ed6f16c31c1c3631458e1f3a8086a2cc22ef11c46a810bd6b9ab0ddb507191c50541d28a7dab88cc29fba4756de680409177b6918fb0f0ee6dc09938743af07d2aea4f5c447c1a1e6366d258bc9a30408df2f4ddf7180787d9a436a5ade335c0afc84b6a03b97e1a8a9badfad952ec9f988f4ffbbbba189f05e42288dcb69c08c86ef9a806bbb398fba8ae4ce21a767966c43225aa48c08fa266e171b41a6022fb5852245383c54646a8ed1838166eb0c3daa3389d6166d328161550e3571935d29dba2b808559fbc3e516572a0871701ba890efd458109897aaeda152ac8f9cb6f08805232917f19e1e264a813ec99766392f546495408f4760d6712bc0829508af8862ee92c49725e1d1d26226822c7bb9d7567f983d260d4d7148cd6586d62d82114101a1ff57f85927ba8c2443fb31b01499cc05d5e6cc67035936bc841abd23bf8f9055f37235ef4f3c6aa7dc81abef55ebc76601f7235b59ea5956cb2fa5b98847e0c9c7ebd212c9b742fd849c1e809490b0819f222fc016c0c0c058b21fc49ba722ff6f9f135fbfe6a0e6476671430a0d4b57d120bc398306adf66ede53382372cf6260ddb8d44f86a167ac0dd8f8f558e51a47ef153b44e6eb9375920a74dc594b2504d39beaa696c52678eae205805e8f5041bdbe326251eab186200ff723396ee4b019940d48dd2d5afafb498b505ffeda647f45fcdcb3d56488660bd7039d4a61e22c4b255cd7426e9c1cec92675533aeb95fc1d01b3bc34fabca445106708220c9e929cedf41bc0c8fa3e9a0c8625a2f6e893edcc1be4335ab3b60f6249509cb51e03dcf60ddb1306011de4d3dab0d6abbe1fe69b2fba949bacc6c6068e62d24207e4da56c38c5e943ec543e970401483092bbc924d7a3479b91ee057da0a97ac1107d7d358fefe5741a53630a2176aa6689471d24d13ef278e5c03ed9607106fec1d4ecf12ccebda4b2b9474d6ed933fb73a74e023a20a0d240eef5a23d907cb49f7fab037d1f84c2901d8edbc193f6439c412fa4760802fc597bac75c7dd698c3acb184cd97cdb3988a2db8d3f6c840d3e2ed03e43afe8db25363028e0d16c3a3206aa497186912a991dde314a4a8bb672383269a3830a91f726812d10930827649e2a58cbe90dd5a0f80493b289b6898fad775780b83cb3d8680b6476415570d768584d73de5d435266247bc73d05c5cffdbd36ebce27cc741e6c1c157ee2c257c157ff2fc25aa0c8f581710a29184ae564f2469b38c97ee22541dc5f215f711018a793b0d6118fdbd0b85de85270f0b899b2b6cfad676144351cf7967819216589008463336a4fff21721e303e0fff6ee446ae50c5ddd3bd7ea6219c8fd6d0142309a7855a09f32b7a428d0daac56f98fd01dbb810701e177aca4f65927bc5a820e0da7b62187120d377184ae71d8abd6b0b49b17eddd9234b492c348455eaad57ca420b20339c39844979ba595d90c70447eaf976c356d3f65aaa682d987c305f4a3020f3d650618065e1100344405a979f4d25407d3cdda2a3a39079d530390a84b4612ef6b3a1cd490294fa71ceba21a33ea0f34ef1f013a85571aef38e2b272a908df2759a162782dae318b47015703f8c3309db848498907ccda3296c507717a4bf7522e1f1e6d7485ca9ff2111b230bc3500c2fc84fd02b6e36aee798e2e54d4a3d2e6192dc3476ecd98a5d22db155e4ad0be0dafa9414eea1cb827d1d33fb7d1ff42713423b13ebfab8fea9d0238cd0edf72b2980dccdc7ef9879bc9269456534cbdd8c414936dfc76ebb632d94e11a471448ce0cfeecf16e61eb7cd0d18292092def439c6af1d9d81f96a37388bfec7e9e570b84b6c9db689e22e664ebfd518d499aa7af3af4798cf98e253f7d3caae4bf9c88ce3e8ab7d3e0e1507047748ca0138023cedba163e76c1d114945913492186e6eb175d7e4cbec692ae46c895a488f76cedb06e3f824f5cc8d25a8137f0ac1582247d8228b78a1e03c05b08f91ea871b4eda68fb007d62a873c1fe5d504939cc5c95943e4e344f326e8a926e5c149124aeb2e1d06ad5aef106e3e3a9d889375a747da3e60603100d031789c199845ae8266acfbb2487ebdce8685ff6bf66246f01870dd35dd665772c9d138facc83be9aa65ffab82f1e23dd3104fc2d46801aa6d30d2452ba6e81ec0b3ec7c53f8a1c2f0e38ef32f26504ee6b45e7309143a755804c5ed925d199242b8f4f8ef029bd1ef2e084ee5a7194ca59b8aa47d1deeb10947eea202c96c31c002d91e8309d8f4932d7d567f929cd355429bb6ca738ddcba6dd4a7b0722e7dcffccea4437e5cc378d6afb7d080ea0f25770663648d5fa3f01b6648e5cd7c50b29dbaa7f67b7a4e6d5f696fac6c70bdfc6e45e21ca72c358068fda448b6f36229a8cfea9af774f1454bc606e495d341a79949b314c3319e7c6fcba7fcb92c1cdb5e8fec9fdb18002795e4922f5eeaddb83aa7a3a19e3919252649aade8dc628429f5560844caef48750963532a9665f2f39b71da47042a91d571b6ed6f69efa0da539aa66ab4c1f3ff034f8acd2c9547bd07d3c9bf737b6ee8df94d4ccfa81c5637040d45fdba3989d823dd57b35205316d2f2077ef82eb1c27c4607c12f1f2337b4b6c85a8ec5fd218a89914d9944465ae6e112fffbe08b4c46d4616f25469ac0a97a3332e27bacb74f1754be527b39777893c74b7ac80bd658e5d97722c4c259840010e80e53db6d31918fb003c4fae3bd92bab547bfc14054d48a4f2d199f21fc19e686dc2444943b296e08f1016a0cd0c3f4f93f6392b339a85f0962119343b33fb21f1582faed8ce4d14f82fcf7d7b8667adf78a28b4603ba3381739a5e11e2d73d9cb0ef9ba5365afa8d57442fc6654734eaa8ae080bcd30666c2cf9d5c64084d0f22da2742f0a55be99be3f3e477c610d6ed876c76981c153afc422bb3dc48f0f74deb6f4c7d74266e95d351ba851a168d28bcc3c9bb3711c0a2cb28e7d7519591d458def2e36ac8601816b3cbe57cad718d79cfd1aa0ead246b5e54703605df54ca680a3a04c6d25823bb82c55d5d6142983ca898440e3dac9ddfb85583afacbafe37e7ffea0f395a66c9a04cd4b1931c417bbe6bab14340e0db0f2ac283b0980ef99011cc59eb55524096e91ce1d69d1ed228ab9f75f5d43a1581d3d7fd2e9a05b799ab5994d2b7625cfe8b2f1885fc90ae1b059fc66fae59426ffff5531aab06f160dae8c89e104674a1ac05a2519b35ba30aa45f85a48ffc0ad03598da69a034cb99d38c3b40dc43d6501b8d0bcaf9f0482fa63244655e7117e87484657e28c4a3d69dd77256cd6667e0bbf80177d79b95a7a8d72bd03aa2bb61daec12fd955acc7507a6bba823611174bd138ab6bcccb48445fb39d8a6ecc5552fb45e2ccb168c49d57129d1cd6867efdb472a24d62c9c3b7edc32c5afe66836b5955671fb2e40880bd6b739d2832bcdbde9a0123ddc05541f530597d07f6d58636d0b5c0503f40e3e6cbd2371e5c320a027da7f015d057f85b5b78fdef64c43ffca84b9e41c8705fd5ee6b1c021b6374f41ce47065bca308a245359a1ca7f686b2556ac22804882e75ba5e94d1eba0a01750846854075be82e9d0c13c735b4ec21a1734b4a8eea27301001ef10dd3351cdaccfc2e3ae8ade77283f80369e01d5e66469d62db37f454eeb461d57d93a8f6f862123326282ea40ebb91c1405a16bb60abbbd66f9e0c893dec9ec34f4b5ccb905c5948b85b4debfcf0efcbf11b2f0544aa32e0415a5bedc93278d6a1cbb72a0d0c8fdfa78ba37a219549b70bff8b531f06796cd5a7d18bd70563d160790ccbac924c5a7bd8b91dbc09b10550ba0ad3fe0b5ccff574f62edb1fca5083a7988603ae638cd7b000b65283491c7fa4b0cd568f717ebd0c3403413adf571b1d3b3beb07f6e79b04717be7223b62d1aacd29169f60ed47d5d0acef256898abf991936fca18af0f0ba30ba1dc093f373803b6225abeca71b8ee4b3db42695b73b1a81363900a2b34f02c2485cd6da9610d9ed2d0435018fcfedff3efd41cf383e4bc8e9cd9e0fe94d13aa064e73a867f6bf204d458d416992358f27173b990473851563fc08d18b5c84c7526b05094a6da2f9c1c8e1472a349ff22f3611e35704a9639d907c79337b5dc2785ed8c5c473e06a2a47ee36016e591270dd99ae78c6d4c406e0a1683d8b7840b846fc295fcba025c8715f1f43a174cb8564125eb4eeb2fe3254a219c1a819cba4a3922a9a227975fe717ce76e3bff97b5228c5e51440aa0ca8076c8ba82515d9e9293555368c249609105668dbc205d8e3e5613a66d90cc95e6198ff9dbe53369f4d2c6308e44f4b9b29a9b9288d277a1d27aea0434a50a9a8eed0ae1a5bc809ba12d92622a9a9a949e116168725e331f3cca294551f5e498b046edde39b40e3ce85f224fb738892d234f94405b83466f2e64c2e8877ea6d8d691cffdd0fa1e631fb14ac6eb72d0fa83df349ed0998d7b01c0ed00396528d221da21dc0ce25d44d2264a9f034faef572ec28cc687e4d56d1fb05b04512586e057319430b28a40b3feca7d9dfcc7adb6d9cd320e7253b390260e84d578f550110632b5780ec383397e9934db3b5f85dd85c7e71943c644ab97dc0a5525632ce77b07c060111bf70635e45001289f5d8585092fe453ca1caef49ce8b04368bb1817a58a866f5eecf9313da676e2a1541bffd2b7a641282d3b40cb28b55e99d50a6e11cf979f558136967df6fcb0fda1ded8f8d1e3da4335dc136d7f18e8cf7bff3c501dcdf2535e85f8800d392ab67327b24f76bb9b81436ba2746f2f17934efa292a738ee6db8386f06959d0bcb987729539b8647e346b5ded641c050e5000a61e21fb50502324eb70b18801c3d8e551d29cd01469097747dfd40a5938ecb2654cf2645cc4ac116d33754eb725cbda83e199aa746073a80365134b928fcf8d11c6ab0097233fd5bc203fcbf3b6cfe638e95b84a2c2321b2c6b7160ef0b72f3d7dd599381d297c609c00509cdcde06986de6b445dd92837852d486ee6db01ac5f22a15ab4473004a9b609d7c2528fba72110564b6bfc9a523ca58888673e4d414fdd4fcb6381cab489054f146588a7e1e4212eae736edddc486b0b80d45f023bc284dde7d93a78e408c48b139b41053a8640f5ec2291c0991d389f99ba8766587f8c0983ea5e0b2349f633f03f4c482e58e83ccb36c1e7d5f748659a7d177a7bd3aecee75cf09b5f7ed49041620c59e3d7e2e39cdce5c04f84750f82ede6656e46b23b547745fb24eb0840ee223eef84652bbfaef21fcef069dfce3aed34f7b8383dff7401a45362528cf616bfbb27f4dbb08a76c95af8496323b3308f559e244aa4a5ca35b62c555c2f2ddc098ea45c5e6f6d475b671c36b71c3fbc6007fb2366eeaef853e55921f5ee717c70ae831fc4db8efd8c7d9b32d23d8d1f1c0ffb1082301a72af56fc348b88ecd134ae37e13004e563f0de36b6ad2fe781dd4250f24a9927ab77711df149618c068c8caa7d01a0087ebd62930a7f4ed4c3a4b1f1e3f0e9fa7f3b59b728b7d433011bcb7139ada65c3735b4d8cb5a3a9d350521d3ecbaae6a32fbf33fb803fbba3b4bd786f2443f71bb2a42c700ee0a2f41203141be719181d21cb8cb1109a9ccc5cee984361bc39fda77fedfffd0a9f4e7af505e7d5b753a6f6150d58a8964506676193c719b18cbef9d09e97139c43adf690088be91356a82b46bdc6170e0781e813b0a06e4aed16c9a23998819919dc8d0a88eb4b06e772e89ab544994cc21a4f1a4bb8a3ff03e4445bec8d31baa4729cb6f250cbd0428e47d13d57a17b2ae7c6285ee9970d23eeb1549126246506ae9c253a094047955212d18d673adf686f6c7c051eee489206cbcd34f0f71cacb721e147c48f86f186f4e19f90336c0bba09d1b08fdb23c3140d359a1048ff5a2b9722d11be7911f6f45133b1723a5457f6fae66bce1c51136be43b76c1ca48ea206e4b2728d5426fb385b3ff1c4d3e9133aaa14e334b8ab28a8df5370cbfb76d01f4c7f8710efcaecdf08794fb814b636e87099d133a827326da06abf7c990b3fedb28efe1915387726b3322ab72b220ba2e9364545fba8fd0b2245995a5985d7ffec43c47b3557f625423b71948f6685db2238377c5e141f229fc23f5667813a890933977dbec0d7519fe0a92b8f497abaf2306bbf1ad6db3d75739f27a265762cac50f00c190fa8dcf9443d1c4e4823192a238f916203225d6bc61ee6445888f7de88e0f0757e8cd2c1cdc85c5678fb628b48586b4cbb3748310781fa164f9a9384558222fda340752290adccc3898b5dc96be221f395084ca772634915de9802da3c9f13414a1e3c5f81db85e5fb7180388b63c4bb59381b743a23ca2398590d247cd0db19103d96001997eee523e29d6909199f5394011c8a55ade145fd1d6b22d98d61ed96f18ce6fb2328906f19e2128a2dfbd0d83bcb70fee52352589965bc91514c9525ca21095fbeaf85391cc11249ca3f2e509408188b9c447453ce9b1c92a9fcaca152b911dc1d76f8ee4063c5b0d94592e32de4f3a50add77bf9a8531a85ff58800401beaaa1c8576020a7468c1a5c3bbe84b40fafbed1ef1ebed78c7c28d311436742109a2a651fbcfe818dfd4d61c10bd04fd78ae499b81deace7ef47a26dbc1aed28d85219c48cb50c436d7c4eeac791e54b3fdb4b9358071e2d7235e10d3b503b50e9bbfc6c2d8e4f120ae1fe4e6aedf183eaae720af1518c1305cef724d6469bc1a9f3525f09fbb87dae02021f1c31733c6a98bf138abe62cfb4215623ddd72ab1ffbe2ceb95d53628bc0923d1f9cd2418edd86c663fd9943b0e5cebc8702426046af5ed08a5d53e156a81ba0782f7c31ec6eba04d05e22c105c36baa4b1a250735dfce3b0fdde8eda8fdc05cd11abaa6474501fea1834dfda743cf962b30495ec8d9562f82881589a67c8519aa639b7ec134e5ddece64f5f4b87dd8e909b64143575a6564cec7af40cfa707ec9b2273e93e9f89c565163ba348f5e2aad2c0b9436ea1b4372e81fe2e15e388534057e844bd93a9bcca931d56d819a6e594b52ec97ad5cf16052e0da7526b663b619da9d8b3efa3cd4ec9cd81c11676763a5a7609499cf84b3fcefb75081aa2527d6fd871decd66ba0edfd0397a265fa8d981572db894263324801cfea951e4c060f42d3540ab8efa4be3329780ceb8860303acdff878791f1af8f3cb329b53fa1998dd5e8deceaf012bd1731681943c917e3458c21144d91b62027f21abe9ec59a63087207e6b5901333e574ca4e108ac4de0ccabcd4b9d7d2e00b7e63d9baaab6a7df47013b068182d3e018e88bd63264e23973800485f7b4bf0be1930ad29127fa02252904c0a518b03e67acfa862dd001e9787e9b2d6651651c140df19ceb25d2a7118fdf1061bac02c07e51326766056650085fe8ca17fc3cd27edaaabedfb3f22d4fb6c6a80e9df63743a3254c6c703719ba88099bc51f8995de93fdaf44d6bcfbd020adf9dfe247d99ad6e5e0595d8674845d415cd5313efa5a0328006a10595e2a26789bec61f1e6273b3db3b41a69078524bbd48b2d917e48b4c58e301864ee045aad0fbe614ca4938735b128cf3a774a59b1c5f83bf4bb9c2319d8773e2ba4ea1ea9a07c4ed9851f86dd5a66a928579b51cb16df70d9f0eabc64a5c1fbcaab964f69286fe06061b817fd8b07e3eaa92a7a5bfa3d175fc25b7cfd4624575c2a84f06dd5cea922b8684f2b205292cdff73775827da1e4841c4bcd6c0fcb7e70806bf3bcc28e003746120561015f408531e9269144977bced5a8f00b6138ec0ed9f0d64c90383cbab0121d81db3f00b7b12ea0801e7010c4d79b77236c0b32cb7acf8fe461abee1ec2a1472314013af9704a81736df889c912c564ba31e21de0f2a66e2d3d740311c322cfecb665da7f213cfe064b527cd90c19518847f0e2db2a6fe43215c9062333fede5466449cdba4574ed7bf5d35c0c2825f1f101786fd22322ea21d4204892bebd80112c734daeb68d58c6a99abeffeb1a6c53ef1f675fb115fcf4b00193f74d21b0ce26f39260e42abacee1d63872034817faeb826bdfcd7800a99fff70a307b8152ac976dc4302796548ec350fe58f4301715a77b60ec8b250476b8b1c41a44c43648e982df88f28fb0ff771a2340450f00d9c28607552f543489d2a2adfa6f00960b03d4cd9bec225979da6a2dcf7483d2a3fb688b09e4dfda621b7c8cf48f8d909e020d7c0aec5404c2465c8cd86fb30df591af48fd98b64100bc2d1ed35dfc16b879666c4651e8aa0cf225d0c05dda68b103cfe1c0993f23840c3e7fad6935fe9a352bde12500dba64c7a432a90b53c784c88cc5770708d2d66e261fc63853da8ab1364a075963abf0ced062d1d9a9a2bbccf09a62fb4ae99776d90bd30f5737c03161654e1a74709704d305eb61ce2e63adcc1d21d2f29bf0e416691402cf8ffb47cb5392ecec0695d836f2564871e84e22d7f344769df6dac17be207b35ef6fd56c15eb41c0461504aa2c740f34223b072fed29a87cc9336808e7e21195f23753ae033e40c0b0bec274037feaf771fc561d6cb5a62cb394777dd78b9f8a327046fb5079c126b8e4ea67ce57446ad06d37308f12c5a43121fdffe283563c8f46d8702500dc9d5389ca4cf0375445f4dcaaca57dfd8efa671d972e260c4b94a20cbae24efa8ecf264ed33caa571d9bad4286a8f7990cb0f470d9d2e11cec8bf16c7b987ae933fc8efb53380dc15771791002642458e0726238756ded5966c2f7ea57733f09e5095505ad347e01e0411970fac6274775765ce861bde78c6aa8e3a68a19d04fad3ebf8db4809770a0e9e3701528abd572e539daca6b472f26df2ae769700ba4ef8d1b861e4d0bb8f912f79b9e958f41dbbe33e869f81103e100391eee3baabf31e9ee76b024feb8347db5ab9f63b6b86136ebe0856642e3cb84ae9c64d28213f493896d156b862d8e9fdb23d9ee92feb57321ef1f105b2d49cfc406ba13df5e7990e38a045127f2388b36cc0ae338a461d2270d0b69bd5d7e7d041fd5a2cd62e0bd4ab450c12e13cd3146522700eabde88b931694cef1b29fab2cbf6b6b7bead6558c4d8aca9da56c2e3c20bccbb6198958a2f3947a263903dbfb25936d455939bdab64c10138d4423a4f27a8a413bb038637e7d118fdc910b019db95245eeb04fd3bfa59007c4dbc536685ae5f45b710ff304563794e2b4f356c0971a6985dc17fde63e6a00f3649dae5282c17faf7a95cd04d0a684c3b15683211a11bbf42b2c87af992a99b118627f8edf0d38627e9b402661291b5d09d6feae2fa2805656d3a55ae4d93d02d876ab87bea4e684229198a7299eacae8bed9aadf1ef88bde4f8ac9d2ae90f3d9786c1acd834fb35b235fb199f622f7e9075164cd67e8cea23800044258276f4376da5f7041517e9214237b87faef0481243917e68a6d7ccaed5f0be10b02e2c6fb9e91d3857871592a190c0be57f541e8bcf86e09e6412e89d9cf5ba90f5baeaa35be5d498119b528d67052c7e53843a9797f696e1b8ab163187f2ae36350890bcb33c20c268804fd2cc99b422b5d71a1f8bab3d9f7ac6919dee21a7266207f414b4fec8da32d43bc9dd2e0703a64dd099b01b39cf66eb60c76715062215dec9271c29a949216cc289fac69c345d8c0b01265df15df98560eab0876fb4bf4aa1fe25194ae5ca7f9ce0d26c09babde7f68ba553d2e3bc9a4d55dc99e63f096346842b1cc9caf187599d9bd4e4ff9b20e96b9a123e451715e04839e9a317c884ba2def4fec92be8d0033666d6268ffe908abf61edb45dbcde187464d3af3125c09fde7cdfa2b448e800e5fef845e2383d407a7fcafeb6f09a42ca39e96c4238fb7d0a41de408b5f5339898b53a2325f1d3f49364114818a604264704beb1011e3d6258de5ab4b5bbe99e86c33cd4b55865793632bb743e8e364199585b301d1bf2cea0388e200c887f12f4037ff2db05dab0e1d0c40d00156ae058cbb90b78b92b0b5cc009e390d9a2bdeb023bc0c20493943b1b952aa942cb4b1781018779f8140fb3f39f15daa91852804a20b1e625e99bb0d0eb174c4551e40fc8c1de005f16c476291d1667019375ac05444813950d2f8463cde678d5e8b1199f30e5f9bf381a3f2ea67c3d970982bbd5dfc1e1fb44397912d1e809e24025e69d3c0474dcf7a760bf00d524cc99e42a370f4034eef90c8e05c1e2e720e80b01f5d6f9197a31080649849ca1c513c8a6f523c0c1de89d8cc5864eb62fcd4dec6ffc7345f824394c88f4bfa7afb6166d7e37caa7c1b982d16046375c8dff734b46fd3ae31cb997bac9f70bf8afc2136a9a4ee129d16a20b4a8c347e31c87fc32bf89a981fc988b610a697b3f10b9808189e03d3d26174802a949a337ff9c63a85aee50e61bd80b1bec5b47da820d4bf480508dba1e1b91d0c5afa7bfab541085bb9a5dd83de0962d9524b5861382802198327ce5c2aae80f96bc30d0850bb23a9e449adccd0968d545d05857379a0c3977b3e04fd9ab96a612d073e23dcbf22ce9d1e884dfa9eaf266a3981858cee523101c8711bd9e0753d8f698c9ee4b687ec758de246baebd18b7a44360838315f8c7d699468ae525aab690e37a5f4dac32f0eb2c37939526fb8fab275c557c5c9f9be5692965e2668f3bd9ddddd89313950b5a5757bf8c28175c5224785b2005e73e26d589129a706bb640d7e6c16a3c985b88f4b4dec85add891d3e6402c0ea8315058eeaba6eea2395c3fffe310cbb443e56b4dfd0c395a25d6280e5b8e79dc9814a99a0b3a4b62a21389b17df78766828c95e323e0d8fede7c1f572cb203daa78ffc934ecb0802c97d3e95a9ba654b23c5c56b63ac1e46885ed7b3e41487b5fe86d48380c7d8477afb86ff1798fc289212dface06ffca62ee872dfbfeef3c5164666eb59e3b36652bf226fc7b463fd879c8fe3abb1744db63497cb4ec34b46f80918a0e5ca65030bd9c078672de4f0313ee30a850362dc41f47e8c2832b08c2ad24dc3ffcfc4cc6bb96c7965bd45ff0359e6760f777992852fb807427b81c91f3719fffd968d33ae2f0e1ac72668636a737c6b16a2aefab752a66e8c99ff141502efebc9f21c3b86749b21f275a68360e144a897c5e5f0d4623ed98436a5def5fb790a0aab43fe30d0cd6b4727d4513cb48f6c62a3adf6742d945bee05e52a1d0f369279fda512d520477a0288cc56414b4c8f16ee5fac24654ddf93e173d64734df95acf8c865b1d56a737b49eadb54a552147d0b5c5aded3727e09680f5b3c0d8bbbc22596094d6fe735ceaf7d98d140acfb7ec714213fcb3b2d3b5c5ce25200520dfc5cdcb5e38fdaee7938b6b84ab5e0768a0432689a173a73234aa3f345208a8b3e6410bd5112bf8f9f65719da6b61e0c81e192c025e10bb43209f100c3d7897e8cb039d92298e9fa860f85aac23156be343e2cee3a396cf4d196c645509e15ce53966e0ab00b1a4f9f0fdc7b74d4de5c6977f67b8263a18d495c13298132ea3913b73ca646c0677b9b797c70918075a25f2dce3213c3dfadd492fb7e16eb62f9d760e0cffbdcb27f3b7ee8099739110a6545a9a82f517a0e9a7c12d1f1bc6a20d07f95b3e37b32d1d31aed3932a2e62aa7ad2dca2d71680f40a8456a3426e0ef9d490fabcb63012f77465575326b5ca298686e09d3f9431ed80f512ab2f5982b93d2c1ceca56944becc8f56cf2b41cc99b48e87b7882e1d45cb5207a671fa17f75cdc55fd0ccc337c120f00235caa1da270bfd01963f3fb55bd83d41b06d43788f8d85c2be59d3ec7356d68e815a3281030dbf062e410ddb628c137264e2e26d814eb2869fb33d74ad258b9f3f4029aff27cd855bfa554125965d4386f8e07159de90c279b07069b2382b000fcc5b3f493d6f23eec41b38f6d0a41210781f250ef6eac6292145c06145e99e851594ad46f8bbea38f9f0ee9ef35dd03257ea5180f5ddcb7eb568651a3ef7e1d51db53b2c75a45e20670c411a59a88d1eca43484ab47a2f3e27cec5a6175d135034418295188d555d521267e6d4ec738a16188f6a40622581913cefcfdc6b515bd85c7d26e49a8d48f70bbd9b2b988ecd619f3ab6dcd60aab7037feba2d02e08ab56583e981d23324dd5172b235912b10329921d5ff5fc0fd6754cdae6a39273b6d6c385c22a95381fc51d5fdae5f1c9c561012d127da3b4e64b0792df795278667d97a20031da4e6b94b49977f58420d4875e673d6124835c106543dd183872815b3f2712637ac49f34c893861af9588d4f232c01110ca4577b8f2b9ae631033640af44188d571b6c987a71fb27f65d029416155919fa2a669b42c737d7e3be18dd5d86c652f1883a7e2255061ec797655ff52b98f87232352f1d0dac1a45734f30ddf04ce49b615ee6151ad96cc340cc2eb501af43c3b334d173eb6bdb183d8b0edd666312f7f01a016018f4d10bc26e77eb62a9902a61c0edbcac1dc231527ef77a25776e1754920515f0fc3c36f0ea5f0d406ec46c3df440adc22734caba47b70c47f811853bb4770652ac30c0e817fe3f1e05193843bac26e9ecf13eeef07d47810631410d4c9bfc5d0579b48968df7063aeabec4de35ce03cc48b6946e92c6096d6433c88a15909e29d26ad125229a63167cd470891a4f72f6cd0befce09a7b234824577881ac664162b26c54b2022a9b9674bae076918cdd53fdc10c4f633cd52d893d8d277ccd4e991ea1aeeea4ce1c277cb99eb66f4fcf4454e2db7e04bece54e1c3f2e230dfd48d4d414d57c9cf28cd048d345f9f5f90afee43e6982ca2119ecf6d94752e82f505a2767ae50ca52ec5e140c6c07fcda7a1efd34e47e4c8f4f0d79429ea491b7af8b96cac43f45e0c1bfd04af2e8c4f611f10f023f5949ff4ad544b8b13e9b9b3868e570f022e72b81142e588ebf86f041a2ee0155dd4603c256af3dce0914363182c9727a351ea6d7d79ce55512c8a835fff04c2b4971c8e5c6f76d924dada452e3fd43fda7afd47e9940c64233a91dbc9a7eef3276d35cbe560b017a1b50c0dcae64d56d51e9b2558b0452edda961b19008da8b11d953ebe53802b92bb95ef3a0dca084d8815fd2212be93ab7c822e48ffce59e5a136b3330298c632b8be3bd4d676370e147ab95b9818e3b9ea45d4f288e50ea07fa708f26f1ee020dd92e0674e676d62b3c0a35d9b6733e8d42064cd483d47bfd0d890f23af3acc22cdc6390ab7bff9cedf02ff4e86be17be2e9104a3e001493482edb1b69af3cd9268bf4e70c5743fdad95f05fbda170a4b73e146ec291ea873fb2b6d35c948338cba36a868170a2d576b9ab5b9b4d853b55c821e1ac5f0e7a65d580dab8cb64d8cb898cbc49ce5b05ba3d75931cf8bc6e852612e62fd89c965be8bdc4beaecbe5bfa271b97d7fb8ce3ec2de86c23dae8f2431d966f09eda48efec2e83fa093ed30cca51de3d27317564c6486cd16bf60643d716e6d81d23aa808f0b36e9370853bffdf17434cfd79d13b5a3bc0e320dba43d2484fd1c551279264c5fe2c31eade9e1a49f10ba236d236b66386395cd521f8945a140bc7121c3f4974b9565d7c475de84ee70ea48e3f23652cf892581659a0546b7737edbfd081a847b2502e0e8ffe69b8b31f5f6f5fdd3b76f869c0d6fb668aa2b4dae9c58a2f7dea37a0f135818d5ca354bec65ce195feec71d340acd90a62be7db154da04d9452f51e6c26413b00f03d81601e35bec9b2c55ea27342484cf7407b90f8992c348050241cf1dbbddbad9e98fdce37150e34df527b04437477f5bfda1e7f4a1a107224e5854ea1c28a76be6cbe72ce89e2b5cef9e686c52bef6eac94be0cf351e9fcbc07e659099d81c65a95b14744fdc0042c090861960e5193ff120215ff81fcd3c6e989e95c53d523a33dc3d834666b18684eacb9ae72a8fcd80f40cf0cc03a40bae18dddf7d9e7b1e25d32b2198fd66a5c2c371f8ad1005a49801d67912b9b70a0efa9fa5254a942dc8f466661048dc4c5944ab8ff8735cb1a7d2fa9ea3ae0391db9f61ef7819431c5fdd2f7b544273475e31ab9646caf13448d14ef9af28dfd4755c039ea4e0719132dfa96a1ce35493ad014293c0d564ab5ff05b68103d37f9ec083c7f3ebd90df65f0f0b1a6f66a93cdbc5574faf550b3e1c14cfb361dc0cdaa2a1e2e65577c9a87244c07560314b275f65f406eeb430bf1fb9e7bc65f403cb563a5e4f1476cf2ac48a1e64016cb95752652a3b7b82844aa7936141e26fab47fc4ef3024d4f7d212903d22bb28e062f37bab1a79232be88abe93021aee78aa80b2126d3f4e5f82a665be890c61400206aa0616448046cf9b387e340e3a47e4c281e8a62d2f0285366a42a3a08b44596a440a1f2b647803b35722ba64dceb302bd6d0ab33bf7a46f86c21ac5fca3368e07fc64c028c5f113ee428a1df8c25dfed8628aabc8540d3fe4b1e9588b01b135589c7f0aa8638ac856c19a3ab6232d4641cc44c41491a5e97c668b88faaa182cd76dee0402bc7dea221e1bdf0fb41a02ee35e7a7f44790d25ebe9a191fe9a79ea603929fd33698259997a77fdb6f3476c0d8268f8bb672a7b6f7f7ee4a93bf28a87343fa5d7993a72c562f744e744836e65e031557b7809dca95e4df7e360c0ad7cbfb6d59aa3c8c3fab204ba98c302af27f63aa0f2af3fb217e666cd9ac926c97f55c6ee9ad2bdb8570ccc247dd425a981e0791447a158813b6b04b4b623cd72d484fab7dfb4505e34913b7a65065b9905f47e8353007ed2b89351178467c4720315bf170c839db64b9ea7bf97e9e99b5fc3c8be69edcf69d8ce921e32cd6e1bc71968d104a1b8845db4c9652099b669026343c9a47bad3f2a77c35e637576d558678cd62620bae5d1a105e600146495f1ff34e7fa9c57fd705cd57de372ac3feed8c34bc39126a91255aa34f7796a5ec1277bf56a1480dbc07563c5696e59f387081268a439692d101b50a5e437fd9b9dee7c533e89a5861d65f7f6685b934386a8f1ab15e781b15531b16e47e8942d3b2acc5d4b93520c496b4e75b1edf1fb6e607415ff335d6d1513927b1376afff172abb796439d9f5dbbb307143217e22c1d3976fec5c7bb22884d41910ff2ddbfb7ab35196461455433a7be578ec0158ebc7637a3e105bb0e19fadd630a6c625609abb3127a47f91101628bcfbaab388a3d8a77bf100e375f24b5d51fb26cea303882ece1395c58fc7fd7bb9170e1a14bda0510747efa0f7382a2d61a73a1001ec5f4d21399454b85b08da88f8f4fc31823e2c9e31330e0a23c64c9f8befd4f7d13f2971f9490ca4fd1571f1a549bed21479618f5baffe068c6e8b6ceea40db6763fdfe5446e784e41c3337bcdc7a03d018fbd84d4ca27228111cfc1af084573708dc0300da2248c40e575638cedae306dda79cacd5767320ed1dd8cbdaed6bb407b9db562718592fe1568286d1feba7b5b89e81cc4ee05ee7dffcdf963326e456e96306c3065f6d6c66be4fc76ba28cbd29ae85056958a782f1fd22cc75afee845fccde8dea4ebe62bd6e4b1123dba9e22c7ec8b15eeb612550ff6106175d4f4b690fe31e4df0f220dbb58e77b593ecbbe5b8e03160d5592b8cb12c540122f559975799cc6727aa1f2db52a0c15d777a1da34d54b8bdfbc80d075d34197f721f69a33bb01237398a989ebf7ad1e16084b6d6dc258088000ebd15a2582e3a6f67005eabf11c0ecd64fa031ab180880b4af398f714dd0978af2a5278f4f9b059ec1d74f75c995882d075b73328395a9b7a803574628bae4a64aa3da66c1b6cd7dc849f87c127e03570a5c674060d40a56831459a39aeae42c5bf2209837331653bd8dde47b1b5d00d5bfbf25191bcaa265afb28c7aa95a3133d9ecd38ebf56c1f98d67fe8f4c3c96562dd4dee2ebd9b6d7c6aed06d82efa0d4cfd7496","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
