<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"9f001e6069b0fb74f36b1f2a8b1ffd0e130ec290bff0a9840c5d1adbbe842b8730290303a908abf7bd8841a7516a953d9f1fa28d291c9b1fbc8759fd8ca96293294dbd1234f519c8b0453c5399f0b6cdfda851834ad689cf8a910e32d443597eac2b020ef8921c7bf53b09e160693a13bce2119154aa03bb2ca52c60968b3be74455fa255fc61c04e1482342974e41de399b290a10ad9843a926b41bfe18f086a6198f934206a5863767c7ab2651c7922c3b712cbc223a67c5265ad945dbac9a3a67ec820175521ea05b1236623d0aacd42acad5e88330b071dab5a7c164d16ae38c6ab21631045bd3176e5b345896865107157cdd08493ff5524dfca02379ebecf77dccd78c60ca145c578b6d9276721c897a070db6443bcf869f05e852e6ac63482794aebf6f7ebc79bc448d02651f9d8356b3d579734b46a7842e546f22bb072ae52c8b99da84b38b63e304669cb5270e2cc2e9bbd948799ba0b0a9f0a53ffc92262b3a627dea6cf582b47fc0c80100b3168bc3d23d7e9ce423036eb2a8be2da613589e6c8fd6e306721ab4845d5cd711e6bbaca46c5117629de868b2978e544a92452131accd02eb7d1a48a42ebb93963404fc9973e0da008b290fbf04c5104e7057e87850b42327c7ea35eef0a88ef95000eb6587d77ec0afd8a63818469928d91fb3fa56ed1fc769d83d417f8f67e4f583613ddcbcb5830ac4fb11b934498e4c8393d11df61a0b2133b29cf851836775352e19f70e0e1d85316525f08273129c63cd3561340991cf16547a9e2db04eb9c0bcc89dbc9787116fa74e8d410e1adc2daa475b4b98e196095e0f4a826b62d71bc86f1c547eca68619596accd69356a36ef427194a610ed2aa1f1d18f4258035fd42be043c16bde90449183df19a1732b8a350ff2a3a0e830e8d6867c965c04f6defae73193fc6a037b5a481c1b02405fd8e32383a1983cc38ab40df6e7cece2a84d10ba2c9dd86b786a53a511415485e01a1650ae2e52e8b53f28ba2fb5be387764a747206124c2cca02b802923a084164819abff729ad583ba984a7ba020ba6f9f3b490bcf742ae1abf0519f6c3e19dde11a8727fd6fa053955cf35cde875b1635c4083bea5ce902a95f79e0bc2e30d39ffb4c3c7acbd78e0cdbd5b754f6bdc3ad2cc8a9bd39aa02080f2c809fe3f4f6a14c433b23b5f6a1c6606f4e8128aea8361f90c230b35983d6a176d12add6bb45ac433ec74c683699b49e959094e869fe5d841eabca31a1e3a1338b7543a85ff018ad2cb2c7e2ec8c076d3c5b489d01fa7cd6508a56b2bbb07ade03f07b573e748ce805f3b76c2377fa731dd9d5c26bf05c87181b1118f92a608e4f666248b18d618d964c7ee9a2fd26564b2c5d7cfa4f5e10f118f3b1f00158d1385ce906ffd1651784655a84e01edb9ec7a5205f08af76f3362487c2ba20e76e9f3989cd652550f4d8ceb7729d605c631dd87c4c574629f010225b9403dd3237428db59c821bb8decdbb5185808c16a1f07e7daddb0c1d0fdd11f5fcb159c80f8aaf46732cbac71e62997e925bd22f3cb0853a1b4dc1da0d0d35654adba6585715e27feb94afc3ff810caa8b2d84b67048e2da28e0076302df762af39d0f8595cd35dbe40b6866fb60bc93d26109351a6a21217ad468b015f14fba0f0d899ba4bb55bd881323eba9c1ac626ecdb472e24c01375f5a353a81d745cd613096f068e98bdf2b2cdae851919e6a6426a1836ba7ae97921369442c4cef01e51620288ce3a5088a39c01ba8f66c257c5057ee87a263e2cd645078409cddb9328b2f73d58dd7c7677bbd079727cf3b12829bd8b0b0e8b05917fa69e5a674ec8f9c085ff25f29922eeea9dae069e9146d52750e37a6f5d5333e0fe047da2c27a3b82faa5ac1de897fad773ae16d42cdc8437e09a226e5b453eef6ec6a4c3e242fcbdb920e29ce0a2a906950572cda07aaa4800cf3917018cb91cd7718b25f9346e235b02cc9ab8a208a64d352185c75a0956777d657451b007eee56aff89a40eb3616428514cc8546565d039e0e338ce2fa62f992ee3ae712d0900ffc0990a9e019c45f02381e94aaec34521ed5d23a5030ca444ff729277f3e20a0b8b64a4f7d2843ffe212e882081dedf2fe5554621ca91ada7fee0635e0cbf8edfb6c2c61917724a5d06ae1683347c75b7fd45189b6f64391dc04c3c8a1983e0d048bea9197a0b7134fa16d44ee016ed02b06d92d4c08c61468baa036a9fd90f26fa6ead9b2594be8abb41a49b22e3233e804d74ad88d8deb7ff34e59cb13448a403fada7105706411b9f667b1e149e338289aff3b0aaa88800abedbb1d28ea107a38bb50c4aeff836236f2decf25c54c5b48d64504b38b95e02f8f43684fbfcd039c3943a14212ed90f695564909e1b0d573fd9eb435044f2ec5918a77d6d67958f9a44dfb9f0e96484e42fc702508d48c188197f2a73220695ba2e33731090550e24ae68f3f627725477deaad09877f89e75f865fcb96df274bc39e4820fc80fd0e191fa36a7d43c069dc79cd47d02e8b5454ddf48c5d3985a5f935ce5de78973e3282e1cfb70441c2592941a9fb7b8f34844927e2289b83e500ea78d35c560af30c1ed70ba4f38bb2cc66ae4258bf2281148628c080c060d0b91608149cba913158c20fc8cdbfb75010a265e5983491168d806505da6741fee0f0c07572077fa6f0e98dbee24d55b1665de99c283d7181174113072dc941bb6de250bb70790981dba46d08f6abd4c7908a097dc0a3c0264d3c03bcb36ab701fdbb4fe100e97f126ea8d9907480ee0af732aaa58b7831cb12071e956b067d6bb97eef347188386e1d1ad8b1de878059dac7dc43ee532f47b7700b6028ca028bb004751f9b186e2e472c3ec57ea78b176b1c5995aae83f14fa566377398bd2a81893fe6fd1dcba0c631dfc52975c448b83a25230c201e21ccb281aa34196cee82624422f58a2017576ebd2596f2f8e77e3720fae2e2c7e4275063748f79c31212b5129a591e35d038e1ccaa8616d2881684a6b3e204de4661b475ed217820c642420076de1953080ea60547a9e23ab401f716e512b30fab8d3d2d561a006c78084490df30ffe42c41030ec5c8e288faf8638153859507ae1f5b9eb7c3f31bd1783508654b1b30eea072e2f941e826e04b72598d4ae5b5dea7e6b1fa97c992081db0998503fef73b30a2f31d6f99e9cd13f469dbc3f5349bd7b5c18d461d192c055459c139b4aa12f446814d0f1837175e2d765a6e5a4d36893cea8c8932a208d39df80485c178fe181a50e7830e0f3d1da64a7d1fa05dbd892289cdecfa8e562f91d45c4a869d429d5f94f27e6443ad47da04f1124c371e8e77cbcf3a0d65ad4c0301678afca916fe83823d0cabcc4ab7a6213d6a0ba5ddb6217bafb7fa852ea5854af0d8bf57b818de8a9091124678fdef4b1dd21e50a05c746da56701b5e4d1f895ddc5586cec64c7faf838fd6fde3eebc23b62ae68dbc42f8d407d6cc48a76398c706fffc91c365321668333c56a009de7262e50a529da1ab3de03a3d5eb23650008bd096af781c5c004c85c3d7106b0b6777afd2757eef333b61e7ab5b1fd08f2c24a53144887bb66627db9c55f1a3e3537706ed97f7f1434551a8b8630d8ba0263904a522e2ce3ad79ff43801e4a059d3d2d676bc1990045100722c44a0380263ea57f6e5b0bf3b0b40598293d0bd4e7e7327ca47ecc7f595947690c9f904a18e7e44db374b1e3dec5e2a4e7be235cd62e9f520d399545664f3258fbf451cb08bf0008c4df15cc35eac128413abade87f63fa8fb759aed535cd05dfdcdd89d3d366090b83a5198114adfd6a2361c69c11ea0b8e099d2dc69438b7a4a1b9e7f1dec6e3c1e88b81ad3e1679bbff1d89cdcd59177b00d008222d37812e3713a2a7a23be69fd906ee19bcf8a834bf755ddb2ff38a1ffded2c193d223db8694e0c1fe2b988ad6a1bb10b0ca1770ea4fa24a8ab382f45f0033e2f9a4e7959544a08eed0237f8811ce31e3c535a7d7b21d8b856e102e6a9fcc68ca2f41f777b135eb6c0c590fc8f9d14407a48a0dd53cfa09c78e5664949ff2a53054550c95dc858260519a9f2af047768c961969e46e6f644096cb9bc21e1a9a19eb075f95fcc8fc85f7b130e5ad401eb63ae897e0a1327ecc5dd22d5a339edf17ba174e43017781202b9c1981ced46c24e8431505a568be5688772f69f113c574163b602bb6b483c51f032fca9b3b04a7987a13a4f3348ab60089c33817136b3a8ed0d2c940c3b21316bbafb197ca205b088f3653c0f36684bc081e0d0cbecb9a86fd0dc29d7a84333e1debde78ef11fc1580855abe5152676bf54400ea760dd41f304646c91b9ca03e7582d2a41ad266925c844957a4f2d44b0887741afd52d49708ba19e29f431d4204b67684d5d7083446be99138873138216af719a8fa6adaa35d57198b0889b49b60c623889c85c21e154fae440621f4973a667fa80847807024b428a89e553d9e2fdd2a249adff64bfe3f91c52445be0843d0444a1bfdfc9695f2d526fcc928c2cad8a8f346873c39950afea6f119796ba07bdc793cfd4b0df5874c1b30ba50f25459d99bcaa77ea488419ccd59856b2435d18e6dea4271851e6ebb3e01d6ffbc65753453953abec0d62253c27db677fac5ede17352595c60d73e1a24a70985cb944e3ac43880ddd89a6413f7b408112c80b0a5adfb9835a35a38596c9b58058baaccd107c61c67e373cbc533ec4d79ad74c58c2786e91ecf22f44b2c2062b282709b4b20f76057ef03f71a66983fb9b84672f7b8deffc777ed34129476848ed0b7522e632248ccdd1ddd5956dc939a488dbf8af1bc4e4a9e13eb0eb08313421c0686909a6f04e8c096a7babe74021c10e0a930b83b9efbf29749b54cec99ce4ddb4fd9112f5bd598e1529072687ca14640b988a0985971ad1517c6595b12eccd7c2a9be8ff1cfd142c9baab03f66ecba9911f2eb08b25bcf081dff0456a9735dae4dcb151d62297e684292312676345340d71b5b8d038d5ce0a95606d88502a8e80947d7baebe4ebff0fb1dc5f1bb36682446782d71eec27bcd10749959f2000af2e0f66f1fe9bc5cd3829f155c1bf830110b3da2c31f0f0a9f326dd7476591d503afc9e06d82f56e831cdf94009e5b3dccfb9f90ad0f33dd4520ab29084ce66119696d6145660f597e54e66d6677e7344f5f666fcf667d57ac63573f0dcc9c55b7ec9bb00e2130f5d0880b8880836546bd5603f3c928d351f5e80306a48d3c0e83358fe0a304727bff160a62efefa8761012151b9991254b31ece8d17e86adc00d9ba416376fb01d6a4195ca0abd913276daea94bd0af423c346804de70fdc60db63e43a9cb009871540e59dbdac87e331b39e6871f40058d01863b92e4d33d53562babf66bdc9d50ddd8b4dac9cd22f773cb6802e339ee925cbbca5e30a0bfe123880c47c8c4bc9832d08a61a2afb0d17a7dc7ac20c3cc2e9bed6ac98ddb5a9b724961a26646b37a5b09a8552f792b2678344e1b60b8a972a4eb9a00ce7e4f8dbb5a86c3eeb7a84ca8e180003e091d7da63cf028cf7381bfc4628a077795b56c2a924715fcdc5218a0ae3889375d9c99f327bb990d78d8d4e8c60a69286ee77a7f1623248fd2947d723828be8f326eb70359366e14fcf6491575575ca93e555b4ef3e1ca9fd2340b79a41c938c27e8634721a162075c7a68e078e81a44799adc44d06ad34c26c811f255b202f84e2b6f6d9f548e120ada01fe19b50b793abe07e8f692691699146464f829cc37826ed031ed8f9a972e8a1e3ca3e3751ab1ea0dc72d6c395893519a8d4b12e3cba09edc3ee375b6deb6e352de25c37dedfdec7e45b1ae52a7f989eda4ff5f156b2907e751a881b08333781ef8f3187d03bca0f9c373303f41eb39913005578d34b09a1d88cb64d9ddd4f32d7b95316c4de76a6b76583d94d9702bb6f8573f6c445b68e6273c78ce6ff051390fba030e40ecdc3cc639de4219565b1def56529b1e1997e6ef869261b9225acdde33e8ff94dc6a88acbfe8d8a6c27b4762946aa85b533283ec7e41ea16fdb7a59eda2e1e9d2acc3eb67f52e7390c57d624c936cd1c6c66661d07ed39c2cea7a3517f7c6df845c498a41df17d88eb5358741a21d373260c21b2fce845283611416e7c36cbf717a6001eca24c509242d205afe8ddbc114e326b54de14d691af670fe6a47cb5fe784f85e40efce835ea0696cf141977b38bfe3f245e643f35db5c6fd55cb6069627e25dcf7e8f48dbdcf780e67d4647c2c9d207f25f4986fd5bc0e40fc921df31c8ff9d3c5daa6fc58699bce947d2b82d1124e5f330975ee0dba08d1e9631825245296dc515240fb162dbfef8b8b8fd1a0e4b517b72b6aa849a644fc01d50dfc85470c27d68cd70686dfe73c696a8d1e31192af40cd1b75c6bc0a0ccdbc1b3e328e271f269271be628903ac38395c9947212be61790a7314430cc749e6a5d5faa2682d6e963e0ff9b5e1a4f75ffa0b7141b039e85951fb0035b97ac0a306e079cb83e731c6203f28b7c75e29335c7867fd3d3c7a67aba0277b819faac412c2b4d71d101a5b39c2e8dec76e94e75b671b7cf017f41c408639dc117a1e2a5f472917d1561dd8948f2e758972e43ddcc4b2ca44474b2983ef0fd7ab80adeef365c853511950ebff1cbae48aafbf41632d7655b87a9c818938139beb718c55de913133d519524fc86226f9935777edb9caecaa61c9747eba0a005b98bbea7eb31db0ecb33f59cbf88705961e583df7c3e2858e545aa7b18152a26aa94fd90331e50b5e75a682a9f5065b7d87d82731d28893fa99c6730d9dbd5ce00f3828af71267f0b4cbba8971b2cbc6f26e38f4052885fc4f752b42ae3e9d81131a3602f96bb5f3fca7d9aa9564407de7c75980cb933576a5a956be4a3642a73480a0a618ad1b6404f9639114b4ff979c0de57efd99e63483e34fd3c93aca4540c81ea485badefd007a8d35592466ebbaa3475e3f3b27baac908fab3043ffed1373f4ead070817edd5feabcadf76befccf5f181fe51a32b37f4ce23d6ddad4db3bb551994bd7f803c8570b10aa6d46e4109e82e6a39fbf8245251142d877efce0ffe8737940b1158c7b4c1a765248ef7fbd6317dbd4bc42c7ef0ea05aa41c985f3cb3b5aa6cc918aaf6392114797402028255190201f187d85cea6c3eb395b1e034fb1a884205ddcfc5de5394f029c24eb32004e2e8f40436c40efeaf35e056f51ff0ea4900f7491f67f96bc64a8abcb44d77487cd1f1f83277e2b2fd9e05d5c1d4655a31ffef4d74e168ca6a1684b481a23ce1c9daa88dd106b5a68c9010a34ac0f4127c7911fcf15c7548ff2756c39237a8ce4d1fdc562619ce1b850539b934b04c2dba57ba9b521d25aafe1a512c196e7b851e39aac4d0a2cc1fc53692b578f5b5c552f0238e102397c0eb9908d4114649c8fbbcdc949667796207158104180f97983febae0213b78f2ebb64cb5ce890c8cb3395a0578cec7e52f2296e4b0177b41621d77503063043a61c1e9ba9fe0ea0619b1dafd3031794cb19a48f3ace6703c0b6b2de58ed9945c2ae03479a418eb895e737517c5a61b1a9c901239d604a5ad349f156b3053dd42819679d0f65a46aa8204f9130f58967c0111d07c6cbb8c870249eed568e09cccd5518acac09c8392809cd0d7b484c2c98a8406f94f32236acc878173dcc97df86a99749f9424bf801786edc0c9fba074bb22b773d718c3f2e931fbc9f0a3d6880279424ab60a7c486e38989cb30ae17440db63e32a04a3ca70852373f27c44b6d5a1b47d066d092df8990f8a0cef20369d7b47d3d8345f501c8b6aaa0a1b0276a44ac6cb895005dd79b1b14abb93f7883a04b0d0b04c5ce02feba3fdd5d1654d17b84d50197220cac010ca5dfd84783537e04ae1cff540e090a44ed618718fee6d9f71dd25b366a1f1b830941daf10dc7dfb89a73649ae5d9ffa20020ee8361117aec31758d0335164061f206a008f0145a30b3637b7cb2d189c3829a151eabf9387ab87c0c9981aeae05c67b51fbd5048760e4b1450f8f3f0a940db061b30dfae4577276ba97a10c932121eaa5b3d439c4b654da3b99e2ee1a2f0c5028399a6ce58c5cdfb62dcae322244f245c4bfbcdc29f5f0adf1eeae072b26d274635c324d9ff9717e41088bae05436ba85e5962bfe57c4411af93fa9d7b72642ef36481c0013dbdc3dba990886557ebb2315f5f81e326f1deffa03db66e50a532e3a736fdfaf170d805a687532131d8d77eba0b2378e3f1336e549ece9e487e815a48546bbfc850c8e818dd5865f227a27568840f80576e650380106776301261fa4f1df9373c674ae778a925d9ddb0734dfdd89d696704fdfe93b2884a128e3465adce7f652f470846da924afdda4030b694989f8b5a4bd80ae23d5038c903c0cbca5c6d7913d1b51c395f714515e4d66da676455ac71867649bd7e0a5ae875b9a2734cfc11868fdc0676b9c8ecc601ad943a0e172d94ae719141f212547ab33e9d457e2bce043141fac420d5548d9678e09df84947be2be00c6be25d98b5efa7bb5e14f129a93daf72c3044a62f2a00c291f2306cbf591f105a7f6f11ad732adaea5ae3aa70bbf5ff338bbf004229a6dfcc5310a7e997ae21a1d52fb68d93b29df75725a79b783ff38a914ec0ccf68357af3560b2d2b890188f83ee81da70922ee70fdb9cf9994a02bbdf2067ecc4cca33e9c8641fd4b4f1e081512a8626deaf304429279e67a24594e15434c3b6cbfd807ca6580191f480ca6f4f7bb35d6aded4e71626538fd0e468205e417f258d9b57740a0b8525b1ee1418242d2fc15165c80975ab1d84f26313afcbbb4cb7f3a7142fa61212ae5c212b2d3cbfc3db7ef4f3b84a32bae16b5d73a74966e2bc6f7d1e7ed124a217aff978b2a5c2e2f8019bf0498fe5514b4da7654bf4c324c051bf5155df9e3c601c6b70f8f3522aff716a4b75d834ecd8066587443094c0e034781fb4feec6256ef50edc0c83ca57d6d9ae2921c0ca6e53370c096f04bfa5474518a07d6666fc5b7e4820cdef0903d88fb5e5c0e4fce18376477bb023321c31d3f0216bf14dc4abd512917b5ac68574250a4b972e1e2bb2856a047b27fb6835624f5af2a1f18d8d17561b965ef0d961340694f81f39cdf4f621c0ce34c6d435e101ddeb0e6507c601fe04e133dfbcc32a709af1f4bf0603a3e9238299a4ce160d82c911168cba05ede1e48761667ca2ee367a5964461a7a75eda1585884d73d21f1f9c7f7aca34ebbce3aebcba6a3c8a5c3a9b3c4c73c73c69bd600007af8d129ee0242c43d954362cfe35085a85d2fe0b2b1f6e03346a1ec478663bbe20bc402a9dad432ed7911ce7fe9c192c2c6d2cf10b16e032b3b97713f68d0977a6f31f55e716f8cbf7a278e6f1631013e4532abae563ad27dfbf4f9ebc02a378465057957addb7d80b7322a8d7bd6873d49f7981fbbdfa57cc5b1811aef919de0bd6f25b5a01701f4067e9d966836fa0a3ca5520909454aeda2fbdf76565f6243f34a25e5f9184cb9397aeb12d031424ca8119a6dc73dcb740ad978d92c1cd411e417040876f2c6b9bc847abc2c1f9af2ca39ec884ccd5ede46237ff3f12f216e595382a8c412e30305951207714faffc0d2f8d6d38f23e339f09b9d9d1aad1949a7dcb97172f8e6849979e135d5395868c17d109d27fd63bddcfb1531fd6e1cdfbbdd2178ea1eaa3e2b7563ea997702e17d2d0fdf444fa9d70fd9faf0063aee25057feee0af5a6e7b1c60c12a6e4c68951d48a7d40627e7ef65ff972e1f2c60aa8d78c64645b22c6c2010f483f25bb0ec4418b1b9a58ea7009113c3586e4dccc61bf29467b60f7426cd19714151b276747199126582a6226ca2e768a874ff1c280c9322a73741c0a2a6f77f68939668169be1a50997157348312c713ff2d080eb5fc7ae2ed8080f197d88d76d8e0ebaa0cc0ab43d29d50ec0447cdc56ddd1df4770a0c14f24cbb0117618f90787fe14a2d78d58ea99600caa02c5976c20c457fb18a715432e886f66974bad5afc73c0f6cb94722668ca906eafb778c8441c368d3f9c1356770028ce0cb54c6102f98571b7d25acc873cbff4f380bcf1c9f5f91c7ffb659b011e6119926f6798ae1934afb260b0bf8a0fbcb592aa0cd4c4cf47dafa3451e337916dc5940dff85c7c3ba1eae4e95df9b1919c2a489843c4ef6e5ec8fb5662e36bac1bd24e5cf0098a51fc084673fdcd70442b3bf06da12d6de2b168430e6befd9fc964714ef00cb62342fddabbdc24742ca7c6656003be378b88532d08dfe3043cdb5ac6d7e820568725d812cd698ed5ca82f1460e202f4d66d2a48f7ae7362e201a44babefb7f951b94f4645b38b457a4e9842232435c6cd40dce5ff31865241fb786d0769fa607bf0591a19a92ed93f78cc90c56b1d182905ffac18ea0a252a53bd1e397868b5f2982d060e814d68fd74879bc3c91c4daa5862dd1c6e3beb06be747a1a11cd39a62b56ddc1c27084d44fe717805b1538e7b10df479d0df7d8a9232ffa1c20bbbd0ea06a45c1916c5db57d5cba5ce1d526d76d266582692e24e7bc284843889b143f382b7f5b5697c4fe6cf12ae772856c4b638e19eae98ed8966fc9556aa396ed3fc3fa635148adf94cf99e268824981e703a1b7cd34338bebea1073e3c1128c676dc32e8ab47f4dd95bcfd83895f75819adaa776c22959d70885d0fc0d2a3ff2c1304a78f2e5dd80bd2d74532dccaf338d8575d2c52b65ff8c8bd1870379200d3c5b12ae4b84bc4209511b753715ba61b18e17bf3be03c8c253aec75c9c913723e7839188ebb9153f99201a081855f03c0f0a604c72822c4ce67fa0c6ccbe22de7601b48f724acb08ea2bbca29d1da8c47f9df2fa5ce7fb1946db3e060f67b336d41c8e34880837b0f60409223534677f51bda815897d2bc58d5fa3abf4adf3c2f4344b95a33879a5b3f5739fc544a87d74fac9b870b6519341b44d91999c87695c14d277449e1df7d2e484102bfe1917f0f17611ae8ddc1bd34e38499ca9ad13d32dfc22a86071d17f798f403451295843cefe9667304d84d8b5c50d9bc6c7e34ecf8038634dc5385ca691a3ebc38b2caf17adbe84a6f4b584a7b3a956f3ee7b64d18047ec957bb6546a480e23a2b8fd2f852977fb4bc75189ef29940cd3b02fbc334a15c4704853c85792c7aaed404888de26ad269430f3a877c06628691555025d704c8f586cdaff92fbcdda179488530baca801f6a4f6cd69692351f139ea7e7ad0f96ef07aa404a3fff28c8c9e00acaa9f4d6227bdbe1bf8dc244f207709f107869e44bc559131b1ccff7b6ac70d29a452ff1aa5d45b260aaa91dacf40d42f811c870c3214128c2d3262bbfa9ea015f7d537b40b2f9e93d282c35984e27f05d0a7c5dc421c7e4bb2c395f8a60aa5b35867676d1cd04b8eb9b16ee4d6a5f8ea38f2927e9d7098a7ac5ad075fd7364f1f5173c2a1f9d1dcee99b64ad723c91180989968653b26d385bc53bf12a0cd0464bc99a20b8fa79cae237207df4e0f0c6a2538f1e6bb25695498be555e8f5491a421528527c065b73bb9f209bb468eae55f5595b7664718fea23c0afd75d609be64d616884c0602c3cc8320a2d4f90ec7721fc3587bce2aa3c939b3168ca6e347157ebf0ef7d0bc62831895e5329a32d6dac06534dfd131726f2e4a4cec9fae076478364bac2c4c3df33229dc6594e7cbc29c61f6ce88abf443fe76c27ac6c65166dea6a8813f7dcc942a486de193b9e6217524cdad346d54484375e0287455dc26c186169726a7ee0b1323e0cf9cf5c8ff4e42bf70c93e81eff1b56be6ceba59acd40709c06c1e1a1df35758c84def89bba128039048e484bd07f5605d103e67745887fb6784e9060db8312261936d9ca827d97705fd2d5aefeff5d4778cdd960c932cb65daf6ebd557739ef8c6eb773a9923b415fea66ea20dc1811d1caafdb1c1815e2d4e43167599810834ea58815dd01152aef933f8eef9cf698e99a1cbe4a3d1409e2f8f4e3a70dfe48c29abfc15cf7cefd269d21d80983141932f151b44a3a161d48c3f15aceb84f63a59090972546ce5e5e6f93d7873c7367e6485a49339b91912f2464fe44e43a78237c7396d2cc2ef46b9a19e94a24f604bf0cea9ceefed179b80d7e820954d9c3bd3dcea9ba703ce0f093df6f3d0b15a7d76a86a4ea2b7e41f4b3cb41f54dc48af8a9ea186a9627c6fa6c2a019e6cb85fffe0344a03a3b3cec1451096ccb84104dba3f75ecb2319d3b33f857d078aaa85ab27287bec08303a26ac838770817edc36372e303bb002adb3b30b96e7de0230a3289a7a25a9a8348a454cb0741c6a14175e33d227db77438c030b77e0273915471593f330c1519b31b182e8237ce6f98e8d1eb6d3649971f95caec174bce80bd91aa1a0f486b868d4cdabb77c2113e155cda35b47e9eb54a41180fd733a539baefbd4d67250e4b672f25f5e6ccee52364ddc0edf24d027c0be8c4ebca5b04d39804d96a3a95fbcb8ed2de37d9b16c1ace8c6eaff948d38816337582469ee42f017fb119ad5563f16574361c54eb891ecee7d2de64fbc92ec593836a0c4f71221d9fe0eadc40eb857c3c1e4a852a398f858eab2acaf8b4bc1c4638a33f019470f252d8e5682d7f2e58a6a57febdfd9c0c7451b50e8bd77c71590c391a5548945eb8a4797dc8e9d346ec8cca33dec8cd0b77e17521d2d7042c55387e3642aeef0ae23834f66a874bd2af365e84b9ce2a28639fad391aa495a12703371d70a2d1c2a520ee01e8652b10e08b5e8d48c55bfdac15ce28e5990ecf50cd126158c0325dee1f217caf72dbaad2d30674507f2afc74fa49414305c41b8e098670afd0eb6d76f907738e121954d0c5e5a9e35db52ab6a4a90528648bc52fd59b52cc125b62144244fddc23fde48b311d24776e23abb97f78548920b5b31b45846bc87710e767611d92197d70e56445fbc8409616ba4fd36b70fd6a50d3fd34544c824f93df551b61aee08d7c016846198f2908bb9a2139a5c88d13a6c954a4511e6b3333e2a74bd9d95f851dc772cf28b141c31fee07e9a60541c8cd66433cd1f7d43acaf384d4bb3d91060b4dbeb03bc914e460ee151c5277a0054f32a126da3787bb867920362d7255ece83f855d3770e27db6b06c3cb3f50738bf295828742ae2c4d6fa51327a78e127fad81428cf4fc1659547c895d48f3baa64e457a714366a0afc67251880744b87e2a1ce6e3f566d65c93ada8ad161690acf2180b1dd402cb3a7822fde813c0dcf7c056c78bbdb81fe5c85086dab2cfbdb427a01ceeb25596195eec02298009cd497b18712112a58b5ac8af4936d93696df8eded097074ceb5e0ed974cded122ff4efe7cf12ba89bf5098a626ca26aba6a95b196e4ce0d4ee346cd31dfbc11346ff26437d30007c7a6187339c444b0c134477a3685d6a2721454627d535c30de448f631c11771a8bc396af47facc318b3ad0ff10b240d453d4a18c3e1c273582b79364da3084f914bdcc825abce51537ab8c4235d201f38139ac2c9decedbadb664c141b96024856b07661ec0e4eff2653096e020de790d44f306fb3ab866732914c3f4ec432f8f067e9cb9ed822450c144c726c65c44cdb9e761262ad18d916ea1bacfcb5a22faa82cf1b5ff97c6aa24780f85914d39259a666cd26f1e9c39aa3c856804661fd1fddea24f9e310c1d00db1e9fe709eff98ff202a675923989490c005b0047ece169edfa5ce320feb3dc7435610e6024e2d9adce2fe23c7ad4c13fc3c6acbbae29b3c7cce0bd94b253a49f6fece47e8c85e1506de20b6e290c496d83f0544eef79146b20c4bb5ebd8a2270efdd44941af7dce5e71deaa1cff91adb3a571242ebc9d92ceb5f12d41989586bb9ae602507b8a69ea08884a2dd4f58d044d2642d0a9bfe791b17ceb163d88b63413f3c8ab1c94159ace9da8dcb011b4815e1cd25cbbcbb6865dba33030a2a3f4f162dc8c02b3292e0d7dd63264c7c9895ac59d5aeb676f207909d2f60fcfbb93a2031b00098b6b49b2e7c5d40790af13c30fa3ed99deb54603b4be9617de2721ee11f8caa1daaa262f9c6d0e46c686f192232c70e94ae7684e5d25836352e2aecb3f0c0d8fddbccc2a1053e9d87550845c8b18b17226d7f9a912437e305f9b6b91ce452b1ff6f95a2e10b4dc8de1d2f755e39b20b9277a7a54ab2997af1ac8796ad4dfcbaec01e257b29f446d18436f640e1127478fbd830a1a42b15286afe7e3289ce7362175646fdcbfd4f618fc45b785b5f7026fd2564158814ab382154e45293820359e1b75e6231b5dd5c5ecf941732d699fc7574d13b970f5307767bae4cfbd83045fbb0c927a6f956d4de2c2b06f112bb9bc2edda06669ff1744a4abecb845ebe19d046dbacc6889db6aa166d980b8a789299d273aa13bc8ea9512af47a14a340a3e7202352b29b92e82152e98dd3f0f111b15988660f6bef5a7e25a9d2538d2a9679e1e03e42ed382b81147f5c86f765804b91184fe010154f260625dec7eaef03ae68a55f97d0095676c467782bf77060f57aae98846d1ca4927086b9b6b255c4aa77acef795060a3cd8756ee643ab809c3c3140d40b6e4f6eaae5d0c78f016fb4b6dd5e6c0606de27ad10257f7bed6b5910e28bc10b96197e9c1b53c98c18c9d7f3b0a04307c534ca4320937eed0414a900d8b3ef541355ef9979c9cfe3c0f912e8c920d0635eb4e47fb5c6304b49b105fcbb58d1b3900b6c2c8f44897907bab5d2e59718dfdc2ca0d97d13ed9b17b4e5c750d7e3a71225bc7949f59cd402f4bcfbef7df71a1607a5e06e384e9342bef167750e362f3cb4aadae8c3d42bb113e2248256c2051f79f1a60f8c81c05ba90f17b5a3ea7ac118f6c03aeb35754887efc449b6982472cbd8ee1328d4153c5be37daac048a46fd6933dbcbdb6451146ea35d7c94d19a0e3f759ff6817f402985b220259cebd35dc06f34b71583d3a619bf3ff83fdb3dba744b5c46ba08b993ec6f4410a3a30a7f5d3edbbd0722b7fd1c87e8a5d0c52808c9a974710ea0fc419f6eec5f640592b58c10f151e4b331a775b77c7e8523634db1dc5265cf45e70f880a70dcc1291365f88a42648b68684dc2ede63caa052201822b33d37e48368becb7af48d4c894a8edb622eebe31ca742db5254737a5fbcd19b3d821b069620eac7817ec8b2a44edad48d4904a1730be961b211346cd3a8fa2fc1db5d4b76913a6e89d73b57a212cbe52f319e4d8d07dcdaeb11914fbad9794090f150f6d628239dffba4d69fcd06974293c26299ce3c5b9abb663e3c8bbe01c1cd71f2152dc617dfa27642331fc167b3dafa81d71fc2f5ed4a4dce388c7611ed12bd413d239f1b431f8ae3cf851517e47762c08cce2b4659e03bc090aac19e8af5253cea25750dc50492e53463a753be2df6a1590516bbe47c58810ec3bca67c92c029995d4e49b8762cb747cfc84bb2b25150b98a55235c97d317d7b1fbfb5bda48a3e67f701b264f55408a58c90130fe77c589e3c309cd7af4921abc5560541dffb487e6ba2a98514c2f8cf38d77785b81e366c1fe3b8eedd65f4bf3538c6e203585b6bfd45d0a7f5a7a8e294a4d142dbcc9e985440e793a3e330e3dfb9b6c27b457793cd99c8645eaff5f97bd589015ead512804548fcb134d7f013603637d4cd0adcda78f774b0f7c372ac2f7f6d63b9eaae7330bef427c2ea8708b8c3cbc7ae4b9c4eaa730d355c9de6f24b36dff4afeaf03b5eea0120add3870be729de4950c4c6c6165d964e9b83003e0318cc93311043021547844d08d77ef030ba286900d0f889e0b82a54724a320a6a44db3cfa45c9108a1ec67c3659cea8b902ed15397bd12eb326becb3d8397e7a2d56d22ed8e097a9a23940162285ca7aaebb00be362a589b7311e3fa2d9fb4c82d696000392bc77a1b9d49dc8607d54527e94afe80f2c454dc7bb31211deb428dc5983a33fd73070dff3c2d0fd1a7a3bf8fecf8856fb5e5e19715c75ce2ac1120a01f3f3fd8e7a8185727783132245f50949d7ac4830fcabf6c6b94a2ce0450a777cc35fd0ebe36d30745ea293033108ba8e74b13e9903d1813109d91ec167a59a564149cbfbc5dfda04e37aa245f58ea3cc72addca7315e259781a00f0217924eb99185424e3d71d584a3e6b4e244af63f0f63d24c8970f3e19e3f413e265d7e2784c26e86a90786fcc0c9d0704fd18f1c3a38f1432c2c308d35448272fed3cfbdb9a40b79323f46c48cda6d1f5a13a41ee5c4659c4a8562532c04409100fe4f6c40ff1cc25256b7bd1277fbf77926757f535f975699f11042b84ea6dd62b288c603f9e437d0b9c142618d2918f707c242d4acbc7a1bbeac1f3d4090a47c069f2ede855e4eff71a33da4518ee879cc71697a78afa8bc8a94040e9c502ac2e7275471cd7d6a21b882eeaf42b0995f806da8f905e4f95ed10fb394d5feb7711ff0eb8878eb6ea1818efc9ab341a4c7cc921480fc5b43c2b3bea7f48ef516fe2edc90c8f1c2e354dda94a994b8df9c286b17ec5a78e69a5f77a14a98a159540a056b7c8cc12d19a8c8164426063150d3948ef6351dbb8103bb1d481b4d71c3a34c6d63a6df986f51b46f9bb4240919071208be48693b631afff6bb33ccfd648c5700022d3f9f28f7cb438c8eb93f3c52e5a109980ba8aba30e4a62a52761d833622440f196aa58ca0ae7c69ce4d65659cafce3c7bab44b0bc74b3de18a57c0638c805a0a5bf7ef06dbf1ad385e65b9f9975608332140ecb84124f071b716208fec382b477f2d74233d9c737c71fd649b854dc233637687e3f5a335d0d3f76e0b0a05ea24ff8abfb173d1419befd1048ba4fc38d6710c9b5d1f3978c039c35974c08aecafd2260c4df9998f085180f8d33af7ad05d472e9ee25341fef1f5c3649c909a834e153ee3826a459738d109f9a47e8dd573a3d438a27da3a5c8b3ce93b29531dd3eb9e368659afad4da278e4e2d07eb3c7380914f0918f76692b06bacb8c1b9927abcb56a41f00efe122c7b0f8d696140cf2e9b64df3c85062f37eda778dae2a1c797fcf3a71cb49dc4090cb7e4709d6405a7d77f4f53eb17f4f356041347b74f4834b837e215f0558bb846b6b5b35e429aa785c075e688e4a856156fd66213aefb3329db4e4fc951a45e0967c1c312efce5ed5f51fc4559aa2ce43625275aa4e336eb99738355186bfd52e5013e8ddbe53361af69eb88ddbe9f82fe7c68449822bbc1bc6b99dc74985ed504728ee6bec814e872368ee9ba0a2f57bf2104ddf1b2b8551c8952995f33e52c4ec33268a1cdbb6441222a7ff60220dd045d2b9c7a0386a06aefd1442b379eb45789cb7b61d5cbca920bbc4e689b0280bfca74c18a993718cb3035932f3e6df00b4c8bbcc9c24131e1e728daaec67a40afe488efcba6cd2620d8d6f8e6cb946662863e9747399a9f4c02c0b028b0abbb992bcefa5778766fe30f8e1f1b0dc925478fec5ab510358842258413b99e9e360af2c019b50d1a3c9e6eb79e751b958b3496b6a772c4c6edf831324c8c11515539d9c37277916319288206527e4fc9fc11920ec3bd3cc74a1fb1e1bccf7efe0459f5a1d062b556a37a5487046e6ccdafa1005f277f0833bd6cef9bd5083bb4cc1db8104b32270b5845081ad05d781b5762d8964d01052b13e902081eb6f1ed1dcb5ac3f35783229596eaa3cf8d0608220466aaa9ca9341681a95bc00670833520bc41d802aed87f93f5119c70bcc9497ffc556cd0dae1c1e6d04b2ff0efa60edbb09a89c1842ea14ce55116e447ac5dabe3bf5237a7e3bc30147bfdb9e1dc8fae9d12835a33d851a2f4552a1e0958e376b88c2708c8b913208ba47fd640f6ab82ab284a85c28a720adf4ba601578993068a29420b8d788419cc4a83a2cdbceff2acfcf3f8d109a2d8d8d0aae2af820237eb863466b779743f3857ac6c024b9024498b00c1db7f24031a6cab9f022f953d5efc13f6b484c212b9c135e9debc9a465f07e9a265a8d8a3e644f204548ad33502ddb01f75d98eb0f57d61b00625c5edaed4f68007fc188f98c3ac161c1aefec116ed3876dca360ef502aee076f59aacc77d139dc86130d1f6abe98db56ab0d00178b85aa0f367694438a399be1bb4c7c475ad107227da9c53d8b3060c97354788a65c6a233e15c8d1ef8725f146eba84d1eaed19ed1c5f443277028fa60fb98f7b878ad3b3603780d41aaa2cd5523abcdf5d6a2f4c1d58a10cdef7de0726d21d5554f81124c269095f1ba2ea0bc113a0bdf91e2dc793073c96755d310cadb8049d0fa4c15be255950df76f2e2acc5ddd44d107bc2632ac98acbfe9741e8d31d4cfa04c47c8aba624935f81387816c1ef7be05b7ab97d73259731838b1a0b949fd0e18bdafb5124b6070c6105d3d19ae2cf45c3dcd39a0c3561eba2ff5e6e0beb9a5b8c1b20733c2293748a0e64a34caf37924b906d8703073812fc38896541d9c4f799f6eab85c7cbb7e3abac6b0e56d9ad5542a965e62f2326dba1bb9121833397f3ccd25eb5c9aafeca462435c97813c13a3c6331745a7f2175ef9790ba6be7cbc138ab15b1f048300cec6d983c0587d407aa8e30c2f73225060880d7f982bdc73453c49182da65a5d3d65fc77292de01478bdd30e78ef777d6f6f0b1cb1fc6ecac9ab75c176fcc927df7b25897c30a4d14a89a09063d30049f4e5c461a2307e7d4dbab697119dbc2c4fd28b48428d34903f50072cdd561f7dd6dda81cc70f5865886e20eaf76aa4337a58ae28ee4cea327422f231ac347ef6e1c79cba1b73c23dea81a9bd0cc731d4effa7ba0a77ab9b2b802de8c766c6a86b41fbd4e8bceb785a9b7f6e3461ec75db23d50e0d42e97072ddb1b5d0d3898752ab9e2ff7b4678eb383913c63a5edb3718039d51edd143cabfc30296eeddf31931fe2d1e453929bf47ff9a566df3acafef4033a8cefb7d9ea1908d27cf68050f8e8dff7b79285e3d8b05addcf05f2ddb495ae675e451f8ba34fe14f95051357545a2c633f24f9b8d98f208a040a479d2dc99b547b3dec9e530bb1a268dd7492ecb58e376acfa515df2af6eb26cbc1134d7b3e6cfff0c6058b83b9c64240a2bb29c0fe78c6a12d4bbda0af5b8a3bd1191a2c28a58a513f664769f414370d7603eebbd7eaebb86e38f472906af98666b44775990552ace3a56cee4fabf31afc64f530f74207190a83dbb924a907c5dda454bac71d2fba14218b4b7695b4f66499036071c6ccca42abe2d8a29e5276ec65a781473032e1d4d4ed07f2bd0f83db58e9a0a639ad9795aecb3fda42409ec8bde914a7755ce05ef571705109f9abd254d46878dc5d107013a2710794fd6b86370d102532e4ab76250e73aba7bfeb8845bf9e1657c96f4a59247b540934f25e7dc3c32d7fa5eba3d901856095caf6b62a14ea2e16ae28d225f943ca431008c7e9a878ff031a90f45d2ec64782975477bb89809c27434737a910eb80b12b4e02798e3e8a8826a3fac0fb135790","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
