<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"40aeb15cf812fb3ce884453ce84aeb4aaba8beb02f047ddbb2090dd6ec186d2b04daf4f7e38be4cc6e6e3ca7025903edc898384b996d9c77d50a5184b8f6ebcee2e9b0e9316c1adab3db478e6d3d1637cba8cdc31a5231f1945d5244e93da5b0f152dd64e4671a2a95191c5424b1eeca44cf67c95d726a2f60f6556be72fc871d9f379e86ef0a5b52132761e93e27a2d30370a412bb91b7b218d008565c2d714d55e8b1b72ff295765af717f8b4de1b8933cfc54c614488f0b365e94c9de314d807555fc314bb1ffdb2f57f6652cbf35666bd6a44aea80511f9227315903ec584102998307c1b0fed79eed0650458e85202b07cca01f135023b47654afd25498670efb5099c5c180dde9276711a1acbe4e1aff23a6281f0bd328f22ee56b8fb26ca4a028b893315d9f0046b33d7982974c8c119d11ee70202788ecb048cd1f266b99cc96d83f2c9e06a8f47c2b951156c47ede023ebda86045811f3166e1d513032cc6c373538187621048747bd411ab04f57bde90a629c0c9233b3d64cb587a92cf5af8b7d8974e836e2fcbc784bc9c379b1d1c3ad3f2e6697fd8a6fb31ca600b4c1d605db4b9eb68dfc8847c6641112830edb90bba25bd14df786f4ab2fc3f4f024a79112d2fb73bea3fc3ae0c510300b3de2aaee240343530f506eb757681071a220a99f8b0cd35ff7ae157d409b148622fb4df814162e78335169d35a76b9c25c1d9ce4e4da200ffa03da93d50a3699bc6a3a78db98b65d005fdcbe8511b3d753b13ba70d07d0c94c8ba8b7cb84277b40e148b88624c2c6a81be15e91d40281c144d39ceffdbd5802f57cd8808f1f1b59b509a3e28fad8379322b92dd7a5c988f74aa33bd1b92fe5e881c56106666a32861ee13eddbfcebbd71e73f5f2e6753cc2007b4a4d43acb4cfef46200db0ead6794d2866d0794a3026e6ccf73798f675aed4af51f789d2d929cdcd474ae33bb2949460d49989600fadbb1ac65cc1acc38b9286ed495df3c74ff286ce5013e26c36697c5ae9a217deabf8e2cc749f500f8db75d2377ae0ba0b3a3127355984482a7152d95d0d0956e7c0da60b5835dd681915499eea4a56acaba5751ec2b8536d6c203b85c0b88c0de9c4485c33028863bce5afdce6c8662556dbba60dbf2a8b43504f371cc1c41a3b0d934942dfa300169051322c0e59e1b2220c1c4819cfc5cf5fa0843d551e62b554a64ef1c4108963c4ddff2c085d5f403c1b43b209f4b35a3294bd74e99927ca1c617faf473b0fb79269d4631718f9e1c3f3aceef7b82338b8a4026568960155a837090dfaccf2180fec066ddc437a894113b3ca6b5ccf4b9e37c10727c758d47b129530630862d26cb6016bc1f856e213619fab4be941cea0c1e1e3155903f01ba60645a78587ce580ef10b4917d12dbfb539848b19a2ff1e07abca8f376970edf86f8403a62b45fe6e8a2d4c10a39888068d8ffa1d449c78d34389a916df941cb877fd2490cd38e8fae4618e9756e9902160d96e871b663be08cf7443156fdecc5db99a1cf4ac6408e83f75801bb12901dff518aa548f246ef66640b168256cb9ceca466920f707009ec05807f951ce38b79fe4f48862464ef1c7712082e8e547b18f3e1a5f2b93ca94fcfefea137c03f20f4701108e748588c8448c14bdbbf4429e33fa65a5608f3d4abf6102ed3afb8df5022973a379846685f13d61ab98536935bd4296019ec6365a9ab4eb268692c1aefe1970993b7f960cfa21823605cd3cc011d4b397ab19f1b3789b20db9a7f8d0217afd83ea4bc0c709efd21a3de8b5f33b251faa043c7235fef28673eab7ea4d3164d4afb5f2b34161c4932d8ac2176811e7332d4b208c3ea249dbf36869cc7fc35468619d3ed7c60b58721619202ac19f4a97f73b771fe9f0f200c3db8e4f55a5f293220c3eb2887b2c124cd55ef1db63df6cc33c8bec8d4215bba94b1f3241d73d442a51ae6cad45dc6a27465839b0c4e2136cc815dedb83321cae5c338f76b2ae89215870b930b8bf59361068152246c7fc8a8153da6b209b07388c5617da18c967d54c6e226ed29c937411cf6fb54181b72c56b40a397a864a4075963d90e17f3ab0b198ce8402bea51335ba112314d376996da05c254ece05b44123f854f301ceb26a1d45827a84ca757412f6a5867da22245cba3b64246491d4952fe17a7b187b7f8f4bb2a5c483df5219a36984b26641f006e6141aa285732ff62c5222f4a9fd4fbd0189c33d63959382c3c1608a4aa4a24cec02e9f712a058e4c382ee1458cef318a677ff1f5111ad88c96c565913c9daf3f247a84d409732ef1e802037917d5cd9761d3fa809df5638a7c4ca7ac4902a74d55baa0ac3b568d3f6c2b10d0a9454d71dfd64de056159490f2a406956aa37badd38b701e7ad7e7e4fe2ee49bcaa3cda6e4330d2e666554e2f1e31edf3a50941d80430148b521f1c2ad5c91288a7d695c0920d0bcbe4877cbf0b9973870b4778eee316c6e8ebff37fd921c79daefaa1b32603c44c7efa9ca58bf60c1418c8b7830dc59dce04dcf349549a5c8e15d863a383d873052a0573c0614237ea299636cd474751b5b1339e0452f8c021b31a99cb05a8c169779e280dee196aec025596f34937fbb6e196073bf7353c9744138385b2c9fcca3b5caa81154e4accb35e00fb9f49da8bfaf5ec55ca772be27d1f034df87b5e6b60d35918637c2800f66a42623f33c3994062d1df26de153d6dd5f8eacf96c773549f11a04cf0440d23c8d5a06eaec998edec49774f8fd2954046fb7bac6d81563e1b2139eff4e8c91d2a13c6a5d3078f523dc77682cc263e8f318e0073e45396709175e3c733b88c54edd070aba7f5bff35cb9268a4c3eb64ec6fb4fd88ec03728d5bd5af892926c180f0cfcd2c9633dc5f8d0abd879b532743bfe52fc9d4c84fee67d067ec86b88eccc0a666327c3ca2127c7ef44882b9497f0db8903e2b366ef385b1597b747dd9d95e7ef57e312e53969d37ce028930fe0b7186b0f94c6045b84c4f2be44b84a4abac5f026101500286f4c3dc619f051e6898649316299cde9923b2449106bbb38d65649c0651c820d400038a2f4caf5e90a7deeb23a42a02ca64c22f4f0875f1ce4dce5ccf654fe459b3e0c49fbb2b8f55a25d62c7e5d68bc75c7bcc8fcf3cd2de1a4936cc50dd845a1ce58f9ecc32b62eeb96b5a6634bf8ade73d22ebed0d4b0d39a9a6b9ca16854612944b73155ce0a5b8133768f4187a9c7d2f62564fc8776e7f4d2df91cbed882354eba5eb66b9cba907e2ab15913d6492b5b618063c3bd5498eabadc330afcd684891940fe83f1915c0cbb15c59757ac0d8591a017403268c35a1b84a37f21a2bfc67be8429cebcd4a81ba9e9330fc1e6ea0434b92561ab2f9c70795049b8754d09c03d27db4d9b3ef8f7e8c07d6f5d0f26a6bbd1f543dbdefab688620dfaf279a836b74eab94056068b5039478fb7b189e6d83c0ab31f991cbc5874a28503c8552aa74ce3588e51b74fa6eced91ab796b27c2bb950b1fb0664ff20264fe0dd97c62b1f4a0e1b77742f5911f363626056cadee91b716b28e707576ad4592728348cc9ed4d2831466107b64aaba13cb20468c10a985d9f6110bd48dc325888b9449613514130c739136f7b39a0b42db0e64230a5eca4604d1c8a3f870ae4363933b6cbcad86c54818ce96fb0ce7c7f9d512b4bea9e13f1cd1b0ef93af0f896cf7718ccb72741dd1820c989c911cfbf1178b76392bd5c830d04c42300748ef34d07d2cc01ca50e92e031774a6cf71343645b5fece5aaec07a271678800cee937294eae7d4f51e285534b6c1819f3247e881fc030b1d6b04e7fd87d8c0179504ff0f7bccb5c55fbe156c3cd45792344ad1842b42f0396074a2c135edff97c423369053bfc3a1432a1565658baf21b5ab1495f0886fdf30f9224ec575d046293f145e693f78ed338d74a95b4279aaa946fa5f9e77a1cdd1451bbd6e3483d1331db3d324ec921632457daa862f307818f67545881f7c9d4306712cd87eddc04c9bd6a1d80f0ee6ed4ae8fdb9a0c41ed09069322a8d63b78684690c05240caf1ee02653b6006c930e6ee3aca622da768e04bbf12648efb2b47079ce1220e8e8364967abf742bce4122791ede9d806b5d9e994b52cf709cc18bea02223a74e7f8682fbf3f72d93dadabc3f2ace3ef16eabd9438139d1369ffcab33cd1d8e4499c3f1d0e109d913d535e4321dd7760272d246df94372d646eae35f823d015fedd9c144309821c4079f59f566d72fe1b952566237c3e72ee21bf888b8766cff9dda51dfbbf7a9eb4c8915c9933ae8b186ca26e3c5e32b56d9613899c29a727d305ca2f7d3e0f723d10b5a45a3b8d805423ec15a4718f1636c4e6398e4f6ece97786f3d958563849d28f781ef201938c490205e246a2de4845a805925d5d35100d42c4c0933fe2b0f6dcd27178b63677ea379025965dc33831c2c358c2b77aca418f44f01647a26cc76bb4f65a4f252b6d722315615c807b967274ebe4218c05cb8aa107182801b1a48d52a4e7cbe04929b59530ec58945950784744ae1bfe88f1bcf61b6734fbcda4a9ea44083c3baedff1475c606093dd847653bc90a23641b33bba0a4f24a145013ca01028944144652f961ccdbf63f9e3362acafaccf7cc06d549e54204a86b1124de05c43f65b5b3513ae0b3b87e1d08179c88e3ddd5672f4b56cc38d0e26ce698a8b4233b37e1c43cfbc038deaa813462abb7e2bd47d3d8056f07d3e54871fab1b787cd6ac4ba7faecc83914cdbb4290973bbb8c252ba4b843c9e11ab004f41e66afdbf438d25cd9276054a0439a3af879047f429afc848d47e379a08a5a2d1c96696678a97541610ea0c1da90865e3eb76c6026fd69da3617eb1257f57e101c14c6b757c1b02561739db65eec3a77dabc2c9a20e784f03849a03c08f869fc32df12f4e980e004b8824cbce7a1bd7f76fd10d2ebd9ce6f21545909988765fd8a91cd8e6f892783719554d371811eab72128bc185ce895be35c1f1fef5acbd502b03ac2b94ce12e8acf7586dfdaf01498494c0c0d976f1f1ee4d894261c0a24633054fb0223a54894d0ffd72486b161feed59787c675fbe9225e72679bf836296d33792280233a6ec2cef84b4aba4b26a5bb3124b3eb585f41ff97c074a937edd22e44bdc7f2e42d4cb5a2831756702b6954189a8e72221f8bb1255da6ed0a6c8af865d7b79f9e5a73606f9936938b054e568452e9e9771f836e1f84921ba39448081bd5b307cbbf188e56aea63ce723967162337d77176886febcad02c469664f3279092b6d9eb3ed3471547c028581bcd707679fa26d0e7a58ac4df23a7b723221d4d8bf2e6a9695083ee08b544d1e34f96a7af1dddc30daea5f57ff1d19fb13b5b5d07aa91c3259f1de41953d924cfee7c0e682f85ea3303938bcaa82a9743196ad57ed7c2fd8bf2a74434ada6d2a74d9c395d6447520c909092246448a94078ec4165fb38cd13fe85b0b694bb8747ed6248a65c813de8fe2dfcf908a69acff6aaa60392ca054616321c8ac46e63ac651aa75bd8f8f94dff71f12e04c3ee5b71bf7534f4f8cec42a5c96232355d314b8b8e2867df40f00c2375ca60dc572df2fb0c2c2aa08359abc5e6c50edadcdb9b083681db51b16e9b964767115d568531403772e625a92af089a02c175260979b7702e51be845fbfbd96b486456066e2e094e36f0dda8fd11b08ec317a9235cf389a3c6617baf2087035b36b2ecbbbc6309792e3c71500774735f6fe7323d511237e1664f5c28160396b28521ef1b7113e4b566e91517cfe74af3d84345c33bb2cd5c7a21cb27aa7b19ada423d852e36582ef8a13e54bb1a3a4cf7701d5af93d9f05fed78b35c2115e152ae55f0ff1882d34af3e3e08a02e47604cdfd38b41a8f8efdfbf78696a43b8d45ab8b4f1a8487da05b78d063d9282180590d0defb69cdac9600bcbdd3e9e3aec3a30b7fb62d3a1e7cd2e9bf9fcaff78a8a01a38ee265e0c6cbdc973e5d9c3b5848afddc769a3144659c0de093859398ac96f3854fefbe15ad2f8ef02a6ea9462b21e553afab2bdb9251d9c926939cd28cfa73fc311e0f0ebfd5f889cb5942a745f8841edda6ba1dfe1de2956ffdc2f9f2e88853d7997e00daefeb022847c2ae39612df567cc64c7f8649857c8a098361000cede9a4a46fb793ede6bd0ccdc91bffb270452d5bad1abe5c90f5d14b86f2bad3d3fa41b6ea1ce786ce744edb7e9d636ffde74792570b4c7524a582215242af381075d31d7f54ef00c6bd4f4d796379b6ca5989d0732c356d4ea9e943b5007a1bdc38c1c44cbb1f41c0498989b4f9d5b67b8cffcf454dff765734dabd375390ffd8a51614ee99efa48e143fd45b6c3e85c9146ee99ea8440609927b16a1f5276e2bc05632adf72c7af15cb7c86f023e25a948fd6409ef6a85a0665fe216ee0cb68f0a2347a694002629853f324fdf9c1d81e677a6a1e81741f2add40d87c45a6c077bf069fb452a5aded454b1c03633fc15b67df7f1c1e8106876c51b8ad48837c5634af667d7a73c62a3d8df5e3e0eb62aefbb3fd73cb57aca18b4db9975bde58c0a2497033ac8b61af28d54a143442f418f98420736ed9fdb97c8da9ca42bea0372ca5c730d0a4562f2e9fc32225bd73e396e9b06849cc4adf2fb18baae4f520419b54eac5dccf5a2c0870a43e7ebbb30daed4127023eda28143764c99d0867427c672bc6c285182cf0d201de3d5fe61234fac008949aa797fb6480a6b1e5f208e3d00ef08cb41b34a622f3768e17d6ea441a3357c391c5cf06fb0cd49771cdd60513348d29f2eee8d1e8195d87c5d2b2820147fe36f9f53d765695ccf3dd739a5275ffe2c9d8bc3a98c817b4149535771fad93684fba7ca94878b023463201f6fcab2e61e9adb704e54a921f70ba2833101cbc00d5728e263ff15ed78b489210af3fb74fc2a57bf3510da31c8cfad75be7a35fbf1a4767df66a71521b23304f0a3d3595d9252e43c7627f6e7f89df740a332740386d56f7093b44fc00150788d7369a7a0d30e13782a53597cf0454e6fe0fa0439773f08c09761cd0540e92f1e42f5a45635b249a66bdf2139c8bba89b2a92f21b711f0b120205f2d998fb4daadd9384ee6ce77c4f00d82cbebb4fcd975c34178754d17bf25b6dea608a360e0ef915706f473397a64d1671d9e60ea6c770711cc08f4b1f44a4b6bea6b141c8c9c57e02798160153bffd2d196a9452ff651697d1fce79e85f392cc72cc3d7c96aa52a691d64da7fb5a31caed345042d88238f5ac15e496cd1d127380b061fadb0c20834ae8756e6ccf5c09c4e312839a71d92bce95d468773de54b2a1aebc0effddc01f4d55021441d5bd900829c5f502c8b6240d021ba295e0f5554f572dcf94d6aa9fafc097ddd9f29f85cb80fbcefbf01c7436fe71fc6e16481ff0395255d0212fe9b1c9d754b657a8284dafb2f4c92e899214ec56584e59f84473765507e784f1fbbed3ef16ba3a059a96890fe709122d548c9b82c88fc1e263db17101a6573d2480ab864976b6b0b5183aec39398dccb5f51f08cc9d681ca05255971c3af594067074cf3dccdcdf43edb6fc4286ba479204ff14f6e1d7703f8bc8ba638b7d190c3ffc4d994cf2d3edc5edf635b622df0c824446e6202cc29253c7ccaffcc2b030f0d294b7ca8187446d56a1ec0a2f234ca1d9e6a29e4837be5ed692edb618c8e6f420719552fa79860ffbd5de3d42f9725bb8145de59c765f4967bbc0886e2b8697a84d09835a3cd31bb6773b18097fdc13925f4815f026078a4a210e5df6a45ca4cae466f3c76fe79cdd89b876a4ff12df6df9c4bf0806b3009a67df4f3864977b9a2a4298f108aea6ab575222fe00d64f480b0c644436441d51596b904daba13773b3ed17ce562fe97ef1d491979a420636ebf8018310e3aabbd1baa3afb3511cccc03882e88bdf91b5bca014a67d1d483b3c3c37f79adaf8616debd28d578a66395a5b388fb7dc112bf3a6774189183daa8e856dc73974d23e5aa000042a5d194c0ae681f074c59761ba88b6803b34ac76eee236c8bc296f35b42b77b6bd5b3169e5955ec5c77a68468a0f5aa3bb546086b424b39fdb061e13f05ec4d71165a8e93a0857e061dd414190cdb5489a0c5f5dd5c31e360485a6814ec4fc10014636c6acab5656e66be109f8780dc9469ae13ea9e4a9be122a164da4149052b2f2a35138430ed32a538f585d7d10e75dc1bbb4fe738ff304d00b945b4aaa362859a4cd7ac0a4bb37480200c23ac052e202c6d284a344478954d61a5838442245fd7553ebc15d48ab7ab939649c3a54a88e6dce2f937c3694a2ac6f55981af07fd61ecfd9cf6627cce6f493d77d2b52ba4720263e2117f3bfeaadbc333c16f1b01671ce41c540890f55fcd7e885537cb4eba6a9fa4d7f170394d8b6fcf543ad41e928e23696ebbd5c9e7991e1f374846246243b8012b47242a52f4f9612167654ccd9fa693f41a450eb22962b0aea321278c7f501fa260705aa838590b8659b14495c7d9d44eab8abeccc9fd985d9ea0b50d824107d54420596dd16f43c98880cb9c6e43416cadb5b768ea3467835f654339497a9cbe758118b293a026d3b3f580025539afb6aef5261fde4097bb301a7e7262f78d0a39a5f0ac234a2f34a3e6a0ee47b201c2f81b6519948b90b6edc8cb6e3ad97f31afffe761aaa8030a31b95bfc512aada29bd6935ee35d84aeb10150fba4e50db7df721ba62e9722eba3ad57b331e56cd13f86a5c178658ceb1edb507c8186d49b02d75af69ce1b91c13dde9d6ba4000cf9ec19143d364ea4a35e47d61aaa5df3e19d90643e2730a22b3546060116f5d43316218eed25dae9c498169e47af417968d4a0dbabedd2750660dc32fe4b2f2dbaaaad6fb0c1b0b76fa6ce616508ac13853858cda8341642954199b2e1b21676bd5ce7275bfacd1be1936b07b501e5c7250a396974e490fe9551e3e3e8601229817f10bf8f58a3491c6b0f6da3d17874d53ff8b6c72e4f15c691f2bba12d12530a8af54c76223616086b7fd6f4e7521710e6b68f579a399127df9a8bd03c7b3f9d6a768ab832da41e56e23f960599457232811c78d678f130c591509f772e14d9ce3e8a2b9f68876cd2cbece9c534d735a903b42ebceedacfbbaa5614a8cc08f6af415e1e4abbd9fa9e688bc6cb098250d068ec597cfe15e160e2c4f4e712a3f7eee2e0a184e27ec6db28b762eee78a2bc9732df09f9677cb2e2ec800a03096840c2a03ec018be8609ca0aa6c945c7e8e0c530267a1d9d0f97fc6dece635e7f549dc7bca924f7590e0bf799132da8357f1e21c652a214542bb5b42d65bf2c2227e6c10e97921965df549249dc2e39c11529ce3b913479d4d47c7871373533c123961a30c103d0ec3b6418f23533de30d4009da27c8e2f9796e1cfc11147c400e6fdac7347c0a3191de6bf92561a90f81af6548adc2da0daed4d8ab6f31f4497b42cfe6b7dff0dfdb24668081508e76e7e5d00813ec966b2fd913b837aecacdb4157e20649915db86c0de36424d2bc5f27bb5d0dfaa79b4251b7f443439989bad4a9abf8f9c1a24fdbcba8a5cfb8329812711ab64bec3ad4f86a6d523a8b9727236b078c41609a5e14f2e5169cf79592ac645b73fccd1920ccf9e6b78f8f3ba60a78f9671d4c65ed4f4ad53b3d5a3b203cdbe75a6b3e156cc2384f8e9b7b24192657eadca94943cc6497cf99329bfdaa5b0739da33338a2eb9df75b9b2183e912aeef635a0792abc93a716478db273f0f2ff9244c99ef3bde3d68196487ccfd22c222c79b402d29da11ac87b64693d15d90758cc5a23f4b78105a323ce2356d4f85fa8e0a2f07a266035481f0dcef5ffa0347330501395ee0b1a31e7e62238179e71aea9af5b11a3b0e3509eee1c1985b2e1299937ca45be0935fbfc94af37391a34ce4a73e2857f2d5e8a0b3c3dd5050cdad73cae63de2ce38b2c3ec7c18f1933a7f9006ec75a4c6afbdae1e0eec507e07625bfa7b0a54df92001145f946863878d2173bdc809bd35a60bee6313778c6d24badb958ca42f38a770204a2274d25846f66fea87366279095f06545e10dfd24fb1d90a5457d92c9263604202b0857a2dd18e8b579f9be707b2332de505ea20eeeadda51fd8f6fd0b4a1411a72dbbf81f4213e3d07ac387fc2ae1ab2087b59fd7238a9d6b0ffefca93d3cde60969a23ddee8cd7ad8fffc2662ea3987e96d277f9bb42820202c7ee4ab2b84a3775983658943e3bcfdeec522692c2977a495c5aae3883f859e964ec83dd8cadee78063488638c80bbcc6dcfe0cdab6db16825fc1b39a2237eb8331377acb04d1dbceb664cb0c59155005b197fa2ebd7a398f815f22fa5fbf9bf96b41b740784afa2a879fe4be128cb7f4b0c5fa08572e9fc99f9bfe1b82efa8f298f3da0b57e2f6fe37170f0d3b9cccaaed797af8b5f6a986d3d59bbf2e9dbb8ef68c48ca636b56fa6f7b1bb4a88c0e7d862fca34bb21a287d9761d8b2c1bb1c5bd2b6264d702f567c40a36b73b8ba1d50b86ea8ffd05a1a461e5e971dc8b7fabc33113066a827174c46e19e12f989b2ddf4d1ddff72eecbb66be97f8feb3e8c47164ebd6dd2ef2c72ac5836843a0ba3a4098c199861b413fee2c76ddfe03e79a2a0b216632af17de33abcf90a55383942c3e99ffa3ea3f5824ae24f2422487ca7abba189b5ffacff62e22fe4141ea66ed129881b46b234c1ccc3acc27a6b5e64f0fd7f0a121020f3365458ba2aa8deb130c38e1aeb0198a4153b2acc08025e7b15f6fd4725e01fedf4b2add2e9101241abbdd5276f91ff8a8c088a8d76df9dd3338af35094733f3af2a40947519a58153a3ff954ae539fff685ad3a7c8190874ab4353494137e508bf652a4041bd80334e81d9c4f8668f41345eaea3b3c682cc753b1a32eb40c85f3ba47741d24223f6c4e2a5a57f5d5c1fab30a366746a9e9222e0901ebfc3c4858bc498bc1bac89f0d4ab623d47c1e6453ebd62d4cd425c93358770db3bee1e9956d2e17017d0c82dabcfa06c9c81dbcf760e7ca6fc98f1d486e5dba80473e84ba6358e5e82016b1a77a294bd97bf4d3fdb133d7ea48d6f3fec994fe663808db03b63b9d9bc16502dd5ac032c430a6b021e520fde991fe2af838420a907b523ae8a34f984dc971b408b1d288a32df7b8cf657f44a76060cef0f17cf25b905d09d48e3d04969fb9a372519e5f2b69c3171107cfe8b1eaa2584c47aef7ffe986787dc655f497c6b79421b34d4faecb457a5b81eaddf3c1ac9e7d2930dcb682d1a57cb41cdcefee7c9918eeb6e33e8e9fe9009f6c8311e6d745b210807bc1d500bbd5e85c0c32ab9476cf7de56de91bb530b0946888071d71e069e9a5b3bf9afa3bceef1dfec6670c07ef20355680589a1292b0829685faf9180b45c15b7b29c06c902f651cfe7b11d140f3d62291590e93b8e36e3920d1ff975afb3725a0f731c5e716192bbb215a02800d125eec4f99ab0181ac8e8d90bfd2ac781e94fe7aa8b59d66b852dabb13d3f084e2c4b81543b8c7640c15038c3e543efdb4ae714c9af3880127e59e232ca05fc6b6f155930a9e848e33f13d69a1b849a0999f33b6d9073ce05163f946e4468f2163dd1c7b090962f2e8dac6839adf2b453511d7ed0340ed1fb0db6c2c9a55ed53526242dfb1928d473fce04089dda89dcb24c594a26593c883145f861c1693a66f6e61045b0e04735c2ba7a14337b9ef1381bfd1352c7e647a146199e1e3d681e894e2c938809b9f4cf5d09c908414f7a1c2be9b3b375481a8bbea7605af3a93b07ed09a85ce0e087a2020dc5a20b05c28e860b885ae0b366da81355fc85dec3d7abb87cd19dde1b72bc5833a2b52084a2e0ed62551610ffc1f04a4ebe54dce02a6c430a75c2eb24b62355df7d2e0d7921215200c6ba08b34a112ff9b7d4740cf78489cea58957a29744f2013121c8e4e8cf220203ded52b079d647acf3fd6cb8d71359795184306a0050ce86e89b8477434b7f31d2e739011eaaa3a498329019217875584dae26976a000fde150e9c28418546e6f1d64818433e64ddc5a68ef7b60b6e4d5db1ab53f0cebd5a20e4ab43c321669fe3eea30c130cbc1ed0d030e27a5ead1bf26eb6662bb227a9d6a7308f7f7343af71b36c43492f1801c095b6850099914083071d0bd5058c024a197c72189c1aecd331d54a6df5176a238bbad9d231ce8d8560e2c507ec991bd9e05cebbc1cd124727c562ec136c59f322d1597b4ba775ecf47c17eccd73eb78699656242599db61894a21a5b6a595b903337659391698335472b3b8649fa64992de783f1e2ff77186d4bd619c37be70bedf89d5c42ca3750ecae79e4654e093313084b83141ce06fd32a1b8027531a5931616fe4ff21dfac929831b65c499759d3f61e0d903c45276b39aec1dc9bd128cc416d52f96f2abb5a8a6fdbd4efd31499e1762205705f69c2de47f612a4812ca57dfafc9abd40d5437f783515a80ea023e14f033151b404fc4deee247e5323fa31cfa730baa12c41fa0f6510d449236f421826cc4e4438a984a38f9c14fa67ec961cbc8e1e8a9e6595305634a405bcd964611b3be90bcbacc135a64596f4243bd80e2bfcea3f14c8e513a72d2ae165e2be5b16de4957fd4e0922aba9f1beaeb595ea711fdd7f76e4335e0392294448bc924f3168e1aa595862e4c7968c72b9fe0572c93eea18aa4045cb546b0f10be8c0db9607251655cc823a56ec7cad80bf2759c600a16cf3d127509f2686cce096102dc490693edfc2ce801510c1895be7255e3c795b6c76fd9fb7056f7e7011b794aef111e4876bf102f6d9833ff4ac3ac8273beb405fceefe0d3b5b388b363897519b48df5b6e826598ffcac351fb0ab059f34142d6f39ec281d0c545076bd35eddadf999ed34143e7720f8ea99a1766495fb19eae8ba0cfc893b6b51d9388e3d7a4e86ab611a380b987d47427600b31b4d3c171c8c9cd634d8352732aa932bfbd19b31979dd43111f1fd7b843993c55a746daecba067566532ed23b0e2c47fa6db52c48e026c6ba1e5ce28914bdb838d404af6f035d4b1c490e240bbf0e80d83c1398b79dc62694298022b5fe88187b4f1659ef77d3987e0490529a28dc9e46d2bfa0032c6699428b14c88f19997615fcbd20e6501028563c5777420d5f60240fd1388992dc8d88e4a4786fc9e2532dff4e147db53f845ef6e1c9070be6c70caa71ac8c9595f0cc496349963cf6d61bfed0f135814f02aa4257fcf93d71079ee08cc8b74ca69f32a28ea70b915de91de986454dafab039a210df24e7bab9f88088671715a279c811342340332a8b6151f1d932b9956587e2aea261abb7ffb6f21e2edfb1e9e03e5a14948102fb23d1c3ebbe2de49543f4f0e658baf16f454ddc8193691a240326ec50f2cd9b0c31c959f568b9e1bc209aa6bf2eeb5f5c99ae3028b59be8a2194b0c8eac87f6f54c11715d4d0953673980c7e900e3853b9215906150f125d5dbcafdc6e585260547cd0942d1b4aa34e306aebfa5fd9a8723f787aa4d623442882cede61069d1af23a4eb180156974b51a8fe5fc2ab97a0db76b03a1ba3403dd0756736cd6b4f13eba39bf8cf242c5a4f2c076b8624b46829f63e16db7f19c33ada25ff63f0dba0862cf205815820f68523ff004aa5bee082f10e08a83d51040cb5d415b6ac982f72e1ab60685de421403ac7eb26a76e4f0257c585b6aecb6cc79bc3db346d4bc5587bff5989ea40cac5e32e85d257fa3313e3c2856cddaaa8dd14ab5fbbc867e71d0818310f5c1ea205449d99938583d7a2a11beddd8680a0bf1ff09a7532729f5a419a2d203cd98a0e0c682a15423875c15dcefdb93e8535822a855c675a60fc5e67fcadfede74b46a15fb757e7cc05a82b436dfabf0d1a4b309082a0a2d6aa854e88391426278348e404fa7d2a912f82746a1d5e9897cccf56bae29220ee7ec4700e0bd29e51418b4db3d23ea63b96369dfc850166b6c377cae51660f0cfebcc1ed6db17ac1a266da6f0c5aa7d251cc5d0844be11154c0b7c84c27f897a77721a1264cdb5db83e3af0b1238a52d661b54b961870d7ab148c300e13e78016041ec5a24bc8eaddd5b037e5af6b3d38c0d154f2fc4f7b22199d2ef4b005c88208bfbab614259afa6514b97f0b44e28ca4f8213d6657a5e52e215f0b9803c9edd89c7389563c03b17b10ac9167ebb6513a26b6f04191c628292ae7eb660a3cd4e4356888361495956f39b66ef4725e3e0bb21e688e4613be3ac625e17cc8dd8028935397548d82fed62bd74ae4bff39048cdb4cf8984dfb9cde811dcef990e631fae4a990afb9a0423491fa8814a04db8c10b8c54f03431054eee7f9a80897827f7a612e2c639dddfb16b80b4f6c60f28dd0813434e946b0762df1bc97826ac967fbe8189ab30736653b015c9679bd6e1458c7c1bcf1d21b3cdcc37f991210ed7cccdf5e2feaf8ff5aaf9a893c523438fa0bb5e449bf5000ba94eda7e24ec60019c1916dcef97fc9b78993dcf4c3ae9c4bd2a339ec26825a1225e224bcbf8efa3b6bc95910a72c80ee6e9bd33c0e35c7d7d7bf4bd7cc8ba3344d6503538eab89f0a281e5fc4299dd7312aabe06874c24dbc9d008c69846cc16f4fb51ac94c05020346d86ca2ae0a289f8ffc9fe5b9d947d524111f42814c98bf1184516f15029fb275875b7afb4e4ee9b3635712de692ab01a4d07ceae6e87700c1730f2cff91def8737ef8d413759123f2ab4f0f7a36df28ee71fb491c81acd3d1557fc26c50e00637a4e5e7a255de0be3474539ed2ecd2e61326b16804db9364cbc3d04c2d69b934534c7c700f654c7b29b4b0697779fc20d97bdf97cd749cf773c687332011be91c6cf42e0fd6dac0db0130ff87f2adece7c1c6bf9725d514a0a14fc72330ccb1557d5b72a686aa90e6de1f0f18292fdd66834edb8cec47010245c424e2fe5f2404326bb5d15af3be7b475b51dca9e5f8505a0e1e4d90d8fdc1670d68db79ac03b995787a6eceb7d0993062beaa1d882bc67fa27fef68f91a24953404e8ac072a9d05f0996da90aaa3e50f18aef8e8f1b4fedc211b7133e1fbbdc1a8754028a081b61d9dedae0afc478a2480fef0b117d448c2705957c9f0409d823a015f1ff4e2e02e52029f6f064531a7c3748c0f750ecf94fb5c253d7c6ef8177d52abc73559b55566e21ca30acb7666d8d5fee19b60bad53da7dc311780677602ce097b59486a6730930dd7870b5273192f0774fb1007e8c97b5ba8a294945923b9b09f43e66316e742476dedff2f939b105baf7e0afe4dbbbed2cb9401c462658dcd27bfa26dcd4af3e17cb906cf8212b5b9545b4196211f0f81cd7ae439bd55b3c13f665d0c0c00c1a9502942be07423f85708fc697118fd64983eb66adb2b6e616b238eed5f89249cd8d290d0d98a0a8e82dc5984347c871a933dd5bead33b80c7a926ea2990e147bb2e2515993369c3a9ec32f94e7cb9eda8f935539bd83f8de3dbc37ef70c32079bf2f33b3ddb639289acc64c61995da1f5b877d1b151cd6031ec619d0d1a7487efb65638b69631caba9a50fe7a63659aa3ed7c79ed424d22c8df02852d0e7bc85ce9b934b729762ec392f51d276558dbc5c448861a1609387d6955a4f137921a3d669980d36d7e6455b0258c099409be42bf84b6707cb700a2a2836b8fbd048f152e44da14383b41741581c64a2d02b9aaf99421fb00f71fe773efe36b85ae1626679a2a4f00bf83577a793a7680623ebe0e33bbf0584dc5cf2b0e03a9529d45efd33600c2604865c85634a63d3d3e173583d0be521eec8eb33f728b3da011ed7e30c420ed6e93c2fc27fcfd877164030b98fd2c24c912af436b83386b250bfe674006c0e2778522e82089365a71bf1c61b26b30fc0a02596ed2daa3ad02c21d9ff54d00913bd3e6ef8558fba759d0e1eac00c356167cff7863d6d854aa9638699ad6c8a43ad046683d78aeada0db44678575d9883788fc1bd1161edefee50e7aaedc5c03c8ab4dd0539e9d55153270568443ccdaf20c7fa78e6657543765ee5f9bdc5bee0a0bb611c73a6c578628bddbd18a640fa8eed1ae17fd43051f44e4fcf78b8ef8a5cd9b082b6a9cdd1b15f06f95610ce613ae6f3d9c61026ff2ae27f94df4c44ecd9166baea6c527826d6aae49bfe3212d7e79f5e8a5eac90fbe46bef064f512eb575b8f34c5f856795661c6a1ba58e9e56c945e143621260ec75ecd53ef2c3d6e7acd671fcd272087fdd6534717de666e5e307dd5891307aca2547b13959589f865157f31f1001a58aef4a5201602d383cc8f77332a411c00bce098ea571698f17640566770a760e09461b7ea31b4b5e8c0d92154afedadc0ab22faad5f9224c4573faaf31f82979ab60082fe478a4fbdced7738b88913a17b4cc7a837f954a23170a0ec3e856ec4c79798387c3e5dcd24e86195b917b8690371fe1682f0fc1cbe0c1fb55b072cf62a890efa2167efd30d608513b7b804b5ada2bc0153038ce8e81082da31f2a58c23b6c508c4527ef4ed29aa1444d8547598834ca1580299ec758e29bace10c55bff1aab644e4ebf2210206b4bbd3c332b7b108f9b7e8cbedf5318a431174f6f5b80607c7c9597d3612dfcb6db977cc87cbacb7b7ae7f2c677089048d4fbf69aad3270e697d3dcbfbf68ef4b38e877b6e5df8797dfe206073678fb09c86bdb41e1133a9a2b4de09231ac1a5f07c16b3c0b7115d8b878f821e202378cd0f175b160b77bb874d6519fa608a056a1a4635a3c6e3e7f7b0bb6bd8f65dc2c54cc228197637bd4c6c180b5fabad01ca63dc08f60ba24c8ec5cf3808e955f2e9dee3f327e358905f2b72aa640a0ee5f71990f31ab8cd6f11a7298f9db90eb81305b9a5dc968ac1c08e1ed8a5ee2cc2b4f095242517e78a3a639e789c2f2c76e61bcf8a9749a9fc7451e8439bf1bd3d88d622569ba26c650896aa612dceeef1f9c649419a908b03ef9e19e5879a1892860094e97f420b9ff1470950e8631ed3e4936d18e006ecb64bccbe4b90d8b65ba440b46b1743d33413729094a3f6cbe7996e3cd7758e72b91a790badd72dca647a790445d70214615168cef5c61df8bf8ea60863600e45ca1c4dddf16a02cecfc369e09e9c91919fc390aaa203c4dc49516ee3e30cef8ab355a07fe703b1dc5a7668d078cb07e4a466f27979020ab30e1713ef87fec537fd88f930c49a45200d10f56ac6f3a06105b7a056dc4b4f17d53f471b0abd6770c54abf191adfae3136168787170264162ad45c8d449f3d42e5edd341ed7db879a8b1c4b2f85c16f15e62d3c3b9aab69b5d87947310649b0b669c9ac075ad0b4729920325db0942eb359fcb8ffeeb306ad461905b3fef84345c5473ef672f6410126edd07cfcb9e96f145979673b13dad47c7a9e9521c758f0aad49fd40f8eec4e73f57dd981f1705953901ff83f1ec27236abf82b11e1996b406d4272b1fb74a1f5ee33f9198572d2d95e45564e60e527ff834cf8d1c13fd590fbd317f75c01ae05d1820ddaea83ce9d7d329ea576d34e2f39dd17be75730fba435a4e81c7c9b19b40328a7c40d265d0de68908d4f1f5aada58b6e18c66ddba25f4e4ab930c43a44a02f4718098d5aeb4495ecbf5bfb3472623d81cfee3c4b153dcd823e51f7f8a3802eb70001784e85107473d6984bb05edfc31b285fa26146b062abf57dd095471c8e6a96c4cd0772d92475b47105657f30c0aa61c844fb974f4b29c4a0810f8a2a07db13328959e0dca39530af7bada5e8b632ac74153e37b90c778cd096c38993b6d4e52364f131f9b7d17df9054b3ca669e04a8ceb09e5db4936cd528d1e561021f63abb34824ff79c4d6640d34f5b4c87b1e1f706a84e4ed186b08f55726bda24a5aaf1aa4face4105b253e49a1304c8bfc81c10b4757f3fc75914dde364cd56e5de422d8adaa641794266c554df12be29a32f71c810c57580edfb842617c44394edc1b3b42b7c91aa8bd3dd73f9782b21c1ef562a08e5884ff24d1eff9e60e3234395d2dd9c6b2c792f9429a099890ee9920d724e261c27bcff995a35ab68ebb6315a6f3e403851b2cc4b4f0a3fb7a94b70232e8f82e8780a756153171f2d39bde960ed9014f778bdaaa4e6ced4953256f214b7dbc24fad2a4a1fdfdb530d8ec0d83fa0cf833a8f12124c88ed89bf7cd49d4406c98cf6dd96c00675c5e86c579d34339e2621c7dcd81f4424f1d464efbd2624f646e964842af07e92a586d0bc5c97399db72128d82709ec361cfef7d393c1dc573db38f9d81cba21c45465a968d426fd4947cd9c0355d24032ef06171c80814aaf21218c5abcdfb33c6354029dde740b44efa040fa1a9513925a628f45987a11aa15771fa7551043b79b60cccefb245d2022f44faa6c4bbe788af251c99f4d2063d73241ff24070f8f5cd1b51d9e2fd66ceb035f61271ad0646a8f741c7a0ea09beceec0237cdacadd09cc30962e399dcd865710ba74a06b556f7d9cd1bc73be608814be5b73986f94eefdc569b16ae0fec097a176dc6d9e17a62e8b93441606f012b8bc0a8bc0fe013e8d186282ca8e4dbfee218f02438c98f64eece0729b1ef893ad055fc8267b9c0d0567c73ea480dc9e1f9111b4ce1ced56c8905330e1982e388419ea70e6828f666bee899bfb1bf05875a74cb992f4ad4e244ce28a948f7588e15a1dd5f34bd68b66f0628ec8ba404cdb9497b400fe01e844bb5c654f89ed7e9b7794adb9cd7bdb6d613cc14383d2915aa51235ce2dfced6ee1ecd853d9d2128a5b4cbd72bc0cd339f530adb5ce83439649336988daca2643d1f588fcb65379c3f40f765faa51a76515d0d58a6e83d63d39e69aad9c4c31f3ca5ed04f635d1a6ece26846983769d2abdfbb0769b930f4a02f84cf6886e973d1f9dd21fecdff0924a141d2bff2303b26ada62e3c725dcaf7e70900a5233e4cad1266e9b1c9755c9be2351e19b0445395c846535934cce1f97c0cb4539c020d61a0f65d45490a0f34e00d9a88c45f846e363591101097100142c6ad24f194135d01d682403a7a83111b9fccf15693a0c10eac9a120f861e66adfd7e3501c317c73be154f582f7908be6562d297b334011c5cdc61dcec73f9b67ce155dc529c6ed93f7e3f8124d818c741582b7abfb32c64ab24406a6e2a7ee00c197eef5e4add7a06890e857dfb6ce8ae852ebb61779d0a7ba42b152787de8e893b9767134d6b0fc79ae5d6598decaae5cdea7ad7a47fc398ec7188ea0f37855b8b9b0582e6e7f2e4e19708eb1cbecf66af4c3934cab73e017f6193bb239550559571ea0bd901b1943d394fbc7fbd61d7b22d6ad5caef5fcba15a030a9353efcc0ff046679516198b1a9a7a1b2ea8e187125cbcac8eb6d29342b3d4acbb5b635100dd0e022f0a974f48cddd8fff47fb00332356316f55512f013e880e357c4aa58d744df801fad8a18ac3e9510eaea4d66248705b6a5dfa1974b8f3f9b30ef25565776aa6f26f1e2def6efba16d12","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
