<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d4ef0fc2109be9cfb3b58f4949dae2d9f0fc3d70053771b24a7a80f1ff70c45dfa6b98440b7da2854ab14a43eba849842ad2470b754779d1b14a278eeef3267509ce3e55f94d906e17a4dfece940232b3044593f69cadb68b6b6b37b88353fc9c65f981287a837cca4c6e426e5caa8a3629c95738cdb568e07751496e8c8780813c17b66ebae493ef6bd8c147bb116ba9130240d6d50536bb2406ab99f5930d9a4cdee8c5c8914b02294c9560319d836a2bb60727fa60dcceaa477c3cad60d790f5286b29e1860b186c4783184c18516d65ae908711c92843acd2cca9f54810f694eba97b1cf94ef0163b69b732a7ef887225ea1b864924902006b1e14cdf4ec8c7f43be4bf3d71fd2281933c1392e8be842eb803cd43c4690b68d9349ce428960f5951d1ec22d0f64934264f884d45b4191e06c43ea8a9ed11a686cac02db8ece245b2102cc075f947928dd3884e117199cb281ef6b33dc37c145c5e4fb1801baac2ddbf55199299c2621834296b80a800f96367abb8b388025946cca09933d174a463193390ed48a53acf610e3994f9229e0a5211b45a0112822b76d82771ea49f54ed7279cf59a6535dfa5d4f23249cdb1885770aa50036f72374c54094cb0887e2431e16682c7576c2e7d995b1e1a8604eb773d2f0c95de5403d9c4aed393b152d91943be19cbab6c7144bac309e9a4b2d54a1e0f3d0f501c20afe98e1d176fef66fc51b3affcced6dcdc1d58c40c9b566d9f2528373ecbfe2b1af82df3309cf790b0780d1d695565eb32be250a955d2b2c4911f0cf765c9d89fac9c50dfbec8ef4a91d5dd2313ca017da3cf1bf6001a7e58eee2051d14bc9c2fa40ec01ceafbd50ee175d8687f26a1c98fb4bf7d6da804e33804bfff1bd055f570eb4ac539b0e047fb1f83e9aea3272d01575c3176b4bbc2c5c9bf2e8ac6d4496175ac7880cf75bc8cae3776dd40760a56803ca8b1936452c0c95827e4113947a54bd4502304fb5b8a24049187620f29bd2f90d9c5917d50d17b9b0c9dae8c0524a9e32f327280ffa9d89c7c5871d27cc79c379a8e694b9a145f6a4a5ef88190d0b932b6be471033ff6ddd5a74f1838cabc43c524206dd6a16c72e246263c716cdb09c1a3142530c7463b058fdc95aaf3307277d713bce23b04321b823ec7d4bada1d8fae9bdcfa34856882267f5861c66689196fdf78d1f0962c6cf9b9a968126fe7b6108fc2e4daab7efd5d97f6f4019fc2115fd8c0164e2b1d2a128c4fdb79e61b6d05c3091d0ed6aea88f8ef48e88f80b60b34efcf0b3d8e86638d82e87cf6221fe4ad24834f07ee858de7ada9cb3f8fe476187f8ce17b3332b04ae1a4686784fabc848fed3d7d6093a04ebc5494fc69c103fbce07446f908eacac9c72d1834ff09b8b44cff977fc6311be688d22b7c9aaf4fc218d7ee23c27cc74b171862d61e79305ef17d9eed82df5795998ead4b3b2486034b56a1c82f6044c896ef307fdcb4d9ef5c1a8ca3323b5c5910006945d0ec5ef44cf9d12934a96691e354deb37e6c7b27df094cc40aef9d6b0f9d08844f0c76775af8fddd4f4abfdbd2b1a18841fc72fc971835273b409ce8522717bc66943b3acd4136cad99b3c4a2accbbfbe7da0923dcf357462ef756db2c32510c7d85252d0721c3e3664a8c8604194bd7f2364c5559f14aff7b59863d8a252653f61f05a0faffdda6e585726c22c3104d2b366e652b4176f57db4f56f75ef80434ab1709f0e6d4ef2dbd2daca7462cde1a378f934b8e115c37f2bfc72e119e6bde1d984ebf13db4ce46427010bf9cda07b08572c878c71e0ec2418d61ecffa80e242597e1c388f5891fda2df71e65bc32c0edddd064344b6e2d1a6ce01ad54803cd813df1c6619ba57b6ac6286dc8b23fe793ea8ba495eff9151ffaa1f1c440fe6c3dcdaff3a3a6b4907b3bc83aba016eb65f85ee00c3595d585b5b97de515438f75bcd7abd47e4be87343531ae3940f5cb5fbc55983379375b6b3dfd853e796ff6fac3c2449b31c1265ac8783971864b1d0b9672ae8ca5dd8a553ec046241160bb3a22d0f75b05f49b9f24b4d03de0143af3a20a8d932b242b3f6567226971035369c024c55c443fd6c93e1b197d20932e9913a9c22503f5ff04a128b86c580c963a35d7a0a62f9a974a4ce0c364ef3862fed74816d49a6628c497194b81907abf58a51d6dab716ef38d2d7a76b7b401ff9d657b89926d9c0f127172d6269408b7d2f67abfaeba6a263a92ef31ccfaa2406fe68b4c66e2c8c2d85d75ef47e17827ce82461eee4e578e60fb3ceebc8b15f1ed20aace46c6fcd53e778e80fe7a799dabbc36e6f74b58886aeb137103e52a790655fd3447f562ae201bf40fc4303d7f3f9ee72fcd7e5b8b4be5b8f2b195c55123e173628dce81b9fe33fa67e0c3dec7ff93870540823f3b334e7a4b60f8d27e16f1c5ea11b4d3942446ccd1a553b751cc5165a9514c8800d0d5a753b4650f33d4004d6c6096adc8d47b38f08ee13e6483854b473d6e87e53afb725ec13b159e851ac896e4a931864eaca603925ba96511a810f192fbcd59ce78aff237003f22d6a4ee840b9ae39cadd9375c4705a7a383a1bbd45a52eb7f352addbe04642e50a158319440d67a958a079d2a124482a9f6461a58c0723be9ebc1aeb1c25126d222141453049c3065c16909e2dfc8e92b165fc6dba50788223dbd378c7d5978212d2440339228f884acc937ad7c859471deb39ce43f8a6056b08740018e6f36413d7ffc314a93277517211663b6f6703f5d8fa3a1a07dffc7e2e037fa3319a8373a8d85fc97cfb44a6c7f29aedd32410f32ffc7b5809020b8efac137aacab2038ceae33d28014228f27a501a525ffd4c7511dbf763a6a52743399f789e650c86f2d4791565f2d8bc61e08e4665ee3407655281a9afa281bf16bf626ba2f641eb250af54e7943707dffd2dfc58c306def385855fc7ae5bc0a31b381f57101c254bd743c337eeffdfe0c0e2db327f32c391a90885e03e1ace118df7f5223bf61508c1beadeec4cc5a67f2240a153e748a1ff566e0d24d2f60dae09a7bdd97b689ba5daa7e8f09a6428c0020d031ac041f42859bc77046ea9a50362e10b2bca539839afdbfdbd416975a6b4ae9125c1c4c5149f69ea9099631ae1f1d21b17d1c82640f58b341da2e3801c35f060c0a76e29c962cdc04d231495593f6813fbd2f54e53df66860b9897d54096e84384610328f4cf7a3577139266f222c23aa32a4a6259d9619e2599a8b5f91fc9368210b154a8508b3dd59f06a6162babfc309e499b865be08f3d5fff2b26f4bdea0ddc8db8db91b3a185216eed7972ba7438124ac3f1adcb6b94b3492c49d2279681af8207becf145a17a56021073d5722bb0c957fe05350d35ff811ba44236ba4d89c3c5718ab8225e0b0f91a43713f0271334dde74093d51ceaeb5a465f71424020adcb4b4ef314561234ebb75f7bc68acf69a72b58e9eaa2b29e829793e42d8f1eabf20adb420f97f9bf3342edaba23d660318baab440130a418d3c878099e51df260a53eda5b3300dc637f005247536eae8b43a1a52ea6838e06f80efc3757a3dd96c16d79b5582da8427855856388cdfe9fa60cf8f0d7603d783449449e1449b4e67cd5cd299d75200d1f27596a4ff4302290d43e71da84593e027f270c30ca1b7417793e1215903b31001ce14ccd571fd506573f049d3dfbc43f7fc02d0a3124fb200754ae6642c98b8bffe76b7d7d98e320780f537b12cb9582e1bcda16cc1c9f7a21c1dc78e6303a66ae565dad2edc6a5e083b6153d0333175f6b9cd1f26aa6ebe15547d0021d6c49263415a7329598cd6a91b05be6d5f67b410a9327700251b4c45e8c0d03675deb74cd9333ec9c5b3df842f2daf38e6309cb3cea4a4829dfe4ab8680526e5ba98e7efa7ef5ec339c6215eb56af19f04b31c562f1292b5011b80e16e88864b9893576f59b0d228aa8c1ed3559fbc30ae79b4425408cf4ee353a8463e70dec1587ef69d4d039d4d730eb4923bde68e8232b38359b236b533443ad14a86f886257f6b37961507a14584fcee321424e0e003d73466adc173ac9236c4e11fc8951153eb1e50c0d731ea1bc154f52b126f59acad8526462e03f502f0a3ec3b13c6b061a0bd19e51199c6b36396365e25dd803529aaded95b4815f898b8cafb13a310ac1aa724e594c041717ad4adc1af21621adacdd109d3cd147efa2edb96e5bca8966cfc9c55211a1ae371e574065f7df9e1e269aa2a0add0c140ddb35c74a76b6c593ab28f7d584db0cfcdb613e4878d7b611ce2ecadea121dd4679c3ea959871315a348fb0fad2e9178b305e1731286420b3e0f2cef5f6b9a30d0b92b2a206498af83b8fc31552a446444a58fb8c59b00c134f7c6e00c1729a62d0bc77a9b51e4c3e5052b6d9441eebdbfe21932d6ba1f4dd562aef8eba3042964e5eed3703adb1bbe67e49366ae843fca9aa6d598de3f1c63ef9dc35151f66e5f6c44694ec9bebbd4d4e648af49e249be8c15899295c063b47470503c9b76b8c3519cafddac7ab12236ce0d15efaa7df869840f6cd2293afc3d1c4f0c7a01d98b58f295d549717bdb734e3af9983d3359f7d1ca394ab5be173b55234432ea0aef8abf41399b8e9dcc47fa83549506b597d631fe03cc55ee14efc8a4826f3017e2cf71407cb5cced138bee343007e8f16225406b0ee99a6ea2f8dde15b43b2594a5572962a885a19a10cd7d7e2d2e527d88ce1dd305a61a38c81da112f9038d3a9c25163dad8c6e6e5fffbf231d7c1b0b36c0214b52d344e7d44d5fe0cf0279ed05586cc33ca686101fc1a6950ca1f23d45b83d487b1b1bc172addd3d6c30b415a843abfed0c81961d88f10c8390ecd8fde75c87143c0347ef49ccea56d1e68d0dc1fe8aadcb4e2731ff64500ef027bb8165cddc85595520904b49d97f0dcf15430db22a29836c924af19e1473c1f339c97c45aae91bdc4ac7ffa4b8922a7d2e81ba8d501c5df608ff9f204eefcba5e999f42d47db06d877abc93aee863dda11666c0cb26f478fd3b905b7a1bcc3c0c74b931853ffd50ee69c2a02b1903b7dd28077d8597e326c0279c237dcf6112a72b21a92e458fc8ef8bbb0d0a0ca35d4670c5d2e385cd016ab529f94f02b175bbe0a172d4e79b87e670171c815b8fdfe8d67062fe34f5677a29c65523ade7d1e2fc4ba78b2fd83aa862f37673923a8ce8553ec931d4b2095b46c2b640fbdfc05d5a3a2e4dd516a8a72a8862cb45ad5fdf957de1891600c18505f3a8993e2fd03b09a6379df67a5c16151dc5bfaeb9a33b86364e33fd406157f0db1d59b386fd080054c6207ca2c19a7f6cb7d88c7f9ce0e3df30dc8baee86fcd359edfc549099ea358ff604012a6de1298b395803b6b4a3d56ce52d545eb8055d278073e2d941ca9f4095ce07fbab135c39318c782b3e283c2b6509d5c721440e56532092aff445816a3ca3e6a0b2abe10f1b12e95072ac8d2afd2b83f7f6277c10b3b9a5096350c68c025b9b0ef1e4460a4097a774f308981ea9500fa1fa7c0630e5bd5f8a67fa296e5d0d8f68377e0c1673816998292008742e13d5602c356d638535ed051d8e525efc6308e6eed64336a0939f5c9b1ca1233ff183cc711f2780121549601bbd92ab8a88467bacb241a498beff6f72f9df0d3583158d84f90a5dc1114f65d9e3f8fff145c5f9008bbd69cdb3e741792ad2472c8489aaa10fde161205ce51e7e687acf0cd5624c546d169e380fa2f36231c4c0044b2b5dbdbfba6148a26ce941496768ac936c2eff7b57b917c72314da847a971af7145f49079c6069f50fbcb2c6d10f3b8f213eb02266d4ee71e522f94d7c4746c25591aaf385d24d738bfd7cc0ff8c5007619394cf42f6fbbbbcfa022668174b3fe0ff53599dcb36d4b0363a54da2263d7e0deb19abb0d9a3015d4f64d08c409f0594da4733093ae340c3dad606cca346d9ca225ba6f13e4c442c7d3c209ba5e6b5c87ae0ee34f54f1168649c68b523b7f6a52a2b262d75ec0638fa535af62ab166f50216cdb940a71be0ffdbb12b6772aea3bfc10d7f6413fd4fb45963594ef3af446e05def99b36bfaaa85b5d9c727821dc12cf1abd8f6b455c8533f3e2fdca066c5c5645cbafcacd94bd4d972403d6b16cb000f7476af8f395e25afcbb07e6dd98473b0ad7db9ec9ec8cfa3317421c79bce8b69df5d01b4c46e12bd48e0889bab5e687435b9e42b9040e77e31f49ccabb2ce5dcc92e16e9e3018f805c7d603c84631fd848ecfd3b54464d64d114ae545b28687e9139c206197a80ace29ee679c7058a0a0f0c7c753716457cfc85ed16fa68a433e4bf04bcaa59a40885802cd2e0fbb5c097a6a2d30fd5b9c2602f1690d93138cfbcea7a4d9668ed5be48c3086b9f0aeb9864eceac4089d7d6f7e68b1c6b636b2ac1d60d240a8f9eaa67d3d026e7caa45856d0308335e436a325f2d17adc5ff4cef69cc0b847f4369f5836865275fef4da279db4c5d815f057f15c2d0640f48e96aa082bc7b6fd7cea752c896ac2cd6274692ddad8c5cd14a6b28e7b09bce6be4cb8d68a718a1b085e1d1f87316c5af7dddbaa85c2b313acfe225135cd2a43891ae58b4c0e04e27fac235da08833d4b34448fb98915d0af0a5138fce3f62e8b550842ad0e8a412088e796dbb9058848796778f17fccb87fc3c21b89a714ebf5f2c3a82f1b6d5978aeff632355e186027c2e9f8ce54c10876a767ac1a8b04f2dc18ebb692610d7d866604e8f19513ca4a8b28b842d90884bc8c371fe906791f5e8d3fcca71ab0b9c7c1ef9ab2a4daa6235237b421530f3b0a14e4efae088097eaf5f11e0070b2093c87f44d3323fcfec12c826696659b068c21d4a12cecfb16346dda088f7f89d523d783f17b6999f37ce4c1ac134cea84d0e94efd0e8a170370a1ba223659c09ee4745f2e17d185930188ed5cc68346b26eba4d6e4af5f0cc72ff54dee5bf7c602714109ac26d72bde95e003a5dd3480bd2e4cb789443e042bb739ee98ecba26595a79d7049fdf9a7822eaae3fea2b8b9f698c25e8c1ea83e0648559f267d4aa5fda23ca9acf7e7d438d66aa11ed92e51b77dc1475370545dc4581224faf511abac071143d010f5bcc9117752fe99f71fa1544fe12158d0edcf7d864183694880189761edf255fc7f0bcab46d20fe340d3d4a92c2110b3a04059f6d082aabaa88d0738adb02e55261f30385eb5967287f4972b9e7b4a5460ae7a86676c2bd332e48fabc6e46ce68eb9c4f5e2aa8c2105241e336ffb4146ca345cd57ab3ead16b7c9171cd5649720051c574e3b11f3a2868bc7cfe69b883f37f4b6f5d7b7969d0600e7fdad5bc71e085f849fe08f233f828b80330392b47d087a98e2fc68c97974649a79ab065f214c6130772a4465c7a79e3913398edaa3d58029e84fb50d1fc2ae08315e9d798babc3e9932a8b8763af0a8bc2ac47f36b8a4bacc53e0058224f19212eb38522171e194f24cd7c33bdd90cd1633b41f96f13d018ac56b34c0a6e3c8a265c5330964932e3cbe9762e64f242db3fc050eb02721d23a0a1ceaf3aa5d3391b75f0daf8f60bc2b18eb6f1304ba598c64402ee98e643c2f5e608e5658b57da7df0fc0ffead988f4f0667cd06661feaf515d07fc76d2455789a90ee9c4d3e321e35e9dd1eac9ae2a671cb9a50b9b038af9ddb08349c8cd52de0830b24577db4001628b02e250fce8836233f4c33e0066b7c911aa74819cc0c4dc714f2c6ff43ed513db0c7c734097266a822f0b680549c94df1737b54720db426d3ae512d18b5309cee12b7996006ce5adfb84286d85a27ca84f32255735737677deb8f64a029ebab077e11419418f03ac56c8783a4e7d857ff1d06d1de8b6a27a0683150483773b26c76f548bf86bdcf6ba5c1978eb0cfbe2c6535531dd587a220b94acef8b1fa22d57aaeaa7b5703fee944a6ecc996280b9f8de5e7dc0b164aaec592dd213efa306ad002fa9375ca72c87893b2e3c5e01f70f857ad7fe75f4834d78d0784b4e1216d06b703d9ac8d53a5e6bb73bf41f6796bf3019a7129f4139a000d998aa1b968ecf50189427f698fb1b8fa14d586bf948000b6370af935cd79b02c4ada483a35ac3cd4e6052bbbe350349bbfbf7fb210dd0497a20877b8e69da258ac309bf5177efdd4aa921a9b93ecf5194990ec3d78649d3ad2872766549670a201a833a94e75bae4f0d35d84618da74a6cf8a471218a793b28aff58e5cad8290918d40e8a7efd5a838ab84bfdce6f20370e5e4ed139c690f9e19df0626f6cb0a868c2cf373a6a63a39c4657317396ec888de5c6145eb39f7e640158a39bb53384b555efb9842e16821773d5e63ada7e9d6351943bcae2b5a3ecf3a60ddb6832ef25b026d54231853055eacf56b387b321d81b32d8ec99adfd5197f963423315e11760a88388fd02d5177e6cf2cd42bd052313bf5ef46c989bce417e2f40419fb0f68590498ae7a885f0ba0941c43e65cea29799dfb6d61b06f66fe6f17657cabd689d849aabc5bad27d5524d2099bc3e0dbe09f48ddd4539cca7f703fcce6ca231b073f54377316ed016d38578d0468cb4675488a6e6b567ef278053174349f7c8a850bb7f58bce91c27ba578ca834b96af55fe0de66294f14070ac1c6621b117a4fc9b6b5a3666ee01dcd3d6c9a3b35e5ab281ccaacb54bf1737fb15f75ecfe3f2dc17ff88518c4a0b696b9d7420017e0aa99ae855f33ebf3f38d083bbe47bb39ef768084ec85d2e81f44b573e600f5511560d36581febf341ad3ee832d0ff6ff6d4410cac55d546d973c39a9f4e0af8ab4615fc6bdd25574636ac5ef6f935007c65172baf07af6f983b568b96fd4fb7cac99bc18b04bab041075fced830674831e96cebcbbdb7b25840e0077b317f6b81540fdb25805fa064e0e2a88201c5038902bc8ca5c0a136ee4f9a86d7ea0b8fc51e08e35f14464f1b9582548bf84befbd56a4bbc43363f416488f7c82aa924ba5cf36476005e9f22054cf5c07574b1284429c77b35f90af7e09680c5f1e0b16590e04eba68406e52db567b4c8abf5773d23792ed7e7a39c803338b0fe29c97b119085af08d51da8fd1852d1fd1977294e9daff5659c5ad917109b7fb5599aeec514f9fb68414dc36a852264d56ad71b72c1dcd5dbc8e6572dce6e3b281a0066c8685e21a6cc0a94e7951b200169dcebc5b983d891f75b14793bf6bb598673421735110dab47b586678eac567aee38b1c804610b0416b1ce51ab53f05f5bfe27ce2cb1a1c17b56a16b4ec10969469ab4aef23cc6d2fc1a79ab158bdd5585150ad98976a58821c64f8d93cdf4c35b8bd93994aa9c1e590f658ba81cf8d79afab35701745526be339975d8f0724ddccc523443c5acdcc576ef0be728cbb7a4d94e87db022fc30d71428e4205ad1cade87a7de503b4faf3b412557b63a1ade30b1cac7694362829072d41a283f170a246e42b3146d956a35bb9342cd871017aa9853cae122013775536444077e0bbc159b01207a0323411615ef6551160932abb5f998461edf5fcbf90879ec2c93454330d8828eb4f6a0b8513c12e5b96a3f4e4fd8c01652e532f0f294e77abd21564b40d5337e44eb53f152429fb258bf33a28620ff8750785b92860660624d625220aa5ed920a781362448ef1d4e22202a2f45c0a1b511cbe7d1196db26ab45511be27d60007f4487b8b9569edc506eb616033e49d54845b0688ea3c4843c9816936bf6804917a537b2ed8fa3f420cad9e883a40c200840481ee0f6fed84d4c7fb5ee4ef5729a24bfdd5f06fb13bbf3ffb35ee4138798d7567a180b27da6762b74f0ecd5ae954bd5ccac3c6145dd937e2f10ecb8b80d63feb65b9d199debd01955ae010f9287c2fe47f74e92932238166f95aaf37444161777272d7919a22eaad86d60c7f701d9c6cbf55f27746eed320ef30cfd674b36b13ea3b255f93874cd49d665afb587a84a770d93f7661d29bbd9264a9c632886658fe5deb061a3b01cd0a3a34a47ab02cab35cd5f41d966f725aef923f5f371d768edfe5c7cbfd1554b8a582cf255b31c13c0a08a1b101abc4a2e77836fe7b1d07e8e6f09eed360f77d36f155260cf9cf00bc1cbb082032f1d439ffc07a5fc2e8cd12f9ef122064ddaba1ad1dca9ff758f48a47ecca93aae7063b4908fad682263b3a7e7ee0d8129b686dd453114211dc77d0b07230f5758be032f48d459a82567c7699ed394c6518bceed14f523989a0e46ab5b8c0a2e5a442052666675dcadb39dffe508ccfaca216ef332908dec367f47772f1c09c80479c6b90e823922ccd341c2c14e46beeeed002d61003501475b97c39b5c3c01fa50f4aa04d6268b1aed18a3277b892cc8f31f5fc5c0813df51e24165c379959012d6e222e9bc2854af543950f2ed0f98244f263013c04bf3bb6e34a01cf2fb8d5650bbcbd6cf3d765d05baddf97b08901fbc4c88ff9b998b7db0efd1b66550c6908f7dbda5350bb18535d0f0480eb43b59b8ab607cafbb3bca8238f542e6c1def3d4f065a7fc6f0ff57b44c617a5a6a6731995c9e5f3bd4be389448b26d097ab166900b9c4a8b776796f5f0f1d3a42403a34f0ca5c6e41b346f09585d9216a782df8ccadcaee1e4d068b9f5d69985163160252607d30b0e6a66fd8bddd3ea12dbbe809cd573254c8645c6d84b941c1555881afe4fbe04220f46246e4b73a27af515ca2684d1ab473afa1e7f431be969a212acfa99a583b027f2de31f76e80891130d667f98b997697c62417c15e1fb78489633feedd2038a39d0876d95c7e59c3ac876bd3452e15f3b146cbc07a545f05fdfe21133bc10e11b7efefba4bd3b43ef3434abf0635b43f5ae2ac4292dbb600c5cd0ec9f253660ce38af16ee68adcbe7d4a0c943893569a10da08f58204003261675f81ace8944ecfe352cd6e4ffd2e409116646550f94c58a186ced9bd0cb3a99d118b1659bab02382148454111b1345525f1c234f806de68e90bf43e0df9485ce2d3be0723b7190dc63c2d1c4c3598d64c7c8841173298a9cb3a6591815979331539ed3b78f8c89037f5dd5bc947cf540ca3d3c5dd4a5713618adc3b614515323fb550919db99c549eac3d07a2107227c21ebda240d811619afbd55c7901e18aecd6159f25ec32c8c5090115524943366e8b1a6e55d1f54fce9e256fd29478de1e07a357815143eed3b42539b25beb258964ff5c68bb918e8dcb55258ae036d6a8a861c422ce8fcec74859f3651b0f41f92ebfd36dd3e58e8d15dd12b5d8b18c59a061dd57d5eae2d0d220121da61533ccc5f343b60f0f0d975610d574da6f7c4625563d77012a8c67d6c194104fd9052e87477d3332e270449b075c2b48d28bdf0e0a07da4240e40d4a432833d06cddcf3a5d7be45ad597ee541b8476696a07c1ce52e5a97e06168e7bfc5c60e6ffa05ef77a336d961977bd0b57793a7ba3bed437434381fbcbc788d75967ca91f947857097b86f4f3f9f30245c83d1bce7e6635707237ce1a81b86f1e5df34cb1b241df83762a13c3601c0d74fa2fdbade71cba431d3d090786e8efcc8ef3a3286210c550288e6616f359ed99d3ca18d482af8d21c8cf0605a496cf6d5b18202a35af2a546dd6ac431796215953343991718f70c2b470ce075e36feef5ac88c1794b17142f16112dd213ee9c925c5a6a75003fe5fbdacd202da87105fdb26f98c3679c49add14e5f154c79526f5124dcc91c8fa9ddb9a528673d968d001247bee51443b35d8f790bda46db565444bc75a3111ebe9fac2a3e55623614923c45d6f067ab12f16a15115118ba692598984b83d1d4a8fc7f0dc10fbcb102e2131583d664e12ee619c48a9be06981ac72cede66a45f364036c74479243c84bd4bf174454588045f5c8c8c91d15566ceb95ba73d805d605c9829ca047134496e08d3cda33de72295de1e7b0a9264d35d0b6aefee7d903530075f1ec01d7352c29896a61ee8ad0d43800951d4b5fbb3237b88fd9c940f66edf411b427de7ab17901813b4c3a12a1e524ae1d02ab0a55db2c57f94a8c95eecd41aa437617ac3faeb71d504b83900bbf80d316b056d2e181357f192f22640fc1a4d8d857c86e2aa22aa62726345d947c7ad053eb5cf0bd60a0ffd17e62d6b64dc35eeddbc5f5190726e1269b83fa98dd5d1bba0b99bd707d7faf5a9576422f19ae9f9cc1358e5cebcb9da01aa875aa398061984bc2c6b2483b6cf2da14b625f03ea0543f0c82adcc03087fb87c1b5f0f7cf8cee48875fbf97e8831799a7dd8c24b10209d44f3048791346e96327048659b5542867260a5b717392e3a04e26ef13fd9f8f39161d11d9ddc316ac5e3e9ea40a93c4702ad8f0dd7aedacd680f35a99a344d397b5a9b914c3556aeac10358923c1dbd78836445ab7d82e1ffe9b1f4bcc2a917b47ca29453a51474de367370d67d1d944d38c18bcd76577ad6f921648d0ddd090798383c15d4eef34dd06358829b5e22b441d6476958c608932779a3212d5f05d8fa9e1a889c197b6988b26cfd18c359f4f9146ec84404c9802ccd737ac9719c538a8dc14cb0693b2e13054efb920d6beba47d3c869b67fde62691db99a214cb71ad027e0b368e2c611eac777986e8ad6333ca169a1b04b6027038d888cd725a380427aa9016f25094c7c196fcdd6715162249a728876e74235426f7448f850c86add6f21cba4eba7e17ce590b052f9090b295b4945af4eea9e744c3cebf1f6d579a131eeb0e31a591222f029db01815c95294117b071856f3233b985264023c6c46ea0d63354fba4ad32bb552932d15bc925fff175f15158608a65e15c2db4e5b00a8f2324fe6afa78c6b985ade6fc8be3877a207e964c5b226429a9d488a949e39f4bd1301659895ffcd324fbe4d8a8ef6215ef7649201e718b1d2ebcdaf8234b886010a9d310313d20d2efea3346dd3033a62587f4cda3ab2651a41f46e355081ddd30ae5ef54bb24f424029886017507835d6ea5a6596dd71ed71294d32e4018e03f354db3bcd73df97ca54ca9ad78073cdaae40f44d69ca627c8b62b59e6b54b59e946fa46f7459603cee3a5a036ea0e8d599d81b478ab501621abddea2a79deb7d6ade9e9bb7d27f9deca2732cda20a0ac2055a601652f88ba1dcc7fa00161dd688f6278bfd98a3ed05a7fad9940e43bc50730bddd92e7f3c2be717a47264846fc5a24d15144e3e31954625112ef02d4ecb23586a9dc4f48d84bde265468abf4bbceecd6a5e9881fd6e219d40c4c827c4f219ab6d91cfa9f151de86d4bc19e0c474e707a8a8a05401aeec1f020530d9e6143e9dbf154253f67ecb3b30bd9c7092a5ba20d1e805f19823662127c61d6c3594bd45f2490ded3a71eb7a7db10086a0cd7f681d4b0d773932070ae28de553b30409c89c737aae20a2774c788dc06b499ad1db359a8f1c960c2d1a5388697819bf32c5df891e8b0ac38f4e771c9a5addb87ea683befb807cff1b02d6e75e42c683121d8a17b314946a7d926c2aab50951ffa7342d1969b6f746e2ece4e61457b5d86c219e97ca263a44e36886112b9d4187b157f7829c3d1596c66242b3bd8663b7e16249df125f05e87851738716be8e606886482cc5e6f28ded316cb2c2ee2dd6289041f49e9645eea545b6188d7878234d7f22d407ba3fd6e9e7baed0743e67b05c1b9742abe209b3bd639ac2cad9374845be5b7021a42322e44f2e7f4a9221b25bd9c64acbc35b288b0655a708f6a47b45c47dbecd3a48f27314a4f0271eeff77177010cb62ade9524f3ba6adfaa533e22ae7221cf22bcd18b003266af9356772e9b3958b7163f1a817e9a43ab1745bcd8b42838077ce9c4421dd3ddfb1dfa46f68592772571873e74c3b72673dad23c8465387c753f62effda98621d521df9b3e61ebe607557f82a939f5ee12a04f729cf604727036fce5f1961664c0d9822f6119da67a1bda0bbd260e734629656a90af1d1e8d658bfeb068f5ec232f66122d13eac71ef5bf90359a5be5f341fcba3963b058dd12b68d0625de3431557a57b30067a58b64bdfddf221cccec76d675cc8c6dd876581fcff8b07e44ac563e9743872df4b464be45440f511e4b6a8f8f2dc424f8f11eee5bd1ef0b6197a68646190efaaaa1b608ae4915f7dd8d43f8deee62c74196b376f67fbf10c6bf8eb796d834017028482f596bfde0d635f45b3455711f5de78855fcf2fc90b293e860fec348ed5d3015ee10bc4b30078e2ef379fd7eb6c0a258fba5cec2c7ef45ca17eccd1d54559a07e29451f86f50f7f89826468a7a19baa2b012432cc06f7a5a730af8e232eecc2677fb6d677a674aff1ab764b301e9ddb8f208dc1750955661baa9e43a12186d62bb571d38d5e2702fea381c83c0e0197f6f25af8e478fd9195f71397291e3e4c2face2725f3089952f3e474e48c52a444567045aee3dfb38ace8b0bd0fe62d4109af17d5d406e331555c7780de74b39fcacca4119408f51b0f606d535a5bbe78147194cec92b5849e96a4a5a702cbe26870efd5b7a168a6672eccb13597d92f8b25cfb58e80c2e052b0667d0d178a20dbac27dae0f5fc80bf4b12435c98b27a67068836b6ffad8deef5d79014541dbc3f487b9aeac49d78fa3b89398d54245134fde6adbf84384c3a4038526c13fc550be570f8ca847ebc3f5fe1518a4638cd1cf3c1855243c0c637de8f712558dbc3eee0d6b4232b7d28908ea933b04e2fcd97eca37c9260a20cb1fe1f1a85c74990086ca5fa7cd07b3feb911b019a0e7e064e7c0032a52fba9ea67ce30c6af5e779355fab93183e809dbdab33610fa576851e71c0cdb3c24d67cf92f1fd2a4847dbebb0528f4a86679751baed0338bc69d0bab29cc8edad4e667e5362be25fce6f4bcd1d32d8e1999adfceeea7d35d46a55312143560ad86ebb73efe9f86a7f752f054a51cfc0a6465bc4aacd2763ae22e8a2fce0d61fcc547de7883047de9d3ea7a835243114a12a127f37348f9315b96f99953df8c31688ce3ec6ddbb6bcd30107ddb3c8093d4566ee6cebb537d7d360ff2697b30685cb31f615b22a55b437041eef589a1e182f8f59b53254c0e4de7fa9f183e6adfde16c091b429956993c6a278955f87f84ce04e8ca3ef4664547cc24a2558332720f5e1854445b2005ed1c5e3cf87da6f4f7fed42749fbeb21f7da2e59c20823b7f8e5987765796986205d381c8fc5e5f2615528be8110bcc8c43e2395e5e8f3983c2f0642012a154e85d2995d1a11eb3434ca684fa62618015ede15a47477f4e6e0c39ec5e4db96480c122e0ed4155e54035b7b24c384df51310dfaeb1798d54e731cf7c78443207be3ad1eed8a3b48bb0b9b9fcf2b0093e5f79a8714597f8851d8dd6f3c73b6efeed1ac3f1375bea83e9d86e29b54e12db92df1bbd3ca31b01fe9c976e94a79cf5d51a743ba133003372748c0152e40b4a0f19c8d320a1876da1222ce1e4b92052a05cdd0d2c3abfcd78b34f94e189008552cfa8664d5d0f84065bb0ae798328ec5db6f4e87abd37bbb7b9a38c66a54bb290e3100a77da2def18e255009f52f74fe4b3d5db50851c0d4105dc23602e92c06312cc2b395600b73595e14bef8200f28967a6ad60ffd3419dafe21cbb48fc331437cf30aa9fad6d6d28e223fa87d567cf54e4998f173c6298d248c2e53bbb64ed029ed2cec74c9e66242a9f7d100398427e6687f1c11afafdd5369be18b295e6d1b8dcb9c0b048c3a2b07e75a4c3715a6fb7e2fd6d4859c7de9f7dcd03a4877b79a0776b9cc08fd0331d808ce217a20089f02469ffc92e483937bc4faf5e5a5038f0cd4c8dd86a610d4f44e7a4b38b646e815a502ff293885a1639e9938c831b458d799d27e268e7b4eb8173479f27d131b90d099d8e600781f97ad667ce59f6f81b0553d6611170940f121f5832020220b53767bedae7990c663cc1668bd5fee0bb0dd90bbc48f8d981caa2a5bcd3c09be48ad61b36b34f2f39cfa6f5645caab7f5d61043d6e9f6cad723cc9d19dea0576f6e76c29a2ea3defcf78e3792f5502081a27348c0e1c409a698b126b6cbbf8400e526338e1606a697175630f4f57b90669b10524889d71976ee3ffdde4180511ffe250c5eb0782b915d016c8b5a8eb77bb4ffb33d463e81d210bac45594181ba4823868b6aa7a3aa1fae3c7d4ac608ae94d7650440f46c9d993026d6d8f1ee4be2ad41e9d290f4299a1f142aa5f4ad73d55f74cbdfa0c2f273e5bcac4e197254080d6771f6dcce493f0e684f5925b72dba634783c18a4c226581db523d7ac19ce65bb4e51c568bd5d815de6e95a846fba6f6e2b8855b18def24e6c8b594ac3c39a6d5b8736b7901c90b6adb964c8ccd629b267ca0c607719007f471bc4104362139e737296950b9463f7598b8723d5988613b0e160177a84bbdcec7e7440931071eb75aa1029c04a4e7d8dc1fda85133701c60ac7dd12ac82bfc5566662f76f8f5a3073de3a32c2fbace61711cbc93f88761505fce4ed7222f7e957abba60894483fc50f003f53a3ee4d6966c5b088933eec23763203f10c981cd572f88ffd45a820cc32726218b248f2365061021f255ad71e1ea36c2bdbca42941e249a62249f05771125cc3d6f183b7ca572fa23630325d75263add582723877ac4e140178517c94322dc374a4b47c2094add21ef0b4511b90ae63127a13e46dd81177b9b0643de584805e6ebb6f6ac70c8c9b0fafef36348dfcb346dc768f58cd690584172b4a0e716b66062f8fb113a69351fd938b0220fa635caec0d9cb4d47e5ebffed77150bcd685f9d96d7253e6f3c13efc6cfd9a514d927f078b6e3fbb8e935a50e7e4ac88e77536f952b2badb15552745e2d76a0f68268ea24e02ff33b87e4a4bd04970a2d3bcaad4c161bd66d251ee09fc5eb50be81d45879b3939e5aa71fcfdfb8dae6c4d998f0db73b21310bebbd6edf31afe3ff8e9bd45fabec4c658a78b57cd8e1a8c0ed26dc310b93c5df46ce55bcc4f25084db9f17ad33ffba088017a94c716bc1384430cb6eb0444147eaff482f6ed893186a3d799dda099a42e44e633a2bcd46b0454e2c1b859b1d6e48dab2f945fa4ce7419ff7553ac60c7c172467a6746768e643f757d3a7351c54c07ec309551acf29511ecaeb42e5b7128699d57f0ea02644063cb2e8bd1fd3daf3df9e1d1742cf23ddea01b87a82c923c8d051c4fe2684fe042e1eb29610cfd8e19b3e0ec8df7bf647a8eaafa9faa190af5364121a360bd320d0ccd9815e2376e2954d4b95031d8e8ade20f443bb88ab98712373837e3c914bde27ad107ccc2d3e3f68a4352c3ca1e9701fbf0e2dd28e380ea9e8494c31e7f3ec3bd7e14b15a37700025bbde9dcd05244df70ee6de2849bb85c237a760c66b5df6064a5ff5dbf916f53c537522b920a61d57e8a850e0b49d88a928ed21fd94fea754b28ccd8405a829d0efbe40968321cf868e36710eeaa53740536ae500bc1121dfcc280f5c1ddbeac217a4ed0b6e86e5767c037ad730a9f5cb40826aaba76180826435391a0b6ff177f0d3e29445f96dbf4f09275339d46cc9dc6a027c1da945f7ac6e26510daec964651fd2467b94ff83769118ca47db8bcea4f78f5b283aad2acac554ae691b02275f5baf0239afe20be954b7edf668173fc06295b4189d612c26c64d85c2cb9c349244bdde0c673a4e100d8ae432be1d8199eeb0b9160cfa1b159d11420ce1e3aa77ec3d09a9135319855b600e6f84b84329d3551db50f6741f28a86fc737baf4abbb1edf6c4e99d1c426406f6b5d2893f0bc79498113cb6cff6db073fb958b5774624639dbe3d8d52eb5bbb388a32cad4060a7cb85aa3ad7e54a2c207fdbe3747a8b3f1b85bc3ce8dfbecb045be007a61e9e79e4c539df59b28cb03410823674a0525c5ed31d5a37a537a9deff109a710b1b369b3d3745d8eec1104af87cb09e4ea8865da6464c4171d24dee903d1d8b19425fd0ac638d5bb9a82be64d2b9e0a4ef65655fcdfb65bad1f5c9e37f6e5b1e17f2d2b18466591eb65e6254e0ba0b04b610b3e21af39102a5aefb8a506f5d2de77042e5c371573491ba2fcc64a73d0539644e722cb63d9548f4ba512ce1c85ca7baf8e19ff3f7d80d0244f9b59308bed6ceeaf8d20c97a7fd3a2067f02d15d407151640d9aa5751798a89987599a8aeb0ab6f24a1123b9c3e0dd6a7a24206108670b313de3a00f95d689025c798f14062dcbd369faa45f574a1799d57e741bf37757e2605261cd371367107a45bf7561dfe2d9e1c515043550921ecd96f2d23b2c355439db22df1c6f4822165de60327a5455a5522200334d597385824861ee668fb04713b62bc50f1f0985de93e45cfe61c768a3850a4a429d6e5607fb3d0e1cbf062ab4809a2f6fde6841d8b483cb7f573d12a424689959a3766d97acc953747f8f131cdfb708684a91cb294c488a1a70c39818b2c667fd60be50fd5cac2845f33d8937254b3f784cafe94e1e5bce14acf0018845e312fe5f8b1b3a7fe74645070fb1a1ee0cb06d7e8b1c18c2c8ae82b2fc626baa0acfaefaff1000b616e5e640e194cd8f05879469f8b948c02ffa1b395d7d4001a249d35a06a16792387cc9baac5d6679325e47681b52df2ddf6cd53c7b78981576cd395623120b53868307c23b4180bec8a17714766ceab56dd83b4480004c1c21b953b5bdd8c033c26bb68844797adc339aea62cf254ecf2803d89b26fc06acbba2d9e2c08deba6cbe67260e567e687dd5ea5930f4aba6915509bea9261f2216e7a32d189510b11a1a60a5de4e66db88163d7a250e94ec904a39f0edb61b718641f6ca68dac03c77f7996858b5aa4b73a8211635f9783afaa4df67dd607731aca606c621dbf3262ce6c88ac5716d28030ac141547da31e9a12b04893cca0b585580dd56059561ef1664d27571f3b47e5b3419256446eee5c661e398ff1f8da51eb196a8729b792791793d847542868308ffd56f5a3abc8138a0efb5bce062ba6a28c84cbc3a61aded44616e135b74919be5ca428290e205b23eaedf0ab9faa53a0f78399fa1c94d254fcfcdb3dc54820f237f6247f4f43308427ba9453a3c4f431d4bb974f495932db4621dca1afc2896f7023f6b2af3a73caadfc974e0d5e809d5621a678cfcea8069fcc4deadb74d0fa415d4d2bbc84a4d673cbd5e6afa03e54d9654e7f046b78cda95ffc7c4bd42b0b43ddf0336dfffdc58c2573cd559e288509343b88c09882303693ca31b9692ff07456dd503f40010819c17a06fe287acc87b0d7eb8175697d5db9b04d0f620e7916b1134b0f08b46932b4f01cf0c5972df42d0a783e0ccf5dc3a23a25233737ed4194f66601ec11a3b6e1b5116a70021a1c541c00f78917a11e743ed7dc8529f338507efcfe64e624d2dacc3237958567c5f98cb0ddafbb77022cf62ecd1f6962d8433b924695d9b558515b234f43e376e1316dbe227a09fe23cc056dd128bef7eaa3675a1a3a7d95fa1bbc87dd8ecbfaeb1f3612cb18a51bbd1bd1e1a3afe8cf172539225fd2ed04d367a2663faddc2e5","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
