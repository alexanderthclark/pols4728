<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"02fd32b2dfbce718fac1c29eb0d954578f85bf7a97106c3eade95e6e6493f3f283bdd978ed1dd79a193fe87ef9737a06586e6d5125192e9586c722f077ef4749e2b427b9600709efabcefa11d0446d8bfe7793b7a30305177ed3a78dfe0b0203aea60c35390264738b321de3ab9a622e14d03efe0683df7d8e1e1be718654e691a4c56faa8e7f5097bdbc085bede79f047e15a9b6dd14036b9d1cc1c7f0b53f360933e0f8ccc56656bbba648caad88e83a2b631c02cc95a936f3105a9284962699a5dd9c97e1526b1922e1b4965bbd4e029458eec3719d0a1274ef537c07fc66b4051af8c624d90b8bcdffe33ecd4d501600267b86cef00b2bd1966f9a4c397caa5d73b9a822a00526c4fbe4e40719830a3c1c9eb60964be94af5c47bbbbe48336da70196bf7e1b43ae51454abb1f6a227a0b4eb96697ecb0c428e0368b6b077e7e9609c2144d8f81bc001c9ece62f7a8382b0b9f2096f9870b09fefd556fc0b098226dda0890659f3389e92b7f9a09fd080eba1fe74d5941ee92a125fa615f8a2c7be0b83ae48255f7c291d39906be7f158c9aa1f8bee7662ceed0ca7e907b307299057afdefdf8bf3d842b8c1133494c1de1c6e128a0dbaabcf2c0b7d7a58771d7623d6834da848d72bb67ba9a3efa28c95f2b27f1c28d9130798bee2f199710850d753256524056804fe2377fba475573ccb4ae1e04e0cd88dd5c52723f58af79d361be9be243d951b0d61d1812014e9a2aa48589e70ec1ac00f5fb306b97769ce1f8aa6bf044156220674f0fe141f40d81b14e61fc69bbfe99f985ee517e8bd21e3b9c604f016ff54a7b1ef21d55ac3c59710cc53d8e4f034dc01f4855e31d771874ac22f2e21944aef572c9fb04bfc63b8d634d0cc6e93d7672b6df7a7952f7dc41fd7a38ebde105df7a2f0c54c02f8fca9e1c8ab154149618280fb06e560c90b60dce4e68dbeec13b924e389e6efeaed14dee289504619cf506168322dfc96b1cfd57f12d5a3762394d6231525ad4c9433a858baba5a7da05ae0d9550b6cac816316db0362a0b5ec947ea7e9d9d24e8f05d24855893c3c67c03a54b474673814a778137f1e1b43437db988346944b22481fb0c6e01e5c398c97bc7d0f023ce6240c5078f3c61f16c4cec54d2bc56b05da4171733a2cc2eb69ac556ed20181e34131a4b9487a48db2e20b9a8e0a27701954b78edbe38d84552ea3ca88222d98ba8bd95e58ae0a46c643927e6b425867adde95c01d14c0b37a91e504eb2e55ac56b0f772f06dd611dc49458da3948ef245e2be3b4abc35aab3aff5324776999ed06f33c9f5a925af7dc81a103501e135d0557cce7dcd9d3d584ef27fdb53d788194ad59d4a9db7357fde5008d5c13e1a41a070773839060956ba354289142833043e27ebf735188de8728dc100eef93ecbefdf3f5ef11920b51c210b87bb5d4fc1a86fe030d23d0a4767991719cf068af98896ab7d8f4a834e4bfe449e92662ee698c534f9d47da224a5bf239193131460e00ae2b9a1c734cc2d167619d9f0e539ec864afb75366feca363b099dc44f950a5098265aea154438f88871ae67d00ccd0d844fcb6a576dec74cfac57dc02d06497f11ef88b0197cab4adfbadd41aafa16d845a38a13e2dcca72743820d1e6066a217653d0de527be11794c59387c95850c18ad51e75624bf7c9f69858c32f7dc3ff1302b46ecf503495addf67619871951d71f9a2467e678f8260384225c2593bf0e2bf77e60a0031ee314fff914512871d4451aff9a98eaaf25c159607515e4270297c6f3c3664253c2ab6adfed2a6c1fb152e5ca58e8cd1e3a225b647f938b699b7722f45c0f858ebbfbe99b0ee06ab4648e8b3c4b78a45d6b062f4702703457d7e6ccde0fc1282f363fdaeb619937505c11f908e3b420e849503456a4e52ff691a5e4556528f240b7fcc99eb20519a3806f594fcdc8501534e4b00bf686556eaaadc4dce2eb38659a8b94c986b7cedf267568398eba2a3ec0a959c7ecd6b8f53042c4309f0c59e02093c0a0bf718b1e73d1fc8038ef639337f40d08c61af6150000d4e8347bd01d85c2678c148d560f896093878a119664f956be2f4f29bf0751f990ee53340f85f202518c9c9f5c4aceb8de0498716905c080d2741951cf7fc0fd0f820cf20d57eedd7f15fb7e6f1f31cafc3ff384123223b0bd3c5369e72a545f311b75aa13090a8c9997dd800cd75bf7a7b98deb95d2ee6dc347d44b4afc09ddbb015d7540f16083cd73668ab6a9c17dc32d46fdcb68aabf211195996ad189a67a3e7dc22538668e7481b7e01200233798eba9ff4ba4b64fb6d5e75f78fbd41540d50c68a5d0f0e6a16805f73fde6e22fe17ac0aac35700c472a940a33492f32442f4b03dd7764dc64bf35603afef52cd7f31a6484580aa5b1d15850296544f1eeb26387879e9b61111cb4adf3e1a4fe60a30ee183ce94d13a9ab801e3d7281c4a41d6a452adf5a16c3e4bcc4ebd9a71fc6d2260412a2e90584b476a8b7b80163660efb59d97119d108162eab5f42021f027c2ce023a11f9492cf951acf7042f18d0052f756c4427dd4b6c16d79be9ee1648e2b2f999c6b188175983365e5848d1a011fa7c89a35cfe4e7a473777ecf2575950eae053cc5f06073815638cc77334208cdb54f4065e3cb894f42fa105db5b749e771c63ea54e21931676d93430e6eff6af931b895e072b2c3470574cc05e1a8fdcdf864c69bded4d1d815dbce05e48c50d8361601958bfd8d70536a31999e3b1b6da00987a2e00751d8fcacfcac4ccdead78f15e0cd2de576d2affb34f810f981b3374ec0e7d5fe3b7c5098c082c56b879930bf3a14cd83a7b3478fed799236822242ecdcccbdf943bfa9440c1fff6dfc21e53a12f4afd656d0a6a3263ae802023d63a172225c1365bdda3850e524dc0b674d0232af87f40d8497a92102f7e9d73cab20bd9dadc46dc861fe208b1d8b97ee033f3ec0693cde150cf83f3a5325e806b2c1ffbf5616af07dadf6b51f2063233ff40d2be85a303827a0f4e48adb9858d19feac88989631a8a2799d244f331b4e2ea0a628ddb7c8efd86fadaf6d4f6ee8af0bba77db8b2c2da7007fbfc0d0ab4f8db0e14aa1c4c1aac96cb6467acb0c541948e4a419903c043a4b953fde38274b477ed2513139382e20d4189c8e9d135c1b0b8cd111bc65ed9c295b82c4d218fd4d76801d6e4e505e5115193daa4f79d94169c3104df5e1cec87b4d1c2c7a039a855759a3f3917e3ad91bedc5aabe9fb94c1585e7c9c20901f0a2e8d60243fea0ed2750fcb4928c61395165eaf50f1306a96c15c70793d8eaabf778894286a6d0b89d2d9bc2d979c28299a897e3ba0cc5c0978145a408d2d4066144f6ea79a7f6faed19b3b169dd4ade6976bece254f9d9ad4cf62fa9f320df36bcfa0db25ac20a5a17d984a5f57dbdf68be59d33c5cd5efd756f7d046ce5c385e031364e5d32569b0cb5d8ef174fa6c187f11717b72d7ebd8222004113aeaedde8adb1da1e50b530e44c4638edf8054e6f51d6827ac2d86c73f91562bd716cdc6a79dfc9c1ead1842eb73e26b30d296dd1aa8b8b0355e9f5d4630a3f8ac934955e460a30554db8f9977413cd90e37cb3e33a4c9d2868868a5088ead8d8cff64eabcec2f2c9c897b4b32f3e450a6c5746350d5f1b42d14b5f032d4167c96075b3f1d031b8b9d170d702f6456927fae3ef2f78a22dfc34369de6460dc7dbe4685c55c1f95ceb930967f89127d35c56e8847e221c8e8a8f1c087f502a0f781af0f2ce6193aaedd941a5bed4a74b2108e91c2af90f659a3404de01ab4dd1854bb3bcf087b53031e3a52f7fd5919d2971875f13f52ec6eae5e131d08fd806ecda6cc3583f2db70ed2392b6c75c61ea4774559cc510fb47902c302cf6d0ee109606c05bce28fef369a29ea53c4cb18d779539ecf08381bee78be8689c9fdf16ead90463cea7eb1c6d9df25ba1b61cab93a217a32c106788c399084b9f63f726e7764b90d620645845323c9314077cf56167f19851c41f0c445f198875b4bc7811219dfbce7da8ce908d976f8ed4c7a1cd2cfd08c776b406c21e92f424e9837d8efd5f9398a6d50dea40a3649ee252f2624f406c0156515079e08b219f5cae0ad65c1b39b3d212c14afd7af57fed006696a59f4494b752318850cfc063313f6d359da250c128fe0ef62ea50ae0df5307633b471dc8149b6d703336ac6dcdb12d478c01af0004866d005a6d9cf09ddfd91abd668357ba26fff57361c93d7bbd1c427d9e64cc482d25a7a9f1ed00a1d28888d26b20c7a7c2a6296c074b9db0842eb2578c73ffc584960e5cb009e7c0bad800820c1ac741c4f3c8b3da3ed027dd1d134c724fb8b26571e7a353bae74641f64ba8b165897bee20d56da3676d5416bcc04ff446f43cd829e613c3fc0eb908614f9d49cc7c5f59332afd9dbc936de5433879f7458674769b07838d33f2c75dc19ea18563f3407bd922dd4da5fd17ed91c5c9fbb1826f5031ca0d3a8f89acd9ff5300c5ba94bbfc96dbc1ca0bbd2c1d3bcbf70174c104302b824a4e1eda9c2abfe557f94339311c3f39916e4c2dfee579181b0e9eb38fb56bcc75050c77984bf31c60a325ec1acf769b26cce31d8551c719cbadc40c100fe8198afc86ee786eea9c9ded9b8be4b37626e14eb960cd9ae8e1b16b19da31773ee031bcf28ea6b27100afa3feadd1866122a16ba1f244c4baa7df3735d4d888da3b5d682e42fa4fb05573143645b660b8be18fcc3da0dc55937e474768f499a0adddb3cd033d84b0a719f4e9f24259852a2351d5d5dfe19b36adb8868a677a5ef912cc13bd2d7f782af6075f762b55f0a9d23ee33b2f01fe3fa6c32c8c379886878b52d5800dccd668b00165d58d25487007785237bdf4baa29c6c6475ccf232fad1f3806a97dd8a85824e193f58c3eed672295cf55ce43c97591696f55c570642718fa55b916e983a576912d57ea0954e1292e7d86f0c7d24ef45fed7715ee735df4064da4a9f3476f9ba1cb8d622290e45b3e5681463c35e157f89421643d31ef8991e3cd1a62b948f40b06b639eacc1abfc5aa699588404a221001f3f336d00cbad4e12d1cba95b0ce920fb573bd103075ac76efa3bb86dceec79af5b32351306686594636fb678037c9ec3bc067df5464ab54486f36f4de4558325012302a21546c23609f62c63ae04dad5b3faeed17d41c9939a9a1daed41b0b7065d8bb88c3000d5f5978064c86a4126e3e3d76a49f592670f0f889b414d66edeb341ae40ed09cea4f5f13c0bda30f493efc085de7786a4b7fee186b29be05e32ffb3c87c4240bdd7c669009d6289c879ee01cd4873df45714bd149111826d8705bbc8ef0027a62338558d054c335070f3b7250c52d3b05f9d58de4856ca63dff39e4d48ad107fbf636d4fb0afed6996ef1f93ff560dc9c041c572afdb18a31dec740e0b2e67997cc56e1ee906dfcbdca1a63d1476ea7e75b6bcf51bb4e1eeb6aeec32131e526742ef94c2371d44d3cb4cbf89a034f8fc86583b8561b0d08b9bbe103c111ef21878a7d614728bcdc441eab5c1f211b43e11737ed711d0dbd8b9dbc50161eae9c3ae6150ce54ed1a45c3d775f40be59491bccb4c81038f1326b3a2dacdcc501d76e1ae7027c4f78cd604864f17c25fde0180aa5052cd0bb221ea14e3c42fab32cda7f1061fbd4721913eb1d7acef410faae49cbbab0bb1a9ee0bbb8f2e1b1d1b5b5d8908fb99ca0d357ce18372fb114a75755900e5220560ffcc093175502f122b1d6882cb988fcc551989e0d9c874f404ebedd27a15cd7329cfbaaf6d70d087b53034088a40b370151ec2ed47816aa0a0a5ef86b8e0ae3f1b7b2c1b317390c774e3b9f05330669e8dba8effaaafc2ae4ac58b6a3ca0e618942eb2d6adeca74257b103c5d39e3d896fa0d178a044a152e2d84e4fcda01b7b64071cccfad953cffe41f12d9a3c461fbfaaa593246d43efb1974d1570ce88522356581a7653e90c54b672273d58b7969f84454e727c2c4500169afb855b4a582108d6ece138d86c8c47f28c86c38391573477a3e4649a590f43154984f99378dbbc61654ac4c35a9c3ed75f66d5ef51aaf7d29d5cb2a11566dfae47461597f75c2501bdc9ce0aeefc5b9808b60028f8afbc21e1cb8f04c21c80f0feab62b826eff3e86eb865b3104aa4cca73d1c20ac72d1b9869f93cb4aeafbcabeac52c8e87906f332e0667cd6c3cabb4373bd4dc0627a3d835aa36462011df220b8b0a501656eee0b21b30e70bc9319a4c156977686a8906cc21d4a20bd02ad33d0dc18741158201221a54df0a8cdeccbb8d674dc2ba032ddc934fda089d57f60d3d11f8ebfdf7464a45927779d1b295c99558622ddf96a9291b8056828b268b29de5f21ce641da045b9c7c53035bffa9ef7a2649232f37e69cbc6b490cbcc5545cd394fc42dd1c4d2658e9efc1f751a9341270fe987a45e0d56d96e2f6061fbe51d4a7f5f151b2b1e1f7cbe6e2a8e5f914793f43a22cc123bb33ca5dd02e070f7eb6990f98282feac0a31b919ca640df9d685c714df2b7ef5931bb44f9e8541e2f5cf3710d06faff50a6abf269574161cdfba71094d2fcc04bd0ae2978e9b67e1700642cadb818c8a9f6330f592aa8584fe52afffa7e364bb8dcdb101615f96f33a8fc0df02bc45ff8274ef2ef564a3ba59b5255d7cf79ad41925458522d280ce3b768672ff602ed8fa5f18d309bdc49187a05766eab4dfec0de0fa42c5a5c17514b0fa4ec6e39b7445cde59db8a13d54ff17d28df9b89dba0598bd1890dc4f2e47e6be0a9c6c4d2e84e9451020457ba356ab2a853319f464a861e2a58e1d43d31f893829e45964d43482f3d7fa1063bf04fe3b2224464c8cf9dfc33f97779d1bb7ed1f090223fc45f9ca2dba5ee60c400c729ceb20b770aee6345372df1d348b546592bdf380814f7c9284b546305694ef483b3976edc98e452a66a5ac1c76c9159afadd65f24f8bc06e233b7711e754556413da4e0258a66d65feef298fb58bd0745d2e2ed5e2df9019653d169d9ccfec287e76a07b9ce163e9956d839fb9eaf788beecf325a2e8fa3aed51ee78d13d3eafd06d03b7cd80cf5c463a70a4294e7e4b7910b45e1db33e805e1b7f9655c2a476bfb9d3fe8e88d089606012935c9a38c82dc4e456547372f09978ebaded91ba70d45b3b31bc42e836a8b5a4e8e9664b611b1fb43cb9c9e549406a9ad2a14149683784e587eb0cbd11d768f0598cc31d93eef7175158b237a7fa97883dbf51c691bfe0a151d2314fa9ecba32f4e2ca5147cc151ba26812336946847331077f2c4f1c3e5c276843853e45ee2729d66e91829fb71e786505d921d2ac214f510528fed5d1fae72bcc360a40e9c3d4854d4aa1ae62c5a40f75c5ec5d3b71547bc1c46cfba2de4df1b0a63a1159924b962cabd06f795e0f825b521a9796de20391aa7154b195da8ff9aa0e79242587680c70a06208991bedef864913ecaaf9a28c195034c0aeb77c831b258993bfac3e8addf38cde53971a48275ea8b1326cabb8c4388cf61f2a7afdd248ee722e77e063d9d1a6ca9088dd5525b81a9a828ab0105466e78b23cb7c1d69acb038b3057dc57e1d3c93d6da57bdc99fa2c38bf0cb6389afa0b6e0876b281b08c8766981c592a3995252aff3995285ad7f31ac0cd7d20a5b6cbecb19d185192d8a0bc42b88052d1ae3360e38e1fb19c29d7f58fbddf517954bb26532d0de07a85401c51408934bd7884ed6a80a9e9ee36a4dd407be8a81ae4d28b98e01f183300b5b250c8be6a9b30b83eaf66f5fc8db72e2758ddd7500e7f331f96abd48a7ac495da19513b896acf45f526a32db20b46bc9c39c6fc5a302b5bfb55df6c91e1b8ff93aadea83f84c21bbfe7c04cae86aee535c12087dab7670484fe743df671275d3d018f1198c3f2bac67fbf717fd682412a2d97d3088154c5b03061a181512715f78f50460de4b854a9253fefac8a5db679bc2402137f17567950ba7b9dd458263a6cd58e7604bc3ceded9879849c235bea10f3262dc77041a594c97bc113252d4febdde7cdef518e933fec26dcd3d62e1a56ccd08b4a4d134faa13bba67935927eeb02e570999d52807fe9d9baeec28feae44fa26e0ff4b307b6293127e805d56128c2edfb5a0174ec4dca17e6ea1a97c42925d4e3020c537b59a4af06e333a528fd94038588cb4066c63b11e619833ca26e66fe7fbda332ffdc30be4622714d0a1bcb9e3caed2d8144db7da182dbb863659c7c96a029f0ea502c8027048f5cf0d2f2a6f7050dd52e60d925b60a2def56336736112fa9c8782c70868332bff79889a49d3c26c5b767f60dafececf9271350c0585053de89dfbf9b0479568cc0b31d6c58d49074abb60d5bac2f287fa5a18b95522068181aa0efe4620a61e9104b4761ff2706b84f0bc2eedf23270ed9031746d76a1f9d8e325bcd2131e5d70119078e4c1abc668da71ef6e7df8d64ea59ce462e36da8f9dfaeb9d7bafd1394321f0aba41386bd4944ea123b3c6a3a0288ee756b692c06561e4def8f9d5938fb6662e579fb71b6660fd6f116311f7b961a88a5a48a8bf9bfb18758ec2a9f2d9e4c8e9807b7386f1e9269dfdc6b135da39ace33181fedd47879735b100f05c6f84dd3960f76bbbf640d2e912216fd38c445469d6313456169f357372cbc9516678f5d31391f1b7973475fa122f4a7b6e9408bb83ff30ca996ca5257627173686a9e4e4d3e5ed16ac8f5b31e3651ef923bcb592270b6386fbb7620f71d46abd93136cbbf4d07d0aeb3c8e4571f8ce6a870f4cc4129f5d595e2e13f076317683595244aee11e98b7a09a7381ed612ddbb619a89bcc306360d189342c10d7857501633882eb019120a2009de80661917f57086e264fd12de2848025d2e9f01a4c4047a1c1b04a083940830dc91a276a220e606e2e0c6a1bf7595105bc30c387f6d2c8ed84994fb23b47e6838a17eaa9482c678908149a899a8115cf40e649fd935b8566aac58314f93995a5e4fbdebdafdca01b8ae679a766e734e309f2d5a73859acf5ef88e4afcefbcb918ff0259796c5ae5d8cac5801b72f7e392f46e62b34d399ad434528b36218ecc7ec74a4948f4a96a3de45010508414f9d5762c3ea1254956cefe04f2518558a6e60020477e9f13cdd48340978b94cadba1e9ec2b44807f89c6e7dce2ce4b6673ffff7f6b1a0edeea200d928b2fcd089da16f78b08cdc38946317fad0105fa9cd1e5b40613bf1c83de707616f6b53b366fb211d3d46f736ad6285c2ea08a884fa756c20e4464aa1bc8fa13ca6c333ae1e3431e2ad74848f38686a0fc59dd03c1c6705b82770880f6c4b52478ea574099be70cce9d7b31d128b0a43b2d261a51b0b5bc9402537151867d08317698791f0fc5fb1e9b1a779ea9f049df9341d9d091979ba93d77164ebb7c85bb93a959ec5a76e2422f3c9781a19d43601feae440d9a68d49c5a77abfc1b1729d4ec6f018605a94843c48756b08df8b6eb54d0a6893c6c1b86dfec56214c15e08dd48e913ee425f863cfb1cd21e4119cc932be434f0e3c89d2ffec304e7c6e8cf4b7663e3d530dc232e42c63c2dce53717993df1e60ae709b916a56de924efa1c8601e5432807be3750c1f5385d24a6cf369df70110801f54eef9d47ae70c170dc9c3bd40346c4a1ad4d89be435ae36a3c86e60b0d41f739a9336f69499dabc3e6fa884267863cd7576e13386a82b009646239f5bc9f83c8e78b33bbbb7e5dc1404f2ec3751e4f27ffb6a7f7a0092083eb0ebc114521e4896e7d42b43464bb5be583d6390beca97785d733c8ac408826a3ec22aea08e1b373e30b50920a7b902a7f9629afa9cb94c2e6aceb6e377988ce01b5c79f27e2e20e86e4f5ad4dc2929c415b5f564e8ea191699e1993b55bc755e9ad2e3c0f2ffde510a6adaa3cc98b3868282a64b5c31e76dbd85462f91d7385eb28839c6bc634ad0ed36bd7574ee6a2d2daa6a5a65623a30d74215c701c1cf0b36155ad879e8cc8183c99e8478e72b71197853c5a9b4dd31e05a317eee7ae4724d9032e305d0e688cff46a6af517c4c9d1678f0f6706f43c39c489cc188ca3f5ba9d41553ed9709f7632fa89622c86e30de2fc663d545aa44a72172cb2c6130fdebee668be73e6bead1fc0846275058e4243a5c616dd8d37ea11947e4eaa80449e1aa1c40d39838a346befe9ca546df5485237bc22dd95d74a9629d52035eafea3e4617590e57d167afdd94703bda0e9289453f2665fef8c66438eab24a70fc04c085e31bcec81b2f85e8b50ed74449a3d295492c2a13b26472f227c9d91c247f580a957bf06dae9440d5f8aaf70562b5fdf9ab9471f1392401cd3d95bf885c3b7a63a44630a7d09e514c1679a46a381810dc6674eb63f22ea2ce2e7a2e360daaeed891283619d6fa2819fc7d800605fa41d7e7c736e1662ce45ff3cd1aa4562ab3dd7fc558afa0ea54e6f0aab85f81ac25f308a725b17bb50347bbb30d8149ece4f5d35d8757d4d98df4cdd44926e1bb9cf963cab523d3c7b50db30842293b1f479f7d2d5e7c3fc4fad8060b11cdde270c936d0be7378c7dd203f139d109a026c90d936ea2604d46336c0cf4fa1b27c805e2d514a8db31384dc370e7dbd0ed7bdd946b6cc19ade5af0baedd171915e3fc033728de19438c0cd0c0a6f914df24a50b79b4aaa90d021656760aab1c000c8559587864e0e758749d198c76ccf89c6b5dcb0b7a24811661a22a72f8ed9b342cd589b258e2f43e84c7c3e8345832f2ea51da3f6fa466fe2ab528eb0580c567b4b6175f4110e257fea41cfd8be8305acc96950603929e1650b148ea16af8a6d58c873d7eced5db87620ac2fc7e7663e07e78f8cf5d1d8edaa6b38ac17d0559c39dfc1fe977d7fbc7daedb590def5317deec7b7d44224c78b81512c8ee2cb15f3b476e8ee563a83239dfabb0f6493a661193976df74fee84bd8bfa267f89c8253a1e3050a7b6d0a86ae1be824757d8aad08576915b995d1e749c5171314f0668924ef1e0c90de116b5a5d446c632b72215f5b473a0f00d822bb82781e131fa883132e28eb37a97062d5acee8cbd04ec47d23684d4a30c4d06707967df2e1265778c922e9a60941df47a21c9bf05a6ae1a6a0c18e9e368521b96ac9f3352f532b6d3506eb1db8c7088836d7c956c94f8ad24a17d9c81b335d20218b29d0a589ceb10f0b40a326bdfa3e7ac93969b71c5d5a04c37f03ae54c571897571f98098f440531522ae0381f7b229abaca32fef85105b0c6a40e87dacdd7ad07363b7f7687083f172830c1c4bd1a28eb8287c6b70668822099d5fe256ba1e52294cef2ca809500e11cd9848c898f847496178e599ef7639bf8db64c6fb06a7ac54f805cfb9db3a6a1625f07fd47b7ee8a6a5f6a53c9181ba0a056c7b887516c0baa00cf693f18a36c40eb4ef90099de2dd9733ef2cd3d685b1a9247e8ba74db6e21b3c1285dd1b17c2991258450336e5e35a1554f48144f15dfde09d8c124771b7459a835b962af629443b6bd4054008e93b7aa8834c57b7cfc82af0b59b764d6536eec3c3d01f6cab6731368db146f4dfd197ed905389940d50506574e307a9a302f2927172cb86f9a8f970acdc1dc53302b7ad6b802e99bc6181286edaea119d5ae0db5dbab5fb433d4171e175141963f59899aebbfb091112948c5d6d8ddbe0a3c0e7589873f52dd9ff838ff05bd2e9d11a3c7f56471b071bd6eb25bfaef0d19c8b51a9065a800a21ea499dc66f31fbde3a05433bbdd6fb831c473b9d900ae720bda37ddd20c3b15454ae2055da6b1129d0efb6ff147d71b57f12e1af1a9ea0f00e9b0097c3c11cf3a4dae3787a947df27b042503a398a712c7156ba3c74252df6da2d44bbdb42adf6e299ec5ec7429b18d0e5fd753f369fd7d916a1ccf0127e8c4228fdaee48686ade6ef713516964c02fb491715d2a9dd680d6b668823b15429622384846d7fadfd421ccd2b73d48e027df38e3f3dec481439a0d5d778156c3c0188b63d839d3bca8dfb4094bd24ff42c99aadc3f44c61516f44c5f892be7877def8d38947c8f06128db496eb3b92eaf70746fe329305606f479ad17f9c462e7cb79a1c016850b6407b376cd96e875a20bbb1b0d8ce90d46d7749100b3980ab9bf869fe394e5a30b381a366b8f5c9a85c2b6932c468b65abea3b830c9da20c9359f5c5c9c078d4c48954c8e4e56140a90356e0f82bfbc92cb23bdb4e9256b5ade87c02a136dc314b9ddc6ca51622905c19db662148cfa0333f9b1e6a064e370b78877ed7d347aaff84e4a9d9dda86f637e771c27984cc09c78fa3df19b0f7ebc972ab779f61259f315b7fcd2dc3371a932d4e084a1504d907ea69da056690fe71b4b2a9b7ac0324ad11f21d71d408bc1e6a1181e3b663eb6677be6d5c12fc5c5012e3074263918b4d713b39263be979c76dd946ea273b7f26af8f636af2ee8b7f30fb802eadbd7a6e42d07ef26dbdb774510861ec37b98265cfe3505e8afef8f873cd7dad965cc9885bcf6588c0853fb854d909d20c5964c525818a3204c88d4b477132bf4f1409d4bd9c1a2e2dcf2cf11c98c23e765d759ecdf54a9bc0cc36b06a078a60f798539551a796ec3de97dd2be22afbaaad47bec95dab22b0534547b040baf933068b8f10143a08e95883349cf92ee34c4c77c453919ad657c725977688fef2c6646f24320020922ece45e31953893dd419cfd2a411c62895a677fcb7e9c01b1a95cb96490297d0c190e39c07f9fc060108a4acb22c2512bf541a6b7cded6c222797096a11738a6ee8b59e6c93133012443f6a45cb31c9f78e2c899f99c34ca4953c9418216a3fa795d85867edc2565c8a67114493a839c583d341fa9c52f7ae67f0c8fb0ca1f2161d106d1b680246f8bbdaa25533bec1c495e0ded3facfd97b12de10bd05bcd7db45cf13f1d50581b9caf3ca12d46934d7233afeb021f04d2537a4905d929f0fc8c34f096727d8d290ccc5ed9c7a309c5cb22cd987dd398e1c70deb62779fe9a3d1efea3b4885265aa02a35b798cc55d56156f15e09b5237262dd2524fbd85c5c7157f746319591304b89e8dabafda4a8ac40db26a00fbeaaf59437a8e5e09cfbd28efab6de3e4bea51e06ac0ea270501954c6598230077ae7492c2bda3c390748c77b39f56d726b6d818295ff37e6216a62bbd7ae6e93a4d8a0a6cfb2a570d8e3470db1232aea87371e99fef13628ba5a726c2d8c213ef3d4b8b614f7944b35d585511eba2c12cfba1d83955a37549add1b625448a0db0216e2f0bb4ad67bdae2ddb54e1799f8258d637569dbfc6821e1f1e57ac0f4d83cdf84e6f355d8b072d6cc1ab5cb0ad5c99e6a6818a57293cf7c89dccaba895ea5d1d9b28f160e5232496c9d94d3a2eae3ff12d628dde7d7ac7c3667c762faf53508fece14106496f5f2d51fddd389c763835798ac168affe85263e3034657b39ee3accf95c422726a93d6169657486b8c2941d4cb7676c672249d814eac413307595b69455a2a2e3fc4899952ff01906a6208c72a66328a394dbb7e4ae5f73b84df39d5506a791932639659bb407d79c29dcb4a9b766f11efa7cb97ddf4ee040250861b06be39841950bc109bcc7a144226cf20856eab4c7c5b0445ac26cf3dae78f95361c9e7c3e68973a7cfeac463f6a9e53324be9c339a98839e6f1d24a4f491616649bcb0e91fcfb6bc3cf0f65e9155c974e9aea5ea1dbc445e601a489cabd221974845dc9388a5e3c8f5f0c80c0aa6ce23022fdfc0f857444eacee23ca660e761ed1cad11ba2c5fa487fc2799953534ecb2bf1bd9484a4b3a27a4f452194a0c8b42dc6c3998f5e7d20b178e9013e0419f0ffcfbd8ef04a9c630e990d5f3184124bd59760e657aa1a01c89b36fd1e385daf8c959add65cbcc5a33c1279464ca14d3059da9f68d9be895c83a20054885295f3003c7a21ff00bd2ed65ec2feea140f10b65cee96dbbe58996097603d2dc600fb258b239b0f70743f6e0996281f97084173a29f896d59dfac46cb08f57a04ada7a4b2ea0944647929b0fcb4b4a2938df122196b10c5be1131ef0d41fe720585ab95bc2ebdcbee268d84c612f8f6a64216f60a8d34afb6420d72abbc655d52223ea6667aa699ea60693fa107836b29cd32c1132a52d589d8d43e52ca50f506528be732addd192eba624bb9d5cfd5a459207a17fcc7b3fc4e6f1306e70cbb901c9ae0475b5777fba6e9c56ac74efe267f05766ff58be10f087787e221219caee870e0e779b8303409b7f046631307e1cc53b9f6e3a7df102a1a20981396aaa7baff109dcd5d2ddb65171871b7d4465665c936a51dde29b299d5880187828c5a16c7c5a86594d15df098fe9b3227ec8b5be98442eca1a56f5886039c6b90804409d85b81e28a1cc797204d7bf134dbed9a9acebfef79a45adfda9f714e3aa798f1eb3b5c3a8269eb94a4000371140a067ed916990eedb256eaee2e088d67adf87128950938e828c8088a2c2bce993218844a2c921940b20f64cabfa57d533b8ef365f9c047868cb7d9045feeebd7138acabed37f51e2fa4170a9bea38e3324fda8a08afe2f752f82f7574961d78e8b25f941e48c08d1b38d0dc9e62162f6c159b124d4293ae347ebbc66afc1d4a16e39b25b04df86f14c6f06191920711b5d77fde021e735b74e46f89439fcac375428beb8a0ff7c84d34a58b3ef3af2cc8d6f23977186e615f3adaba7a2489236de7ff83bb44625c7e22fb46ecc8520b1462bf154f2c896a59d10cdd91a0a9fb7ee0bdef5cb4c6e77d541b5fd75b2e44d0df8bd987f0cd769bc566f38770d371221fd2a80a02868cffa67790f59d4748332576b0f6f9407162c1ac18161d2eb26a54c02019555bfcfb74253333b3992b6464d319293505bf9f0497b311ec36edf8c83d394fe06d61f78bc6a6b57916a0bd799d3114d45bc7d95af192b40eb92597510ea5719d201de423c789dd2c9d2660f29642cdc92f1b9f87af6bbed828f292823bd7319d59ed73b2b18b58727abe73d21c47b8aca5e1c20b333872decec86e388ce32bf05412f50e8932f285509a48b43aef6a81b736dbed265d504927cc3eebbd02facac23716e070d9a91ceef8de3e973eb95e3987f01471173517f5795afb3a19b5c742a57e94d3ec4ed4309ccb571158f879dc84c82a8800a96a535935372e37f1f43fc08795bd27596728887fbe76fbf20bf0f1fc2d9b1cad9e6c2fb2bc8fcea14a4758e62719675efb1e970cf688bf25acd76dd2f0b8d03cdffad4d3124c8edb1199ab1a278cb1d16b873b4164e611711c49848a343edebc11cb23e62573ea139f80dd7c5bb4cb27769a28d619de7939b6a8360a44b2f3da5ac1960f72d94ee9cfc604ae4f49cf0b8b5e3d397f89b497b646851885ca6c5990efe67da30e8bbe86c1aa674b370e6b75a748d91bb6b23108fff1716981a70ea5f5e358ce80be23a1f5f3a2959e6f373a50385e7d7559ec44901e1b888b619fa1e2d12aed476913504e4e20d6486064f46bb626d12a6754c8a4ccad4235f66879504b5a5f42dc61866d02d1a5074ee70f414e9f84a05eb84feeb852e52db361e8eba169ee44e540a4eb0a064e9259978f524d5f37d1c6bb8b67b5751e25ae4546c1f4a4b43fa8eec65e53dc0d3460fcf8621e16b78d643ac8722809f18778046a97b44cf7da8cd09fe479da81ff371a851940df7228276f7fb7912eb1c4e0ccfd37f698e3bc3083ae94e02247a5ec57a1e3a80b8249d791d173d00d20ca979997afb57b5eaecdce50fb1d35dfef914094b9ae44f9dec14d12880673157abafb8459130a84af6a5f34107d2eb0c87c18d18ce0836daf7a23f9cf9ab3ed4aed9963990af99765a5cb86aee59dfa37b963c1169d02d475bf043b9f1c8ecf8b8b1f9a81225182e343b3e8534350a91df38b10ff4ce981a1247365857f91e9231e288facf6c71335cb27d476ab7c13fe4e496442f6dae292333b729267d77ad8720da1bbcf5ce8cb0554d784c2e7bc9b1d553f4878f83d920de4d466ee2c35b4a80723dc9464b0c22f3236d8f1480915461317d0f0fae7ba2f0d94f747cd2d1c5056ce07ca5afea4ca2ceae790f208fc75c074b538100a1a3ed7e5edf3d0e0090501dabc63fb8bf3ec4ad1dc1d87ff243fb3d383f77d7132048412f213fa39a8f144ed36f84611d348681c50590e18c77504f0df0f3acb99b1fcef512657ecf03f751c464c19c6292e109068960c42480064e1b246cab1a9d5c7a9b67f3f90b1539182c4d031a59babbc279e1a19802daae7a91613e9f81b0066409b1c608899b1f92cf6aded3b3427c0dd87464e7792d47a8fb4f98d0968a180a94224703a3de0fae13d36eb5b7ca7d0f929e909979b8da05f3a5b5685ce8172e2e87ada7deab4366278c1023d3295dcb0f008afda096fb327315497dd54c4261d16b35824ed546449f2924c27cd385351bfe1934cbeb88862235adbdf1a2a9f9cd986c6d5e112861a49b013951080a65d77647045c0690df8ebe203df48219a9aeb79313739320a38f0fc2574a31832eb2c5190ac2489960cc145530894dbe6fe4a8e0d35fc261b12b2efa60c26c2bd296022895fc4010433ef00405c162b54c09d9d7eb0751fef4dc883c72b500573a803ba9ff2ac9347a83f80eca5d43c127408156b233e97e9edeb4b450d56296211b94ce09f072197114e7e257be5826500cb1f7708ce8c65c6572bc35eed375bc0c408927b053fc6df59c450add513f83acba320bd05494c56ceeab8db761ecaa502b4320cb7a76b98d27a68baca92056764ab34eb3ed4683f9223ae76bfea0b209bad846387feb370e972594aeda74d2f292ce2802c0aa1cd938b1cd456eee037f04f7f8a20bae1ccafc72110aa6898cdc8d49e1ac952c5d1ff83f91fcd16cdfee202a7111e4400e26035d56cd7804382f65b037ab8d5dfb93f97647f63abf114c3372d8c64ed47a49d92f17195d096b37adbd5760f4f16b36e4da7a1247e41cd7920ee343db26082e2835f6f47ab77d52f7ac93de617ae989dcaa2680a92e4dc24be63aa05174aacd3fe968f93a5de21c7d81c9412afda98bd2f8b7d840d2a1e2d7a2d1d20aeb64a22aa997b1786efb2c5c611305943725ea1753b41698ba37176a9c72b478d557ecfe461cffedffaeb0a4cc2586a07dba163bc789805ffaf90c6569ffb04fb3574919e53b6f2ae54e571d1747c3b8867a172d1322eb34da7755d4ea63b4b8d1d509a7ae610680b65b259b20fff1ecc5d36fa8839900e071d3ba7e23b6306424a0ed0f63b110da6887d3f337248f3a0a883751e06554b38ded42e865c17fe344623787f3548c77ccb4e048d82f4e17cc12ea5183e28e4af6fcdd962aca4bec73d4e574b4d03bfdd47744f08d7dfc6553850bec765c04df60f3ac393044f66ab66f59ac58cb7dec6944778622a78af14073ace6ba92af4ea69d403ae4a6442804c436d9f209adfe91f0ed14d6597e71997ef9ff1c9f9e3db058a829ef73815b0ce6ac6fc42f1bd036623faadde63ecfb5dbfbc97328e3da6369593c2cc790a91e65345a64f366aa2d3faee5057ac29584b8f0e6bf20a8183e4257e4a5407d443ac258de63515b23358923a8177db25c1345fb13408f95a252390e63a3f2c84e8af48a06a79785584fe68ba250a7422cf33d7700fc1918e69e373bcde8910df3d9fee5bdba521d202a360da1dab94850cd9418e6d83b05dd9a5a617e2b0302bb63e624f3eccb3c2dc0c386a177a867a900840f4475cfb18948f0378c07b1ad074e086f3e57d107c4b61eed062a46047129b5cd84954056eec85488d64fc5fdace59849d2f0c6dff77f6f3b0c5085c1364e733db991a65004f5ea4db82376a6d571c54e5abe7810d729e07d9c0cae4603931075afd18ab48f8a7305db94690d6334b2bdefa41e496c0c58f320cfdef9229a1861e85ec5a43db2d3d993dcae9f1cd54162b3db8f55af6c259530cd3ed73fdb853f97ea4934e9b73f8ee4dfb4c95c7cf3cb4de6b06f9c63ae3df036ee7f28dc70397f580adf654a58de6282db1806488ea9e6c428b8d33adf6cc0b88fa27b6ab1de0d0590d503f1c5a59308505bca1af6d9dcfe3fc0f5b1b5aae9083999c0b4a83ede6d14891214e3f94cd1671296bb6e8f903190ee1cffd64f1355adaa893248ea2c9b8666af447556e71e7badd0254d839d6c965f955ec73d1197f81f5168b26093fd648ca17cf979b79415c5462991d09532d280f26cdf4068efa36930b2efd7450f624c7a1ee2136943ed12d9b914cb0e6c79f28851f1a39b722cb1b2a162da1040ceaeafd3d5d45d7c38ff4258d9a0cfa51ecc8d43cb6ba0853294e0b85febd80eecc51bf7ea8e0d5bec0dfc24e8b92bc1127a3a45031dd1ae5ec052db264f833ba6dee7328dd05a86e4d133fd8a01b6871c5814e0dc66879f031d260266045fbcc18e373e34c7e7c6388a906cf1536901ba17fa144b717c0f0a18e4cc6c4e5f284d669847b5e0070cd72ba2106923740c38b830457e3551fb77a0e9d35c9e0d1d5ccec6502bc02a30929b2595c0ebc539bf373471388799088f11399595de6d7758f3d2cde935f9c56eceddb7a23eee99860a26b64f2be7d493d9843d4cfa46ad5f21f5ad36811cd727dca4ec006ea9b366014a6a2f8e5fa0aed32943f8a8ef06f1789c984fb1303bc9441f05f0d110c0a2525e3eb79cf43410f96ef715a393420a6faf311f7c74642272dee10e0847dc1df737a62b3bd2a7c4b95b4faaf9452915e4418b4bc55ac2a77b90feebc0e31bcee05b23d80377d6f8bba39e1b4d932c7eb18215a8186890ed72e88b996f28b7410df6b4cf19af0aef965971468194f19794bbcb39ed256679b7b234932f1f11f1d539ed6f11a30dcc15241b79fbef60a1d4e9376021ccb5d105998ad9f4d81b42162be3c1ee22ae5883fbee5c2d630c74632f850d745d5de7a6b43e0455af8db9c292599f0dc1a4064dbd04964ad2a50ec6dfbd86fc044e6ee133e75a53b898737c20c8aebf988d8f0861059b22aaa88f0815c1bff56fd90a1f5b839f74596728e93e4558c55d978ce9ecddb5be13e4bf1e98b64991e1d32ed5e183db7aef866a603a32be1d573e22c71d0a1d417e12c6097fcdfcefad88a153a319b7443bf04a63376f1d9b4bc361a5ad4c4c56f3036aa7d1530d593f2b41a042682aaf6ba5a951efcd6d6a15766115a04eac0786e4d7372d96fd4e3b7889e1030e0c9e05113f5d50a4475b919ad4501c1ec07951215c2b23df8531bacf311bfb33755d482a5dc01c0811a2293a4c869f27a220cb1da82a4dadde02a60ab406a4efaedcc5821e9370bbcac7bd7e26e9ecd7ec243c2fd2549b093541a7f973a3d261b83ae7eb259e43bd40354b1fb281d3e1cde98e3bf2d9828eddb57a3820298aeca89d76590faed29076b684d05f51f2cf806efb5c25b2a40736bd55da6bd3467ef620c619f6ef10e0c538bfec5fee81bfb23b18e0e8e3586a2d5d48ecc86cfe00a841840b3c8c6ff368ed9fedd1bb843675a3385c776fccf51b3fd58cf278e21282e163686b65f3cc27ecfeb6992de8ae39e5f59c02ccf2b9166a691c46a4d26029074c4b2978d74873eb4cdad556174c92be1a526503c8a8ad09cc057d354765fbff23699ac30dba4e146f16dd0668030d60fa38dc575fe2e56732378e0e692ce3ed6a7e7b","isRememberEnabled":true,"rememberDurationInDays":7,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
