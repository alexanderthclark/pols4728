<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0c004a2e7c2425534fcfb3c0ceafd0d63102b7f416edc428c9e578e8f2a3d987e14f3e38a031e76c0e4ead97a95bfac5460be2eb6bb5a0f593c0813e842155bf2bd77159fb4ad04459db63adb5089094fe9e1ab2d89267bf83205aba7eab7b9c9fdb76a05c5728b4b8f7d0cac17e2cffd95b9c343f3b46709667de0c48636b77a8ee15cf1c8925542ba879469fc084ea0426c71b7eda1bf51844635fbcde82d0dd9a14ce99296c4d9fc7f076b17cd31826ace30f21fbbee232ac30b752b7572d1a417255d303b8a39633c559739e8c3e7bcddd9423450e6951980e7bac9b8878127a24afa735c9acc245f8542506823314e9b5eb49dd163b13342a79b36c4fb33fed5598363b566f3601196120573f9a891b4648ef82bb85bb732aa0fae7e60f13eff899600bf6a91b0284870edb1d687703887ff99ee32b7f5cb73599d088d47095abcebd22e301a782ca4169a95c3e8c0ca89f0f339a8ae6e3184e607ce06fc09437b73e5ea5bee1daeb1936330569f0265bea3df3f5827d3378d9a7270c644e7f4d39fa77e0272eec13a62c3b1e982fe519a996c5b7a855e4e10d9566e425d58a55caf205b4899f9d151d87696193252a7f5971958a51d0e5b65228ffab60b8dbac1250f7bbfbfbf2d3e257a6b2d7efd37b4206e01d5f5a50bd37df5580e67f9f655797c0f00b0d396c30b4015cfcb75fef3390ea43da8d02d310e74df9874f97d5fb0ad5199f0f47bbb2112b4e5043dfa6c6ea93fcacd968c30f202f177bf132bfb31bd5cca26b36294fd6a2c7d56e3d8bd64fb6b55090b9878f3ab75043c4bcd4ec14fdd350fda8da7f08f0aa8e8f6cb0845b8d5e2ed28f9110e9ed426c47bf98b29188e27d3ada1abc8826e8fad3f98c119605b492e42bdc542f1f5ec13c292e5c1dfd3b2fe8889fd071de398b0ec885687ed62601455472ceb2d421d8a8ff09dc69531a1a7cf7f0968828598135816f2a44db8b81431ab733e01147c81fd019f1a320a89e81c38a7a2b20931d2db64e4b7b0736d2a81c59f2ed94832f5b014ebdf39a3992abbaf52e8b8293d1c16b9cd7aeb1a14690ada5d2900d429edf5b4643deb56372203df814cb7d5efaef2403ef15fa25331a6fe1fad96da37a3c4a2d0a336121f3127ffa4ca7e5d6dab252029e7405fcbaf0b1028a338f7560145c75548e1181cb637dae42decd5f34e82e20e9a3faffe7ce1b5ed6f3a96df9ae22b5bedc46a79c27fc2c1916316525ab6c3700591a0dbce160308e341131abeb5774915578186c7cd8db73efe16a703d56354425eac4cf44d91b0703e6f0f9d4c0d7aab1464eb478ca9c7cb4599bcc33e0ec2718cf5f2f20cac02af2bd7c3b6f0c7b85bec22a955b4bc81f9fb3f84e3f886cd1d98c1f0b4bafa5db349fc37a04a0014d099f63d6acdff8e3f1c0bb0d42de331050b215fda5e6a1cf94bfd82e1586c1a996ea762d017a59e0bb50d5f42d404cbda42923da16a60fa36bc5fa8064fe130898ce5c2f5edc83c822b3800f890c406851709be24d23d2dce4f52bd0cdeb78d6b174f30c2812573a13e12ec0a61dbc46b251575d1222a472ac3880e468237f23bbe9d0f7d16a878a6fda6741e95f8acee81e7a7d93f0ada9b7506fd4a6b3437012d704c45bdb7fbef4ee1434f95abf8fcda1e6ae2dc82272af917bf41c5bff4c4f326b798bf498d73910b99ab5ad0f87af2b64c6bd32b48c88bd5c0ee351bfb8bceed0237b4fa0686c4ef840de6f7f4a22274e2f23cec8f334bd22032639bf06478e067356712bcd2349212d9eaf046c1ce9f1c9633f0162e320aafc7434212b69cebe4c48b2882e90a7903d1ece5c423deef7da93fcc41f8c15bf91778f56a56d6133f963f764f8bc27b3a09f55b4cb5a0e3276ad267162024d260c72101533b7df6448aedcd80da5e35f8dfb122815aa6621c0595efd99e0a7033bdcf0607dcc1696711c7adbe937723b8a45fb56f985d1fae636bc923d0ccb30c17da685af1d9f16fefe262e467d3a461bc493fdcdd90d1c6c4c82cc934000a1f1184d68d9b6ee8b7f461576e5e8c972dcbe1018653ababd3595017c207186790b9bf2a0b64eb7b3907753b42468fe619c4e918744017f53f622081e00ba1a43ef9af101aa89121839f646126c793500f8ec07a89c37a853cb62809cc030721565ffcc1a507e10adc4cb0e8c675f7b3b98e4f4b42b88af491ed5e54c2755b380856df801648d6705fb27219e78e8d947e64620724d4ff1b9e603f8f5ee281bbb2475754bcaaf6b7f9a6f0d5aaee247d1fddfb5c70cf95d9ae08bdad7870942b29895e1b4e22f808e85241fe31b6ccb4b3a8a2f29cc10610157f9c4cc353ffa00042b921bf444fa82dd349cc27adc77cdfc3e9cad0abae504967941f99110571de119f061b2da86e82cf779de31edab9b8d38488c943b9e52e75d5f67d2b478ec73deab57d7fb0ebd201e1e330028cd821cdec1b58b7a73229618446c59108d020fa159277cbf8d0668be3925f3bebc2703e0b955bdbd919ff0c8e99030d083a2232faea868e98a59c71e01492361e8a72152ab78a027b3213818aeb620d9bd55cc1d82eed8ca18f0d06dd8b887251ba900ce1a70ba08b528005ae7783273feff7303c128ceafba59b127e68a6235ffd6d99743a26bfde344b3cafa48ae147feb7310ec9cfd18d99fd6eb7141b2e06bf3bc48976b9de0d780eea7982622ff26e8bacd4de7589567fbca939035fed7fc4ffeb75d86e2a04ef0aa17318c93134f04bce2ea4b87f7f82453af7da1aa4e171de5a10248da1ca3e576f6841e868a54b81fd43ef9243eb1c9c15c31c9673a3808497e979a152d89dae34d7f537fc3b24829211c0eac403e1ac043886114acc1ef3a8a022ef99ba1508ae75075e51094fba287c2d96b873ffaf2d82df28e46510cbd2dc6b1aff419d285a9532876c5107b41e86e1ac7cb1390b00e970191b2b42f56affffc329d95d3ba7aced3e9f4f3c57a8d7366bb5a03146e96019874a906ff59655a7725cdd3cc3902243f015d719249e01c16276a64eae68f790fa21fedf7425fd62f4818a97a6fc96cef54d6dd24a3c38c0825f7274980577ba32c6859ca6ebe31502c99bb7ec423a99b569539632e4fceecf9569569aca8162d2c2a1af8924e15fa5d61087c43547904ae9096d91f369db6e1754638908a59116881c1777d8bb5b7d728fd03707dd7bc8f72380c0d461cc2e7c4c28b34fb289f42990f6c69416ea8c07cc7e9a05b6443f7194f2697dab1b598b3ca041fb4c7a86efb48cf540da71635961da281fa2397ada1cdb242c2c291ab84f532031d9692c938c2c70c6b6521b6abf07a153941b3afdd1dd8e4dc2addeda6c3ad92a7b656ec38b90feb6cb3d4a0f5f5c538a40584cdf5f3e087970f447b15636ccd8d6673ae298d35e27acc3b71c88e6306a5eefc2c7f5eba7ce64e7061507046ba41f88afd40d3dd4521efb3ebd347a1a45213b917e83b6215dc110571c482754cf9a00f786af4ed6f13223feef798ab3b83fea3d7d0fbcad01f946634564fbaf608cbdd81800f73fa7123edde8df5f3de5f8671c6eeb0e1c6c3c88326d6857f3be86974168a02dcd88096dce103e5f09c16367bb9432a33b0b02759f6bb5d2cf334f0d5d494ce051013ff8981f005179632f8a6aad27518f73d64eaf8c4778618a8dd8b9b94943fcf87b32942d3d4067f2d84b82cd2f897ff4ba8704e3d9d8f74e48362ebf2a2f1d8cbf3111f552d0b92bc554126200567848685decc28efd387360b0a26c0f051c0a8e470a24c8c8ee2b9ad9225e1a3ff39d997a3f6809f238b766f514a49aa85d280db28c2a7eb6a40590a7dec2cc964ca8fb306ee1f18380f079c5a260ad28eeb94ff7499eb039f7436b360d9f705c860c72ab42e776822efd8334bac7bb37069b46685dc371dcd6d6dedcc56341fad58b54c3d41bba64925e0bcbc58629bfa65ce5450460afdf22329b172234659ca540d5a11124b76612bd8d21d5edda0b44c24d0392789db48ba029e1602cb96c89becec517435e1f23efc7bdc14d3c22a9cf8c17d0d75a632cc7e0b41772069832fac7095409a12125eb22ecf1a47f0906a74a8d7068dd4b9a110e4cffd78a6542e64b79c947408e10de8fc2f0f7c1dcb66c5a386c843854aa7624e9854f8cab21f0e848fcaab98d1116157d91ed62a5a03d6e5608d8ca7c9ecff34106f3d26ab8941f6d4d4a20060da2986bf0ee573d76968cd08276dfbe5742b00ebb15b3f9ac74d47ddc256f277531d8756c240c4c00497d8e416599b0757fb2248a6325d1001d8d00b62a8cc806d0ab82a95215ed3225b493b8f91a64f067f27ee71849627e4a690a2dd85d9d066a372aa04d9178c3a9d34f8985d838fcc02d88ab6079929911dd4bc82544d4e840331d7cf6ac9427ea234bcd6c058c9366055a23dc1d990a454ac7939c027815a6d9cd608b1092f3365d9b3bbcd4741a4e923cb00241102ce374013f1d953adce6099ee99c6663958e3c0799ef6b513f3caeb6ca98c4c24aa065729e3df61757819a67a583f5bd62d21ac24f19a40eb416f2df5136b9733a6c776d3b453244dacb2c269350f21179d14c3e7aa08c76f4a4c3b07f889eda36a6bae06592c4e0fcb4c88dff6908f0d6fb02c9862cc22004b99adce0183c0af15a192ecdb136a0a11e6d64faeb2498ec1d19ed700c798721a6beb9a24400bf8227fc39ffc4fd51b1690753fdea1923b40761efdbb29c1e25be9898b1001e02f01ec924bb39cca6932250ef74e811b4f1df7f32f051e66fa891c75d47b6ff280e33901a404dcb120ccd473003e7a289daa2067cc5a95c947bd25afa4982f8f2d47fe6d13224757e69f630ccbe84c93cb987732f5a8768acec8806d496711f4df0be419226e540fc8d3f58b38e7875789312217568efc9fa6dbfc4945fbe92ad1e6475f5ae8b3e2b714a7c9f5b7ace393837999c545a168558db2af2cd84699bb2e8893d1d1d874146b1f05e7b9cb8b804289bc68a25a23dab48f4d82c13cae46d11cd623f5ef92dc23333d5750082eacdb1e91b10273844527aae4aa726531b80cb2198a97fa031e7507baba83f7a773c9f8931b57f06e848f23b476f7475ddcc34b30c7d28e09c49ce6c8b44b24a4b67b271f4d69456cb1ac0c89f35133069b9efecc77b083c2ecb871c33b6a59be7fe727f7726c7867a6cbc85e90363900edc77fca8c386d567a103d17507335428d9f826ad8b1f5b6d74649988daa66a4cf843df692ec6e36e3d62d7e2c4b3bd5d353cf282c546bbcae337ec79db63a643f5d5e8ea4fbd4eed642bfcdb7b09fd73920b95c3204290299e61644d599656cd9506c2a6bb7d544d9d81f3967fc0beda46ef44c7022b54aae27bd84a35aa11966bd3a0391c90dcea30abbac3a39768d903cb84b8f576538c4cb56d69c2f1550570a375172d0963f5389bcb836f88867fdc0de933b82d6c2d6afe31b1ba8033198751e1b232926723c59daaac2a86798db7de0747db2c1ff324db427a2151f8d28615d9e7b7ca6b85fa4b9a7f10f54535d76eb3e6bc65bbc3c6ae531648b102ebeb9bd2acf4c95164369cd5d02de85d82d307f0348c946f9ec159487abaa11c58d49c36ac11f8f491e5d4c94cdd5389752aab958956535f131461b19e77c97c7650859bdb5decfe2292244730428788fefbe954fca92359576c628990e182311909f3f784d60689112f7072309f42be3ad7083fe78462371913499d53002fd9b5afdf03550cf86ecb2c35f663f2bc86aa97254ab9cfedbd5ad71b6655ad22decb4bc86ddada84a396d861da562f262874ee1a8f975945204a525ddd0ace79aed6573a02f7f4b92d1e7570fcab0540b1adf17ed86afcf84269188b38107f1becb22381621b52a5da6f98a107d3ffffbfed590f4a7120e38a432c05c4babe8f37e2e1c7206ce6aec0ab2ab99ecfa6debf046e4c1accedd84c4d827072b07ef777b1e2950c87b7bdb77194f92fb11e6aa2a4d47405e419bcd08a209e916abaac1f69d35b15d9866bfac905aa8eab0a69ae73c76938656b940eee39facf1583733a940051511caf78c2ecd40545d9a0acc5d84363c46d560f47d93d2fc1183eb3051ec2580c12b80d0b06112337f8a42ffe223ddc0f631249e2fa8f92a53747461d6179d95a86d4b52b66cf1107d8516f8e06a6c6959783937222e5dc3be9a3a945f6c5646e05f634b5d9ba6f750fe77ffacc49e3e3f617bb81455dd624c409509dde5c636800221e6ab43f7882f1762870207dfff62b7dfcf86470fcc549329efda33ca59d9d3e79bd5548bcd40de319a9932ea0b86c97fa6a7929b39c6088d520e5cb5ad7889019a8192b11139b492e3bcf200d73b40e6c4464a7bb70b129573054bf623ebf1d89dfe809c2395c1fca476b133c59b247c635e33fa7daf20382f04bd889fed139f5adfbb5023de8ca9bf27540cf9a7f70088dc8daf498e53b4ba7d5d220bbd464c835f49ab50ddee0dfe217e26cf4e5ef990c86a2f4e52602747d3f6366cee59eff1ce0cb2216db14b635e4fd341a87ef3ad5049626f55fb62481ac15feaab55f7685b6f0f14ad409e07fb6af98afc1d498d43efe2e015827eb32f614f2a008a001fee675f7e8a40bbebca885a0f38d1488a9ce12ca7323ca72d5f677f17a19fa07fbbfd5c6c0a762f43bb392a2fb9e2ce7a04d57a1f17bc8ad011d8852b5bbf7759719633af5a5a74daa8fd1d00ec0e1c522e30214385b45facc507c5461f574b17ea74b4435770429ce1107b50bcd9d8ffc5952355387f49ffa93d6be7accf334a837d3e88975ec9d764c5d549af9749fd2af8ef89f8725bdcff27eb5fc8638430b1674b67ddab7985d4e5f6c3981cd72baddc5dd4025c70790108ecb8165b60d561726ae813c3f213fc6086d6a7999950c7d11e9641947066e70af12b1594f2491bcfe4f99b4e7a38c96a09c5164384d05576dc6e267f75ff8cf99fb151d90de958ac754d26ae6de6b023cdb5430e3011a33f45b626670370c8813895d20d8e934be5213fb9c7ea1d74e5daff02e831092e5dbda76c456366e204909410bc993008f9bd49e64e787decd6e66e0521fc9130f6659e867335efb4f68e82d821d936b682e83f991f3c7ab32d0460023a4477eda5096b37fb5cd532d3b88893adb85ee334db9b0716eee1aa1974e2b8670a8c01de21f7d489708787690486113c80d1f547da55f0ba152e3be1de53e7009e2b4c1f21265f2560df50f9984e775cbc941b39e0fb46cd41c0cc81539d70a5cf60f58de5304fff68d34afd183266a939fecc49d59801a9e83083262ea9bd15e17cc328fae4a7d286b3a941782b1809e27c1843b7ce16c38d40b1deafbcad6aa989e5bdb67e9a731bb6a2a6e69952fe5e40118a8479f62d6d575572ce7e6b0e440bdda9d69f664d5f6d1adeec4fc7d62709b0328b1af9301a8a38e047870cd133be9be1375613c5ef565f0910f20541cf3996a74577f6ac49a716bb210e5e4a1ec4e83ce1e7dc0c4724dedf8b581d7d3ee18b382eeafabde97be3a6ce2b707e395a349f88e9e01490b85e7563c61eb44a53c05acbbdc3020dbce56ed9853c0321ffb8107a48e8c62c6e389b4c11723bbbcc9dd966bceafae5750f9dcc1f434648b6eaaeebf24437158cf5dae46a9d3c8385bf45dbadb3b4411c53a82e9139c8a42996a349b9227ecfbfeab5189375795c31ed5ba600a8c2138024fe3f29bcfbb871a163502270218effffd4e391c174f1f6346df62fcecbbb03725a7573ef9baf45c590bb63a23588d20104ca79610833e039fb2adce15f72a17ce48df94ef48e501aedaa12506fcc8269fbc430cf4573ed19c650db1df616a9b4c797f3ba5257744278383f75a4a38bd9a2011f2e4bd25d09385eb8a48eea5e6d53c2659d650a4701cf199683e37a8cc60ffa9d212a29473e08306384286b620ca4601e699ae2c9016be617791788c0e0b3a8326bab76a41293cb91211c00c2a04aa0e78e5380d6232b5ec4c22608e152d404a9a2821034dfa1c721bb27bed09dfa63d53c6edb5d783adfd110100a36468ca4dbc7f346736ce9de2173bae5846fe0f65fdbdfde388683e63abde1cc65a6d9159eb75745a1921c4b0633c162fc1e0f2e86e270675ae88fe8406209844aa5359343a7e13045ba3c4c5b7b4e4bfb95623fe5daa9fa68b85410f0164ccaa1e47b71bf8ed495e6ae83ea83cb3248a4ece27e899987cfc5a6770ef2a187e829e2eafb425beeb690d79bed1b3de003ef703ca2790ebd645df68d14746bf9e7c87efb32d43914448891284c0fc90feb6a83e21a4b5e329d488ef3291191d5e3f653652d0ddd64afe75f506b1b1732d888d22b7046fa41e46fc9088f275628d559370cd83a26d33a385ea80fb033791d6797fbb78e054c686789680209af82eacfc62884e87ac43d86e4a354f36bb5d80a803c807413a36e0b702ee58039f595167d072613c377ff14574ef347c6a67974cba3a5272b1fb507d9937dc3999ffbdc9f013c49832f3e099df000a5c9cb7c6cfd081be0cb02bf714c76fe39a523078d1a4ef9d57adb7ea8f79c73a1d30e6c33ea0c6c309e55c461a4780a624a04ddd514f83f4041f25cb627caa51b1086ac04c4193bbf1967852c13adb95924e7fdf2ee09315979aa64979816d52c1b7d5f658c16fb19024a7099631a1f7bcc1dcd9a04b041caeb7e459bd39d8682d9ae2a6b6ad9fe8a6c758a54818c79bf3f204791670ea7ceebe348f22f779a60cb00c507f975d479d99b0431812fdf89b7a1823f25c3fab613e866b87bf4855904d31e0056181eb02c4dd84273332372d355e78ae7aa05c3500d69f60ccf5a67165d7e36aad718165c6263fc9b686089496213b2e9f2c937f06940ffa0e310d380b6332fcbb484af173643a4a3a3429eee75d07f99b1d02374eed2fe3154ad3188fe87a4e7d04163007833c2006d6c16aa8da12c897c08d61b51f5fd0de77a921ea8b68f6b384bcf05aa5866c10e2263a0d316336cb60109628678aeb7430dc5ea44dbd5ad8f862f4c04f5323a4af6968aea6a2d54048f4222869dc71c19badd28e2c4476f1a61685edd30b3d4df2a4ead7d3a0e296c3995205d24fbae3cc9d4747f1033be04cd4d3e4874695ff77b7ecb13fd1c251ebfe06e310c3ffc59a04dbf6c6141fc9d9298bba89c811b63df3efd8b1651d59ff50abb0517988a9c1a5a8ff84fc9b52457ee9afff8ce986cee886fdf0333c10554077559ddb884b9cf6405028a47c35230ecac94f8e022979014897affa745f75524bba99f0139dff5d5e3b24b94cf3e8a0818ec7de9989f15012e68d9177bd005a5bbcaa677e68cccd40736c2f1b9019b9e9b0af81dd7e7b12cdd45bbff08e87a97ba8d7d34a752c07e1c673d800cc9fc6aead61325b695bacaa0b980318c713d690b668f10792783ca1a7c69f6da2e1b4956b2b6dcc80d39bb5b4d11d30e83b58abd727a2c50c6be6c437966b1c2d28fb1fcdb2708e2989aebe662a4558f6a2245487ab26ab66f18487634e8ee5181141e08ce8097ca6ec0cc7641b56a953097b194ffeefcfdf0e220e73f95d0fefd0489689254c3638d8046ea7bdf744c871ee8ea45771863bf2fcb444839ea6428544fb2074840036f824aaea5eac022a625c20740166e4840c234747ebb03a76ce7aa52c68ccee3a2f360fd3d81ee7c4b4c551371a39d6655ef08c9f703eff1c7f6e57523c1056ec9afe21cdf228dac3785cc8125a82ba7b0e222e609c47e7bcc8bd3ca6b59620200605a04b565393a12321634bbbf89802e15c82689803ca48e264c06c743be7e9d9c37ad9e95a65ef96885ef73ba2173350506c6a2bf96eee123402855a20365f8725e78388b037974a0b6af43a54e128e6c336e570738ad2a87c56ad181d63b9dc5a9f4fdb1995bc223e5c0ec8a01e59c96aeb6301d4d2b92da0a2067bd426929fc154ed3b9c146078183d30baab406f2b475f3aa23051739f1043000ae3ef8e2a4de698cf1341bb4e79ebe417c27ed207e84f3aa853f8b84b2fd8f8bd150f2e1e64018eae76d208be55c018f4364fd9f501b98832594472b40f4c37e9d7d6b9d4003196fa2402abd56d02a4f28c28cf672e3cb07e6d8d5ed3da5d6b4a496fce443ecc50d28c431c86d957bdee596e33ff81688ca325d0e1123a657436dbc9403c06f2810b196305389d760cb81d6cd91af7353032fc1c0489bb45c9e81464508904612fc7789855354d19840da9fac32fdef2a21daf41b3fce000e90f60e290f7636a2bf51ac9cdbbac3ff439ccc59d017960bb4679a0bfd9b7308590ebf389812455233fd5c184e548217887d0d7e9e709340333fb283b2281cdf284720018fdd9828180d5dfc99ab450e623f9178f174e4fe719ce5697155b5ca1c97e8b923a3bcde1d1f18fcd19af684206699d8a8dbbc4f44e0df6cbfb92334aff11fd9014911768a1f644b514e2f9cc99ddf05605b29799913b5319bb89049fa99fa56c770c9b138866dfc00560fab0e09b883501e6d1f3b40ba8a8fe1b35874ed71e8554b802c364e371faec8d4d56e48c221cf3288aeae9a878db59d969abdb2784d9dea9d0a0834b2dc288e42cd6bddbf185f43b17d9df62512fae0ea1e87948f6851df46c970b66cbc4eee2c9811942c5ba5b8cf28d809ec7728143acd511ebe4087f11f4bb323ba551fddd283255edf3b4c955ff1f99de1659d9d5254ec2ae38d774a5ca82957713d833c5900c6511cd4059f1556ab9150df45b93158d4caf13d59756a58647c84926a63aa728599247b9a1be4a18255117bd9c718b6eae8de34f7dd7cb9b6116e5b4efb7b5adc0b537e78201f8c7d5ec9bac45587410993bc3265597d5ca1d6f9dab7f5a73ac88c3c694bb54f848e6dac7f8f35f531d02636e147f45a12198b1947aaf087f81d8dc2050907806b4cd297c487369823c2b687f805bdcc423a7158a580ea038d1593382a6a6515d64fcfa1b57545164d5f3b20379912e2c6ab8a49de68bb8d2879a359bcd41c320d6f6674f1348f57158a5ef3e2eaaacfea0b0f738283daab3ae4cedb477d5159886bb3821e5abff531d413154d29eb3a695f43d19a86aa48c81e278c76e75ee309bc5ee02d88cf31648a304f99434469419b98b3e9938ca8d800ef75b84a16427112145da0757af134830a34ff13b18c8f952ff2e8108b5c4974f14c6a4b5d6113a4b275fd69cc97477c46932f8c34b02ab6c95bae2880109e196af221de2b1c340e357b797a15da01b48c49ad3abe7fe7a7bce19f63ee55d18772ae16e7a708918fe0a93d6f9d06db3bc7c4ec9800a430c6a05e5690f37c4bf439ee94c75a69cbb3c3208169307e4d277b29abbf5ff0306c10e4f4b65ab2aae45c6aa7a7ec1da2f6231bf745ba164eb2286e88d28b022d7e109c06fa5b50a4c3fa980367bef4c01431ba7110657246d757285f78bdcb7cf63f55c0bc317592a0c389245e4632c4d32b4b4614b74fabc82921a2c0351640a288dbc5af6d8ba6af0dff923e6332c989cc67dc862dfd5b88f645bcc03ede4f8b75b66908b9a61d137970253d651e043ebbc94109a8363a7262c1f24ee03e3efde9aab49c1020d74edf4f0a479b12d2208d770fa6612b23dabfdcce38b7dc67e0e83446d182524afde8d6350a73ed56ccb982acd05184be9b3aaf1b8b815d7b182705ebd89f1f99f3071137441ef86929df5531e79475920dc3dffcabcdcc55f01d093823865175f0e780806691d0c081b6ed1f650fbea51b2397555cd588ea611460057a97e8a06d2c62d1b9db8ae5c91bc0ba8726563f4d7ea810f801bb1837812bcc1fb9e0b705848e01c91922a9c33d65afb719d7bf10275ffeb29b421ef9842dc61661283f7c75189b991234dc7f2bfe3d81beb32b0fc200d182f69d4f882e096bd55b55659bd19107e62c12af90df34d2f76f924ec7de12537ccbde5ab036a08f0f57b1096e0d91d0421aa78d099fc0f15d1bbe24fbcc31189476abc07890781f570a53885e845fb4ecb3016328d6fdcf2186bcb9a3ec9dd9ebeab5af5907216b93c4f3c3e6c6cfdee3250a61b0ccdbf06fca44c23dadbb8c31c01ee39eb4eaa9ef8add0089c5a58833fb2818dd3873ea9a98032774fdd3524ded53adc68db9629f2782eb64eb848587972c531e654c9f888156edc21b0c52a13143a33c81cbbbbc3e6aa587fb23b4f4904e659a6f4932ab31cf06beade6bee01a37e910a4e43009bd0c8bab1e4082948c1857b9672ea727505baec0e7aa542e6aafd33608d272234dbca086945b3078112d61ac87bc2b971723f8a94f414b459ee654a375e1dc8335e23688e93ef714865c0466752878830edaff3856e3363193c3638e58a0ee7175858339279de330d026ddb03aed375ca4511c5873458a77268ad6ba5f407b3a90c9c0f40485988f8cbdc13db33d2c852a450b4a596a92cf629540a8c96609b53599b31e4ce30bdf86301d46687e1f61dc0b07c2c546ced23d005566da148ef7b71bee3bc08f94fa5d555dc6ae2b881d10b283bd1add6c05053428e968ff498c42dcd23f0ed309f2b6eb605d48c41cf750a9001bc0fdd7ef1a7c53eecfebef6ea92f0c40bc5bc91da545f964c808c0b7ced646592f68ad62b9ae733469859ef86aa058543276b71fdb350a8e74c3eb43993cf87ce461bd3b93521ae17b27cfbddcb3b387b892450218e6909e94de43bd37e8f14a2846da3ce4dc09b1dc22c69f60dd35e01a0f0cb92a3c4b029c26df0f40b791d3df89be5be2ba583690827dadc3cc27caeeae8d843ae6a0763d1e219c7978b78654d6043e9a63335fab2a6c237deedc259cd4c4c85114da10037a3eaa7e63a5c4fb5c30dc8365ebadcc61d567d767dcbba79013c433f42d23c815dc2d0855e487273215a0e161e80693da57d064c9d68e5ece9cca02ef6f97dcedd315eb41284ee58378df350db89d9af3f258326cbe61d9b18039748523b125aa0bfe09a01fb686c6dec3bafd2adb1f6d8522ed44da527f4722191022643d65ad52eac8510d8944db20fa9925e006a2500b667308bc33900e057489765dddbf4922ee7b480d90bba57b1f2a5d5ab5d511973d95c7e08dd5f6fea459d587334cf5676885b9fed0bd5982f862c7be1bf5e616de3f42dbe68a65623bc96ac6987a8f4dae45418f7c7670904dc0c53379f32720d3e58ab1f2f3719e72db9a9c5d9093711063c8cf31d61f07ab096b82223ca51d3f15a885cdfbd3fcde42b6689e201573d917b64ceaf552cec3db3adcdc1ac3db47ea7e9e5da763f94e4d8b91b1bc6da6981749eecd43ea7fdc79d37caa7ce6edf8b65e438b59a33b592dd18b9ba88a63854397db1b7896b066af41f9011979d48f9ccbc176fd61b9bbecd74bea55c09899814a438b7ef25f0021552721fe34cd7b557dcdcf5186aa93bf4bceabef7063eb68b61ba5a0f17b9e051b17177182892dd58a718169f06513717132139e4be849482f61688c405c1e6ed1c9a0c3a4eb8de73f21b918d0791b9f6f0f55b8e611f39f9ab66c3c55d578c42ed4161eae491f59e54cfd83572d8e1680d5c68402d80388465ca47f04031b0c6160abb3b2e918f8d490039bedd0e9f825cff5f0106db1160400e3a17e4cc47a70ca13ff1824bde3b11df77dde945a1dc2198ff6624e73ca5b60613625f96da03a3e7fd9fdeabe13b04d9d93353d5c8a1facd3d2aca66b85031ea8cd31518f6465f4abea54842d93c119d8ded4d243fb8e0264c77fc2d7fe8aff3e24781de11eb810fb880afd1b9e0fb7dddc28dfd6586c24c06efdb35227838e1f258caf07b9f947ecd1811f5809ec503a92e36a315664da03cd7c395c5bac4cbef5444bc976c36622ecc43ee5351ad09214a8a10b86688cccd3f7cbc7e904e6470dd33a19ca5aa2485a5df68896b0f82ac6fd6cec5f3ff3fc2c7c3a6b25fa51c6ce1007ebb4a85ae1a28b52bfef6056a94f32694dcf544ca6b3b014d0add4fa906008ca9eb31f8ccf3eadf39c7605b355754727f649080399cb19ab439752789c7d45f4e0289eaa8fe01c85ef93857bd8e949f981ea375796f40249b91d303ebdbcb9be21971c48e24d0a4e8aa4d827f733be03b465a3dbc35e25eaae1beb7a81456ad0145f84285c2501f9ab85c4544aa4ed2735a4cc94bdd2f0d126212e6ec58c956f409576e02d54ad9565970a9730df0ed8581427584d5e286515960c410cd9206adedc15b7f76c67a56bcf7a6ce464863a3e1e69fb465c57c3866e483720604504e93cd9b34930265dc9344767530bcf2d9ff5d557e40ef720ddfdfacfc7ed3df2db994761f241c869539e100779085bff9620ebccda92781983c36f791ed5193723aeb62e0600a79655d2fe33c411a76a8eeeeb03b9bc4e39dc3c2e64e72ed35e0a37543e19fd4083412497e49eed769a6112e47a788233b46a22b4e0fa1819ae4d488dd652f590dc8ad4fd361b0148da5670a5339581c9b911c1201e3ce34681f2c55ba479f72557908d66b20e3513baccbe1fbfee4e2270f6b0c0c4742003074a41452d7e040a5376fefc5ba4e045e7adbfbe60ce99e355b64d2113f6effb6942be164b37752937ea3b8e64b890545da9330b9df1074917dcee6cca24a717a3813da233d9356b8580cc0e2e905ad943f5ed6a4d0f130388537acd4fed2844ddf0e1eeda94c1e6ccf0051449b153ce788e715cdc086dc1dab2d82f7c331fa6752a63955d3623aae6af776486b4565f3d79cce51fa8395ca2447b1301e5aeecb7100e4d40cf21423eaf6c74d732f75fa4458e7c38981f6e7d2888b7cde9dd205dd50a67ca334612ac655ad27acf6cb84cb458e508b9efae66aff07a30f34aafe796bbbaf671093269db5e9cde0de4f322561606ea7d6e917006243189102d871c1419e88e35edcf30f042319b52294133e46550db5cdef1a693f0ba7666953c5b2e96a9a0c82d4b1ff7860cf6f26a7dd17a7d20b0e3735f73132233752b95ac5c613ffe6ba60e01c7e287ac716a866c5142717c2e381aee5eaa54919a70b182a72ae34950950eba2baed3ff87a9050b75090c6e7dbbeec4620df5f3e7f4aebd11dcb285ddca9bcd8b39cde7a1d8ceb0da7d18eb2dc0a281c498eb23e5329879b81b57b35f89db38cf1ecac4710ebb4b14d38313cfa9d32f36d05339b3510aab6d5113e6026a85cb1e99aae26d21d439c3cbdc56e07f37827524df8b9c80afae1aa81111ddad29b73b368871e050115a45c6a4fa20ed42705614564bf3ce375746c787c51f39899e24fa7b002e0d03ce713488f6ca27c12a2af9ba9ed94d691785f511256d7ec13075b3cbe1a3e69b24ecb2f9880863dfa10b92bb2ac4ca3194d0249700842e11c185115f169908d459ba793860642e19b1466e00b24ea10f91062f94b190caf3124c63497051adefedf5289d150d25340b6b4346db81e7791907f81b8583b4cf4b5df998e6b21cf8c5dde2f38457f4843c9169b209869cecb9423c186f26ec387e660e61b1e3a36a380432448582a66ee4a1264d9cdad1228ae3f3a68849f1d5f6d1bff84489303ae239d39f6f44a438bfe9433f06e198dba78cdfe525974e1759fb4b606f29dc5d6c56b38fe2ace80b3c6f7eb79d657ab17b4f4f74cb69ccabe0c2da92e7625f980ecc28d9476e73c066d9510d4cd4505b8509d28c5f49b0c74932d4e91fe8c030a55a016384dcca251338faf2aa4bc8d615d4ce70acc9f34e99c6540870ec72e2ec50f858a66ece11ad15a8fe86c2168ed75411416a269404103602e7028f80fd4faf50044b981456949ee18fdb4a0264cab356f2ba812a823f5a291cb187bc662dce5873b5534515bf213f158f3651e1953b7f2db4ad2585faa3d8a71f54a4ec6e56cb43f1216ee47b519baa6ced7d1cdde6119cf047eb1d2182b85a1d710c1e905e758026684a5efc67d1b7c9a5532762b71a0fdf4a548b6e458a8b17455b4a9d2c8c4dc2957eb99f25d3057f53f16ef5db2516d451bfa4c0421261be20730ff9f8b04b4584561e5c2256ef5241fd225403933fea7ca2f39e29397331195617e0c2bbb0cb539e57ba1a6c66e7d8db3cb054819cfb0eb4fe9e136cf77b4b89d9a3453aba92dc80a74574bda8b9c8e86ebd6e41a5430ca8c0982dbd80a7813bcbbe47f10393a0744332c59024da990e5411a7e6088d7637894805e3488aab4ffdb75e48771fcca2c5b37185eb284f55bfc5712f108f90f4df23790803160a2cfc37dd2b3c16db4893c2b768e481e65c63d6a7085e2eb8c2d824a86bed6a71ccfc809aeeea6d38487dd72ed1fe1ba9ad0ccdc8c373f74dfa75067104162b077597fb62beb4bda55a400e1e2a7f48939aae94c7ecc975d07149144304f0725586f418844416decd3d72406339566d48a07c3ee7cd475a143cc38730320f6abb41895fd62080cbcb14c74219cdf542d160c645e3878de15feac8b07357e9c3ff8890b3612ed03b06d32905ff471e46afe260aed15d25cdd9db2694e1bd82e41f4db4c5706901584c52a86a4591092de5f41705acaf3f9f68d8eebd5449d31ee5513b88c1dca1e350d4996f7494f5ecff816bc0ac30c9861643eef8d90bd9456258f740f128aa586239e06b3e24551e04558bd484d435f5c24a8c3f1ca8204901f5cc2ac38ece76cc1818665cb19da27f2a85c66b8022c720d694e5085b03a77df1292fe8be41e05cce2a282231faffa17f11ea34602769c9799369d16441a6b744471bebee16e0c42c1f747cef08fabc901d516d04489f242209d7068926a5bf4438f2061df7f0a136a61180dcfe634d73c942f7f25c3327f1aa415caa49b9adf1405065763119f1ac30f821146ea2465f594948a32c83c3d90bb8a0798c5f07e855fc25fec68d4bb209a02947870ea5cbc6f74b425aa9145ef79407099e139efea029bfe58b370d4d5a97771f6612fdcba68b4420cfcebfb8619abdd56bcb1dd85a6941c4f71cf3a3e5233c00f4eac6508964bf853141e91e0626128831a2384296e7f427f6c27c5ef0eda5914395a41dc55c16253421c19f535eeb0382af7741fd650b405e91586f8104265c60c3bbb22788086a35bbb6ec01c7808a703f550827b74535ce6c391e200d39ba87d397ec0081337ae8e114d37793c22ce4716cdbfe6c4ce65a14ca1ac4c90b36393927787284fee51d82d400e40551eeb87c0ab57afe1ca5621ca18ec92cb782b33a7c366e95e77c50f8b97bdd27174c56357c16d4fc64572a1b903b3801201a52022d3b592cce91694ed8e15277103e7e80f59d8c2f8fe9343cceddd4dd26952df10256a6781151fa004a0d432a72fcc0e7f8d5398a9f418317534d034647430aea3ac8fc510682b588937377fa9180702d8517f4c04b9ac397d1ad532fd47cd3dff95258b73ed820a43f7452b5d86ed516b471368a884c73641c4ac6692e6b4e02c8d96a6aa0aca16733f45824bf597981d4e2ad9ff0eac8495b74fbbd9570668f2dff04f4820f663b1bb49ccadd0592893595c012f987cb06a373254503d5acbe204da23162a35666700195b8e93237040b0456e96ff832d203ef6cf92ef3cd32f18c43bb9fc09f365fb291e2d4dec553e7327d1f6b7739cc8e432d77e123f3c9c79bd21b11120faa841127dd4e71f75e45867c3c464dad282ef36a23897bd57ae44590809ea2a4db28f35a94136c5754ba10d9b0626286876f1876484553b7f3946f3e133b5d815fc0d9eb32ad366e0cf2c17cf25ecb5d179b283ebc1324112f95128d3bafbf7c283ad67a00d21442c7a534b63765d1c0894b15bf91285fea0d67287dde49f106abc050db02852e2151547007aabbd705f75ae173144504431ed04c1fc36098a2fc8629ef29e32d385da873055ee644b7adf494907f65cf877484248df2a5c9bcf69563b402a1266b4647187a17404ba19aa068bb59754e6258ee6844e35d019686a5c8ce55593c60d2aa15023bd1e59160fb6944d717b4460bb190d326c9d7024b712ba4fe4422e17ec0d96aa654a557cc2d59f32a42d4d04b106482eba497e28ab5fe7fe1bafb035cea40485b8a9a652bb0af64ab26e1e17385d6081f3c1ba1bfc4a9aa2aacf0add068f9e49ad97cdd774565c6562e71dd5f588aebd4c543bb066e83e51b5adf3b628a5da5bf6251c3ac2685ea2631283be29131a92ce6c3ddb80519c0ee5aba6c64de0a089932b548fb41bc4456e518f41d3b9c687cd579d87e9127e28a217a5f213424ffd675fe888b0fbc7b1ca7dd0b2be5681507b580173ea208b113b6d849729f5fb50277c7fe822ec46d25aae2ca6bc29c12d5d098fb17cf67575d68af47263913bf5f775661d1d22255f9961f77b779b0c5d8e2c526dc5c99e237a65288261b920611a9a2b57b4eeb983ca424384659e317601b34d544194144244d5c8b6611fe740faf4f1bcfaf0be74f09ed9fc968b22b7473c278dc00d1a9f2e2cc3a9073273c391b550c2622a94423cb9bce236fa41b2a34b639423e2c6eaf57873c5c5dbd557ef3cb248d83383c0d830150ecd70cd1aefc26f81402a3edab211ff0c502723b65a05af1afcc0665362aa5b2d55d3e5aa5bd6fe98dd0d297714f14cde1d6201bdeebf80acd8a79c19c474eb665e4fef7d57495ce1f1e211aa48fb2fabac336d96029cbd0b7af4e16cee4a8a40045a9dd7755ae1c797b7400e012a42d973fa3dbfe8f1af8db97bb4f9e6e9d76b538020549527ab006fa1029f497b61e38318772fb91ace1ac8669e18c6be1737c6f235b42e7cdd93d43c730743d815199e34c11103152295f99cbd710dc7c2efdeaa71ef9c9c4b398438722c6a1534c092d5a261949d7b69160942326c237058b85d498b4b145bda474a290543112726b752a6f67accc0aa2f2c38f16dc2dcb89dd906e32fba20bb0ab7430b3cbb0961bbd87758f14533281b33a47a71a4f98638951ae17efb931cfbfc9d81ae5be1712d90c6582a25e42a8460ef50e6b1a6dcd4a8aaf907b42019a2bc190bc74fcee2c2c7b99ca9fb3ac2e4c6a9207bc72db6ba71a75c12e5c66bbb5bd2b23f837cecd6e9e7b5f7bbfcc4897725fb10873deac385f3525c425cfe979649f66233ec61edf55dd06f7667ee046a28ba882aa8635a83bc756386e1e455456dda4e510383cca23819c17f7a5e5ab6996c8ab0d4a3c9c748772e0b08b6320a43de3e7f12568a74ab37bb17aa3bbb828f653fe59a699cb0c587c21448e1c6fb8f1ff6a5e34db54b59730deb8bef6b33e259ef1ab49efd4f6c47bd6686b1e692ada032446d1daf582380b5dc5d5343bcc8a35f1c5fc479093d22f94dc1cfaf0a722ac89275726e8a637fc2c522892c49294103ec426a1cea95f4dba873ddfc2128030abea324c5fcae082d5c6a8f32216ee518b8a9fc9f39a4845f36649f7ba5cfbd875781aa61f58c4cb2081aa95bcf775f19c6692a38f773da1fa371b496adf78cab35a6467654fa7e7208a371974c7c25bb3810fafdc3b77a10af514221199b82fb7a38b4a2d704ed0a001439fc07ae1dc20fa681a061acd1c20a57b11a213b9c37869bc07dd906f54deea43903f607f0ab6f1fa2fdb3f10d67c652b132c652c36ef3994bb62641be1829b8632ed8e8f7a1d28670354cd1b251a4d8e89b450b708cdc7040c44a1809216418ec0222b67c6a17af1915fff36f0789516386343c9d3658be8e57f74daee5b79e7c9d7160ce0968bb79998ae017175ff848aebeca03d9b391646ef1b8a0967d23599ad07b9a7f7f1fd600367e36978b4e98f11093d0000a0cb7279f0ecb982a2adbabf258dbc4794c0f198a71945f08503bc8f30204daaf31bd6cc64a4f7877c438756b000a89fb85ec131be258f94a5909f2b4e0acd24a547da597d2979370d133205ae5da245e1e2d094d074bef826a3837670eceab07170adafb5a7341a5e3dab80b63a964aa8d402ddbdca41b1a89cb963028d74b18b5b6512a3e4f93921a26103fc4c5270207b4681b23c796b841a3240e664b73c9ea026b17b82f0fce79618db46caa4f55aef6da8d304ad7778d8662f3212c99c28596aa86e906d1c90ef7dbf2101dacf2abab32659a706031a9b4b7b5749cf3029b4cabf6138f6cc50b13b32cbad6db5108f863608104d75f54a60dd99eccd0316223de08cae029c639511116490f3ba42b2415c9e39fc44685fbd5c2c4e194af9f5b9edaee148cdefd4ae10abb0d8915aef3e3e5930628e22ad4b1979d233e3b955b1ae828c068fbe14c7ef3bc81c812f2aaabc5abf58f3c82987c713e2261b9ce6d75b1bcda778376def2c65497a4b951c785f91dd6502ff23f796c8d33c6fcfc985f15745bde58d0aa54bdc6fa42f19d48eddeb6faa99bf0a26aa123e860e96491c408700238558c8ef348bb5f150f347869e35740bf962f05a5ed1c57fb10fa0338db93fea72bd847d34163e8fd9f7966b965a4498527bea30c42afa02593b81233aac82665c4f58c0b5fdfd45f64c0696841b49a940b79a89ca7328fe6e25a261110bfccdfb85053d0bfb91cb182d1a6053a0442a5bf3e7a9f5959dca0ec4a51ffab8d9e4c6f07447041e93b3947a1110538e5c4357ca44b61c4a5f0f2fb418961efd1ee87228a2a4d1309787573741c2b9850e959065d282491a480c900b3c8fef7153c54dfdf939b5cc574e3625cd37f16e63ef55e8b19932a6ec234b6736474208e544e2655c85454f031aa4fd68b9a96e053642ba3d9c6207a3c16ada6f3c8099358ad8d4d4afe4ac9ae65e3e21","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
