<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"5630191f127aec5dc76bbb6238a6113ec326b89b4b2ab3c4bc5fa01b1ba53c19d2b1202d06ebdaf7cf8e1c5abff79d61567eab399c4e6f7989d0d9120088b51e1146004c65fc08842985d0f4defc1fdebbdfbf42b9554d10aeedddeda84dc292addbe6b4e227795c19bec97511583023a17e123ef551f0833a34953edf22d72dfafcb0c881cfd13213c1b6a0fe7c19dac9f7bddb2eacb73307c2fdbd76b2df35dd5540abd80301536c7f87b75ef28cbc89b3f89ba3578c01ded5d928a58d8ff6cb34ea2ae2feeb5129623d12b881bd8288e0a407ed75cb075c0961624dc435929f0f479eef4a7d30056b7bc3e6ae8d97a549ad968afc9d5ac9c35023dec733e489f70f70c111494e1b85838da31b0e2d203308521947bb6e35dd3043c72ba663a3ec83780b9637da70220a758ddbdce270f27f76b34be7682d777a7b239c8737503a970d38f382c3db06eead0e6101735dad1cbb859a0966f144e14dd8dad0aa8ca493751bf384ad96298631531cda3a889d533e34d3c4e498bad69809a67561ec54b48e7edc6b680bd46f6c031d4ccfed8313b1ae11a77e59cb35a9a146322c9a76fadd626992b5f1a76798b4edbee6067ee479999b0c974555a99dd777d0fbe8f71d0de33fa7e13e9cf4e36c7a53065e49ad59b02ab7b09179079dada191d4025fd94690dfdc6fd9be9b87a38c3bc264aab70fb845697e2a583e8b7c7c9c9cbf05d3e8c521b463699bb9abc6e5fd90e8efa3bee1f37a224db63e9aeb91f34b6ebb417e7d5cc8c709eb342638fb0ead82ae14df8dfca653ee577bce3b48cea74a04efe39d12cd2928b376e77f96bd171b26d1f9c7e3c5956bc55066764ea87c04f7b64bbad76f47698d6d870df20db59f788c1ae14adb88f2ed0656cd49614b4905858228fba9504888e5c8616e19d39fd131ac6d37931ee5cf01b81009ec2138a3589dbd025f1863b7f4ccd5789c129a1df64b7aefdc80bef1c6cf34efcdd75e814002ade21498fc721123366365dba36bbbe634052c6d27a90c9f1b1d332ee0c3f70c75d615d85df8bb984fed2071861778e77aba7bc88318571174510703044b7970a16e75372933cf8b7506b66b7b4731dec59dd8a3b37b67c64773c22b773f6fa29b0a017d5bee79635c2b8c64e64fb6f652324301acfc11424ea9aa858551e788fc68d5cdb259951d8bbf69a138f57564dee51979dfa1319a0978e568e3b9abb2718f5f27fa5f2f464b58dec6961cf3a59b5b63480260b20b80369cc3f44a901e1b59fb9a962fa9daffc3453f2c26368068739ea2ab4700a0271eb4d71c2de301d15967596836db6ff59b3a13992c5166e8528e86ea464d3907b9f16770f828fd49bf4cf3eaa1ae2e135ca18ab7efbb2e64fb388ff65e1d34e4a1cbb4096c463d9c9a7b74b45131fc23aa53cc7e41dbe7598391cac40ce54af3b28111f5ab8cd9a17bf3d1d836f700af2fd38b968b615e9cc794ce72ecf394a06201292bfb1f9148b31ad747d8f02c846361f7fdc7fd1d5de0fc7230be3f3a2d0ab43fa79a626e58a98dd67b006e4ae64e5597979a4aa550c772d2ef15398906155212ab1daed858f417b45442b481aeec92307262e6cde517dbcff2d9821eae97407e7bf537669e985e00fd8bb266dc0d0290e93854c28b8661ad6f74caf3aec909fa80a84bfd0db613a19586ec91fa0fc91c4a2a8bda8a34075d79f33f263e84a2be6f6ec6c0f1b198647103fe1c5f4bfcf3b9f3cd6bf9134b614ca3398cfaa24684fe4e07585e490d639c90a1fb05316f49afd978102620ab36d5d31e6cceb2043a32a608f937098c590c7229bae027862b6bfdbc791212dbe8c8dee363bab78ba37170e0ff432656a9d2c944fd0e86b37bd64952e115b52a983875a853ab1e4c588bef35d0c84fbabcc511a9406647f0385b00c08ad603dfa5f4097ee542b63690244878375a48109847e8099be606c5135196812fcc21bed4c707b41182ab24db7c60f74768eac11be07d1fd52e2c5e700781de8a10abea8d218fadc6a94cfb68f5588e388ffbf3fca0db21f5cc3d2f5675cee47473c1a63cfd24ea979867ff3450778776982a51842e1fdc56640fbdfd96e620f248b359aa397c672cfa092a3e3acc696cfce64f0d101beb14c0a47f05d6745306952ddf2b2df62641b8647d0106ecb8456a8438c93b28ef7c8b84d77102bb2ab2fc9a0d6aa71a223db29826b91add3fcca987c9dce00f17d680aa44bf267e69dc4629cc9742ef148db08138f0360d56d8c3be01a949be7d704f5cd907cde02cd52cf75585251059cf4ca8971cd1a8551bd693cd1480f892b960f78e9b1815bc88819f4560dbd6b460e29e099ca39ecc15cd80158e59688e67124ace7a88aa425e2bee0a63fc106c04a02e5ee9d04c84a21779b72154ebfb56270c452a92e7b8033c8061d358088af5b72e0b50b2b773914b5bb551a479ff974f0625d2852519cd7b3c597aa8f821a4b56c0c74230714cb0e62816aff8eca9fa214f077aff6ff164af512248980d7639b6b2aba82d3f8c7022611cd080bb937f592be3b8e0db54d280836878f666dec535b72978fd3abdb42433ee4b224844b92b8c0d60787cf41e9693928ff735e5e9ee4af5d406fb7145afe20508c736741f721f188dc9dd82287b20da2fa9a423c56ab7a676368f408bbc2bbc25ac8ebade60b801b3cf94eb1f8c416a08ca86bcfef4a57763e01e03827453c8a66ba3cac7fc05081cbe5ee8453f237c8b5d6b7d9d233cacefffbaee48282136f9eac2d90958c45f82a8c9a2bfb95543af7d4da52d685459148ca2002e73ceb03c04f6d5deba827784c6586cee71218d0e891ade55f9cd2a5ce45092aa3d3f0e531112dbf45043287105e41f9d7477466f5d4092d2b96cff4378e9e03be4a4de41ea1e50a223b075b58d5d70f3b256d15c7b6f28a23b1fe4cb26cc5a9d74f2136051f2ec3a3ba242471a8c9d1129b568cf300c484db12f5521353e37fba06bc2b5c5f488f7051b049c563e576b018fb86ca97bae23731df368d103ceda00ef50f962f17f37e6c760824e3c04862d7489c021cbba3515822c4c694708f2b57a664113e0b1ffc961ced912d5856624847b6746795950f0cd801739152a787b97195bc97bf09fcf7c8eb5482e329801c70c646251fe2cc3b25b40e5b7fde7fcacc0e61737c72a94f7e6f0d7757bc99e6390220506f2999191d786ec2e1e428fedc9f5f93950e2bb77fd6bc0b070ea02a08a3ba5a62a8e38722d1abddeb25ed93313912dd1b1559274858947e52fc31bfdf420c6482d21fa021544b12e242d2c1ec3f34a7cdbe8a922698d17e4b5dbf3226b68f66889bc0fc92b2e3cfc0b83dc40f19a550b64486e6cad23174950021852699c6df5cd54fe5c971424a2655aaa9ffab4fc7cbc5044445c25d7e0e9be045fe093baeadd29366b39247522ca0ed1228bd7bac5f9fc7c1c1faad323ef5c5e215d7cf65371dd73f1f52fddb4bc8bbbcdb0d733591cc28bf8605f9bf79941477be0d9050285455076e6a68426d930636db43d84678e798af3e6dfe19f53955cc5be4585c2ecca95f18bd0f2264ad2607c8aa2d9783c04304d24cdb90780e06a8138e54743dc88313b7a250ab1fd3b0121874e4f109e246ae5417f688d98b2b8108b9cc640c89099bfbb0beb3aa617942e1bdb215111071a1eaca3df2a6f5db947edc708c1cfc9ffbf32f604c92f9f57c92243943469374553f32da7ec4d0a039294ef36a5016f945eb69430f73de55bc6cee8b147f4c7a2709553095d190adb2038d672ad4051ef2cef543f4dd51df9ff73b0c860384b4f7979703723d6eb0992e0784bb1e8163aee73aab5510b1aefab070a66da36e6ba96af36cea0156ea7c810950f06f1bdb1309ffbe1e946015c54058253dd35bbbfff10036fc59edb0397aa6529cb2964e03a4b4344edcbbb05d38201974159e105530449defbed5b7f25d90a3b114409fabe800f812f29bb744256548b5b5765be128b222476d09a5da71ac6c0bf12e34642471bcb2033ac109b903574c4e51bf40252489826e826b7c0fa91dad23e0f75a9ae90e3704f526c872a090d94512c9f89267807ffafe4b4be3dfe01d544f55e9ecc7b0e50fc66faec3a43b09ca1d68180f9d8b7d6c5ebe6ba5c17beced7e2124ac7640b31e0b8ca6709662fa80601f13dc5de19a29aaa8c0d95b7aebd7bea4c8671c6b06139fd083fbc95405c3554f350ba42b97dc4b813339b177577f2d5d87676b6fe273b19a1e1e5c214812155c43aa29754605b6d2fa8729cb1fc53b5d4b8476ed60907223ccc1cf699058e19d8b708052af99e1d97fcd6f2b258bdc600050a6ba38d02da7d50bcefdb2edab45c2622cd8e47c965fc7509890f80274ba2798d4fcbfd4309b7739e18ca4300d8a6f8a58bb783754b9f9e5e14f4151731db5edd3d973cb6d1844cab7c9bd8e12b181710fa2876db3ddc85b1e4f0fb093e5f82277cb47daa0d013c8fac4fed659bac089c0dd6d3374ee3a4ad155a946df17dba9774a45934bb4e1491b926033f957b2bfc1ac8bcabb7db3e7a4fdfd44981972ac2a3b07bcb749925ff24063c7072cea58c54415358a6b926aceae43ae12242b63101191abb7d221d3cee5082d72eda51e3a6b3a73ceab9cf1586f55dfdc25240d8f0d6797f620274ba72108cbe1eff04c5b844db829ff8b341206fac00c7e1404aa9813247374465a2808ad32606d8f6d4be25e5b5c6a49e2a7efb03f6fa3f5971ce9826bb7a76f2500a01631c64a749b8c962de72ddb2cc31c7bfb21b5eaa2dcf52162851bf964ed36ec54ae360f409d28ddc122a2ca1b95a7b23e3a819f32bd8b7bebb9526d1b6513bca2781bd6ab7424fa2d3fd94cd0eea816ea06a88f25c4314603ab4b2d8f8d4c1c568db1b188801ae192fccc98ca3e52df96e546d3bc31328367c61cc665de3c04a22dd079b2f6df0a06bd0729a22a65dda04ee1bb79ff56b19b784cfde3f6c4ba88a4b8d65af6caf406b6f9475934ee54d8435bca4a79a16f0a11483396cfa927deca1b63e05e3f192af2253f1d8937ca5c24be21cd6d6734d4251d48645fdf254a89c75942f952e6a0dfe332735e129562128b23ce4b613c61a32a8e10f134c8f3ac01eaf47d903b3b143581fb17b033b232aedfb965dd823a34fbb558826873ee1fb08c43852d2f8ce812cf31fd70a87fc3963937bb3aef48e0e57caf53389c55a36b3477fe0963678cc27f5b489617faf47d7df579b63a2eb19aad093e6791bdcfb8c5bcc1e2ca65e5744fc3611743c57e9b6bad2dc074fa529d902f5553cc8d6024e3c3d0fdf19fb6e54cb70861eebb113aeed00bc5cde4eb0328b2a3bebde81076ebb75d7e48a1d0d7545329bddb65bac8f9bdb1c3d3a408be3ccad25cbe563c833181acf9c1eedcda005f0bb838673418279bd144fe3d46de9930f0e1f828db97f58491bf864914030b8b61f8842e349d147a2c891ef420dfcdf5cca79c93f44b369452b1fbff3390924b75784740de4c79b8b85feb6e27270c4d535929af5bcb86c0567aeb1dec92902a6c5b3d6d729bdeb660571384e8b12bd37518503a274ddc6a1c5313f64473c9e16115ce5e3171cc8350c00ff312894741e440ed2e3cc8531a35483cfe025c142b6aa7c76c63293e9fa3f3df2a014d61104c67b3dd79984951f9afc7b606f6a7f167065ac5598a5a3a3f72a563cf75e820b620bf5bf4970c247e092d6e1b9458ad7f67c02809702065fa475410dcc7e7b689631a4173e851cf6e4d93a6ff91561729e50be19574f2e70939cc0e754f9489628f6618fa3e7f4607d47d02d7f6ab88a5be12dba4d2c4719dcee7051f9ea903ec05bf5a5e97e1ea8c6cdb07efdcc318fd1027acc20ca9ae9dfa266a8d5f997d7ca0d59c30eacbb9d2d13480c602541f34606257b273e2260b19b170366250db5f545f3d6d381e5368ae0bd15ef84af5d292038db4806184d454dfee0d3a3262770326c5928b325bae65d210b6a81174fd76ca7ce78620e57eaade6f28b04ce6a18b7de3c6a13cb294373d8e6e343550cce93739e8020e29fb499a2d56dc41df971baa01b11b70afcc87d8361fb90fd0bcff9e2055de71d736a6abd2df569983d7cad8bc9cd0d5452955c289d01fd9fce63f2ac34f3a074daa33b4e3d9c74259738158b9476bb28aa7c70ccbaefb8321c3b1f92202dc140b6bfe66af8103240455c80133e11883e5c5b28297a3491bb7b4735192b2385ece21f4d69c266a5b93c720b25bb1249a77e64ccb10db76392643f1a9042c6a38ebfe781a69d3095c1561d2fe8f1c580d411440cbba1645c0c3244ab09ad2a9bdc407a849a0b0554bd59b2dd68c8b36b83c71fcd9e7ce64b1d0776076a9a4858ab04256c766f42b15a738ff91949090d757c64e391a6a143499fd8513253724bfabc9f9c3a656488a429005b1eb6892b64630106fcb30c60d7abc23796840c4318d6f8836c1f026089ed50a072f94066bc652c59fc8fda4286f616a26926524b5415ca461fef0a976774a9fdaee3665b9b1b5a93768621ccb1940818d5fb837d2cf298ada13a59f099c389b1350efae27629dec09077d2d4cad9e3b329d0f5b7e2fcbbbf770411ae6ceb30d0e93afada8853d2d278a21c3ef5d23f61bef7b78dde985bb41aada2f11445513b47771adb03b12232b95131d22b85bd2cccbd85a78f6968515bc725f48b7f39339e3ea7d4b50a46a8c6eaf35108dd4025af3f5e56fa92dd53772dd19d302e7fb52fcd708962f6b718054109580b24d9377eb1a8a42fb75b7662bb7eabb093ba5bb1de29f5c05b98827c5a9a1db963ded10c1cb99ab1ed3ff9821048df406bb5356ea35242412ac3026cd3af56d1bf56d9b54a98611b58075ea0acb10edef7b923b0195db8a8c00bf0f5e8c971f1de957d355e33f6a329b7a24afa0339ac5268e9346054a09e24d31cb3676155627021d854bde6b2a54fb93baaa29faf2ed3433b7a774d0ab5f6bd8a629f8dbf56609330e08a5baacb252dd92ea08d60baeae512e82bc79e200cb6d856abfd6929653ca9f119788fee3b7100fa264d59d854551a8e002b75a2d55a0145320846091647d860801c9470f8c37c87478da2bb8782d7f7cc5c516d839d10e1a4d4301bc9a7dcf17df21d173daf9b5a15d35731f6114a5bdaf5bfd0428a4cb2072488f0a4c64227be4cf698e9cddbaedc81db03f2eaf3b723beb5e531a521c17831347f26741ad2312f2ff8ff36e1624902715edb1be0d6ae248737b2c9e0d43ae4c6668f89fade7f91faa54ccad6023734da7d3e0f40bc24f76560d8b59d8a11c6d2e1024fe3e8a0c1b40a3bc651cd389f7adc0ab743dfbd19906daaafea6cc9048f08b4ca24ecd90a717d8254245d740f597b3ab6b345e542d4a913bb77f5b67a516a9304c82e28d6484ad191fb82994a442fb9c98a357706b9143a60ac7ecb37e3603e0b8dd2e29c046e12f901bef9b788e562211e24586483f868a9dd146d1621452d8541db6ab10e36a6c78b44b5191f43efdc11020fefb21d5dcce7a8e993fb8746b3fc65b81c9b176e8ce5460f4920a56fb820908bd2e06583f63430b108a2859966a608cec8f075216948517825b7d896a001f1ae773c09487c89f692e80b25b2db20888af7b112103aac82f173131b2b97ea4be12eaaf17101ca08b8d2f325ed10ae1f0f5ade933bbbdbd45588614a5cb013832be5de1dc13ac0f1763b7f0549d5f862d1be0ed1a45f456cbe67d3a383aff92687bbac3c940ba3ef6887695d247a389d2c41cc72a45c36de9b4d44ad888a72e7566528ce2d25fb4fd3c3137c25472011f9af79935ddeceb1db4f9ed4fb2d11ca3feb70796f8e131cf3da04582455301684423449de16f72257d5af6808aa3b4994ecfc0656b95e937ea7d5e3826386fe1a48f9b770f7203ffca91742d9a7c5ee64ecdcd2f08bf004a14be045127e79d449100092368a34df93cf9bfaec15dbe670f443cf6629e11a7092947bc0deb1460edc0482276f51b6156f10e8bd0ec998f92ac84f1b5bafcbbe949e3746c415d089dcc314f2accc881f8d2e1f2a1807bd2c0d1fe16fe0f1d9b6aca4e545a685c4a0a51d499ba1a49b2e702060dc379b0caa0cf353fd937496875a8a4b96c774abcbe625c5b004bdd23a53fead84fa8417de5b1a95ab178dbfe664be11f91f05da93c49cd10b025d5c483e502e8d20abfc0250fe0d3686109d1e82d6a1d6778f8efcb69d9adb49550c25c1f62369ee64d43d39ea687fd87e14c80f3cd4f66de8ab61503de912f87e80329bb2275fa80eebc42d34da0ba32ad823837f6d4b9c207ce6abfdf7235d801a55005ab14afbe17263fa4714e76a5d98ad703f3abaedb8f8780517c35a41fd30e7c28d778f99f532793d2f0b4eaf7b620e6d8b26301ec4ef7ee92f5043fccdbec053959132ad3686e3ed99469c9ec2a0e1e516173f33ec469444d572f5e01d59e0143dc9501dcccff83ad1fd18fff30f269dcb8fadf82a5245728889bcdadca5143fcb9caa1d9a4505578e09bbda7877d156b4f1b6b5f1e89598fb53f734f0846f3f2f3c4615167a606491e725160720b59d7b6e8cf8ce2e304896e9cc7b9bc3c9574b40ae17659f0d7831721a803acef009ad0f9e4886c1bf2ee437b3dc9be74c030a050fb666ecde829631bb8828902ccbe4abe5661f6639bae561771b69bc4957f2421f96f7b2afa12da28872451f4d196a60af34d633d717954edeb09e7fef5dfd6b83a09c124ae62e5eb4e59a0cbae0a27619db2ad05d4abee6985cba5a9643bd805010cd5152ad47c7bcfb2b62f5a7857ec136cedba946d76b557d1c22cc5dd1ed815dd8b9ea9faf8454cd82661c5dd8a4f93e658e6bdbe71938434a6f799820c9ec33a8ae93c5faf1748a0b03ceec713461647cf688722603e82b35dcdfa02a7f90c5a3f47b4b85063cf43e84f6e41f6844ad6489825c1d765519bc034a57c19f5dede4c7e89586a84c04f32afb4e24d580bf17c875eb4eea7969ec0da7a8e53ad1c33e62945c3a1320bada9fde07f16bb06e1f80d917a3460e133579eda746a060fc7ab1bd7ffa74d04f84231dd0d834a7570ae16cab693c984863b2ce0a6d1ba10a1d097f1504f8a5cf364865e2477b685b3affae49b30759da13550b28fe36e215dfdbc30f6925018019f38ab4c6a63f1acad23422272a834d57e605cde8390fa7fb0a3f6c138029eaf1c8b33a1b623a3145f2a8bade1c07e312e0796d450c802115f62cc1730e564ea75aa6e810938d351f8569ac439803147e0e04c61351a4743f34d0449267f811f9d9296cd63492ffca7f35439aa30e39c296e59799d5f056e91d80043ed6936f2d3ee28237c648a5a7ff39be45e8429aa462edaadde39bf460e7c53f87794e5e78d22c71a41fc4649072e06962d126c737a608997e368423c3a7ffb0a8e6d702787a9cf460cc23f752b355824ef4ca77e64fac3f094159a7ee5334f06c6017a6ebe471e1d083940c47a33491951efbba46624a4159858106eb7cf864a8be25e6b8e7af963b5a14583e3b476c73fac39f52579eb30b9d2a22b379ca733bbc13a03826fd29f6abe7d8465d8b7da2ef0ca271ba045ba099913717b9d1377959369cfa3c8388f1478afe5ed69faf64d0bebc783c78e26c2b48ab3c92a50066df4c3ba8188f618d408674423bf929503a4047f31a68460b361e4a3adaa670e5ec1e9070db16fac0adffdff86a57e526afa0d58c4867f8e006902f09919eb9a11d3bfc23bccda84eac3a05014e8d9dc9aa050eef633c0fbd5968e2ba61d91b787497f802a68a804c5c934c4392eacd7fe8e76d85a005d4eaaa7e3579a9ba18801b2b35a3d97e2a8d716886598992997a02374a13a17b791c3705e19a5212f57ecfe92736531d9b258ed236801e6027688b13ba1b3383f08f47cbd3e354d6c4f3969471e6ad9e2dcc1b7d60609bedacca04e8e3261343c58ed8f147b19144901d064d86d3949d805f18efe063e72f98544197a9abf6fcbfd500b18d21e5b0e28725562188d88fce3c8c8ed25a74db4841ca0050986e181978e34de0ea16457dbc443da1b331cac8daf59f3cfe5a5ccc256bd6fb6afd7564886a21b8b37faa73c2dc13896ab292502f5434df420609d114fe880331beafc82c7cd280d459e7a815466f6b8aba0025a419b5baebd4863dbc27dfaa66a0c4e589e01ac1d24e39ddda76c0f8f4b8f98a46c6653106c7042dbf9ce04243453bcd5318113a1904713e6e89094e6963dddb58dffcf139ec8bd6ed767a3e3c0a497e98cdc1aca7c5b1f20ed1ca033c4571a9e6f2c318a0c9a76235f125c0c0d36a3d5f7c51b2c86228767f1957c8cf80a794868ccb0963bc50666876629cebe5df7bc3e5ade98351f3ce8e107aa9c7a6502a2b5516ad7f0622f6b272fd3994f7241e782aa6cbfd97379e406a0d4445a8afc078150f0d196a94ba2923408579717e91604665a3bd1081b9383493ba2fe93bf178fdccc921cdb0f4173d2ff301f80df3e77f1c2299ab499e6302195dead18b5786db87beb0873745b300d88ad68e1b0844b5801740047211ab60306336359bcadd234c6b14523eaddf32b26c40a20dd3c6ea05a5ee052ca1c996bfabd2bdef001ca2bce39b7a9a89a38300774fa8d6aae19040e935f23ef6c73554165d534ca7f923e10ffd351a7937954a2830c4ac39befa7144b1a99f3d8134beecd0409750c701eea5770d7e7dd3637df6766686be2ecd8bdbb010e1ece0a40d702f0d25025c5267a3b644d54a0511b737320308e394ceaf74d85e4b361df1cdac3de71ca6ef44a41c6e28e43edde43c27c0aa4b61c657388ca4687795f338ea9a16e95202f75f865a953f1f7a9cd3747153fb1415d082bb34a120701de1cd060de34a1449c7121feaec3fb5cc2d002ea274769ff150e50076ba94a252a493c3cffc220c13449956c4c577ae7e0428bd48d9a63234f31d5921b4900f3993aa583c96780cc1e8e1c1bd62872c0ff427cdc745f55bdf39f29e860fc1334cea434145ab55a64612072d589206fec6520dd158a3b643def62723f33b9f74f432a4ef95312b190221de9801eb998e2a78866acd2fc573a3a3836e49ff5b313ec41dc0763fe256a05fef78e935e948a8acde7af6aa789b122df54664102b34e5d46268f75059d79c9bc769b615b8a9189b3c3ad95ba74b4fb0c6022f821de76413df729d953a5dcf0d25d829e3509335da2366d78bc97a380b25fced750b36657ad888585784f472c8161e93136d1e8986b3f484abca13f42f6b7216d981c7d2773fb1bc1af9b8f59564475eb15b62c730e14f4066b88907d6a5d9da369894471c892869b6712c844e65c5587a45d85b1b61e2f44e7bbb0775fbbd743b4dc333bf6052943a42c48fc28765c1bf0dee3d4b60c7cf4e331b7fc809a56dd339e1023002f7953bbddc3a78ffc15f28e203657c099f9cb936d3d5b5e7301f93c2211ddea6cd057aecd23e4460f20070ef9f1686401c270615be05864a44b087de5ec101b30d715f533871b07875c623fed750d05269fd5e33298870f01dca4b23bf3e4ec019b56d426b9257af3ae335e8cca5f9274e94bc3115c1f7101fe832b2e49f776c6b05f86444b700139962e8d8ff543fb19ca0dd745f93fb80c36fbbbdd4d29cb97f5325111e1aa1a9cf3801c3def5e71fb7acaeaa64c218a4a00c2607bb63d8d8301d95623168809d9e08378ed436d96714d3aee2da748a154c21628f05a3d0cd2d92d3ad938dbde99ebe449cdfd960a5c659fc866599a917962bd66c9d11c06889227cb985f21d0d2463eca966c3e3e3181781864067cf8d4ecb0d3ebcd3ef50c64c533141fc870491c11f1f30d5121281be440a98ee9402c6c4e2b481915a867e484b1b91c5dae885889ab0955d8b7ed891f9a9b2e1a395bf282c32a83c1903e28476585cf339d36520123fca5312a562ea518d1a08892e9926a91a3efb735dbd3004b7f360fcf55d6885120d95e9b40524deacf3f78b26e4c3c808ab63b8bd97de65e4cc62af7f3735a1cb3c4e699b363531db9a084d498a3cc58b533ee108be4520e2be4018da6539d819681a4aae92f5a2ef069746301163b991c27991f150ce07db1a1bbed7f8f7ddfcb7fd6c61262374af090468e0ca239becc85f046eea84d38c85db4ef0d6c63b2b57049be88c5fffd2f6992a953f2ed4e7335f46c103fe2d47d0288fbe2a37223a00fae51df38ba67ea30c73e95997444b7a387d7b9485ce49b663b141c22c28a8fc7605e2a115dfaeba0a82dc2cc7ecf7bba059477ae9125ffde7e4948077cb53bc540d85c7b8942ea77b6564f4514abf1654a6bdf78f9653780232d2754a56cfd71b69143b157cc1d0265ca2044471b84329a9577a531f90e13755f175f9ac8fa2997580a31468c7a5693a429a7e5e40f2a2469f7afba42bf3199af8c5a6e62efa3cbd7821a691d62a5d8bcb6bd9d8f2ba81abaad3ee1eb6d4091d2bb97ef24ab2d92885d585174d9dfadd040b21582280a27f1914602546183e5517969ba3e38eb18ac83d7ff9746937d65e707c6a0179b925147320a8c4a43654e86a04d7afa6b32bc0eeb3241dca1063b1e7169e4ecfe31cd86de8abe1a3b4b479679807f09acde22791b9783103c07f5aa138a982aa6ed5c6ebb8bc9e0ee70ceb511d6e039b08a558339e24a4929652d2ab6dde759d5a3c8eddcdebe589bcf9ac12cda8aac0262b5c558ad85377abe1f72b525364296ea20ccd166c572701f7ba05144694fba4df3ca7967ab120c7a18d124c8602d5c816eb78e830346e7e0703ccee986f71a6e3d854ce00d96046537809acfe5f26cba92e4c65fccbe1554f7e23b087cd32b4589bb1b5e81b11761703b6a5f77afa7ed6324fc913ad56f9c52c3ac4cce588ce2d7571504f81e76b90f24269aa538ee68330b05a2de468bdfc4f82e74ec60b59b2845abe9b45145164945e0ff5c99440614aa8c69c67c65a4f3b3517683cd2d7c006ce0a8ac65603e63610f3916d0ce70c0eccf41cd54c78e65481af0f9e9971f4d817b696213041ba9c73455906eb4cf871271ea9c058c814af481602295b0e86d77f6339c361ad8a5af0c4caf7f5f8ad0cf6d377efcdd7069f81f6351a64b64e1d8118049549c4687678ed74906c97aa6343bd1698c18187a9c0587f6788bb937be8853b1872116a63f6f74de8b5ffa7d62f87f0d73b1990cc0a429860a09d10e9405b82eb6ee74e95ad0fb190959bd5f86492a2a69d53bdb5c7fb401f46a767ddb5418a015d768a0c8c95b002101cc9492016de0fbdee9a8449a1fafe9d4c03e4f4d66880e95b4d436f35be58d0e103957d72fa23e289892f87234aebfb7642bdda4766a5504e7eb14483bf540707f411dbc5eb556f5bbf8818beb62d7b8397a6d46d24d4bb5b5a62c9e002303ec39377b3f7d4293df76c91cc9bc38487671e29910a70a27b9697ae0174b594676f189bf71d5efd166e0635a8c29f56485e19b3bdacdf185218ef504f5ace5dd5e8a11210382ab0148e5bf7615b34193d20da5e6203814f2abbdc653897ca33e9be937047111101066141ad3a2b1c1b198e93cd1d671a380abb2d41de03214892d16a8feac2149689f36ddbda550a792c009bf68345d6fe9d777802d399d763af35a7a548c0bedad5c769eb638cb78bdfc00dcea53bcff0eaf4e0ddafd440e4d1c5e08d9f92f2406b9125dd689efc4839ef1d6f8f1dd70f59d4ad8376eacef4bfd93f6793293ae10fbc56a4a7f13e7fb9e403c18cb8a53570dc7153a3e865e692b1121db166a11366b870cbfda192d427999ec89e5257941da3e3ee619db16c57b979ba6339630270982a054c11f56cf48169dd890fef140f7ee558fdcbf7d4fa4e7e6d7f9e1da3ddfd2c9b77f7b134ccce99598a7266f41d1c22daa50375c14662f90b1ecd82fb48f09cb0e1dbeba50bc6ae690e6fbe248cf5c151e22057cc03786e83a89e9baa05a461f73c7629f540d5f23248a342d2bb5a04f95bc0c7986d38cde03427bb0d96496cf0c7364b78d9e1079d84f351a87be7c7e6679b25d3125f820f11be80277d7f534448c595543efb9b11b4e525155b9de6f280939aa281241d72e5a64da778d4085cea6d1084b6bfdd4b4932e66ed33083d1362f95a2cf2725f5d87364ca0f09611f5ee88d2136136037fe8f8eeb52b50ca02614120f40be776246a019bcba2133df71ec8f9266b75784403815b560f0c25a0c6545576560e8f0fd2c20a4c52ce3ba8e0bb735819d4311337be10ded03cf489bbffca3a80deb159e492d8c2b24643c22b5f06a662f8eceb67bb012409231768daf162f2a4cf47b6a02b99e84123ef859d25092696ba9d1aadf41887769e5a0b08f32348a162877df1d12e5d1bb9481ed347c369bc5ac515f20fed62254995ce33a9c15dee59693722920a0c1bb41d0672810fb328843400f050dea84018bdc3f6240cf0c3da9f5cb1b8daf558d8f4b86058a13bf8d97d1bfe48caab9c53b830c6799dd4b74fbced438bca01ab00d9e37db4543fd31627d6752d1ed649a625742d9a9ddab00a45948660edcf9fc4a800ed81db8216f14b7d7d2246c80454802885f8d0613805eab134183d31de1a20b27375ad9b7e451469b1510d8a76ce580b2bf7233b73efb7a729f22a7a39eb52918f9523fa62cf218412301c2d88ade0ba9a2959fea7c8a8c39163ecd1c99106131085d0ac253a5f3c08d876511c2a5fd90f1eff7f1dc5346df607dbf7b7b3bf164aea960ba1c254e2a173939c12e3b0b7e2d082bfa2a02ff6d02c5db3cee4760e919f577bce28fd150535eb5c588d8fcddc6847d3e03d6bdff492d7fedfe0f7764c2ae20541f01d62db47053a0ef5692ecc38f986ff0d0c963f5dfb38ee786e7ef390f11ad8b65b9967e3559a92ab4206a0fde392e072c8777ba6bcba1a3babb972af7d64eb1b4b1b0d01ddd6bb22b01a6ae96422c93556a5225f90e9b1b4607672a40fd7094fc405b0e36ad7d73c43028c4df0644ba58a74727c78b214a212f0d58fe8e85d9cf7cc2bd8f9835182a33d05b460afd74704996fe50678fdc5050c4c38e1c263349e916e1894ff30c6284b0b897cce8c830d6e6224881ff48b3a6af8e5db1ba5f813d4df851719ac3e71209aa0da6542952efeb355162d3c901b83f411e886d72e58c52a8258f1b1eea94f1ae9a3ffe8288686e5eec34b1e2790a40725276b69fcfafd00dc87e9418ff25df454031d897dd6f0435d0e23c84dbd40905f817234ffc85bb9a0c1842542d3cb4fde7667c2622d8b2f01b860fb686b395af9321c3f557d0f613741439f02eb90929636fc385aa292952a3ec2da090e55f362d1cca620ab70bbd63e47e285578afa3a1d3465749a362df428776bd951eb2e06f238a9bb1816489b0e66a705cad1345ebb85db93690b9bbb33818baae02985b6c1a1b851bde492ecb40691843b48e668078ed8317c10038f3dac4192eac05db8ad9caa36bed1fe3364d8c9f37bbdecba5dc098abcfc87f0d58f1a8baddb3fbdcd8e4ac06cc7049b9147d57ba0f444762e43e31a8c5b1401444976f7fab8ecbb86dfb28e3222acabb9642b708169c42dfee5f9655f6569738a2df8e56deb591b79f064f9697cce0d0bb065096c43fd77172559c9235f25c7793968b4ad0fdd757d5f7c34678e4ee303056956b0e0ff69a8f66d0757b3c8c7acb15f9203685f62983ba12144749ce5b8fa618ccb4e8b2ed194683a9223918df70082c2ed3b603d4c971d45cc7f8199289d8c039be53b51eb911199ae26e72781c77acf9fce8c42ae3aa6acdb09c013bb5b66b40046cd92ba373ab262c87d4ee86607f7d8327fe1ef57150ab45f85579af7d599fafccf33337e4843f37e6356578ca8bf5c5857543ef08ef21ad914f39d55fb668d56c6175be2847ba9bf4fa67b4f460ed1368c3534d00c017e9d5ba33f57979b9c979487d0ccf7528e1032dd287077204207bb6a443c55b216e68284dde218943dfccb09a999a5dd4d41b5deaa76485fe7763414fd7a5fd46ac2d8152617b7c03063da70d0ef4ed0656afec45ebf3f45c428089b88adb8151206666d39616f8cabcd4058eebc2fb8528f8ffd05920281c8194dde00d6c604cdba2b5fdaa3345ce35aef3a1fdd9456024a956f5531f9e3aebbf204a1823249852ccf8edf797819119ec1e5bb171a9941b494af168d39a20d765c6ef6111ae19a82958c50baf66e59fbd298fab99e8fefa091170fd0f420039e1f94efe0153d5362090a044e35bc20c8ec7491f2efde80cc3dce041c8edba0c8cfbf2318c3b1ebe1fb53760fcf78ffb53cbd46736abf919103ca1f232d78b78dccc032d30685199f9d83e83a7f67b5dc9583385f73a8f63dfb593f9ae2aebaefdbd7e78b9dbd20ebddffd1c2e6ea738ff086133ea33fa0094256e2747344a833a3a8a94f2acd5751bb8b619c646d0753468e93b41ccd100f140ee6b4ca9b0fc786068117a79e93c2901e10d7d0b10dbd4ca2a01a8d23b442429e3348b87f2d4604ee1b06bf6906550d7a7ca701629bbb20ae3ed99d15ed4665b3b0b38a4393cad958f7fa10e976e75945f7cc1e6a3ce4309f0e5baa1750553f977bb1732326d91371217a93103dcdfe286b72cef10cf902bf94a2820bedee4c1a79367357431cc6f22855bde63ae35558322a0091664664f2d56fa40e58ee3f0fa5a2592dd7aba6f1d9afba318160d008e673707b60620df9ae00a911ad5d26e68086c4efdcf6d9bac5285accd4ed374b69d554adc0a3d216378e181714c00b14ff82410b374d0e44f99eea87c7424f0c37de0b4807388fb981d71a4854a8d5d4a20e2dd98d20297c27a8865596249d6a43fb4c76bbe5b7aef98c1a603761eacb8c616c920d0c288734f7b25ab52645eef77e47780d7d5776b003c0a8d6c8ecb8cbef4690659eb84a38c8eb23a89e2c8adc5e59935dd9755b7c60ba9f393695c599d97f28c295fa132e6f0c0099313331b502ce74f0b17fde59241fdea27fd511f9c91313c77667c0bc386f7db17b4d8590e8b261df5fae7e4d065f9e075c8dff14dedb1b9386c728a6fad0367affff17591ff9626220a5b6b08a9ae7163ae41690247dc4cf839e6a1fcc82c5eec8be6fa3834bf03896fad33f7e5ae8e16e291254b4e5e15e290cd7db09b606675e9c608b55f042f0ef429ccf4939b7ab0816abef6dad319e110efac0f7d5fccf001bb3f118d0026ef9a36151cf898d04d483e8c10a5faa0eb9deaf027cf0fb81ee6ccabfa3c7c976eb39a1d4f5a90fbd442e54859fcf6b38985d3fee1569274ea527123771965e7047c34aa7d79e078ee594ac5d588aff0d1ee6a0903d1a12c0d5ee602448bdac7da8bd74832a71afe7677e8be0d59b25b9a2522d4a5e3682b3cb755ea6f7025290abf2857df81a17e5e9851b52c4f6b66075d62be9c67fa70df9276fd56176fff9c7f67e5a0dbd9d5a6b73a21b2ba718628ab30ded7847d47ba7a702feb2e80e5be2ec3bfca48db04d4b124517760cd9de13dd3ee01a4167c2f669b15eb70df4c2d0ecf9a0413a724ac0c4aa93536ed378acb74a07fe6ca320a54233dfb74fa56ec04cd6a28270b0108650ddab0f7981eb44daadadadf55df8546ac19fb5eb32c54d9c8ffa140bbd4d36e0bd31e4621aae8387adb1b6606183794d18312a6cfd7ecf40cd8c90b528520fd86fee26e93359f4ef95f68460b45aeb790274ed599921d3722bfaa16fe15a30b2b06c57f47543b459f177ebc1ad38a2421ab0f5c890cf9efaf6f18604d4affadc29a83a2895b4cedc6ba97cae2617f39862b7ee2b35ca1c7f86f9035970190444fa2d4f4e0664b950cb69ebbf49b51d43b0e4dd1d5816fbad9064d303e95148df3a3253cc0c7307fb35779d19c8693586b2eba7dbed5d4725cc8f396f0e1d2daea48d28a8a76cd403bfca76f42a35c37377d05b77ddade70b7da3a22a574ac575f41f68b4c11168c978f9e68861062addeb85e54de4a5ffafb25d7b29a8e5598e1c85e47374c1dfb81a46721e1163d24b3e02c297ff61703e5c6711026295b05f799aec5dbd24f6b63d762857d22cc507e4368053eee558cc3dc2808b482d0ee8e7fe9436d27cd3c224c608772f2a1e7af84594f315230c5530fe2a5bc267b8ecd87bbbfd0d7f8a6b5a2a28d7448a23a8325264fc82ca7762c4e56b76b612fa08834e782b1d1dfa5d70fafe9d85e5a0baab661b5c012fa31327fa4c4ba304f2459d5ee0a642e056cec67c1cb9dda5355e2a1cfdc803e1ce0c92c6c626c71c5dd8efd5b89e011e929d715fbfc8d4b526e1ee2aabb56bb8e255c5e4ca6c2dd0589b5e4ca27a7da40c4eeb3e181e86966130c3ad466c54b2c2ee8306cc85fe994e8428addd0c59a29d9bc24cd0a3cf48608e033f14e0a7e694196113f9f5d29bfc07cce6a73ae610d383116608dcfd327fec752f91b70b716217a4769e221b7b823873366fd385db515bb09e11ba5d7213af028329b5c9fe0ba046406808eb63f415233c849e89c6078b587addc4fad14a42dbe42ac061bd4fccfb279b2b56fb3b809532f8f9c2fe3816325d7144eb8aa27f67951d89d04d317e0d2cd8e7b5b71185fc6edf5c275096712a8edf9ffbd39e7dd240cd2d94821928d535bf87b1ae386c5f0a15cb54e501a1a35f874fec11a2323732f71a7765f666db146ddf5709d780297d80660dc2ef664e811fb64fe7d1ec6f2dbce3aa1e291279a78e3bab1b6ae45215da630c6a95163d01885c4331956476f6caf241df27fc533bd9e081302ae301bf39f4bf41e272479084f0ed0492bbcb51b3ed3053eeb941fa5b218a1e8cd8db6b4833f53688f23a21a011c6149839c9d4f0b32394fcec781e22010961c6d70c0c713f299fb44bea3bc83baa59495840e34f204cbe6cfe3eb5abc2150e57ee751150a23fafef2fe7bba7c5a9bb9fbcb57bc47a15bee034e57d4b43724284ddad1bb02f55cac823e22020cf5369f13a81decc13ab85a80d567bfdb056345034c9519a3a20566790cfdaea0113dc83ba350807989c279bdaaddf1cb8705f119d743d1dfb8973f66585e38ac4a2d627167b7111abc3bab2ae5930dcb2bd5710d243063ad3817371bee06953a8ef4a5e8c5876156d3e7e6f5e528b0ebec6ad0cba54bcc6a401538d440668f8b82d328e53cc4e558ff7328a00ed0f3dc4172b796da9d93aaefdff21d4676dbac26c4fefa4743c7ba1abe0ffa4c3139a8a9ceb42603869ae4bc48912c6dc8866aa6cceeb687bb3fb54f2472ca76174846d92cf8443c46ccdf44ca792d9a10cadf00725a5e7347fe381cf7a6641d18a9567b0710c166d37f2cebe6c65dcc61b85af03e98e0091bbad3979018308365f1a21af19a6b185e3c231e298d5e25af6574ba26ecadfb464e0a5ccc91f0e15ed0d6078ff72b204cd809663dbc872d3191ab990215df1caf9918e1bc7801fad9bf1e86a34c58bf7d3a72e5839107606bc25fc4e2bd297e21ebeab250de80947ac0c0ca2f6d49ec76db6d3925e440ca74a289de62d56bf80ff0927c2c83ca87a560b5ed3b8f2b9650355afb1c28e4a0cb003ca05b561cf0bbfe72f4c37873dd0e4e8ecd9f4204123a9b852bed0f6fe798fd823b799fcdd60477c6c914bb5ca4eef65997c46ae4344d03b3e3f843ed08cdfb06ff86da91c4e20fda9cbc3ec8704a5171a9c4fc84cc39752dfbfc0aaf493a25ec14e4bc745b5a090db3787c1dedc8834481e883643ccc607d11d9934c9760ced27023073e692f94918140c1f5419459dea545fc329b0756dda928fb314fc7c47b0fcf76cda6ccd5c6a3d392ac455a3ac7fd80155cf5cfe4c0f5c19fe16d64c14e2f5da63fe708bde00c5d1f53604eebb601c27c955a6b09ff4debcee167ae2199db7ce7f71dc8f0608bd383c3828a506afb21baa46837b3bc51e349d834d998ec378f2d4a10c56ef206da472b2fea06f8f8a344d8dd4131711e08a9eed0bb9525c650e5ad0c52a09f616f698b84a0b1d6b4e6a06c5e37491f0cb94924077c260b4bbe0c104da05a1a29a58c22bac85088ac5eaf2bf7ac16c1f67f2650a32f05877ab94bd71f7838873d8d6cdb2fbc2cd6fe345920866966e4e493bbd4a5517907673f9f3d354209733578cfde7b560ab7935ce4a54f96354abc028092768cec515541f4ab63b7c4948610e161dbe37c775b9f2e268571c3ba28722a71e4f32f596111911de202cc4939e8dd3429458aadd45ef70286f453779413774e3ecce7e8c1bcde1bde86728fc134ffd2b100d9b9d583f8f92869a433d02dc5bd6730d05e471ddd651e4fb0d075f2a6a6d0c1a6ea7f8d8492da6cb2d256080c29687a80401f6c81a99281e4c947bc841505af76b2cc39d903b60089fe8a9949425ebb7d7829c818890d29410fcf6e47d11ce192f11e928c171a01077e9f5904fbeb60e1f424f250c31da22ac7c497fbb4b0fa1e6b444b12003792bc7e134a10ae4e8a0382dfe986c5f712fa28b711afa6e67e8e02158e5d5eea6aea5111eeae11df202da3d0f30a4011294bacee53f0bdba73fefcfd1a633ef8345047dba780883fe0635ae09b1e4321ea223387cbf0b9108e335eada45b569fd236521beed7539e731cb460373062bfa05e66eaa03563ea11866dca709142e78ed4fcdb0d75d28889a72de4eacfa0dcb5b1bd1208145862b5e3c65a3eaa1453627516201778e94d034ddd47265ef965da2c95d774051f5000d3f3867eef59b95d","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
