<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"d92e7cf912abafe017bc753f324f4adeb0a7c2663b7bc2680f14949ff6a5630eee3e9efcea548bde807f7d67993764680e18ecebeb67006916c8c3beb74764e6881d8c3515b830bce7b27e82fa0de163ef9955330a1714234d2c622864acd7f9d19f398badf4eb03bed72cbea2853f328a1a5bd451beed378f8dcc69feb26c246e1138602c879c3c007a847970a5063a58653e489dce721cee73371017bcd9307128ec8222607bdb31ee4f4f57e3b6ad64c4ada9af71b6cde9d2ea77da7e34b1d88c216d72b412234668ae3a238bdc18362a0c5cb79cc6d87f3dd6484c05268f76319d651399ec040ff1f05d2e6aaaadc7d6f1f2822e7b917a84f6fd1f6d49a0d7885e03429acbd3449c9af2c64bbcee903fe914e9fcdc7015d57619c832399376871f1e9f038bba13c1c5cae30c744e5ef54f58ec21aff946269c0e3f1d461f1f2846861bbc8b8064353e15477fcabdc71f6b639a78b3c98ccda610d6b44770b4c64aa111de841cf54b5a5f0865971283d81da55c89dad1889c5c84be3b60c40246720c87c81e955451bef6653e5c9d98e50f834ecb69e9300a2d15fd8ec08d7f690bf9d539b5e7319b975b11631365f2b12819647e46088a9522c5af70bc1c8e354094fbda081ce1f5f2c3728052478e329d58ddc67c2b766eaab546346e4bb60b611ff025b735b7937fc7fd3c1b4c2d2ddf7f8a48174ce790c84286d1df8f478892d0aade176502278d1232e3423525e967f7c44910dc57dcef856ede08311e6885fc54a4e64a3b39511ba7a709f238e6b521b8f25f345be80ab31a85a5d48b490e751a98cdae2f21da3f79bcf46b3d9453b03db087d7065350f8fa5210d78140c33eb7273668af07c8d54cfac78d3ed290a8dd26f773fa50c232792eb1988cf122f214dc64ecfe37430b5822629e822c896d570291f67aa1f622d78fc3dc779746c434e67875f8a2a90a98eaacd8ade09c4c88c11f6c9379ab19ae479cf99ecaff4d37b8b6756edbfd35bcf0f4a175a5fef4387a1d2a7ab05c62eee568517e59bb6734f60cce5806aa92826a33c288eac3aa865a7095eb1e32fdfe478e6120b6e9f65a122a2ad5bc67412750d55e8147f303e61eb543432926be83192316d82b213d7b2011e75a574807e9b9fc07bd885bad05e3e451d5eb48491e15175f5e5d73baa6cf45c762dc9fdfbaef51ea0b36c39b224c643d1929ac3300b4a8ccd8fbc1ae029a6cbb7547e74df1c01643eb145fad6fa8f956bddeda482a73eff5bbfdddaae195cfb8bbff047ba62f33dc26cf3ce7735118884a52e1a87470e70a1b2ddf127fda75fae165a2d26ee215abae5f90d0c2d8650212431aaa965bc971bceb2a35866a66675d71424516dcd51a6ad7b9c039b7e63412c465ce4172dec2dd587ec74d2938104360c7ee49a66f36bf317147c98a89558999241d60758d7fbfe78f36993a923d0a940431b8f6d7f1f632dabd19f70718c0cfdf580f38ad664865cf4e98e539c4b7fed2fa4d8ea49ad50fbd047ba6798661874c7c08adea8c2841f9541a5416262ef352602e33782bd1ddcc1504eab1fc633b8815250a127a540b21bd9e4bc364204ef11893e7ba109c37705c8e076585b9aea211c5e69b143f9c194cd6f408bfc7f7a1dab45dfe9ed1bc6d21140e5ad599e3700e4444ada6156897606537a4fcfc69f06e914ae4c5094e6a2fbdb6758ea0f65e37e22763768eb2fef132cdb03c34cceadb6fbcda7ecbbf5c0c6b842721e85c2af79fd01505d0ff8f8cb02cf35807da4c0e5e7bfe95e97e871c7b70b709056ef952c6b515a3c55e717643a01e154cc6aee54c929df97eda3422ad4fba782b1d0bf38e7a2ec6236daef188ccf76a80ffaa302249f7e0580e92196c57b6dbed2ff010cee60992dce246017d9188ffc05f41017e89e6c91aaadf95e1aa6ecfb648b806a876c39ac2acee90c4d78d3fb9e292e9c1e116d1c33263517be77bfc143af987265bbbccbe91c40f153181297f32aac07bc0b2c8ef020edcb8c89484cd81718eacf439931520c39ee9bfc340ea85368cdecfd196bef55b311960ae64e88e5f5cedb020f3cdc7938724c1afc7ef6f080b776daee8dd790eea4cb667ab8f981c903a4a73ddc4629c67851d45568ba5eb426d2d06a99d4799232bf1cfdd6fd3b1b82266b7bb25de8e6aef216deecaef2956fa77f0b0331124e7cefc8b8548c033b48b7067d405c9123e1f46c3413855182a9d4434bc0185492b0d88a94ab2051e5be00f70c8e6cc8bea321cd2ad68a6977c74853ef9d2a29f6711b11e12de92030aada53a1cfee1e0d9d260be92806d62355cfc4ff57e17047e90419d8ccef3100ff71a6fee1b0c153daec11ca8d9b7e6b5dac81d6ce846b1985d6e829940e199e595f721ebd483c045baf81ec94ebc2bc5c69da3c848fd422744cc269ca1dae3e09ecb3b177ce31629f041906c414c7d735e291913328f582bffc20f4c4785a9bc9bf77b3c6782d8521a5777e62526b1a9776309b485a2b75f5c07451e1ec960a39cd9cccad9e9bfc0eee00c4f9f1fdfaeaae7795c9e9b32aed7aa8117d02f0cf4b6c4e0f93ea3d62640debc5f7607c556af5c301abd2073369ed93aced705049b89224c418d86c23d987ac04a57e6dd9cc2b2913b586ee42ea4e8bbb5ba209f6eb0281706c65f318b6ec9267c0eb72cc20a8707bb53f7c3959b1c9d9b8bab0bec4411536a4cd92057b84affbdcf7a9e8e323f0b57cb4cf1037fbe45309df54d0c6b405db4629b1e9b8e0c2d0582c8cd1d773ee8951dc81f36e1bfc94500b43055c792b2fa5ce80ae321b9a1ae49bc983c58b186921e04e51b5b7e076e9b1b9265939be4b9c8f92f53d4424674ef440bacd5a28b6184c66fe7ebadcc38dd59c8778f13b14ff276e5a42af043ba551b1e33b2c96c82e2535059f1edecea9f0e74c492370b029541a1b4aab0389c269d72cc127a4d7de52089ea77cf6b93808ed09bdd7ae4a177400c3878c1fc5cc2257089b49ed3987092a203dfb8c137601679204d2b3e8fd52938442c1de55424a0d3f4531614b93fd0d743154c8a7fa70ed237ec9028001e9849b318a045112b9c1124cd7bc8a63d6dd4fd4d47ccf469b1be49e249d55118a0484ec397f1bfe5ecf50f5672007f50279f05ed023f72a6b0d85b81bd65247efc462fb4c354b5aa318aa4847072f3483c3529b4df3336214ae5eaa932dac62b341fa90dd03996bc143228ae16fb423b6394ef0acb9745dc5f174510c73318c966af4833405ca1601c81d2d7343e91f79834766b3e9d0062004e6d8afad8af852489abfcddb8a124937989536272cbd632f0f469b8ae7ebf287946bc8aae84419f339c96fd6296e61c5b32686899e4f1ce0eca51afb92a92655e14107664e25541a096d63a7c91af19407713b726d185d2c2557ba31f410e27c73fcff18deda00ea69f7ad3e04735bebc73b56d623c0cc2efd8c6755e0ceeb661cdc6a251a5353b4313fa6fafb8eb8fda23e92ea433991fd7026049a8e2738aaabe203328f8b8e7564fb54bc2b1e2224c349d86ad977e400d7c407909efd5f1371c2ff68d3e124d41b08d3ab83fba71c916c526ba81584b06ebd1c6d230cf562293cb6d0f4c22d89d38347b68055a2d3ed2387bf0bf0cf3a8b0b69a663265ebdc75fbd311cada48e4e76178b60c2c331b10d59e08d595a4e7b98cc206779854ba8adcc6c98a3c685d0970673232e5bbece8b6e5ffae7dfa4d4892a2546a5cc55adaa9d463fffe92ae0c830d503a71ded9deefcf798ba9848d916df984597372cfebba53dce15d83938ad22263c9a7516e3fc4a2ae63ef824907123b418985f43ea92d292a9b7aecf623a537ead7a1044564a1e348be73b6ebfbf853db1bce9015c19dfacc5e356df06b36de8a7ce9c686bdffbebfa3ecbccf17d683a83221756f24ebe233d537e2501e3afd3c9b1731d9b4c60255d2ba373e8c1920a00105cb941ffe40f28b66001668bd61499d3c406b438a2112a05a77eba17c539a1ef0234ce3ac009b34094b6412c748dc337618ca4a159651c05818928528f6d029c560ce0ab29bf3b8b925a49c669bb2cce9b1bb2579cde9ab399a3b365f07ae1181165ae727874ac603b567e762c34d8c9b16a92bf168e6c53abea014f28f6fb46145255a579d7b9794275737458029b4f4749733f6b3d292c5dcbc2b1db7a6087f0b35eb0b2c2f9a6f40d03b26b354a4e2b2db41b5f088e7d37bc99dfb4fb2ca8f668b1a6cadfed85da47dbe3f62cc6f9b61ae2fe8ce7a5cf82718361b4157e6421778419e249d4fc9bddd9613be0c38ee72aa3db82b467254f3e8c15de407c7496a5096c38abae5332a6aa8040f7c08a097d339e970a41f24d20b379670297c579c3d61023a2ae99ca671a966f1890b7c0aa502c79c3b7853e8483ae8c3317b83f6bbad1503e5691bf737506e95cd57fa9788ec62bf98a63d10733c8542cec3a4999023f8fc0490aa87cee1ace245aec3ff66c5d79da74854a7abc5a1509da78a4036c02ea9c2a32ca9319812b8b44b898e3d9d3bdcee4389084dc791b48e0316d08c364a39483d043b49b76b4cf72996d5326c65f24f976ee4e82e5684d9c7dd161d9b095563092f4238dca8da891caf1fd0c00282d783289b50960ca0a2e3781f7b1d92adc8e4487cd4dc1f6a3824db908c47ea1e3d19a2fc3dbd0921d6bb681702a09f4d8614300a41d0b12156d6fc63dfb8d02fb0282b5c3a4e0d1c414efe84dc71c02934fc5d23da60c6aeea2205869073ddb85f2494d547b1b280421a49594edb2d6e40c9acd1dffab991318b82fb15b91b28d128fd5b6f348b02907eee33086b689cdef7ad371c41c5ddbc1d0bbb368629a03c5eccbb9a2dd1bd0845a52fb8798ffe8a1e32fc7337c659bd503c4c6b07facaad154336f308f18d6cbaa0c6d779491928c9ced189d977e3351966cd5b35ccf70430b70bccb8839cf7a1bd403d2749bac093a0c667fdb55900814b8a236b57b85a928c7276b3f38ed7a14e6bcfb8567268482cb3cb6056c0bb06b51ce6c798b41b9f74c43abb3c92af72f9ad8a0a518e1dbd49aae958075a4f2ce8e0d50696afe6a62416a07d4f7b7338551f7ad0cb853f6881fced0d789d82f526affaa2ebc8fc8b1d54fa52980b79285f252c553033dc72ef5f7db9ac9d573eefb5d075960f34f4f22ccbda0786130ffded055583cfe62eabf0e481cb8ea0ffe9eb2a758b10c4c3c76dc5e2f7a92461b0e6146bf196ba37ae8595891c89d65a8685954947117ab4f2dd5428aea1b722efb20f3f35e6a1f7c68b744d239797362d7fadc4826578dfa2f26d50f0046fc88d7e1fb94b26905d3c4c01212ef428ac455dad9a79f46bef261f36476f434a584c80d24d7cc3323fc07eff283184dd9f57ef5bd65249db63bd046b3f12dc7853f9343f1d0cda48e0220a535fcbaa1790a88ed9561bccb5828b13463aa2a8cbfab2d991d7a593d5582427eae91c1105aaf44563bdd2d8907794edc6231b6baa0e0fa6a4d636754c465bb6092bfef2bc9dcbf31571b75e3baf8eb29925b8d2f22741227104138722abb41b82c5890e0f35026701f8a7911bee158c9343d66fdca502d222308f96b4430d403e8730599b1e59466801eaf93a46211a5e39034843942bac2568f60d23d771978ffac2993d0fbc203e4502b0b4c54110155c35aa3c781760dffeb7c7ed3c39ffdc64c1054f87e7f98b52486095c064926f8226c7ac823e8e33e70276ecf011c27ed9bcf8f5b5d0425b460cf81055eaed3791535fa5d2c06bbf8e0829d1b0b3f54714bcc15101a609548c54ec9c6bcfb8992ccc2d0d8680ef4fa6b3ad80a00c74a52574e346f4017fd56a49dbf070b7ea0b80bec7b58b0fd86192ee35af44bd63bccbbee53bd8e939c0c758d88da31ac2b5d11c8babd0b1e82d29deb84db3aafc883db6bf6ca1dce5f28286325f382ca59b5f0d4759a68b8446190c595b06eb38c55dba6e2dd8cb2b771190ec110477cdd934c6597aa8bebfc3bd7b5206ab71cb85a1d3d95d9e3396710485d21ada763408c9117d06b9557d8b4d485d0d0b4240416d351093b49cf79caf0fafd8b796c94781df57b51ff0d9c46fd5dbacc1293fb0ffbd42a92c1dc3c8c488724fca4a3708a394d9db4f81e62231296381f54e79c1702cf74030f2d72f65d5a9496e0046b0e64ef813be92d9cec3ca57ea11ec9b961dec2deaebe1a417c4477be54eb21dde20bf6b0f8905d311207255b142c8c82fd645c12f19c8f1a2dbec304746954cd1bb64f334c3a96f4a05e5fe5b2a763335afcb41024ec02120e71a0640d997d559c71ab88b096da11af7073a30bf021089f4a415a631d755e36d9be393ff8c65c49c3860b1a2a31089f61e28996e0e704a75ffcb16c04d9181835f0173b3cb226b1cfc9cf4454f3944b8041942e23a33fdfb800072584abe85d6d65418457e64e94818929bb3e728d4ed3ad882a1f7b8d9d6bdbda34c8ef346cd09a66b7de7c02ff89dfce59696ca111fc10a5e1dd82a8d5eae85d3dfd05dd4a2eee099d2be814b7c710ff76c6b056d87ebe7cd93bca48c1ba4cb8d555b847d68edc9c15c573ce0ff66aa541a52b2464d7895776d9cbdb376b0b92088f20bb70ceb65fa8a96aebb2aa60d516142b9f039e36d8ae95de73e40713ef7800d890d9b3cf0d65654586b2fb5e62d4a3c62aba30a9a01c02ec529c041f90d237bc0aacbdf81b215f4b319a15d2ae1ffeabec0bbe33278cafce4ab00ce8d55713d53ae3d47eaf8e08189b4584833c9044b9b0038ca3f644f2411601f324ac71da7349a3e2a07e6d883e0f062bd4fc22e24400d1fae67b410185b38bffd66880395db99f34039c753ce0a4e99724a8ec15c5d4c395dbc1c9bf084fad6a1da0b412cfa2dd199cf9317cf54f2ece60a25633ce712a104d0bba71eda74a10e9e1a95de664885c5ed20bbba1721bc030663542131839f29980ba9e0842d4cb50e5a3e9be81b25c506b7c1648d18f19bf3f7e2d1b5997268cad76b7151654e93f13e2d1bc876a5d8459664e06443561cd71d6ff4b1ae544171908cbc95ca69ac29cb8e53e78c64fc7d0940f1b022711c58d86a630b49cdd3cc8a5911b86951df9fe27f1d43db97a52305c9db9bc9f8d4240313f50107fbc7ff235d4d250992eb9a3ecdeae931b80438c19e56336153e5503a618f1a33319c34ad84f8bce53c9c834a674f38f7335621fbf84c82615e8897d249c9d3c9531b3da9b1f499e6e174954422e3924097aa17d3a0a64fae742067773347a09b49879a2fd4c1acec3b56547927b5382f669fd0d073e9cf072a9ef72c759d3e679a6b347107a2d6e27125eeaa8a4630937ed9fcf71469f92cdba984e45a5f1acd94657f80e44b098f8f9a66d6571884a93ef84d53735e672bbed38b685c1a1563f3727cecb83a9f0d46ddbba865e447903e0d22fb33ac530c7837b1005956aceab9dd75635756ba503c057e73e619529d7790e6f0798a051c6259638acad2dac1f2d6683910a8cd1a7a547e3b4b4e1c28172f026f1f4b62a218bd63eeecfc3f85a7171427ddd1721f5201088f0f8829759969c362f16f4be3cf6e700bb9b0ccea4b0b9366121bb68a9cbc6527961cc62a2d209334e67c0639ff3e214cc9f77cd11d517a71fb4f36267877352319e6d5164c746245659852bd567ba07efd8b30a2472ac90d45d098dfb99619a2496e9e7ed609b713893c1f1aedd1696f4f4d7fc1f988c8f228f2d7be6e6e30a9371960311e2b05a8512b93e62c00a790981140c6e5c8cac310cc48e25f21d4d10be45c75190582ec7018358bd5f867a167f5d7b0da514a486e93121c5d12d770682cea2f41e85e6cc522ebbf02a8d39f76e82b7294defc33b23098a7d8a895119b42ec4d5d6d18e15d1b0536c6114b79e706454d6eda33e417cb43588361666417a4fdc55d8649c96d8048c18dedb57547f0b03babe6ac6bf30b316f115ddd84698b825f5b514f3229119feff7b3a50e6cc51cef506879eb5114ee72ac9a0718de1deb72dc5477cb329d797dd041df882eb6f5f4d9635dcb653819b55b057455c1735e8be10acdaa82674dfef4f619559ff688be25c06e1c187e77a7b4870fd635a3d9e9d4b52c9986275b8bbdd8557f47db3b20fdc062bee2bee65b72ac65292480c19747222c5d014302c9eddfc7fe40735c04c9544ab5e65adda3c5447349e299f3a6606f0a2ea9589e29fb0406ef39207e42c691415d5a05db3222fe1faaa99f8414257702421d916498a7d746fc9ee3c37b8a9ca443f788bb32a59f6b89b0096636470e245c1e5a5e235e6cd53faaafbca34ddd8260451908ac2da078cd6853c281c2acb8a3f09847cede72dc01f429d5847061e5e8a6700656eba4ed81e2236e80701f1c7ab5019ce8e987fd7fbdbbf5f37dc717c43ecbb1840eea483ab45542034033072cad77fe2b1b831320c132091f0f36a6a6258846e0b967cec9fa7ecc40700fe75b14637fba80cd330a189b5d8236e4d236ec05ae09e33abc82ba30dd69c56b8a973a27198c5e8c2b15481232f48815dca175d958febea6ebc05dc80c909fe0ab4eecb1b4fe5af7dc5cf39a04b253cfb674ee6deded0fd6a0e55aa9f9ff5479e70b8ccf7c485b6afe4985e19014f0a239d85cf6cfd706bd1a727015f1f58f7c098a53721d1b2b1f9befab76169ee10c6a14422128e71fa79b5c138b256596fed52f7e331b9982190d5513ed648f163b90b1078444a3ca837ca76f209a59a710def208f89897fc362150f099c4a766a408bdedeaac11a267e839b27a7afbad0ed1ca92043cd6676f6c3665d8aa2bcb9b3ea82187b38d155aec424c5dc0856c313f8e2d3f5cddd6eb5c544d09407a9ef6f3c69c43f688b4fb118230b03833f41f9d5d0609de1bd4d695ceaca201aa2da103e0239a10a88b7e3845c842e764b0dba77d2194e9f876219fa985d6a33dbe83f499b84f18dec1497dd9741281d0875b5fc85abd799d1652b38319bccec464f3b438d627823eae6300e2318b2a3c3b9b1503f6dadccf02923af1910f10c79f3350c7d3685f33f6651a69600becda4f7b148c9dbbdcbf3a2f29caa702b8ee9240ae49d4a4ae966b063b42b59f1fbee4bf82fad61cc3bfddc67a424dfad032a70b8bc565e86bef7576f3884cf9807b94726d935a27df89c15133a36dcf1ed171db8826bfe8fc0e5d9c0250dc9d92dd03a5ccda175de86249839a1886a2af03521a1d5326d47ce45e8b88b4175de74b4626ea243ea104a404e3282dc206c7703eddf1d86bfb780a085ec206a65a93574072338e1cd6e1ab380c6105bbb4143ec4977e3b0a2649493d99dd6305c6fb939fbb29937e2d69068da68196abdf6694220a6aaaee2e37fda5796788e191c11d8df9a8e48a18fbade252cc0ce62183304b60697f25351390febe0728b84d3bc138abd7b830472c6b62363ecc208c22fde5bbec7fd80a61779c4642825eb5d78ffa06b0c05d5c00038d715a20918f6adcc982d7b63e2a977d36c86fb887adc22e86233b47ac9f9a7e10c9b61bcb191adc89871291c9971d11f47418feb25c7a1e10f618e4909407c83177caced0ab7175f7b925b9fa9fc721ddb78befeb2d7cd8951e6d10677c44c1112c18fd3d634ab38130e3abffaa4a30a44572e000efc73b846cdc3e0b0092adec5ce5e18e1b814a6ed31d5f0af219ca6d91009472178fb59a4c3d78b31c2ed752e8a450b34c8a27bedcec671e4cc7bbf6b9bbbd628c62a8ad9ccb526efe05539143660c445187ea5c6b4ef8a43e7507cce14e4d40f244edfc913b17dcd5ddbdf7e4f41a63b7b03f787b08b0aed9e1f6dd21be89794dad7d329223d973f6031c999100e3a3ba27152d7bac710eeca112538b8f679f21bbf9f45961ed52e837bc1615a26dfde6953ea370646aa324f780cfe3ef97f346f26b382650b22ba2b8e3f2bc1da23338de9a3ed7fef251763dd93e324068a9686fd7499d904e9f2a9dc36e3e71214fc42301c346ed15511a7f2becb67e8e05f314e36e6943214edc82878ddd0eb148ea3d5fecb9d2b51700182b1cb5ad9f971316017599ed380412492dd6025bae501d95a293099bf7cb3fd26284132182892271418bcd73e600d9b51ae2593218a12d9003c4719860a53fba4e9877bb6f1167daf2a3ef5f4b37032726a0278bac8d16af5f480f9bbdfbc86d76a6b99b52954ac460e28a0a377aa85fa7b2b187e16436b7c83e5687b65329c442409e37f8b5b228b7b57c30ded8726a117ff6eb1338b0a6d3b74f76935645e39ce1a00cfa551664b9fd2b01ef96c2abab1ab3af3a477badb4b2e359af88b0eaa4eefae3c9ee3b04ac640eeda7e8ce4305044d03449c2ceb551966c7f0c68aba672c939cd35bf59223dc054961c33a9b4eaf72490ecfe7dfe63a200826795161077be325213869f81478e707ebed107943cf6a4d08b4cb6dbdf0b76da2174160939275d0d15e7097ea8cc97c490cb131d27a6fcfa74c1f550c60f26595c84f31a4cde2f86b51c771295521ba54f16576b6170ffd9ea21ea261c97381f6de4ad6f2b70b854c2cf8337bb11b701bd26507a77625564a1703778da780912dbf907b8337bf2c9399a3a27dee90e38f1603c95860a08d2a954397c7d45ab0077e3e85f22f85e23cdf8fc93ba2aacf892c2cc9f183ee292316efe9dc0e0174d2dc218cf78a180d6169836943bfec5d1338d765212b268c182de0010f4cfbb9eadcf7edada0593e218bc3f8be0fd1f3cefc9ecb9e79a7a55f96b0f323fc393205c9f9ede2169a686c416cddbd737c944b080eee505ff808ccd7253b441c572e04e33c50e65cfeae1c391c854b2bb0e5ce328de47cd9c9c1e2bf451d15bd0c79ccac196505d600fa8ba20ba1b238fdf64ce877b9f243d5208392547c1c1a2a7725e53140c43d5e6f6083857c2e5005fd0a75658952d478788c403ece9072beb1f8400ed0b39ef4b8c8da0ebc6d75e025f9606b3b142c6f17cd7894499e65e78baa4016234974ee7b2f16b54def9a4979c6bea6bb0a2370b18b92e9052d04e92ea6353dcd5a3f3e4eb924514bbded58014a6d1b727df10092c1907c4ad97e294badc8dadfb60e8c2b06a4d1e3751dfaf72017f073eb714f80aae441266f03acd2a6aa05474ff37c94ca02b0ef1a63d8f57a2b6ddd414c41feb5f9d2fb2ad656235227e7bbc29c6f267c0396da46f6dccf7db4032c29bd74d047b4abe299ab1a0b7c44bc0eee3f2d40881213b2bde98342ef6e147b41a0898a32a3f9738d9759ee716f30032c2a31daf94bc5773212a3d3d3908bd38fa1ca93346efa420a371d748a77dc5a7696a024c9b196e77de98d3d4cb729f52e6ce30c5a84ec4bb79b6f6a1a6bb86976473c6ecb2c8a7194738b3d680f35f1df121cab7e4626e7beecc30a6dc7df0fb5f405ae1e84a83b176fcecd6efe287b6f06a35aafd3d034ebd6d27c6ff7287bac43cc40e8f7385d489f770a9be43f83b92172510087ddee5f28ca78f447221cb5e709d3a27e610399a50ee48d0048ec3567b5ce9e3ff4d2d4e749052ffda5c206760180054add292cd10f82ed3c31448c6078662f694cccf5e5710cca9d32d56a1376eb6cfa50fa2206d4f4953c19b066cb5478aa56e68065132a129422aff5bea751fde2573ac425cf43116e7f8d1745c4ba8b6e18254590f0b751ac1e1ef070946504a67e45a0d6686f674362fc4a29e4ade4c49bb96d69dfe846358fa1a0d4f51711918c3478209c35530ac86d1d9c668bd96bb7ee9dba608093439fc49232b68cbedac27a4807e8accabdeff8f208381a18b32e884386db9911025716fa8af5f29d63cdc1154c78ffc7318690137b9f1697f85b6ba236afe2c79b009bca366bc7ee982518da40d87e1ea3b06b9e2083182032344571df6a81be7a593c2983f9bf1c7399300feb87f3d048a2d344b23dd70371ee7767c51e325f0957ad3734844b5d433d895ebdbafec1a240f4bec798db881a0bfdcfe53ab387d93d5d0fb33eafb8dc0b45515ed77a6d94a6529c425725abc56b9843437023de11b6bfda65262accd698a4e41403050a590453ba1a002f713b6c08ef59ce67261801d7ccaed6ad2bb7d6246b896bdc999ca28e16760a1f579db92a82da04ce2de19480f5beadba85dacf6b9e764b17f03946e51928e26d0ba159c37476d6aa01e4216c125c546ee38797c9b17b19908a30ecf3d2a18ea755662afd4f8a85d3cfd61f99ee6456d94acd286d876bc85d9b54ca1f526beaa7a5a518f9096ccbecd29f3f3ca72326e18276b563df1c12a2f3da9ff02bd8c6a85a3a6ba5d9020182bdffdb8f5762a724b108fdfbc8f20d7e966cfc79e11faff8dc0dfcc23c5f780dbe68b6b70207dc83fabb78dc85cfecede459cc2e26b42b1874441bddd29c872c919602a4ce4ec188006477ce9bf0c5ab14d5035aed0fc024750163f6a095a986e9c3c785828c2c7861a473fd31fc8b06cdd125552bfae272b3dfd62cbe0078bc8fb3644d301bf1d68622a612e38c27e1f0f65181c639e24cf59c61fde1b9b687ee56379816a4ea1a0636735cee1657abe67e2cd16d4f0879e94a55764de776cd599aa4dd433ce18f4c1220816428262ab5799b118182bad5d384ce84e052a7666073fa6f1585b7b30fb540e5693893ce3f9999f345f7b898292190805c57f3b3cf11c6431cf4423925c260d417b2e9b2305137c67670490b5555086c85e856043f5defd7f202e08426df32d2571ff87a1ff984a717cf90371760fb0dc48afb38866b95c36dc988017d67a8c6a9c1cb130ea4d6bfd1813d44a60e133f0fbbfe4ed52754997fc201e5acd3034db32e4cab2bf91e6ced84e52add0891577b4c07a65361fa53c16c74a89c8e0922b6365c261d9c73177418853a9dd3b758911304f14fe032345a11d5fb2c1a08d4bf399971be214b32828a3579c7d48931e5fdec669918bea029d37ea59c21d5fecdc9787f5795efaa61349ef2ccda5651b30a8aee730717aa8e76cb27f80cb48c495086dc877f9136b1ed6f2fd7753700f7cdaaa920e4f229f78c440452411f8b5ace37cd0e88d254bf1c8e0b5173bdaf669a3fa46b6816fc28319be04d2333621c6a8edd15977aadf4dad4d7824966c372a3301ab4c981bd509997ab29f8fa47a4a6a133258cc3b8c137c261cc92e027c70b7a95bb129fb780c5d530cfec22b0b4722b8c8416be23c096b6b7a88a697687e38cc08719f5c6b352202f268e9e15d6920ccf961acedc4c749271654886fbb924e955828b8fb1d39d0673609f1037b12b9bdd45437a8a75fcfbad843575416c09d4ba7f3858ae856f618029fe134983e9d31e6151857082cb49ba8524631574cd12db1a02bf267dca1e7d5a68c1faf3904d925070014c465eecbb5f55c0e13cb7713e96cf6f63064f524d7e966f0c6c9cc13bcaa0038d054829d4d035f856f41628092cde33aff7f37b3d8edb2563013cd506043444997c982444384275dbed93abcfba072feb2d6fa2f8f897be723a65dc9c9c92f7da13c0d3a8a5a99d549d31afd1f55ad284050570a0331f05a33a838c6ac70f22448ea25cb53fffa6d916e75f261c4987a9427d9761c513a8f13919d8e7151c6b3cc7b2b2c13c7419904a9b472424412aa370016674c5ba8c125d06d1e81c45da6fbd44c29c202e400c8baedcabe0f43c304cb879771114e5089a1602d6611c628636e6a976e9bdc51e18933dda1cd27be64baaefd92d0bb290d87a5887ca26386ec8a37d12679568886d65ac5789acf41154c4ed792bfcb33388df4b46c1d96b9c92380bafe834a2d42046e194a318be6e433d6ececf93f81e91400a7aa4780e2c7d0b570bb973c964691e2f8bc6dbf136af28f4e2abd576ec5766f9e585ccdb56dd00c3afd9c797a3e478d3e38f44839828bd9f9238695b3907f5b9614d433655c7344acd225fd46f27058ab479e9b12bf1b79c875b1d6468ce07eda46588f342315c761b79a3cecb2e62cec39e90ebe2cc2dd95f816a349c7e41f16832f3b17154e903abe20270f75ca10d869b07377c291e1d887ce9c2e87533aa3902fe16cae71d8dae43f42f27de046e14b6d7f7c75b2902e863a7494ceebc5571411e7f1616d73c22defdf76eb8cce8e475da8c4bb49333c185e0398e459637ebcb808129d01174a5b977788d92c70014e14f113b41b6c4a39f19d75a838eae3cc6aaa2b0e680d51823a125a425040de2e97803b67d201c616bf0306d9f1cd865c5273fae39b9fba493b8c72c88f4fc0676f0d274d7bba756ba6f7dd184ecee1a44d8c2519597dce69b9ccffba09ffcd34dd66d0efd6c36f9b2e3c70e3ba4357caf89c852fbca7df68d0afd5cd254c0542872bae9bc66d609c1468a527351f4283de4556d05cccde67058b91a65c82b1a86ed759b268ac4ba1d086a39bef90a946ee9847e3b801631ef34ca54e85dd9fcde07f9ed62dbc2fc33c349aa52136981463fa83871edda6b1d7a02683104736f0bc8b14e16cd33064a9b7180849f2d76ecc0f74195512a6dee3e11a08c9c7becff8ff0ebac55c4996d5eb3d8f854ebdcf89b327fab104585b8169ad84603e287e7b76961d6fb4ee560e9fca1ab774f068a941b0f7f835ccbd5a9f0bde6a333b3bdce743f8c50544d3b67786b919eaf784986f309c7ac10ca07aefcb849f5db45c8a28148560db793425aedcbe1cbfa5f4761e751c325b87e7cdf648a8dfa5849160f52b7a8e7f24c923d1fc0498a4f0767756f6a0cfe72f7b7db6e8a1b8644db94d965d4243425f6b1f8a3d0265330dfc98ffad83b390371722b7d518043329fc04049838ec2db88abe5e0cf5fab1f50e2fe5fd49ab4e1c723a361bc87885fdc527851e4d4c9f4db4bc9e70265b6e2c5507c2a316b4ff62e68d294f23e185702f04888eabfc415ab584fbed66302d5bbf99b7b5e80aeccfde660fb6a651c286431602643b4055cdf0420c1d84b76d2199dc3419bd8a46eb25803820b0d89b5ca297cfffee4ae4ebbfc4e2947b22154fb1fa74b3f7b6f9d69b8c3cc127228ec4af8fa60d159f62055fb86a4c6b82e3c6e9c41d24af36e03e55d137e000449a0712fc4bac711120a3dbc113bcc596ee4163c9eed52a5bcf807e2badef9a37cd7f63b7466c5a45d60a1c274e785d7de05ae6d0f95d619ec0d4823bef4d5274644bc74220dbd645334ce4eb730089004d0ac1df5ed96f0fdacd4a9205cb406a091d657510cd164961ec294c4d34095eb56e68d67c66bcb68e5362305e16dfec111185d15ffcc1006aeeec2e5769ba2a78ae3d46a89f4aea05b37c0a946ebeb99f87caa28be9d2eaaf252d1a7fee1a52ae580d7900e606a8e6bcb431e2a7e56e0750590097e08927719ac3b1787f54074ce8d0b4aa0c12ffe6f5b0736c157f7ba4211b2d089ce444ea0738dd3d8bcda5fded1c5d024bd533fe95651c3f44149a979c49512f4329104cd52b4070d19f97366f3bef761e7f64725003461e6ce0cfa10878e80f1e1c835a659e7c0d7d37c3c9b3be3d8fae586c7c74d6f4eb68ad64e179ed5cbf10751d5ca450dad14b5b7ce42b2af53e19f27dff5e8e1f9088bcbeb5ae74691d5518a988912c600488c96965eca062274b04db6016edebbf3f38ab098829578e44bcf2b637e31621b5623e8e2a09b29ed0a88ac06da80fae1286259f78eec78b97f74db59c61f7ac58e347d5e89c9e0f55308acf63d690e4959ebcd62f3b9e1fc656bf1e4620a1fb4c4e55b0f416dfdf98e00cdc5411847ed67b3c901b84df1ed69ad8bb6bc4e489ddd515e88364ff3d043455f2e842c4ee44ed639f49205e829fae62dcc6afd8897ef71638abaa5d61bfc99eb7e47a5a742c7837334dd0c04ec2f7b72493973fcc15f41737bb522831c1e4191fff2639e92106c827db2cb7ed8e09aa76acd238cb75e24ee6075f0f69048bfb223b35c7414f1fb6f6eaaeaffdcc492dcb9a5e81a63a30d46f538b4c1ec98f737711947fc75d763d7968422386940b0fcb16a65bb58e1986b7466019bf8ae56876021a80229334321a648d208328396444eec973eb9c5ee9e2c0ffeea3a6190a0845980454fba57948d0e842d7a4d62598e90ea287ca8e3a7ba69d3c008a4ac3162c8da583f6376d94615e8bce91469dc0040c6151d8a92f9ace3358c4bafe90b21456c7ff2b8610f28f283b0b62cd1b4bbd8b19f401e5deb99b22ae3bd3e209256653e6c0a75b85e7aee338dc4aaacb6dc505fa278827ccfca7553dce913c9181d72cf8b6b640a953ad4420f7519b301ab3a621a3a49e960509d2ebf99868c4184d5be7fafbf5c62688ce629eea263f86ec0a7320709585a878b8a2c77353714c33816ce02759e2a0cb68faf06dccd89b3db244a88a9868ff9d68d3581a13081a850d6d118e345c74a1b689a31511102598f9e936929f4983e45800c54e4008cf95cebb45f3b7959da87e1bc2e4f56060dba4ab8fbcd85f90b34e932ef88e74e2230686d2d83d1c3810067fae0f62cb6c36443ad2dd0376299cd551dba3628b5c5b5a71de65978a5ed3b228729553ce33230f371dcf715b8ed56d648d693328e50772117d763f9c568d39c49b8ec56b5aba610034601ce1011cdc3078c1190523840c4ae90707ee08937257101badbe6bac6fff67d6a590f88e675c5617ee09d955f361ba0c77f3450a83739d41d8986592b1fe64fdd9e17c214c27160bcad5b1360742f6c16e6a4e1f45c4ff305d2c427e54d8acd95f3e831425e2be26ceb7aa458d23cabe9b58985a3d4a15e7e71753a61b65f570aba96ea25c96e4029325625202e97b2c0ffa26046c3a798d87f84a2cd6d88757ca220cbaa38a78fbde98cbfcf4125a5a6a2157b89fd62d8a98d954063b12e48f8d446b802f886590ee5a8d2a28665ce0dd275904ff2c90ba7abc36aad07e098a619bf300281f72f716061005169b5091a0738901304d7753a09b24036fc0a03fd0ad7758c75382bcaefbba73745c34c3100f4700390a3d3b3a5c869522c6417f072ef55ccb23478801060e4e6b5c5f3b099d9e5395a82f0493289cfd6e2080767df217696bb84aa990013614e8869da0be77e02c075efd6ac9ea1910805fe8c1f47c63561591dd7b27fe3437ae569dd206754e474f71017f7d3757154480d51d081a6c55eb8ae4159ca1113d59ebbab9f1620bd8c26a3c599ffa8ace8596b0d825e09e02a9a697dc49682b15ff9f338714e706b63bd0fef3cd83326809484f9f9bb7abbf135b99ee6227c28b17f5f8a305bd0d10ec90e61e94f5ee6a3583cea1ab12d0e3c20add49a48218bfc6f33b89bac79c1b5f05a65a26a8edd323e628df7e4f1386444b18a078b15cc19f4b0cfe77cf49acb3e14f4ef165fa90230ad249afc186c78d01b8467c9e1f99e9008cdc41e491dd4c3b694d2c42227f135499d691eec8ed95476b7bfedc313aa0848499d6e36e1d56d2836bb4986b2e65b8f3f0d67cf67458e6bbd12ad03d70ad225e60f3523cb157a079a39782dbdc710c2c6cece32019d5987226aa3a1a1041c5241c78b434bbfea0767f8825c81d3faf94648ea6c297aac1023602b365a2de6dfab412563c095bc5b5fcf83c3e9a29d8968d2885ef4d7c9fd1fe76c58b82239ef3f472d456dd178f22014f89cb90d5f70dff0aaa5cc2867c618bff04d08f9e3edecf38191eb1ed33c85ce1bfe420b63ebfa7628ba7aaea28df2710e7557f6847aba2d4ff373249c57d3e3ebda88d129374772c167787d28402806d0c232b0a65f30088da66c1ce137d07b285ec177383579c31de41db83e95e3c181653c3523f7340a04a4f6dbf2bc3ce31e98fb1e3033af9fdf77e85f29616046cf3cafe64df241e6c1a1f9b9d0189732e5409835dd77c5be30e6404909a27eb87f95e91d72df9f79842dd471f460bb72836a0ff8410055df7eaf1ba8b46e210387d04204b11a096809007a03d0c9afb3da6019033fbffce87ab979b5957bd24f1a380497cfa2d10afd0890d2a69e826107e718d5e70e10a3a36d9da9e278553e300e6a49bb61294b84b86403d112e4673a86fe4c5690d0c8f6ae69f48746d8e96b329b3aaddf7e17fee00078c7250fae3eb07c50fc87d082739f502826b87f2cbf91e320e41d65b868cdc5eff11f9fbba482d7f19a8fdde23f67f5c37e51a1137ccf9960499cd16baa9ad84df30296a9205a7ead3964f8c90cfb0b61aa494251e6f70194eaf02d56479a7293f98d09ce76595502e3d1355fb15e8600c531139918ee8308d1d667c1005aed95e12ea86e632c4729d108cec3c00d75846e2b1fbde0b9c4a65d480625197b1b28d4fef0fe2c43ec2a7dbe1f5605f029fd47c0190d47f879159a3ac4b75118711d63f86da353e64939a5396af4a7adba6ce1fd02a89062421a2eae08dc39f4e377bc7aa4a1c26bbd10888bae7584c7bdd740a9d240338c920e0ace6a8bed5b064f0d3e40938b1ef97d7ef59337c0a274e38a75daab9fe1e2769fc6dff14606e0cf0179bfbaba9d159e9d5f20e46704325ff4ff665d287f961acbf778f912295029cf612c44794bb1bb7233261ef5c8f3262ce373632ed84c345021e42e94102869bd5fb16c1a950c04f62969eb4da7e0675e5e46d1667e3d496408973ec6484b92ae027c102661284e499318dc891b8a6fc1f11add9ae13435380edb1d7b4ff4937b3bca80d152c3b2887efc9a126f33dc8dee86f30e00d8702f635928ae1deb295da9eb99eb5adec9596b587f6375d923a7154ece3f7efd41f3c52da98424056c66d37f1f67381927debbbda275611646969a10821524b78813714a5abf3c472627612b3fa4f205a02dddc648b3a2c95e18ae15b7911833bb90434ad61c932683424d60383b9ae89edfa56606aba6ce06a265c1e080ca95cd1d2f67fa11ad7ce2f55f101044739c8c906853a854cc7d5aaffd6bdffbecec1277fd0e8016b54d686dcb3965ca6b7330cb813bc839a88f47d04ffe658af07504c57e23b07006e8faabccac55782d3a09c7801aa7fa6055ce062a2ce94d52d450119f05b4416f4e0ba0dacea86591fbce4bf2284fbca5a29a1cb92c1ad4512ab6cb3707335fdff785ca940653d4640a1fbe0bea09bb806cd9c344034147cc2ec74ff0ac14d59c040afc868d5bf7b4e16e0f4e0149cb5a307147548ea89ca36a2e3d9f215add5382e03970ed6f5f5d1b09cea0307feecd6a6cd1946cb01bd8462d2099d9c5f12cb698591ebeff821adc7a8c2180dac003e33cbeaea046e347ff569ffbd7691f795b8ab8b3ab5a472f7c9e8c66813e5e6d0a2a13306bb17d9be396318ac1a71f199040b7d1a94dd700ecf6d55f8db608d186fd2dbe2759d30574c4b09fa70804fe6a5adf92aa9d8403bf57abed2685ddc92d723264e729ad8f4fb0ea8ca781fb2ffdaebf252108e9d7cc33055f34cb21d5b509550a40287632c536b583001df6dd52fafd8cf08ea3af643ba2194c7643018af00bc131db5b022f671f9feafb8ec25e964dc614d71be7d8a22231311449810fd21ad3442785b637accfd919d1dbc34f30cd7ac2741650bef1ecec50ca80d10cd40f77d50b66262cb7c327a53791c80f50121c128eb07e522cc6c8b5f1e723f37783cccb55ed32041c98f7274b942b0837c96da3eb799789342dceb08b555dea8777ea178c4379424af429e1e117f71b45a501b1c94cabd292258f9490667503844e0d85e79b26ffd08e72a8f6381169d8c45f0d20ee29cdadda98d9855acdbdc877d22952bc46139348d833ec89deff53fc83fafcbb7990adc7e53ac5efabf1f819caf9c13821b6637dd816e2f6aa69723dcf5fdce86e4f40824baf2981592e3678d5c630d96f163f3ab618774cf454fffb59790dc6812d2c42b3929d5dd1e56422afbe2b09f3248c7bbc85dd6276735b21ebc5f3e2b0327fe5d82a186665403518a8d476c23401f1b0e75087753245001a9b176e72060db600d7fe28db386a08648a6e995265c503d74e304a4c2d9ebf8fcdca411eb5a9785cac6858e498cda66a6a304df247c88f482475f3a6568a3ff5e4a66405862c0813c22f3f49b4e23d773200ab85005f00711402093a4041bb5f6bd1","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
