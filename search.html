<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"85dd694fb4cdcd283d126c5c36f3c9ff71e6c5148352fd91cc8cdc8136afa8b228663819fbb17a6d5996ac0717020e6f7bc0dd3ff4abe0c85f719ed596a00c1052ca016eb40281a9ff046637dca905cd93778f01a92ea209e4cca72cea937822ced1e22f2fdd1a72abd063f4f0670d556fca7da31b1c0af3fabf3f16b34e061cea3da693317cdeb8a55b5943b830e3d1e17c31f78e694c1228b3f184634055cffffff3e26fe8af9059371fa38de18b9895a8a6a1e3550142afb5f0bcff345b94b99661bbb766381f2c4eff098597d3026f93cce3d36782e4e5a51ef6225628ca21235882bf8b3db36bb501505fe79190d398b30cc8b5c57c3be8b6b5c235fd4189a06f5ed04456a1e55459041851a43ba7bee2e480c118c599e3001b37f798ac7837d21b77a173839f1272fd9ffd7d58aa8f2398a24abf5ce16161bc17f30533cce04c167318d842b8c0430fe16bb842b48e6a60a970dff4c7cf3e05f14758ae50bb852a32f71592a193ed961353ef1cc4b7ec03140d079aff87212161cf944a109ba1f1d922b58ce9b58b293851d89d71b95b0d36c788c81c54611a372408b13f1ccb020267c2e44b3727e6fdf2c02065b7492e3211060dd01fc6f4b735032e67631b22df212c4e1e8c7f6e215e0382ebed744e3eb5942f07de3afbc2700ab8a6fe448380baa39c17647c2ff5e983e1b6b5a11d7fd249bd96f4fb0e92720df230a2ece5ba906bff0566c67a29884dcaf158742ceff99796cd434c99ec8b24f35ffe48e03614803ee0e6a9d6efe460e0f3e6755506176d0febcc1ae4a80b3b5f152bac2c3a80aa78a26776a18c7ea9fa02be656a90644face42b863a89d3f215502c2398e8d68a04da4bf9a38c00a6683fc6cf0bbb713d6f42337e727833a35c9798cf761b29fe1d23dd03a104ecdc633f30cbbac17400b13a71966f6c7b66ad9211a1b36d7b55d8e52c9dcc7f4c484c28f7baad76c32e18d2a61c5c9c3791dd6ca477b10d06fc57ea52de1b6794995bfdc9cf837f2764b57d3d170016aef04a79da258a52435e94f09c9979cca668539f8388c8f9fb96e81e8e8da58667005aad889ea98ce862e8184e9cd4e5ce646619f0bbbaecfc2b12d15516ff5f20cbdb0b378f03b17701f5892f1af55c3e4add3a88fb7d00a518513243b795d68cbe7a276863f1cdee945dbb53d00f4ce3758c6cb8527fbec1624e927698aef797235d34efe27c7bfb75f2b82a494ab9fce98593ac66032648b5ad12c48aec2637cf7f15031df57b4436f0f9405655377d9d249e1b685db154bcd0746f7b94c02c20632b5de30a3ac0644e9a4289407f23598369e74f3959a337be01a7bac6bf506a1b13589131b6aac52cdf3ba1ab8c1dce525c5f710cff2d62248fef39e41e258812596966f976e53835e2e0ceb62c7c6b56f0be83f1b181da539c9c403b467762f199de2437e99eca75b3544f2f73054210382311a48636e2a3c434e8e93f105003890c87f9a35c2753d95439f885d9ea14edb83ea284449dd7a279a5fa1aee432070376a7eeecea37c86ce84b8c7add51d55a577eea64597926a01c904f68faacfb0216765afba0ff4dce96167f723568e82460522852e86125b6a5f1d645b86b2d6dce86928ded12f164dda8604a5a52ed589cdabc10766ed01bde6cbe91f69d6948d34cfd16bbb7ffc29054c78625dec719a9c4c55a9229ddb774c9c5efcb0be7a20b155526540d3a8a8287c85ea40c42fe0f9c416b6f81f4eb3e6920d6d286fb0d47b552b061e76358ca7de532283a55d6092701be2b28251e076d31a333ec039db3d7362a0a5bf5071c5b6300229b7a0da06efe9087769aeddee52e53a2568fe51a42fe4ec7af06f4db57c03ac54fbc388a59568b09bfe59c26db821e39a22c240d7f355152a77cfa8f6ff4f13927522e2c16ddb87f5fbd443f7a37110bd8203ccea299b4c0cd4b595899fa9894a8b92300594569ac786338a0a8b81b79fccd382a1af7201c7568e41c961889945912c09f300fbfa814a5172053af8c5613dfe8d6c129840c5934dd978d9aa8c5571571e8fc60ae1a44e5dd919a98c0d96939e4188d70b62269135475fc21570b5475c2645ed50b1455f177e1156304cd36b8490f3fb9ae818464a03501bc67d857706d5b54131ccaf74a746501c3554fb31a8743463c62d014a75da0f930743f10d0ba18d1ff65541a23da244181b2a0f19fe8c1580be9b7d6c82f9529615cc01ee081bbf78b01ffa8b6c4b6ac3eac5c845c0a9c9736f10976802cc70bb9380cd89ee2b4571e4cd1fce48a13a35f192904c7ade5c9e61a035864c85c8e932693c8ff585ff5cb0b28579fe95505a66e3458effa8d3deedc1ce0e1b3622033246963c49d9bb0df6f40d6a111a2c07ae9268c6e4b3d301eb8f5db4067c9b5966935c879a15c45e28631d2ffbbd0247866172becd8843fa791273b1b8a6dfd2eb83665cba29e8a43241e26e4795efdb9a1d0608f0b332b100356bfb91972ef320b890092c5e4624f6a11f2b4d5e9c3d311d6914c5c6e23b6122e2e9b38699e05ae4abcdf0756a3b04bfc126d9133f7d5d8ada5bf8d49b62c546be81c1dd8a77241e2bb1d6076243bbf09e3bc03a10025665b43f251595c8559ee6c65244d42ab50e84383f29913b3b8c14841406fa7df13f9bcaba907587f4222a4f8de2852b9e64906baae86ba768808aca8b3db36a05034fcf28ee51f1d07f350c09b3222231b0e189d086ac40f91d50629311b9764a2cc9b69ff827e23677784642c632844766b98d2e7f22d056b24efc9efcb720bfc780678f3ab62b910a21d6ac73cbda7d7a5b871aa9291d957b1b30a504b06e761111502c10bf67069040f3e06242e81a5f6e66233ee8162a741b6991d436a66f35d1e688e1eb7f19d7b1b4e1cd1ef5ce4ec4849bd251b674fe4c2aa0e4e0079a9dcfc7dea87dee4439548b6e3acb375d8e83b7f617bd9f02d25859dc8ae701dcbf566e6d5c946840d1dd15fd33ed8d1a534825adf249236dd1fe8e1982ff3a555b59615c325879fb7da0250efcf56a00d81f587085dd0d61d673f945a1f21cad3066340eaaaf3d62d570948bd0850df59510332bcfd574bc3b11e3aaf9fb8b6be6af90288690e8057df21642c4a4f04b227d7d5d497218c49a87ccb45a60a1f689408cac8a2a9ebd4036268e50529a1afab38c7cfce157c790946d0bfbd5c8d8b5639cba0bc08111071cfbff87bbb329152363ddf41ab395b7584deaa8d5f2413fd62a75e67a6deaeeb9efd390f9a600c711ee0aa09179d59b9319bdac7eee0399d5885628f4e650e3fb0a00ea24260c169d79fdca0c6d6ba3d7c94552506709b9eec6ba7b4bfbc3487182be6d95ff6c7618200ced9da5f4773f51ab5b55f438821160b10b595ae93f6822b5dfe777c3570e93a98934725fb0808649d71be60c7a054eed60f18b620da73bea28eaca090aaca8293c03d4a3053e17a34a3c1da3f60ffaa296b9d487b5587fff6dd33e2d697a5e5315be3a6e584c3cff9ea7182dcfe0a68d78c55761749181431a8ec17a713d6935bf44be6e30625d7ac6dac5726c426ad375cddeb4e04d9c310d4505961c03c35ee817acb0641bdf602a957673541c189ace9d4ac12fb990f46c41ac76188466725454f9a4a37c4b6143fb34f117c23368279f83e8b32854a581cb7c992a30667b3a50e3487f7c9c7d0b32a4c13b9d061141aa0dbbc317b4c6ddf3e58b12c1fc9006bc2be82c4b9e1cfc137837091ccae594071ad32ddbb458837f5cc0533e9504206346f761d0ab8a432e920ba9cd801d4d7273c6a607f2c367e379437cce29a124efbecd3b0ae5b39a02a20eded820cb35d17b8795cf13b0600f0aa39764aae17d2a679340bd245dded97152cc21794a5656a0a01032335e32c931bfe4a0dcabc497aedc375d269faa273d9e5408ee3b477aff86713a9bd6c48773d0e76b3f5bd963d628338431fe05c7fff7dc2e1263bfcf46c59dab223a28c50b904632ba5f92c8f01570da074d88332d78afc67779dc171e8316b752d7919f06f9f81f2a20c5db3a172b46ad2ff9ca8682e92faca089a1350dab86afb16e887e3ce27e4458d3713f839215979f4a2407d5ec04f765dc2d0213af8ac5609957b2f300da275343bf8316be41bc10585a7ef9eb5efc429aa1f70d7175d78e340725345374795b14ffcdab97282f683acdedaa95d02c14a112b64d60e92f8e37c0eb4a1ae78524349a177dd16c0e207f95d84bbe8abd9d2188a3c5c3f48633cad864b710e55593d58af9d353642d5476e39641d425e06b79d3c9a1ad9afe63a90023d3baa89d8a33f5d78839b9503f54e55eb02b0dc6d67415a5ab806a05b41254fbef7fae1a52ec9cf4a55855f7fa9bae081ebafb80f23be711c0f92d710320ba5b4324d9c99c6b946767b091217f296bedc9309bdfad40d0d3d982e19d0daaf2518df15ddc0736a058ffdcac71ebd13016dcaf47cb8bb3b07ec9a47b4ea201c498f4812fbc89355dc638c09c12f337099586ddd8b2024cc7739428acfdd609f90581170e9ff416088a0188955a90193b0d8fe25cb5d7cb593615ab93d0446bfccbf97b7116ef79c08bd5b3ea40bfa5da04c38487629f42271464861189f430e4b56b577ab202e40a07842c3b4a1d7a60e4f3fe1c900db0076b5a1a670e585caf41695615b4211dd7406f8415f12ed23b008681bf29ab75dd197bd2a9f0a0441a8629ab2aa47baedefa0b9fdc709f9b2e5afbebf059ecb7ca5c2d8f8e519822a2dfb7d6470e5e383f256750d8dc3cb6e38682ae7fee0145c16e40673351d2fb63236a5d1d5447c232dd0c7e2456cf4a5daa14349adcb96f47bfaa5ff213360d28be4ad2ec0a813512d71b2fc7c92e71391e8be7c639a32619d0f375af51b3f67cc5a4be9bf8593d13dbe2270d3e66ea29371b95399d5d6aed7ca79dec47ef2ce00a3574a06b7095c14cac143b28b1db00c1ca5c320283d9d8f57362ded764f79fc7140e0200e798228a7ddcd6a4d7d93b5f8d2c84d3e2a49ba5e5fdcdbafa9e06b1ffe74481024f5d14c544558b6bd626f8b26f42d3f8d4af617f7b5051ee73d5b1ad94d75a3276c7a2cc5af84445442f4e29bd7a0593a9184a66ba9ce5b1ce0cfaf826a642c19e7a5f1e5573f73a68f6db87b7f9d96ac97901ddea85888f96fe3d78b16bde3c740d7f4eec61d1f1b81b4c5f0668798bca776f590fac36859cbae386a5a82646d67ecb3dd1382aed5143f36163b9e4192e22b42cc605be2a8d1381713615a70b0b9665b40ab1db7a3570331272725f8019c44930c3e2100f4e76070c03b013e2a69ec1bdb062830ef25000481f4b2afc3897e6cedade8f12bbfb61fb153cba8a909918bef997933766ee0a348c84ff0211a3cc9274dbb5a722e6ccda9166f31592a0d7ebda0212ab91598acbe9fb791fbf52760d3fc048778c1eca2078b58f7ce4c1cb0534ea00b906eba2a854f6209f653b4ec10bb1fb0f7ed4246b39fa2baa6a52648821f77cb5f9eb103902859c79243e208fbfc20e7f53165fb2f3d3161c5d743c6223237a40c2c3bb9de21058827fff408f6a35231997c36492d1f9217281e8c9cdeff54f0d192b4609e01a58b1dbe03b9c9c28d9d502f22bb6dccb9f4b5f1e7933ecdb07fc8c8a2b3e75c3719e47ddaa97835ccff2823d264dceaeb96c19805a10b8ede54dc51370e5dffb890fd77d1765d15f844505eaf496c090ba932509f9228962c40d869795ba695005e97650fa179eea14e8bc0046da6e8b270233d50c6be5b6c6c46eb68428473282c2c11b02f817eb9388ec41717827649166ac515d310004b7f4f4e50288d47cf9478aa2d11eeeac17df2e909fc95c5230723ad4b666976e50abfb2c591ca51775bb3e589bd7c765fde002adf3617522fadffcc4d9b0fe570d6f1c66b9c079e0036b67ad921a6c71b93b814c99fedbfe9840aae1ad9070c0ec497d121a892a11e2d3cc2338a553a6f4912fe11df67a95d02c9f255ebc7e07429fc9c3f657f6a08e209e78ea0c41de8399ff4b51d2880bdaa9d9f8d45ba7f728a3783564422ed069066149d33404b2bc4013c10cc007930ead5bdeaeaba72a76abef38f81316094c4c55135837d19465ac73e8c7e2c02b63952d1560e90145ee417412f53008568e49c39c308a14843a57bb597c61f8e4e8fe609e4f5880b6e442aab39637a5adc8463b79ec8b7e785b57877500e835b8af097b29d3e56e7248dad8f5393d95d2571320d91196acdb3f28ed377417c4a81b9ed8d3392308c2e27b1488fd30edea1eb21b20b606509e2792760f274631900a2d8a12967db9b4dd5d671cc5368b8adf4ac91f090955391db023fa2ad5d33d90f0595e3d64eafa0bbf3ae10728e7493ddf0d86e5d9bb91400169fab62e6f919317136d7c71bd0de8c27d133489341f85ce2673bcbd1c7993776d126f2e01c147cf68ec4ab955be25a6057aa29e1ecfe0333744244ffe6a95b7d9af5b03b031fa74216dc1c7bb2983a564d0ba6326eef3fdf3c007ee81381d851ff9d9e5cd2c372589d5c715e1536e965a99cb3b549af60771b491a8d70146a8127e360147174ad5e8ce3abb01efe7f434a4bd6e46fae75fa4fefd96fe588fd281890fd0e686c5617b7859dec8d4ed9ba0a3b1d94224d419c8d16c2331afce554bdd2df7e6b20753463f18a9e3c455ac59ecc0b0000d3d206cb605c61408167fa0c44603dd6e7f23e8bdc7658b229ba24a076a8f68a76f26503d368ad079cfc1796bead53f554f747bf29d6bd23a0322f71b123a11f715ac5918ff5ab5e51bae6c4a9bc496a3410c194d62990bbe20e0361c506b5ac994b14a3fb218b759dad326e38175a83108120e1786bd33f3bb869e70fca63df0d177d4b69be2e1d921953572d774f02546da04989660a1c8933ffdbd19e0277d72be1e420b0ac4f24860a8546c2647150ee31a3a0f69aefbabb22514c0923ee923b1b23c5f1e4f7bf1c4ebab7792cba6f27fcb409edcb1bf9e1bcfcb4af797678fafef939328aeda7af9cf94ad166b0b5960cc95951d3c29b5258e60b675245febdbabb860c4d093820f3ac94b28af52dc6e500d4898ba7e79e0be12cb9b0f6c50bdcb5039c820f6a0dab19c8b2e1b0eda7d43965e23bfe437cecc60d74ddf73fdcb3e43cd7776a43ab4d51bdaf3a5c5010ae4f6ff9400fe84c2bb0ea5b39f65ddd7bca7d90f4f669a255cd6367cd46b136db71fb996ca2e3c895dd48d81f76905d873d5401477cbc6c5d73c281b50b879876050f41abd3f24238a7ab8a05db0ebd55d36fc15734fedec1e5fcc3ca5c3d1935c561cc943deb306c9787e558e0fcc27bb523eb68672dfbc95d77c2cf62ae4c1fad60444313892a1d3280424cca2bd0b198fa2b00445810af03e6425671b685795169aa1a7d65ec754e2f77186fd41623ccca1b4e1cf2173dce1cf950cca91d663a42e474517db97dbd51094f5a95350ab271ab84fec18ca519067246e06dbe7ee03352deda4224222a6770cb58da0e88d5d4a477912af496aa239b44485f71cdaf61453cf6ce90e1053d1e95033896b7e2a5e77a274f5d1d3861c7e75623a1f9079783bac2e1b0dbf8169330938eb64ef679dbc2dffabda8a27dfcc50dd165f4d040247158e2bdf1ab49b65cf575083a29c3b986f2047a9873a6921328e94bfd4a278004491102a0ac20ec76779320646f4e268b47869473023a9e0d2e78565238cf5f4bc370c9448f8c68a3c8668f9cb1221b7c177285e8aa7fb1b793b57a7d72d680c3965c97a879eaefbbd50b2b0626430b2d6e9b1fafca785ed13e4c2088e7693c2185f638e2da8a2f090cf4a43a701b7f4e0b46018bb2fe8dfeb356da01f5e86bc754b460da9ee420ad9cd47ea97bef28276e19645b0cece461f042196030ce8611c5999a8edfa6febc2c83d1abce0f18049e4c9be48b40a48c7411c5e4da10c4127d257d3cdb01fe88d060100167880a90d4a38f234c70eb9b171be6717e9f665fe8dc739e2818d4f5df219eabf37c6bd1c1c9e491b4599f8c3a2368ed891519928c1a06660ed4ff7cacf73e59ff0969dd5cf35df75a1f75f05a949641e40908f548d4e60549d3b08da560b9f6170c44df8733c3186808152524530c2d9bf80bf2a0dc02ee03ea5837aa61b177cecdf54ecf30e68bd4d368bd0fe5048fd3cad422308a7ee4ecad291e20d272e562256de40a1ab7d6f1d7a926c23a1a18a6606d1dbdb4320ad7a669825ad48f9ec7555d5f6047bdb5e3047c44a6869805f5e3a2e6030272150ff822b8ad0549db88d7e355d3e0ac37509247607710170d84c15a22636b4bd91e19ede3acf358333df09dfebe8737034bc1a566f0bfa348c1dd97ffcac3f349f82bab98d790cb7458a749dd241e2183f8b62e23f7a575f22b21631d1ec121c5c780917e63a524be9dabcb0f2e5a54772c51b5587555627a0f3fceee36ef9ca8ffd2fe78a555b8515e13b81365d5373fd60e448acfbdd179b4fa5a5c60a81e3f4710e77d7d7f13c9f7bac327ccd3144d16b204233c49a5b2fb9a21974d1c116e96764d49886bb0e7519b2b78d393503bb1a6a61638936d66fa8bda3ca628cfaf08c93bfc637d039a061cd934ead7bfa3dbe8c5c3a287e53e547743a8571dc6fc15c46c49fa0512e11713113b3300167f1767c9b5d3cffac6c8cc1781804ddced5f1401da692c072078d15449610400b1882972a34cc000be513b49ac31eb88364b918b455c018dfa75d018967525f3cbe793c08cf1951232013378d215103660f0e1389f9cfcb0ba3cdc1e9c38fd550f6ea91abd2b38b82f6d702df8bb8a555d7e5f8404c162849c2770e81c3d896f48d9b507f44de83abb139b353449baa0f5fc06a4f66ae443f5da8a8793176ad560aeacc9e50a06ba01fcf0d2b66b3c00121f0a765ee5eb588164e2b39761895616b1a41a147adad9df520d71001fcbccaf370eae549cadce7f8f8e3bda9ebb32bc1cb2ec0988599643349d6a5d44108fb41cc0ab5aae60824f9edd697d4e62c0d774223ec2cd380a068dc2e1e2063a35066745b3702a76763489f89f29e8a5d0947caab06f66b66adb9d8b5b4918b548eaf12141aca553ffbbb6c1c2ffe2107e800f205f90497b6ca18b1bb167699cc4cbf1d20c5705e893e795791c2bb220f574c1dac3acd0edb0bf8d3ab25d15092b151bfab4c3d4d7e58e33ca2cb79d1516e3cb77b75863f432a7fbdd01a155d2cf397e5d48af9e188b5c2ae67a4d3156c3593245c1a630d4835a9e3d54b1ec6a2ce20156b4d2fdeb41496f6f8c658b71bfce51962b368956c6bd0061ed2df09610e164996f638d609efaea4e2d6921450fef06b72a987c8e1cf7ec73e70f0bb7fc161fa6e4bf7c2b744e2a61443d61184a310cff5328e601e32ee7ce8f039a039cfffb2307361c21b16cab28503f92716b9d2b1148016b70ec95b5bc3520adc30ca1ab1a53520b900582b4c12fe74ce9a8fb51a48e03df02e869c00e475f33186344c8669d146adb1d3e2fb09a6965dd74b700d29468c012d46b3ce74af83f301465e0c9752d67c19f148bf00cb528b9f06ba0d908cfdb430dff978b8f69b68b08e81a2bc6d3439d02b42c8420406b479d1eedee02eec42980c07a5a6f41676fc1d291e4b5160d1ea943cd7a5f516a5cffda489786a31d012adb2c10eed177c55fb8298cd2ee1e5f01070f69e86a364ef96218a6306def51d4ea141ef95ce7bf7aecbae4e5a53bec1a815819ee9a3722883ceec0fa3b061b68102ef841a47251f1378b1006028a3061811965fc4ea4937c8769f9f2a2da267c2055e44d66c0c80b7da043beccfd517d83675a2e6576f62f904ea2c1f211b9526429f4c440c61f1d7f7a428d278db1adb00275442030211880db9f455015fe36d617124be50a6f25292d8b13a6e8e068aa1f1b38c83c6fbeff836fbd8e40aefdf85630e5ca741908bdada2ad9c7a7b633e4ba6e3dd589eb477eb68c7e6c643309b6834775224f8597dfd989b1e04fa276c9ce73c5c532a0c4ab9a7bc64c8ef79d739765fea0f492b012c7bbe53510c9be9c71f85b58ca864d7ecdbefdaaf2643b3b748388be3fc3dc6c43715da5a412fd26434ad1d08377b0639b3e7dc2ccfa3827f28966e0a333dda0f6dc01ec059618f36b8a2b7ccc4f4f43f9b23b88ef0f3b673dccf00906feffb43a689e2feab49e495b6050fcab07eea2c7ab9bee29c65d40b8953b8e990b4a6aae2eb6a20ec984b69987e77071ae180fe103f33a4a32887677c1a6fdc6964d85f8bfaad64c83c4250b7bbde477639444756da6c85128009d104609e429fbb2482fa2ca5e33ca337ce362f63ef14befa3ec77eab8cad6301d4669dec61ac3760b80a5823d87172b03b4ee3b4cffbc919304c03dab33cac55173602c889cda9e545d37947107f796b611bca7cc86826a9a3ffdc552523d05cd3f594543fb5d7e59884cd2145f8a02fa83f23f1c5495444c96f8b67207a33c7592ee160ceb128b8f595a54eb1b98bc99021f609e4dde25764e3303aa736b19bce058bd454c25283ee9a02a7da2e46a343308cf0f4406859403e98970076a0961393acc3573a151f64f69f7961db32576b76bc4bedb52c65db71b83f4a10d3319b6b95e0761bf454605b54b5fd804584148eeac4696f1dc67f0d3c7ce705ef2dd1a79216be4764fe77f146218b0fdaf8104aaca62fe13039e01226d167381bddffa3730041286686e7c09fac18a22040ac36a8a852199c9dc37edacead7cb91cb92ba535fc78eabe0d38e5aea112a85811405eb99d1ae59ef5db4f98cfeb4c83fe6b92ee3b5ee08ed0cde9e01b5f8686e5bfc951a20794f996cc014cb20994698e9a3fe3371b881c48d4d451a708a1de93ffb58b71c228780c97ad26f5484b81389e3e8f391ea52e110675b2b1686b02041ee4ffbc892aed1178f8c6158a0aaccf9585326b1e59950e26c9073728bbd8c74cd52903508db150197c36af63b430f680e6f40405f89ed41e616d4fe7d0bdd91470b8f387eb17069dc846097fe92803c126412e3c5d91ce3225c8375e679c3eb554fb3fd9c4a73b4edc75d498cb66d5b76351fb074659e8ae53d8ff165f3c4f0ef955a48bc73d330a4a3c71c527ea52a5cacbf06807fe0870cfe6a0f8f4a42315168e0441f2f2bf42f9b01daa9ce758d5cfc7cde45c49c93f82e3b06d554770240d91cf613bb7beb59fe1c6120dcc0e3d57fce0dd4a572e0f8ea22ca549279350ccdda0c375daa6d2642ad07983526deb2aa174fc1e552df409abf80f67fbbda493f6e831bf29aab007e00de32a925fd82ed2d3329dacde84c5379164baa7c4775b390942477dfe2cf4780bb680cc88664758304de219c681adf18199b11fe800f07b28a60b55bf58f8a31fa383a71c4bbeb05c738c8a001fe4fba828a9af5aa560540024d9dda946e2a940cb61bc43a9d247db65bc30d396b9e9cc89b87b9ddb77379d775e951b4a2289ad51bed81d5b85c7dc3c2dee6d58988ec8ddce5bbd5c1732b647810a5fe165a781e3ed3c0b9cc06325bc5614887b816bcedb81d45d2918c475e434b02e6f35d981a7359f7378c1953b02e608b9b26f603e3f605045668c2b1b63fa45bcac416de58c31e636547dd3a86c4770035a77452987d138131e64e32a28a04a2cd59cf7652b374d40211c8529997fc1a7101c9612a1d9b8b2ea7659be347bbe2e1041624e45d38ec9ce88f722a2ce02b16e2fb529ac5bab149e6fa3827f9676ead7659b8dec11be8649bf4b70c4122b14706e8c3b6a94fe23461ff70e2fb4b1ba48e019e1e779f38125d64d6f97cd701e7da92a87ead1f3e0273a04799598f389f0da0793f24ac65dcbbeca9a80bcb360991dc0f49871f0a031ebe0c8aea0c6919b2957368cd4c8f16c728c4cf9cc86719f253ffbbde26e8352cd3718df4026373cabcda284d5eb8051d488e7c3d9c23897560b5f69c5bb8fb91f36068beac969cd5240551749f543d928f0d3a8cb390e75b3e76e29c13d81204eccab93fb960ff204ec577a6cc1776d35a1b8ab3540327b7de43722dac8e49a82691fb5cfb1bd6f3b9369acded447ace9ce82da8f3c5f34c4d709ce1444864867960572ca5275ca6f914b60b4af87643e11643f3aa9403e4fec783a31d332ec9d01b50e998eee536e29de74cae3c89f8c676a3fc49fd1e4410a5cc08e92921678b44cd7ffe94284249d8219d98f5adcaefed7bece234452ec691132355fbcbb651c323081c9cb10b1e16c9529a782dab0526f280e402c649c8fe080b4588723e5493f805b5fd9255e3e6cba6cb5878fcf13f2d09bbe01931bea74610d3a5dfcc0906cc84d4cb7bebd20ff55793a68668fd85a33fe35259150fc34d8706921169588edfae5541b2571c6b45c36612f7df878df45d984ffea4829c50b19251817c19a8e7eea048e359054432f5a33fdc38d936faf1eb4e4b5b99e833a342d431a0100c3713ea39bcc96032611521a527396f85298c25621d0908b9137307f00a24f04275ab9c86fa74a432e29d454be2fc159f19f10470590f6e1fc53bc226c0db125caca54ab9a60bd5054a821131a5bb8178303a8ad8ffaaef8afe980e52b6890fdeb04925fcae3b08c33857b10ecb4940e7bdc528e9c4705d1d15daea6f37feb4fc02130a35d2fff051d4628d244344f0735c1b8f6230e16306455a4460d7de75b3d8fe462f36d3aaf8d30066ce3cfc1a682bd4c1e4757259496a291480145c17b26727bed3cc60047957a5720be71689baf729f04d9994f9912b7a2b2f3742c8cf2009b4b58e34caa1c24ffce83bad5d4b3d83c7570c5cd9e1800dbee36a1474b4b9f0eb4c5e6ee22ba9926b122baa9d7996ea1eec9c4016e5862d22b60470494e1e76a207b4f6908c69004c379278c26e94ba3043e446ff44c824801e2f6fb97f0a91df671c6001744c909c9390107da7492f82672f41042fddb3fcf7b11b747a41f2bf28ff162ac8e977af51f256230981eba2f56421f2811b134a41b421c72786162bf6da923cb00f9025b3993438aa3d220e7366eb9fa377442a5cd995b4d5d68f4f1026e21dbc2ae822554e7cdc595dd19050117ccdeadda2fb1cb51fc7a275453f365b222c2296f9469f2bd6df71d8e31bb58c56699ee286ee6eea1d34c7e3d5199104d10c0394d5b850c75850678bc77ae048111a9234618e9d0e54a9c226dd8f1d6aebd0bc077bed16627e2517329b4ef575f59bf0894590a03118ebda7b1b5d43a44fd5dfe380af2e6b1d90007c315fd13317d5fc0f9600f68582b81e9d7b12258fd800bebe95c362204b01d2a237d6e8b84cbf8895e1419bbbcd5f2d1d08fa8d41751cfd9df606a784d6746f3dd2346bea3e4f649d6b7c2e2baee3dbde32f184042c451b79ce49ee326526b09bf00c25c6b25a4e2565eb91ddd6c2287779f51641b754defe0d1b9f6113803642f7583115715e62c3adec42c825043bb8ec34ac9d6a8b54ed793712b915cf006acb07a45924e42d28d45f9ac09c22985fb2eaa78bd6aa2e2d966bbc31ef841bb8ed79a02edb131717dd8a7905eeb1727efd2583313a3a558aad68236816d0ce35e003475b288d39a445018b76e93f35ef9d830b3f1db53540ebfb4912635a2886b505688c343dcf9d8f3f68bb3b9bd9d5c5391a37358d99b1165abf4de2688e0c217f634aa73546b0f1f38377995119a20f416241f0b5f55a207e89dc0171b5761440b177220f48cee3437fd4675239201e4e17e14f55f7aa352129518446295627159cacb5763d6a57230363c5b4764a53aa21f888b124eba5dc6695b7ede1830f742aa1134672d72b4897a87f6a6636e88c052668b725ca01de078176558bdff1088b6a38099dd56b9d6b3bad915321b7f4eedc08ecbe59eeed6c05c6550917081f6d5dfd2277eda73291af8081d7e75318cf042cea409b96af7c92d687c87f1e420c97db0ab8ce27d36dafaa14f9d91e3e680f844cb0c74802ac3c003583175c13b581f511d27316a1f4990a43fc9d5bd9c23fdd7d14e53bbf17130dcef586d6c96452efcdff9ee8b568f27c43923660aac52f87ece038797ee1542c0dcbe65effbade5e86a42ca2c1bf1d09989e08b240a3ef99a2bee13924d0c41a52989e10f2d2f2ccc8e695ff21cbf6cde3420c192a85c983e6885d591ff2daef6017704e2c1b43602f331aeda17ff06b1817d930492fa7c9e1ed184bc153015e88f38088a6714b701be489ebade509183355385410d320f854a3e4f635d3a23eccfe6fe637174748de9559925e946f098143511cfa4b4fede73cfe2b9a3215c3d5aa4b4ffd28663338f148c69ca02ed989694159afe1dba6c098ffd50dae898adc58430770a8145443f2c96f453cd4d700f89052693747e88133962a2f86e75e5a7b34c1eb13f3074008a3a182f3dad9963771bab5a03cbf9219e21f48a3b96da4d98dc0efadbbcd56a929a87819ef58fab5cb7881fd216fc804b026bd3e080ea2a551bae0057500c6407ff68a146fd7e2c29f6d70378bfdad300e4839132b19384ae2fc7f9e21a45e0ccd846a7d2eaaf2f0323061d0e30ee236295fb3bc02923a320e887b7765a93eb392aff8bfedf70f411b60c8acfd05fbc543f7cd772002ac076fe5ae521e0928069b15a6cd482de0e6f59702cf81c0e451832f7a9a9d1698d209ebb392dc6db904025d058e6ebb69caaccabd23395dd57e47740995f80ff1d8dfb22f988257d6d41bffe5fe2739589653869b1e9848285f57b394a94507deea1c9f2b1c51926f802916933e07f7ed933f3441440d230820c51a23495a89dbbbc2ce963d8734f12524916d95e6627b0737f3a2c7d0b5e3bd1c3c1f1fb21009298c51a6fdd517e097ade34b724ae927814215ea1780bcc068b8ddd93850a2134c0fbc52e58816e69c36a3365321df055b318b6ab9babff7383ca6ab4398601908f630e2685f378385256da0042ac4a3d1075ec9b18c2b249f3a864fae5071f52e10188812fa1a062109af9452f93d4fffd9f331d29174e78aba8058ecace1d925a2a32abb5f118d8d49654388d5676b51c78440ff81dd462433646f85f0f6afc4db1f3bde0fca45732517785d29279cb84949b80db42100e90e623188ff28b30fb1db8f0d4fb0ec4f69fa1b5536630b70e9a8317fd9f820fadd3a99c719f92bc8da6ab3847d9cd96c9c0ae634698a865086adba337c86277dd9143f98700e16d23446b33b2ea5e8f8b75947f58cdc9ce0461ec795e03530840a6dd2d8f7ffb8d4862e6bfa4a0ea60f84f8040f732184eecd7a9469fceac33ec8af7e37312a66b4c6dcd03db807dfd8c86dad6d7a38a6df7c5488ded1795fbf2599c24949e5f3e4b6c80a95d45dd78e46282e9bac26b685eb038f8831f6a92c338d9705ae6150d58cbd61342975428e34a85decaca81f1e41562d3e8cf2b7fef2533ec8e576b924d15b5d09a7a676c11f52909776ae6584bfef726c8c5e679040332dff91518dbc10191412505dc37b4c2d8a5b3c90e29503c20567a0986dec7cd7f4d90097cf8a3e81fa7b6c8e07b9fa7751831df3488a8e232e42868cb1857437c481b66d1a5c13bacb10d72441ab3c16c499ea3f10c6f218355edf93fa6261d7fc3b80889879a3ed02514a446a183a8991d62dd7f93e3866ac20c2381e9029828f1bccc39a4990e34841d6977e15a03a0f698ff71e7cdc0c3a5c6ab6a9770366366565220e052d0d13d098463b7e023ae5cef04858b0bcfec72ceeb458da74899027bfd0e5b9b91da66b3e80161bc7532aeb603e14f6f56ea4234b46bee1aa9a2d398ed6117c8f2787f6baeb97d0b67e8bef78915e25cb21b009db06d7332c6392b8f13c74af9f713f1d63220f83087067febd2b08b41c276b69ab0db5b6114e802bdbad7df8c87785693e413a2ee15371092adae4344000de36b6e5c9bd39fda51433a290034628bef5ac5c00fa8335d3bec4d8163310e80449d1c6331e05dd0ef7ff117d3f66189817cdbebd23eb0128b2d1f6049cf817c0bc8d817363d6318de62aa1ea353aab4e3694c8b6ff4eb3a13e207b4900eb4bc5968aa1b3523a7659c3435fa889ca290d524c3d4792a5be7634e50f17babd30f1e4f4522b59fd8ee58ca6b851fc9f132fa3529b56edd3636c838c0c7c7c05bacf37d446e3135c87aed440d8c8abc02a842eaa1f94c1206ccd7ca489275a4f8af4f0a029995871e4c5d5cb47da3961d911aca24575108d4826203e1dfdee5931dbe68bfbb7e583ecbfc0490c53995b82b3618be2da810a4193a3a478a9b242de8c5b91534052853aa87a3ad940cc883e5357e79c27aed3a54e81dc6b8901b17739c090be113d924b6d77068294266eff8e884d16e0a7894b8106a547db9b20a84c77f30d6590cb29f19ea7e18d1c9974386676180c5fb9b1ff8c5a07af7ac3375808d8e79c22c258d93cec5dbc3667954e2763d7ac5156de3bfd4b1a602c60bb504dd53e04ef5d0e16b85b5e4416c85b83a6799993d316f4d92b332c9a4b8dbcdf2b80f9ec9a323dc0a0b7e189d24dc7aa24e18885f59164f9bf506d457fd07d88f40be4c28f2aa711f4b61fc651a458dde38bbe92640f4c2b504213b1b7a26584b25a2600f3b1dff9a8c6b9de0c66ec1efd6820baf14d512f7d191b793271bf6ac0ab59b7a69159e82b60570988b5f8a40a7eea72b73984055dc60eb91ae6942c3645ef794378a60d9d066172eaee08911f385de6a83988d8583ab0606d978cf1ef3130da47bf517bda56929c0acee64aa8ebde0e3e9bdfae1d2131c36e88cc2e2f377f2ff48859bfddd84aac5b4b1f715792d113042da9b33f509a26874bf772500a97506762a10d696d7714d5da7392b99165d01fe9cf120c3e0b24be3b67805931cc8d796dfb17b41ddc9126c62622a6e2a9f7a769e8cffa184d8b15ddb2ab4757e11eca0713d61d4c68cea3ac237168384da005c7d2b9e1be31fa81b50aeaf366682d9e4446e3158d4710d3e3468846301d9cf4c87cacf77b7468e5574217180e12e1629b00c6255d7e2501d9b6a3a8d13970db07ecf14224d57cc05ac54fa2a65e258255d82dea35796aa92ab2c83a00b8394c774b39ea32235694ba3548869f03f6b3c6977665d447be1f5100e4e2a0db42c008b72783f41346df719931b9e96f00ca34f1a0fa8377d0b10388d7d0d83e67f7082bbc73263fb2156fbb908f70bbbf411529ef19c5b530ee68cbe3c54d3bd4cea0ba55a3fabc4ffdf07a6b2365629cbbe6b273ade296df83c200a3902766a0bdcb57e8405da4b93e3df6e06fb22bf80727f1f84ce051af746b8f7043fa9bede9ffb140abd6729203da71281cd7098affecd23d7a9af26ed18ea2e5208b5d09ea87f9cd9d9ec3f09f4db4d1bc6897ff8468da7daf7efb20cdaae53991063ed8637ddea6ff12f5447e333df18ca96a7b0c0e2cbdf480206c36fdaf7162d8899dac29dcdeb8519cc7d11b842e22a7b265f929b5662a49e85e18c500ec9d0e55dae4097a990c345b36064cdc309112d27df76d17549afdf7143db783b53b258a31329faa5e283737a7fcdd552545b068c2074d251c00cef548742061398dee83134bb8c1b8a3615e24d225f5e0f37c46cf16d82510651521ba7153d1fae3d6bb8576df2ba86efe8de2f9a3a87d4901bc6f0a5676a916fbb3469cefcfdbd7dab27805f06ce212bd5e7992f566ff897e1ae4e6ac524939acd78026925bd67c3deb3cfb868d8312304b9d1e067a38838c3dd46a5f6ee2cc11921822e2bf5b1d7d25d85d0372feaac3ce4ab02ed2c1ffbc5ec435ebec9d25b425bf092df6c558450a17059a5a9b89aaea89cb2af6f4c7aecd67156570f7a8f6c253218e83ab93bae301e81456a3e8afa813b1588242d2749e992ec498db0a109a8fbde83b4106769f0ddbbcb0026204b2a1e946f22a667591fadcde1ceb803da893c7d9001a9aa8a360d309eb482b8d32c9524150cce540bf1196be93273cc7496514581aee0a2af8f76c683537513ec77b4fd2fa6fcc660c5242879634fd3ec941e43cb2b5facff00cd664f0c7c6bd0b16658851099f10e52ff40960afdff0ba18c2345058f4642a87aee4e7f060a9a6333c118bf62627afc18b1446dbfd92c9d24e0c49f08b46909c5b9b641f3766b98be22dcab8682025ca24f3d7e42b70924596af5bfb83ddcc3e8e78561fdc62c247672d21311972e4da21445381f6bb72212313c3e3f69d05c6dd6009e8cab3379849e55d1469061864b03f2a37f5ad47c14d0a42a1b6e9cdda9dbf383176c9b1342f2c8df9b95bde4ad9d652982b5b3ef4d129cfbc13cfec4577004afa26c63c968d783378ced36207e0aba81a53afba75dd4d668c2b7560278c6b145a070ad56f27c22e962cc743f5848e066e4a68c854ec4703884ad8ba1638a762acc43efb26930a9cec20dc3820299e44248270dbc055163582c3bb0760f5605dee20367936e392604cca3102e2050e526d483bf9f2f52877b66e87d0205e2ff92bd7302568b10ad299ea85efb217b1c4169db016cc4e35ecc660033c4ba925728daa915521ecc3f7a055c02d1b95c8523362d881831a9715c311dc79b4213eb46098efea9e5f69fa4013797dd63d1608339f2abbcfa3315ee6c8b963491bf6e49e4770fa3f60646d8476deaa7beae9e9e259d57193d9d9e650f7e0b993bc89bbd96d958dbf11ae737e9afba3c6c2c4373a3f195e5f5470866e03aa46ec46ff8cb2704e657117b1b1971f14f465fa21dd43467ca4a3e90aef67032a8fce4457048f34de44ab56897b162624baed3f0debb432d654114494ec10e75feddeb774ac099ab9fc07b900dda5e31e1923bd617bd67f958fd4b334838b8bdc42a29f9fa574fb0fa29092dd19af33fcec2fa675f4c0493e1ea58a5ed51c1531d9e6f86ac00814fa61e22dc084b7ff36a712339a0a362282036178a37823e1a32a9f2a42403f06421eb8ef32b42bdd1743c08495dd83fff8be1a98ed5b6029044bd753e52d68aff44621de82f8f7ac2bce2343e0b8387afccf9a4656d4c7a6190e8bbea239197b0bee4a106e2ff42e0e945cc32a4d4719d09c347d8296eb65ced8517230798a9180566d55803118363ad168cb276c912b3d27af61e6f26c43cbe74a924431e03f8e8f0183b76c3ff1980c6e617b0c715dc4dc980926afb848554066190c510ab6caf66c6a5c8c662e773d9acd01f7713cedf051071893c425fa3434cc5c3c6aac2c4b956f49c51d512fa0e1f825f75d15156915ef8db5088b0ecb30e0ddf654e00d55c18066df6aa5a4cad80b8b6bc008eaf66bc1e26f3453e91fb50f60dc9d16105f6d3d18b7fd97a75986ff44d0cd19548bb77a025ec501049e2fe94f3e8009cb0f9eb6326dca5c39a5fb2b78e088a86b17e57e390a8b3d9791ccc6c56f156df735ea4083f03e3621bfb1a8ea48436af33f3731962299660d9c52c864d3eb8fbab954d8d19a4cfa84b264d95f2673b833f4f7676e52705ace122737b90ac907db8e2c3a7e067a64e437b998eae263c3d3e7c72124115e9d7bb2636a16b5cbf114ea00950ec60f5c5be71dfeb22cfbcde857f4b6fd957122332c8310940d821c5706f5b49f9c0f613566a1cb7bb9bf464244421b3d4c32d8f6759009829b1f42ca4552c1b30d204b7ab6568034c8c35c5dd89bdb212a631d93238d61cbefa2bdbeb0298c9ff23a38bee16e5c1bca07cb2f90f78795fb94f83a1332cf4603b1cb56578d4225dd0ef289342127746f5d66f7d9b1bc7d7fe269197d9c517f700e1ac4c27cbcd5ea7cb33c4dbd27fc50c24776228e1829227c5b5ccb49a5689398d1d76b7b0a44660318a4f40551e7fe28670ced2cc1f6181f88b311d5412207a43dfa2e44e0db81bba81dc722b41a241abd329aad70b82dde2f7b7c3a27c75ca023dbb06bf34820ba91b53135df689b75a89bae987c308d809b8159b5766a151716b4a5e6134e2d529af1c465446567fd5c66179104bbd1654f5cdc61d343da90191e8ba4db750217a44ba886e25bbe948089987f4836dd037bb0d3c20521953f5ea3f344cc48a57c758ceea9b85def03d600e75b7bab34b732c339fbf7303bfb25290c2c57d269a3f675eafac3ceb727dd4ec8c140785ad6288492813ca4acbffbf0e1041a1e11ba8c688a34bce494e4381a9f68e66b8e25f87f2f66f6822f0ff3fca402cf0d5e4cef1777b67b4479f43a8b3f5427d94c19dadda1e3c60e8818290f0f1f54e691701ad6086c2280adadf9eada67d6ec4db390f19464c3e8153ceba9b1bf1a096623886004892337fa9340a4edc7f83559bcf77c839ee1151cf64b1417bf87a099ed57ba31b2a5dbeed025b470f5f048b8384da2546d8527d513721a8d980faaf45365a31a6c05854a4fe18b29b976330f107c4109040fc2d48e95ee50ebde2d3d3f89961b1045ea9829aed584003c47c84decc6cb0a30013abedd311ed03599e125bbb218067684151737ccacbcc9f6230ede4ea0285aa1723788eafe70e6ac08e9c9ee133de1575cb34d7e8992fab1c7945a96d45ec217a718997789e6b613d1be0cf79281e88b3ee42f7cb2567240c88f39d5735c430d16a10d58453f0949cad145f8b0a8a78914c1d5bcc99394d4d96b6cd0877476fde9c5c1f1f2bb2eda654ea14881ab8d9034d98f220db7ea98c6ebafb31eebe7473a324d81cde9158b5086d72ea6a677d326b950ffc0cc0ea31af9ed3bcb1c96f2a1f9d04d0518ef766e1827b2f5c4d5bdef","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
