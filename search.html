<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"b5a472d25290593360786331813043f0e4dc0a35bd224f29e5e825a5db5c49aa9c29e49bbc870231fa79b0bcfe965521ed49691f143d1eff2d9cf5cc1fe8568130cf7f344a75ca540af190c1c3ea14e4121a7e51acea0e6de2eff7ea448a2f2e7e7ef18e45f02d807737ca8c2d850d4572379f6bd36c34b7aff4940b8165c3f350ce148207a749ede6ec88057d9cce231a37692a4c20e3443969347215d52d7f2d39c713e1ccaf795dd30cd5b9a4054d44d925fcb2c37a05a85c26c6a891b4f304d5bc4f98466c402fef5b70f074cd0f076808ae127ec7f3fb0298d2e0dc72bcfdfd04820ce45dfdeed15cf39966730bf94ead09590258b196d6ab7637b0657bc1c249e277313c37cb124857c5d60e4558e5b90f955b03a89f445fde78aa6dcb8f9e2291e65a101f68cd31b5a7b609a4b9a6f513addeabef78f9438cc276d4fb938d1915100104e45cf8472e2bfd6ba72d57425adacbbff58487d73b730f4a4e9c3ab33061da869282e431eb2bcd76cd9856f0c7c2e1e63b68604b5fc078c088b146989ca3a6dd93f40587991fc98768ea341da3f71ac10e35106c4dc36e10225b130671c00c688710e3b64f2ce9b03232b0d4e547f46a44777caa2ea853cf8b6801f17bea638624bb0749c2094ffaf0d8c49c35714162c60b439f3f8dc5801a481db981b013d1885bc0c9ceb3c8e5480e0816cae6382f10f3a200302b149df8eacff27f36dcbe18040bad1951e1fb7ec9d60440aac717f3ac4ef316c62fd8308dc114798638fbaa369522d75edc580464317890cecc4fab8c4b1a92a18c49a2b00d99c3e7a5123552a774bc1b95dd0790eb7c850e01f5a557d32033fa3fc6d0ca8069838b61de41e99714a997220c46e738ea68680a989a7c02f5f880d71c1a225499b638e03bb0e852dca13957c5c6a57808269b879c60087b757513ad3417f0d0991de0001a416c46afd86e719c44b684a64d659ff7f854f7ce906750b4240032663b0cfb6814aa3076c59094ce85419b66103271aa34a6eb676e62cde0f64929dd50d4d4977da02af0096acd2135bf0dd532cc3dc9d719b3ba8a5b25c6af7afddf648d34fd9cb7595689923a9cebaec1479971722e4ef2a1c7a08157c287ab8358dd9f0b44eff2a65e12496f9f4c5733331ef526def78b644ff59197a3f10b59159d535619973a92a2d2f786a0f34a3e76984a9b3f7b8e2dbb176d4ca8f6b38be8307121213c79a31c93086eba3938d9a04d8c006b4232f03e5fc5a43c625f4d4f92af7f6f61665734aac1185d5c317a12ddaf2a3c0bc38d8f5c13a471ea9e19f37155422dc8905b3fcaa3d518af9914a3ce7f7b3f93cb17037ace420149e16d25f2a4175ada64f4d1856c4a8d329138954fb65b39dcaf0532210c3845720492d1712a1ba59ba4d6435a0dd1de67725cb6da9e94d40e8b5d8f7ef1ef85b5666e7cc09e8c7e2cff02274744e4756b244a577f50f95206cdd08491ee1b6b2d50b9086ee1bc34e72d2b5843b11a8ee33129fd3ed1ff982c3cfa3cbbd68c241f3afe1de8b48c8d22d888a5e5f8452438acd71f9a3a124ad6ea4b00cbbd4d20b72ed60a0760484048a51f59d6cbfd2c7dea2057063304824ab46fd32b3f53d04e8106033383c649f0e97e2fafda3a3b4b61643b306046a34d5a8064764858d2ffe71771a2616aca652c54bf6eac4f1bea9759f72347c764773acf762c2919f29d7bba843ffc7f3eb28b9a929e7a15c6ce0422c8139327a65c7aa4af6bb5b6b1b9992e3c0e946d710816194452fb8b2fb055caf75fee25afe928d98c0e5dbbadc312fff2f1ef29f70ea1ecfc9e81e4fc94b81b07b2c1eccffaa50d9c8c624b6d871bcfc2a8d4ada5a8e7e4623c1365b91db32bd241f44fbc562467f517dc826d3ef8915a0684a2f9978923de97ae7d28bd27db51ba01f7387ffb143b9325aaa097c3946c92d9f3c012378f9451fe0ee9220b6f45cde5f856f2afce75584c8532195ac9d7a4011c5008fad4517e92150ae5f8f6c5a23d5249eb70d5b3c9dfaac32e2e7b0d68641aae3c791225294a1126e7ac6e5fc05e2357ac23a25aeb39464c82466c9fcd7397a8fcff1e28cd56ba3d7869869d5e4ff470ef793697ef910f3cec13a86069342e7c2388504dd15e7975482f577d1464345eac95e146c3cfe34924cfd9c919e57c1906f91cef8374faa5e69a05beb5f15e382375c0c5470d09b37e411d87f81dcf99fc306a15fa46606f025a4afcc03fb63f84df5d849e07e6602683a3dcc5a06e117a9ed14fd6f26878f989480f9a8e5aebb41a735f2dab18cf4630338fa3aacf0a9c697e89032f77767886885472581500b03f05dd31551b88e2bd5bf717d8b25b9d66b1fdf56b8bb9d12dc41c7ecae1112bfba64bd1637df8d150c621440f1f5a7408fc81e0cbd67c0184e73b3d06cd54247cc0cb868e0db9f5d11dabd8b705b0f541e533c90a4406f0d002621b8d2313bba8463a29af47648fab4c2021c9efd3c00cc5145210776f8d7a93d5d4c320a83c8429839461f0cf4bc7b8d13833efed671cd0b6e11c0e0d89b6720b855b92421cdc209797cef19605752d97c10e815f1dbc21e0920ebccfeba57977024c4fefac75f09d93fe68351881cc17a58048403b8fcde63d1d5dbac65979abe6fc383d9f2c28c1eb3893692b39f8ca527fa5b5807c0e707908d096691307f5e94473a8e23a7d3189cb7ac700e5d160f98dd2ac8b02ecd9ebcceaf710c538339be1cb284819f259fa8e8e87301141bcd01237c58f5049de8ea3ff24d6cb480f2293bff545ec292a861d3431c120d31e22e10cb96f880150c7a7a917140f7c1a9f74f9c7b98b0648d9487de5dca04e8212940ea109f1e3bebe9f9dfcc4633c8081c48ae2c021bfed548cb1d6522d061ecb38ed7a2e65c839a646f2a3fb0e57524198768ea76c7409a60b61bcf01ed6a79eb5e8b5aac30229d5e1a1861afca1eff793f12df5ad7c075a288c75206c28749e29428a5662e03475eb077809d3eceab73312898db65a964c1bd2e4ca145974b05776512c2efaba648d7f7c726432e1dcfb22d0ca98d3dae95a49156b96f58bb3b4286e8adb8e0246686c5f27a6314c97f428017709877c6cd04acb62c0e948ad6096b2cec332ddb62f7ebb99e9115faa9540d2184cb518cb62cd7a95e777224d23bc1f69985ebd03300c702ec28c0a22fcf44e1308eab7b996236ea1099860c1825ecfb584f6deaa46d2ed6b61311a8364b292423d084dbb58b72e767832328c892aceba4fbab87e4a35966c88783475d5e278298c036522963a5ecf9591e1868a8e7c7d8f9eea5a9852ef016e13d956ce74b7ddb4159cad4b81017313b701466f765e3dbf96fbcfb143eece2fa5f3838705ef31540ce984ed94fd53536e042941674edc8d1cc9c8ef5212b3f8878ebeef390df77dcbcf2c12d26079e9c57091e7e0853bdb4855804ad0c4c5234f254c081608594d4381905320b7e7a350a957825e0f2e24f7d95ed898369f89283f88ef1c3752b9574d0491df374b52ba8a8e6b87f416264a44b167c1d291694c83ef575e26666d750cd321ccfe28959785546296850e655777c66ab58cc677a7035b9e7cb0cd0e42d11478ce18981ba1c7ce5a77bc19aacb47506974fc60029edab2cb4a3e4a4bbb17c33cc820123468535803bb460a6a809a6c689bf7773c28bfd7a87ae5d0bb2af8128746a4bbf5d6c2b064605a79123a4cf816fb4d79d93bdd2f9ee928bffce333b4a70c36150493eedf89c8657ca7db30ec5e4aa1d1926cfb55a62993cd678a7d24b0f7e6c3592854c1eaa0c9102e731aec604fdd37dc6f045ba7e5643a1d15dfd5ff1979f24217a1f6e9cafd376b360c4935bc7f7b4237aa9c870b58ae4721df2f640a4883e997798d54d20309f617b78bb25f536c0fd73a7c058f9f5dba98be1c827b402eb7d207a24a0c9d0c2c699049304044673da940cc3564425ab8b8df689c26efcf70e3d7e9c06cb4b5143d56693cef78d83aa1b16a1cbd74969a1c2324e951b921483cade14315ed26d79bddb4286295761a28be5813fcff8ed15568ad2bd53e39cc984b780636d5046b94dd9698b5c5433ab63c40a443183871a03cbf819510a1373323088f97232b4ad102eb7a4eb99d0aaaeccd7663c58170889f0c97ee9025e22eba70aba40b188816c0e6f11ea3378d9f2defdd21c609741f030f702dfe347734f0ee9abc1df4ea8615f31a685a7b2b10c85e1866530c357df5d4323e9c646270893bfd251df6ad4ca8eb6cf0739e66840ac7fe592f185ba8fb00f3604e8dbe9a373f226b2bfe51edea9ac00c5dcb170e9322cd194de9e8b09d52e451ba9bfc45a93d5b525bdd9b922f8cd31433a9f0887978d3bfef9b2e7a3626ea46a127745509be0040b5ca3d8925360df90cd0f7e24c277ae4f23851568e7099c14d2e351e8a89ff5d8f55ad6337e1049d42de6a2144a95fb288f61139aed082023f28e54e4e2f3cdf306aa39f4f5f12682e30c88b4ad391a935ab8310009c25dbc2074be21d364cfc9643020468c8ec4c5ed3afc5687bb2897e219cacfab97271fc22cce2d6c89fcbaa33aed3c58dc00196e36534a4564b9484200829417fd740f687a096bbd3f17caaaa27237b0f2d42275f51ddbe28a2d026ce09a44f958c5fe6566ea6393f3a2b6719156e929c4cc5b682c547e7c499216dbe5529326e6bb01c0347050f387313a70e3fad90b98c6d41a93ab64a80ac80a742d9a8ff815e38112d647854d3721a144e4fc25188451d031efe0caeee4834802bc9eff46937601e52274805cf797c570a29989d968935cb1fcb03dd191ca691e0a4f9ff09cd586dfc10a9315711fa6c77bf483ecec1b5f2f84417faacc6761b2b7e62a64fb5954136272585a007edbbd0a3fc796153991ebcd4ed8fd71802a0c25efdcf1743563f2f284dd147aba12da83704ee69f3d57e5d1423518adffeea77d8cb5864a435a20c6718595dfb5c87c4ec1bfb2dbcdd05a2b81982869f93894572ee2d437139ba967ecd7baf8b252611cb36524127a41097cd3474e73b681a2c0c857815691ba511dff38f3d2f55a461a89279eb6b091bcabdf6a366f3cb5c96fc3a81cbb9112ea337c072da588d2bf955a0bd9bce53b36b5089e3fd7f85765257f97f8f066768bf9ad43d2bb81f4914d357f46f3ad60e7063c0b626144ff0aebf7eeacd67cb0b5f1d85544f2e1c07524acf34c92f95b4319414a90b83f2a15570f04f37359e7932ab87e544edd617cf3d968e817e1ae83299336049353994dff4d9d34a1330721431afef6c67386378478596d685d71a666b60b5bc9828046f0c826eb6b8fca29cfd7f78382a6f03681c872644fb5e7828df6f8904390cf39f966761a54d1c68a6e07caace1055e21e471159fe61e35b14d74a7ff34bc8f105e2e87db24c61c616269b82b7bf5d7274933d44212b60681c2a4e5c8c01ce85bfdea37c5f770cc2bc6cc3c628b1cb334a6706f1b9eb94a0b2a0c6a0cc5c1257db9c53ebf3bd206e2166ad09846b750d55beec45a8a05b0e5749d013fd002274cf8f866a997e2d9e22db061c0e92831c60ebadacd08db9b6a7d3f6e95cfc90a3174cf71ed4eddea65619c17d40320fdfd3dee36ada9f4af714372cad27e15cf4e6902654da3ceb79e13346e788a7174766487f3769d7c9b19ff037007e4d2b03243d0038f9a931ab82f2071b815b41f50a6026f112819b0f544ab5c9b886726fcd1be62f9fcb689f45a37b2651ecd1e5392b5927965521649d45a98c70b62fc0898f90195b8632072af765c6d1b23de413001d9d695ad5af4a30e87f60ea714c8041f923d6e388bc30e0845d7d0296fb4f8516089b22c04938b21083f781ddc000975d9484542315fd75b924f177c81e3cfedbe7631d9fd1e4cf26ed7fc3a6c5a43516e0b1cb8b46e9246c4b5f0e3b67a04b23a76494b5797cf0a3debf1147bafc8842553c3d0f84b96895991451b3842a7c4fa4ec668df78cf0e40ba03e47fd0c61ad1f4c586e8cc151bee62ca5e1395dc80c7c8aecec3c5afbf3c69b5a8b27ff946049130ebf352a1d7d41fbf4c6213b76d52908529862080cd12be9ea8ecd2d724418ca8f80491d59e37bb3af3ae6f53f6b01ecb057277443c2f1d64a6c5c3c4d9e7dccfc8f36e2f72dcfeebfba506c39a17b1b5616acd3aed43c06fab3f24481f006ce121220dbbed98facb315a475a7788d78dacf3d89bdb8e8c94bac3100b59f82a1cb2148dafc39aab9046a901cedccd78f590aee3c94e066f086e2c70862cc3221e5cf77398bcba36d8e5df26bded44ec85f940348104f82a7ec5cf5309ca4838a9bd8d1763b2183baa82a59651977918b9f1a3f7e2ac853933e2149711b09b8ef558d326c4286207b61b9904e5913a514fe4aa9a6239d08ff48577740da8a1414490ef4aa6022c669835687f97e3f224f3235429846d770906d92b52e4c05e00429cf7cdd8539e4ef714e2938c7009f9c77f9e48350767178e866365413d1d7db39e1338c5dbc0d4f35432ecc7aabb2173b3bdcd301393d43653b9db5ad6cd1f2a2f0f95244a86b891e9ae05bdc18668eae5b151ea4c3b7952c88d1fbe81ce073f41b7f7b7363c302664a88c805c6de33c04b2ec4f22240ad913838b95724d639606063f44dd54f55dde3d1555a8ef23083eed6d111e570b44d38cc17a0e3c2fd2c1a910df8d224fb4da644e3d40ac5a560fbd3db60f0e7748db5a2269fb7b0f16f2b163af9af3e09f30c92da12b7b74691caed62844a3bf7201437d9bb563ab042b35cf4811f5ba107774286ba952c798446be745462faef5fbbe49c2b20d15ad8c9c91352ab14057092b2053bce5b66c07746ef873ef0ed07584337c49789e33319e8b46ac48514724ca554f600bfc26125f3d48a7c0ad119d06f36b8a99d21b2c1198736a857092112d25cbc5da057419a0b92558112ed3b57aeded009869c420af6666d5b4161e31de3fbc463f989b1a05230c57947cd353125ec933c9a9b11840b493dac007f5d6c51638af977ad6db5011737495aa95846f87c7a1b8431c60f5cced915b2a566e308b5ad7b679760528df2080fdf6bf18ec72a1b43111fbe4ef95aca63b41b5091166049314746098d4c56df529a87a0bac31a44dfccf42cf752d005d660949eb3d0d438300b40e6784db80872bad762dbffc1f6bf67e118878eae558d34bfe094f3b078b4e3baabda8685a3a06aa49e4d32e428fd5c1a96337c1bbd78a10e61f48c49c20e45d761a9c7ba1738afe2ed85ad44e02b5bb72730014eaa9ef68938c56787875e3a6a0dc999187058946ce938174b412ea0001b81cb9aab5eb2c74a16bb5b899b49283814584b4151e37f7c82c36805c9615bf43e6150edcebb0588ba9c43dfba4561bf415421b8e25af4d4ebdd5eededdef5183413ea37b57120e8920a76c3d78eb9b30da26c639a29b0fe8c8bd17f6c6e8de3093d0d0361ff423a73dcd1ccfc3708cd958e8f3e0a48f60ec3c5a3875a78f82b4b5c6077da4b35552a24b5785a82b7e8041d88c490dcbf9b2110807d86f3a92654daa5d35eff4b6f6f1a52f3e309f960421b7ed435a1562599b7d2326b8150869e345779a52c2f079cc88ffceb233082ba12535a7a3f6b50e988d0faae79060bb58e1695f43bc22daa59714a771d90980cb768b23b505894859c0a148327fb86f946fa18614ce2df92e6da8a3cbd25ae5b29d6e1b8d532f74d864fc3418d373995aa6aa772a3158f31e3673b21bcf2b29124f606880a4102b4c2d2b58a6d66e7b4217a4db7974ea1bd22a6bb864a551b2c1b3d3afe5a9c44d8e4dc1e8143028f3c35fcfc942d24235e49d5a0dd10af1dc1a462612f34f506ec7b01259f90650a590a076da7329578098718e030a0b97db959b44b417052f53cc07e06fe10dfa6dbb45c2ecac1b478e530b28ab4e094fc0cdcf637fd1d16707ce18f47d0766cc0cffb481eb04933d9008ba3987f027ea828ad546675a77377bdd276cec2ccef264c1241bca1183e948ba8a47282696582c54a60c1dcb629f13d4ec1887ade8fd583cb9bf37c8c5f68c10c0eba7ae4a810fc7191787f06b9b0927d5394c5e07940a29fa4c33f2105088acc61c4fb8032c03df240a400ea27d5df2e3938502ac39f28843873e65363021fa8a49d428e415c3ba10ee670f5768f53a894ca5f920cde1e9808416435f772750a8da838c1d512d1a2166de0c2feda6b0dc9152ebb7eb7083191b6902680d3e26b9e6f336c9caf63a12e64ca3b8356d580695eb850f8e67ebec373139a5c4a34f6f9e2cfa95ac5d16543e0e24c9e26ea7445ad50b3dbce7e2533710c3595afae8893b11efca1577557c9b50258760a660c566d359c131fa0f970f4dc2e46ff3c04fbf4037c7b91dce50286c618ef27ab2a92ea59d07a0c6e5e334ed93d42047e33c0bc85ac453c936e64a766d3769b3405e773b3dfd1527589ca53ebaac29aedcda75a14c4e9c74c1d4a7a04db58849ba4b253c428155f2f1f3525106f8ce481c5803dda89fd1c941c21d2ba4d201557b65142f5e2d0da8d1dbd5623c5a551095ca9be4ba4eb609488dfee4c14c466f4f9da7bbb5838953c372b7ab980d45a22e912eebe7773b81eab043527c216ccf13b2c3e9db8ddaf9aa5bf84989bc1631d1c5fcb17a6827bbfe3152641796b3621484e5d93835747ebd18003b11e586da39d7187a6cd0978eb17008d920a38c7cc156ce6252dd80bb1ff35b91f53ab9542a72404f189c244b2d495be4dfb3ec54c0c0eb79816d7570430ba9ba2885d099e43f360c8ae480ddfb2728951d5c65150369376d6810948f7826f731dbe3dbd172dc26830f73e718a3cb228817ea0fcb9d6ddb1adf0fc2fcdc6d25b6f46de6d159ad1d3b56d828b8f4f8b0c44acfa52af16f18d16b8e47ac7138d665d0afcab45f03ad09a87d10001897f71be7da36a8f23064a7ae2f15293c1b968754112ea74cef992b621ab63105ad41771345501fa0f57855092dea77c70acec52731b89f098ab5511c79a9810886ce45064a74e8ed5589295a10c1ae51f1afa5cde45abfbb8d1b385a05fda32daa3baaac985ef4d68e43953d433d0f8b365efa5f86b2bad46d9fa965b969e751618ab80bc7d20c5eee63b6651468e151315a2da07b0133598641539492aecb7cc022d8ad9ba1013cf5550a76c170e8ac1070711c0b00dfca456d3a1817f0d8da0234552ded84eb18f7a21445aaf26e4e7a6801f0551a5a6ffaeeba28095133d823f9d5db2a817fd89433e5b6433e376d511f2e5b5fad90a1e4c097e80f7f11040b31cb5274b8bd394bf665e48e203bd45be321f251127e009651db9bb0c7ff0c5ae8be0d59b695c8440c4ed912b818e77438d6b5e7e5b0732cd83d3a2922405cf25265d28288657e3505b284123a23de67ae9e258869139e5d7f89e7ee7aa1b3b2df9e319c1ee9c8431e412a4a87c8c3bfbf89b68c7a419e628e532ce4154d752819d1f58b3eeadb96e6625bd69b2ab87c9594866f7013e160019e54e58473adea7534c2c9ed7c5d6bd37f0f42f6da374368433b8c046a198fb3e8b9f168715ec8c514575a12c770d7f7748e86e239905e7f5324e6654b14ed71c4de4adcb3b1faaa38542cf168c6dcc5717bba81d8a992863a97465cfdbed1b58a3264ea99b9afc55d4194689e2886ad5c5b8ad2c62b25d21f240bd96b385cd472704b0c8f99e2fbab6257f946bfeeb56537a6aa623d16df54bdfbbfbf871c147ac438b54776731da0a4f09b2a45260aa00e54c1513d30a161e6aa402980146e70dbd04d55af7c665173480324623d070f7edfa8a99510ab79a97ea708c8ca7bec12c5ca3745895c5d8571d7b992a8f0d74c41dd9ec9a294b8094ffad7da461c18c166c2b2031cc482032f2560cf76000b1cb9e85c2217c3a9f03c298954966e65c3c2f199e55d7566b04feee54d132a54a15b7653feb560cd9e174c8884f6b5e3b5db08ee7058f9158d8f021eab6eb32fc85073a988a8d9d27940e141757ac51c5634780745c90964aebcfc3be474c590db867ed92022e466bbd18b4eb7c19560e542a05e42284f897e95fea3f1f39a6ba9ddf12a990a97953ec936d1576926c8e663d005b44386918d8123a5f8d9a9f6d23bfcc3dae0ed44aeda39e1a98adab18fe51b14859ce4279fdb42f1a095601f8d2ad765073b05d97460bf96a19014e7541c512443f9d792d8ea8f904dabc91b78eae144a6def0f21852339c360f7bd78fe27d7f425e8cf5a485e352dbe8655e794b1c64f69360352c21a7f3a04443be70c8a2b890e57187d6b9b4e8df7303a5e8b003a0bdc13dd72063b5943b97a10ab92ebcf1db676b1a9867eacb22e3a34da372592a7b3cc69dc57ce5e090818b33bb180647588322ef14a65c1b60fb8af914f3e22dc7b5fe6e1cc70f47a840e3a596307837c439b1ad3536f9f2195e65d70d72054519b5895272f6c5f3638180fe2dd5dd9cfd25d779b6b94667d19022c24a01826422cb1a0fa498c1370f5a3f92b3cb4cc69db37a9d639fd7ef3ffefe1164e71088d1b6323397e2be687ffaf1caaa88bafe278e6309f693cc5ffd40749bd5da410e804b7221db598a8a15d8e7cacb875c7f7e09a63dbd0cc2e24c65d7364df89515fb04048ae9abdfdd66ad0657368a70d0eecff33c228456d2b33b1eb1b927f82c24b789c23ea874c8f07090e21d13bad565bc4127eadce98431b80aecaa5e200b9c8b01d40ae4f183b241e32c92c0ed023761ff0a8a8efbda502dfdabbdb5e6cee97ab96ea8a6916b26d6cf429a265bf81004ed6a8d2e5e33b333ad681d399baebd6c723213ffef19a6addda197dca84c80cb9636fabb38923721a2a3f290c4f21997dfe2121d01c528bc098e16db55c39ddb07a906323c7bf7ce13a32a5b17af61816dcc0f59853c4271d41918049e985edfc495f11dd92c8a58926ab66b7fabcb0486e80f4130b51f2164127cfedd69658fb3682faae6ff61fa1f8858c96d9fda71e57740f3c064a1c4e4187c0b827402ba8587f224fc44860366826f7958d9eae898a0a34d7e92281a1b2713c332c2fdab304ededf75931c06fa7d5abcbccc6123dd3750fcb893862bd839f5b961a3a32e28eaff6419351442d491a51a0aa6957c4bdaa93336ea67d2307118a89224cc030559a1e8a540b3731071bc7195fb462b0c0a78baca7837d4e05f9f5da1278757b4f7de8a5a2c751aa8b88d26baa2d25ba88883db115f677a41b30c45c5c3420a5b5e7c788f39e6612cbbef222c2e2936d851f7e4b6ea689c03919ccbc0c86dfddd5055d5d68d58c6b123958c49407bd319c147d95ce689f51b85fad54ba99fd933c624eed16de5cc76db0b4ff20841341892ba65d19a4cff36c6ed7b9e61d42f48d716097721d8113b4c5f4423b5c33f87c2f710383c17fb368bfe27f603cdf6360e864e938f3ee8b4c80a8e27d96f4de22c4394c897bbb23cd718018cd9e611266fa0961f76219da2e4204f3015673bf2af097d0bac35fb0df2e8da8f26862c0deaf7ae136bcca16884f03ed0faee1b23289364d0a69e838b936d482f28f21aeab9aff71341a3b058e6de0cc5e03a73ca1a87a79d5a31c423541b0541797fec8b886f896088d5be7f16ef05435c8058ed6b10e3be378fdba07d26cb742af6d35798648f9d2865141421c7ee2da3a720536c269e9757106c23a7625c561c644e2f580ad996bf8f190202aef4673ad30fdb5118b1d6c34552d772455c99e6f93f8ac7ae866f2a8875670a12808f8ef8c9964c6fbfe2202f1741db0931b04147f0ccecb835437e5bedfac0bdd749374b2ff55c84003d236ac2df7f8548f2e93b20493ed7e653f51bc25cb6ec43d273da8dd5cab18508a4bed7d6fcd29093adc717194f457f4d7a3c11458e393c581ab97dfd30df492a29eed36c34a3eaf880b2328568966327b9cfe28710f21b15e8f47d1376b95c3ad1f469cc4c6f9dc8a5521ba5b37e5299415a197d25dcbff973be03012ff6f1ed6abccc62559b103db8a29e89fee674444071b66a0151e1cd467058b1018d80db1b1d2934b7a5f1c62f0fa19226fbb3a4a0f315740934f0e9f9c2a9b98b1b6f0632729f8f8841d0365a225e639638440f3be1adf57b169919dacacbd490ad1be7d60da5bcd94850623a168c7ca562b54b11cfd1f22729ba18c5a2b64df2848b1d7b0e64aabbd79a1264df18c7f43722a98d59894c0515dbd66b1648a5097e457d16771e3dee8a1128ff19fddcaad9b3f7057d32cf95dd7214b406c2030ece50f5661afbadf19fa00a42317e9f4b0557073df21ae1f44c339bd9cf38c86e011f669a150f036d779514db3322c6520a88dbb50df07fcdd7e55aa7c99c1b40580e097ab836a8336142e411c313223bcb60cdc413d9e6623a569092477963deb54490ee457f6420aecf96b8207cabcde006069b02ca5bb4848c62dd95c5c17c594e518304250c4a98432094317f32dadadaad1f6d78ccd0093a9cbcb58338cd503a7322c4c496da20de05ffa25595d29cacdff1f8462fbc16421ea4a62194444d7857603335c7c97851220a9b63dd74add559aeaab0fec896a459e67015aeadb7c4c27ac3338ec2e99fc0bb03210b31406ec8351de8d127f0d1b5b7d747b585065ef8af3a3c5e973c67cac2bd8fbf68bb40d27445e673ee786a315ee50b32e5e056b834d17e736255f6b69a40b59003a33e5418d7cabfc71396aed2b87a213b7d4a5e309285428565bcb3aff67025a27badd1ef6047219a656639c59ac349b09b2dfe713eb467aedb7bcd28857af623368f76e0040e0119d4286b350730b988f8fac87b2e163093421d6f53176a9f8e7b04805486a87acc95f8cf7c3c494c841c37a727ffea47e7dbf8fe9d42a1a1dc034f229cc8e7b0c9a12421cd86ee5bedb58d917431a6621542d46e20f83e7616b9435afdd5156b47e37a6aef7c07bcb8beac92214a449f0011c54813e1b656430a497e60584ce871efc7174422a06aa4483a8a5d555b0bff4654133d220a7415b732c1f5ca2d802c46d1b7aad0918483f5f061eebc268900a096247e602817c9161a5cabb370dc32522a25d2f0b741dfdc4ba01f960894079ef0b0680dbd67239e1f3c9450662fc767c4aefec309019ddc21bcd973c69867d5248b8d0eccbb1a3e16edc6488cb9156f8d5c1e64b6684f3ea287a364ef4ce3645e0d79e9376398348fe4cc8b1d92e0354cdac215437aa4b27ffced9f5f1d3014846a181d0190e498b4c9617aee8f9d0eae9612c63503566cc53fc5e50cd17ccc70cdcfab32296d25398e7aaee543d23e4e651316c40205719a853debfc563b007a2484410368685210d7de90f1b9f9a4a4682f6e12ded445cf09dc7ce6059bf48e2de2ff381b72d62b66f720f611a4e7b2f801a861849dc5093fd60096abfd97efaf0163b1c3ba36df02f67d60d1a70567049f1d76637e734f5f8079046044e988940fa5a68eeba707d2597dcfb8d8cc924c98773138a0595183928c63159151ce8455b6c31a96a2b3d8b816cc9d79481aeaa79ecaef7b9aadcba608000576789fe59899cd76ba2609a08456f57aaadf2811d4ab5e98ef47a1b19ee2ec08c736d6a97f0f698417744a7207e163caecb9ed6ac5c1a241662c03873c01a15bda8ad890e514f04dd545adf2c2d9881bcf4e3b25ba98fe1e3edfe0306ccf2d92e9bc4bc484bbdbf0f0c8f03838da256c6e8114554876bf8247e0153ca78012bceb889c6ea7097dbe3fb9c9a8f1f1c1162dec95199a70ea21c5b05e171711a204e78622d60d3c0be3a62b5934f9d1c080f493d5e3b7ce0fbb2ad2ef946cf9ddd829c4e2b6b29935586e397a8c82637c1f69a73439d62d5766b735a6b9a1c9b843346056d6c9296a7ace078225e4e06ddb3ee422d31da099385566c1dd37448d3d13e6ed0252f5bc19f539fef48a51ae37334de42274894fe9c53ed0bdc236047df3b21fc4dd4e408af0c0226d96a2f2eb388909aa0a94f5181b941afef261b431bd183438a841b69b364189b1559d056703dc2db0f2cddcd7338cd141059057a3c0e6a0f4c73b617edc72779c5e6ae0b12478749e3acfb11bd663c53ceccf7a240a2c3b352626f704d8bc26de784b28904ce8d2c3b082480bc4647c7e2fae6b474acbfda8d26582f9fc21027a35c7ff8a3129bbcee94a5a72404e3f6648b9604648534492a6325f2e8814349135bdcdb6428ac583f9836b3a8fffdc5d838bf619fccbe0c42b2834338205c9ee60ebdc8525efbe83ef7b59d74184c5981a4510de36a695b82cbade3a1fd4c3bf3fa8f08231995e8ae36216543c987944bccad56a2ac9d0caaeb3f0f28b2c1040896d580c8316e5ee880a7fcd04c82356b61e9f11b0efb08d85663112fc2c5bae77be63af834baaaff1d8bfcde80ec244ceeb83ed03fbe7072980a1937d10db6bb1390a3fd4713855455b452ee9a5647b73e08946c2a113e921abc6cdb3dccdaafb2faa2bef5f9d31300a8dfcd5fc1d00638c607fd0f8d6af98155957df483af701f9385b8b1076b4408a4f48f7d2375605188a957712e7ed6dc0eb67e5f17cf514a27c4eff5d96e8d8e3c2f836af2c1cda86cf3d7ad4adb02a26d698f7a434de2818b14c27e97ce7e69c2abad4658ffc4ad8b1aac8c9af18cc3b3430cbb1fd1aa00407ad5aa7ff3ea6b9ed96b179510deaeb111fa94e5bcdce8cf91dad490c4583d9dccfba6a8008baf7ae899d0f1b476032e093a893479605c84737eafb8b9b253553af3cedd04962adbc99f67f453799f521d1b18cb449440311181306fe208d5b07d887ed816b84dd821062e1f6167863ac27b74e8a33f4f8db122ff22cf04082339bc8ace61cc7f172e9ac3ec06e818dd3a334578aaacd319d56599e2418e76e7699d2f0f80e1d80b3e6490b92a4ceef6960fbd66446b55f94a33fdaf522d107e890733473ead3ff7f526b929bd62d576bc796df225f3e6aba652aeca1072346695eba244d022d70bcea6eda5a94876acf43e52c4914fbb18929d0b8bcd892c699ba4fc544be1a8935c20d87f3b89bd0bac32cfe027d620abbf4ba709fc1d9b17980d57530f728ebea6fb47788409e023ebb389a9278bcea141056169d079691e0768e52782653d98d95199546f26f4fdfb2e73291a28652987769178dd9bf337c2b704d4691da8a92546857a90803f626b8ef39d43a5ca6cd4eb7302902539dca3b65499f474100c3b9da22f922dd868588035b27a68094f818025b8c307c048e2f789cbbb2b18cae0185dfba6deb33cc4cbdf7e568a16836e6cca5077f737aee0c1effc0909d02c8870dc14b3e877c8a7194d6246dd58f45deb731b9c61883b99f774c1ddcb0856352d3cbe78842f778d91acebfdb04bf5b485bc756eefd55a9b0f204a1d4f5218c3ef3ab428cc938026e7f86beec6fa18ddd6f5f82f839cb755b94a17fa6be88207f0ca3bb9c41db2d833445bf9aab3179f1426f72709ef34f40f8b6b2dedfe64b5525038386d8cff62c89bfea31d4ddc5c8033eeb64557d05ed41dc86594cf89b62e2283af2447873347be80c2a277586bd5531b012fb44dc361cc88d13e2ad19719a8ec6506a9294ed9f7db6c77654f82797d839f29891537a566b791674bd08acd628ed19311c746ae4f2b0837efeaa837b443bd2ca4cbf78338aaa67586262cfc15280f6484db3c4cdd13453c23cdbf20db659c937a2336af7ccedab8bf7f98e084f342d13b61b6723fb014dcb27886dff4b9b97e98228f75f01895a7eb13d2d130c9306a8e312094e5903397c68751232a1464cae45fcfc94e1da48037689135f045f656f9637f9d0f9981be46026f00b05741fc88dad807749ec2408406c9d63c786a7acd62d7a44c5eca45f8e6ebbda7134cf21db7d2d03e771c24adcddf5a9362ffd867c097ab62b46ede71b422f903e59491e7e72863b11a8a364528a7c5357f56d3e733184798b7dc388daf68ccfc75eead1465b4a5f9aafc1b5277e14f338480c986ef04e2911eca5e37fdc9717c9875ec9caf35028176d524958c2806c284dc75e1327b0e16f5dc586ad46669c33e615774b81575c52c8b837aff0f343e836e3ccf8b27fa8401ae3521d9acc73592658cd3cd3d010589de290a7535a57f12242c9245a8c0bc7ae818dc99a74e15082e5a71575cb2a970e72646254190cfaac3a892a786f04b7efd2fdb7334eba53ee8bea5ed329ae8b6184d646e9c5acaf14fa97f221315c2db504335922bf75afddf82dc5177462cf223f0fad62ed4219659d8cc386238e6107bec8093c21f6b184f2149b7e53f96deaf9e162c0b0675f263aa37fd42bec28bb9db5aae0cb21347c1d7b246c7485816065c5eaffbf9321e26fd7717e8d3ba53ebea0b19612ec3d6b0a17c93e1c2cfda0fa9390eef9f368d3354f17cbb3d50cf7360b3639080d9a77bc0cb95d222be2dcb352252e1015b25fe59b4942e355e0849ecd82e908d82e9ded587bfed0011fd7b99f1f6c8c6d74b7762e46aa6427628a4d86d61278758a5c9cf2c2af09b23372a536570f6727b4eb05bea5cb4185a70b43a38c94cfd43b4c3b89aace11410a057347cd0ce635207752f97e04638f182a8cb1f4121241cf79cd67a0b10dd494e356ceced2ee57449e20dd0a14764128c5650b91a48d542deb5b961d20c00efdfbf5c76a20b438f721ce70bf4026ac400b83f339edf157c85389cce865fff695da13a49361ce1b310c1e5f5984646c0441b4981168f4056adf3b4012f14335fd7862b1c33a0761f917473b2b65a9b6fdf255763d00fbfd32a23119233c10acc6b58f43fe5f234be18eca611c9eb37d592adee20f58dc8b765c12b92e9f2e138e4155534cf00d50c61e12215bea246fe7283b3eb652cd7ae5b6b61bec551331429d18dad2317fefff40587eac07b100ea9501baadd13e10b1de6446eaeca92ed73b49d7759f71f590117239ad6d99c53ff2b6e4925ebc00ee157d237f6b482af481896b3d6a72b499be5e349c48a0a902201ca99f16059b5467841fd27373ca3469f4ad80210177476728868805e89e8d1077bbed306d93385ecefa04e74a7557d8d7e781d6e8e080ef73237d5d91efda55c81368077f1736e22f2e51cdf68bb242b92a465e4c79e20fcf1ae4cd9630da414d08107294a681481e7b49afe3751d999b9346022ff490cd311b3ffdb1fe2a3ee1dbf07e72f141a1fa31dfe180d2545a566cfecebbfcf4e0891c9efbf86fb318276433c8fd2a07d7831e99424c65db036b898bde28746b4b88b571bf149df3841f746e3edc17a7cd8d8f48c14ee9268d15be8c5a5817f8a3d69d7204cc3ec1933c22b18528374be55371ab180ad15aa8d5e8c0c969c2483dff13e9091ecab14ae9364fe92a33c1095bbc7666c8c8eed7f9de06aed527419cb631d5e22e7e4a99993c64199f2fed9ba1a229941e6d4399ef0ee48ec16937e8912ada1cde10fabe1416b98b839f6558bc535c40d33b8eaae473b697bb063b9192c56d540ce0e7ae82a0642ca7c7c720d57f486e93e39c86043fe8fb1ef57fb7da322b6295bd26a33370872043c1cab00b57e46fec1ca1c861fd25b73fb7ff88da687f9c17c2cca664e757335a554fc22de53f270c73dacb3d3e9b422c073185eb1d41829021867a6ae2b9ec4942dff467fcc2e74e09910c2b1db32da69fde78c6fa45e45b4af9a49d5f6c7b0694e854a779ea26a02d485966b555471954cbf52bc5d11c5d648a0e77394e155c0651c587805f97e61d7bb6e67c7ccc34e669123de6e826400e869f80d4e4e63d745b3996382fdac91b934995b17329aa7eef437928a41f3c9c49a149c206641e603e223e12b3f01e89a66fca47df6cceb11f76663631986e30010e14898f94334ab818f385591af603b407d7f92d233d1fbb937ec817ce2beb8ece7cb184dd508a390ac41f5ebb3035c47335dc7d3b92bd35d71691edaac25d74834fcf01c8e414d434bde79fc51e06243f16903b76e4a73d584e6cb0a07716250729f11697bfc9f507b6e2ea2611b4cf7a6417aa857af77c42d7d1e9b62f3c6786348879ab21dc2bff93a9de41259733bcae17d94a35182b48499e3ce3b7d819f958a9f4ce429d16dc966bb7c59ccd1b706949a857168a9c0e5c81ab4620d0007eee908bc11355dca464edb3189dd4e9a141bf529201067f193eb211923ea0df58c1146406908b5f32569b1fad5527a449e83b4eee2cec6f57de88af41dd6bbb11a8d1d373f81766d1c028c8a7f6ef28b0f318c511ad996e3fab64d6ffbdd4e8a54ebacc1d6649dbdd23783fd764c235d023038d41c39b1a9d2d399432ae36e2065875b5c3b606d2f6be5df810fd65401eddcee23cfd2d9331c4f2a825db7578bc28b07c9a23427d50bc51b849a9fbeafd369d6d52555d815d0cfec3a076f3bb5ee43265dff4e85f61386a1dd4e0695872a8f6e931f2e74e931f4260ee2f072f1fe377fb72c5ee1ca4df834db72bcce6f6ae093ee1e5ac25191e982a72c1f782222e7d4d60e552c2f429e19047c203ada53feb5b8f2e5c2d2448ef1ef5f473edacf5015023304dc51cfb6b9d0de827f3ff60e7fa39b2077625916f44b840d61c49e364686e38c5ea03dea81692c4613b42e0bb4196eea2b128aabeed2aa018024edaefe7968233625c86e9afd5d88bec309dcf7de656ddc0d755fc24f9fea425dbf40f2cdf54548377d91eb3fa5247566e6d25b39baee21820b59e5885a0fb8645465e6ed36b43924f24e061c5be6eb956916959b74630efdea62be0642340b5f1fde0521506db23b55c822b1e84802d0e126e6f02bbb3db375d41b352d7414c3e79fd58f31f14fee88426e1ea38f8d25c342c3bfc357bfcdefd4cf2b18872d9d86593ca004f3dbdbd6d55cb8a11aad22c4f3fb29148174402999c79abb88bed585247cc31c0da57bdd409ad0cbd75e6bbd3bd8540321fa7712d8dcc1054d6d56a69aa11ebfa39f8710f3d86ba73b44f1d1445468a19fcacbb27bfc090d039e713bc05f820922b61daa1ee77cfdb271458bfe7fd22ab2d82d6f47d6c90a7eed07f903a23850b8b9efca34bde365a17b82564651d3ad5aeb28c9d632a84055b82b3b1bae796df3be9a22d975f569186a19f20b20377d83efdd8a588fe6f949b464ad9810fba5a15950181aa85a31ac684ee6764210235a86fa6266cc19c9b27d400eec790493ef1bcac0929855688cdfab5801d4c04917d77ffc936a117a36f65d300cbc2dbf21739bc42b5109faf1c189610631eece226f38cf151d8caeff1387ea9d0077931c7a72b421dc3002e99136e1b6517650477ddd62b322a0f38f61f43a6087dde916828079b8c44a5da82bf70db42d4cbeb645a69af24b411c77353a89c6402bd11806afd9e5ff9f208a2ff1c6937a03ed71dd3f9165c1e333e38eac528d3b72237f2dc5dd8eb6129ac32e9d6dd18119dbcb22f99c848576542194f80c90ba71dd53aa176ca3438a4f3f853cab932d03ad0d63eac2452c4146d82c1ab6b9ae12fe92ffb21c70b2d37772d05decb03e375cbb47d92aab92e4144b84d7dedce09ffc653c1c6a298c7de5d7d198072ddc15eb032f6db618d51870eb80f4720c397e2059d64874197f37292f1e95185edfd9959b237742eaab22756acf877777bd8c6d48b1c22e3cae1a1e99256cccbe5d50b7ab04195837b3ceb0879497d3fe7f5480fafe0c4eb3937969c3ed3cb89e9d54efef92ea0d903a30a29419f2134deb6703ff762d1642522eeac6fbf94ca229b1b98deef13029b3104f9acbdead5bf4c39eda563e93bcfaff453fe137fd9b9c2f0c318d57b9c01b99ecbbd857719e9e0fb20a67d0316d845e68e50f9011929e959d7102689a58a8c29df0259178cad6a227e80d0ca4d2f43e810aec913ceb9f0393f84156004525d9c50e8a2a9c31fe9aa068b480e169ab13da8ddc53d719c53674e6bd625151d083fb7d6923dd5666e9086cc7335e9fc1f6bfbc8cf60a0dbbb2d992b646ef3d572acb3841ac0b888147cb875f6f5f436088262f649ad496a4553bbcdf69d853a66f29999b4edace077e43cbab38ce501fb400ea9a7400a7e679b4ec0de31071a647c5571889f54d1e683bee5460849cc36a869b539671ef842a47e7a7693465165f1e6361f34a67cfcbb1d7e3be19aba873e54b6766df144038eee108898c41ebb4fec1d27208077704a8b3cde0278ab4864f95d50c3b2cebe125be34477e1682d7e34e3d1139bb454fca3aa44bf35dd54f6038bf919a8d96542ff3c9850ca48f34c037ff652ee3abe9002bc5ffe377d099aba6d744b1cc01b103bd31847723ab2db480cdc76a5cb7375eaf1cdfc49a2bf908c03ea1814beee701cb3f2b4bd4f572fcadd5fae4d273d01445c91e5cfcd4413145b937af5f159bc89ec2803fb3d11297ad164604d4145047035712d210d06cee11a780861cfb13bea707aefcac242acd623940952595e3c65993d33062805b280be0542b4b849db7c49dfed6f40e9f9c02704e553c255e89a1680736f87469fbf4d8bfc6292f3b37c96087d8ffaa9cfaaabe4af4e0a12bee0c7c762abc5ed7e86c723819344d7fb147a6e976bcffd8b0b871362e49931db7ec47a4ce57d10a1aba99e691a22d2d0b16b65c6ae9199346a68e5c4d89a3d21e3adf2da38f12b4bec26b524d4c46bc11ed6ea48cc2515049ad8fba31a842944cb2079f603402457b783e410021c7bc88048f83caaeed90ecbdfedb6062270287","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
