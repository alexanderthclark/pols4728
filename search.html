<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"a53602e0061de01f387e500fa0147331260058c9c062fb78632a3b5dc92dfa6b63e2ea6405ef07d83b3f566b64ed5106f03c2ef7eac9a5af43e5d4d51ffffef5fa4aee63bccbb2733b3db6e81adb403a037e402dc55dd0fe8ad4257d3e61e7a6f733d3bc3f66868089d1673c99e8a73d8832be4afd6bd279667851b137a1a32e808ad5562fd4e443d805ca1b4608b0ea8d837d9714c13b9a6876c8848af160b650d3d276888f8dac861013c2571efe2b9dbf7f30af1863c47042b2842444f26a9a216451adc348cf37cc67a54530d74a2d352f39af9e70e70aa43acf940fb968a8151e2ac3ee21c61e182f59867da2119d8ccca1906a3025a51a235ef570af049611cf739bffbbdd3f48308bca4801c4c6525b22c0971438231f524876076e5901056cf8e9e669567d39304650a80a06964e47f558e6fd59ca7d39b08bc8eb5019ad0e9360aea31cd5fbf005b740bb969fe07f79cb4dad803c025d7164907fb33740e4bba64ae76911a580531c8f094edf67780154e7738adf027af78ad7401625e3e41973788a6a3d3850fbf13c16f79b062db84d6efb518f78ed10b41661c335418e20e313da5ada260a00ef79d10a44c4ad02d6735f02fe3454954a95946f26931798b873cd585c8386a2e3aa7a3fa06c8efc6b4086d0d9a8f367d4d3b0ddb73eaded58427bb325efb36f29dc6f360d02d107d8ab1cfe05c257ab8983de5ede43945f020b41f1d60f20bbf104757299e0a9ce3209ebc1d3837b8a348414564586962a191e8b109315a6f46522d2cef286993042ee7697c1bb062ffd3bbe3bc147b853634013651260f6e8eaf118522bfb0223202250180a831e43ec7d7da6bc6e1ef3530a06c1e581df04072f18394147fe695966b52a2c1f3225750bdf3ae98b53508de91a165f3a015f9e284b21320953ef389080aa5fe30b9e32fca5cc9fa9a7127ac9f486ae16d34ff5d62ad0e125e6e0a1dd3930d405ec9c016d122a6448223b022092f4999606e3e06bdcc7b664409a95cf954bc92804bac744b16fdb19a3fe6e467dd57b73c00c1eb858bab76a7182fac1392b5cdb568fe507cde433aa6f316c28eebaf0dc83321c411fe424b9fc9328219ece559ca1b405478f3286a1d7abb2cc3559a35055f2c3676ab7b528b364fae43f6b17944a029c8592477f14eb9f6d7292ebb3a0b63e3783a6a1b1b1d4b8eb8f7f3408283e8ae7fa87ba5f775adc6e61cc999d1bfb7e67970cb6bdca023e9ea02a180cb3d655f9d5f3b7c287d675b2279557b53deba772827c9a32de6183da63b01175118b1a9c0a522353d2394aace8e1111e937bdd922be3cb15d544cd85e83b2de6b0bc1661724f4cc50650a5b6b05e31d78592247a05a38491d0f5873f1f63c05be8c5353e12d079e83d79326d3f965f10186279df2a8814ca1d88efa19b6e6ed48d36d09cd21ea024b2c97b81e46ca48eaecc896d51ef78e0d984180f432e60b9643876fada2f18672b2f0792021020243e8b9a32bcf2193e6b5457cf9ec700be76b803c326e2a2ecf58f5ebd33777f616a2c3e9052b49254810134584a0d1d3090f96eddd74c42907ae16b588c76db2448496c5b0b0106007486c3218ffdc14077f60b8c584ff0935ac10e623faa2081db84d90562d71166545a792a1bd61adceb2d24ae8f75b2df728ebcd968eca54bb28ee5aa24b7905969046832991e3def981cc783eaa0cd0c5d1f18ba6bbee641d883d445f0ee737f4e0ea14814a23c5f1098dfa229ab4f1fbb60bbec12fd073adf9afa2c04d0968ee77d6093328cdefb30ce02824ca56e9215871a9cc2a09cb969440bdf8a736246b5d38e2cdbae9806756958e10e17f6b6ea90bfcf2e34864e9288716097c6b3de757318021ae708a760b73056fa198915d5320649b33011d6ad0096ce5fa951524c44d9aae202ab43ffbf45c01c039ae0cb4402d0e477a23ed58d875e40433635c5a3072661762e78679cc857a63b4074bbc02be2e915336012d44481b8aaa039084bc620a9812b7fc824b2b0f1dc9b0f2dac6a86caed9c0cb7a6ce7679308b59b2c5521cc17ed8ab28460edb5203784f7ffb321b0933b915296a7aa60a4a7a6668d4a6d4d20077e1bbc02a7bf8e07f14234eac72d5e84669ba673084c211d6a5e63c86eddab0eb41897da6406fa53d473bb8dc22e6971933408492d9b1d636cc714e1515b4c7e8d7a75562d3ec3c5da77ee83a1a2c551cfb462d8f8643353a928eddc112acf286a010e83b55ede1e482cc6dbfa801eb61719994d8223e2d6bb287c94896de787dc85727c4226621530814c39b0b55f6f7a097af7ecf49c6a689b3ae368ceec985d754870421ec0cdf995b9b09523b5674a97335146af6c0f093548dd562862c54a1096b283e2f331256e32fde53772aad93424a113943bdf765815407c509d8fd7bae8aaf9aceb91cf8e5206689a04920f8c9afbf78b1c29a86c99e9a00bc59bc0c2211aa81e96276790445c94da4d8eb7720c9ff69fe54a1b852c5f8bfef012459845617bc1e8c400a5f28e84ef65dc292c4c206ed5afd9a84ed7afbf9ec0281788b49c824fb5352be639f9ab4d01148b0f3cb5a1669025fd0d3f5eb43c0e7c959b37c4b412bff2a47eb3eed8445f4ea7199aef5020d04145a42ae2e394a54a7dc0a1468ea87d036403d18284483e9d76e26c0d66d63fda4623b9eb9c05dfa8fdcc90119f8d298dfaf5d0703cd1e9964c3923457cf18da0a654b384baee2e8693875a9afbadbf145415fd4d8493b9e194cb04f87efac3c0bb1efee052775a401c8ce5ecdb73a39dd99142570e62c4795440517f27ffb9bfae8fc14b89718750e42176e3996dee99401318f2bf1fcc52ffbb0ad2b47afebe396955223af5d937770049b9b11f92713daa2dbde1c8f1f44517d7ed45bf282a59ad57054419b8ce55288bbced4c16077f57a8edeb72f5495f3bde6bb14e395382f2043126d9e4843e9a62be31f050ce3fb9e89cdb288b79b08a69d860a28924d3098fc60a3a6e17968c0b83d6b9376e8d5e1dffc0476e1b7f9ee353a349f5e61429cd77cece0f15dcf4a2da210db49b36025370293eb2f8b5505e05d4ab61bbfc8d9e9f8b95bcfdd05d3164bc1ebc04d9fde38d97af3d0d22a7eb1566a0201ed7f7b6a90f85a08f0f44587f012651b6c322f89f816f3582d9262fc883062c1419b1659820141eb96aa44ee465a16c2e59b37a954ef477f88b7cae70c387769bc233d2e871be0a7a44bd7218fcb2ff5a702215acb7ca68ae29df43211e92042cc2fad47c0e6e22b895dc2032df5a4f6d4da3ade347e2dda8e2494733f50f170d3d74f13e5504b96525b6d7aee111051ac98937da58b4500953f8a2f87df8ad87ff8df3e9b351921243c7135a290509af1b70598ab50fc6b252884591748d120a2e50ba36c647ad025c9de6fdaaa16c713af35ea9e83379d29abb2119cd2d0489e68459ac1f1e161aedf17f295be81e6e3d17c1f3b52d915b4bdaa0d920a5f5c4a39e17438b7ca5a7f2783d6d7b4ba0b64902197ffc40f57a5078368c2439ad700c42ff2d2e0b6cd821d029def122ffa345536b2a914a332e1e7e9dcfbb6a3414727d84f25d1ec7d08d3a211b6e1cb088fed52b83d128a8d1e2326e97bfd6524bd2e924771bbd5a8e1a4d66f8df698bd243be69fe2df6788388e59cecaa308ead7d78b795e436045da1f9843dd6dd72ad42a77f44b9574710840e2605bd31d971637b423cd3db3b7f5e97ac4b6e828dc820fa98b307a34d4fee01131d616c587d2f6f5245c411d18b4981a1e387b5c56fff8aab384bdaea1290fcbf6f5f27c2f35e6dde55deec7c455b519bf6f70bdd20a6dde9dfdeb7ed0ca9fc21d374006b8841e4c1a4392ccc251681edc2d69e0b6a18c329f2e0a85d7f70c3a8a5a3d992c4e8b958f8c8247cba25463baa3631c814784563a5a42778624b56f6e27c5729054f9bd6194bdf90154488070129a6ac802c044ff9de7f9e380b91f3df519a6efb34264b8da02d194ee1dd90d7fa9dc7f9b6a28dcb174c583f8afb8beb676f85f4b2c686594dd499105b33aeab06c81bd9ef230db14b69457395a189f15240495d8d0bf8afea5fbba025101932f13bf742ba8b049c06b9fd73814baea04b7ad4303c0c225cfcfe473f471774d6c0b9b4572065737a532016d6c88efe1a1752050f5b99e3bac9c7ef9dcca08371ec93ae4ef9e72c51ee77596ca351a8fedbe3088a26cbe902929e6788b1713a640076128b4d9636c7b9263832b4f8badd7efb69ecd3cd44eda3a40ddced3e835cd9635e18ee16e19a60e8b296dc53c3136e50a356c964ac6303ec7d49b13af5320f67b69dad590fe0611aec86acbf0caf220ca59abc9941b218f383dc37afa6798b96471b7a4e56d8b2b683efa6117bb2fb643a9b268e37852b0f2c9f8fc6e47575184928ff815170c7b2f881bd5605070cbf369d9feceda276c9f8a408b1f9fd8b672752cb63170a6215bf86d85fbcff764626444a550229aae64cfa234641546b2bdb919077eec49fe95e895aa583c22ba4bd2ef99100904a00a304eb0809ef9bb4079a6b6478c94e6049ee4a23d9194dd8d7a752a4e7f02b8f6afb3c4832972ac591fe6cf3a0f80b608312489baeb4caa9d70b6bb88ed6845394e0a16f4515f3ff78a5e19b1b166893461733f3ff48bb9d8dce4b3029a6c0f5bee585e5e23d7f25bf59f9d45a29cd8c27fc0b4ec873f641f66010c7e9164760d6755ca3a1544e1784f62588bbffacc4e1a3fa920dcfb9a87174d24e47f0f8eadba3ad148c3cad37766091aba3e3ef5325cb3f16e8faf5e38482014670eac9b30899058d8e3fd77f614c747eb2089ae4f09176296e1cea432126baac5250279a2ecb1a4aab1646a798aa92539a1408139c429e800dd1a68d978a11a30dc2393094b559ca94873c37205fd9c5bf662f574999728cf90fb030f3523c6947dc6bcf3dde7cccfcabb98e36a546f2707ef20eebadeb8a350667ca48f6d89d682098b5560f7e087516637190df664cf0f536a744b09f063864f5c62d64a135574b36e39e9cb4565464eebd9c06c286e150544138324c7399e6486d4a2257840a422a6f61584e3f9bee5d0a1e00460374bca99e5dc79653f21228af48f435b1906602cdc35545c2206134cd9885c8c937a2d41f6fa1f5cc840b1417badd8885bf5cd37118fa38bb232a7323b4ece347bd0763d14458cfcf3f6a9eb063bd2a4d27071978218619f07cc66bba4bcaaca99d8217ad9eb13e692e09d15c1709f2d6534ce1336f27f7223e41e9f1b6eff3fa13422fb30bc9da14d012800aa7457a958b0c8d5a842ecf030608f6f53f2fe4aa5779077e2edf2404041e3c96b2dcff7682181a061d4c6c3a963a9ec212eff4a18c89f293a0f36529e1a02c6d2fe7789c2c12cc4ff77525867a07b80f5ffa2e24a06953367f09c1d99030c52483f47d0af0b50a9a97ccace20f91674e0806f12a24ed1fe7273739be227634e3e2ff020bffe41a8612f43f41b77c536e264308cbba1de62f8d883b2afa69a3021be9ff0095dea53f424f069a1a82096858ef922638a00790d6bd14ea7420972eaec89c277afc0d85e740a88239ac454218ad2240915e6ce9ce37c689e20837b9a538ab2ebebe5da3c7d4487394ebf4ff198ae623a747add9f3d16699d22dd87f403caba51a30858ea8b8fb62d98f198075fb46171ce267187908925452cc1487bf8fb22427ab4b535d50aca28a6d2135b523f8d044f7efb7ea70ddbc2bec175826cec29e9e8a1aa5760dc70973fe5c8c49e864872711da5604cfb6f331f677f273508719861e9917392f8db38ddd9f54db916768192965a821e120faf1df1b7644e82e7d4332772fbeec52fbacd3209bbe234adf0666809742f0a9af472459d030a38dbdad13d0c210a85262813df135f3986d891c71a9cb1179f5dfd47b9b0cb8819d78dcb8885d83c6babc67fd614dd1d54e00bcd834e137ab391e0c05c2f12be20d7addbfe100a37977c639f113dbb780ea3fd913e3c08fedac33e3d679e1b97d65af1f14306dcd5071a636dd0b97085e488c0eed7d09ec491578771b573236ddb364c8e68d53067a28998755936864ff033b4722770fdf11b0579511f992fd246117bb5ba4ce9e4999aa38d2a894c3626ef89ae102fe6ddfa155950b5dd1f474a923ee0e75bd01d3a782d70d04e101998335e363bf57c82cff1c0e8e9c30f9af9a71b97f78d999439a877d4ade7957f0cba33fe02290946924fcf2d771b87a7399493c148ec5d75951f3e05aafda9b4e69b3567e844d8a963760e5c2e585938656f1ccf31453fd2ac244e8cb23d4c961bf8263a21f5429b1816dc6e5ec6d0260de235c2d3811ab00254a7cca9fc0abcf2ded4bef828e8a5bdccddc47484ea87b5b831fe8e3b75089481dd85b6ec52a769a89c45a143b1c091968d0c87e726a6a27b9a279f2154e114586823de49450cc7d22aec8b63f853412abc8c833091ba6c09995aaf724f804bd0d34781af70d52132f6d8b6081d40daaff2011310835cdeeed3577b38bbd5b1d2e5fa3c89014ff14d9a18351828876a9c6bcb97a30559597025845622936bc8f2f063cd22cdd489bd39563ff3b82eb6177077485326ffbce65525a14b9e3db0e97372dfd20fc631cfbf997d91d7535c98bf922f8bac0c40a04860bf820832d4b5f72da03d1b5865ba7a77702a05be2788b76943efc99bb40e62e0eab8e0fe3d0b62387d40a3cf23a161e688c82c661f8673eec2996ae0fa753d54f78d954e65b202df514ce32b7fc21f221d5909759d6572aec0ee71fdecbf3f30ded28c19a9537e9ca13fcccb9452de7dfa569788d958c0059d9c172119b5a8285096fc8cee3065c63449d769c77f79a23287f91851c16047a89e86b8b68b108e8a6c5555d1753d6917a96d513d88704ab68c1bf09e78553b78a64d74152fb125a06e30bcbf5114f78147bec8c8dc23baef4e323be548e558c3c39d9659185a9ca95c563f0164d9c55fbe6a9dae94666e837a97ff4d347268eea16e774777617d3c390c973e036c9528775d2a2d3a53fedaad61196be057f14f56d73ae1ee321bf38fe40060db93a42e3753299d5c7c5590d686e4fb626ef12e2e6c49ea9a4bb3a6180bde009eb50ca82a572b0635f9c15612a08a6ef9e2519368751e1099c69780d962aa44653fe2e1043a62774afb6b9a3045cb6955a7f1aa9e835e21c10f86ee3f7380fbd9936b4767c52cde5a4ca7276fe2b1f47d197d466d778239e41f0c221e9b47783ca89fc95335f6950d3fb6426482902f24edc720b158a718e2faebb7b925cca025c9000fea1266553569e25e523cb9b9382c9ca7cb57cee943459ee47cd344f083828f54c5329154bb75c730cd09adcdccc37edd85bd8c53c4fc8d27c112108a2c3b814477f918aa72776b7f5ca15b2599a1b8eea1105e5a4c010676f214f67c7dc10855e2952ff841aca74c3693669ac5b01f02356d8b4ffc280f1340133e8e362b980dcd7ccc5c2b4d73f856d5add94c448b8ddfb196726f6eb273eb36d0256fb8d5c4562c6e086c59d32d4bfd07d5bdc094715367bb4ffe5f04c9ca0399e4341a2e55dad975bd697646bb344b7018a8741205c14ef09967c729c1fa7ac75fe1702c2eadde8885e3f21f836c605a1b2d7febb60c4e040478eda12daa6d75190115217f282f39bbc63f3e7457207e0bbec2528e79445e8c1d96f776f960bc32a47547ed019a39e7564fcb579af567178183ce07e01498dc101bcfdadad7f05b5f42ba3c9b3fd9932627579c7927b5445f165760fe38e94a2fffda4d55d9579b8150982fff9c53845f8c19c792c2d2e6f3f95c34d3576e0d4e89448685ed2b5605e6d81119efda7f7618b5e7d61619dd7e5f8e5907619c39d8a5a8f09c150bf7da58a95eb6269ea6987197b86438337eca9dbebaf5f0544ed9a02a5fa0ca4dc86accf666c0e8ce21337ac7dd3faf8c6c911b2da84ba9054db21a2416fa317e4b468e329ba736e7d64c586a9ef217451961e62cb8fd37e70228f35df035709857e40db0d483fbeb1da2cea0e0fd9990e131ebb443c9141065251b44bba1229e7f6b4ea515b73a135cb4e1f09004e4a5d28a2351806fbf143d706a247135358cb96a98f1b9fa2ee02c5580ee109251691ad5550e83b87f4ce9601ecaba52822eab3fff3b72ec86e9c7de98428b468ff47e480ff6ee5b8a1557f8bf9943b9b41ba822e94426efeb252b95b733d2cb18354ebce688267fed469c767218a81dd43ddf9d590a1dc64b923bbc7851c3619a1bb9fe4d314bf516d45be5c844c77535a5d06b9f5e4271ec09a8457b6cd95465987c62b53e442d2988f39618ef02fcf65ec3c97d2235e9f26b2bde3d4828f3181d2f4ad180908e432a93d62e3851083ccdf135aa1e9d84af9c8bff2eb40d8bf9fbfcdb8f14c520503dcae27b09bea0444345de544fe6b57f5d0f938308b833768a154679652bad867ff04111714a185c1bf27bc0a18f87e7485b9144980aae05dba9fa446f8d8bcd17c3fee5f6c5fa1ebb588637ce7ab2013e64fd49bd10b8f4139587c5695d9e523053191b6eb31e2a5e7eb091b5346d3f7a292d784131b015e3773c30a3be33ed910be09d9134ad52ba543bc03830485a05feabf8ce29db4c78e2cb9e4d86cf939a0527488b05ff93fcc22df6fcb9734df391d42e72fba69125ffb06d073b78bcc58fce029ede7aab30eb2168f8dd7d01370230cf9fe799f5039301123cc8d56664fd1a5c301781c9fbf82007ba56d5293cca34ba321823708d699c937632ae774d2d96c4f91fd9eb02a770ff28d1d1261b87685bd3a39cf2edb0f92c48d1746dc8941f198060d920ecc447642123deff24a4e069ed2b04adeea118ebbaf620b5ffd7b9323dba35fb5963dd67e2493d5aa364ab8b671551105028ab2f48e9422986c42e8dd8f6553fb6f13ce1b4699ecec585ecf75e0a36cad428cab69cf1dc602f52409a628ebda0ee509f5272991e257ef8102f8f9f2361f19737a91cfe3370dab84ec59bac900836e8412c841ec2b3a3ababafc8226a0a43b26f9b5fa9282e79bc8ecf2e9575e58c1a00bd2f39cfd01ba5efd7aa6cdd4ac36efbace9333a9430a4e2ca8f5e8cf50ad0b7921db9d3e06a654c01f60d44fd5d08935b68cc7202b28b135095f132605bc8496e03ad1f7df6239343f40ebba6eff7941097905fb515f3885d349b72af93dab1bb13895aa9cc808c55f99079d1228f3635ae27abaf857089b90f36260e5a060f7da844b3921c6d9b71c3bab7fcee6019e1a10f7bdb4512ad5199ef3a5b4bc5d0d41c4aafc5176c3082581d54a56efa2e1ae5049e7b0484715318f9d4ddee365fb9ed798e25b7ded51ca144a1c4c4f7ee19159e7dc533d4b937214f519f80de77424655079a260f1e45212e34274c641e17cf8c707644bea837ecf28b00cd7ef472153ece571835cd5d8f75008a87ad6180cbb51c346fc779351c3d356c3b12d71fa7e75bd5a6f8251e8ab027a25d308e4d56410a1c7bcd90ad5e754aaf125f4dc0ee4530e384e6d8e54b87656c9b491dabb76dab246a9e98915bb0efc4105612b65cf569f70dcc60aee793b69808402ea50cfde41c48b425564e226b72238706cfd5c95fd5aa171427fcdffc412a4854d7a35537e66692e762da9b28b5a36bcea0decc8f9dfefeabc4518192366dda672ac73a0ba25a97d63bda1d972e8e51001c08564bb8da05d49592d4eac57cc0ea3212ed374de3bbb2431ce9bc67b4ccde4983b5ad86d17066656da346a3b09dc5ab667e15d9e4c1437bd9f6fe0e74a6cf6c04f99f7e8895de381765ad3ebf652a4b400ea2713f826a71889586b211782c093240f09fe9a2ddace9d4a5b3a98e1519cfb373cd8360a3bbc1e5263966494c12f72587684076e51150893493068eb690487a2336585aac61bdd8561630fe53843670bb997522dd295d8cb7c5325a639e7a7faac68938f0911a4deb945fb39d34441ac6b434851bdba8e1679515fb64d0fb9437bb05eb47ed20c9bfa1a16d86f573ea43577460a32a27f747c4b97643ede829bc067e3d9dfce35f0bf136464a6fa056f85e68f55733e72a822521688fdb7790b7813ecd6b1c4f1313fff33d0053bf26f92825e9f283405d7b35c1b7661d161b5e41ed59584cc1f93df1f9e1a193ee7777cdac2764e39b7dc4991c0057c2b31570e3089516f45881bea9471b1f6f506de15a7720b861bd43d8ad93f03d2be46a83e078264961ee50df29a9ce8b5d50d767fbfcd14d2a3732fbb9513bdaf0a1d1078731e1f2a6fdeb705c4b7fc8f7b1f0cdb55c3d02a2a841b82846caa45a875d0670c966165451898029f838ddad27efbe13542957cd6c9fd4ebd575feb225a0cb6ffd9c8e8ba30c0eb8bcc918d68c16d9f2446be545f1d1019a5de12535f57e368f976bb99e99a9c42795afb9044594ddcd8a9c322a377a5f7f535941ec9b34eccb06ecf1b4867b0186a108f766a70f3e0c03261a6d64c5e0c672d313154660a2f29f4563d7568e6178692b90e924deb7313b34559987f89232aceb72555e5ad9465cbd210a021f189581c1e32fdd9e035f61c00c63e307941e80f2d3c9ca717ca39086d061c2b9e9cdfad5640f2fe00a16d65bc8fbca2063e2abbd75e9d5798232aa80d4c700af2a4ebb45d98ca36fc97a2686b1fcd872bc0e37a34ead50bef62642d7c120f7bbb886b0b6c85ef1020a00fd5b82f5f4a5cfd2a617c7d074b112763a5a1e72a58d823870612e08348d6afb2bde0d9f3f69b244844c92395fd6125740d1ef0f852d4a7b4cdc0c9c93d1fc7adb210359a22093fcc1dd27d0ed15214603b066e19460262b18533f9915053f92538682974f45f5d8b7fc86292668e8ac39a8811be6e7104bd1799433211be0ba83bada30738f14397b02180f0214d8370d8a7d43724c68adee85dcc8320cfeb177819bcde57f58ecea54557f3712b457cda340ab51fcf6b80d038d2ed5e2c418f96be880c0b71fd919fa3af39b4c6197c26c6f2af60a867d8e99539fd20fcbe111004bbd382f3406fe063edf414301dcf946c35b0ade6bca69c6c93506f2b3fd395894c76abb388dd19071b95390fbf271583332a28d3768d9615dea10dda8804b0a65c976be0bf701271e21931fbb858d2831613e14d3451fb979fee55de16f68db9361d5b4cf9b734ba1a61df259ff06cf09039bec2b73a839d79fb7a5a033b23fb7603e022488838c27122783f37a42af59d25129f0ce1168c9cbb46d5632a7f7cfabe22ef24505af0bf35b825b2193c77c8cefcefd956bc0fd528c3cb3c102eede42d3a22afb28ee6847ec768396b5abddf36bb3ab24c1786c180a95ed755888fc53a193016ad51116ef422a985f6be77a56f9fb8d48989e708ef53e5f250c35a23bd79f54632279b1dcafad67e80b4d499b0aa4e9c917706b19f90651670127822c213cd060536ca3b898ad202f0752fc2ebb3fc3efb776e0187d9e94533e486513a16b1bb54421bd551f9c08c17e8eb982ac0a4d31b836249db22c48989ce0beb0320a1935c97ef60566acd6f59ba4125d8ae9ce139c213fedd79c6bdd119c0bfcd455a1dbb0e4d21c217e171e84705573fc5b61e9084a722729cf800b803c0889b51e8eedd1ca763175a5966b963e7101c699328e7cb2b8bd890cfee5aa830a5b401c2fb093e3d8565473bf1e97cdfc9740a3c1183e707ca711c25d336885418c1492bb26fdadbabe169cc5ff56f18474ee4db96f0b699d84cd8826a78155cd901b5d7cbf109e6f5f8ce57cc652d4d9a19556b49d958f7868bcb2aafbf83965e8d5301f294697ec8ec97667bec6395c46d2b37fd59f57e49b34ae677d25b59c4c10bfd0fb110fe237603f37c56cd62bc46db0f6661d61a3cdce684653cc363dbf6b1d92823fff1c9d741ee13bf7b4c5e6f3c3ac77ec9130e503cc88c59bad24dbb2e964ff4ce90459cad5a683aa0f4f31b935de0667eca4c2c0830fb7db3058fdece43cdded95f9242cc4d44849e5761bd8c3676d89346853013b48ac4a97ce6b281226f3d9be124798ed01a75264a238f0f09328412b4d55ba47629939da0c06a977cecc2c3a03e03a675bc82d2982717016a18be54faafaa784d0d5f511a2eacaa543fdc6e6bcee929f5a72886f12475b8f517fda14e45cc93f7f68d12f086e43beeaefdf4f8b8bfa418fc32b81251d91774f487a25a37b2f7bba69612f364185447f419e79f7005e8cdb09e921d147ae923675709c2a1de335d93f1dbcd1a07b23defedda927b3421ce154af66487e599f7d7ebab60fcf2a29fbf45409c9793042041a86a4653163871e27610ae4ba833b6eb80a45a407f8386b2dffe86ffacc9120fb4ca7a7c81ac15f61fb9c0f37b3f4be36572bddf13fc303b485f424f8f569d7324b41f95ba9f59b95fea1bc907555a6adc38542569946c953911131e1e8430ae475062f9001f7476f7dccf8fd4147e5835172e15aefc33a071575dc0c80d71ab95b157cb09f180dd8c74204666734d27fc1bc6271ff2858d7a6850ba43078bbfd9f315ad8288a1513d1d409a21ec4ab1caedeb7dd0da7ceec18a371473c874fe81b8136d35426edcfe30fd5748b421e5380dd9bc91f32a6e4130720314502a6b3a5f2f674e62fcab8324c842b20f6224af593d69bd8be33b3e3e84259f2a7ea2929dc8f67d9ce60fdf89c969f660c4498a3ccebd02d28f03c777588bb26f5d71c385d6383d5b230557c182ffeeaeee8ce3a02ae997b0980e7eb0447a7aaa09a0cb2bbd9bfd3096daa97918d07347ee429779fd3c4421f7b761c675e4dbd689ca84517492264ef48df2e008026d0a887b4a13b9758e558db28ddbc03495423e370a2306f4591a8eb0f85286899f9257d39edffb47eb5542fcb1b75b7e6ed4bf0197b6bd53ea316b6da8b90f19d9209cf47929fa2ff3149e77c1669d725a27c91bf890158933c51be3eef3a24a14efe2973ba989bc542f0ce6aa773226f3842b2ba304c762314e13c8511bed0329c981492e415c5dab273ae88b07b1c26cbe173a7e7bf0dc01a42cbab09a5bb1c89b7ef0cff1ce19cdec7870c8317d2a336cc8c58bc61447e36eba4901556bcd753105f7edf860f085047476c024a0c802a802e181d6388245d157cfb4a0b00eba7c75368ea9ef5a0ad47bf502582079c87bd38a5c2cf90f755d728f432e7c2fea0ce3884ac1c87bc2c328f308c3f860228c93d582508d254686610d90e736ca0c14a6afc90b16076b0cb08c1dad2b9dd8642c2a9b0ed90d4b0628dc9f05f038abf7bad28df5938adb0c59affe54965145a34a95dc7957b3291bb2d5ab742a3d4650553dc81c11690478d65ff4f019a0203d5b095ff77411d231c50408690f82608316048b1ea1b478c034423dab927ab9956cac46704c09adccba35861beeb1a8c30ca12ce424df426c643f0a4790123fdec186585bbd0c0a120156dde99e34ee1e59ffbe64699479a4f7c02356b60b0899558d0de115de167d4a0494d332aa601cd5fceadfda07bbe30b2d6c989f3cb645146a430dfbfa8cfd0d515bbeee55ee0f6390a7d38c061a3629fa42f7fa902b0876a0598257e58227d30bcc452333d169f9f05cc4e14cec6b89333404ba580456fba4026de4ec4808b6ba08e00977d611841b792c949930f705dde188275c88f11b433225c7a544a6fc6d5fef72884b14a188951ca8131602ef4cab8eda05275241dc90ae523cc3e6301edba479ed31e89d7314f38ad753d6c7df0555d518c99bcd911a4ad07ee030be3acc196087d37591884a1588341f83a9cf3a85e0aa054e365ef0ad8dd6d0befb60630d17a9e46d4b032b6e9dcfcc33050206413240f64ef45be6899751392a4bfd87e1f42f6b7d10384fd88b7ada526805ba66bc42ee0221249fc08bb0630753ff8e9d7ddfc90c7371fa27bce5bad3bdf4250ecbb1687d36e6a5f4b4e4be1dfbb41ce99616baaed6fee0e88fb4833f072ac114c32ba9db3d7e4c876c678e405783c6d60b916d15c006bc04420fa6834722c6379c7044541fc3ff9c38cddb8e955f58c1874b00a678bc1905e89e100cfcb0db418f0fa10b3176f6752494f12bd965024c9be5eb13e8fcae0458cfa5495fba06defc97991d2336606080d0d6bdee3ccfe2c933ff02e8c627c91d3a73b01024f983072a7c4e091c0fc288573e020b570a594e9f1e95a7d9072bbf551479efbbb7590ef44a776d5845286521114a33dcf34dc57b6627ba7ded102bfff801be5860a82ce8a062116ef90b65eb401a1fb12ccf5fe42477240f30891a4ff01084d5370d7fdb86ce481d9915d1d5a3108365cc943d551208b74fdbf90c49e7fd0c71cd47c678bff2b6439192349e17f56073f1ae7c542bc12111e98dc0785a656778b6257d4fd508ff8672350ab2ec43c29b374f041c88914c8b6a233b34d0c9b506f7069a24305ddd3f63ce188a99959b24146b18137cea2866aea1a7dbf769a484d3052ac3237748789d1be59c04f5457bf0e15fa8f6094c81967b59cfb29fa80294b474fb1ed7e21034a884fc88dfcb61ef8c6645b9e5dbdafe838a7acd600812736c25cc47f5e83f605e6a4cbfe0bd8bc99959f8f174fe7d2c24d2b9d7ba672afec635dbfad618aa7e3326c53edfb1145e50c2303da7af4296db081edecf5226c6031f229167ce6c1c690b970e19d92698db7e5a8d07702e64ff7f0b88a6d77982937d7c8a3ba576556ab484673728f51e423d3d8ce69a08956f4babcc22cd7484a326748afc32411cbca04b15e86ac8bbce52e850d04ff1e217e19d82e0f10c43239956ca714d033659ff3a58c3708bf511f1b757da033d4c5966ff503eb4edb0ef53dbe2a185da42d6906070f437e4692a27ce4a9311f484d0771651f55dcce812c683f3826c70eda46e46ac62b46135f0f68ee5703fbbc73d9c2ed0252492321e02ba3fe151c106fe08faa35c4ca0ba97734e926a10d4fa5935c36edc4134b7d026956f1fc2225885c9335c5f30e2b65afd503c7c316cd0be7e0805daf52cf98d29f65c9c9f03845a5a76c175865a413bb3d242b18dc8fecca8f2a7c9098f907204cdaaea75a6e52c03890466b16bd7880aec4b1e015df6ae502061a9a9fd0a26f9f7e7f795f00dcc5c6879ce00fb8b8b9c69477b068b842866e99ed7ecb4f0f18eb248b6edbe4e848e55c92e045bd603d2ac0db738e0e86d3d13c45c2a95b1104501d33ec961085130c05d6ac23b8cb1f2d8ff3953c98e99bd19119cc6a599ac2904b8eb6dd8e898656caea3e5c31062c38293fa6846e9b8b1851390f71de74fd92203b7d11672869bf639c8479394d97672dccbf3366da4fd19b125a85a41c6589b8d3489315db6958584e0b318f4054de4249beb34e3b771a6f0b904d0e67d3a7789333d11e95b2254445a1bba7bc6eb14dc38d040209f44d449db7b6e54eed43a734c5adb6cd2921ba5b125845b0e9b066a471d928f3522f0be463946aba904f0a4c21d3584fb0924d7b97dac2f5f2ef8c1627490b23bc31018ed45aaa3865074770602da5568eac3f2ef4e58bb6c1dc2ef2428393a111cc2398010d8860f78adef12bd36281224b0450d428a9c451420643d9d5100a60c1b456607f1e53183ed8d6381609fecd30f308e8bc3dc0f88d9feca9bd2acee79b1a80cb10991dafea56314bd67493ee05ff247ce518cbe4095c38343cfc32f486f015c637685938b7bf93dae5574216287d4a6f400201c41dc91f545b5f25527401671334fd206fdc70e6ce9be183c4a3010a32ca57a569b209a73b34e2753cb52b922d8581a44950a3c5d2c9173f6cc9214f702b7eb7ad3cc896d08026818a997cd15137f9947e4cbdbf016b4a3b1c8ddbb0f9d6d18b5ec6c954994e35e83fcf71d95d929a613692cd09116d2d6f5412bc23d90d344869c798df5721bc85ca5d6bd7419a0ac75ffa89f4446b058462ab3fbd6aa1c6d031639c1f25243035d14c17f68a151814a36cb2b6d3c30f471ff5f500dc5c4e5ef078bf3ee5fe4aa840101eedebfbdf74b7e4d68ed1db465e6b11e9a7d4ae9a15f3a30e712995e1a4740dce4e47900987af5bff6c9327ae843152fd3be98be6f077c6f941e29032e5c34ae80d7298e586a3390821fe8768f592813632350833a3585c7738ddc37e4fa849468da2cffec8c34a4d86c180eecbb18570b70b71c202c424d5c87f7eee928590d698f9bf381eaba74005545dc41956216ba1eb35835f08a3f028b57c914f189a2474dcb078f625278b9fd96923fd5825f394f469ff85fbeb4d32850a2379a8ceba28cd45f58e38cbe452364e9f36dad8c51e25dc46bbb27ead9bd3db7c80d6c407598c9d16530e4a62493235629c5a07c18178175b005d5bf761ea2c78d79b964ed781bcddd443056de2440c2930b5e6d9d82d3c251c90c7acf737978ccef9e65576d3f3b536365ab673da5814bbe341a909bc0ea7ce385052e3d6f8817c928edd0f108f0fb4e976d06a7a449da1e72762cd3e3400904b76cb0500a74383378a2a5212a8bfb8f8d6dd5ff1ed56e1fcb3308d5702433283c424991e45c9a03f6b448c8c647e6c3228616640aef4c04087cfb9a48a0bf0989f77e4d2138d8f935a77f4fdb0cdf48c7bce15b47ba0704f5346eb8ff3cab531fb943ddc837ec925a280d4c8d49c62c05e36bfdf6ca3e2208ef6ea7641f6d2252cf13f2979d2181af31afe66d6b6a422d75121e5c021fb143d6cc4614b46b20196836563385f71d1b3c2c56330dc8628211c9911c16e497edc1d5a374830ca5d655dce1a3703b9d1c89e697aa9315cb2ff65eadd2c567facf092ae31a1674b091a40ebe8511f0d774e5b883aa39240bb0004a2ab1f2c7415e1e32cdcd36dd32379e4b28d6a105054a488f36d09828df3f985505eb7bc09b85edce4205bb19a2cc254ce83b744ecf9765c8bfbd7fbbaa6ecbd66844d3f3a3d3f38a82a02af67d070e54755541784c1fffa54652ad9d6c00b1d3249406639d420831f6c1f8f9a4b5f6cc1a88274332d8eee2e70f181301fdb5e90bd45982d4aeefeb4ccf98accc09d26b952068359cce4b90e9ee908287ab3bce342d2f0516f6b25ee4f661dfdc561217702b979650db99949b9185fc9b0c8905f0c2322c4aed53f3d5cf3d285d2800761ef16b07d864e96b254f7ab2d95d4cbe85162be745d097ef14392687360b65d47ce715a8893750c62d81d7e1f06aa938f130c520e641f87f2d3646182c27e3d6f8df14818630f590c328320f1642cde5ee18184e4890d9d8934415fb40f9e022e3072a7d71217c611f465bc248fceed540a649e7bf2ef43ba960fec23489ec115c9465e979a919c14d7d079355ae0c934e1052cacedd27b0d01da2139975f5cff7d0b50bf85028f4ca4d5ba4a6ec37715fb21fbea8085a34fd1a0e0cda8272cf344dc69fb8b76d9201e3cc75e7cbcd835265da993b10b60890e96c22e5b36b415d2e64c7b0f4e0afaca3d4b0032eec625049f5d285c36b958692d9a31fe8382943720a10eddae16ca68eb31f34b52154bb4c416ee520b5c035b2f7395eb317a4f70e6391a4edf8b6a03c8349752c689d937b42a5934f784690db3ca006a2f8e739ca2f20e2d71196832539ea97083937e8da0cd6e3ee083db88b2f3dbf77aae433f7286d2c2646267a1b7ca9c437e061f44cd064f8eeb33457fb96fedf96246865c94e0fe6c63d2e93afbc5750f1ae9a7213ceb828a7095b30c4b49a14b3be62a8740d4d9e04d96914dcfdeb0cd826238a92ae090d5350cd6f91bdb22f4859ed3031f8861fb4a0f7dd5632b06a7cda77360f4d75d01e3a84e61fcc9f72f3f9172d4d38d9bd6d6428fdebc4623e9cce6d073450ff98bf9a9659d26591996bdad163a1d39441d3c8f8cf39c9308708ae93a348bb5a66911e6f1207b365807621bf2e6d10446c13a3b9e2c903be29734ce8477e899e582fad8f6a770aded7b95fba1f6a7ce33761d6c73a056bca1d27b4f24bb848c4c59d5fba69463138f1c509404937f655b276ce7bc75405ddea6b88911a9c0aa5d791bf76a4bda51250a99792146bb4be1ec4e9d0f9eafc7520e494f37f285ee00f1ad0608310470c01627c7715a6dad290927388645a783846aefe146650b2c963331f22e790f5b140e6a7ade3d19deb38a115380c1a2f2b428c650875ecf3e7f663f9a11dfb31d8a5bb25019ddccc962cb74aa281f46b12efabb4c1e0e19fcf90e8100bbcc55298570f3e819da6bcd248c1d00cc795134679377fc4cb6de3d346a4d8f6a5f67840f6045556070699167a337f96dbead7145b0b6abe4be00b0a5e330eb01cd37e85a3328eba906171fb517af7244ead204a406934717abc703af5ae85c4984813d79ba3ceded5783f1b13c97b9cebec75499074b587b9eacc929365fc0e024f8581c46a2458c7e79b29500597a7a9eb8789725822b91b9099b694031707e00b5571847ee8f6e9eca0af6b53c40f3bb1ae811ed866e3375898f9f63f6831a577e783af1e7d65869cfc69c6b1abd6d9279183789f603c2a88b8f4590cc1acfb1c42ad5c7dc94399a6627bbcf69981d6bef11a3b8c452248e34e73d4ea2c0f0deaf39dcba8d64e244c7ac45d10327981a48198a1779f45ee0979055d9275ec5f357eff0fe6680365244bcad0f3dedbbd029cc9238efa01dc41e0222b2bcefb363d3bb9b5701198f3056bf1778aec999ce8630cd1dd8cff7be87471f6f2e1a5fe3e76ad102d7d3270c77ef22da80f4cda21ed01af036671226c6c6369c77a726a91f47ee67da62e2ef2da83c0d5904e2aa6a0162174249925983f8ca2a71a7805d53340bef4adbacfe89e3c85207ad7a18256d4056629e5ca0ad223c8fff11db5a86c91df3924933c4d98ce42345ec4b44126c8972550072b129f6ca2e68133e5f2ddb86b81509a8f291ab22f2241c7d53348bbb2baa705db972698afef3d6b7f17db258acaad49662dded5393df29c973188f6f484b305e258cbfe5cb2af158524d0292352bff04c18d422900619bd3881c542fd45b3b1f71e12c8bba2cd1e7835fa133849893042958f7df9d51b8e83246f9bf4ab3e2ee8fd22087baefbf0c2214ea6f85afce270b338faf8fece16e144d8a4192f013af40fa71ccf6861f8a8da14cb95e51b81726c142b9ab67a1f8d4aec2489ffc2b00749859ee2e72a186e08c683843f843745f6d712d75f30107de895d15b870f7684a9620a62947add5bce57eca4a6794609396c773465aa4bfde6bf29846206e08d8aa75baf5a6299a03cc0318ea2564d9968763e4655234f00bde6289edf828f878be3ecf0504da81dc1c14be14bec0e43b43da71dcb0b04a1925fd8a77006084695e534c8ce3294545fe08b88963bd34381ff925fe04f4d963f3aa44366ce5951c18bc84031c3becef62048bbbea5e71d3cd779c9f0d8f5d6f8954c63ed4d77fc691b82b8f30a8efa39fd53bfb69fe9bcce61270e075a5f33ba039f9fb49dcf28ae394a97d37979b8ffb796cb49fffcf370219f83b5dab3e41efe186abe4f6493b0afef861ae757ec4c68482e160c575789a3cd144206eafb46b3e3a7e6266d08329db38a15a8f2735520f1757868eb401726245e55bfdb59ed7a9a1f3435a5e2aaa2a5c27c05cbf2f4bb24ada6886dba464bdea30d604d3dfc32085500fbd45cc5bbc53f1d219a0e72692d8a0f5f63a3ec32ce5d25e8bf18619a5cb44dfba99d7d4f0cb82ac28f77563bcfec8dfbba9355f38da905b9a93fa1a9a9b3506692cbc84c12cf99f920430173e188c224ed1daf1cc5b871211615946528d4dad9b6314cbacae71b2b2edb523c30cfec183b6281e52910fd7551cea81160c2490eafc1f7b35dc6a4c1cabc399f521c91a41d9c32634fc66eeb868092d80f455a61aded8bb48656e8b7a1841a4184e47c534790f798ea8f45cc495bcb7232996605b4fe843467c52e7903db7dbf7a3f928f381385c3a20e51ef30a882d31a033ca23caf17dcc58746480e70604aa476ec7cedfa8ae4266604af056ca8a512955246b8d8cc1a8a52bf71b58a90a7daa8b6c535bffbfcd42d1a363d08ec9e869b0b6ca9a8b4d225de79bf0590305932392f1a1e444e505bb0f84156adefc5613a2b98bd49984f55e334f15917e34d3e37c89fd1f71ff34775524bda01a2ebdd31c81bf75c29bf0eea426e4c8eff67a5fabac858d2d4579765931ea1b30a74f256c662b1fcef0435e4f9ba6956a7df0fddb91ff977a4451f4ba47518313892332cbda257527601ec9a24c8bf2418f2463db34c87b124862a397e0a3f8a1ca68c703f415ffe1257a009e0d958bc3d61c53656355b8cb06453c401b58c179435d1c5f49aa78efcb25aa6296b451fbcf63ad7613c32dc7e85e7a5b1a7de4f33bfce409369e927f2ef5904a8873c68399aeece3cf060c9ac126b6158b726a06eb552c2e19717aada3014bb521ef1ab2872fd803343756fbef132182a4e34607272b5bffd4010822bb69fa97f23e4ad3120a471b0d4c068657d7e02c16323597b5a30b9879c03752fb66fb8eb58f50e454ee627aa2d1ce69395162025c03ab0fd8eb9f8d07d7cf979329b38e144e1084f10cd74df4c9895f2e8cb459b4fa3fdd73e0c51d0f1545918bd59c5775b5bcea7d0cc63dedb399ea9f1afc4abca279272c3a4d97da8d119e6061a1471b2e8517c26447d08b37c75d96a0925c8fc32eb6923203dcaebdf136d6b6c1ac7df835b80c3b31c5c4c1f820f89b417e73fa914b5f1aa5f8d80ab4d202845d24cc7b0e4a63ac85654774e0e0b4cd541f97ad03a6e323cd30e8559856a4ec43f583a5f518caa9f7f58a4a0a9eecca3f10af717ea752d9fcd972d6ff0301684435ed8fc1fb22ae8cb7c26df8a37c58ed4832c39aff772ec0f99b1d365b89d5b6ff307237ace06c054b","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
