<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e2c6773966162bcf68dbcb2461d2fabd44b5584871479cb4efacfa1cf4778d7cacabf4916dce1bae8fd81cfce66eb857d3f17363c819126b5e21d3b100d5437386afaf08ea59b752446d8fdea147d284bb7295f7be029de7be8ade60f232b47e2774249e48484d0453826f8c10b6f6ba97facaa7f3f39df5ab4f1521ece3b01bb30c5191b23f192959697d679293a7cda3faa7e09b92f29453b7eb475c9098623087ff7053270683cd832b9b52bb326ca49fadb5281d94267f580527eee54142c2cf7f4c50c1af6f68805f3b290e4fb40d8262ca16a6711e30a995ee8988254b3219385690ebd2878da6cff778a7d035879d55265581e3443d0ba14ef300c7eaae89a6fe868c3b9b27d9941f27e21af9806cd1f9612330a107d104ba2a728f859091b5a6a78f20c6531979b482716b74dffd38aa796ac6e798b4887d462ebb0d233a5f7a0749d2f7014d5bd08e9b32d19a834c2dce2e12ab904504f59ac9897c2b57c750e9e4f16a06f465c5803f146baa233d2a4d4cee778a3b9a6a16ecd37a7be8c2c3f5cd616c538372aaa34d377f7a63c594659e8256885ea63179ad5b9ec3f320b290e1edbeb46b12b495915bfd303d43ec2fa1aaf0ae09c128acd855bf283700dc5ec3b297513ec5e645be657620e53c5137938efd533729310dccb2d7aa3183a376596b35601ecbbfcaadc70039415e59b6d039d149acf8dd1ec3f58a986325c4c706f627075bf42890720435269f44efa53f40612a7762034efd00ae910eaad61e085874317d58f1b8a4aec569bd9186bff5f28d7017708ae98e74492d05db3fb1174c31715bfc6286fae94357eb68ef46a874978a71076874da2af3fc7ac3b04389488529178a46b29d732e8ec001cf58b01e9bb91888269aed13e9261dfbccd5151784f17dc3baea5752ae79c35df95b1e2503c80d3b0aa734816c394e9249711c1adcfa54686caba535157002103ab3fa75ea6c18f2b5b8c0bcd2bdcc10793feaada6f1d140b47c0928935483f978161d761522b964c41989fc994e44811df6d8fb4a784555170a85ea53c391a0e2b06900731be026cc042ab9d73d9d91c768239820b5ff8383ac1b6280e7ae74286e6c1856dac59e93c7bf8492bf9c23941f6bb14e77bc40e55e0c4f4fb7135c5c595eed667fe94c63d13bf1f20bbaba7be06a9e85755da3f631c8fb23b5b23e040d78f1d0123d0d13bcb9fdc06026574a225e306ffd872a2ca9e60a68670813558dbc7836d96f235d45045e3b2351c230c4e85778403a69d52550d34599ca20bc1be7664bb97e0827045b7437b0b7ad0da84b129c750195bd69f4c174fe2b8e819b294a0ebf7076bccd48b216382f1c580882cb79419055db00218b5c8f83f994c38f36a5eebe322722a3de9f31fab3ba0d34fbce24f0041554f107040ec0dca5a3406b319c99b0401aef8c743ef51404c359f5ffbbda4b67a671b5617e9d09ac0b3da82cc02775ebbe15fad276d33d6e53d10f1b6349c040e4e5fb2ce8ae422e4b5b3ce600dc9db3afd37f6b1c936dda8406f44ffc3faf21f82912ebe996a2f8144b5ec5d92f5698eb1a23634859ba74a57e9cfeb7f2d93366155de09525e59ab1bd5f84181c0330079f69c7c9c03ce4c716b805f3f54417296099aea2c71abc6658804ef90d0252d66b10d8fb80ec5fe9f75870949e37de130ce88b2305448b34b411c19c2c548b6a54c837207fd76ac7ae4496088eae25f521d9da5494212c67ae3fbe93cc075ad58e11e5e0e89dd0bc5fda6610a4671796835f5f3ea2ae1aa64b81414b564cda6269489ffe29ce8608778378a7b2d001df143a625d6bb70f33ec818ade5ae470181267bddcecfcd21eb6d335fce66b9d7989cbb5102bc4c182b8ecbaf529a93bd8dab292093868576672b67a2bff4169b901dcd8eeb990b6061d91b18c07fca9b075984c307cfbe1b2e765939c7bab27d9023245bfcc8de031f5a2f9d27c9a16c584b63e58ee754b6a3886e9396152ac0120fceca91a78669798658d867d2c9c350decef17924701ddaad460cc7d09bcd3a155ecfd3cf7c00cd823650cbcb5de858fde143d3014ed754f7d672dcb264c7cb9edfa2d5ef31c9c6250b0ac92baa8414785d09a71622327b5a5773624fb8e4991752ebae70e00fccf1daba50d7c345b4ed4e5b23ab5f549f71188bde2346f583d32aa27f9bcba0f4d206253be535473e28982279112f447c9943b6f2e2cadf975a52d15898ca2f2327aa7cd10a7cd7e8279dedf6193795b8eae431c9a8256d1bb33efaa33dc80b86b8281bed81ac2d804456fbf972c865a4f27812e40b142327243e777a1e7f96216bdfff7ce0bb8e18856ed4b0ef281fa9d6b2a57f4de8285339b8a24b6def698fe3019abb369dfd3c398349c1328c5c27981a3bfe4051a6695afb397c28a60190852467241bddc2f81a9eefe64b7af1bef2d1ba31f719bad5414c82ba2b5a3df0b55c40b315b2da714acdbfe895c537844c9c2a67ce990e5f0470080db42675226518100347528ec00d53c0dbce451609fcd379c52b1158ae56c238cd234f3f6fd9e6d693cedeebf23341094f085eccf5708e06bc7d02b38ddd5214238a90bcb8344b638900885af896f8d7f92b2d56e7526bd495b04859719c1c1011a2dedc9b779b2fbf0a9e4c28afe8b1bd1610c77340b7debfeb7139eb8020820439995afa8f5d50fd72deaf0214fc8a10a0652a34a730ba2ea5c0f044a7ea515726ccbe758d1b6fd9462e25dd73dafa6b4551fab6f4982cec069da81bef4bc28d4cd9a10caec2d37659877b5751ee7f2eb51f0b03eb9385e9f88fac41a56182673ed4ec0ce68351981762271989509a0260bb7ba47f62088d8dfd17e8c942d33a89936b5343a5228754c64847e6762e78e774a35c64dc2e5a307b2ba90deb0399c9f58128191412fe82175bb89473c690ffed80aba9d356e752bffe05420d57d7916440a9324475e8dd88dcebaf0cb47f8361b18e4b554a78866f2307e4b1a70db4482a37577c9f631b269ddb6d7b4e314f2174b65120f5742d7c7596bee149be3c7e776d52f11c75bdeb405e253a1c861b9cbe48591b44f4ec67e0cfd566c487c0dc9b5b972daa5b45b1ac16e733567373dfc5f704dc832bca3baa0c7ea755b9aee26796a85dd180e5c0d2ce23e0394787d2ce03f397e46cb3d3607c9000a13ec4a255adcbf8bc60a25ec42d8d2360d174bf9b8b2a643326f9dd14dc6522fa0b035aedff5b77fb8868cf1d3c185ca32ea86c6281f8b0b32e84c41ae96d6eda44b6ec567f4a1edf847c7a09c3de9ee09fe9a28c4697969bbc1f63201dbf8ae6938ba38c34dd58513e58078f060ebeaf43e14401232468e918053dd09dca07464dcbd480aaf31bd971b07d89ce1cb560608f3ba31078b345d9835a52aed2c240b94305cc91d67d3302451f3b4f83476532a35e67b0a3ff2ab68f5f85cbb66162cb2695be0e0ce0d785cb55ed39d49319313f735a3535beb9f5ca80e17bc93bbee5351a259e15a9ca084306a807b1367c8f1f738adc9a98256d654b0f022fde23ee306a5392fbc5a6f56d228ee445ed5744621f9e44255ccb7894a8580acd05ff12af52481208e76ff79c839d07cbda926660fb32b573119a38bdbb2e7a16aec264c457571288db6761cd40a843896ded50f180a533272cc8fa2f7811d97ab700bff17ccc60aa84f7f5ad624e1b4fba39c880e0cb9269408902ba83302e1aa5c68ae5632c5080e0db14bf7b34cf6ee73af0c222c07c4eec14018f5e841c7aedf5b166dfe6c322b0042a4c4232e33dcb0f030f002d5854fad2e9a4a39944a0188d6d99ba6111fb9837a04afc67cd791d2a2a0794b01ee972778048879918e586b5da7810973841132a4d7abdddf757e8fb6f467bc06dbf8a879a0214837c5c8327745f1ba8a606c4f9dad459aa0ba32f7de1c0277395e85b2fe1eb43ff82267f11869645c39c73f432ebc0b4243bbc725b0c6f565dc371877f5e423cb32aacb1dc0e312e91b86884c10b3891ec6991de9cfbbb3d8e23f290a171ee1e39ef3f0382dc8b51efd805b4c77d2e53606567016ad9678ec83ba5baf835fd61b7ce72680d81976252c6e01dfc0d7d612d020ed6dc77169f415461549c35849905ac633e6480c67554a24ee259e83475800c86cdf8a2c8f2814944eeca7f73a143b388fd45d7c007e352dd7186f88ea849739034717c1e41d1acb655c08398249cf15cef3028e0837487ca95c409757be90875fba31dac94c349a1f65b6a7711ea0e59442114db6fb0c1a9b982edb60d82b6dedcc773a795d5b1e4b7abc7d0648f116a0c338b57b6010b5c494ddc4804b59fa3f6dd6d8e189215a0d090beda43c8e2728b4c07c6fa9e903f182d16d77ce197348bd307c5bb09034a4c59129fe8ea07d81110b04123ac6be72673daa99636ee53d744d32b76a16bbf6926cd047d814dc628f510cecf47275f206aeff2adcde40379dbe5e3bf8c516756c8bd9b81eabb0586cfee9f08700e7356cffcf1961ebc1ed60eed498799d7926960c82e2479a168524cfb54438445992fa4d61c20995bdee90d18272222071e6f4111c20c3c862bf602845a5ec7ab03e0b7e827b63b74bb3f2aa412df65549feffacd6f1d66e952e6186cf664a16449d4239327b334bd76dc25318db6e9bbc5ce0c6d6cd0d90439b4b6fdd921c5fc8c73f08dbd081a4c91f79a49e484c3df9e5e94c9ace33a4460a4a329f7ba95c83a4708ca22b41fa7210da0321207ede0e5faf1710db65e3e325cd3c8f63840dc8cce838194feac196d90abb1ecdae47f9b304a6bd3f50b94e13d88c553c2570dc6512574ed3ea1eb30ee3c0064085e128bf3041e129c055de161d787e77d3c656368d327e0b9f0e897aa26f769bdc216e64f6b16e4dea31e47c917f1d1a65d59e380a27c9d48dee773c91aae114f300f09cadfed54d98a7ba2e3ee99010f98711741b73dc3c11715af1a4f174ce1d4ecab46d38e1b1227c6d7e59415a65842cb477471bcf90d1b386fc717f8db2f215333476df04aa4633afa1e6f4056f8b8689b7d06ddc58baddf207e609598aaf6e41b6ad591920a93833b215d6e235f44018a609d27bca96261df491c8e1ea5f420a6061211d65cdfe88a1eb44ec0702145457b60a8de0d5def275f5f39e1b44e2f5b3e8f984524511530c88f3446cb019ebaa6cb6ea02a3a323b2cb0f99ed432c6cf61d6c2c05da32da6c1398537e3d0f099b40c0528c2246adfe4897a03a9c22eeb5e1b2f792efa73ca6aac6eef8d1ec83ac3e8d28b54392ae5479349f5a84fe0493f5d8ed249e9fc81711c4837333563a4b96af0749b277a07b26f834c2696b3b7b71ac1de34f3eac95f6d4c518878262a0fe7793707aed741dcd05f3e9e42287435a38fd0c9952e49a459ec1ab209d78b6803d979890ab82010b8c16975d9fbe624ebfc5ff7dcaa222e174cd8bbaedfec0b59563e03b7c0830c66a1f0e32f4e8780fed557ad05205d86ba7cd78cc0266d8c0a489827df21f7c085d43364689a9247ca520ea9ec322fe95aadea39b7f004030ac063520021f1f6980b9503a7af60cd66792ec98c2158443987eccc15e45443c4986169dc0f78c0fbf4d7c3e79e3e873f3a3011b32a0ef733200d652c198bc171a0d107f78a4084ca1d9fe42ad9833a957e1214e929bd8e0c6024863001ad416e25b9b57ace3ee74328792e1d4cd2fed93ee59c774c40af0fd2e907dd1ae7ceabcd96823e8322285212298f8e68544c18eb585f19a500b378ca0ecb9b975f3536b2df73fec0fcacef421dda38bdd31235483d42f539ee2fa4eaac9aadab1debefdc9635567f9954e75a07b833e20f55b8b477fda03465a659d6c2f4492e33a6f777867d36713803b5882d2b61e60634d4358ae57764d337a88c562a0cc8421db26fd91e63dd4a8a08c2a414f506239865b3c213d3b5e2dc5a61cf789b6ec59d2cd8e009dcba9469b334644b27e9fe696c9522e92a7a4d319e2ef784d55e488905a16354445f7f8de2746ec9663fd9145295e7c5b73a5c924b76cb289f92e6589b463bbc1363235b2921fac51126a73aa64aed89b864ad9cc9fc550b4d5c375e65f24fa8aa2e4c00a627c123366ddf02c422d54ba3713a811629b991e2c35ef3d577704d22056fb5259dcadb40431f63b9aa9979059be12e7df0a74bd9b5e284de36a20f10f9a60b118c3361e3c0fa2c1c46c81bbd3f0e353809d5a185251d79154a4a2baeb21a50284fce3daeb7a1713381c70e74fcabed063783478c50cceaaf382d119dafd41796f1252bd6be4f82a042b50d3021a499e8827b39e6394fe0049f3f41f7ba5cef375bb3bf4fd0e543549acb93fdc8a9474ff113f27cd8fef0a193bef7f6b90662dd67ff4bc1122069beeb7806af8ddd380c0f3a5e0e944cff51cef05341aa61ceb2ccd14c6a5df62cdec5e475265fc0d0b3db69974a8091141db4148bf8c64607092abde94d0b343749b46477efd587de3400dcd1663bd895c6fea23f947334354798fedf99afb8fe45bb25878b7328a2db98f76f65aafa72ad5e0854653a97e6012596681de54cf18893580028464742dc80f1def0dbeed6c7824ae04d830dec77457eaf7b916285fd3d3b9c7c256953305cfc6de4db4f77ea13842de607b472e7c4d02f1a393887aea6c60d685b06004054ebfac567927dfdc88d9b74e6718bc7ee0444b2e725cd29b352314cedbb17f490a048dfb8802fe9f9fdb4dcf9fb061f5f989269893efbc7914c51ef61be475b50e79d9c50271623baa350f748bd5d6f42e5a7f41f08b01a5426bb0a6d17e561191227b311ab5526a28485a385de46f10c7c1e74ee23bbd6ab69d85d60be4d7a505acd97911345eabd1eb347276a81357aca756b12fe885705705c4ddca9ef6b1573e96d7034bda0c5fbf3d80a9e540dc6ebcc1bedef3e3ad20c91d36ae40804ab0b649ff00c1dc1c323ce12f7133b265d0c09d676c20dcc3a86797f1d02fc7b514c734f12ab5d84b19662d7c181810b7490a0c9f84cef37ba5f26b5610fe2a65799571ea67f8de421cf96ae084088416d180bba9004c8b3b737940b027813ebb8a9a523d5a2e36c8df147a8f7e7c5ee0d5122509b1cb60911e43f5aa5b0ad90e572318c80477e4ea29f4bb0c86bb727659011f0931f5fc7d9aa2ee06e3817d6a9c69e6261e98d1cd612b342411c06c058f538d5bdd46d3b6cf91199b56bf7b6a78004a6c0c6910744b1d94cd6588439ff12b90ba4916ed5dd56037deaac7ed6188e779c5e16bb0c70e5df9eeeed8f6a83dd50f2751cc98f234268fe427bf124f02af519aafd924f3b19a1bc661604b7489b4c7c6a306cfa94b7aa8fe27325a928240507422eded980c50a6e832051346a7bf0ea10512a40207ad3c09cf60c68dc536e7535ef88c1a0344661b1dac1102ac8eefb8f3cb55266850697663c362f5a4927594a7b8981a54f0cb57d0695ce920de83236bced6cb42c79dadd3e70097ab20eb240d0b2b9e6e91c583aefe36819dd334f50ebb3bd3ad8b7b9bd559782bad891c7bae5b1dd1ae687bf10656f344af5f8c9e6b76da91dcabf9caa6d80d9d6360f6ff47435323e5ab1c45d0bcf27e6337d898f1f656c7db4c9096e313d006cdf517fe1ef578f63d402e94e2a89f3bbe7f48c96c066f533828f60515e44d8b2354552c68162c585e70bd4d130247136755d0a78433cfb9d0c4cd03bd1375ac9bd8db3b86ef619dadcb8870a855a6c30c9e7884706ea776d7ab803889bfb5a90d1d67541d0724ee39ed5ee285ec729275b5e4820d52103fece49e68d9f6e341c5a869e6db4879593ffbc94cab07e3c7205b89322c401c3849ba50eebcf3c536912bce72757c569532436889bb5baa94c9b7e889c3b74cca393c7d60bb297c5e7caecdab4113a8ddbde188963eaaa25b87da6ed90105393ad22be32e3293234f3af6abd9398dd7b8512a9dcf1cf952c6acb4d4c27b47b9ee7d18418c72c937665bacf99cff79b35c7c4fba11a9304015f15dfb8ca3881bffc178eede0fa1952a02ff97f6e7cecf02d30eca78f9070dea248fa4895f5c5817ded3fd0188ca733e7ac4f43746e94d08533fd17c5e345b1f2dd88c854417493c6550b11fa0c62288d35635c9dba3f4c42b1bb2c279670e1ef991e01671863c4db2201ddf2ecb5ad05d45cd040ea974f2c3051db33331213106f589958bc2c4922828fa2125f8014007bdb1fd46d32142d8eae4fe14eac88324dade0de1c7d357c9b3789ec30215fc7abd1c935faef9264293bb0d6fd45967dbbf396555a6b50de1266d6a6f509f2759ea3de2f752fd0bd421fe1c71e358dc3388a0c6d7c90bd6a71cce28f4657b43d667ef341a3d1b878efd2f57c8ae4639fc03deb35e036f90d8b881b358332adedd0037dd717804ba237b853abdd42de20388bf89d2d765b0e816c3af8c49c625b54143f7e76306de542fec6f4af3d1062659df276a3d6d97f44da119fbd229ef9b3b84e15e2b38e45aa38f48a7b00c60eceb9f52550d3a4fca8065bfdb43e2ce57e3d3b282783cf97bd70d73a27455b0c0e611d77b37c6648e8104ecccffe10f8b72d6583c44d84006474aa2e6c894ad5c9431a4a871ecbdfb5772a3bedc051a23087d3cbd8fb052efd08dace0af9ec0b704ae3ddc2b6523cc66c263e243845cee45f1f968d1356546ed82045df3107ee0677d6a06cae4ade264b3154030d8a1f597c2f15575a94e2ee5311ac28bcd5bb01df81ba2d706383134b864d57ce4490b61c2c1eebea9b5dd44c3ae323b761df4eb1fa248d8b4bc92867601156b0f7a6931d19f7e992577191efc0620aed59ccd0682e738a5a430a361091df5ed68283b5b8529b2a7236c7a43648deeaaf05f2bde8224596620a353dc722c907a49213f289ab8c1f175f779d58ac3628be5822b0c86d96f7108dbfba3ad53829f4d905af2de67fb04f225cca0dbfcb3e57cde720b733a30e71a8ff3d8b229a993b172b1131a1c0ba24cbfa26209ab0aa2a898b367558a4f17a96efd8709ea107dd1463091586cdf6646b5bd55520cac790b1958fb60c63f4c66df4674c1ad5aad50578c7eda8695d5356d70878c22d852f75998aead268a53b8bdecdd99965eaac3062a160170e56dbe1b9663734b0117a3bd5ca454fc7660ae334ea2176e1d7fd0c52769aa6ee23ecbf5a470b248ba2a169ce8d2697e99113c1630ad11aeddc0e38eafde1447b75e4d7b68eb5f769b3ca62729c76433d2788d174ed45179cc99cf2e0109c1afaff8fbf82bd742c89ff668242626c7ebb202d0ed7cd9558b4f48d691a76bf0017d59f12f45ba05f772333481bdf277df2db8b62c80d005824445254670b16b7fa3ea8b15094c881620308be5183198aa306fa579f776542d28f4e22238fe8dab4e9b05a4df5269e105858fdb050d0a4cd345a7321fb1089d7e6ca908f52af06aa1e7a3236259f16bfa2f2b2e9951039778a38e3795c550ba3f9b6f8910fe5b192faab70d94c2788827deb1f7b3718d7073a15b8e4760958168fa22b62a976448aab865e9043a1ccb5bfb2a6851bc753fc6ebcc581e8ffe816ddcc989b41451d6e233f3198b7dabfe71f3f0076b962763fe4d17917984246e994814ef40d9cbc9b71409efcf1c6c1c525c9c776bb97353bb267d65d10b181dfd55893172a8d314f4eb91b7d35a488b44daa8ad3756e2e59907f7e3963ff023f1b96a3f48a75a0898e26ccb53f2a8f3e90cf74267d7d5f6174efa975fcd51ce452d8df903bcacd39ff02accff764ef9260b1b8da0e4d7ac9570f2907fd3f7f34dd13ed9d83bb5fb28f1031220b9b32150335492eff937ef714bba149d32e871a959ddccc5939dc4dece39da9d61113d37f79659e883edaa1a98d183ade72ee88a139599a80a4dcf17dbaabbd84cdde649ce9ce5a145e445c93a24f7052910bc5cd9d6a7466e6ff058267eff0934ee4d883c6f85af2d6def67937387625f3e2b0614a53db512b6601167de2ff78448ecd4cf706bcc491ffd27add8505c9b12c4c54f74004f26ad8120dbfb6cd12776d5689b6e21364a21c969a820ca600aaf4576826305bc7672210b7689eb3a0f6a8a9ecb6c8811525a35df794ee8ac00b3b201bcd49902ada656a6a3108b688a987ba346d8edcba57a5c1c62d330300897c1f4fb742567a8f550bf06f3ec1a95739fd4d6112e2ab35db4ebd1b67dfda2506930f7bb4cd5e4256b526c94f4461f2a39452482c44852599ed88bbc45058cfe6e8c0ff6bb84179755d5fdd57618f67967c1d4efaef44d349f870ac0c14df88b54097a3a2229d1ea4b1b0148287e13ebf8c3596e34bfc0dde36cf934c68eefd310166548a1f0a889037d2e8ccf600a34d829f0f90c2a6fee4a2753867a2937e5d4b417b6b74550258a8ad91f12460ad9ce53c6e45d6fcd1b1cfaf59f840c4b1e9855dc12c572fa33405aa21d1deb95eba1a26367c1106ac8bc5ebeca3a8553d21592514266f70153e2b54a81504170e8df36feed714c85f33245c4a64a622c9dfc0b2de684792d5e47160309834fb20cc35cd6c1f73f1af37d235ffd49d6c9d276825c2f3399d44631e5da92efe72b58a1b255f3e9b103e0cd228a097bae10b743fa320acf29a0daf1109277d44ca2265b3245dea6e5056e60522beb62ee08f67fb012b3cb2ae9f2e6919b88329a6658b8fa09b8e7503fa748418b42ac077cf5dce89d32f39e0f2b1a15e26ee293acc0783c60453068db1f7c387162c662da3f4c7f1eba5acc570b12b4ad216c99b02ba0ec854fc42ec29f4912709133a751d0ea053fc7649c880526fe51925791576eac0abc8fd4c9bfa27d63084fb8dbd9554184196ccaf5dff28b8d2fe5e8130618bc74e7d35c7567aad3fe9367510ce37123e545dde2828b7874ec7c44f97c6da85cb10c13027aa1d53cc3ba5f7af3048afc95288e6e933880fac9604a644724bb88b2fd0052c119cb90e88a4c86e4b2968ee27ab06014197d4ece3765c84ad8ebb955f8ba47715be15b24cfb3263d8b40f0c36c926414c12ca12e8bf1e4e77e83a36ccd03f0a7ffdca864ef671c7722917c51999bd853a026a3a2d213de01045e415b7338e8a1e064cfe3849f7ea980eac8e9255e9a2a7752d966a13684be1cf3856657295a24e8d369700b269e8fd09937c07a806e1cd3bd35c2ea9c4b02d10975f00ff014039da79ef4abaa22ce6d42f448aa906a1633889128e03d1cfa3da5fbb06f0667ae210281aba91990611b4330b46cea7ba578e8cc8f9fa2c67d1ce54ce70234ab290c5b4c7435b811bc32101edf16ce17d51530a62f381b28478c4ee322b9b0685e32dd56747a4d523dd45a425b0433891da786a2e20645ad4c5ae344c75f05a378654f291249be12d31bb36ef9f7010a855709048665adf0b380deb042c0dc13e1d7b8100ff6832d828e43ffb60a29f1621f3cafb041c39fb530257cc66f60892c1d364eb22e66a71a54a0009463a05ada3099d2d713b3476c295ae2b5aa0ffd22fc2fa7423e20ddd85c4641836dd41cfafbf388b2b028c221d682f3858a3a4cd8be5e6334dc40979c975f1eb76170c0e581f4b892bf598bb552a554175263d5610598f609cecc4e59bfa3ee8b755caa1e238c61e61f8e39f07dc82eed33d1239956e6e8c2c4e1ea12b6f6e3e346f3e5a07f00bce6f0cf37ec60514b45341ed6b5cd0eade3c95fdc6c352f96988620fdabffe7cc286c9bfc98f953f41ea4d3485668050796b0fc1ce0bd00ec458719e360446b8109f7419771112f114e03bc1b73170b4bfe7f2b3f5a32bbcda54364eabe786c9d3a0e974307505537ec096e7f34ec7d36ab5bf13e9b5de92522f5d102c41f36070f2902d09b3072adfb52c50b968a9ac3a299a760e22e56d6c1a2a322bf4bb6fcf6ddd4965776bff558618028d334df56349914225b122b858605e8d5aee5065086f955197d1c586e68524fc1776fe73fe56ee4dc1d8189c9ce03151a5029c58c146ecbe7184013e9eacddb61935817ff53e94aaad44150d83f6270a5adb314eb896af531bc75e59470dd8250ac04b5622c5a8455083117450291524034ec2d9cbd026a309cfbc0871f881140caab65303ebc319f61e7b864e099742ccc01c348736c6e24b3539e65213ff9b85c8189dc75b5d9b10f9174c81af556b9575df915c66cde276f884ba05f10c169bb89e0feba577411cc4315c5eb7d4b135d45186560a539ff66354ed7240cd09b2dc47c121b7fb204def3f8ed84285e65dab1bba5cc0e33e658fa295fae58af3acdbfd21bb74e74e5e58b7fe40c6ab6643d740907313a8351a7261a1faadabbb448548f1b17d8a92dfc95838d4ef3bc9243948a803cae6bf1a88cc7c2956088e7f3c869f716ce0514281d40856128674badeb11e929471cd38eda1bdc29ebe9c9d9cd47415ef6c6678963f18d5282e8056f2519fcf24b36e0e503455d1c14f7d8254ab5298198f96f27d02b27ac6dcbdc154c0fb93e4f91f7bb52c26b1b0796b482082daa3302fa9fc966a868730a2de4266cad03bb2d75d969c1e9588ddd1d49d4298a02f082df80af51366dcff4e61bf491cef2ad9dd929a8cbfd90cc87ad2f7f21832c20330e07ad98df4bd11fd2d5875010ea54d3ec1ebb2482b5daab444d6257b3dd2161324d93968738a9a0631d97aad70230c6e71a10ad0cf8d57f2a8b0960af004978e74830a59e3f830849eeb3e16407e1d556db67c3f54772ab451032dfa1f0fc04d572ff7bdf58fa6a588f567b4fe96d3b1184b4875993efbe92638fc1013750cc9c9578bdf073b51bc78849057e52a5544e7bd952870324457b3ef6c0b69b2701008fb36a0634574474d07bc9a8e46d1d0ada366a648b1dc3c79397ffef4db8691ad1e07f28a6f720eaeff534c1563c5c42006cf1bc845a3a8953c4de692a6a560c32c5ac148506517ab13a56a7dd9093571c4f5d70dbbe9b58b5c232ad735df1aec0213aa05608c180ad5b177f8dabbac75ea27548c645795fd9d15f06059fc29101bd1f366373d485b1e0d1864819e6f8b3579f31fb5d2a1e9304f32537c9148f087e413dfba42a73c30af1f7cf94b0c02088b3528f40fb9f2a41435f84136c49dcb456fa9a7a785a4c79b9ec0966544e718470ff47aa9303ec79ff71da6358bd5b9d2d711be9978405e827b50b07e1e6ba43ddba918ba102646c411764dcc7e3df508f009ca4524f14f54a1584654bac52705984d7a094886055829422b5d288a109f7f93a8202a2372738afaf7d592cf6fe0fcdc94c5cbb5754f2d2137374cbc98071e1f946bbb96517ecd71aca5b455b68f0f2aad1da11c9d1d8487152a28ea90459e0847e6d6221ad2a0338f5b697c7850ac48c2b7e72e2d50d7217cb2e97bf7891db37c0f850f4831e51e0fc65139bebb16af0c25a4fd6fcac635a93cc0e50b40e423c0123f3c115f8614657ec3d40a061829dab0540ccc6fe7d66e96a42cdf3dbf5e008b87aacad44bbac4a0e0668029e89bc96f6c56ea98fb79eab4f9468a868bfa9bfed72d5ab717fd566f546b740c15abd31afca9fdcbea75642d91e42f6f9470aa2c3caeaa9c4103587379593c28d8cffe65dbec61f1b77c4f128be06ef719247a3e28f6719e661b8746dff5f5afd4077b333b72f6cf406d0012e421ae803a3ed3cfa859b1e274addeda2a7db468158b8fd7819080274791425cdb55d6ade25ef092cbbb6745d1c43a24dd29b05625fac0c636a47fdc58d83a00c9c1714d69e74592567b92577c657555540006f9ed6c6cb65911deb34856f7dac06ab1d16314d75917d8c76e8e20b8b5046ca5a639a365da5a72db90a29e5ac7f15b128a810fe875c405a089f0089e56151e2c9cf6016260a16e5f631d8399795c9ae8760c9d6de40baa5bd80ad75ac2bb1d9180b2c56ffddb2ca6ecfd0c42fb7228fd18f29546afaa0158ab2c7a33e60e1d510c840d85d84b1705fb220aabff73a4844e101aab70ff61e885fc501acf84b4f1faafe3d9d5652bbd70ebb8a4d5855a0b8f6895c8be900c4e0f4a6c1e4141a406c0a4cc8a8725eeff837178136dfb7b1991fb469b8f9b0360eeae215121cf6cc3b88f4a0174d15a591bbefd400c904ab33299fa88dce6cbc4aab33bc56a75d9a5e03f20f8e84cede71dc34abaede3d9de17141eb47c5e8c93cee2c3b4687bc00d6680a8ac5af3ccf1b103a8d3fc587930b7f8443acb3b8493b0c9fce53b31e2a0e172606a2d711af7719aaae2f01c4e14660c640ce66b01a2323918cbfa452e27386204e813a310d8891a646f773272f5a9fd84745a636b6c408f6c9f50591633f5cf4d20bdcdaf8c72ace80df1e7ff8c73c2df147dfb1901431b78f498166e440e0e5d09a8d68a5490108b711c04c1709cc09000fc4a487e5126b7bb880af7aa0cbb36aa8202a9544456105edc14e2de2bcfee694b1987a313c899ec399ebca15660135b2c53b96f9d078e7f787b68979c148e2dec4a3813d5c38387bd1f5eb8a7e3995d6da81104752a18d8a96e17e8afa9beb2992b52ab4b6e1af7bb9691e8720b6d3e6bda465499df4efbc61272264d727b1e858dd7f21a11004f1726b4fb8e03aa4cc0c9dccd69e167dea0fbfef47a15f5d932c955cc0779e64192c3b6ee21a3abbe8fbab3cbaa7db9940577cfc2faee70079567d1e8e3de9bd7c6b6f691cee9b169cfc0d6c4b2dba8fd2f480576392246b838661256b33c3f57dc7d968177d0b0e054850995f2a0a84105123c01ea1ba9dc70a77612a1741aabeb113eb57b870415cd6fbd86a79c6b5131006628d1e70cc93ac3537786d45bdd9d5ee95d7c1ff4684161f6994c957d61ac640d787097a3e98d87bb8af6524e4e7862c2e5ee4d78d41cb2d0701db58ab8e021150bbcbdb41ce8bc6402018fa04a9a39c9a5c78bb707a8e997daa669d28d10885c1b68fa584d90266fc17e7c153fd96e0d0126dd09b8e9dfa781bde2334ced78e2d6adacffb053e1af715e7d585272606facf1a2736238b234cfe306e2dd92add5424c8e5a697eeb0827de8db8bbe904c4e209a8aabb96ec54158dc05baacf6a1e8fa1cf2a1434f17c5c46b43bd07e0c346567d11cab603bc71b34259e214a60bc09d3a360376ad5d89092d58aef4a043d621f2e9368a148920da8ee0533a8bb5ff0d8679cb51b14711ad0e1d8b7157dcf09036c84fbd2f35e8e03aabe01fffd9c296a9671dc91cee942098ba2641ed3e4d5ec238e4f9a8d620b92a2d3598abb0033571806d4eed465ddbbd3653bae28fb671e3638123281d56bf282d94486025468e5eb7289cbe319294ad1f7b3612fda7f390d7b62380563d86d887724557c4a9baf567191e0ed669f2396b1ad80c70e7611772fda3563698927443f071067fef664bdd4f34d3b5502468d92e9d64de33b9b44726add7ac9b30fa0d0605fafa99d8c818c575f15e29d627d9a9263d2282182995a715482d1c3aba870d868995711672f3d4a2df85be22b85bbb1f2dc0c61a879a8562a238653d5fddf20eee837d1b40addca0a74323cdbac09ba582de5045664efbbf7b2d60733d5f80a9f6a6a80e651dfe71a8d379b7318a0395d49d89282b42bfc10710c4f4af797a0a4dfd0ecfecb625e7f086e8f93e3d1e128bc0a86538211285df24a6e5c0e5e58bb055eab7ff35bf3e3524d8bdc542727670e4889dc3d989aa88289f1dd7b22ef3c01aea180922e05b96da65e183dc25a59ba8c5cbd9e70b40b06041a4e6c5fd4798fd75b725e6c72ff6bb4e9b8a4618d33f4b6bf54bd888792be7adf695e477f9394260f9d5a79121fdb624f4f387a6bdf442ec3ea3c65a2af2a5f102782c83327bf575e71470fb30008cd78836fb6171e0781548fa20798f94860410ade137ca61c44c08c7ca23204a86cd1d9a307cce6fb84171d5f95ec0faea22f749430ba620265f433b0cea85e3341850f8c569a1c8e622b61d8aaa888cae6298927d918d7e8374664c13f5097b470b8947cd73867a1b3c3ce0b9346d72ab91f954970e96e0c24b660b06cb95102ada76594f82d42c1271a77b618e8463e7c27c2cc62b4f016922968d740cf1c916e1536829308c1497003f97c1affd8a56eb4fcf2495e1f611a1c1f900191f62041930813a26fe3574c0df6933280c88cafdb70b757b4a5d536e6f6a5961b3f9c0cdd281e6990a11be6299eea58f80413a2602f414e1acd6bbf6faf6a79844b6bd9c290e9f8548ae26176430220327af670f83a7854adb2d2a74958f29c5c3b6ca26109467e40f2b393e1f863899df863ec17c3fbb9ce9cb3adb80e0ddebc1ed78a6175eb1521a7e09d08ab78a45de34ad7088d3c0bfd579ba3591df46c7f28372c8ba50191e8aa71d71e08b5757676962cfa2fc51a9f61c237d9c27828d682845a34a942852e8101c6bea191d492645c0c6ec9c364437b59798ab1bc64cd04e565818c532bd35bd6daa6ae32c750ee2a43d7dfc0c35080dba3c65b7702d35bad602a31cf7c37d6cc62796c1d5b314236e2d8e64330ab1634819a4dccbd4aed024a15d1d39c179fd48ed276d2e2901f53061c49975237729552c6ef78000d819a6450fad2b9d1d83cea81843cfcde20d52cf5a130d3918bd16a62a3a860e59b107f509f4960587f1e6c33e538fdcc43b61b8e0df723c5a6fcb447ab395b5e5461c1af2489b4d598b81ed66817e980a10743042df010076c1638d606a61d91c0cd375ac0a139d8809fc739c01472da13c7e14a51e5ef48e66e45509c7abe4ff75a6484b1ba41f722d2294a52357a0f7aca9a4105ce1ac4fdd5496173fc9e8702578fafdaa0c1a897d8b2532a64a6fbafa492cdce40cfc7f61df9c213b8891b78a11c822fdaab6acbe0759ad7a20dfb3b5b489378656b7053815aaa03bd4604b48b4f8e1d7c29f6c2c687629e4f9855d0f8858664c40ad2756aeabc066b2c2b59d4d020945b262f8e3cb51159e34a73584bfb9cb73ab893255ba1b4b34a3b3cd506a23e63464f46e9880e160f3efc4a580b8d65a05ca4a889ac5ecca3cbc6c084d86e5543c9951ee33adf4f8f5dad99e992e4c9f87b3f36dffd845d070ea7852c625548baaa7788aa16afdc262defc9721b1d920da65ef907a63254e9553d67891baba5ef3b615023bd61d30e9358d3d41ec38972a107d4d4c975c4534ae8d91f0c0b739083505b34b132b18b3c65a2a90936ad8698277ab6be8e904b39f60ce10cd7125469c56a75b54d4a49b9eff9e3e6bed5b12c9fa63df9032b2b61fbe21e4eab78a9c85b803679047bd56af33c872b9559dd1051c5da62f7dca9f2941f23053da7b16923288ccaa37545a4db0598c09c9ff8b3e3d8421752f45d25f18a940870642a0aadeac70b44f151f19ca4861f789175673acb7fcb462145824c268cb073afff38a3cac57befdeaecb3a4621ad881f1dc53ed0a2d54e88be1822a7c715b205c3b9280af58b9df5f03995f73ad04ae424013c36a23389cc88bd06f318a4acd24d85a5df4aa8044f918a37c864bdacce227fd1de06c9b637ac6e4132bae64d46192ba776903a132723d733b3799d9f58343f8843d21ef83c6446e473c2effaf071455596119f3091179de819c2f88201822d6cd2f7b9e743f3fb86f0b9527abb1f6d9290c247033e1f51976d050ba0088a9711c843fcfffe14118e76bccc39f180f57eb46f8e8fc032e5a6a958c2377824c108dd0e1ee83cbb77067898fe4d49cc71c0dd9cc13ea8b99a8ec12be78ad161580458560bc49a1534459630909c81f763586ad8e8257ccd66b717940f4b56ba2ae434a8ff74a2f9caa5541efb9f981332b5e8ccb5d52ad2905652c80d9227eff47b6017d6b03f77802471c43d3183758d2a56d8fc7c7c748a2d1106e42fe8b88085e56604c5be70a2cf1a6704c469ed1f3a7041346f92d4ad6d179d9c3c457bafcdeea54b7ba3a978b13f1f8455ed8991d42e3b717d9a11bd51ba2e85f187f782f2209bde1de4b6ab838219ee7b557afbc5aa8557f01c40829446303b87603ba98a325008711c64d9380313f7ecff6df0107ee7efb24588042b153e0d3a687b2d2c123df0f7b006536e449ab7858a5fca2a5a56f6ed3a176b8a966109d6dbf6938eeace6eb07b1bb436de9f2e5877e3ab5e34766fedfc8dfcb1072ed0375bc153693a184d51b13a6c0e4cf46030b081985a5523d47547e4fc5fdd633cb30e7eea503aa73fb8661e22c62dcc6431d2e91b48e1d89bfc7029bba8088d1a4ea2e4d3f686906b18d143851db622550294175f3b836c7dae6b1ad41e11d38b65023ab496c9d92503f301c228c796dd99ab0543789368d3e900500035a59dcfc9f8e19880a46a9d1fbce0773481890b37e2cdaa5ca6618cb2a978e1701fa42991b43c93282dbe877138a26b2f4fe2be690aa6d37c97b04717391c3afdc94f28772b6365ebe22880d799db6ab5fde4ccec0ce120fd41e33e63b236b5faf6fba4ac08aeff3b89d887b456cc1a12389a58025c5a363f81308dcc9a28269276fdadc3326586dcd9054e2ce4fddc0832e0fef4fab5d148b6bf31ec8e4e8dab6394f262fa28c43eb2b14972cbf9c5885ee17897266b916a15433901a9b8a6daaa7adc035152c608e2cc8d2fd97a253d48b5fbcdbcd8899597f87252eb1ae09dc050d0f765ba2d289dca61cae16b52ab1e44ad80664708ef8a8b02c1250647c8e83733163b796d765fad0c4c79e9f0b980a014c3fbe4bd20f29ab047f4afe356f08a70044c98ddace8cd42031e4ce2bc862a888b0e1eaa470f013ea5c892a094b2ec241639997141221586184871c1e93dc77e3bd07eaa74470de99dc47d5afa24dd9f1ad030c796ca318c3df7b9585409bd24635a55c81525538b4913e69471033ed189bca1bc568e026f7c63df5ccad855201d020a90e033a58a50407ade69f9dc5a0aff09a2e662659d271dacaa40f72744ef9a23b3f7800d6fe9f45d1a0064dc89308db28ee887ae572374fdd3832b9573c662b9072c5f89a10b0c90122cdaadbae1abc854b0221867568d50c76f72729a55c507ed7741812fde906181271e1e52133d73e4bb2efcedc9aa0c15225a45195bfb4da2e21e27d6a932992b4a5d90ea92e845e98f0888d37d891d462ef50945f713a4f9020472f872d0cc709228ee1d3f38eaa09e9ec0aa49ecf39c263dcdc90f47fec9a0f1a833fb5c054f5b5b45a36b3d0d498aa297b7b92e023dd4d42f4013d4a0f6998d0da3c19510c9f0c8713512c0c0f33b54e3b93ff3dbe7a9404abd57e36aa0a8f973aea40bc7a613265031e371c3a56de6f5120a0987310b8c7328195147042df38db24b070c69dc9c7e658dce6c09f52c50fec2c53c058058c36d5ef0b2ac1f1fb264d2f4cf1141aac8f63b32a7fc634a9e6a7025736cb01310f4499a302b0b82eb3f8d609b86b2b5cf4d9924e8344b9883056c111565de4aadb4f839594717bead789626fb6607ef47c4fd0b7bfa770d45652afe41d6b7ef5762cc21b38d74868409848e4a96e7b4bd4286f77070ecde4e8254c1a926696f2f0f4ad78ecae4e91fbc11894c7c89203476cc5b56cd4f3c97dd5fe7c4e40caa0ade3ee1f3a83764efeb8a805c7f0348db6ab353d114b0b39f19c4ee06e1c61cfbd8f3403ba3ea5297edc7f317cea3f64ed023b541fc19971722ec8ad96d2eee5015535b8d748e24f903f39c1e527cb95506f64b0556252c41d0398396d10d6a9edc3de1c9ddd21d04169d869b30a521944f2b4f130b81e4e87ad0f43ef57d2d3fe72394644beeb0075c4adab669be03a0401fa36a3be42fd96785d0925f5feb16dbe20385d3ccf9acf0272a7b1b6a158a98c754d8b0cd9e258e7900f8068da80d83fd8575557b3428e5c1d8a20a15f446b0416d8970a0c3c45845a2c2756155e975905e14236ce6a358c00116ae08eddda4681d5b96d120a6fea076e276e81485a1301f0f9d15ec44f4cef515aee2fda1d91f6fcb139434d78a537caed4eef8aa290fb4416f083de5e7baf038dd769b538411817b88a67e9175ccfb3db6daed75c0d12f12b367fa01de0cb178c3293e95bf434665435b573fe97259f2fc5e36af9aaa24f90951b6fff558d9ab45d23c9091b","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
