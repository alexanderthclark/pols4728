<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"c1bb312c7ac8bbc4ad15c829fbc349b1d36d7e88a69fa6fafd97e0d7ff88a7ba0c61da7e8031bd98bf257a3341bb303e80fcae11ab82b9290ac98df92d27dc5c3a37bfbe8367663219e955832cb48ba3d9262c0a98d7829c7cb61116d41950dff5b67fa00d499d406244bc756f8e0c8a467018159114aa2e45a28eb5d3a5f58c2b5814f0d7a4d164553684387264ba82104e28685776485e581792e1d6ceacb5828d26757445f9fe264894bdf31631ea2f3729a50a46dabd22f9db5865970034f3d1280a40a9bd11fad2fd934f6b597d1eeded1e72474651b87caad29bb6553e534b32d9823fb828b84271478e413b51f0b3b59b10bf8151c08cf1bb4acd0418e434f5325b57c7ea571775491800fdbd77d6a6aef348efc6b500ddc6702abb087ee2a321f7ceb8fc3a79d205f8f3b97c44cb92f695fe83bc293d5432fc1bf585aae666cb6d6b1f7e639e792f5f2423167068216288092075630a36bd25fae41e67584b00f8fe00cb237ea67637975f58badb2803e8392851180568047b6ddabcc4d117e26857ea8ac5b5ed252d2ac7cc713cc4c8d0e57a832f78cbe83fd4ec4dbe0600fbbccb0835ddcdb8f9a05e3d6c170c8c5befe34286fd48c6950eb8a15de50be5a5e5788b590d520a3abb97a786ccd8c2dce3ee8f9aba545c7b79c22bab5b6d13bb1ea802bcfbb442f8553e5b1d1866657c6947253ff34c57ffd701c82d338e349db4fd1da7776223219ef5efbbdeebd6403639292c4216822bbc41abcd7fee4fe16c81ee0f3ce931dc3bf63e5735bf2c1b46eb01bd9c81cc0875059e46c83cf9f11c0bbd2386313d9b49b87e189c505aa70b86df46e64beeb2bcbabe08209d08a5edbb531fb9147c1b65b255801f3e3f13a6630b8920b0cae9c6bcdbc88900879e56f84266a480b8402b9c52d6983066313a66f6296e815ffc7d88aff3bff433c423dedc1917035bd2aa2662af0c202efa907460ccd4023951e3293fb87cf82bfb53c792927debb03648334e5365c1f7669657c0283749ffe52190c38ea0143e05ac4c9cb8ba5fd697102ddf36c8900118e11c6bdf2be6ed97278cd9d772f7c7fc1495506479e7d0a55e033b9f099f94f996ab0f7e6afa59fb755b75405ceb957f7681120d3e4a5d56736b1428fa65bb20435f3988284ae2cb1f8a946a2f2f96ddfb08cd77ced0d0732927764f935c2792088889134f59916464f322cef8c1be1f4aa17d36081671d0642ebb9a672af7b8e8818ebe4cddf342fdd79c71fc0a447ed818944bc6b891ab6874b91774586de0918d647def05e008da687f7b91e0892cd774669b841d1856773a84ee400c5552b12ff78bf0061749c87c2899dac12c182f0f623ff75b0e8f2b80e20cdf5918fe53cbbc65d3e271ce489e2a53790dbad6664d8ecc4a0b13b7e0c6707591a0d6d2b5f5dc2a8029f515828896e031ba3bcda0cabc011f5adb698921cd8f1e76e98eefde0dec3908669fb8595c6085e2f8435ddcbaea3d0d21ca150d7f82c964d34cbc41e0ade4924a9c20a0532c9c65cccec1964f87a8ac3eddd3cf924fe36e911f34704491c0e0a2404e870f519ac1bd050e01b8bdcbbab1c2e74dd8fd4061c20ae794d0cbaa532cb9d13adaaf1a02a193043fc620fa2416a50383db0ea58ef0497e7d883d1ceb877f7235e5f49ce02a92555bf6ea70d5d203f27b4f83374d31ab803f3f698593a86f0001456a6afba686bdd24eb098c43e73783d813bcd7a165ffb5b2925ee2ec8a9fef272c5e1c3ccbe0d32423e3c1fad5f601a8fcec4cf66b9d89c02740e93f7e5de87abdfc461b34871a385ec0b8fbc987e0885ef9ec989b0850a1be3b9000ea83788ee0d582b650dc49d0d34ace60558cf7f679d5d776f35eea43aeb2280eb044df8bb8598de9424a58fda948f6519a424a5b47e875c2ebf5793d9ca8fe1ea14279f89c34143984c2185f860b34dbea6c7600280625b22b7b0f8dd5a4b48beb6a3896e294dee5703c01aa4aadd4e66d7bd4cb8989dbbbc0cb4671d65c133941fb9960bf1a63b8a9fabf05c84392b73eab50bec9795609a792e87f57bc14642c4216f2f4592c77fbe001cbe2f0583b91cc11a0527c97e3d3f7a8927cddf28c0ed17573ee6c3414151f2cf6fbc3b591437cdbe6eb163162faaba1243252a0789b15eb385d2fbc56d2aae022fe402d099a55cf4ba1016feec220c65adae1f6bbd5dc9f82fb138de0da58e79059eafc9a0c1be5331aceae2af93f13eefc17b3c90ca08ae89a6b0dbeb9f6ec35fb412ecca6ce9606466908f1b4300fdb2a346276f9f2dbec957cc3f4711fdedba821c82b8343e8190676b0bb29a16cd54aa76ae51eb63287d7ff31c8284a7f66f4335336b31dcd513801220d2350ebb69d44da4b19ffd3d7ee97176b1083183f687feb28e07912d5b81957e87c88664c6e8cb96f7a2897a0653517925fdd0971e1a2cf0e8848ead4b54e62425ab7d96f173be0427862c82d41901cdfa22feed162fbf196236cb074232206787c151bbe5d3c3e5aa0434c03ffe8045d98ea61f340271a8955b53628eace6fcaeb31b7c06703d0a4c3f93d48f41da566baaff55a9e1efe8ddd82adb5c8284cb8d5af97505fcd432f2cce88a03c65284f9285550e1d9952288a5374b604bcbe0d7c98fdfef475f770eaa2a5f03e3f9445da4bd3eec5b589798096d20c4bc469b69bdb0c8763481158036cc1c8c7bd730a52bad33c4bacdba179714f90894d920c043336de25c167b1a45faad6a1972e652ac8d02a8fdaacdced3837b3eaf0dfdf09a8f18f04c79733a4e821e2ed156a722e6fca060fa516386f9ed30166bbbddd0552551fae1343598454a51cae3919902888e23a1a457315e3d04ce9d175cbf4dec7f43c101f340e88d927ca7e34b446fea599489e6e76e12d212eb83601350814d7de0f101cb86ad05bc64050623b60ed4af7d50b4c69746236ffb2caf426dbd705c2b75fd3941d82404dffd32ddf61e3ea4cbd265ec8b22c08b6a5d81253c322fc0f105f14550dd281cc0e4ae7f56b9948c933085c4d82ac98ebaeda4c997f82aa52d142c5ebab05b1b5ef241970d01b2fe3854285c2bb9f5d3ed6129455337bcf147f201a0ea03b1dbca03a90ce1ab8973ea8a8916b9f52cf2a1942291951039e86ef91754f4858c9137e4aa297711d6cb2b0dbf2a01465554c5a8dbbf1c912c60bc981449d46e598f088d1961aff7743382445beb920d0802b1a01b4cd512b8dcddf99a02d4b925d9e290d4a9774188399a7fd5317a583982196d8d5b658d494ddc888d5f1681589c93eaa691e24c7d67beaa9582401697da5b2dd96f5e56e8e33285da43b5a3ec83f56ef165131252fb4c6186ed156f81b4394fa4c440656c2b23849aafc7c5860ae7e6f561667f9fe355f5c19c80dc3d7ffef8ac9cb6999c2f9bf508f9950eeb0c848d65680a25fbe65ba2e13ea11dbd07f8ed48461bd2fe6aca728e177b894b1acbeab80303bb06951bb111eedcde81c726ef11a49e8dacd48cd17d6531cdc279b343264dc7a9dca230e3ce59522cc62cb24051803b117e086fda24ac245ee7476a2d70a18015485dd09e73d5f64053986790fe949ac3fba815a33f2abd44d8474a6b509a403996f57f7d406bdaa5d1152ff40cc109e1ef09421869ae7b36867c6245f09d313341dad33e8b35e220c6092fb0ecbe07a605542143c3bbc733a07fd164a3c458c2ffd7e15ffe386b2f51862decdc5bf691ace3c56dad41e014522e77b6beaf1965f5129ca8aa3b675169992c595c5543e093189e44d68e36436e1cb814f19e21fd142eacc9285a0cdc0ea33204ab82590a9881f405e78b9bab92abb1965385502c3c22ec8511a6dac373288e09ec75d0526a0d104d3502f9659d8d2ac7b75577f21899853234fb48962ebfa4fafe2b9dc22ef3a1f10edfb2d396f073896fff54efedbedec7c22f72b1fb511a331f54c87cb60579ca88494fd5f805a4052676977a7e368f8a1e05ad9863eb0090cf8228ca040667a8e83f4a52a737d0468327752bfebc5fb49876a0f0e0290a774d90ff350590c937e346bd498b66d0297cfcb0449fd94fc5372946f95a4708dc9897b0f9a2a98ac026df9a246b373bacc113e6a0aa482f4ebfc98e6e93ef2b3de773fae446ba4898cecff457de30e4175e2c0a5f661a0e5aeb6aee5458df51287091e38e7fb1edb483a85da4d662c4b0fa5607faa061911bad49433c75959db8c16fea8a0c8741a98455704ea62658a7d0a689fffa67082f309ba4238d6605869b86e510edbf63abd3cba6cbf070b1184c36b331bef8fc43e25c7ab7fbec0611824497c876a56ccbf45f27ac96ca1cd590f1ac97fc8ce949f1effb5e08abf8f17b525a2cd471a1607d1b0d8201c78f25ef62983ec94f306e067f95ef76835019b06a87ee8073174fdf85a33f70bd15633a86991a90da4d5b4438dae1a4c40d730ca4fab903b509bcd73f35d6c8e09dd9811befb9144cbeba0ff7e6564ed3dccc31b7ad4584d1f30ffee8ea854e3698e66d645e924296d9d437e03aaae6d74cc3b064eeb814a2bb35b4fe50e660da428b4e7596e76990b7baf77dd90b1afb99d1f7d18baa9f4bafb4bed2c9be2304d80c3b357b17b82c727cc6aa2b414fc1246817201fef64057bb32681bf6057851d1ba1e12355bdb456588c92b0d8f11b73ef1590f05f742691962aac2e276c94539d3f221f7eea263869994afd306d1d3f903e981c4b66838cacc56182bc19cb18294cde18f04c2c84d211a948c68116e7e496562c2898a32043f2280bbb04f3c8b6cc1e7e43fdd4ef52a161a7f06db4e4b0093b61e860ef6a43244748cec8fdf4464bec40a697ce8ae340e5a6a41a179481cbf60befe7f96e27191c05e4c370fdd8c36291c17e3ae54060fb687578da1f0379b6621f8f9c498c9ae797f942b62a58e4571686dbc21c195534dcaaa337c017331aa2893de047cbb216f1ce0dfdc110755a9722526e38538dd1d405bd217d0169b09a29d74d90afa400b6c96853d1cd8ecf6d73e8429686f6cc75e055b7e28293a8f78316a7a70a2227ecd873760ece4807b2b20db1161be7f0f43636acfb0e22e3f00f1521023d4be7c0e143201f313c767c5051393af5c294329127495568b4ecdef60c3f6c7fb5b8a28b370a8310f50eb4560e3ff05a5669c9653aae4d190144542c90cbcbe63409b7d56b859d38fb89339f58a918776314867aa7fb32e1342111379127e6ce21f0f40a55f7d4c846b713c69287db4dfaa562c1fe6ef33eef7ecae3b455880494801373e5cdee0083a662a134491a2060b9396ddde69b0ad4dd9c6c1f416dd9ca7c03f7aeea810209a1ca011c0115680a3b4745adb952cf71fca6b4d44d2c6437b712a9b58b7a0b405b9a57c23d4f7cd38c8657f2088a8dc9944e83c29b775b2584ca262e10ab9c49ecc7adb5286401c4e1042b3a75c4bcad78c2aaa722ddd0576c0a8a8640421ec158b5c51c6c14d4d9f2b8192e452b31a4476d030d68326ad03a257cda191ed032d0fb2a77f35026c8726f97e18d06b419e26329a0a996c9d617503e0ae217c2b0f44d0bf15b4ebe5a0eb6f8f5ffb56bb7b3d175d9a0cd19798636ccb8c2b2ae99149bbf46a126018a8310fa0b47d05306099e79720a95873f04f940049f774171fe5cfba9caf726694ba936ae40310316f968dca4a96f63e6e4dfa81bff84a84fb254f5edbf98da7ddc5c23aba200a33ba6d656d6d054179d20114470be4d907b4257c631cc79af0b26c5776db15e953cdb77e93177f8dcb92473af4ce0ebd856096c99825614577c27ef2e756a962ebe4da25af9854060f273739399e88846c4bc2b6427d01423348eeec17064094cbe34b96ae595a8179cec305dc1c9950ea54a4aa7f8870afb18a104c767e675627ce99fd95682705ec0464ddd591784a3cafb694ba20765de1a97c71923f0533c02aeed0d25c5831088ea0904f6a1289e4f22d176d2c2057205fc645d51b38f830b73181a026b9a4868261b0d3b4b8708cb76b3c78f07fbe5fc4eb773020577962e60ea0329034eacabde4ee6c711741f256be3e2f8e498685e307c8fb571dafb7b6912866fecb51b27fa4d715d040c3967a77c6a555c5626a35f80ae7703adead80a7de9c1c37703eb2cf8d06bc67512925fff76bbee38d87241f49671de9f4fe324b9690d27d487c592ee5c568ff022e54098faff4b9a2702cb102b9b331fc60d7611ff0cab0ecac09965da0ff8520cf59b7d2077c348c01cb9fd70c2ce3c2561e6067350f2f481b121fb04e270dd18808627643bd794ed92f5c70f165982daca0c39c4637085487075dc4b0724e4a5954526f6d464b6d498d64b76dabe9f143933338e18af46760d6c0219775f80a10c247670c899eb874c5b165a620dc22f8379fed69abe9c733a2f7931234c0de88f47150d6e5fb6148b380d1817a3a0e98700dd2f690d7797670d79c00917412f67caca91c69692289ebc40249ddc1be0dc33842d76272c02fe3c5c0179ade01f371bb46649204aa7059be257ef6c890ca768b5c3ac2c7894955a875df3ff8a7f0e283f5fd5ccef0f58927c06c0377e2e8c84433aba63a1accdd8e7385d03ca9b559585b209f38d19baef209144ff8c08733b641857b4dc89606c8979cfca899975f34ed0457cbb7062a88e693aa0ff2ff43974ad7740aecc93441f115a0aa32f24e9d33ff39953fe983a41b9d45cd641af03a49f0a8e507cf5e682194ec3156fa3568e2506e9ddf9ac47ddd82f56aa5f7dcea42e799c96ef189b4b0e90306ab99416556b9afb5ced87aaa7685095ddfc412b115270e7236e001df25037836113b8eaa19cb45d7d1a7f3371b08b94f320305d0f9a9c1cb12959d43b0093ca23d60bc3f310b2689472cb8250a7643d6f0ce9a04fb0c984fb4eaf38a84bc3149f74d5019bb8a17a20c630f635377381323997ab52cb781b931cfbbcd22d07565b13ffb2bf13df23c77da3f2b2ec4df2adb0c56fbb7359e5105ae6448c98c23da1dd96b66aec9c54b9a03a1474ad26cc31e4d808070a26567dc5ff344fa0a5a7bbca15e7d47f608fd77dbbdf3c86dd8f03cf148ef645b4da7a7902303bed65b5c5ba3b4262509c17523955c4c4e0d0a51c863e2d951dd200c3e83978da98fc309aa0d173901ec191e817f5a4e403705caf8e955b7129378eaa43d54fc3929c5c23efb8873f5be455cde9d6e734d632fbdc49834c752ba020cd9b4aab99aec275fd133ac448857626cf87b428676fb32b60667d11723d38dff9a1a5ce7619d5ddfcb25d87698f60ca74f1031facd565a3ad9f4ee543b5dd23122c4b7486e1e1271106524dd7f43d6a074908fee25e635e2fc45c1235c718f681d15b0e0f330698b86d434f9c7d5fbed886dbaff0098b123e89b5ba3264eff6e6a4013f3179aaf9d3496ff7262a97f6a999a19cea846d8b95a3d6b61ccd2083f4d0dcd0a3d9c5de923b039e49ead868bbf5784fe0c0a427169a1147bcdb37d1b30120a0adab8fbcc7d0886b48b513722d8cf8085956eebf2463217104e074048991f021469e5fdc029d6e3204360ef6de9cb2b329c6b1488b3b5acffc4b48d34aee890f2b4de1977ad58f506c5e98742e1c1faba1e100d0eb98a478962c32b903aed6fdfef9b2990a23a24fcece96a166d3d11516c6755aaf3a578e05f987570a7181e2ead58aff4d0f1ba17831d849093ba6c766a2667fbea96337682972ed1277b7f5eff263cf65687226c21f3aa884ed86b36329330a0150a6c34649972dee3d43a1b5b0b2a519809ede13c086b4656e4a1b27eda64ad049e052b02e423cd4133ccf9fd2cae33afeb853ca30ea3f87a3d40eeaeb1abe93f2f2af12d18dd48780463db7bc5f59a630e7287a0cc56dab3e6873890970177ed4a85ad6a93f9479a9ee23907b2a6f000c2cc741481d8d3fa4988129a8ca449f293fb169a73984a8f3bc0e8c179df8cfd3ee8f159334da226567df1b0b2a167401ecbeccdf3cbe2614eb765a04f92ad30e1a3667f83a9d4e682f09c026741b1b2a393709856ab9c3a0181650c3ee7321b5ab8626ea5294221e80732e6181d32d59eb36538ebd821413b659a7257c26dbd8ba95bcce5b2289b75f7d374c9665fba29d62bd1a5262d619ae3a0fa791bfff3f61959e58511f8d01bf1fee12b5f5310d3b36ba1660f1d20665a2ff2305253d3cf54d57679b8de63a55ecf347eb3de8e19af8f37031f4255e9446664f5b465ddf9604c9f20eb8aa08d20403adce07699cd417af656e16e0e3974a228f59120a91100576625662389792b57a6c0c6f91be00101b3d9b4ec14580cd6fae74a36d9dde6e944997570887f124c624a1f9b159f8b139d12eccd24cbd47ce939ae25625f4dd3302ccd8d31c11191be4c8da3b5688c4fbeeba8fa720637cb1d092a8c492337c913d178e0b0edce59e5ea87a210478bac395bf984058174b997acaf0f3ea51cff05318ff4047bc797dd153a1005c98a71a828923355bc5c8dbc8ecb0202fe6c844a2e25453da8dd5c0109e35a69e8f2bfd9d08e912993fd83efe9f0169171b323a7189bcb9e0205facde0baac77bfc2d08605ae9ba1d078858a6161fe4816c4777f03c758a1bc4620103dac389f22c02342b6b0ab350264d18b74769856656eb512ab8a0623dba45507d6f5a93ad0d888e969abe06473e0172e65159c3da354f26aea03668ad6378af687b654d9b312f37b281589ca50f0de89b6ee610206aca04a3aa44be1074b45dad2162a75636b15b7cd1b2feece03d8916fe2a605cdbdaf684eadf386acc5c07d46bf458ffe45a8e3948985d86c598d70ec112f946e090c54829090fdebc30d84ea6d272f5964b30a82ffdf3d268f3d94a79c7ea13be8c2f9d5f239b797010d319eabbdb2f78ddee5ea7cfe384616d64bb88489ec6b6ce84fb462070b4c08d67305b2e12f77d4f3e2610d8a17f20adacd2da580cd036ba8ffcd507b09b2b1c3f517059957b654349957a4512a244c4e3ac2ec933d4583f865c3f304207c063034b53f88795cc4bea9b65ad3a72952dbe1671a2cb3f9a6160ce8ed02ba63d6bd6d06b0d74ce6881d8da95a779f93a22763bfecf0dcc8a4755abfaefb7eaa7a18a95a0c8798d4d1f853ca8aac81405e8001a84e53f343f0cc1775315d6c5903fc075031d253ca61dc6c789e57808c268a613294fd3f13fd8fe6191d541fb9a802e9289f481765d41c11290b7dcaa94bae0a85b64538b971a2128da5c43b4320977f0a3d467c53d347b95f27c059b724b23ef2df211d47ce28184603654d3818c56a2c8780399d960d6d2b849e1b8c6d31c78cf265190e55e16fce388b501fa0dad01fdcc5c83b54d2dcb53a3ccb98aee24bd625d760068e0c7b8c909cd39fecafe2ab029f7319c22604fb32727481a208949cd1ed3fc32f56966e017a6ed4b84443dd1beea5635ca53419799299cab24d1ae5d0e275a47a07e6f7f9f3536acaea56a07f6a21c6682dab934a4b7f1258a128ee2f176609cd7ad5c25adba8f83613e480d0e3c3a2c5e6ccd15ffed869371e9d279f6696adc9faf3619e3366da4697d885ce63470c3a639cdd4c68e3ddeb97ad1675ac5def1192c390de8be25247c6b3dab7647f7e847d8ee854dee0d6e238faf6ad7cb2a65b90fa668579f59f0a11eb04cd590aa87e74d3e2a8d4ef57789e9c403eb399c7ff0a503b3561a78391b82acb796e1ba75be984cbaf525119a4f99fe79f933b4683dad8f4ddd4a88d1e789a69a6ad8d0f3dbe442c3c3fdeb4e023877b98614d801aacf0c8b2af870e92e47608229adc1356c2ba6351484ae51449481db7ee3d1ec0477aa0579b35236aae3b7633e01566eb6ccdd829c79c47eb96f30f05d62a678b420d22110c8ce693f6dc888f42251b7a4313a1a273b72b45761d233cda5dc789157e50e0f78bac32e6ce9f781121107bce9e4ae1dee7eeba65e3f0b3164190a77d0dba1f45503baffbfdc3970fa722049b2411dc40988abd7ece0a65140479abba8b8dfdc7ed45063bc3dd9478ddb9bebf345aa1a6f66fdb4a2dad4f25dd5e581eb1c0826db9cf87ab3a55df6426532666c60a5ac4a1e4e3ba3843bfb890469a09d72571c0fc3e6289910c87d40a75faadc3601aaaec264d03aa0e267711685b6f48f8459e3003d62d1f737185244a75acee795417cabdd700f7945d0b25f28c54eaf2e47d3c41ac66e48cd1b22c77e993bf115d0db0631d3822534a105268f211a1138f257e374d92ce5e20ccc232e197880eaca4c46f68299ff44543f3aa578fed5689b49bb45c4f546afdf2120054dfd0651caab4f603b9e54f1cd18b730f69ae728f32d28755feff11e936ec3a7dbdd794c8ccdfb2a9391330eaab860c32f37c6040a8230e8c3d3da33b55269bd0149136573c7a78541f9f6c73e05229e917ff5d9b7fa26ea714f3cdeb42370912a38fee6151d10cce01e8f9eaf81b48f0fb3a34026624069155e0736424044edd174b008bfbfe6632482c849fe483f63f0333bad2ece997756c0517db2fca1eeb068af025856248f2c6d8f71f21f162562a1871de53f418c739642dd804ddea2bda1373413a9095b2416fed26ec45b38bc23ed4d6038120ef71a25de5ccafc0c9f3fd9fda5e4c949b2e45e34abed7dc32ed7af68ffa585eed776434b2d509a998acdbd166efbee65f09fa8703807520af4cdb92e7902541b09019cf7b7ff08978eca4b156184ce2ef7fc3d81634c1036fc9d35b36464b0e8e730f455a8d88ada121e28500a4603941bf7d6415febdc8f22014a6536cf63fe266bf5984bfce7ec574ad633ef7d49ac79ac682e51de5515762ff6a91857af522c53d6c2ac757a57201a1ae917c2e9bec895dbb88eaad1b2755aab851c60920ba5cfea302514b58903e12bb52e3489327268410b89bb66ee837f318d1c4a1713f09b9ef2b93a920171b4b0f32d12d7d272d6fcf3b35e6f2dfb18043dae1f20d2f153f9843a14f9f0c7edcea246ac4ce2bf4306e643070d3d119d09c82d42e15fe0530c8ede7b06fdc5ec9b1e5538f432024ad900cc2893897c1cddea52473b4b9a401a579fcf3255a217ee71403ab82dcc315723d5f06db70321852a0ad2e291de726ad02c01f5c8bc7e867e0ab4fb46f151566d1197fb33f0c84890208b693d54861b68ef0b3b3773121dca5fd75203907c186f1326f5369905e6147d9511efc7f7212997d29f8eac479037f7c64c6e205c92aee0a196faf1f6a7b7158c7866e1b831cfbdf092239f55d10e52ddbbebb5a0e961407cc9b24a294b50e1077f75dc07a9fb1f9fc6d3d8de89ffb09708aeea308ad1f5a3be46e2cb997e713e218b45fcf6a7c8cb3c4e71492e55f06c4c95ccc3728bf14293e5644432ac12fc00e293aadf0e22d2f8e8df2cf494ade8c09f92b202baef1907b21d850f011d29b740f14b98af741dd63af1e222a73f61321566355c22568f469e4538c72010910fff180cfd2658910355ebfe78bb22872e65812e793370b699b4b7e44f4dc1e8236cebf530ae963c8bfad994e99de59d1ef12337a3c3312c370497d6c6c6673a0558cafb0063ef3035ee4407b8d3b32ee48614adac22b579475302167532e2849cb5df8f11ce3d25c7dd8080ff21f6644efef6da6ef994b4f0fc86f7bd6e487f1c67cd6b0fe642b154b36ee0d0f41577df1cf218dd7a9b20bb357c09098f3e74b35ead8e682d752dd4583c57017108a5044998dfcad93f36cf38c3c4e84c30c2dffa211312807257d479729f6fe4ae33daaacd661cfe6507d8950577aa6dc6c6ccd7ae760c598c67c1158f25a778826d6a48adc8272bfcdbf32d4e073420c58f393cf2ca3a1fb2bfcd9829f44a63fa60b2d6d573cf7d9402d1856aa208b84aae6b8e66a3eeff208525ab2b985c9f96050234ad8b639768aa37554c3e9314d34a3017785e516244d515c8e09144ad160e3438a6b8554afed1b1e9b9f6ea7b339bb14468c379f15e1c10d8bc825f8ab6dfd99530ca28ae9938425dca822c098099bdd866ed6a677d080c14040a34e7a697c5414c52ff0c510599e1157ec5b9175bc1131c51b3ffda793c18b20b46fea8b2dd9b3dfcd275525bbbf6df75a73a7daed51d0fa695d2e819dba219e20238a063951aa840b9119d1bee4ab7fa6770c0e8fec85586d59045eed43c455bebaf4b708fa87aaccceb06d23c8beb1726bc20627ab2302a45b5ac772395f8939be38e58601ac47e30dec3845d771a0b8197552492c5ec72940ea051c3d567d150ca166324b13801713f2340babc86cac8b2de44ef9181a44357f3219686018900f16590f09036a9a6e30081ae0f2dffc6c64ad28dd34eb2151ba9bf0d6609bcf161622a4cc3bfcdd50d568bb3d64586175d7b29a110ecacadd8a2c15a17e83a6283ed8e5e3f04f16941a0a3687bf6ebba89e603a081e9153c8766604809584de6397a0160703529c5c25d97e79a3cedf07eb4aa3d61f718fa5f4f8bdaa7020c6036da7e09a116d43b2aee50bd7838075ecd5b7d1fed0a9f6992a49e0b5ca0cd4184e80c790b6d680f1610c5393642b5c8711f875d97d3b26c551e89220cb67d6529442458d570c83bf76aaf42a8b9f707110b5df97e4147149e44ef6edb058feb92aa0edceeba9e452e57dcebf5a3ed701223d21c947233be46624216db13e79cc7e65e483339cc7c4af5d07096b16adf8ed26c7df31cb36017869ca5777e9aa60d2833eca786eeba079c4a43a345d0f6d212bf1a9998f5f41addd9c19c936f0410c3e8e2fcb947add984f914aabf1add9e3cd5e25a7dacc99dc0a0d970b1e8b6e63fdc8b630bad8668e5d4b998d49015be04e152d11d75b3d54ba70db31c86da375978542d14e6381ce580ac83039f54c5668cf7dd498dee4cd7f68192beb54d7a5ab53e0b4711108a78a3370963d459a5843d4ef42b8bdd47eec4e1c867ec7f56d5e40197d20f143bec57ac4a2d0261d03a455e2f4c04c11b60cd64ca444d0404b7ed840adf53e1030523d1eeabf210642737b331ac1ca742547146852b9b982d5050734600c62e983e8f0e9c6bfbb212fab9654a27b4ee874840f4b47e088c9b8eb1ba7fab330da9c6b8623ba4691fc6ad6271502a33d46f835009fcaa86e26f3fdf9678c1ac73422525ec229de6f7e48b2167696dc1f0f9a60cde11da8c3e6ec8f9ec0bf518f0f89723e7e0f0c91382d1df87a36222bb10c242e16ffaf0609a8098bbfad21a1f4aab5a6c4dd8b3fb56329ba937dff5b374fa421ca91d7a22a4dfeb79dc09e769af089d401a84ab4e561058d5909dd092d974788ca43c474f349db7a0bd2ee4c49eb8cc7b1041916384e4814d8ee3cb279e8ec402c3f0912da4d21cbbeea3a244e887293a11aa0ac17436b5acced27f496df95cf4b6f4f440e8903e47f3b7601b66d3f827a3fd40032e357b7cd87596760ba4aa8b91ffee313d133122e8cf398d362d9372fd07024216734c29690a786db086263df9428f2490620e6fd30d090d26a4b948d8e5793a68cab29c970964791a66b0ca0add93b6f0d629a2d8bc7cb5ce97988ed8c32dd829c3e3223aba5ef0566b78b350d0739b60843eb6fdcd5bebde6021cb4b20d7bb4d3bcb5868224f49ff9eda680aca469182c5feb2231b89de0e2a73e4b75784b109c989e7ade2dcd846db2dd54ede83e34a0b6187f09322c935e3a6c4de4448b043d2b3268b4942f6c46ac4a6a1aa565ab31aa84b832c4904dca7b7308f61e0c361aaf3f9a9f8437441378d295488e8499a686ff538688a0963173ff6c78cbacdf7575fa0662939a59a5f523fd3256709456d606f97beb1fcb77c048ba91433ca68f32933bb10507438e876056e61d495bdf15a72eac71ae935737a0a8132ca59754c1b943f4133b8cb811fb27c1945d3215680f5651e27cada01c1ff216ab7150d93a0851f84cc95e474c1992e07fa31c5853cb56cecdf62d6d2ceaae10f57d1e9f52475e25290c83e5e093d6f8ba53b20e130842513d494d442e8a43b2121ab73bf4200d755e1bc37306de67b5badd3f246901effe7e5f2ed90de57311bd7f15d6da6788ebd959775f9a0c88bfb0296ce0d9aec4971b382073e8348efcad58acdb872aca4a79202222455456539dfa7ac2df186ec45e41a2f0b8b6e767d46f1707a9e7beba57d56f83c29d92e2c4fae38b73a577ba1cf44b003fc3eb19a7fb14ef21777575ec9b6588951009e752bbc465438f68ab76be68f29a8b53086abf8aed2d95b21911ef328872bc611f6089b8e3ae3fb0dd14505a1a0932c1236ad15afcef31a514a3387a1b818a04193a8892a6d1fcfd7f5542550f476847c0a3d5d2c87cd88495fb04c07dd2d2602010b232407035abc29f456bb121b9ed73117570467108d1a745fdc6b17515cb2c5e2f24cd0e2e1a0bc86be9c45827d789a6c4246b215cbde19001d2ecc270da239fe40d2d544e92ebc7952ce014f4390df09e8dda75c0bcb0d110f5d7a9273b900bc448d95e414a2543513fa2da25bcbe813ca935489936d3688b24ee8233387836037ce97a47b51f3ad000b11c4ef04d4b79b391c8e57d5a7d7bf5d2d1aed9021a1f865f0b73cbd06f59c3f1c0c89a0883e3b5548bc4c4b007686b2b55423238dd76f2e95dd7b299d5ebadd30bed5253059630216ad9d29a8b759d4849613fe0e888268eeceee91f8f0feb14f9c05a24200768ccae4a7514011b66953e167a1d9f5813ebe053ffb94b45ab4594eb1ce4dcafa9926f7f775630a665ba8a9599d87a9b6b30abd8aa63be5e27ffb8a755a6a7c6b4190812689ecd41ea5c5deacea74ac4258588408fb95135866d5ccbee9cee769ca7a7e20a2baec8d4b933e5349af6eb6c0bb84a1f173508a85619c098b1013922050e66e80e3ff085ff4d4abc359c21413a9649d89b48061bedc781aa51df107bc6a8a66bd9f9f0de7c9df58955718ccc71cb2924aa1d0314d3493dd786bd507394300c028396be014db5e5ab2191624e944225e39fc7570482f0a4ff7530ae7de0f9d9a85bdfdcb6e25db8d50983e358a3b03e2fe2a814e7177e8ab8ff754672a0d304a8e574494137878d01af82f8ffb545b6988542ca6b62422d07403d5e6e2f6e28d9bceda0afe664b4c2756d422fc7e2cc2c98d1383333e8a815fbaa60c2ecb7b1a25f5d0445190fac1a0fce61bb9806d16123f6b0d5ad5e4f14a1e4cc889ac15e5f1d71a95f3d42185e5801402f4b118e065b0b117983d8ad259c7e8fe26751fd9e12422e6946a11cc870ace4a9a338e4fae388429a93e428d385d4c1169a2a17f5a9ed4e50e759a6bf9fb780ff4dbaaf7b30db8ed7f67685686e873db5d2c05f5e74d0ef7f648da5670da2005cf79b463d835dd9b89189bbb5d1fc8fb432aabaf9f2d609e885a7c584852c14a18c1981945565b8986294a57429f48213e4c2793775ec8ac61196670dd9e0bd637f76a1e17cd3cadc138feef6257a6f348a536af65ab380b5e44abd49f68e05790a613ef18eb611b042456c9538acc55e246dfca64b59273eb34661e2f3ed5b3e4fc7ef4b2703826bb3afce9246d4435b2154a0d093b71f33bcdeeeab6d05dac5ae2e1fab55681358de9b104d34f9b120d1f80f8f10f7760c5697d8c1bdb5f1043361b97bad6e4485ffeb7e6ae1a4b0086484ed51d73ec7072b61f3f81b74825427bf8a166d7d043171500747ddb635001a350d968bbbbe4ac190db8ebfbf80f4a21efe22f3dbbed176c1393657deec9db3b52114ff75272b5cf17982f307b99257e497b57f456da37a1aa7c757845fa70f950838a7f2d3ef724a8ab798fcff3d8071b3e67d2aecc40f3fc0e239f6cb2e3504e40bb274a9e546ec03158617494387402a3f01e8dae257b3cfed366bd7ac3fa4057909850c249ae724837f16590e06f31e6c398357e13cae70d1ae377ba9866aea3daecce941053e6083be4bbb02ac511577696fa79f19c2b2531908770192905905207514d4d1860a30fe15d0093cc08790b0bca22abbf09be9845a9d52b2d2b16e983cdbb3e9144356c4a09f88ba5f0c3198f5304c6c897f9c1322b7c8e04d7ad92c418cc6a04dc84c25f4884182d8bec666df1af5dc026339ed3f7876b02ef2efec0f3933d820ea43e9a13633498ecd963d4083720129ebf3e5dff47abafea5b6b4a99a5c6396742fca506092d58fe7918dbbb239eb20569b15b2bc398ef9ad7f297c3b29d61862136eb38e6a14a5055250f4ca5e2f2be6ca817fa9a649ef9323b290d3fb2c5dc901d8d4ec889072ffd1eb6c23e6514d4fa5b7229c54b62c8ea5261b289624913035efa0c5c5f3dbb96315e9f773b5606d317e7cdc2cd7cac5c86593ea435e155ae403844c128fa6199450272e1eca326bc27ac84e7ac6425eb2441de25c256f1463990a8cd03a4a4475049e8cd0012191ba2c3dd64fb8a45d3604e626af28e82fc831480c08682901d5e2d8eb3d0d4f2fa3464471cea2a5f4149e52f6b6f383ddfb8488ef064c5b9b0dce63701ac3c9a9c31fb1f46ec6d7c1ee5904c6d6e6c9640b9ba24d81f4378b118db444be3a4d63a297296f824edf42cb67a359b9752670d313c3eed65bd7cb75c9b702b5a35ee70e92d06a43e37b5c65acad82055cecff104f1a539de854c19466a02fc712adfdc41327118292452f7a85c8d504d54a9e121f1d29c3ed3ca2c6893e477d6a63dc5f84d061db78dc73ac8c41d0e614543040f97951f60e342163120ff73b3976a83a1bcef6633ff5014fea346f1b1798b84d859d7401c5db8e0bacd262096e6a5c96663f348e721c64501275e999c8334889a1f056c84aabb6f4ea06d6ab7941ec8e00cdd99a373f37fc374f1d8a3886cb223a68b7b460fc56bf8d93cfbc3ff9e5377b1187221bd0cf5b357149da70cc4af19008aae5c0c8038bb449b5ad5ca320260e22609a654453538a0c6918de5187df7f71e22fecf700e1c7e6bfd3cf70193d8c8a4ba162ed0dccec6697c7b56cad4726f95284d5b23dec5e792620b6273114d8b3943e146582fd5028ccd5436e36785cc21c48393b7f74269dde2f67c73f27d4a7dd6021db480acb269c2c8785a3e2d12aa4d841c309dd453db655a60f3dc086561c66b6d18e0a2b24fc4f60256eb99a2371536a35b3754a0d8a9b15b9545739215ea54963148358eab7da1e3e2fc99b6321b1237692ea9e0fa32b62483b405579f342d8de51e666bba548a0b02707d262311b7f551c8e22451f58145e529b6ef37b169cb7ef285ad8f13d2b9b509d5dfc97783035f8be78e993bba184bdeeb9f09aebe61dfb8f9e963c9fd05ea89106755788b21610a3b7b62819e50e672e14feb4b872c0cfb0655c5ad7bf037906f7789077ee52d6eebd8188cc61149e30328f9e9f24b8652ce7443eb00781e5d1c7ef38d4b4c427d6f2638e241881be7b233a549f765a69182ed5ca43348f1f2d30d2ab4ff0e2c4eacc73e0ea76dbccf7d270ccbdffcfd4419ee38bef5962c179bf8813b8ef7edec25a4abdb56d4c82a79336dfac56fcef7cbabb755c4bc72b67ef97c183caad60c82b250796bc8d6da5554ad0da7aca766d11e95f99a697caeb82a28d14cf9e29693664e293b0db589a663ead2b337f760011514ef70997cd41f7e4f64f0ec644a97cd4990f4e13769732d6a9fdf8f2b0a6a1a8ad7c91e63310c7f4d0d7b33457e3446565bb208bba0a1282c57544fab7b4257e784a5cbadb28e6de0a8746f0c0dfadb5aacd7ac77dfe16f35f26b32c0186c2c8b6864cb6cc8516bc468847baaa88016692a3a9a7b2c2d6863923b94fa5170226cfe8f7adfa0f80249f47bbbdcaee10be1027df6559960b7d2a3a85e158b7fcfe4f1b7fb332168d1e0464a1d2c416b720a2a621c8c7a3631f5c3e473fe74ccbb27fc2dc4df7b4dd976a891509960c8b2092a6d93b6b3d2f16a4f5053112ea45ad2d3f39610e197923c951282ec0bccb3871f4a1ea76b522c62ee1c198ef1aec4298f95a0802afa7e57f432f41b4009c2ea81b9ddc9d420d5386959d1f52848b8659bde7ef62a3504e46640bdaf78c4f11d2c35d8ab47f336a73741da44e064bfcbf52cf77fd35ffd7de06754d9b9d81d0560848930a56dcd00c825c55fc5ee587ea6ca0eaed538d4622de320292f17ca5a3c7a13756caff66f9944f7487837f8f0631fb3f8d0b66d4e220f602c1737938256872ca2d5a266e5ca77540da927d3416ad04f88cc444d67bdd3780539e0c00fab2d9ffe90b7e1875c4c246cffb9e5b91a69e925c667bf69b2a3e0232835f5a7a627270543000d520b044974f3fe7db734cc7c2206c92ed9fd72c0c4d6c924f3db4efcce13ea4186021d52e075dcf7f308a32b6f239686bbfe785a69a54f37c81c1bca4a692eb1a7c7cc1428b1e3baa40f4f18a63e919b0e767b1edd3b33dc25848955e63cf91ac46716af23468f9109dc80d6087e541f76840e7d289d3f3c49dcfebc16210ec467b3ffefe322f4d1daad2e321774d28b75cca2a8a2e9b07616b78d58d8eb2db17d3b60543a1c99e0b8dbd1096e1bf53361141440f3bfe8d4b72dbc4686bc7142bade055e6be4a782fd7c9eaec0ff6d534f19afc3664edbac6178c4ca395c2ffc32fb14760e8c08049b1b03bf3141ae22d5df045c477dc75bf928ffb963766b1b52d60339b39de6281020608427e6f716ea7d986a24f4f8cc59d666c3c4f4b9bd72425258fccda018dfa371a37f7183adc39b1a11546275ac95e14f3a2e4d3435e90e5f7988d9e3ac5d27096266f04b06e6553e5c42bf5d8d0c57e7890ddec7493a0d5fcf5cc8d722dc8ee12f614a7c30bb8e8ca8c7c1585aa42c11fc583adf032a909354fe4f76241f2504cafc41be72d9dc25a7439d37985d556e7d2cfa3878dfd8e4e0819ae3b76c62ba4ea73c36e6958d0aa3c618dd0ebe62348514aaf251600d348a4855ea6d365476ff0c7b74e3b89035214005d11801b2bc6b4ec02ef22bfb68fc7b7059e37b57f7012b31c86bd4411c4d272072eb6b9c52dd0ced633aa80dde3adbde77241f79e50ce5c26dbe277f905e4bba0394afba3021c755c5f0fe87d5188d9d3c3c2407e53352cd68633d8c8ab3b23235eb6684c075b60fd8301a54a8435c153da8655a79696040392883497dcb7f1da1ea0c40dd8eb39b6559f2647312417552ddb1088fb05fe5c2706c5df5f039d328cb09f5e95db4b3a83192d99ace54cce6d8c1973912b495ccfda06c3efd19d6ede2fdf48a847e1073617eb10432299b29614ccfa07fd8f88042b85c97f77c5ab48a948f87067b1bacee2cd0fa659ce7440437b16a5a408dcddf798917c25ae2895ca5ce51ce289c65ae15b34be72236ed76336c407e87020f2b80a165d20efdfae4fe895249378fcebd2f33e20f5e1742817528e4b53fd0d84bea8e8dde7055e6c4f83e421b6f09ca96d43142e7bd1e773d808a89d766a731b993eff8e67f729912e5ad1636074476ad4f8fcd41f2d1e8901fbcce0d6323e3ec6b54c3b140a121cc6ece50f93dd68014d1d5685a577bdfdb856b955a24abca9f0e2e75cc8fe08a124e8f83cf4d7cf041fc58d0c73f721511aba3294f7b6a79f6e3525c6f5f4090442f5ec1f91ac415c9899739840669b0cc8a657b4167e1a7ac237ad9b76dbb038a8dbea3791f16798bc102727adc93756222bc6f6bba9f60fe9351636658cf983610a3715a72bc8a53eb1b726441d869a024cdfb64f9059252685a0ffdcaf06764dedeaf5d395298603cf19d6c152dc7707198baeb49c4a329cef272989a1d51808b6625a85edccd88e5ce2ec0065a1df11659f954441cba206f98153d706ec33114962651a417b55816a6f6d6234826d60872dbbc5cfe7daa67163de1d4d4671fdc945c09224fc43c7918cfdc422501e7d0475ec3004e952a6ab32aeb51c82fb454543a5ceb05b680a26ef5413656b96c22a929f2319dbd0707adef5719f467c56d0d8c23325a0ee10b723e2b4d7bed2188522727f4d453598e0a4edd3bb934d67c5e3f14b4b0d0646d5879cb0d0481555fea26fb6ea2312cd5d86f4cee7cb57971ca2f88fb9b8b874106fb276c5a3a2fece5a70224623f4fd97a30136747708b20b6ed12faa24dd0c25793acea82b046ddc9d3b0d337512297741015dc011f6a83555beb7cb094081872a37ad9a3ac52810dccfb2a0b68e30fc3aae2e715886092259dcd410587327758922861b068414137ca10a5598efdd9e5eeb4e4cf47c325f3a5e9d2fe6bd281028330d7ce7f0c5028c99ffd3452c0604b64acab53ea59ad4247164165f4174ae305214511fcca7d559fdb9db96af0651353d94c0c63b7d13ecd96a44cb48b2f027fe889d57e468d2b8f15675ce6bcf2f0c07f14226c8ae595a81acf1c9f89913c84cdbf1a8eb4bc967869de6b02fb84a740b9935724c9f732890837052ccfef64b4a741ba2ee91691c4ee1f246e63e090efb161a93e7c4c12bb31929b3f7743375167b0cd17f80c0244a19b8d2cde9e85b88733953bd9d07095b11c8545bdc0c294454c31926c49e35e8c5887e67afe8ac0f3133383edee7f3af42f5ac80ba67aa7cd395eb0bffba2d01b46d25a73114de3c6ff829c76348269eb3e8bb34f3b5234f2f14cafb53e515b8341b6a3c3c661077e3b9596c314f17939d9e3bdf9221b823975a19271fdd6c39a86783465fbb786c321c8049e88fa28cfd8b1ca4f5a32d2b307e7aca952b8c19a19e6cd88de1dae0bd6f74497fa1da8d7f5732675ac0a4443d5c307efdea603c9e11ada","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
