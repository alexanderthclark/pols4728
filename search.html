<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"52c3448a6e0e7e453c24f2d41a6cbac9412e789e3d1f141d33a5110ef7ff08b138371107da545802e840fdcff504186897f504f8cf30269bc2c7162fc38d76c9fab347643a4c02adb3d7e14760373a10af361815f467d9aebadd76990032e0430b864ef6bd45b7c200a0bca04fdadea0b6f078e6076bf85014b5fe5d5e3ab37b4fb05f2ff50fb83ed4c3fc11467cbb15588ca2f831ba2525ac33181146abc70e188a190b3e89a6b498c6efc1f9cb142305e8d4394643d2664e160fb4aa95c95caef31860f46d83739e4189a65da04a7cdac65c51b86f3672a0bf1412d7368599c64d56050f8b526700dcf3db49cbfc386fa5e06d8202b7beb81963abe8e05ea7f84b7aeb9c2c530e2470fa9e567672211a92eb820ff9169f896ded46698a114a1050b86aa6237816b44d48040c2f93354b14a6975d3c64a8f243525c998c03ac2669493f6286581b15b6dfc9f67559a29044089a51a623500b3d70c3cd366b617bbaa69cd186ca93eec370a1dc03094b95b03190fe9808e3e4020a73afe1b82d7b8342c03ba650144fcecc67493a020959f7f88063ac3dde5bd35c2cd8b0e9aeb57b3d0d24f708014a3a5216ac252bb6c3078a573b0d7b88176f7ca156e5d0458be6babb753dc5667c07c46c6657b5baf073cd3c0cbf51898be63ccb9a34b9709116a930d457ff91ca4bb672a646a78865fb6c0cd819b359c53b52274a32db3f1723bcc12604c3f15e463076c9562cfe41167565ab0ef578dda3f7163d34ef2632f8b9460443baa1c1de2ad4c044782efc72f301490ab6d04a9ce89d6fc86f5fa3c74dd6eea5abbf1b51d0c65800b4e7d82c4c0277e9b0f665bc8ffa6414ac3f925f02272c24d93f4ead7b736a71851c3e2cab5c65b76dfb36ab1f613b200de1489069c9288e8bf971c95056204d7f5fe6bffcd50bb43e64476d9aa32990c7312e6dd83af0ac5174cf3de5f33289fc5712148339039ec1f67900d01d01f23e1f20b087e35ec05413ac8509c83669f88d67c8d0ebbd4ff4a5d12b777dc6e520b425918b69abed9242873c1a6e6d8755d3f0cc94190fe19f631d3057dd6e07dd0ee91244d074ac8c688df8204c4ddb0c7903c087615250a5efae468e5bdb6ebe5bdef1aeb61eaabc971e0fae176ad939577d2d617dc8944b3148446392492cb5990fa6bd51dbda727b3438ac4e34c3300876a0801459b4b6b010048bc7c5790e9a82060d5f68fe9b549c19ca79128ba051f99d32ee02bc5957e7650a85b07b7cec5eef43026a3f4ad532fb47facee59c732454c9a00dccb2a214615994d7a67e4fbed1d8cc9534b3830be1d880cc3b1b478d94ea6259fe6a667dc1eda4d1a81ee2bd4d8e74af7b3752705b9f1cd69a237e12b1837a718c9493967f2fe4c11f89f963098d317def9f9de4f15ef7b5d473d2b0d0eb03065acc8349427447a59a3582c50f11b050326c6315ed4862fd7bc153e2c232f89cc9a13957b0ac855ac3fcb7b74b8fe52f4b44cbe9a40776697e109200722865bc7a6775d688e479761c5e0b9f5b41fb1c52688e2f98b71dd8fb8724a484077fc82adae10f33b13c147b7d4d2301f177a87cedf1c2bb7be108e51cfbb2aa5d14c3fffb5662edeb8200637f99e9db2bc532872ef6f78a5b6795f2750b0de6d31e2393a01dde822eba674687c331c4b02fa19a31cbdfd3f4ff12e0eef5606a3a90cb9c29b4a27164401805f2a464f540c2095c3b4518f1103526814edc2d01384a74956f94b6e45c7ebedfc96a96f45f66ba7fa6cd755eddf634f0751cc67c7930d01df141f9054137d3f1c6cc3ba3623c8d4c1bc961e3bee05799a78306f16e2c17dc3341304db8b795fb28d5c06339afbb07f3c5eb07a9f321394a7989cd25a0eee33ff0dc6c0dea541d6e06c4411ba652b6822f654b1ba732fa20ffd4e91f4044a0942a3e620beef1acc94cd2588c7993c36862771035bef1875febc4c468784176522fe16760510795295e098b144633624d7d1cde3b8c5364fb19f2ad0f3e75fae9da94c68712b58a2c7f9b3d774b97cb05c992a4fad79c921cc83e65291288e90eda6db64a30687ce24c72d1bdbc8275456954cfdb4767e7dd11efecb1323eb87c56ac6c03e5b6b207917242472d103ce91a0898fa113505429d38c4b1e8be175a4dea15ec4a4d6d12d30d77b48b606f01d26376b912508e543475a2b7ae20766062980a158936291b352dafd15e36cfb73e349afb1f9ef3c50aa03aedf7f451319358bc34ed106f325449a9631549ba37d76fde2e47b1770a59de0a8a1178f27cf66b865704176a5ed039654a78a7b10aa55d95c6cd1159e13ea5e609c622ed9f793b9e6815aedbd499f9f308812affacbf0749846a65f1c4e1d9990d358d2a69487fc085ec0d58a9ea5fadfbfce480851552e46b4d49ccb5587e7a70b2fe01bd158924ea5f0acb35ec84d9e369e399f0f1019e59c16f4d2d3a7750d7709701b7a7a42a296cbbf379c82c429c0e6c8ba25f22c8e16d5586fe4b8217417bd2cda23c3842793f716bdfd1063ce07e799173bba294213a1fe677a949772574ac7a2f6b62234c0b6a415257261e589058e366b729c7832d51643745c6f3f03a5f57b3d6e105dd49b843f977b7d1c432740cbcf1076f5e4d5f9c6d16c1d8d48d94b8320decb723acc37d6f05f30b1b7989ba544be6c768285d040f22de1810a9b61da4af17cb9523b3d0623abdd9ef7cd5f722a2ff09301743f94394540087ad8ed042e870bcec95d5b5bb23ec9d2710c5c251626430dae20a024feffec631b2c326817ced35ac1bdcdbd005a38b11a26255a4ee3578583d0f1f5c05c5dad7654127a10ae4df56f852393fb54a3eccd1ed1499e1b2648d747daf6e50e42c10315c4723ece91139e03f220cc7a7ce5b246e1b91b4f7e00e52e417a928b8f4977999ad156f0dff8b67c0f720fb00021d56b4870e818f017a82b9ab9cb9d1cc15e1c816fa7fbc92b35e93352f00604712134028f174071017204a7cda9c4e4c00f06b42f2ef0eaa14c35ed5beb067436528860c4e40b436ac1496b440058bb2074719d48c7fe5fb650e9a0a40d915d089de2ed814091321d8342c2dee8554f64a78f0ca4ab1d3e66310463ff462c24ba42d00662628d28a7b6bc60d9530b3653b4bfaafdc6d30b7ae4a1c05854abe2c0c833bf052db5cae479dcdaf397af58b22345c281f83519a68e14159a2cddafb4d690713b3b5ef2ca8aa0231f40891674bf10f7158f62bdd3f83d165c02a5c215da3889728569d9975a430ad87e2b36eaba173c38b2cda856330650b5052b19b3a9ab07b208bfebc7c20a056f8a8d3d99ec3969b269f265528d1b5027e55694165f75cc3919085e9675d45bcf388dfb7618b9dce71cca681bccbb451e796b2dc558bcf835b8710298af5a9ca32115aaaf560881510987e896cd46148967cf57c57c5cd48d2181594ba4cb638a3a53c5cdcddabbaf0e47949f02395360b600292e19f9ff67c89673b71338611420234369a201419c4db56dde2b4794237dd1a277f0957b63d28ac5fb1844d51d00a874db3511c2bba3d749f0ab8fc66f0e6f6da439ee5966c722f3add0d760d98eef2184dd914c0de2c6c53576b5cb941a597da2418051575017c9091e6006fb87afaab5797ba7ffd1e2f5cd9188a5cc8de851f5174288f8cf198c2a958939000cb2257b7c0bf4d9272890acc91d630c31381c242735e237e95789a9e9e933400da7eaa553993623c7e984a3be0e4de31ea72d653f15637721c428341d85d593795690022e11ed9c7926e66265567afc4dcc3913c2ad8cf97624bf4555f1cf84bcdbbc503036d5f568d525964f28be1922553dcae1863bb441631d53773718ccc7f2d752d59b0a9fb871c1c0c69db2a8d48aa87ad7d1b5eba273cc01365695a1b36643147c90a6542bedf0c6470846294f726b1b22915e48d4796fb51afeab13e25f0f3cd17fa0edbba173873accfd10c8488fe2a619a940f01ee4b7caf61e171175efd127e18c66033cf0a51cf7b70687df0824a201cf928ff7ba8ba3b9528160b695710842a8027084b007ee79ca1c21717a0e873d2cac7da5c285f20f27d897a2cbbb5de83b5e2ec19fd0e21df30b169b32e4ed72e1b9504da2addc1579bb0c294c014fcb19d65055ee02cf68269e888142a29f76a5a3f2cefed5ee08ed878e0bfd484f4a480ea0cc697e3ea37cebd8c4c42e83875769b4133627854d714be29e3cbe02fb1b59defaf9b3071bcd8c91dfa4dffc3634be7321764b20ba10893fb14668f37d4bd762280a503e76b81c594c9f1967e26ab31741fa97e8533202570d91ec89be87d3512b71ffc52d8f94d1050fbea8bc7c52132fe47c27fd35ff15c465491eb26fe5fd8bc750a3c2649369805eb788bb8805bc0ee2002db2e36847cd8a680c37e6d600f55242137d60e25a78feee179ea37ae55392e80fc4d39a527b7ab6fd3198037d40c7cb2213ceb6ce3a882e4e36a5b59e7b5266894b0f599ce10dfe1b8bd183b3bd8a5ab8fb9bda36677a51ebe8d9deabafdbaedd4290837221f2309ddf600f0db9d667d35aa6410d76be05eaed4601d16374910ccf66d114707dce26cec26f009afdee0e5acb72676aea93a6bec88ba87bc8c738281e1a675bbb3b6d1bed5dceee38de8d9e44fa96a87172efd377b0a308a0a2bdcb580811f1f77b623e0a73d1dfbffac04258b652fe4869ef7519b104d0edadff5caf55873f83c656ec5ccbe8e5754f325da5b12c7c30907f4acdd4f6cbfc3b97f5561037b27ee1dcc7697f3ab0d744167c647202159add32c12a1260c5f120abc60afcc5be455420f927edce009bae1bad86ea0172c50f83d7a9763952f3e455a2439b442e5761f7858c07a4c5feb66da70ad31f4cde812cb7a106e9ecdb598bcde59a4c718da2f7f1ad466ba8ed3a9d3b45256226ec1688f5168ed6f4e1de39b42211bce6c930303da4ea2d9615dcc6d470c672307ab261d7cceba02d6ab5f070fcf9a85df33ce18c1027dbb0498c813dfa07e06d3982b0ffb1099342cd4beeed091e0360370b1901365bdef59f5002a877a2d5159042617e3deeacf93b87210c37a5da222aef0f161c314faa350572b6639aaffbc7a31183a1d460c840d4306194a97401b1e90f4828b24ee1f7fe5fb6bcc44df689db82ee1336544491c1b61d6f6ce3e9eedb84ed7063e875f5b3de770e0dacd46c26f9311e1c52a6d43667cf67039e30005dc782c2db2f6fdac81d1228e62b0fb16915d2dd77c2abac5533d308a09ebd768ac97ceaeac001a3fe7819b00c6a0389773a1ae4f7fba76b157b27824b0869269bde95e542d490d74fdad32102e828fdd45a9a72a6130e33f3f5719155caf6631cdb1ec187a0f36f6e5557840fa1b3d8836cd532f40973d6d0a65003ce5df0e899808017e1fcdad702e8362ea55df257d9d5ccebf91d68fbce2c9a62a4e910a9e3e71effb5e86193285a1ffbe9ac5e0009c3bb8ffe255b7441ba7e8f4264e341c998d55ec962dcd32dc1ffdfaee92fbc9508a0c18c272a571c1168789e7b49970fa0b406509b8f591ccdac434dd57316bd51b9d825e4fe5ca9b61f56915ef6a71476cac68371290650a7636d92cef651c8d8cb2f96a68fe5f48e3b40eaf6571f5aef769bca706ff33fdc53fab536cc3ede7f65345f69515894b5db255ff5ad3f9192ce47c641092ae67f99617a9e45990dbc9d90fc7d2a224519e3b5abfcc79fd8c46a752262a4e428920e03da64bf848853616b376be3d278def294d61b7b29a56f21b9f698b71e7c83e79bfdbe6f6d4f89ad70e1ef8f5eac33ed2cb683333acff3bd2e92126af1f14f188e8f7c80b9573f296b1ab24f77166a00d5cb3450e9a474ecf081503d16edad2f710ee55dbdaf6b01d8a2d359541f863a8ae40dd42bfcbc5dd9b0b0bb853e75bc9c4409836ee44993a19b9a9af2752c930794d8f63e95d69f049ce8fbeb53bf641e7a0988589c536dd7b81f2c080546ac6cb1a068d99409f51883444de1fc9b19921bec7fa560fa419e92dcadc8e1178f9ec725a5d067ca914dfff62b7003db4b06f913be6e78327802be7b1d57ce77190b00effa6488c67c5d87843921f45f1202093842048496e42010c4412894938cf6c2ae21e794c99d80482526fad28b7348543b3e734629b87fe3e16eff73319eacc3306cac95cabbdcc3999c1241d45e6d5b45d003cca471e2dc328d416591af3901bcd8a6b360adaca74010e192fb052870e3413c589e1567bc1ff4f40182f94ffbca2cf482ca8ae556eef2d7e6879376207938f2eb2374a144a758de2ce6d796615f89bf4b9111599b2962871d962d39d7c17267af1e6b4a17cc12c6fc00bc6d8469a5eed02777925e335d2cedc0ff8e490840850405341acc6e5d5cdbed172fe95251fa1033d61c6731c95735af8691bc1e1eb78fcfbc67ff1a18bca6cc87ec8533f1d5307826bcd6b1c212be97d601f937d48cb8c5a00a37e0d939af59acd899d5522ec3abd3e3685e5895f8c5bc36bea7dfbff30164a78c7c72d612081c4814a0829da7bb45cfcfc9b5c070b24bbbdf1f7becc3a84d7ab04e93fd8fe8c15a6174115114441bae2847d97beeb92060f1cdd5dfd61875c364bde759a93221d83d289924359a64296110eaf7c174c923d295c264d0206d2f97e98e2b6bb10c17f1fbdae316c46bcd60d742849d96ab216a661cc122b601ab8e55069b57eaa98ae39e7ebb0970d83b3ae07b4188c9a276c2b54b875eadf59c8b4bd69232af6307f43c37306183bc31e5b4b5214d68b141e9d73f5d4a66c030cb0ab7f4dadd101adbd8cd1ad86f664d7db03b18962f08049a6093c6bc4445a44f3351935d51b6baba25a71e4cc3711e89a05d7262b70ae7415e4b86c69a2a812a59e6609bd89f12b45314a8aee0590eb0344fcbcfc814e506ec57f29e6fb03835ff62465c37cabdb5f6aa31cdb69d0600b98616f183bb37c6f71ed973a606401e3b46ce549cef7032d32554f4bb274891d2744d45654e298a9ea6e049cac36889e18f0742889b812c8a49d6eec7445cc854886354dbbb794a66a457e083e092108deabdb33f1815907f61c2aeaacf74e48d972712ef5183e8e2a9d3b2512d95f32602b971896d8cc077bfdd6f7c10edfa33a715fcd0dcea8a82a21a5ced5608499725adcf31b7ca74a4789617cf619b9b5877a14e22960441960d7844e318c9d6b2357a22fbe684353e838242300909e7afc968fa5792a04d8c2034572a25d30fcc9e2d1eb3be3fab5cf7161e19d95edfc7b3e2e39c8e7ae30f13d975692dfb42ee1c01be0215b6bbfe96176a4d1e12c07d12711b086a73f06f64d99bcee7248c83dc98cd99c11ed3fbde6fb203458c595e36bb12be2c823ea9bf02de815b42f0eb62da8d1044453362100d0bd72af92eb6d6a9274456e9f5c0733ff86241479c187e022374924505f07a7e79184a41668bbca29aac522dece01868d4e973067b5816e526b7a42a0d82284997eb997a3ff7d6dd9e4c5b63caf181f5d392eec737602fa55595997a0e98b588b68dd9a799485340a7c5e6225fcc594ce2016c3b55bec92a562b3ccb6063d8db2eabe6d2d9853f14f31630f81a261074868c78b1fe25726f909e49f2ed5a214ad4ccb8771beebd0d438311de028e03dc94266420784cde2df32dbdbe6a87405f6761450446fbe35f3ace65523facf86c2154616ac6ddcc3f05df4ca6bc6b37f780d0d91941ccfd838043ea21a39eafdd1b17bfa96481f463b883a4a1c2f4487e0b8a0395018eeab13bf5280c172ba00a5850f057a5defe8f1a06ad685d6ad286c94c4d84280807262440b686dc7cce5c1e93ca8f66681f4b19666ab699592db2567c1e4edf2c869c11c5b8628b983a4a30f451ec036091f1931bb889e40b82fc01d3cffbefe0190f7998712d38be85ef0eda39ad9afe63bac0dc068cc7edeb15e489ddc0c0107bd84d7c89c86d2fb9432cac4960cedcf459509b4520606c7a6cd4f8e055a3e608a41289555a5eecbc71dd9994b9463ac495e7fff77cc74ed1e57392fbc00589835dd71da54100ae3b75f7d4209fefd876bad03b370179257c86d2f6df086592a2c24d8036dd231db8a5cdea56a10756edcb5737f2952231d573f1d0c93762a25e468531aba9d58cd27359be3c2e4be166c99fa455d5a34f114f4c02aa8587292ff44b5d1ca929e0da77d02f6c0851dcaec6cf98a3854860dc7c8083b8ca41e432a282ebcd752b8106f86545c7f85627c29475e32c3dcf5f18a20034d42ee26e85dd826135d870fe606f1ee662a054439c1211cf9cac3dbd18a678f916bc40476aa3d3302d6ebb3a352365252bce89d2789f9274aa9dbe17b2a665e956fa3877d57b4e6f80bf9f6cb916441e224241e8ebdfc150b99e9dfbeecf6853eeb5aff84dc10c1ccc24acce7e6c965261cd2a5baf5b1022fc93d69f6fcfef582bba619aa52b7edecdc59c08de5fc7d951d11663c878c37f3c42318682de96d5d8fc062738a25dbe1a7d7a00e83626e5e70e0f35a50da8cada2c911a6a17a763e02c4c238880c92dbd5e74670f842ec561130e30b223bd931c50f85c1e877410dcdd854439369fc41379b6b5417c30a2affede5e58dcb07f24c24cc2ee5eec74f91feefbcde284c9e65b3093bbe30f836ab5d9098e5a3ce7b5ad96f22dead47ff8fb48abf8a3e4c99855a7e281a4515c71385782300042e98efb89a975b8542ab96078af72bc1ca0f6edf187c10e6a91b823a4a225e3ef91a4c41035e2eb5372564367e523325d471e0af320b3ec9296b8c3cc7b823f6a56540979ccd35607b1afddab7fc284839bb2ba56c8930fdb0e8c8766cce598fc0cef09d56d5fd04eaeec601f4f94e7caceaf25dfa509632a296be8387b2a31f97a18346848261123735c4da2c13eaca37a635d3a96bda28c3643b7496987db34e30d4030ef7013aceaae9d85de514a662c187b692d6cd81458ec008b5b7bb9b76cf64c1d0c38fc48b5d14a1ef061b1329820c1d0f1d1af9cf6a4bc12d29373fee6802f6ddda067b8f1ac17fc223720b899f76d2bb2f4ebbd50c8e615edf5b34bf3d92e64b3bc37e46563130eaeaea25d21b82a1f3be60025b7fb112c8d24070e5916b23acf778663ad3e545c164474ee7e88129b23e27cf17f506696f642c43f45bd9e03e5460a5ff0169c163df8b8f3b49f472796e6121e0ab906162d15417bfbda3ed11e7ef19a3ba327bfde556f191fff783a2d24bde3d8dcc93ffbcea46ea21a9d1869e3da73dbbc788fc24425bc4255fe9408126152750ac6898387e3cc3dc3893c3b564c6258dc9cb77087887e852ee9f3ad6d5f7db274cc919c1ab561bb372ad5e5cd3a1aadada9bee99e1bb54817862257a13046b84c3149efa8eb330b04dea243b9ddb586f554a2fb7fc6244e41630dc7026ba1ed97df42ff73b258ec6c49e3c46f56c1dc4f66d7ffabdbf5ec884dd02672d7d4de222584232982ed806b48269365f07585fea3b16b265e44bc26da38dafd11fde931873135c78f51b662969b1e6947604fe55fb772a3bb321d5bb4404c37628e0950265049f47b88d7bad216540fe8c6644ed4557e779961dc9b3c22e14cd64f162df327605713e9066634ef539d3aa24c76330b5ff71a1ab14ac85acac674213f40bbd5070fab8fe050136c2e6ae0a765bf7f4fe82f2b41b5be1da0adc9c2e767901e04fa86ec89bb0b803fe2b0927f258321e4f389df983d89c9fabc11db785a8a7edb409f0251053430a2ef8b7dbd8043a51cf739575dabd9bcc417fb301b42b264113eeb5e5a814f94cd2ffdb9d7bcf29fedd79931ffffe79ceee4b909ea5270403f235fc9877760ab7be528d04bc8928268dde73f0ad3851ff7f526f167e8bf48d568b0b86dc2cb4d293b0db63fef8768ed8a90c52cd89d91de0c3e7e39617c21009f1cb6d92e847bbbd4b7da6a524b1a0b3658c8be3c55cb0575179f85eb6b9fcad16cce05b35c8310f6f8ace506330824845faf659915d425613c6278a0745c32b083b54b5ecf16dd65575526c9c9c6c616e913e31d68f5213bdca20e1f328bfdfc5eec79cb38c660b15b95ecf25f4c1ebdae4b771571c4168fbc531dd295618587ff63e94fb68f20febc63569a2c99af6be5f3f6d88b717f2acc4f62996f77e34059a72bb572ba257a5bd58777c356c4f2134ca72157eaeeb39a41064b2923382668cd6e582635dfa728e2848e8e343280c59baedbd9a8dbf21fc5f5a2f75ca933467a8ffbdf755688c02a123d48725dcc0337f9135c6070e5b4707ed12ee71ae0a4cdd243bc73f12ae9238288a596728186d23a8cb7e152bdefd4b07e35024440e0f5f79ffa92374ff6e1a8eed1101e68486745a0615811d23c2f8a9e094381909d0d72ff8366dc148d2018cfb817925359c3eb56d064ec688d78d7708849fa2a7d29e56b753a2625e404b96cad967581a3341d3cb80f0db209e7c931d0896a67674f0aacd5ba964a842c06db732a35392c2ff302b46d076f4cc61bdcfd6b16b6a6395000c1a378866665e1f225acf988b9a712648c4f00522441f8aee34325a711ceb429109228d1124e949fafa8c83f3c832007c54291a7c526372bbcf0c91ea0d84bff528903c0538919856d4d99115011d97e39a6b27c9be8c9fa97d0619a99abefd5df0b79411cd0b985db336d44ef3f14bba15a9789facd3a319b285f0e3bbb588a87294b8c31e23aff16906024e797cc43ff9f5e51d33d1609cfae3017490a1d5b114e07eec21da9122d3223f28d0f7218e032ea0b0e66a08fd443d2872f83df9ceba8bf9257c300fea790f02291746b739e13b6030559b38595432a9e564df6e97f10cefa02110db6e9a65b83d7e27f8a1ec6ea57f510c00a276312dff4a3b88fef18da635e79a11d100e1bce5aabcfbb9a80111bcccdc70ec5b2462040bd3bc68312b5cbe3ef03fa10be919f8ad492f4025bc76b98726c78071d1fea6bd99b5576dfb8e5ff81775535ac578aad5fc7e4a4a8e8aea6fd73779fa967dd12f22cd0f60ec83b64f7a5c959d490ce74dce04604ae23362e28e625399794f79b2b6a5a693f14c917bc5856174f2e1c9657ab37e27ba917f16b09109416be3567fdf47f1bfebea8f8902cec6429f12d9728eeb0ce6e5e8c7fa02d2d3af2fb0beb5f0d741986ede5794b4e042dcb7e1de257e5b31ed241675617a78b34ab3b48eb5463cc33369ffc0e23606d8615d341e2f99eec02ccfd454598f3bf98fc5f09f548b820dc91a1c7a0094fcae190519147d5eb020e10497a9f59e956e4fe73ade3ca14e7cb97152d7d6a2abc0aae61f822a5a9004053c45f5641322ba89d7d225980437990cdf0947514a94b8865ec76025820dd466a06e3ab17fd781e85a674711b075b11ea6b38dea6060a97ab66349c544207d20e0ec1ae49f6b1deb38329457999cf6b3ea0001c9940ca5182242ee63a9c8eafb110815dd5f628cc38ee55cfcd8952ec388b9ec0682784bbab8a8c581fa17f53c89ed45c982454ba171b5f2270a32c7b1332d1720549f367f29f17857b67b0e937a29ce7bdc1802c424d9894c4ed75ed4f988809ee8883dde79613d5368ac4a199c53e612062e5b2a86436339ce200af8c5097e66139a82ce4145d22298057b172aebe545979363517f66e76d697a65f5311bb7867f5d63c773db68c2c39cf4556ac5a64cff4e909dafcb1b572cb5b5401a3c1b10f4641fcf6eae9d4f202fa48d1d8c63374fc5bdddaf8bf8645ab0f5d86ae368e7449d1be3626f202e2fe0746edba8a693e0e0e11f7cc0c5b718fbfa8913d4626102ac217e9c8cbbef975b330a2f8acfaff6b61975d756445d8ddc41d7b9f0b433e6b2cbe3b12b4486dd589c12618ac530dc82d7c59d4468a542c496248e82d869bcb2cc763b8b9c0e778c01ce5e056bcb09817625b582dc17e75749132dc02b35214895a7ffaeaeb17595d137add5fecbc89f4099f33056c6d29ad0e0c8c462c02ba8578684d9f3bf20eb93fad505294c8792369a21a112ec9305a30d8d1504600ab32bc132637b59aba886332b1172b7724a799bbae34c32ee44da117613c6a3b960c62994c01ddd221e05dfed9fd901decb3f21f50fd3d139c55f36dc0e99def357e6893a97f908f927ce3c55186fcab80a839f90db435ad3bbdae31ee7a2ee272b093231d98aa6dc4492688ecab0a5cc8661589262d4e05dc6c90328dfca36a7dafdd0667657520c3db9ccad3d32abab487724b80fa5fde11696a11b72f62fe198795535f415c412a5d42ccc08a879f8273fec815ab0093ee7aad91b6aa87777e29914891ee887426581686a5791cffd4e1a15b05e78f78c9067db1381775e0c0473eb4ecf33a74cbf6ecb75e9c196ebe0a51db2047d95ee30ac0456837ef7fe16f0ba90a30222c1192119f6f3c512851feeccfade1778b101c59de0efe6cf1aedd766b93799e0b8e8ec4d3592357ec6d60a368804b26bf82214ec24a050e16a5332a40b7cd3dbd340ab5ccd150926860cc5b3118e6627f560a57004bae945093e8d49fef066775326d5b478901a4d30a8b758358e411e849e2c3dfd726ea95e8108f3f52b2cb1e85974cc10a09c92a345e2c8f01e1446a0cb68c8afd4d05f0a73a088b1e72a1803462e71d2dd8678d59fc9439379dbc237fc7a46d6b1d370a295e6a35399b51826c40c1d23fd9bce7f7af79ed8fbf7dcdad46d287af15a6037a5ccfc1d8a249c95fdd3bf7c645e61d71d38417a6b662fa76b8bdab3eb9a6874cef8d59e689036e56fbe00b352342cb172f6deae98e3cdb191a3c1a2ac64b9fd179c7f5acdee06ac47de4d23cddf792b20d3b8bea2c9254905e136c69f9441176d43df60a4d6b5655ff078503f7e354e3f9ed8c4d123c462ed7fabe0c628c7e18a5fb3afaa0459a901282f69539b20e1670d91b66654623a1b7a4a8b072e636b4b5506d75d98cbc2344e73486cdf41efabb9ca1b6859f4702fc2832e8e69419b4f59950fe4271323b2dbdd7dcb682121fbfed5e048934bf27a8b1fd68fa3ecdd430c952c9f9744acc6e441edc08b07d44fe8ae03936c2c4e1751ced6d33593f2a924e5a16f33bb3b30764b3d697f8599765f227d79d08ff546817cdf417df1a10b9353cc7a0484f5c19ecfcac6a670d1e0f05f7d699f883cabd5444a0a040330d6d1c524e20f158f10d64055f61dfc80d298980076f5d8084fc22d5b0f8ba5df819956f1422e233cce95f2a39206eee3f902b4d07517e37b5207b62479a43d3b4d92047e901b0991315caee336d8b28b9ef6943560aa3f1173e34a97f68a81b1c1e0565a266c8c85954d84c85b9fae483a9a2304069345cfdcc98dd04234780b6d8abd841d5b207dfe2b30464a586bb666233ebf3412935419d72a731912bbeff9a4894d0ae59d4d67623587e2487977b8939fbaaeb31d2bbb9cdb4cb717c9776d881be9c08f2119ba131ea365c8901b905484d2f2e82161f3c77e39378469f6fba310c76642324b9b84230371914105cbdf4b0f7ce674324d28d9ae5d8b8c5d8b9ed3e0e6c2c2b33bc937f7df240f85da34f4b098b0c86f9ef7bb57b3cf50645151845a4100a7e22a3b0c314c40fc2c18d5b9b359033f3fc5ade06fcc4be97b10bedfcfd211b57c92261298ef5a62b0ba69d647b6b6f69448d7dd58d8afbe9e0bb21d5eb9a0d4ea9e624aafe8cf06a0a35d6d42ef9e004dd8b75721b014dff36562623f15e491cf6f0dbad87f879ba75bc65dcd52dde65b8669f171e53e6e8dd9ebeb973b1cacc16efc3b32df222637b1dbd7a928943d8e868a6ee609831e923e1853b00524135729fa5e98b1a2cb8221ad1d5fbd5c10830f82b7f00a79bff856c1de3db622e80bbf443daa9ff078c1543030d6625ab3444ece36dafd8738a57aa256ab29e31954a8f9afcd3c57f131adb08100ceb86cdf82194d9bbc99a0f9623bb3bdff84744be2bbc7a5d641502d9f87523916d388554d8f0ffd74f89e5b02a4c1deba58414f0882c7af9ce760a653fb6a59754aad1b8123cf9709f6d2c5538402ab3d0c22d60e0388d175dffaf705183b489c3f8cdc9a4b794c6a9e8a8d1b73b8d29828fab9b4ad182d0e7ebf8cb54637aa7dfdf23bdd8d7da251befb0d7521bfd8a8335a77f4d1cdc216a2c88862fa9a49c05ca67a6c251036a3160ad54b31b75c67e428e5d431313be6740bd29f096209bc6ac4162be399e55c59710906febb5386f27a4e2614628763a848a4b99ec3a242c722bf41636a51e62fcf7a4f457c3064152f68307d529d6bdc77061fb438ea490fd0705e9b956e3c36bbc66e5b73cfd398c8835fa93811bf0741c7aa81d797380f18cde92e991572a13a544a9e735f83f05933092d621f9b44a6121a5cfb0652835f39365de4372921897c38034b5ae96af90ea0102ff258946d1196d11ea35509b15b2112ce9726c2bc40a82006caa567cb4b20debbb091a64caa22d3838babbab89a8aee6f8855df03b857865a01e26c2923df796d503968562804f4a945467f95cf784877c36633f121a96ca701a6f4caf0b25b4ffdeda5ed900a61b50b082c3665837707a576063a14b3e81a1325026f3572fd78e10a84afc193f4a640522944a2c8c061340c218571f648f7f681faf95b989d9a0e4661ef987a11e64aac8a7feb3faf30e8910369143fc550a3141e9e82db87497ba06c746dbd4377bf177b09f2a3cd55ab6b854ec7609144bbf969b8c634ea51083ff3a6f1fc6e7c9179682a3d7ce7515e4613ad6f94810deed624e38bae451d9bf426dc67c3c533669d8104b10cdccea500694874b912dc73db500e25e227f97c31172b0d9e93a1352f6956d9875e498c3aba83befc217c6b9661a52e534af6f97c7d782b230c67bc91184ca1e857f5353a73974beebfa37708ba08355e2fe3d7047bfb12adcd1834985cfcd8f9fd4de7e582236fa93171e2cad4313c76bf7301458f085f75d4ada9a4b680808871c045debc267d4057c07eaffe9f8ca5838faff49b8b0ae51b38b8bca9570d52c6f093e7b0f6df30e5bf704474b0c23679a3d5eec6257303fb21ce01ca39ef2c47099747d2d967b04a16b7165907428b7778d9a308b6ec08f9b2e6993e1164321d43e073a81bb394172d4df4aa40f8363dbd82b74d6a6240f798f3cb57a8f101c34853ed488fcd97b62ade57ec68f3d752238f05e7e7d5c34fdef6116d3095c88f6ec05d29caf464c80bd013da940a08bfe519f0250830ee13673a62c8816160feafe78a7f05f9de6bd0fadcf916201f35b746b77f0ebcc57a5a0b1279b4c46f71e7c8955d6f0be1dd64861b9768916a9b7b5ab9e223485dbf80fa1908c2478f33fe8c0bf2113e1380490d217da96c305892ef11aecfbf71aeaba13c1a1fa3e459fd458162cf2c398be694a2de537ea780898025c762cabc28ab0d18147206b3f72de6b236f2a0ddfdab599be63459620da9acec9f81278721fea757a2a7a4f94ae1cffce97bc29167130275137eb610d63062d8ca5ccdb15fd8d5058dd4ee557f9acdef96ebe58e526c3feb1e7c854db097be0293d9dde4c536af64a7e4d8732f0c84b57b7ea6ef117bc93fdc579978bd8a8cd11e1feecb82918a50fc3a186df8494d9fea17b2430b7a085685f27ecd9f6fc6298b3c6ee33492011bb4b8ab726844c1618bc77e46ffb7dee2d4d0d4247a4fc42464b0b7606f47e201c92e7edc2d75170f2f8acc06a8e401d72810736be90a8b09b968704e4c52115dbe037659b2a272f26abb11c0912266cb97c048f13a37530cb460a4d9cb32edf2855114fa2abf4f20fdf418c236acd936ec7a86767744916640133330fbf20d5bc549d5971892d80e939c018de18540dd3ffc4a318f34c8a946554b7bda6638a113e05c39d132b091c0c47645308264fbad63363e5dc7c2a934c1b213499b00b1d1c4c8685cd53321ed4941fe516c06f0080ed3a3842306f7149d2f7e3aa8e014bca7c783ced3fda118836c74f2b1061cb8128c90ce0da4933a56c87b91c4389a809b24964d0ba031536ec0b856ce0543cb220f2e178e44209a25b4c9bf3a597130f9530f9ab6d54f4aa395c6c3d9f108442d499fe735bd75efc658b45143a23091cd59dc0719dfb22405986bfe4569bab34ceb4542bd9e4b78176e733a1c8a723d52e7bee4a4368a4d89eaa4dd0c9e374d003bda1b4a4bcb6e840abcd92da2d68d69d75ae04feae96e79a4d374b6039cf40c62b3c145294820907c3aff0253240e1ef128021774be104b5d3edb364c31bec08eed034671a59b7ba0711552cc4be895fd1ea0dca114481bca77f7c2c750b0d08c6709a159f69bd8921054f6ec9a0d5370a51c20a58fa25dd887c3c06bcfcdb078bc47dccbf85ec7cafecd2e783d61cfcbb2ec38d16790e8cd5a757223f0aafc3a5c11acf91621a8bd50f34b88d0681dbd982ea9df749ef0e20e1a5a19aa9481da69ef94afa45e583ea97f12dee44a3fccc5c06eba3606df4b87c6a971d38253d201ff8060f6e4213774ea216ecc36c5db86bb7032cef6ea6ff1cc7b896b98b3d20e84df2464cb7102b147db8772d24860919f7f2a6ee95445897acf3db50e9203ce397ef9bd902b9fa7f1b69824f49c899a7b46ab28b134196637e7a031ef4ef2098e70af7f46e60d3387b7694100837c93e4dcaaa451667354410e42de3b990164cae12ae20518309e8b0c793eac85774dbf600899f48922b59f594e25d8f7450830cf5853ad0190ac20b0bd0934c87eeadec26996d5b07d9a6549cf3c9f04fb0603d25fc91c69c7e9efff9ba557af9fbd7475e0d2bbb57542b8bce8088c8a06bce163fcb83f30d1ea859051a62aed2d352a22e9b9dbaead626b364f017e07f647bf1afb93a3be7dbd7fcb3c8c78a37b890dee21447060534985548c4f89da8e0bdd4acfe2d109de4571d134ec8611a2593d062a1e6ae3cd0a488555a59d27a3cec67f3fa6c0d372d40eeb6e0112a3da4f3dce660e456c4bac5627f88b4c09bdfd563738b658b4ecab88d0b66a63108ed08e2fa26787d4269902cc7e4b298788986aada9f39f8c0bb73f22b414fbab265657b7c829d166d55cc9df0b4945a2a2080ab1cdb39ae7994064ad662e6f227d7951517c6e4967282aa91a24c1f02a4f03908d6abfdef056efec133fdca72ac3b2aba8f3c42066ff3c55fa127b2aebd18a504e758d08e75be9054e9a37980ccf7cbb7eb1e31fa7ba3166967fd66b9186221531d4d8274f40c109924a3fa629318ac39415eb30b62d518bf1ef49766e69854d978f2791de71361b4618398cb6ab5580ce31ad2784c216906653815b35718d4aa82e287d495ed1a4c18c3d38c6776b6497285ed6d3984f736ed63699f0d0f22e7577b5059f53476958461b2ca818b06e6326a9a6f29e792abdce93c5ce5b11294b44df541dedfec7a6117c9e123acad81e612fa39575c104619617eda2029d82545b225cc07fe66479e56661e82606a17f0b56208a2f267c63c454ec3c368b126dad2b9db64219000aeb1347a218a404c5f8948d0415f858207b4e07ccc7d6a83fc72c959205c39c79eac58aa5e925d8f57d789ae32447d07be7999e60e58bf68a0274fcb8357296c319b3cd73974bce6b60c7f1d3061d2cbdd5b9f21aa531f3f61c340463c227d8d3c7f0568fd24e1776f4d7f28ec4600690e5b81565a5b2f1eee72f60d6fd1f63f27f44f5c8301e425e130e486ffe5919ea6c43472a9740c31d3472a422128558ee8edd3fff86081648fad5bd772a81c60c84687145e35f4409f1e45899ec36290303f460f7f109dc8bf3f63e1108ce7ff936b9ee8f87015ef2420ecf97811a8b9382f7be9e4700724231e614f33d5f477c2601350ad456d04cddb2873a23ddcf62e5bcc95aa6989e088cb5483faab9899146f83304d7d551b26424f4f877910bc6580afc26d0e497d2df145458267142892e412704fd4b2179528fa05c682a137a9d00a47819b9317325018931728e94b06dcc342a4a9c1d7e7ece3feea23f6a327ee0013407edbe336d1e8cdbbd6d89cada2fcf02689e4d2a7b3eb1ef1471f87f8975e85461feda17f90b5324ab03291659c815dd820392ec85a6fad89b7324d368ea9d1bec8c6543315f14b9e8cf0257f33b15bd849f952cde639e8125cf0a5c899197cc1960be536ff42d5a1061652a2213bef302d0bf3066f2f74313bb8b50b6efcb5f9d7254d4da98feda59959919b0a0609f6751265700ec524a6a13c9ec4344a192f4342062c57e53682647182b5667a83a0eba91ecbadca6c1a38be1adda93315b25140ff4fd700a85405ece06c6ac8f3d3e599313d32f592909535f3097e427358f703632e1a24245064077c5fc460f957e84aabe8d737d6283dd6275f05e9f10fa62fd3fd639d6c23597b12e6cc02846eb160006dc58caabfad0cc5296f6ca9161f04e20434d137bcf553aed565e9c201c1be25b890a7f2a63ab0f9b0b5afc25b2f53f11e36fd61aa0877a5c64f5d921e2ff4774fdf16e69fbaba46a11eca1a15bbbfd135d5166c1d374c588f3f5b4578c5efadf3fe7176c3a54ff7cec3f685d3f375ca72fc6550bfed9d8057afc1174e87c332887c5c9a9eaf7fb55e56b268efc52c0e4f62cc5fc21e662a317c81151725ef4fe25018e9288e3d57347ac9d4b92fba53f2ad234860b24b020d5f8075193e85584d620b873ac15258e66640b72756bc6e2af2d649f08274af6402c3db607dbc2959feab1f546e17d3678855a31e50708df3b997c8c23cdbe4ffa63c7c564fad8439c92a2c7e6f464e5a9d90794c5b9fae96793342a3ad97995c27cddd553317827edee190e7330ba1b687a989dfc1ee2d79be586453030d110d096713a1191cf9a539e0490451cf0ac3f6576324b59d0738717460c021e48d04d95ac4a69d8d37b511814f2bc257bceda5e440409495ad6c87dd4e69afd464b14354870d20723646fb85212025f6840f90c19ca280f028bed4ba520b5f02ebb7299e8dbf12a7eca08747434643f04de51a0e5304bfc6b10c721dc344b0201ea7dfd95a92d991f67b5f7d44b204ee42ea130467149ee763aae713d54175cb1a40cdee5bd7d41cb3dc4bf85c7aca7b130fcc532326c8a24f6cf1fecffa35e335496df3430b4800263bc0b9b448660d80d5a0cd82caf5654461e01d648af1eab17ac2579f018c1a64aa778731dd52925fecad119c8d48f94e123461e0a86c66aeeefdfc21e018848d00ef59f87f7c9ad43881a654a61f502871c62e6ec9a3e67b8d2d2c2eb82a450204908c429b32f405782fb0e9f258feb84900a7c7eb13e6ba8bd05fc7397e9d34838dff1c617cba55e6247d2a77b9ac3f27dcc6c726682c6e9a886d64cd9e6a0a94f7f27015166f4605d5ef74cb6e1a7aa7fcb08468d1f882cdb06608d9aa0b1cbe09ce3b417cee10cb7205c6ff88b0e27ce73110180579a72108591ecce3b0fc6a9a9ec3637cca5755f9559683ea6eb96af2315191924ab71de7e37c8b5bee8af5c5750f2f48b2096e92364e55d88a1540d4d50bbe055a125c44e4508f33cde6f507d4607910c8e0c0425b412d6fd30f77dbf30d4d859a1c30445a107b6efd89f79745e222b34ef1ec424c13a2ca55454c2926dd819b9b1d422fd3a09ef88a3ff7d6c23fccbd0a3f5175861ea0ed3ae7cba79ecccfad1fa0ba04d9f3ab1dc67055bd826d773c3af56aa2816a6f65f2e4393eb1e4f31123d20779057eb839c2504722aaa9ce8cd9c58d6265ddacdf52a573b603e8b1dce10532726e4cc66dc7fef1af96147fef50c38d29077b09b032cacfc5ef636a7b8cb40baf2d3bcb333b5a70ceb3942eb07d4d5078bab1bed2693baeeadd49659d5d00161e27b49c6c116a35db6ee35a6ab451bfe60ccb18f66b2fec05686cfbd65ab4db40ffa3f0aedaca2623853bd54488af8baeaaa71006f66e93980c2bc33927053c92d68dd760d79daa92306dfec16bfe869d8421e2f7c8f0fd141035ed3b7b3da536b8ce1c2d12d1995df49b870b0bb3f9a00fa3ddc6fc67ca179213ae69274e555c4923ea08cc6336478cf8100291fa810b3e5c3d3b98c2c735bb413ed87f48c3080e60b3a108e8f0b03300cc8f41ced67ca48db89254617bfe62c97f3b7e7fa9aa30c95a1bcdea1776723ef1db8511de4599f2c5f13807a4efd473fd8508b0c04e904df790deabb8b2e300d9f6cb4a0ecfaf80d9cdb88e0c76ef80f0fdf59af7086b57e3cb2c054575f7256abde8dd4f1390396533134b9a696dcc2a49c1ffca87fc90a44fcbc6fd2ca2c2211bc1a78a6330f8f241a88744244e03fbcfe424c075f7f57b93568fa57b1bfa78e02615bb57a70ae69fab03baf73a581754419404f70966c789cf37139bd4d9250aa003925251713dd4db70a1a623ce8063af76f54bbb5039cb417e9a3b81572b33f7a89d746e444218c4d98b070369c69ec27d5ec7f9a4724df90c8e1ee55624c157b2dfc9294c488ca280081d42c0a1af6ebd228984c6b07a07f3b719cb63c8043026643a22448acb164c2bb6c43f112eaa2dd5e17bc05b40b30afaaa023959d217084bd56ef27ad39029bcfc7734c47734309e989d1d9127f7733194f4011402f6e9038183650e15408e4c5d93028c5d516edcdf02394faec452843ef7b0a1320a8b6fe9d8ca981f8c82df1bc6fd30cbb42880073cb48f946aa5e5f7c1eeae75314f372eea8248666141f4e815f7e7cb59b23384d47dff9e3f1b5c7711d9a7e38d64614d32d1781c06ff170fcbb","isRememberEnabled":true,"rememberDurationInDays":120,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
