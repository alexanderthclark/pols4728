<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"1290ac42416fa9c51297c21ca6ed996fd0882dc8b1da844db966d45130c6a98d3db3d079888548718f0057b74d659ec28c44abda9746dce8081bd53211d3d872fbeaaa1f13dd6e7e50e8c0ed49aaeac5fd0afbf0e76d937b7ce9be409f085f5641c0fea417f2a99be4e4cda61dd77463a2ab52561efbd943f641a6cbcc64fdfd1d3e5ccb9a68b95877f65ebc37976fb2ed08ef7700fef165e3a25ee51a3bccdb0174ad8ce02786533c1b039f668e062d7dffc073b1be9e28f8ad773baf1be9f685315881fba0d6d26a8af5dfb05aad2deebbe33df87fa8054071d95337e2e14e69b72a0dc21723bcd9354387a5a464631e8e7af438b4bcdbf8eb6526216242a7003022529824ad2c5a5c5f3b0c6ba0633fbb45824edaada0cd7424d29bed1af6450a1a7cb8030f5379765483e89e1e3ec98da93c26b5265186513fe7d7ef162fcb52931883565a8aea153a53b290b52f4e40cc24118c668082cc92cf977b68127fab57472939678da1f29bb921a263e0b731e92a91cddb624ad2c2887411a66cad614f7b7aaae86bf93ab3e37786af28819ebd202ded20a605c8facf2609d88e22b45d70602ba7792b7a23426fe5097eafee1e8662c5798e986f5592efa50a4a36a3c8d82c660f24c3b64ab063361e5227139a5431249c6ca403ec9be06a446569172316980731962358d75a77134996e7d6540d433a8fc3c731529da3de8754f790516287525ce2d4d9bf2c350dd0d1ea72581b99bc836d939729b16d495766cfb83c5b2d864dfe3e2e0da7e7991d45893f22d474a43df5dd4284c75b559c1c6eee0502f7d19e6171abdef27aeb72acf13fa4583c48818eb958f6a84ea4333e4f90a26ffda28222e69bab1b5fbb7986700050d24c13faa563d7088760f4fca21834999602f1348fd737c56d3529bbd2f38a7730db75abaaae55bae9174d4295f871f0aed56e3a676ac18f33d83aa37eabfa8288c7790dbdb9485017bdf9d2598bc9c56cd5b073f5a803935a0fcbc237f42389239a20b46a8c704a862ee3606527ebca47e5dc7f14ef631a6235cb205aadbee658c4500585b57d238d2676f65eb1089324d7d1a2f0ae625ee32dfc227f66a53353bf839059726bab5aa9f9dc75ca1cb2fa069b6c83bdc478d1fd616e40194d54b7d918ba1c04033388378a569c7ff753812592e79ca4b9ef26f859f8de2f35cd44734e379c88ec945b3f373503e43f467b6d5355bcedf5bdcb54a747bb2b4b2ca9953254e025e3d3be2f3002bc043a97ca883c2c0ad7f3472000a5f11e95d012d7e962bbd18682931d2b3d1b16741492c1838fb66a38b96b95b0a00486d77e62f768a3051f98c9ea8d0567addb63345cab79c3c15bb259d5e91a51388b31ed520256b7e969bc16e66c551b8f3eea7aefaf3bad5a782d9054f730502e78dafc32831f2bdd2253eca8493970de27258a127fa731b0104f4566a35ee6a1f522c40f0beb28d3eb5bd4162b6a46c3c91a0fcd0616482cf265b9016ddd33575a73a94249384210e2ee1c4019f19d92aa1a7e1ef2a97e8c13a76129fa3bda1f230a15214ea5942440ea930f871110f2f38bff260d8c1b41cf0eae6237e4520b7198255ea747af281708a059292829c0b245d614711d926ee8ebf260174a8ce675762ec29635c7221e3816a99b4d3adec54f2ede1f0d3e63df00e9ce9e099dabdc30da0dd23fe1ba262b1a4fbed6e8cb7a611d756f521d1c401dd1e73fb3b5ce872e244deac1c0a2dd12bda60cc2a921bdc6ba3d238498a576d76b3476a837105fcbcb587acee5e01b9026f7e51b9bb0d4ca90765f3a68998daaf10a9805345f25073e381272149fb153cb5a4af9a053410569caf9e232cc98d2c531b5c98bdab317588021b1060f44a3a6badae2d0e2ea48d265e392901231ed20d6c01f7f0bfd837446dc8510f9f1d6e0536ab70966567e2f5003306084a7ee9df6040575c7299c951530bd62998a233a850bbe0cdb07527a2f504c96ee4d5d735c0c11107fb560746960d7417519a609c4134e0b3227e0ffbc5e0092c2c976dff577b732c67197214c32f06922e974558569df427cfe8228ad6c691b291b0ce3e3eca53719a3d32c964083cf082178a5ba591b59abae9debba816cb77665cf9644e388aa7c15c01582638cb643746a2b663f1c77a109968d3cd1a871228794d4c509ce35c703c96c69b2389ad8dd393bff55f7792b4abd624c7019555877f56bcf4c14bdfdf8d8defdbf0f18dd42084d626986b16492f6e33014381959c139bf01d19741debba0213052ad431f0081486f20a197c7c4d4514a082c44a35c14c21e78a64f0c98be293b02201153ca402467683f7f7efb590551f47ab7897b8c4814fb3c79cb7f4b610cd306ec6b8dcc31a8b5b4da1fa7f3c0688ef3ebdd0faf1ed872aaa69db26372eb0a3a955695016c649bee85d768c421bf38b79b5eef0e51e56709ed57e109a6dedcd0aa9a29a4c7e64473a0f0953bad2f5a12a0a5a3d279d3e844696ba7d7b37970aebc515fa0201c8fdbc87701c92312c36552d638b0ee46bd7b8317b8f6e320ede785d7d2c3b2decfbe9016a3b314bf3ed59e2c3eca017603f60793ec642bbb0c8df3717494605dd1fa3517531a8b2608b372c8c732063a89f56eb85848a18cd4abf88a825c76424662e9407c3ba7ff8273ffdca90f067dcd018abbfcae9470c76c80b5ecb34bbfa00617049c6178943737608b3f05864c22daf56c700d1c271a2f17b2985b52220b565d38de0fbf19103f358d23af203f37c57074b39b13eddec98a7ebb064f4daa96ecbc655db63307ce84534602254bb6af338a337d253a696fdf230e178d0c433acfff9ade243af4ba3371379e5c50512b0095233db28d5cc092966ba0ae8abe65836819cca51799204fb59432870c871ca37a5d0d4f94cda67b7221030ac3d4f7e190c100c86e8dcfb65ece31d175496de3144219f5c13053e84e13ec4dd1fa9927292e068b893aa1c4201b3bc6517c38a7173f46a2f95bb9f993abb9cea1e074519d196aa4097cef9d3c28100ce820d2dcdde192280263a07b163e500929789254d7f1c802bf558e7de16d4fcb6b891142129fa6edcc6e7ac760245a217371b19d6e26ebfe4d732e40c9858d3210067fe1dc4dcc1bba167e476be1e689eb0d710ff066af02abf1423b9a0ddd9193d243a51509c5a1d542b38b68aed2c4b3631a66abb939c2d1e91d19847557ce4fe8e67a016429f3d745eaa89257199c0e822c7690c922b654f82dab9c35ec8c8b9e17dcc817d13b64a4e45744ff3c2530e72242beda4a1b6665e983926c4af861636c53da980c01d311ad7f74e024f16d578b18114e36a3666f3c79ee417b6b1c20f11ce5192cb2aa36f0a0bce146900a4f43a69e723265387ed544ad122cec1580cac1494399755e67908f49190f4cc5c9ab746a45db00d70487471a29137544c2545918b8446ae1df2d9ceba6a4503447d2e44a62509fb1c284299e9c5005b819bb12df030e7e7048ac4c2a7af8f2f7c9f447e4c4c3b311c9976ebc9d39e317f3c00ac64349205422ea9d2df6e80dc4ac0893000c032f81b15e7813148bd54263bb2a8419d01d54f4f00e9004507534dabc2a52b7be371cf4ce3ea6db0c8bde5f668d4318dd12e53af4a30ea2b98bd1ccd1e5fc13b0d32937bf23c6c5e3d9a586ccbd1f20b9a7802769a054d6665c35d746938f76eda6b085e1b74bb47abcded9f92e46396f69751bff834e9c6c9d604a9b70a08dc5fb5620e8c840cfc26e387038dbd0c6174241ffc8a8bfecf01e034beb59fc06e409109e88900c3ca5166992d7594b85bb50614d88becf57e594c2a9271a8d7c595118120f9a4bd6042b58658ba8fd372dd64429516b0c998911775ca65096c839da4ac2cf15501ddc55e76d069b8b0f6b767e27f7e09f61cb828e9cf9fb641e51c4d512279fa203590c9ced25198a0de4243bedb8b21a2b5fc4397dcdf09779f9f44bd0a0b503bd9fa3d60cc24c9f15826b8afa1f1c129e0606f6d8327431e385ae21d2d241fe90e79cfb3311ef03834d39242f3efe20c18f0f81e354ab87903c9ffa288665db9e67fc3a8a440748a39c3b8772cc797b45e191251d097d6911de0370facf5fb58ce37d2c113c182dafb672575d14387aeeecb98cbd06eca7b0108162fd02d1862ce421b07857a8c59d13c5aa7b33919686e32fc16b185a689f53c33f316f8c984c08795883edcb5c241f2f5aa0cd6ec747efd339c407f162b6075a211f30874d6d17e45efea052cec4a64e00fb7c03df6e22c13495f564a3bee7fc1319386c778b45f9da3b5824193958dd822463538c18fc00c72569ace8ce3eba0886ef1d9a11ba7f6900a20e9b19624cc39af918561efac2336c7f0e8352fa03fb40e6eec28cafc4d69c3d474bef37812b11fe902fe727b0796aa173eb7bb5d6865f1d2f51f6ee10b9ae1323a12f3d3bbfc5ba2505554db4193316425513f2a14a41490eb680e52984fa417eb0649f221e460b20c84da80ed682d377193c854a7171b64592effb9ab46b3ec0a8b6cebedd03827e4ce7a245d0bd41d5dd8073a0dd33ff796938d9c8fc90850da895726d0f433cbdb087b3926017b3a871032a0427362d87bb73887eac7b070e8b68182f1365b3dd903c09e0db6d155a3b78264f5ad5c9b80eddcbfd0bc55a96982e0707865c85f50829d7bd9d3f9aec8359a09482eef00a99214978e287b4e8422a084b69ed47e761e838822b412adf43fc7beea26d540cdf00f7099ce5889e04af8f4e1f9e5b9b88f7fe0e7758af9881edac7e3c44e7ac4229a6dc5a76ca13e020b60b6151e623a37d6b35dc783c66adba1f55b13e15b6d0082c03dcce7c291360302b4d81d772823cb7af80c8e656735fe82f6ae95c119a1e653b3d655c507beb56eb9948cb3b70bf8bee53871a66a89c2c4a1a559edb092c5fb8ca40f959debcaa151f1c97aa425f44799b074d3a88d3466f5d834ced55c708b7e26b6d3f797248c8a0452b10745d8cce98e831de95406176d60dc793a0d4a2bb1d953000eb4831089ef7c9e4f73ae73d188a3c5d137cfd96e5cdacdc1fbc8ba9b79a70ac1c6a3961510719a55cd327aa944b9fdd893e087972073e3c1633af56666ed07a822bbfa0e0bb35dd0339f870b837f1cb4d33d9ea60174143f007624e6ce452a8b92a5e0cfc163401e47d6eba9994a56e34443f29774125baf8ef197ae9e52fee1c877a44e36395a22d731a6b43319cf9b73e3b99cf187cefccf1e0acb0dd9581c4aa29f86a740c32fe86efdd6954b6aa29171f5ddf954f35693db8807194fcd2642fc0ae736dabacc0b974665fd95f55515d7503d4a7fc48f1f20a389cd4819805a0dae718dd53f069dad82d1a7c1566dc5720f5e48fb31773faa3ede91cd4ba187b2a4d35a2801010f27491aa0f068c7b0372673110a0c8668f1d2964805aa4ed34c2f9ad36e4904d80eb89ee37147844412238fb7380eba21288e7f88377f334f8df760a391074076ec8ce755959e755cc01f5ca2128560282c02f4c8f1754fac0449b66a3ab29b8a77649f9c6802e7a6bbd4e77f06747c431d75fe7a48454b5bdec631cb9d36d8ec65e021b3ea415721871417f8ba46c7e9053e29bc5cc894a463d5b673a068d4253b8cb10cfc8cf5ff7596d4c460b0ef1f5598e69081617b702efb96d219d59207800a83e89b77e5d2470b6d011dca8c662f5c4dcd89024d650fd8f5ee45209420cd764eb295d4fee81ef3bf713eb68d311917a43b17d1473e6c5ec3ab6236819827a7639d059ecd1a4187fd0f66ea5014ea89f486f265f7a8eec367e1736304aa2956411b6697438495c34276a9f71d2b0201406f79e4a260de07a36a01d000793278cac8d0b4457d05065ac199b25f20514b0e51f5f6e9ee6cedaa0b910119af239249ba029ee22ae7c9cb5bd73f7ae1b3fdfbb9a7e01a4097c99d2aadb749f165a687adb21c1b52913c3982133b444998a8e02094efe08ec2a56633df232dfae60be8efe128de865dfcb5ba9c890574c7cf771e210e55e85f681432bcae47fcb1ddac6605042d24f54106136d78ccde742dfef4e1b19c8e87cd43c189d9bcb7b644f24e0e768d2f4f6e83d5f9171e02837ff0de6424bc4abf1640f579280e6c4755dafc92bf880923c4363db9dc2922bebb8b8cc2f5ac7b53913c3e402660a345d367a439de71efc30cfbc9b804c3fb740f9b3c039e36dd89a8288c87bddb5fcdef4da9c5a8428394d37b5cbff65db711236134144443587e4bc49d5a6d515ce071fd4d601102b62e689a5144da8943182f5f8654cf912d589ecf6293aa9a8ef373533f6f6f349d5d38a283a302a8ed1562f4c4feb38f132d4acf2462d9c17bff1b9ea062871a8dbfc5ee8907d46c7e5fc09740a13425a1a1462d8ad9be6261bf78fbc84dd8e05edeb89a4434e8ed8d89753dfddda286b7e49374545af57d48a60e145cfe2bd2dc33885f338c3690fbe57fce02cf50694c8654c67013a7c46f317a32a78292bffa88f1f0e4aa9f9a4a3c74a990d36c6b786afccfd4a756866382251646e77e7cecc2efe5b882f19a8f9fbce6193b957d7237bb792df227a0ef581de53e1abcc12bf4da80c8cdb99b9d04e99acbb4d6ef4d38cee84ce277dc982809e036cc0f9a3f2b06ac64c7fa261cc08ae3e224538ad2dc7123e13cc655f20901cb92a5fff705c693126958d004a3438298b4ec82efd639bd62521e61262cf10509bb2b0ca557b3d4cba84a8d18abc39c13c8d4373e76751b048880bd005304480513cb96acf623b00a3487818b4dda8c82b5faf0a8175d965f0814c7d67615bcefce240bfa64e15b3233971d053175fbbc41c8aa5b16d683cd8ca4c36858bda58b28855750d819f7f121d6dfdda09a28b1a3efd348d7b6674604dbe8dd4c5cae272f2e97a1fd594aaa0cda15df8cac16230c185972dbf906df25f3a96571386bcf69a8f37f71a1fbb2511d435daa2f1e6b0dfc93bd30ad9dbb75eac5e88dfc1488f0e5fe14f67b215df0ac476e499c36b27c3f5de9be64e65be6e2c654cebbef9f43b442f1ddaf849b56a3f841bcf14511595fda516bbc20bf61dad02419b8e197e0c9a9ff1df1a33a576c2c396085a129b31a492c9f4884566ba8563993ade1cbca4e5141b11413212ca629680ef9c728da32cbd5c9936e01e99228366ca6a908e8dd77d295c7070eeddfedecd74fff62f2ed02a5d49452c4c7aeb8d035ad03c120fdd17369d34dbfe44cfa10217cd621288b11d1b558a2d81351a36a879093982d19cf9a3cfa136713df2d1ef19fa854079a903fa06af74709974f43273be762780d149cdaca6a9cdc114c01a007fc791ed1d966b9f3cc7f5ec5295430ea56e9cbcb2ca1bb6aa33b3515ed5f9b4cd074a9169871e7037d22a3b77d887299a87eaec3f5bfc360e8d5cd2edf7c91c44b9fe2b972b322afe55ae860e477303bf27f42118104accd86b0d7e8d7d745215c28b9f7bf172247b4bee9564f631d1bb72bbf7125e75b062449ae21aaac996e1632315417229865117d8c77f05ec1f04a9770f0dc552d811452ec6542873b88625e305367cabefad362492c9a8ce63932a3b2d7c1f5d913f80053012b9cb14c21f084869f75f2c087212df1d312d34c6d6674b830da617f3e64e40a5c072e282d4e83c0a25c31d78d9e3234889c34b43a7dbc0c69a71e627983e5db9ff15cbbc4d7c73626dfd065b6ae581f758d57ced9b02fc4b84e3d6a46404d9acfc5274e26eceb753da588590327fc33526fe68a7526d4030ebb9282ff3431cf1271790b3b5f2b6dfc571d90fe0c697d53cc3721fa2b441cf0f88e5636bc7e5a0cd1b26f1381ca2555570a749bf84fb7d2f3c8e3bc8766a6c000ecd74573eaf759506c4e90336b998b312c33a1f9623d8125530197faa535fcaabe63eb94a2f860a74a106008a8124f799759ec9e8924ec29e4b628aeda3b5d1240e5a3f51ee4d164cdf9fc75590ab7b3943255666b6709895d64ded3969393122f59f4445db48ed06b9f3d458a822fe2e023150a5c726651fc2ca7e644b5d960dd375f2de532a628924c52afd82b13a2f54a88be7b41d4c7c83de2b1cd28dcf26ffa154c44e895d422a459f6a91bbfc9f7b901b9a12ae9ec47a80666fe8e3575d7af5ce2d5de46dfb25efe6942eb6e0f7d20fc69fce62e1a6882911ea39a5d5f9c59f54242eba95c0821b4b713403e8deb7977a97a18eb60f3c28f62465ae06642f48bf058b2d0181ea633d67586433fec0ae2bf45fa5469ae79b314cb89cecd34917dd8446573d03ac2d93f1722ad32c757a5e1694138ef55aab4e3af3bc34352b3a2b2043819c5d042abb3e425663dba2e63f5b4470c53029c6c1147a89656ac83069a57ed5e26245d77d2170e4a481b9431bfb8d4c597ca095db0a0d65afab3af0aff1a01c75f734874cde7915fca9867c85406d9885dcc5f764c1630fc00d3c2afc5040643e2c88e6cc8c66ee25a5cd1ca2432afe6ed690618a12ad17528a9a12e43cc1412f060cacc2638e84b2ab31a2a38c2ea35385539728e9d4c2c25a2cf86b12dcd7e97e109216f0c31fda6fd41e71a40ff3319f2791d9f7168eecfa0c176d03b9980a235de079dc5a47c0b033f61901f58ee445756e2823546b05d644d67b7f0a32f07570fe40cfaa2b826e04927300a783a1f1a50c75cea7f5df47bcdd17dd032a7a780b134c5a924b0dc420b7323fec6467b18cd1665bd15d79392d087ecf43cbb2ed8474f289d87ec0bff775a500da3a05fae209a808cf1b036a8a3d3bd419c3b5537c657418c24f791fe3670c8bcc84446fbc293d6bed7a190e66cfaf43e65fde3b1a47d19001fcfad3152cc2e9c29d1142ea26fefc0e6fe3b3364340d431f823a7215eb2f3168b543e63a938a5912270281a09ad3ae750e89f8f577f25704d4930c28f23bae9da616fa91f23a76ce5d014cc8f760bcba3584de3812fc1f561b8f7440d10bdf28811ac1731081bd3f7c884a9234b302f40580e7a67ebb91197cb72c4a88afd3c86c25ddc1ee630ec48f0f06f0122e5f0722545b5aa234bf46603995632c33ceebe154a49f8799ec1cfee558f91e374c3af47f468de0fe564c8f47af8607657acb7c55f944d07f927f8d260f8b04a9b8edeebae8d5bd0c20e30bae1b7e3bf5d5e0f7f1435b7b72c76ecc3af9bfaf6e9efbd036e1a0a88d3dd35dcd77843f97e29a226c8a49561806710f60196b460e9b87c219f822f118e3643d1fb8a99bed256d1dd5e4cdda37b209bbd10e36bc2329c5fa24dae1aff7c9e46909c8ad9a624d2ae090545dc41ac085f57378c481d5090517267c67d8f94d11e533a06cd8c765c9d46860d5503151baec3fe4198664941c324bdea7516039385d7bfbe3f3f55bdbbe42818ee403555d59f2ab6bf1de91a0de95e29ed13abc4cb73d31ca85543e8880a89631eedd70f1167c3f300f7c95de1efc8b064870e1caedc322739152f282a7b2b18ffb80cf5aab951676444674017ed7220cc95f047093d60e32af31f04e475cdd85c1a1453e2b59af1499b3cf3e61b51f8904eaca62e06bfeb757bdf71a4009ed1fd9f40f095f93910a66621a4290dd201424df714e5a617d93b37b33b5631cdb3c0b5df184008c18c8f5f1ed93c08feceb1d3d013a012126eb48fbafb1883ccc306c787e951035ba57a6da45fc3e87e0d545c226cbfd367a4340d7f2d53a95556ca9ce65e6b22e96f823aa8271260e8b71075b4bfcaec09940a0ce947490111dc4a769aefb1207c4628830500415d14449dbd37c98655006abb67fb5f9acf8be1b47b6b4282a4bd3a120637218c8b6d45d60d180fa6674dacf811ccfa7930eccfd75241b326884207ea8cd5a87967ef1c34e908fbb2d994dae4818fc81a1421d9a90ca350e29ef180292a742c9780372fe7409be2a1fb24a199553b9f64497b498b70dda46cbf7c5bb2bf53031557d6e10113299a5b2d61ec4aca6369c43640279da175519ff3ac06ed29b2d0a2773a56609e93309fd179359e3e9f7032324eaa0e81ceed73c854c7c556e6a44bb2c10bd13875dbabb2f5c7736bcdd2eb22bcf60881e0fe1a763566dc5d1b5a76afefda26607c36bd7ec8b1c37f56aefceca11bf92e966c27e0f6148553efefa858e556a13d1bc2cdca2363c6e394cedc14952a3bd605ea0d9fb821d1f9fff10fbd3ad6069c324e8924fc1e7f3f5c5793b2c454e9c69e9ce9aab54c9ded8c99e570af1c1193acf0cfde36be8265470b9d217158cfdd2ef7a1e476828239efbe67d00caeebac914fac038f234a519a84c08d8f3add5d12df5147b4a8e8a4abe1f6d88d8e02e689874bd95ecc90e25a15a22cebdcceeb14ac42bbd2b52290d67fa654222453009d7ec0c13032ae44d96d92dff48c84891f12d16021d1f7d3f5852ef575b8d967b7dc0dd80731ad3f2c832960cc3a1fa6a019ebf623b20d0400aeb112ab8d48076dacce3ea3f0d95ff57801659e495edf47f15a42493da603da7f8f8a9462748904a6ef2752c67f6226b4f04051b943ab3731c3f28753f697b38697c38cc2aeb10ca600f3ca28420b1fa1c05249e8a62554e7d098a06b41422eee7078b2f3c2d93af060b70ea1f249d76b635d26f002850536ce06902c8550d56aa1491efb97a173a86bac17caa7548d20cc7b64f04d3a7f0f250976be5f81e88132418b32e1b108c22d0de3587bc157e9e17a1871b4faa119221115f8b22fdc1f3171071657c1cb02d1ea8081d3a13e9b00eda02a56fe70ef12ad2604b3f71949dbfb8473722b30fa92483761544e1b8b90682313cfe952afbfb1cf13416f243db3643f905ea052010c8720528b07e3880f9a12c3b92c83234c975101cd7824fc49f2957ffbb3cf8747d965c5b89a768d5305e9cc33ac95aed789e4e8b3257e64a3df365a97ca9f912e72a4839d4875ed015cddd22fa5b760a3cb844787f578928bb36391adde8570fe5585e24884de5e741bf5604c0d79415898ec0f1a5484a9942f7c17db43492954f12728630632cb9f3588f12bef935ca518403bb9afcfaebfbd7556ebb60ca770627d55aaecc2f8b97a6fcdfbfb4c50dbe8631ef182204afb576be7bceba75b9bf74f8c374b5499a2eb7b93d2d3d08eaf7d83ebbe1a1d99576f123f5916962a70c76a8f3e9e32aaadbb2706cfa4e33a1135a5760cb3ed2fc698f49341f012452f507a4aebbacdf86ff83c87f79868507e2c0a01bc18fe57f268b5cc9bd98dbfc8a3f244feb517e5e4e529f2a1d2b0db5794b64b11ca4971165298c778b2d987ac281913ece016a70ebe9cab5381084aadbc404f2e18a960ef719e0368dbff135ecb970335644aa2d278f6987377c1eb6b2412d095c4b744e060b662bdeae9bd2d32813526a8557bdadbb9ab234200fcf389c0f343495b313a97af7d572d08b6b401231c2b1cb46c48f86a628871da79d3abc28f5411524cb13ba6aa2a080f276ae95c4a118aed73185471efabc5c8721a9e921e0ea666746da0c81d8071621772827f2a12610a5ff7ce9d7e45af05ce21787687f2db1f95ff24f9bc56e33e48a40b88ba2aab9c6a7f4ae88c5bc9e258a150b3bf55b15221e6eadaeeafeb217660659a59e9ad709f9930d2fcd911dac3e7e7e6859dcabc1d25fa7772bafcebba6bc02328e2e2b6d3b1d4e5c09c352ef0a59fa9639e87ba04c114e2617ad0c9b253d6c797f08f639288d237d932590b7a125405ef9bc181002a11eaa50986aba16142ed502cf0c96e84d290d25598764d86316227a9d29ea7bdfc17e5d84623f4ff5a0d004cd9e5ff92ea15be8fc15cc68551707f2ca9105b86e4ba51af9f7fb1ec2a9b29ac7c83c3ffc05958ae1719a76292ae7e54bcdc452feddc0237d638949a54226c5cb362b716083a0cf5faa83464f4e37ddeb768464f660e814ea0e4913b4f79cb5fde529eda682d0c4fe0b07e85db5669c84778d3adeaf92665e99335314c3604525f8d48825a7dbb4b8221c6f6b6d4f4d819e93489182a1e037919eb47d6c4a384c7857d6f71eb26f7d4eea6c20da0d77886a86f5282d200b406cf1e8d16bae9020ca457a099c5851b381b2538655cd49770ff2067f14c65cd69df915c8ec19304191c0a8a839c1b8565873d617eeeabbe91a806d5dc42e42f30b28af008807dff82c4b68ff476eba4297a700bca3d922d9da6b3def9b3c5218d5eb4e5cf162cfe1061057a3825f146dbfac6c653d2def51d2ff7be083e561601fd14ae8d60db16a40f3c66fb64c5113a3d6e3803cc2bc90c5c87b1cd959ad03921f7ba935c09f539d6f9b53dd7bc004b8060bccad19ede3c3300e88bb0a5308184d57c82348b6721afa5801e0eb1dff1d03c347610c540498147bdc182348d49bd856f8c47b66c2696d4298bf056df4a3ff44cfe11c43e6cac8a6119225aa912e14aca688835b45814997dfa53317605be158f4a5f6fa3e2443dee02e6bafb40e6ab3ccd047d0b21082e3c3fc6f7769718b44ae6b7508686866b149a27b16a0069fe8765aa3a8fbcfc30156406db9b035d67bb51cc55f4ffbbbc72315745ddb6aa75c9d32bfc2516c123a6b84eac983dc6b9cf94e399c14eec9e2320673a34f598152136a2a7055ca6567b3df0de2eb6aa6ff43d865535b4b063487d88434478066f73643a176274b9fac6df8a3c9cb8b44f2dbfa92c13a39afe851e05ce88abcc87dbbed143413e79c71a8edfe1caddfd2c0941cb6ae7692e422cd2af0b6b29851610df350d563dd7694478cda07063b09619e909f2a7dd641eb4eed468b4320513710447b04d1afe4aa78c7aafa98745a2e7770b37d7268637b70d8764d429fadf7b5ef81606148863b0685bebc7a8845a3c2fcd2489a6a2ffa1f9d8da663eca16c6db0993e46910b80ca222edfcb2c967c22bb5d45eb7887ecdcaa7dd3292c99996f7475985bb6f0c87ecbfc382b59bdc5000e8781aed39bcca70d5efffb67419f9d782dde702136309f852e9b7d1c57fe3b8257860599116d9195c7c58532908528228914e8608a21c1c876538b6e07abda5c0ff253d5f4ead8b31b47fedcd86584013b39df994a484114d424e76c713d7350c767957552aaf63ff096b32f43e968428b631f7574be5a8811d15ac05bce69c17e77c0d71aae73259cfd1aefab626c30fb33fd3542ca56453ec1eea67757532374824c7fa0ba645969e4c87fc4174b25f8bee0ff341f26f08922015ff41659e9c25973401f6fff86d2c4c91fdddbc93fb5cace55445f643b8be0533e509d8c53ee10c067ce765ca03796e64938e2e6083527fd313033f99803e610887bed4e4fe7713b73bebe4e5281ce3ddc036fa1759f3281fd3b4403bc096b08f3d2a0022fa791165634cc22d51a420bb781e52cddc829efdd0cc2cb884840d71395faf280292d446c69e46668f072b7142b8e82a7b04d23599dc159b29d4491ea65ce8ba5f5a78ba72b5250bf5bce49fe78935a9dd3c3fa5e34045d365e0e049a613853be79e4df4bd39ce5d1852df17f10f5284e19155208c1f2e21f20164b17b3d6e6825d02e48cd1e6703817e41a5502764553e8a9a5fcd3086489225335bbd072e79dbd29a948d5c01690b9468068fc2d473f23459024ef6326709fcb4880e71c1c2c07b4eff2632a3ff13412d677fc1510d1bc0162cb866116dff5e120ad3b15e02b624eb420699a2c45b80036e2f25fbd4921f2d2870d2db9d40dbd91ab4aab0be5684cb2f6b1f73287b7b8adac62e28e51d3a13d0145f348ed59da9f0903c6c2cfb3dc7c4932f7e314098f668b8f80fa19f23c44eb8b1fca565cd49211e3085b3264fdbb75fbbe93bc42955655466257dd46edd38cb42bdb1276928ad523cdc75867eafd63356727efd32693e64dbe0b35b7e6498542266c64fdf4f19520ecef53c9eb3a800353594207a5367e9be655dce0ced1051533c6ff3fb2b3e08003d29adbb0dbf574e55d2172a8e08b31f50af647a092d677b757811df00f446dfdf9e3d0239d8cefeaf196097d5212b820331726aafb582d1379a8b32a30f16e96b4aec25a75c65bfa951a8b8ecc6441eb8bfed4704173fb3889d3d02bbbbd77c89855e509dea0abf5d4569e677f37e4cb055bf87bf5cef463fa64739b2aeef4a59c1063d964d1c747a1d9c1006a7c6eb983760a352f2230ef59bb2622dd519bb7e932a864482a1baa376a55d9b06df90f366e5985778f352de25e9de827ff95592aa6c9e31ea127fa8dd1ec75f1341ab9ba1f9c77e71b08f7f51b47002bb67b4e4b0ec7724d11fe6c8a62bacf9c2ab3c24965abf39e440c40562865dde937d7e4cfe50858438cb4c99cfdae6bff7b18da030191a8f5ecd6dcabfd6dd09303e19bb09d6475aa723cb7824696ec8020aea3f248f9657b750d77a7f4492a3b536421b181864c37e63cbda1edc05eb129f284734221357a87c38858cbd63487d04092bdb80f5b8203c0a3d3b02dad960674350503b1c121d95eb8149b063247def73990c9e640ea3e34c2eba77e4a1d8d9bd001e29fd9f307530764602c3e88c4534f854d386858c1b664282e93c9aab53a9b7793acafcf7870df1d943e2eedc74dd6515e32c714f1ce3474fc123cb5612880cbb8066c6f08316e0a978ca433d902bb4a9faf659933eedfa2e6b628b3f4e87ad11e2214a8a0e2b4aa4d14a54a324016e0b397c70ac0a439db5dd3f1ff59077513ad9af57f1da9ab3ae5023de9e66038bda464744cd7dd3148e29145dd45bf0b4c092f6a221f2cbb58e5a929fd971b242ed16845f3d3241d4a14a5cf96f6e460db037ebb6571f2ef332f44db76392f7334da194d189126b7bad1da37ea075220aac1dd2b22ed30c5c177060e4b2d2e6064832724796dd661b557cc3e1728c30e92a7349cbc3599d6c8a94769f74b3ee4c5d4445b5506807545cc3bffdfac2678392413aac69b1af02b5571bdb467bff6bd4f8e130bdff97d7eb75f0dbed0d99c1f059f4ea6d9de15437325c8a94d19b59b982e4e600b7da30fa4ca05403c659831ef3d10fe6fe67c81930a1c8d19f7ab2d423a0aa0276b7633bb20a1c189474b0655ce4e20f4f321f0cbc97697cbaa4326f8a199a315f8426070cea1e02d05546a1bef6896012947167bf86b1e54d500d13a3ae041bc62e3a4d48160917e3a7f59ac2962958616ad858c4b2de5437785f823faa24bafef3bdc5bc89c9c399735492ad3c81f664176bc58ed8e96a13638ea4da0d51869dd59bfd52ea62599df316d8cae7a1cdcd24b2f3b694b461ca41e77867a54dd2316624e1ac7aa5daf1cfd88908a68bd3d4d6c56b55474c39ac7767c97d5bddfa2ec2e3b99cb6fbf5cf9cd3a0ccf80ca394c5af0fd5c95d9bf2d55547c3cd9a7c88b06a6add3c7de8210683e5df4343b7c8ecd397837d4c3b204b64a6de9550080faa49766d146c18b7a3a639083a3f866bea3887a68be190454386a6fb79c90f3b626f2347e95f680ba9923fba79a642cad01793f115d82edb6161cd74900c4c3428744137c5ab1ade63b0fe759b15f0922af92664492a8dfa9da6f7a30bb6544a3a826761d418512b798886c4d2d438518dbde03ba6f0a12a1674a984eb893340921ac649850c954b558e70337f34bc80f5b2e5104320e3d187c3e360bd66c8cc793153f30cb2b0d01e2be9bebcb8d3ab50310a48d79608c126649a4a0847fa4039364f20e1d1584d09678272ef295b1ab7e1c3e010ad8e5409a65199d5d18b8bcab040e143357071178bfed0098fe0ce3c866d6f9a2cc2113616e729478a3e030f14a957e5dcc05a928b8dc700a7ff2789325824c9c34eea898543c75022dcc53b1cab539be2a9a0ad4b2580f8e19e51d40ca2c291c96283f14693797f45f8a1ef43b58373979a7db5c0b52d9b6e62ac063aac4a0b54ab173c43941e2c2ee78214ffacbe5d81de968de547044a1cbb9e6857dbc941e94643ea3923ce2c8221fa438de2cd7ea536d41dc2adf4b0566562d94eff1476835641f47da21b990298e2203fa4c696d4c5f2fdd39867b51c34c2e4852806185832b46e5eac00c155055c1c9198a7b165e9ef337ce31d13e14b716d8575cba95e6f4df94cb0450de41b28f79e71ca534a72c285225e6fd70d784f5df93c4aa62bad8f3edd239b0070ed1e36445108786f0733189484536a6300a82ed4cc7d987264e54f8727638a0c78df28303998306eebdc0f29fde50afe6747ca10433b89d963b2d3af4f18dd189ed8d00b7f3019b302290c9a58679fe771316e22a88c44f87648033756a0943ec06110325bfaac015e35a17ba88e436a4cd8d6cb2cf15c4f2f0ba9f38ec0b91ab541613e74a1136ccf72f40cc7f1d367c0b33d00aa451e05a71437265ed7d660609b1d6f1621a3e9ab6be3fdbd39ad5c0b7d397157e62e11c195c551cf03209af3230256e9d50a8b468aff48a1798a08c2d2225063751c0acf2e443811286b6f28ef0dbc3746dec2825dca1d06352dd1df5f748b5cb8f02f0522e34b928595f3b9943518a72ce2347580f6a8870dfce3480711ffe39ec26594a598324081db4d22db2359dc846ac4fe9b1a8f3c97bd527e141d3a4b911874f52ce713fd488f422a456942d09102d3b177526aa1d343756e53930187c7a60901c07d580790de8213f977c4fd5ccb2d02df86db2441e908917cd666dd2f3b2f41e9abde7bd6922dac27b630bb81642d8fd27414bb2c65e76ec593c28fb1a57958f66e67c0340c14b5a171f5f38bcf85686ef302aaaf7bcb8bb39622cd0b6f82b44bb6a87ffe113b78bee99ad7d2da71bcae7627cde736db191e7b1a5331e26aa83c2be73e70a937b9d32fcb1233317e48ee414693c547933a78e6833d3095bd3fc1ad09a38451b9ebf6b1721c6d5c4cc86d2fca320f1116a6a1441860fac3e09b12eb69f7b49a0370884573a5133c03fdec607b2fbc37c270a06fbc85050dd2f8e52b655caf3f1ed80161362a30f828f244c078aa1b5ad4a8c5db4cc31c14ce31ac15f6e1ffc2cf67fdbd5c6534a1c449c784eb1ffc9e9ff3e9a54dca049dc055939e745e4c90fc33f3154ab2a3914e0a60998fae9dfabab483fae5ea2820ec3559352564ae4eb4a7b51fc88700652ff95930bff64b58dab9d96356f38236d0724f8eeba371a4d9fb2028b73d88f21f535c94f2bd62eb7e0bd14a94b3e7a1efaed6bb74d66dd42d77a2d77348b9012f813d97caacc5e5ca7118199aa5d5fdcc00e5c4c6386d2a00e88638a87b6d035290572850fcee52aad4df18ae5458f8ad2498fc0a597f6ff06a10dd4f256c77d5cc701505a9a431734e06377354c158647e95e6c79d73d65201344e9db7a7a4b775a4d127a9acc432d47cebd45980ef055af62be258a8c3b779e79dc374e4ba5b18c8e50c3118a1143207a245f50b189fe21dfa9bade5b81736b5be9216fe7b3b7ef8c701307b54b7d7823114bae6900459269ebfe72aabc85b601250679eae4953ea4260d8c056741bc5099a336cbb666aec049f63e24c45612bf4b3d200123e7f8a91c0f9f01decd2045ba5239a5b2eff6ca7da6fc0e328017ef99d0a626a1e08720eeaacbbbd8e33d77c054ef508dc660389b2138e459bc67842445629d9b4a293b1a266df01d12654351e4655e3ad62dbf0d9ae6cc7b1aadf83daba8c343616749243d50f6a43da010d371a976019278c108525d27ceb5f012e0ac5c7fd16dd370fd4cd53b528c09a63218d9921908121266017b22e64ed18217e52363d7067e3a179b85f44f7183c21d1ddbfd8e0e984bef4f2ebb7ac7e950a31e56b30eb537d05494f305673c699011513a873a05f0fda4189ddb46bf83b9bbeda769feaac8c786163304d7914bad4b0b6d5d0bb85e183242c947b55ca73e1843073d477ac1828d5ff8463dd9c58d59be15c97b074d3ebfdc60c1fcd61869e7201365d6dcf436276bfde212c1b4f15382a09bf5652ebc138022d3e74ffee2a7052ed13d7956cb24d167c080dcd293eefaf3ee5bd430e6546c4f4b918224b946300f3f0cdfce40afc1821e37245814f056bc28b1a13ce968640d2df8529c46c9c57b9e29f3d47210b9fb1d5c75e40b6c4a09692a327b7bf549aea2b86da9f5543d9511416906e596b3bfb9d63ee146af295d6cd4ec1926457f93c2333ff8b461924e93550424be7c81baf3d7d77ef16bcee17966105b4543797445abeba782330a4ea02fc18c42be91f8a443ca78a32682cdfe8ab21a0d8cfaae3fc8a69a6737c4b1d9784d46102b5a4211c9611b8e1bf40a0d7fdb75216ac2bf6275d337da598308abf5cb12de0e6b52ea16558985dd70bd9d7c91b15f7f0be532aa27d55b36629a08230c5ae131bcc8c64044bd5a97658b512a77d3afeb390b36a2d49a57ecaa985187ca28c1b7bc5298b5c9d699387eca624eb2a04a1e57204495d7d405ebd07c61fb35e9963d6e8e1c7fce2b209d7f36c0a757ac8ed12ffab4727233e7dbe297037ca634bd84c2838d02d3266eb4dfe24fb9ba3ca9bda42c3d59268a6c7b6231644cf752858406bc6bd135df31b13db56c9bc401917eff473fcf7ec660b0963600410bfec31d9649d1b2a9685e70e3342f71af56242887f7acdb1c331e1a2cf2edae104326eaca8b9904196eaf2164724e426a7f7245ec58b8b5729bfc7e4048e0c9285a653ad8c50646fa82d731d980789fb31f67db099134f4f5f583473e9b007be6a7dee9888afd8761c0a68a2821d314ea747177137b4a706b3be9c64002183f248f9cfa1df0c3dd472afc87143a17533751aa1e808d5920d75db6087572b4ec04b9613102f3b99552b1fd5336990bac781ec588f46b8605543b179501033c14e4d621b221653c89d0067ff530260221c000b2d35a9d2129a8721e36104131a307d06beb11f31e95c201451ed1200481a13602371c5c71adb30e28f5ea83d6bd8a7c24a1d235b6151b12ddf223b1f61e2fc6124ce98a7c65452729b0d413911778b1e93ca13dd10dd98578b64a06e26b54ab906ba64f5645a38ad98a7dcf14cd376464d0ddf8d0d51b2ed3e08c49feead85fd3a95672fd426de74aa6fe5bff4da1baa7d1bdc866224868d0319a92b354976940335279fa8fd65ca6f9fa0fc4051a8c08c671917d0d12bca5bc6fb99620af5edecf7b8313f55ce1cfe78be23d3cd8ef0cf393f9fe55510c1e4c60f1f2a7ad638b9e3a95ebedb441187ece30ffc787aeeb0d76a18441f2f2810c82b7650fdca89c205f3ce9f0c7456d80c7fc623c7843f8ae4074cd7c5df5d3024beaba60aa4e99b02b3a4389becb5f2c9e240f4f91e4bc4f1227f461aef8535a3f949cd0c51d5ff46a05cd0e17d6c5a96854e7bfae6b4b4e6e1f8f647889ddb024cdfda2f184489bc60b1f4cb491f51cde77dacf913c0748748d932fd44583b80aff1a7e11ea64005ba8df1445b6372d7c3bd7387b5511ec31a56a1e9c44c819e8900ca99a3e838e057a8e363f0b5fc7ff6c38a21a6544e3b33bf985af504fae1f042d4ceb8440dc048dae2a314c7a792bbc7a98aed06a231934a6187521fab0f43b6fcde7cc78daaf494b52db885925415c7ca6ab5cf31f0b25e283a9f1aca0449e9aafd4cc148c348c354ac2e3074f866874d1b63000357a8b5153c744b8142e83fe5dff1293591684a51315dab3951b14c72a2b270473cf009c2b9efd0dc3f822920215ec56bfbfa295f04d23a7d50233df4d7cec982d84f4ad0c92b0d1af4f4a7224c0d3017b541b26e46280a5b97ab70ee761115e3e4ffbf662b5c501b406ef204","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
