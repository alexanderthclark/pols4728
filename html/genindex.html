<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"f35e5342a7c31a54150bb43647f930f2a550f23e6ccdfdebd35e597c819d7ff4860f1c399d81ae7945cb7ecce4e105ec52af899fbf7b783393bfcaf6bd4f1029151b630a47be5f87e36f9dd38671015401d297db7b5bc0df2246a94284b7ec60da5b6b54d76df23d61077ddda9b2d9218f4b1d958ade3f12967f8b330c578382f851d6aa786eff7ca3a99d360b6ddd168d3e97423bfcf670b2a395cc9a526e072ff44c935ba1937244295dca6d37a752ad62dfafd0b5a93f8856f65fa8b9b9b0f0387cddc1c87f1d14342168c6f26e2706847ca6b2444523e1599fe2d6255162accb0451899f7b04968a8b588034a0fcf9e32b7887292d5f2924469fe61abf220efda02b7bf881b53c94337ca6845c921bacb14d986a5cae516837ee1ac3d5fb0c4ba479c2e1c0b8d07d83a74ba2d9595aa1519781ea74176c0d8cfcb7de6f766fa189e90e4234989aa5b90d771f3fa43270c1ffff0de7e8bca50b52880adf547097a5e1c9107c12d88e4a223190baf7f54d4b041b3802e6317bd06818a8ea3c07e9e29cf9a9ae3a193495369826f99e87a78c71978562a8f19b574ba27899394392d45c36a38b95e016895d967893b6edb656f6a5ebfbf30e26c1dc34cafeacdf94e21fc8cde8592fe9aaec6a3580be126b5b72ec38a4a31a6490719d861806bdf87fbaceb7e0b620d0f18fd2bd36a03fc695c9e3fa8a5b3b43e665342d87ab0bb8b9a169f999b4bcd1eccca64ceff15007cc08d1487791f16275f913a7e3640f51527667005ffb53c257b363ac7258cc52ddff710613c37c40ec99fe99a232c16c6ec5a43a6e277fa7324bbf2673ea130eca4fa7e17e6c4c56b07cc1c4a742343884a5a18b5185d7bb088a74b18122f1bd87982f0b3c2beb503185047cb5bd5b27bae57ddd2a4c6e18419b2560569b40cdbf17b5c4b898f684ec2666a299727b192453630c9b79586738073e8223cb4f569c3e4e8b9cb3e8af83c497c1bdc6dd9e06239a11ed690ff7cabb7d5366f273fcc0dd58d8cefe0c3ab6f5f7dbf328e47140a4ea8a09a77f151254c5ee13f726093cbe2e3817482c732b5978ccb4c196f7363c73c41d0c13ec6221c36671cd4ffe8659031d1068276eeb8955efa0c1ec7474f978083e82bebf69eb87eaf1a574f48d1d7ff64cbf7fddece64d969a0120bd5c7c4f7b3e050f48aba8cbf5ae91b5ccc339d27c8baeefaf019a5c2bfd53b52dd9ade0621dbb44b0ffa138092f3d688bff82fa95911af5c10c152ff2292bf958b9a1c67b23bb709155bc4c62287b8c0f5d809076dfddbc08f57d250e32f26e14e2969aa0c34e431bbb4b5f7a2ea52df6a33d0982f76edd84bd50a811793cdddcf7b9100a37582e9317967d815f49e3b7ba6dd9649f58de52260391407a94ea0c2c741994ef591a0d487e83e5d0c10ee9f05107c2290c4f6caf18ee6a7abdb607e391e945ca06f79be93d71738d0a5c556cee90821799900268be5f566ad5b9957841615753fcf779c2a8f3c0d4d5aff2228286e966a6613ee348868271f509d20b515e571b0490b114c2cab6aeac6cba40eb40f262d318ad94c5e40209bf6baf94abd8e691f6ba0f2946d4323c0124d5c7b3ef5d95ff6a5332f3539ed603514d4c7ce4cd17f9c8146d81653aaffdccbbeb743a0aeb65ff7a4935af72c1f9e11795fd0f7704f8e3cf3dbd59c5f9e662fe68aad2b8b14dd408eec16d5c2282c739cafca1ca749e36c6dd0f03dc9784962932864e7ccf4fbe6bdb0f98c9824be249f90cbbfbc5697bed713d98204cdef2a52dc0b74a69d2debd8493ccfe682e2e17a5a5844d3833b0ca50d087a153036d9f437ac142ebc8dafae1769ac06efadb59861ce807e6446fc0355f128e70c161172b0b5791ca3fe710202520662341caa032fba068827b9ad4aa2e3b6451fd324e03c06a72ddd19b6891d902027ff3ac018b0c0ccac8c6cb00cb3ff280d41b25f68c18037b0e6ca7ad9767e4271e56a569587b6450cad5470cbe61303425d0358598d67c3f41f5b2b1c7ae62db9ad2c343abcf07c7aeabc50746bcb9bec68a50decfe4a713a9d04e18858333335ab3f3fc7b64c2787d883fa956a9b82d69d9775c89d85133b6da09c07f8986209fefbb98abad8bdb2219551e5e2b30191f9ffb34c622d163e156b6298d61cf37247910793d3b93582253d1ccba8d05709f4da378d004023d773a63759e79dee14a49c8cc8a6a1237340f25a737aa79477f4bc42960af5b828b8662f8b75bde95598a25c4c756297d33a28b605b8ba28e8266867d86824bc493b8c38c996a69b1f5dc6c19f82b3ff0510d46223f4c2a06da064cc0b73520dece1613d7fdaf619c3d1a66f0b7a70903efd6f408351b43448ae70932c7f95bbc72b22430dae4df066994aa833545926f173b2b7a3dad8a745ad19c18495cd8dcffc4e6918891f614160bfb483dd0d7449deca9c8542de3aec78999803cef9b8e1ae56db6a96fc417703a356c961e91d0853d48f0b967681f9167924265333fc51a41a67661334d30b6ff604101fdd09fc49e2cd4b8fcdd59267210c82efb9a1aed67317e784a3f3d58a301d3315b36fc746da56cd75396727ce377dbae35ada6dc8066a93d49c5c24c976afc8c3b71587506ada9b5bf00ba696486354650004dd1d34be9eb5e40398bdc26fe233078c93b82f1ec198aedd2e2cc60c74d67ee225b1e65296ec1ca3fb73a1c11bf854b9dc98f910a4373f501fb4dde947092c697fbb69658d931c9a1d194196dd591966534824d5b40b470ad01fd82ec88e0efd65ebbffe488e3aac6e6eb207ac1f7f5ef99cc21657f0faad44d637955bc8eb236b78d4c2e8456332ed93e31a9952cb26d76d766ba1af330ee97f950265438099e60abd4b1bc8734ab92009075a7f3d6a3a69edbedbede9eaf5d4bc60cf3a4b5b545ffea14e9a9ce851b2a6633cd9a0db7987b813dae96168086ea799614ec7eefd9f1ce57b08bd0f3f70dce494f269afdd8d70ad5b3e4217ef7e900c580f871621639e6b7058849f5bdd5aa5d3252382c58e50f44e71af698375b17840e0ffbc02e820bb2024b11f47be0c5137afc2c5f9b812c4013f4e33c68d889cbe86a08ea649d14fa86fb08de7e56eba644f3160cd2246269f6c59d7fd48720006aea6fbd954937371a9eecfd788bb432612765eeaf51fb146a270e037a2c0571a677dc9acec7d75f47c25710f021e2e38cdad4e0a337bf4ca1a16e2291f214698d9e66f14b0cc3b7a2a800581ceccbc83813519c7cbc0c15b9256deee7b5079cc979dd821e4fa8286d06ec7699f318af189b221162f1277eeded06852e9a3613893d5a634c953160586c5a6abe2af1d2678dcce113f4f6a31fa7cdaaefa5bb1ed8855da31657238a2367235e31d189b8931e0a428ce2acbd2cd23622ae8d6e1de268e93b390327958cc048987cee4f6cd9ac270ffd3a6ee7763897ebeeb67df3662f2f6b05746c001e09c6c09f55279e014604040ebc7ae39ddbb268ad95b0eae090a2d963d8c2a4f252b7a39300b990035ba21836f5d4d428afbac5593fa324c5d00a6760d5fd4871cad5e399e6549a436b31dbfbe51c5270f711e5ebb2b16d4e8e5ce16bb712004efb3e452f3e6003067ebf9559a923dd1f1390f545fd88a18f281d382b680f98527954ea346671f255b137b2b787fe972d2594fd2a6b6f9f3a72d2a9ae995915bd1cc05c7b729766ec1620358920aedad23c7ab6e21231e7297f9461cc73ec2b73850c74f73e8fbe7dbc97dd7fe9f12651c5b11ae496556382ffce7319dfce89af9abf20f8abc54af203b7f79717cedbdbfdbeb131aafbb10e1dad50437811bf5012704beb7581d44782eef902929549535f0f2e3e904b7ab5df0fa4c3e970df7b3d6c5cd2b54140fcc03dea79e8bf88ba4a6a9a5c6d9c1f08082bed5c351e4a04016bfb440b2be4b300bbde5ea89b350ff1037ae7c68fac56782dd8757b3bcd8ccae6eaa2b63421b2f81e030c3a87a160dc8e87d33fedb1fdf01e97bca01ea2bc5b98e9d017148ca069c59849fc0df33da144348ab564c4cb21db2b281f6c3b7abfdc0af91581ab9bb1b32067921c83c4f34e807af5dfdd0c3687c724f3a541b1c80a94dcf3f3f87e3e1b36821899087f80c78093b8bd07000b9610fe23d89260c7203d7440000f437ddc5cfe35452bf613e129c37a50f1022df4c95cc99806de1736c426815f3b8176883dbce8400b57160a737676b5cf0bd327551290df4c44a39d411d204e3c8dad2e9e87ee348e9aba726981f7438cdcccfb8490f5d56d71d2a903813e9e884441870939fb6ef0bdada25685dcf073c5fc1157df45a6b6f5787949a81a9aa6f01bf0abb3cc3f0f75c2375c1af586b462a1b21104052984fe054610dce40fe53c11843c90648255ddaed1dd2fb78e44919af078c682f634ead96758ae35260c8594938875361febb7fcaa72729193481499ac2aed1ee59476035b369f9de267af3e4ea819f0ef01918cdeef68f7eae125025f1270cc2ece57ab8674a08e5d357685d8393ff64c5bd79a1edd895e2ffdc29ad0a730c2d19dfab43531395ec889b4561c7fed745cb2970558070bdc41f531afcef7b00dd0c320b12be7dfa152d6e0f27caf8628f7cf7ffd6e1a4f5aaba63818dbcb62babfe1977ecb0f3a161efbc226cd93bf8fca80a05ef7017c6a23bda61cc5606d147c66345022b543ce902eaebd341fe29e6ac5930cecc358ccd64ba6d4c023be19c71409274d6e244f968c2985b474f0151ba80cd6bee2ecefb28ace004444306fdfe9bced8374467d852d5b30647517e54fa32e222211e1b7d0932b8c30772bfd4310be4392f5db80679d509d473d1144cb3d66c23773d8bdd9c60c386bd735dd28bb7ac9e40e6620dfe87a333ae3877a36e65fa6005422ad6c88ecb2180efdddd6f0ad1a6ee39f4b384790a1c7fcb0734dd291feec7258dde1f42409ad4ebff57a90e380fa2fab0a7f5fcb662382d4286afb96f43ae3bb76ac0218ec664eba19556e3b1d68b6394fabc40988ab3935f063c1f464f974c26512696db7c751ddd497f0f73708a3643a358956b4fde2f919e92a8bb1c68a7f091cdb51075ab16ac3ca0c8004f3f25f6512dfa353f471871f88615c525eefe54179a3d7a5a2cafbb7e6890eb9e96cf497aae317ac23e55a676dadbcb358b34fc48fa34bad4edc25f95a51abb1d432c2eeae9c1a28d2a2760961eec00137ab18345a7eb3dcdaafb0f0cedfaa3cd9a561233a821d92eb8444ede9f5299578bd70c6c3e6af7c46baf8d06de2ac68b9ddc3564c409484be61a6d0c9f78a5e367fcae1d6b7f4033a8dced3e8236131171934149bb5fc07ebf3c31103a4548cedb6fdb15b2202e5092941f33944a3bd1c70022b186023d4b94e8fc94ece368352f408cae98246352e8f0ae1b854799ab6774c3c3843440c4a34ed9ff53c0b69d50335e0482d605e044578132e4526fd2bbc6d8ecb76c3c45f910520a88e20396cbdd4f5ecc9179dbf550cd753710e4ed476f3247b55e50426f785260dc2cebaef83be9f8463cefa6e546e8d83f9f3b7ed8ebd9562ffd275069d74f6ce4d42257b203b37307f1c78a03395eb08c73b5cdb71ce595509283464125bc4d7879c5e8b89cefdc34e205c2252a9b8bc27099748641e9e00a4c77ec5f7fd4c52eede999011f7cdadf665c14b83242b6ffb12bceb3d4a0fcc3225bb68743c1591642de971af544cb71011ac5a5562837f336216b7eab22c47f52c6798800b08cba03a2fd3a2f6f399dd505224ab54fbe121703dd523431fcc8e671eb245400d095aad5ad0e071caca4b0b573c1565000c6e6a09119eb5e42a01c76abb59b5d0f1369eec26149978c13ca350cfcf9148376eec7ca8317884726da3cad607190284c0c6df98157740a0e0a45dbaea579ea63b39e3a2632c938bb1d296ab381f17040a7723bcd7763f625a012d73c0eaf707e34a47fc32ccf820088212ac7d5effbc31b64b001f034f7f27d4f3fc8fb2be44c09a2cebe35b701ef6959b4f797a9dcaf72d3955453649736b6aa45f6579c5fabc118644a4f5c4a4266691f4a773c9066c8dee5a0a40dbfa8492592a76933ebe257ada5cd3d5a577968dfcbeb64d05d8d5f1f81ebbc52706ac182413bec2ea581eab25466530dc8bc0586e12b118aab13589ed6408fd96463dceb9e70b11accd3284d02b557b4371b6d707df995f82cd86bf680501cfac76b036a30c0f5843fe3b215cce8e1869d27fe78eea9b5c1c21b9038acabb5ec4084ab643ed0cfae915f3a081595b070929e21ec4b32f4ed0eb840ea1de0a541d2b6eff1db9ab3b60d857f4968a5c4ff9b909241bbfab7d09430f3bebf56c786aab26557d1622e4f8cc6cad4df9019a3febd560c933e55984d6eef728a6469222e6e4552dd167b72f22e82d10ac3a5fd577e1c1d58b6506237d2e7747d19855e7e708925bcdd8e84746c3c091a60f82546aa7384f16f420b64b855335abe501ee0ac7c95ebe20fcc6a21d5cccbc2d14057ede90d094944a557ca960d14252343e5fdf408b83bb5a7c3230cbc75b8dc4f030fad071b026b4b6d8a13b74d8191b6908df6a3c9061271f7e82f516eb17471cac6166bb5ec033ef05b074ee71fb5c05240e1e5e374a840a7c07c406abb5ea9ed42b1b9c17ade651f846e552f223b7e78026218dbf7026fc14f400b7dddb9ce394a9b1876aad9ae8aa14799bd5c3876d913cc6022768d529161fc01be02e008ae8bbade4b59080c46f06ee834a595a1bc5651ce119f1c3fae528861fb463ee5d711963bb572ca19b0694181a7ebcc5952cc64e9d8948596998518a5bfcc961b32062c616937291a8ef1622939b53318d1fe526d0d960eb8517972b1a30fd11902b71cc163305088cb6695ca49ce399a83df8db17d2d581b1036fb7c4b1ef0f53b30a283b0caedb94e9ee144e768931790f1750bba1887a80825ea3e403afa423a42f52f7b87f20b65e1243dd0a5fce075ec2ccd3a4c2dbc263fb488a4cc336fb0f833c0dae666bb681abe5f587b90c523094cc5b764256179eb25c741802fbdcc9a687150d3ef85e0f888df1f4c076e4e2f73edf06aab6de6540645a356b54ab337114954db7fe2eb6202a0dba1ce0f4f7f7a5b8ec13b97d5d766203645b7daaf67391f3445e2c889c88744e3f355ff6fe5bdf1e9411434f4b7125ea5c6440bd2745298119529bb4e3b4f68e5b29c6db6dc3a0cf8dd163717c53b2244215d9be6ad24234835060c6fddfcbdaf28d36dbf36a5a33542990d13c4f8034e5a92f477b23477180c7700233e3aa260411dea82f37d48b31a77fc45c3423b4aee1768efe679846ad227d64ee3bdff3a09af0395015dd90dc8ecd0e68cc06bf078868108bb18eb556d464dbbf56975238baddf2087816e47fc8ba0cbd756e4d217fcc2326970457aa270b9877f637a471447e11d2844ae113feea18f13ea55f9dad18bf2e98758a4d7a4866f330fb545595c475e6debd4a970a0a551db2abe8a8dd008c0a2dd634e519f3694ab217cc2d1a0780c605ff8457558eac611d5fa5948bf2e835495fa355c4447359a6f7e4008488b7c57f723399c35a9192e3165a1f02adb732d7e1f4dde61e6622951db418775fa6e50b27b4ff2156cfd51065842d6e2a7457d410dc52116f44639344bed675a2a0691f7bd3979af326ea0da584778fe29dd4e01263856e280cb208f4f859fd90046f730d60e57ff30ecf05d45363fbdb2ffb66e68bf95b193475597cad22dea672ab9b7d61707865142676472d658d819d37511c80e52fa255c4d529471e0dee3159cd6855ec5926074dbfe072e9315849e9d1212a19cc661596a6789a14331bc27f1a98f3ab7f62ebc75b5edc917f223dd9915a2be4908de7506a88439203a24df75f4998743d2a3102b90f01652b2e055739ec74ac5c460652a1dcbe4a6f72d011d25fc1024e5af050eba1e8d567d86b46610c3fe02577bfc3042fe391c0742d26744394899b0270d7eb8bc3bfb149065e24bdcf2645c38ce0a82e62eaa5073dceeeb7d8a863a0e9dfb9ca32ce256f853d317a56e46fd509623c486b467dcd33ce3ef37c933bb3be6a2ed29181c67c8e0d0a9ae788d7b29c1c3202a2e62654c8b4369ef7ec51b6fa50520e31b45ec90c29199ad5b85c7808c57f3f8c8f143f534d5301a1b8db81adc7236fa079a47099851dbd4fe355b094381b758460fc41de40b70bb481727160aebda969f939d2395f0eff15b5501c3d9fd3b166a27c123a724bd48b47f96600b8a3ca5e050ff8d5a6b2e0de98fb50e359481ea6418fe71c4d335c8cbcf981920ae6744eca059b6e98007a1dcde1852f2e8038f820d7fb979f5d81b31e024bd840ceb3c52dc9360408a10eb1010e354fdec3690f9d66aa6a9e3691b9277f3bbc5a7f35e471200d230e7ef8c9133a4b966ee9661a098ef4cd0abe2aae82ffbe111dd734fe4a8ae4665092a245823104b8eb725fa34712e9db10be20dca7af25b848f03b84f28b5272732177df803886e4aa949206b98c550f032ce42a20b19b51cc2462ecd6d254e2e778ae6e256d80e250b4bf3eeaa6cee0187587f4650c0846b83eb510fdf73bb22c885db3fc7909f292c0ddbdbba9524ead6806392102d7050622deee622341bf295e010173e726e5375455e0e89cb807988cd73104dc6ceb0448e4d2348ab9f03643d711fdc3f3a931e1a85600fd6ab4f1d04ad3f6b51b492af187519f05b3d8125e80347b64ce4af3ba3b9b6a67b31ec851e71150991baaa058dab623b3f9c79955d73924441b0c87630316a1680d357aac2e667b222b0ff69c2e1918e3f915217b1bf01f8f004680e17ac3f824481703c753079910883c693b6dcfa17e4cfbf8596ff228f61cd6b55d60984686a81c95f0303e29a6e379798fafdc3b0416afecd5ca2b4f1be645ebbd7208e02f5fcde408e14ae6586ec8c7b531c964e61650278276d0f4ca45cab957afabbb643961ef054195f85b4c6cfac179069e49917d2545cd429ccae44ae881a5d4b33c68bdcc86e1e85055e82fbaf234ff197e186fcdd5508b8004b81ede75a1be273b26d6157f8e52bef59440bb823fdf4d5e4af089960a51da57a0fa568c461204de7d0d247bb87723992ee581c1996584cc586adc6a97df38b8bf22c8bfc34f0d6ef7e55eaef0959b268da9d5d1c0bd86156637c50ab1eb180af3422cdb2120dd9f570e76029de776734c857115e6590d5dbbd9596d3151ce79b53d8dbc0883845e40349ed4e27f8d5d4cad7cbd20f97c087fd3f2df310142a6cab023aa3931edc43e9b3f1e1cab2fead96d040689c9e041be92d220788ceb4588c589b334afbeceb223416b59afc3a9fc57a70f760123404239327055e9de01f20a706c282d884f528b57b77f0fb25e841b8ee677c07bfa509083eac83aab2f82e64dfab88b4b6a4a26afa2fd46c007c856128d45bc73a9d65037b85d80fdc21ddb5b50f7dfffeb0b05535a7f5a94c8acf052e8f22118cadd56de86986e0d34eafda8a35bbeb2d61f99263778384ae10c5a1eac0db8583d2ff4ab153c35a77e9932561e5c2aafb93b57bd19a3771d1edb20616d91ec4099e7d0814d709470b93bca87627c0ff10dfa6672b569c2f1147cc00eada6aaafca0888f5c71fd66bac624cba998c874bc2c06cc962e82369ac066d45c960b3379bb162e2623d3bdc42987503d5ed9328441e3ac0a2c549efa1427c351e82ac33f6fab5db991dde8f81f0eeb43484d53ec26599bd1b02acab95257cd2b5d3636055120d1a18c096bf8cf39073ca8c50da8faed78dc1ea67e83e319b7330b4d586921e60c763b97a22f362fe7c5722f55fbb149f48125571d1e79f344b6e446c7645dd71f4f02291d488b331d410683c114c310e0eec691ee1f7dbe08bda95f1aa369fbcfc3ffde5d9400ba257fbeac8265998779ab3483ad4fdab51868cb50991607a55b489ae20634c682f94f89bc5cedf5478b07ab809d9dc3f01b37320853aa8dc02cd3c1b05a34dc1851638c69439743045038bc7201b7a593d368c138dd573b1d585876582ade83423d367fc63cdf06e0805114d25b0a4cfbcf86a967382e9b1af9c344f8ef6a845d2acdda091fc2e9672774bfeb3cd723ff6449ed7d42076dea8f61cba577ef32d5a4fd31608e0ea59147a80feb18cf177dd08b189e3c587b11cbce0db76b3ec15ee426892fd0130d9dd7ba5bfa9d3128307e600933c5c2fc0b6ea308330c9ccad0c0cc5bd4970adbb40a615519439f45f73ca76adc62e114f016b3575fa3802864c19d9f7771d974956cd98d36ee0830a426baaa43789f14db5459557f93e6d5bb7b2c0b2468d4c8efa52332721c7e731a26b380cca413d123e74e779613bdf4a46d933b6759ed60e25a9ab3b3db8ee3f98171c11146c41ef5bd055fa35af23a475e820e7bbc69e508144d8d0f5af9e5eda643a82cf6ed21ef2e9c43f58a4e7c086bb4f7581fcf0bcdd5755b9273a28fd0389891cdbf7137411002440a50bb5cc77efbc8a86e5c74add0282ba3c56ec1c36bbcd3264753df97321429a6da78062d162b7b2a69cb99cabae121bdd59d0cbdea20d83b82a76725b77a2e7c5bc8c6436630587627b924788f5880d6a0f7981684d197584822606ccbbe2b8052f15b15ef8d099681feba9396e9ff5919bb5ec448a3bc5ae3ae8dafd3b0b06fc7813ddf010eb919abdeb6829307e2e061c78550272e207524043bfba609aa7ce00dc358136653e1dda58c5a511819435a8b1daed75af646913a138015f1102bd0ad5ae8d18ba368e7e7deeccc3b192e5301328a73e4677cd568d81ec61a3edacd2b7c44bf78e76111e416e12f28cecf453ef9fbe34bfccfa1b29e2bffcd189a5193d42d68eafc574f00d52d1ae35428ca06f8b7c667ccf2816ec1d44a7ba5fd36c225254a0fc4f6c66fc67dcee8955cbad32b9f18595694d829dd360d0ab8949d3d8c805929d88e7626b26d37cefb8156c0a5a1ae7bfc679fbeb168a8ad5bd3ba018a2403ff0d393227aa9d698b0b19c50a3332b7899f2e772d687d4f203fa17c0c5573550c7d0bfccc86d4da6859de6644d34cf0d33edc5850dc4eae4eb46eac7186d78d9038b3b0a39f19ca940a68353229b4be59c27c822347432e6f9f5f3ec731396d85f856d0b63a816eba95b134c4a689a45d1fa48e6211089141bd8cf1cd913bcb80bababa126f40189d8b1bb8aa1f8bfd502981aae95a0672c7254a8dc11d4770be11c95cfd32f38f06026604f0a82f9aa7bf726c2bb113c9584baec40528ff5971f429cd54e588d9a7f328363484acfcedac49fe63aefea4867fdd0e7cbfd5e87efdce5c528c90501bbddcfa1bebd0ffbfba857b88adebb804043f45647e6debdc8ebec8251b61a004f05c978887845b94b469213e729acf696ba71845bf56bb70be20484952ac602121f82aa8eb0cae35ce9957c10568e3e165761be8488cd7a89a81483e2a0c9aadd3ffb1388aedcaab6479663fb274a507b6d21edad3ebddaa2b2c16649ed86de982d60db44b901fe6bb45fc28322dad044f4757c171decc0243fa00f82f06412518f61d8285cbb921c4898f129c50d901afd17e2e77831a63bcc91e5149935de61aac8cf99129bff338699dc1e63262d77ce8cc04b8adb468561a590cada41fd1fe213c2fdb3bf739c3463ff3b8f56fe51f45e8820e3a7e1131396bdf04cfd834d93bec5d3e9668a6a5629b50e85534ae7faa79b5f0ccf0b967ff5160f7ad04a823a0c3a1935505008a37ca864a320cf6f39481aea46dd4f66a2e132558fafc872876a17a6ee8f146825e3a6ef50255fa5609666328ced86b436a4bd6de010b16813ad891ce6a099ec6eac3458894b3888bb3b844e08b7edfc1b8c9313477eac236d57ab35da0e948df90919a5a9ec1774ec1bf9a9d03251093d62e5ef102eb63bc5c298c040e3d1f5a29567f708fd560b2f6f98c8b999e00f728d81582b3edb3402380399df1879c937fb773ba86fc23670cb4e40adc642b05a7129dda36d1c143411a3e48067fedc8188916b8eab4a883e7082fbec478a88b8c235525d6e63c67295b5782f885590c607a4b474dac0a15c819f12e3a41884cf2c8ce3d3128991f1d54519b1f350a7d56f89bd1707f0cc91da07804094b0e1071dc384f6ac43e1e648a1405e0a6ba6713428b0439f9577a10fe1868831fa7190e9c2e0d0819eeafed29a01e5f2daa5a26c68a5df178708e5a488b252b0483ce95dbbe771da444c2511fc2dcede23061381c2c72f1bc048c9a17a509cfcb6158b3fc48bec29ed1f664e6eb8bd4d92bb9dc5ecd520000797d1ab326da5b4f65be43d927719f9dc9cd17c69a75793d364e734797e431e67f6ff0bd4b47b95a1dfdb3031650a2c02278f378014173115475a390c924cf194a0abc092a97ab9821e2be85d39f4354ca3a47ad96cc65bb7ded3de9bf3d4ef18b6a8ae53796e8ab0b7ec32cea6d3a9893f51711bb22241feae870cf847b853e286f268fad51e49b44ff740c6ab24c3d1868300caf0fe2cdc95b228c5a0e00e01dab722a4d6c2f592bbf05fdb01a3785c1d5ed2f0ff8cc778cbc3b76644510150ad92918ed20b29199b1298ece8632be8703e95845ea2c3ad28d97d962d8e23f2c64e1afeefd4b678c62b220fdef31558c14684d2511c2fe58440907d32bc085a4db9d2682a4ec7894cbb81259d3a612d9cc596df4d658e58b98f995dafb48e274d39ee148da424a2c18de9670bbeb308fcbe52c3e75fa80320ad5220cb2c159f2ee385bef46219f7e77e38010727cab8b5bd32ca856acc93c8458fb5e404a4176dc0314f41b902506c5de9f7b7319e5daf51bbc0d88831eb240bc092cbfae6c61c6a58dcd82e9815b822ef23bf564076219f2fed805a8bc1d60752936a4de565416684bdc8b98437d3d6127fc6edcc17f313b7a625de6631a99bf45bec5c708707d5ca992178a1885af16df52d1a5193975ad426f25b31f40e53bb3cfc5c54f79cd05933445e6ae03f73d5e1720542fe78da9c442917dc3ac5ec8caaec6f030095f826fceb7ff1cac3ebab7acfffb947884093441ad0111bf9d27023c1902242cca874eeb44aac0e63705e648fb6641781376213bb61a14bd1968e6c0489986c87a16470cbffa28ad9ab14cd0552f0f3268e2f0a80ae2adef1587ef529b99ec785c39bd5230fef04e432ee5c43b44b364068538ec839f992b2d1c9dfd534b118cb9e4c9d111f9b63ae594a80eb08c7eae7120f5f6fa11e88b825d2ba2996b59a3d562d3c99a460f8d967fa81a038cfb8ea9e910a2e6cfd44b578e0e7b1da27bf1c0641a14726da345be97e4a9bce1b25a51e5d69c996416755624410bd14122683f649a3700e2c3bde6a88bdd06d251148ada84b98c90179f4e1fd03ab13451411aa379089ba208073bac67b8445e57776dd93b3c508cc5adbe3b8f8cde045c037c8e6035014005e27e4220732cd8c48a98a809d06d262074831602359f73a5376be88905c80273a44c3d8843681a701ba91693d0bc8a9bc07d575411d701d7a600a45ef66ec57ca26d1af186f3b4150cc96c9725be4d2c8dd05795c585a6a97fd28ace400002da918e23f115fe86276ead22f0149d864b4aafd3891c6f0a46c8766778628684363dc3e4082ab8fb14810d7572ddce89301b1cec56d2a5890128f59ff14ca9f417c20dd72629d625654fabcf38aecfd6ea9f05078233f4d5c55b8811b82d0ac614fa093ed4c6d7ef397c0a9824c955421a4671a199848ae1d8b912f9986ebe5605d3954ac80b6c6c579cae544f725b0bfba2f4600e127f0b15d6b99f16daec2f0b41babe7fec278c741da27e0415faac71078e8b1ee3266803605ac2adf4732b5057d6af3804d24c0ba70db359aa86833f1bb19f0d126da237d9412a9faff3719c44954cef27126eb091a1efbe71ac565dcc58c168803622ad018b9ba689b990bb33b37d749f48e4a4bd98d3cb333116763a7faaa21518a51823e79c880f77b24dd0c5d60a2405323628db05a3c486972051ee091571f573ee2e9450224f87e88e80b9a285c32cc9b24129b53b56cdc105f7087ad78bc1b92e270ef4d2a15e0d43d5838d02406a00bbda487e1e49ab505cb4ff28eeea0df3486c873c6701607274ddcbc7c7aa8823e7ed1e6314a3ae015a8f14a22d08eb69022d84db0f91f51692d64c07ca25b2915a2d37b90b56c01cf46f8161a7609438ad9f35ced5d4cbc93ddb63d1c4a453b5ec4a740d6ffcbcc676d2913e967846738fc0d82ce526ed7648e8cae11de8695a64b9fc8030c5d9e2e99591a475f1d867fdd6e178a0fb02d85c3f6d3765a999671c928400a91f203764fc59bbbd489a1e5bf8e33ec8a5f4d41d96076fae96afbc73b4d6be5b845c2c4e174e9cfa59939adcfbe4141e2b6b01f422a20bb16662c1d7f9f54e078de32341bc10e9cb0246f12d733889215738f8b9f5e9ba1d70418df94c8c54fabda2f959fd67159da5d62c5e0798ef1a55f8413e79604dce04a456dab31aac567da487dcac0be6b832fd545ef937a360ff4235fd8b0001418bac631837ae1a341eb68e1b33aae859efb8076d07661686c1f1cabc2e0991bc6588caadde1ed8cf776fae5fbf8391cc171161f83ead97591c07827b892bd70e5ad2d5682c606306d7639a915f462492cd1e08ac79fc8ff4b9fa580f4d756df1fff6b988e81272abb96ee19ef8aa12af4f0570b2a04d7ef03bc09f10b5449fe45d3d896785fddb1d7dcfc9bc64b733b549ae1197a73841a92304edd2856afca85352debf259cf7e99af22524784b675fbefd695df87183b48b340d3aae9be34240ab056e9a2dc000d6849daa600871baa2bcc7b37cce53ba25f6a3bcbe56a02ef659ceb5ed34bd309f8fc70e30b1202c2f92922b894794ef85925be7011981b764f4e2549e7f316fa167b1517a00153cdfec7d20e610dbc7a754b26eb26e0c6c66f532859a82d036c5fd9c1d122013f11103d8daf1121c487e7598f43f5186acaf5946843382dd263521b0ff7215bb50bead07b651049553d601d58c98f4a97723bc4df062c1f5daf0a1b8837a0cd6e86f52a8741731312b014e35f942a9675859394dae9dd05bd5f5457362e10bf6c631b19f9ab57d0102b6ef9d0566267dbd771861868446a893ed29cdf723cb68af4661377bf944c2e37048c9768176e29857ad9d72eaf04f756eb1a4795dc942efb2c35658f76e58d0ebb258eef1786cdb0caddd9efd8bc528e6d6d0e1363be7e5962b7963fba1a6b1d87b44015904de920711eede8e4c0847c3f5085ec8e943b69456460134822fc26a33a5f17f6091ef74159ac03ba497579398f51cb76cee4e2d1ea70134cf582cac336bebee8b4dd3b1ca79fe9f58c0b62f30f921f44aa10c899bd042ab7a135e9a0e2d93c03d1e89d680428466ec69a3c39b124f41c47255d97540a35e55dee7ba84a16ec73d575c586349f2458197ff8dee0c93d6b6018241a216d4cb5ec9e8a2582a122aba1f1489ea0b8cb851e0d17262775edd0d27c2e3cea7cc3d435ec92340c542b5f3f25f15116e15c9c8e20106f726d875bd8f03aa5d9491e8b374067bf7337ae795636e8c372f52490dfb3a22c99c4b8206f0e6ddfb24cfc1b02cd12b734c15a32f88b152691b80794c931495b9c1b55d7fc8f5f521efec14a349277549331237bc4314b38d60affa419de66801659a2261fe1706181ba02001b00f3387e04f376b98e4f8c4bd1f40796439f22ab28c23ebaf7252c8e303a370d89eb13362bb08c3b4185233a48828bc3343b708ca4869532ab98f67e086f4267b98e050eff2c1cb161df145feb1fa7f60b2ceffa528ddc096a9c96da1f3b9a275263f5e9f57023c6ba9f83a61713924ba499d6530bd91e7ddb23eb4082184315f3f7ad8ad269cbe6daec4b09d2ac1f4f265bb5739563cf81ced2e8e3d49b0db47b8a08fa4c404ce16892e6b2e4f1606772b6ff76e127b0a5fae82fbed9ff26722be78676703711a6305b3f26db714e30a5e040bf61af89b4a9691624338c88d46a1a7bbfc12893c122d47d559be208ac3f5a91fc5267a7823dd97ead06edafc75b56624488c0a434d00f57e064e488eb8d2f75e67b66d8cca553d8e31a5b2907185210445b79a78f295ad61b5bc5373a67c6253a4617e51d60b16ebaea403965db0ddb6178ccdf093ac61a3632d8db8be93d962aef2541b090f32b2b079affddec06b4e0d7eebfe2de214d4985e3820bd9a80533473fa673e06fde81ff4358a41060a8d63d032af0233f4014b22711f52b37d9557ecf445eb3b43967775dff17183d2dcf2625d4bceeab20e307dc33c03fe2b70f2587740c63ff627578be296e924b328d63b25632a5d50340b4b57d419a14c1b999f712edd4e37574aff8292dc8d6080d3be66627346e9865b4dde46cb001ecdbf76ad5a89db4722da535d91b62942a6a59f66dd51c6608be41b929d2ccf124555a4429fe5daaffbc42d46732d23a6e4f68799df303b70b7c51b6daea688b2cfe6dd75f1a0d0e2abddb0a939cf0330feefb496d33c51990717d90cae3fee9eebabbda42e8933232bb895f30e3045fa59214cfab5c296d378e2f1312644c6ed8fd37fab31bf2b57b5c35288217d9ef4248b227012e8a04f3c4b0e6cdf385c336ca093ae03e31a7c91af2248c22b56f27f4de6c6b71fcb87bc9d67b97198ded8c1e2dca60552b62fb882641d816b6c194f2604100488b698b7cda4034fbfe754a46cc35f42c10b3c56fcb9103626bd983a728f4d36750d4175716c71e0fd92585672085a78ed830729cc6e626ff8d1fdced31f50bc134baa23bd162ad644e03a1fa14d2f68002f400393c088ad2bd615e5eacb6226684d818d708c578302a8b02ce2e1f1c2ba87cce565397a8fc8015855ba2dab9ab5656dc313dd01e80bd4da720ed2697dcf10b2b572c30e650643f55ce49e1771a77c1bb7bb6117ad18007a3da1bc47365a3cae090e379ee37b7771678a70b0d715020ec9c2d8c13cac42aeac7d1617c3cdfabce776a8c5a2226bffd04e19baaf25e87f779b54a3362efcad4531620b502a5c140d1f84af6a970ee3f8f3a610197c40330f483f413f50ee8f5ae64dc9d82831bd728d4773da5612fde2d0f34976b0c1746ab229fabce10d4bcfc4b931348e95d0f9fd7053719706a8f89726d28472e0484189c3f481772a0d124dfa83f87dfeefa8a1983a719fdc49106c9de1a1c63db9b70a5d15266dc39a73c385db2e6d8de588327607ca92fd05e9d65d9518f048b8c229d01a769f67a75fedd86cb1b3c05fe4dd8836311a31be3ac3a5818dbde84234bc6f8d7dc6008e7e2497549be21011c81074ba9d234d42f8eba65797f8a901ac4f18c7d981636c46d982f9d1f5e65cea33160574ce64758341562a0b89c8cffe7b87ee9d165b70dff9e3d0814ef4034a5d8eb94b2625dc146ac2ecddf39d3234912a94ef479381254400fc9a047af3087490844f4ddcfb03b8a8d19919342774f11fcd19e6a9c1fdb7ab1c7d3610867194b4e351026e24d2f11418dd0fefbc3de24d140da892c1c9a92affb2965d4a8a0fe0c5947191b8d979e363f58a1fd096319d52169899a2b83c2abe6f695a280447cd73ccb0e2781fec3de6ad1fb62427809f37d00eeebee30b2fa14e0ed660be65d6b5610c4242f3fd32a6d66fc855c01d996c10fe07df723e6b3c418642dfe7497a63c34dc3340f41f50b9ded4ea542096f1a6dbe76b842526de4f7dc10a1bb115cb2de234ea01e7baef0544496f4cbf82cca4b50ad75e3b66a670f36ddcf575fd07cea1982b75cb066e48de034046dfdc9a2493c741ed844e647e11d767d1569cf2506c00e44d4acbc8de79c5db61ce1125615a9a6a54caca2f57648b2d38e997d29f555921114faeceb51dfa4ce62cf1d28382108c880fbe3314be39d0be10872349653c2051a465f81a97c3bf8a0114a588f87bd580fce037c5af1058238c3f71e9a2344ecc2021e32700cbd973243372f2c070c8f960d2a0c8e93dc1c482fe112f0fb42154a51feaadd2ca25f4e82289345fd15c7b36a78445748f3b5e16d9f46d79637d7071fca69c6eb808dcf1c9a2843e65ce4763be4af73fe54609b33e131772180f978502787d37b14e671b7e0777b11b638f5292a27d480cda8ae619b3d535c4d97dd4f8034333fa607aa3396a828095144403290659630d738335eae9be7efa86d445a015ac68ecc866aa616c8606c011d36875d6db3373546e0a0c2e6a45d383ee2b91e4154801ad643c9cf3f924a498578a79affbcc8ca3ae756743fa1bfe72c46673aa857b93e4fbcfd001a211f692add2ec7d999e2f43b58922fe72e2932d11f8d652e6f3278881654944e35bea583fcf753f0b27dcae04c65c508b354e903f11951de9826cc268a57759659cf2c855170484e47dfbf9253f2272139a717c97fac084a566b62848a59d06b2a64bc783ee90b308097d061ad64c9679feb6af18ffef6602642e14bf4e59199872e8d2fb834f8db099c427334f99d99cc06b46e1afd21c1447facd164ead8dfd9ad91a1e4ed7ec85ba0ba074bad8bfa0ae7bebb071f463871c81b9aa4477538f512087c4a70b4bd2f796d56a5ab6f1544a358221ec2a8a365d04f61413ff55e015d2bc1cdbf7ab5f760383ed3077f775fb28b75db3aa782df27f296af0e5cfc7e2d7acd5d329dd0aeb7fbabd8487463d8f896074da40dc65c89cff6ec968ab8d917b8ea669c3e9fd2a20b6ff57eea0f59a2ad3153d2861653c33f164115b78c10f942eef9272c906c8bc70ef5dd40cab210ba043a0723001166b03dfbd6c7fd081e867d2c91e7b8f6070a6721a3a82e60dcc713e5681baa50b8638f16ed26ba457fb4a6e49bb3f60554169fbfbc7bea1731a90022602aae0d6cd9dcf08b68cc28467bc033f50dee886584dfa6ce31c3c24b9cd239dd8d614ab56ce8acfb6b14197d32fe530b96dfa1b7c9066f41dc2b0380d99062e3bd8a6819ec5335c75c2de7a177bf2071093dc8e30e0034920862a77d753388afae18911c060289e785854f08d0d4e5f6e39259f31452ad30dd2e4f310514f52c14100cd39bebd1d82a3f0d073012d806397e089bc6eafc51ff092719168f8485ae804e2b6f1664f72219e33fa98b94b6d5b2501cd94091e5928b393ae2ce0677f6a4a22d66e836bb0af70b77d1d90d1ac667fe8d442f72a7c68d5b3b0d7b7c7f7afc1ca7af88e72e62b91d1dd1660be7aef0e07a3ce622d8d3c7fa19596c14f1149e9754cbe001e493fdbf8e1058167ad4b6c77a289c7ffe9621fae664bf21003e8fc1a0c91217172b75fd40c370b708d039e4bd6364cb529988ee5f2dc6d21fb77923a9bb276e8db61757bd3cce93c649d36422c7a42a8aef0cf5a8aa0a678ee5c9f0a7d97fd7b780c6a452efe22281ea0c91927d81b0c37ad49bc1f05b5a2ee00689bfa7e1cc8f57663d331c79e1747c4d5ad8cf23d69381fcd53cb281a61cfb42e1aecb886dd0941e1efb32edbc97c2ebbe9e2ce0c7a8132788fe97a9780524a57865214748f96597c99b6e2dc068ce5a8bb7ad18fe9a23a54a5aa1b5854d463b69aff2ac8db589e43ffce3210851e6b0f406742edbcaa6c805a134328fe6644aadfcb7a77676edef25a29cdd95aa931926a9e36382a8ace2dd209d9ae7ba581d175f2efa485377c8863215de247a565bcfe92041102c4b89d072e6db85c72a763e86e7423cff9","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
