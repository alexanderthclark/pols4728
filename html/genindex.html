<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #4CAF50;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #4CAF50;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #76B852;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"7962fb2b75cf7aab6ba0bfcf56da307cd7071e12d619b5a5457131286cf4f6fcd519e6b1b9ed68a9fceb72493463d4c9b400e2a93bd9844240ee248f4a25d149bf64b8a80a145afb243c1e04358bcee32ad40aa7cdddc8880a89dccbd9403de73e46c9711903541c79a24394454050e1db266d649b4526c06aa45926545ccb55edff5ef9d24d20b36087dadf38598561c3a998ac500247105aae8c18d5af5d3a311210e21e869dfa5ffdde689b547e7e0c87ba899fbe838c309f015e392302e7c48892d0881e7dbd3404998ea3eac8c568d654be325a937c090d771b408d22c9661a132ca7e1294f8ee021e61ee0e67076efa244ca99f0535ebc294635e67e55f55b70fda4796f996f2ffaa0f19cba4a3a370ced445c12a84b8a8e3fa3309549c02805f5a2d29a91315aa654203b3b4c5c9f459e24a3703895726efd763a437c09e1dba9a1344c2dab4e79bbe801b1cf9651e37921456076e33ea6ba1d6a7ed3027d521cc8c7d27159bb6a1d169830ea95bf1c97c77cc39084d93691207b84d043c8b7614ab29f18c147d916823af7c698119d63871e5247425db1f7df67dc3ed0202a0a300c348f0565dfe59368e17711f0b41b2c90acc2687a2b7ea64b3b3edac99ae5f7c6e29348a442ab70d67984ac144b1fae65c71d948eed36ee2914f37bbe1f3fda23f4078ca44fd65173ae3b9472edf9761f94bd4ec18ac5c4153967f2fabb5a41fda0539448baffc1a11d50c2406c3eb9a2fae67199a4573522b364e6e985ad2c0f531af7d294d2f28ac422f269f84ea525a2f0d4ec6f6147ab60bd2daa1ee7a84358d3362608a01710ce6dcd0f606a410c010b92fc13a59b7f358b62fec75106fbdbec9c40d0cc389557b4e7d5500a150d196d576239233bae570634c47338735abd3e4b3b525c1907f25dc89ca9d64c0d18493c5f837cb08785dda8d8b16e3fcfa2d287792a590dfa3db34bad04a43709477e12ebd5f6d1b262d7b22eea796c004317145da8080b1a878eca9a11e37ea83062000a3b4e0366728d1e0f3008cba3f694eb142c7760c7602e1621c521e4c77baec3fc07b9acdad14d1840e93f3030c2b9609dc3296d3b273c77df7cd1e0cedca60fe03f5401259d5744172c02d0432ae2f36066bcec20d15adec82d09ab6e1218d36018a7c191572c9aa6c7598f0852c7f4d629c382cb45b3b67b360c552a09107ada9fd9fc267c069ed0542bbeabb6dc246fcce09ca6e187486f2ac4e371d21f5d3e130d1070e9065e752d875fba8b3b2b16619cd9d3f9250e81c0f059767fd5aabe92dcaa8d31bc55fc8ecfd6e1ebadb5dca0d5a1246fa35a3414014f11f7929e6b082e29a4192c4ac1e85798b5b7362d2265705ea04fcc8089b88d57b370de4bb60fb860ae3382433ba4c449d8e7f19c75b0ecfc840999ec93dfdd309a95c5f3d308712a43368a39655e44a7afa042b94cfdfdbc6d363edeefcb29de62a8b7eba4e1380d7e66b16bd0273b717985d0682d24c676bc233b68623dec667e22cb800407ca2f98576bbfe4d02929db796843916dbdc290390bcc850e40253b86cf9e0749b57d1cca26da3fc2281402187088239d0e423dd144feec9cc0e09ea53ec54407953400048d56c116046378525d10549b5505e9b7a12fc1da4da7cc33339bb3796522284d801d647b2650e4dbca69280a76cd81f510ded337b06a69d181e84bfe1a61ccf7c29d603240a92c76966cd16dd4342bfe55cf1496a99c81439ada07222acd808993f9e5ebcf3d265a937bdf9e693400cabfbad02d989be72d8e4a693e548125e149a2ab388796a91aaa8f52aaef5b9a3e7bd36b4a5020e6a2bd78cf3ce26b30181df60dd1346eba23bfdf370c342ddd9491b5951eb556818cc1e38732d6d2a0c8cd985f37291cffa3aec5519b3fbdfe1d67e86874e395e86f7877ef66100a8c7d3805d7388605fdb212b35053ff6fe0d9656a8e67edc00524304911a64846aa580a64327efcfb8e2e51bbc29572ea988e1def4a6ec772d84cfa447149d4f9764b3d1aff9ae6f3d2dc8c1a3b34ace924893a07e1b769910815e8692b9e3049d2bf1a1491086395d8adb88a79224dad475182144a6f9580bc5e368c184a06a53e756db31a4a57587a0b8b554fe99e914f4c16c845add087f5f4c18c7cf344225cdc4a4879dac13f5a583e2ecff537ec6e048939343bf29efa94728d29f07ff0f85a8054e4ab22936d09d7fd8e8ec0757ef60607bcef288e80c234bc624b43a65da45117b894f0fdaf8e4e120c61596a440ba07a2c2339b60bfad183873235b89164849c466325c592df473477028380a8cdc3264f13ce81462af61993143bedf262d694e617c3ca71b89ecf993493d59864365e4fbafcd43a257efaf0b431f1e6f843b14e9591094ef5bbd9488b300be04d008aa00526ac67f5c72d8d9da972aa92f4d92eb937225b230baded963ef8202387c839c18a74965c3ced836cf9215ddfb1309f6416679ec070e317e6a8a7c4070049de7f5e5116bd827ec5a4cc0142871c603f3413228d0c45a14c181140fa380de340b6ff7b4255dc6928859aae52608b9f17d8ecbcbe6d69c3d866e2d7cbd2c3b4b02f4b0a428c65ed69e06d2be1d5cff3368c1ec6cc3df0bc869045e3a96b1ea1e910e8fefdeec282bb150a5ca62e39651fc836f81ca635472387434dfadbcd1267611b303140f274346f579322c5a2fba4a52172b38e45f3a7223008808951e779b9c31a43369518af97d985e2a10c2642fbf5cfb4ac474c041a9e057943e018c579913edf5a66df5c3a25f4d76f64db3b455abd1604b065a1cf5fc2b4b0d606f58cfc54a10735d848f0025bc3116f8f562e601aed3f47771cc467d81d68fd13b40dc3e9c4211872c271f279d56427fbca3f26fa268456fc56928766e8744f0fbad1c2bc973eb56f4ac6b09e1127c67a0a93c4757128fe6a0ec8afcfdfda963a2788bee0d4140caacb338ebdebbed90277a2a1d939cb0c35101f425c9e037ba459f96d22601330b04bf82e693805289cf781e83fed975b75d9221f680e37371d6df0ce32957dd4efa668e10254aee2786414427837ef866af578fbf0a4c1c74677928665b5b7a8c7a8abe6b18c6f9a835510d1d7e3bb5e3adabf1a90886d6b4947446fd466a56813abaeff55d67cc795d698f6516e8bef7c39080644f7f2e323c06ca560bcadcc89a2bd5c915d71874d1053975008e0b604b6f11c1ddc9fa2a47321fc25655adf80f1d66015ab93c749fb39d4c441270d480cc248f52b11045b2fc8fad7c7b98bebdcfa2a323555c0cdd80cd6ec994b50da6e7c69590f33768adc7bd2411bb5673517d85dcde8949b5111374e91cacd10a28e2262667378a05e106cf238167fb600564b2d96629a0579619e25fe308de284f9b2c1a2562ef296b579e65fb0473600ca5fd5e2aa06fca0d35caf2ce6096a46c5632cf9b06114f210361277794aa3482f3fc0b55f1023e538728ecf835096eaae33b6e563228c91402cbaf8830a42e5aa892162ee3aa7c9cd8497de9f47b6bc6d364f4da1d49c2c074530735dbbeba97a91753ab0b85dc61b62ce9498f6f444a02c51fbe98d730d43d7d32e246ef2f2d1a64f4988e435c1b7832046b2610442f7bd9793c69721220961351ea9b3aaad9aa98b5a2a8748178d4473c0b8b47ce2f1e5f537ab2499143297b148f0ea36cf9d0beccec665ecf7d519a33f3d7fc0b3c2698c16ee61b6331ff1ecfcce59becf894ac4df50857bd395947aec6164fa294fa54f8d729421a778fb19a26860124350dc87242aac331397b9c0ae480b99d1183513744e6373ee326592dd555742d703af8b56f06582e763d6b3edac24ffb7aaff680fd0f079a0488a5f5e3fa6236c1a32632eb09bd436ef46127b7907138eb91eefee0142d9948edc8630099a4640835cc57f8dd8a0dbb6562db503421769db95a6e206a5dbe8a923d0106a18114b6e0dcc9aa5bca256501389c78392f88478cab649f6b0d7f5e71dedc3b515fbdbf26d82f96cb5a6f7df8d51eb6d53526898103de3cb4fbdca20dcbfbcf0da683c78ace092b7516269868e11ac91335c33cba260246b7e72423864231a29f6c6942aacc153eebfa7ad10ef1506fc73236b6f5a8508e0d093893a75cb78c71871ef3eed5f160d6a1e4e21b2c98a53c25d777c85969bd6af9222f3be37baa7e1bf9ab1481429a5b0f9c18102aa68f18f5b53f62900cb9c4dfc706ebfcc8e1e518f457568727239dca58000e48932a541a4cc2eeb548a34700487b47e476c48f63cdfcaf5cd37206693d0f6131ff557513049bc19912912b547d87ac378e8b40f57bb21c79c9b344518ef7059be7b46109b4b8ffcc27fdc7e9a6dd505e399c150ee4338879e71d067b9e48484c7814c1e22d3dd7cf21c99abad01c64f26575c9ed162b65f5c6a623956a8e46dd0d5e5d2d2646ae60db460106ad342b47ab37e51a31d997f46ebac3c32a9f14e4a114b5c4441e873da20b09de03ae93a55029cae881a423ecef278c479b3dd56eb6ca16a53f45c9718cb8216e68225e35982738bbb57f6f6e052b89b48cae5ef65958c9ca33d20b6af6db681dd1712ed4f8ab2ebaa1ae0f7ff603188fc724cb7391fe7b9366fe7091c6ef55fec95beb5d346b77b36c087e1d5dfdacb661ce70e9b8b8f271ea3b3397d18e6ae3f95bada1eab717e84a83f1f098dc81704855d2d22650ef8043cee18d461fb9057a0a64c921eb7fd3445c3832cc6a2f104cb7e4a47cd986db6e865e25a14f36cc2ee8b21b3a394a50759fb1ced691c99c8b122aeccfd42e740d3d86c8329e2024936e4250021ff5de0b28695e0eb1790f55d55a23a41fadafa14914ab3d1c19281063e4afe7eda990d263d5b3e8ea912106985bc869f93c8b2b823a1abae74494af8202599047acd4354e62624f94f49f93ee66560df3b2856d66d992dd82488dcd583c57d40ec8ec3588ccb5e15c815aa7f9ce06af0311db9d6dd4a07dc77026db215d609d1b249b9b61d2a3d47ab626c167752020a0810acec33da686387ac4cc15e1f9ade18a76ec8312a614e32cf12ff5d55a76af9f0ba984624ff78b81a80dd30bb4d31bcf16ff6b83ef38ce7ddf91e4a45f48a5072c7ad82055849fa0b7fce9ed8fad328de1541b9c83e7f460f80d130ed6c407685de4dd2a5a23bec71185576cef9594159118786399c0ee79f4fde59799b41fda7c48261fc8c57eaa234ba66114b803a1d1ddbc7c28d0fbf9151b130d89618f8491f3236781f37e72583a2fceb16cb47d769e772253445bf0659d5086ce19b36f67ea4ef0ef73072819c9480cbb6e296087d2cde3d0c102e6752488f6f2eb880e0c1b0145ae76d0ed945f5819542b4ffd4121343a23c7fd77f1a00947a14a8b4f439e7805614ee586b57f3b8fd0d183b77741ee3133addb54a6633f20dd85ac6d4ad6658d4b35ccd0135250ad9d06da88ab32cdb028db383f745dcbe1312f09fb3cb91a4a090c5117e4a713c866d325e29241f1821fc7b78ea39d51d3692e72f1069d2761b75ca39e119829b5a06783d653887bd540b12ea68e73a5a95b896761ed80f7682d870c256114feb4ba329321fc21673a2857cd627f1669fa7e5122d62b0297004f65fb59abe1272ae39174f5cf94d062ded810d5dde153f78dce0310c0633928fa9d7eeabdfd8ef3aed70d6f4cd4e920cff459f9710dd9388dd4ad71b4f1a1347514be94c87ac069705592a4ff4b7856c35f2a3c4b794e7735f053f22cbee10d70a30f49dde33098b03904f49f8535242cb45f7efd5825a930dccec635882d3d41b7f97e554d58973eb82a70614d615aefb62b1aaeb2883ae03db424d61afa9d0f153d8a10f933fbd497080235d4149f43af06e606d142004c2f66efc6166f474e29b1d68afd4e0d3c3246997c6028ee4d32160d5152845fb2b9f184fcf60aa588217ae22424c25ca11c18ad708c88cb4a4ac74dc79de8bffef974023bf27146bd8a5eaedfad6812ee72ca4124a832ef8e27ce6e1042e3258fedcfc5cf3d0228b429dbf8e29eb9db76ee67bf6695c7720e62347be93822d6f7f1aa72abc7c734b2a3f2ac5d8567beda38337f0770ee629604798c7f7c1a8f21ff3812c564b9d6b6e6025cf8959395d01ed179583896c0769af8bfd25e9b813c4bdd4edc6da9cabe52fb9e4fa4d92b130aae195fb5b0a6fa1398f37502888a80e1d2119a8d2c0377970d893400de01a60d993f8ea624ebe77ea255cc4cee2a47bc5b3a046bcc80a27b51a7a19af16f5e0cadffa0e6e5debaae1d800dd6d4ed7882994e2e9f0f9fba3cf23ebb547136926d221dcbb64f7d14a4c068cd4d204652fe8b341e92d213542c5c3f8534c06bbe69d06810bde46654dfbbf0d2ce85dc56c5adeaccc36e7d1313d220be0e9dfb8f19d7f3c70c6c8a30db29f6afedcdda15b07e1df59ca548d2b741024c6fa33f84a9dddf40e27e79d5c8e63a3f29f54d9c033786ebeb626d37cf381f24254461706335ff94f710040f46b52b1fc1cf8a52d5691d0f6b7e0c4d2373cf862c8b3c805b9c18b880ddfa3b5cda302c3d9d7713d392598bec769da80176769f96db8a16e313ce625aaf05dfc6dd7956ccb4abf7b5fdf60cf537dec98337c53145122aef5c72c2533a17d01203e563bcaf9d7db4972bd1dcf15fc0dbf0071446e3d7c6006dac8fa2efe761f5fff231ab5741049089a86371fac1c85c836cc7b62641ca4e692f8ed53b7a5e1082a2e7e7f6bac1a5df3885d5e9f0eee70f451675479484fd5fd3e343ed6ea9d107f53180730d662ba4ed2eb7c820757df55de2e87ea0539c0f2c5802415b70a3fed2bf0debcf60f7776b73c47b9672f01aae56463cb706e2477f952c64f859401ac03a65cd9cdfbb89e8a9a8679c22f4f5299bbedbf4ced902f1347dea0a050a779c6f3767225ff778b5defb943fbbd588aa3d68bade7896baf95e940bc424f4cebeeb6da969472873b250ba2ccbefc4b126d6e16f5f7404d067786269e0f8013fce6cd17aea6a4821d17f4ed9cdec8f80e5714496dea92838b23a997e760a4ac7c960b15b549ac5437fc5a3042eb5538def7749632aa66189bab47aebb5db8663ac9c09a847d2ae69cf958da66bee85ecdd60621fb6b2ef29284063668ed69dade3fea2d45668a1ab3e9ec2a3b450e2c64159530e0a6267bb807d41bf8916f17a0b1a3dc50157d4adeb9d5d84c330990cbbdfd12c7bf2267f196b47c53b93f1c9c6b13132a5a36f341251625d420227b5b2e71904b1123eadf5f34f4d79f1fcdef691916eeee676da6202fdcec94ab46f741d7943499c71d2856498475b81965a2cc8c24f756835e1294cfc857977fa86726e27ff550fb9afb9fa2dc7af869a708101d585f518f15065f49a31ff0a3dccdbfe3bf4558e31e31e1986e86360dbd91b80c163c31ed26d89d22b4f2cf1889315a9a6804ec985b6cfa7001577fe9f635cf09b70fc859d234b45785c72177967647c6a378f06dc182f905c3142e0bda426cf970a951395aac76a2b2a566f1c16535bbe03d1cb30da8f19490a4945a61c6086613bbff44f749dd57d0051b9eda7be535d1cc0c600dfe2b8024d8c7f0d7c40fb03b10510e7913d4b48c3cf18e5bbdfd98dda9255b4e4b3df0cd3142f9b106b4014ef55f75ad619c7f82e0092d1482f081ff40e9f4f5f91e68da765874ab9a51fb2d8d8744b4ac19483a95a62791801a3dfbc3be6922a84f2874c247b7964049c30cb927c0b91db0896fe0dcbf86707bcc6c583a8ba4baa185a492dd824db7ab18866e96ce421fb11596b971f72a151c0354353680f696f6cf5147a8f08bb762492cca1e4fa545a14099a55efda395bf1e2e7406653b480116aed6c8a85c472e5630707c3b45df8b1483b2af418504c2311e8f20331a031d5a59a938d8c77a651dcc9f5129f23bb835759c316fbf204cfd65dce71dcf23f879760f211bcceba450a24f19f48e2c49b0ac1aa217aa0a9c7f1e1cc3273a473bbf4554514c4472340226259ede0e8f1e0f4fac6460815931474cd7756fb178cae0567dc12eff9e115f252f2662148361e2eb9aac1336448f04a2c9d62b97a9ebc6114e3a823527eb512ebd0b24c1aa8a81d2a96e91773de48b7310c5c4c411e42da1b21695f622db1732929e58ba77d48eeaa16a4044bc4bb75775b32b70e632a260f857e738aa1b335d9a491e2491fbe202a887cbcd4ee629f9889a943b9877720c7be0ab12b2f5f9c89dd16a72bd2530f6d4915a73a10df581591329eb42138048147e1cf7460d3d14ef5d8fb02e2166c2effb15639c46b9fa8258b2708cbb42c13e42911f72a22b30efa447e6cb7feef32a8f6c4c0681bd67d0f3d480143111fb139d6cb5992029815f43e851841041c8f57c67694df56a7f857c829aea3b220bfe554c074e682f7ecd0ead19401a82845340af56d2a7174b1479c95a397b2f5556caad75aa0a0f99633bbc85f7f32aee33847f90c443941e61b9e0b3c8556893227d95a904f96551896f641103a35c22f9aa7cf661921592504c4d4ea5457e646b19bf5e47cd1eb3cba67074ed15bf96da41cb11f76f486ae93496dbb9c259894d747d3a57f474760a5ffabc08f3a3baa0b286a468f35fd40ed7865aebffaa5f79403f8af9c7a61fe863ffd6ec30abe1bde256bfffc8f6e6f438e82954fb79fdd9f146c0a04c9bbe11636ce228082798ee8d9601e947131fd456aacb61f30ee4ee77dfcad268f7f659759a71c8a7edfc5b57f33e2409c5320a93df73e6df4ca864b3d0321f0ca2e65693f7f51caad7628f57ef6a8f3d77cdab54345130848cd793ab0251ec933d5ea95654aa312e327961e5ceed4da239a7e4f9b3c40b533bc0ca53bc14dff439dfee92e5045225fd42a8c35f5a60f7da904029ee3c39c781b3e69bf8c7f91267e7dd315077f8cbbc09d1cdc694e11d87e555717bffc4e571eae14f75ded81eedef3eb66a3dcdb6324f41226951207d08321e32f899434196dc1dcbbb100217e1029cad86b860598d85bad1ba8817f9a650da678a4da6d24300e4b2aba157528340d711b783dea59a3ab51ebfa05a88f71c5f71c44a4177758a93257474f0c0bcf90b121f0fa78a476b8a88c44c0b54c6b519d74cc87e0220ab481f1331e022b8931647b83eda59ef057762ddcc569e12ca7ed24fc215a422e3d2d7108389078cc71b11b3dba3b33a484a11e93b8d64086e18a1e80c09142708960db15270511b19ebc797d42a47b01fbf24580b5c701013de55e21541fb7c124c008d4f76db99d2b229c8f526046c1d60fe1bd6fe9cedcdf508b29ed0a80f8e78d7015647e1a92c502d11fa8d27de6bb7c8d055eb902bec31cf103d52246f1e95715ef2c7545a103aafadee16fa5979b285089b1e81b13ff59cf68dc54053d9c5a0d965a132458bb774f9b45b8d23f41ececcf93d6cf65aa4439738e914342110d4ba323b50009d17340807c7d4bcfb951063c26b5e80d56dc8a76bc114245a1e62e9f46897af761a9f22795e8b928ba4e02559833dbf57e3ef6416bfacb4d3abb076753cc3a1c23ffafd666dd2fa552708b089739ab878938dda5aa13f9db5a73d0d9c8185e35dc6e45a2438cae1069c8520121c5bf239ad6d8d11f3b5b8e5bc355d29c5e79b2258d0fcf82ab81b0b41b34b665c3ff619d3ea41e8c43a89d38d207b91442dfd073c535fd604f20fc1422a10239cdb6a8843bc4468fa0ed755c7c92ed9fc63e53224a398e998caded9528040b561990aefb4e64317d72e455cfa73c5d3b9b89dbab5782acfabe6411a519a9adbedb0af98f85d89856c1b1493702682a9c48fd21a025d15ae9c2359ae4a62d1d2b1ae319b9b3c03de8c8109342bb80f5d8d0dd8ad8ff1c7c98a2e072173146b93bbb227de660c7f274c770cdaab15d5a1ac5a5c4d5c3971d66c47d96d315dc8b3e724c5ebf5c88f45c0402fb4a05ba4c9247f8f594a8a6bc3e9233603c3def660e6c7951aac9a4e0c40a45d80eb325eecf3cb072ceee1947362d52b8e9a8df984ab11f7d457ec250d309717ccd0a4298d1ec457428be5a45b99907f75236253d00c4cf5537715dae6c17b85058fa208df5be86706bbf39a2cd54e542f66504e6e6b9f07fdb682fc864b7c2931b61681c0b2a438d5913bacb32e8c62827b6c723f777b66a3a1392933cda320427b3f67bb3268d309a77d076e8097eaefbc46bcc94f7626a003930d6fde63fdd50186fbeec200d08b5eb11623b7967a72f3320a708f61ac0a6690eafc1ad21d9d89099a11b49c359e795481b75bbdbb69f54a85267b1c3de9fbd2c27dea37ada71c7f23aea5e2887db828dac9aca3138beda5b6665cadd518d5892c4b229ee304974205f8faf2af8c09f9b62745805c9180643018705f3befbfd4068498c67ee26c7ea539480e78fadd09a3cbc2077cf22d08649e8ca8632f2d840c6f59886f2032593d6a4abcbe4df0a7e2cb8cd5ff2f983ab8bac7837a584df77247bb4bec7bb3c4e668530836295446c7eefc7d320fcf5f38e61f9f45689fe028a14c0bd5ee1482f5264064a5620433dee06758aa080ac48b7112b306b9ba2d0035767749e9556b6358beb7430ee0322357ecc20ef38ab7093ff48199d0ebdc91c184998e5088c0f896c510b661eaae5db66b0de91aa447dae2ecc68b4dd147a583e5fc32b484ce01693cddcbab9a0543eb09bf56a9d3ec6c594ad070938a55ea800b780b3dd7b0bcc32a43262563a2888144c45344e3010bb6e272baa2362c2482ea5930d034625bac49b7f5cb89855d58916bede77d6d40ac99e5c3936ccf138a6122e9fbcdf106e669ef5b4c01218a47a49e07bf67bdc5fd0899c3a47d273b2187cb7f4831a3470553bb0e8a3589c22a610a584099694c778b8ed8b45bffd305b973d5b4e5121657b53dd608926974cdad2c2c47eee75a0b7114acbe7fe8f024554b18237126d44fd4230845a308a1ba98f5d5fe597989a921a06b4a9ba7e097f797be8d8e1e4bf39d24e47802fc1c82840c84d17c15e14bfcbec9c19e2832b2a376ecc7028342d3ae2a5234b08ca909984a109337fab21a1bbf94a2fa026a92503a49376466857f8f7241cea4ad87612c6321601240eef47f99f28e6babe390dfd5a01729cb7266220c137ca38a5e11032621f7231e46fcd333251ea8602ee8e7c1409f08dcf61cf9f0c1e0fd6d45352ffbd17967323b9af93d97f3aba9bd9dcc1a655571a61bb73e242b73a64042efe1ab6b3527038569aa75bcd5fbdb1461a2b5f89df7277c555fbb4a8e6beb00810ee5daf019b1cf7d3f26bac3d59b7aec19ef41f12c3b9fb8f40c20845dff9e70aae78c07455dacdcaabcf4f76c91014c0171e63c14c55b9b6df915a96b93ac50bbd23f1e28279b343aec899e8bff646cd3f0c434c0ec52c1117452ec650729fff7879c36b68bf45d134f62377ef3924ea6bba65326b715d8df8089ac33c0e3555ed1ddd45018a1ec0d492bf44a73008f09575097b702c69beb811e4a7129813920b1f8dd3f5e2a3b0b76e7b88aa9173a54c5320405d54208e92e37c3d06145f3e3f0f3a2b1b8d6e8520150952d24ffa406bcdeb584ae4e14106ebbc27fe9bd2e589ffd94cc3186ab1ca8e2bee77335bab9a80b38a0777a9907a8b289cacb00808c1072fd44a972923fe9406e63e364aef4cd4b8bb406755c5faf5444a2966a820a50187d91b670c22ef15483d35c663b6e6557e5d520cb6cbd1cd516b37c5fc65227b88c88a8190e682fb15cdaa8c51d966eb81373ee6b7442776460e1eb5d3b69f5e620359a595c992f81bab8d13ffcca3744bb90f6ed9bfbb22317b1171568d27614a8d7fe99bd1cfd08cb6f28f0fb7e5a00607de83ea952de8295310a77e0253d71c01a2da07d7a765063d16d58007c6d487087713accee328abe161d6e517ac11f9a4ac9c3f0e2ca6abc2bcbe0faa367b00a9d2c5cc94d44a1bd3e9d50275cc6bbe280d98a0342a2e13408dfdb62c06e32595fa56d69d9ce20a3092c5f307ffa92f02d210bd6172aaf5ae38302aac7982376bb36a0badc3a17bf50c085949b7aad09e43ed175b4515e39dcecec712fe4242309c6ad37841eaea776ca319b1a23ae39851f551a7e68f29de0dda035145ca797a3b90cb574c21f71d7ff63eb5121a3e8886872d1b3e55a716c4167b50ffbf5be571e5056d7b4230da8fd60870cbf447a694f5db36eeabb2f463d625d35970851020c2fac7cb4891f4a5438bbc18533e23bd0572d8a239244c9901af7976fdae6a0a24c3bf07449282778732670f0fb7dcda75514783aaf1675dff43e1ade14761ba9d585daa3429b92eebd2cfe7c792e55da2b5bbab762f5c7c1dc4a5d006543872a9e95a3361038079d2f6fb5c8d4f36de9da689cfb4c1ba666526fb3d14fb6a52a23696fa59c083b3c95a79e2fd39c260c573f939611fdf62ccad429bde635a093a29ebad5edaabfdd737d21d2d13dcd29de24455101984f36d81b738cff5ac0b8d696ac82d2c081df087d25663bedb37dff41e9fcdce478be74e3eb8e6aa883e8c77d2c4ca68f96477a84f389e8c11dbcd5571f41604f6bd880ecee30c719c443202f39a4cf31b6f92f3adc7fada8229504dfc067f2212b1ec995ad2b79611ed4469be2d564312e8a34293d2e48238dac63af1dfbc33bce3a5fe132d40f4c74dfc9b233bcc2069cd07aebba4eeb61909b2e8bed9e528ea32334d128b35302a63810423be8b57fbf04b8dfb15d968324881ffb0f5126e17e2243bfb3f629ae232eaa1a19a52b689d7895c9a3896af4486fd914ca8b121190dff08bb3da41eaeed778c2bad687d2906c438b14103fddbf15d68f9e7bceeb7d72183c7d3a3c57066d94ce599bd93766621b020a18e6891acea705047aea0cd6f54f608cf196545174580c7a5a23ef98bd38f9d8569a21080a9e2427bb123e95df00d486ada373b60585c9e7d6f30469c5c3a08948f019e37e473267d00dc7d61acd4fa99be900045e85ac37ea26a0a4826a4068c7963d092c96ffd53db7cb6c67a45a537fcfc204b459da4db2158123d3712a86cddcdfd0333de526aeb2e80f020e0c4aa1a5196e22866ed68d066e4b91510e61ba70b4224f3e94784b64f53518b03ff56026e9959e1c7bbe174d801b42554aefc81e8e61d1488883627c96435f393910444712939f98d471350d4207d5a103db3eb17fccf16cc0d15b526c2fe96ab4ef4735342a21a978a3cb019e415dae4dbd440eb4b9e29f879c97d0310176d717a208fa60ae8e9b55c74c81e052617167fe960ec7a8683e6b2079c1f2b98d97b7a5d831df7ca8ff84e599e671bd7ed2425d1096a6126b9be08e7c74eb4d226a9666ef5063d640b7933f9e07f58d9676da6a7bd0b3d7d76d89985275e6ae09e947e89c8a4a445724cbd1290da5029da0a75ab8b0f4b06229361a6d08af9ba73223c6751f9becc9050920e9031894e12cd0e0626334eb70298a9f9b0cd4ec63d5eb535909c8e8d92d76a290d80c6fe38a55c89dccccac80331f7921480b8dec8a06b3443bd5fc17d2427cf453f5365d7031192718684e576e74343b20b214f456e97b7f16c80153e70c5b26b32905d420b023b8e772d43043b4cf3c40cc5a68a1c822fef5e0d643b50f1bf451941f17402eac3f0d2d5e0a57190c73737dfbfdd496de05131d5ad02ded1a469a67cd492621ae85495a374a79f483dcf04df02b4d73144d31e6a858e760d3d9e6682bdfebaae51b1237ada47dc6f1ba4250cb5e2c548aa05cbb0623e1a653929fa81bfd9f7915673a752c7b9ec7ac5fd160a128b824cfa53433da300bb9b2a263cb4205c8134f2529574e01783cdd0d9ad08fe29049dcfe510a6d79d42c91ab72942cafd097efe39b19ae2af9025f83b74072bdd2f6e557402aa01129b97a22dcf4ef451376d460cbd6f8fbf370ff260871bec705b4b02cc87199da834b7eb51a46fd176c6dddd62aaad005788f3b32493665a102fc0098feed02a68f7028cc9a8448ffa7e6f8de59c2f06063d7649e448e0f1084c3026d8fb166fd79d841efcee25959cd2b3528c54da3f30b0e9be7161f3bb7d0176753792301285740297eb8e4387f28642e648fbaeb72d38435e9af957a254174206213f6797a12e321bff520758b22fcd7da3770ed469e972975b776ca75d7605dbc58b27611d88136790e7f4e62ca2c0b350af976efe9b9ac5a2d03632fb23d54722c4b89f2df946b30276ac989ade28ee0292794fdef8c46280c53b46f803cd52c0f7b850315f6f52b48bdc9b63189a232763afc56f43850b8d1aac7705d8b67653ba5932a2ab73538212145917f830aebbc46c47990674c746ba8413beddf3ffc7ae06e3b0b8ee88acf133497fd780b1e58b6ee295e3a70455c5e7acfdb1d2167af862efddd637a31bc3b99ea93f08a81b4223928471447fd138b4fba0264d5a47d0eb11013a5ff2fcd846b1210d12c375712b293bb9a9b9202efd1af5edd7e2d34c165b550907d4c019c58c771c79774dbf78a24b729ef7b47a227f3d06cca9b8372708aa89a373f769b39ae0f86c06ad551def2441e2a3a999063476dc0a643382e7b078bcebf6655199bf674931a7e556578cb1f687ae471d39ffc6c51b95801d1ebe66719b51874468c6250d6df3ae4ad9c286f6aa0085d4091b68aaed59f12788a6ec36984143a69705fe030ed4d5358b13fab882b72df37f47dff32e4459c9b8e0a9d149380ef908c4b07045bdb61db35d512e65170aedfd57b586628badb21c74b46986c0c66d5a6baf1c959ef0b2e295979d3f2e5d33babefc868793ad8204d31e621f517280015691ed3408e6bb7ce5aecfe2246e53aae6dab70d7603e78ecf41ae2cfba3ffbdf919255d0146867ece83a7867bec9768feff0e700b393707c9a5eacc397f31b2c4c95df71eee01237a2c2982db27ad3389d715e7a3d21836de3ec8323dcbcbbe53ece5f5d674437c3862f9aec7872cbad6c2d28a09cd4e294b30187e060504f2e73f1e0a2927389ccdbe04a8ff6dcdb61be2b4f7813538ebecc337d4e9c61c360253a299f9781c2843741572f3265e472173c07ea520ac6610db87d8807de4e5ce78e545d766ed21ea18be24700161c7b2a363959196cbe5e357d965fd42d24f5facb47f70f76efce4f03404769d1b3e9ccf96667b83041d27a1c95ba8f32873060c2a1ef74cbd4c88d5ad7f138ff69261fc564c3138e4aeae842fb9e89a39fc7f43d375312be0749a13df43e1c937257a03ad7eb8dcd329bba7663915d76c0be600f0e28f62cd8731cf65bdbbbb840332935664716dc4ddc40ff216fdf6ca2dd3d8f81a1857269e77ba5a3192078fe24e47711235c2b8ae47c92ea3ac96e42e7c95f9833642972dd14dd0c690d410abf57b99ac65f040b8b3e2ae81e4d18ff15c4c38660a9ef713f4f0bdf0ccc07e420fd4ea33391b3b645461217ed01daa778c97162caf1661be88a659d154b6396449f9731ceab610f610e6bad9749b3d4fa3503250786796bd4ca1fbbbe6e740bea13a7fdf4d9d3ef964ef9fa99ee9b10310f40e4489b94182d7e4fb0c181331e9baeee517367b7ac93a1dd65aa172993882a145402a41092c53ce4fe221e272b8732e8398bc7cfa72c12dcae99b20366ee50b50567452f1b0fdbc560b8a8607cd42b39aef336cb75853fe15630639864433f14e02401e6163b9647e51dc87f5a69a82db4a4c1b4cce814032a3426578552d6ccf64519f51d898612b064e2626d24d0dfaf969d5c4780ddaf57b876391089129f8d7a234f6877eb9ce480084510ce36e72cafe672582bb1cd69ec01baee8a5edbec7a29b63d81a90b2b89d7438e66c651630f1eb570ba660a3ce155ac2533bedbd8a2f132633bdd47266f7b0571c865edd0a1a9517b1c53597c06c0aef3c434ef2c1036f0c672f4253f1f3deb601078a24fa7d5cea0f27837e54bdafee9153999a9c6c05adbceacdec6c54c9adb698e6a65f6d1d37a997ede078ea198de3f201ce20cf24ed8231ef0e081c6e3f38663588c72461d66e35123f75c31a9833b282551bb261ec5ea1f685c10980d0c3d414decb387d2b5bf634541e14f9ad30838936060a629f7a35ac015b53da898b24d2b05607ce1a83c27bc8624931e2cec92ef0ad95dcce092d21182ed1b11d8d8adfd6f464c36176759128c50bef9dc3f7227054c098cf5d803714aa7257b1cdf4bf073871be33b2515b92a70fdbc3ad5a39a45ec77cba63cd25edafd34dc07065669e5fd03863ac33b275101208e88cf6be07b62f3f4e1fa9c3c15036db29d797ad4d7af0effa80792ecfa8079c9b0965d0c0b44b339130a86ba24bb1ff644c10ad5b730671c8f9d461cc9d0f215d45234cb439c20cb97260559e74401fa46d9ce465a135e198c1092bc591668847db75e253954ad09a1b339c3718d26772747844d491d2adeec0d1ccfe28d376fb4979fc75fa3d401ed6f1ddd7e378876fbb820085be2d28f2e9719c7c0b1af02df67a9e96784c1c0e96267c2ba60a3a2f6b0694f58cf1ec15fddbcade687dffbc8b1effad4816a5ff0560789639173f180961e475aab77be8040665d1d79aa5b5fc56298b185370ff152d60019db3feecc2f1e83767ecc7c7c77bc4e03045c12f41fa21c310994179fed6a50ab65ca98d937cc253512190c0bcaf58a58c292f2c22ae17b814185cba37f700f30197438f5977b1b5592c3c301f58ea2cea75c65a4a84257bea7b555caf56c655a11dabdf986dac682a6f52a711a5f96c6d67fc1ffb9dbf0d0cc44994670f89fffb7b958c78a372e1eb69b11bcfbb25182cb6e4f3a34507378d384f8ae1d2c08cdde05090719761b017b230f1cccb61d014295e55f3edffd10a9fd029a8823e959f34ca3e3f5f42e10e982eb1c2e4b90893682afe744b161a56e62bc3f4e4e9de568c06b9bf93fbc2523b109aaf5bd4f18c52b4521357fc3cde056cd8d54100ed4df530b31606cd5256569e47b7149ac99aa09e0956d25f9058f3fcac88784770136e3f457fd85ddc80b8df531cca61766352f5e7d65c75c82eaf44c2223670888634a346efcfa8dc20956b76a29f32f9bae43e99859b6799d883ffd70bd7988fdb1eeef72936b7a7b08d16ae2b823fbca7fc333b0bbfcab6e5acc0b4f4c1da3640fcf25d35c7f15cdc5b6b192716b97ce694f0821b451c56523945dce53cb8999561333c27fd8ef584541061a17496c6cac7ce330a17802b6f37619144926fe30b07c4aed7d999f25dad6b309857493923223e0db5a97e425cfb28c764834b0d4c6050def295d9edc37dae991baa06a984571026fc81205c7e82298f21551c834944154b07a23e8e89ec4b9b098cd5dd36308a7a7ff890de7f6c3c13993e2dd4c6b1c89a1c3bf551a39c5a3d788302ba6ec1af0b0397372ff6d2d475a2ada8f644425c512f2faded45948f92fd2496ca3ef7426a9f084a23e0f4bd584eb1758287432c4090ee7a2c310062c78ace454d4c7e49651662dad1698d6815dde2c343e418cd9ee141b999ff9935fe431991796f43986d234fb9884eba05ea93c1b37bf37c315a98c9ed097e446fa735a19dcaf145834f4ce2ea4149b3f01f087b8cbaeb9ca1671a7fc7482ee6c0abe76d26acd66ce2b440efb21dcf460f16679864205982c81c5abd70bb01d29ac71b63feaedd30eacf499fdd66603537ae091ba8660df73736f4c2acf32a5e7c1ecc96b957dbbe47b41a222e9d5e341a1cd1952f5ea3570a3685cd44c7892d7544b7c91b2eabca1c28b6f7906db897dc31af04398776db6583155819612537c692bad1456399da38c20bc66bdfbad17b9bd29097a48126611f8dd52c926262bcbe1f953858e16c9cbcbb3d7f86720f08303e022c2873b06d2e8ee4b45c9b771286f6db60fff14495e67ed8119f87c5809d198ade7eb560a67ee703325130f1d03193f46894e7c7e5bf8e234100bb1551095b2548abc0bae710ce2d5f93df5f6354f0f454262a165bb2267063865cc5e2322ebf43a136e6b6e03851d3360e159887aa34ee27309146d5bb13b7f93df3ad96ad061aca5533335552ed1b85b10ea37ce9a79415085cbdd82e3fd1a8878885facab7c3ca83abc3e0b1abb912716ab94546efaa21b1ab58f1b6919377d8250996289f3a1fadf3f16119e47071dcb68f7541711dc67e45e0f690959e163eafe509fb6b2b65e616a6b63a63e96fddc0ee30309eb27ed21dd7ee7647ee0c6b4420ab8c9c1fa30abceed2ee48f815512b9116090f963180de1804f15d36ea70b38c7d3f6f415c3a1948c46d57676769c484c6a35c33d162808956da17c61646e4d2f3f7bf4aaa5db97e79cb1ae33ea37bee029a3b41ccc3d7f7382cc383c99b33397ed5bfe48ee6111807a4a399880c944379d76c090fdf7112e71b03678023ad16488774b012926341d248af5c05fbb00d42a8f12b426492d3fbf3de4fccd3c48c97b7f00afefd1b8645a48c9af9b62d96ee4e94af7c73cc5dc5422fc16691a64abd1a0364a1c581ec507cc919e303bfe5d5737053b9580948ff7168cd6f53038f5f8c3fe86049526dabdc3328e175bba6b3820de7000b3a3022aa6fd0f8565585f9e77f64b0704d78d48ff930fe2863d2e36d4f92cfad1764364740056c8364190b20986739625ddb2ccbdd09d303ba8e223695ae598bb07d6b145e7ad4f1869c68f310dfd4bbeee58179a957c6ed1db41108ca0193ca7bf118f8ad79bdab7ccb0316156f0cdef14ca5e2ab2c78a0fae4bb69501167762c27e8c59126ab749b70160d78affd6fb15b646258b37b2f2204302b2cc53f4f03c939f17fd8fa0cf7b7f808d91ecd456a330af0cae04e2f7b9d784052047bc8e8d8da840b227ea4e37754be57681d7d62826868e543d6362b4b73d8527875c9cd8ffec67823c83e9d1458c5f5d6270e23771a64759e3fa3850915f98a4e8890ccdebe8944b076a33c9a44f3a7cffa0b54f5ea0544418a861a69ed36efdaf8e6cdc84bc004dcd272b69133db9761495e0aa4418ba9fcdce6ba3a015491f6e1818e4803574e837860e32f42e63f0eb4b9564325c319fd5bf9e0c99ffda676618cafca825a591b2fb99ef86e9dec42fa483aa23fb0c1875fcd8b3b166f7a907b2b85abd8a0e68c4a97540b02bbe565320da5bb6b5b7447bd0ea5191e3259efa63da209ec90b1646c76067a49fc2dffe4bae8984d2be7b054abb7b21921134395db0130a9d22aa34448c9455b12d8e1ccb6a98a3a3b7d2e5652f5ab7bbebd488729f72488986e456b46f9d37c52680b246ef4de1dd75a6579c1d7294b077ed9b5b4b5eb19411b548680469ba32c1dc7b41afff772d98335171bbfdfbe6333ce1bc74f73a422821c016755dc52150574977e49c753d3de4b068bea585faa0962d268d026cd8a086f0371616951b170872a541f777e517370152867276be19dce3c24b4150709129bf8e7019a4edf929e14d4be3b66c06ea4a5f655fc860406c020cf9976c3fddff94db1b8548e59c5c6e1f2d40a0a664dadbda4d94e9098fc7c756a44f8c2bad41bf6b12c81ce0add0bf08359d93e87b1be16b93178acb001c15449d8b80dc845e2dbdf633610921278401c3d9043e935e3b8470506e7af292fd24985e936f1db921e88ed6bf779d4cf91851f074162b93fa33c067a179ebb9de20585749255599cfd16b6d31a4a121ff5d73779f28e44c5c466f27f3f36edaa5b32811969302d488064b8e977311b5c93e041761d4","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"022f7031796100c2f085595b3725c2b5"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
